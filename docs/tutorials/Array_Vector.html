<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" data-whc_version="26.0">
    <head><link rel="shortcut icon" href="../favicon.ico"/><link rel="icon" href="../favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="越来越多的机构使用 L1/L2 的快照行情数据进行量化金融的研究。作为一个高性能实时计算平台，DolphinDB 非常适合存储和处理海量的历史高频行情数据。针对快照数据包含多档位信息的特点，DolphinDB 研发了一种方便、灵活且高效的数据结构——Array Vector，可以显著地简化某些常用的查询与计算代码，提高存储和计算地性能。Array Vector ..."/><meta name="DC.rights.owner" content="(C) 版权 2025"/><meta name="copyright" content="(C) 版权 2025"/><meta name="generator" content="DITA-OT"/><meta name="DC.type" content="topic"/><meta name="DC.coverage" content=""/><meta name="DC.relation" content="../tutorials/about_tutorials.html"/><meta name="prodname" content="DolphinDB"/><meta name="brand" content="DolphinDB"/><meta name="DC.creator" content="DolphinDB"/><meta name="DC.publisher" content="DDB N/A DDB 200"/><meta name="DC.format" content="HTML5"/><meta name="DC.identifier" content="array-vector-的最佳实践指南"/><title>Array Vector 的最佳实践指南</title><!--  Generated with Oxygen version 26.0, build number 2024012323.  --><meta name="wh-path2root" content="../"/><meta name="wh-toc-id" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;?workdir /tmp/temp20250305183303418/tutorials?&gt;&lt;?workdir-uri file:/tmp/temp20250305183303418/tutorials/?&gt;&lt;?path2project ../?&gt;&lt;?path2project-uri ../?&gt;&lt;?path2rootmap-uri ../?&gt;&lt;topic xmlns:dita-ot=&#34;http://dita-ot.sourceforge.net/ns/201007/dita-ot&#34; xmlns:ditaarch=&#34;http://dita.oasis-open.org/architecture/2005/&#34; class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;array-vector-的最佳实践指南&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Array Vector 的最佳实践指南&lt;/title&gt;&lt;prolog class=&#34;- topic/prolog &#34;&gt;&lt;author class=&#34;- topic/author &#34; xtrc=&#34;author:1;12:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/author&gt;&lt;publisherinformation class=&#34;- topic/publisher bookmap/publisherinformation &#34; xtrc=&#34;publisherinformation:1;14:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:1;15:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;printlocation class=&#34;- topic/data bookmap/printlocation &#34; xtrc=&#34;printlocation:1;16:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;N/A&lt;/printlocation&gt; &lt;published class=&#34;- topic/data bookmap/published &#34; xtrc=&#34;published:1;17:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:2;18:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;publishtype class=&#34;- topic/data bookmap/publishtype &#34; value=&#34;HTML&#34; xtrc=&#34;publishtype:1;19:44&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;revisionid class=&#34;- topic/ph bookmap/revisionid &#34; xtrc=&#34;revisionid:1;20:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;200&lt;/revisionid&gt; &lt;summary class=&#34;- topic/ph bookmap/summary &#34; xtrc=&#34;summary:1;22:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:1;23:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/published&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:2;25:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/publisherinformation&gt;&lt;metadata class=&#34;- topic/metadata &#34;&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:2;39:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:1;28:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;category class=&#34;- topic/category &#34; xtrc=&#34;category:1;29:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;prodinfo class=&#34;- topic/prodinfo &#34; xtrc=&#34;prodinfo:1;34:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;prodname class=&#34;- topic/prodname &#34; xtrc=&#34;prodname:1;35:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/prodname&gt; &lt;brand class=&#34;- topic/brand &#34; xtrc=&#34;brand:1;36:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/brand&gt; &lt;/prodinfo&gt;&lt;/metadata&gt;&lt;/prolog&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:1;3:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;越来越多的机构使用 L1/L2 的快照行情数据进行量化金融的研究。作为一个高性能实时计算平台，DolphinDB 非常适合存储和处理海量的历史高频行情数据。针对快照数据包含多档位信息的特点，DolphinDB 研发了一种方便、灵活且高效的数据结构——Array Vector，可以显著地简化某些常用的查询与计算代码，提高存储和计算地性能。Array Vector 还可以存储不定长的二维数组，在数据处理、模型应用等方面都具有重要意义。&lt;/p&gt;&lt;/body&gt;&lt;related-links class=&#34;- topic/related-links &#34;&gt;&lt;linkpool class=&#34;- topic/linkpool &#34; xtrc=&#34;topicref:31;49:75&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;../tutorials/about_tutorials.dita&#34; mapclass=&#34;- map/topicref bookmap/chapter &#34; role=&#34;parent&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:1;5:53&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot usertext?&gt;教程&lt;/linktext&gt;&lt;?ditaot usershortdesc?&gt;&lt;desc class=&#34;- topic/desc &#34;&gt;DolphinDB 产品使用教程&lt;/desc&gt;&lt;/link&gt;&lt;/linkpool&gt;&lt;/related-links&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1-概念&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:2;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:2;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;1. 概念&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:2;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:2;7:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;DolphinDB 提供了一种特殊的数据结构，数组向量（Array Vector），用以存储比如股票的多档报价数据。顾名思义，Array Vector 的每一个元素是一个一维数组（类型完全相同）。这种存储方式不仅可以简化某些查询与计算的代码，在不同列中含有大量重复数据的情况下，还可以提高数据压缩比，提升查询速度。计算上，Array Vector 可以与标量、向量或另一个 Array Vector 进行二元运算，能够方便地实现向量化运算，提升计算性能。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:3;9:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Array Vector 和矩阵（Matrix）都可以组织二维的结构化数据，但两者有很大区别。首先矩阵的每一行长度相同，Array Vector 无这一要求。其次，在 DolphinDB 的实现中，矩阵的存储是列优先，而 Array Vector 是行优先。根据实现方式的不同，Array Vector 又可以进一步分为 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:1;9:162&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Fast Array Vector（数组向量）&lt;/b&gt; 和 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:2;9:192&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Columnar Tuple（列式元组）&lt;/b&gt; 两种。后续在无特殊注明的情况下，Array Vector 一般指 Fast Array Vector。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:4;11:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:3;11:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Fast Array Vector&lt;/b&gt; 的实现有两个常规的向量组成，第二个向量连续存储所有行的数据，第一个向量存储每一行的数据结束的索引。这一种存储方式十分紧凑，读写和计算的效率都很高，但很难改变每一行的长度。为弥补这个不足，DolphinDB 引入了 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:4;11:130&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Columnar Tuple&lt;/b&gt;。顾名思义，Columnar Tuple 是一个元组，代表一列，其中每一个元素代表一行，但值类型必须保持一致。Columnar Tuple 的元素都是一个独立的对象（Scalar 或 Vector），因此可以方便的更改。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:5;13:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:5;13:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Fast Array Vector 和 Columnar Tuple 的区别&lt;/b&gt;：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:1;15:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:1;15:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Fast Array Vector 目前暂时不支持 SYMBOL 和 STRING 两种类型；Columnar Tuple 支持。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:2;16:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:1;16:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;typestr&lt;/codeph&gt;函数查看数据类型，Fast Array Vector 返回的是“FAST XXX[] VECTOR”；Columnar Tuple 返回的是“ANY VECTOR”，所以需要用用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:2;16:106&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;isColumnarTuple&lt;/codeph&gt; 函数判断变量类型是否为列式元组。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:3;17:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Fast Array Vector 的存储、查询、计算等效率更高，但更新和删除操作效率较低并且每一行的元素长度不能改变；Columnar Tuple 在更新和删除操作上的表现更好且每一行的元素长度允许改变。【上述的更新和删除操作是通过底层的 C++ 代码实现的。目前更新和删除的接口未开放，脚本层面还不支持更新和删除 Array Vector 中的元素。所以一般情况下，&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:6;17:188&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;推荐用户使用 Fast Array Vector (数组向量)&lt;/b&gt;。】&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:6;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:7;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Fast Array Vector 和 Columnar Tuple 的应用场景&lt;/b&gt;：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:2;21:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:4;21:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Fast Array Vector：数值类型的二维数组的存储和计算。比如，Level 2 行情的十档量价和 50 档委托等。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:5;22:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Columnar Tuple：需要频繁更新二维数组元素的场景。比如，响应式状态引擎内部会自动把输入的 Fast Array Vector 的列转化为 Columnar Tuple，以此提高更新引擎状态的效率。这部分的转化是引擎内部自动完成的，对用户是透明的。用户不会感知到这一个过程，只需要向引擎传入 Fast Array Vector 的列即可。&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;2-array-vector-支持的函数和操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:3;24:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:3;24:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;2. Array Vector 支持的函数和操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:3;24:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;21-array-vector-的创建&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:4;26:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:4;26:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;2.1. Array Vector 的创建&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:4;26:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;211-创建-array-vector-类型的变量&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:5;28:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:5;28:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;2.1.1. 创建 Array Vector 类型的变量&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:5;28:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:3;30:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:6;30:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:7;30:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:8;30:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Fast Array Vector (数组向量)&lt;/b&gt;&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:1;32:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:7;32:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:8;32:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;通过 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../funcs/a/array.dita&#34; xtrc=&#34;xref:1;32:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;array&lt;/xref&gt; 或 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../funcs/b/bigarray.dita&#34; xtrc=&#34;xref:2;32:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;bigarray&lt;/xref&gt; 函数定义空的数组向量，并通过 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:3;32:97&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;append!&lt;/codeph&gt; 添加数据&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:1;34:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) /* x [[1,2,3],[4,5],[6,7,8],[9,10]] */&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:8;41:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:9;41:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;通过 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../funcs/f/fixedLengthArrayVector.dita&#34; xtrc=&#34;xref:3;41:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;fixedLengthArrayVector&lt;/xref&gt; 将多个向量/元组/矩阵或表拼接成数组向量。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:2;43:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;vec = 1 2 3 tp = [4 5 6, 7 8 9] m = matrix(10 11 12, 13 14 15, 16 17 18) tb = table(19 20 21 as v1, 22 23 24 as v2) x = fixedLengthArrayVector(vec, tp, m, tb) /* x [[1,4,7,10,13,16,19,22],[2,5,8,11,14,17,20,23],[3,6,9,12,15,18,21,24]] */&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:9;54:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:10;54:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;通过 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../funcs/a/arrayVector.dita&#34; xtrc=&#34;xref:4;54:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;arrayVector&lt;/xref&gt; 将单个向量拆分成数组向量。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:3;56:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;x = arrayVector(3 5 8 10, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]) /* x [[1,2,3],[4,5],[6,7,8],[9,10]] */&lt;/codeblock&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:10;63:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:11;63:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:9;63:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Columnar Tuple (列式元组)&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:12;65:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;通过 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../funcs/s/setColumnarTuple_.dita&#34; xtrc=&#34;xref:5;65:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;setColumnarTuple!&lt;/xref&gt; 函数将一个普通元组转换成列式元组。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:4;67:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;x = [[1,2,3],[4,5],[6,7,8],[9,10]].setColumnarTuple!() /* x ([1,2,3],[4,5],[6,7,8],[9,10]) */&lt;/codeblock&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;212-创建含有-array-vector-类型列的表&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:6;74:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:6;74:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;2.1.2. 创建含有 Array Vector 类型列的表&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:6;74:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:2;76:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:11;76:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:13;76:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;创建 Array Vector 类型的变量，将其指定为表中的一列。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:14;78:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Fast Array Vector 的变量在表中的列类型是 &#34;XXX[]&#34;，比如 &#34;INT[]&#34;、&#34;DOUBLE[]&#34; 等；&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:15;80:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Columnar Tuple 的变量在表中为”ANY“类型。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:5;82:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() t = table(1 2 3 4 as id, x as newCol1) update t set newCol2=x t[&#34;newCol3&#34;] = y /* t id newCol1 newCol2 newCol3 -- ------- ------- ------- 1 [1,2,3] [1,2,3] [1,2,3] 2 [4,5] [4,5] [4,5] 3 [6,7,8] [6,7,8] [6,7,8] 4 [9,10] [9,10] [9,10] */ t.schema().colDefs /* name typeString typeInt extra comment ------- ---------- ------- ----- ------- id INT 4 newCol1 INT[] 68 newCol2 INT[] 68 newCol3 ANY 25 */&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:12;108:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:16;108:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;通过 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../funcs/f/fixedLengthArrayVector.dita&#34; xtrc=&#34;xref:6;108:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;fixedLengthArrayVector&lt;/xref&gt; 将表中多列拼成一列。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:6;110:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;t = table(1 2 3 4 as id, 1 3 5 6 as v1, 4 7 9 3 as v2) t = select *, fixedLengthArrayVector(v1, v2) as newCol from t /* t id v1 v2 newCol -- -- -- ------ 1 1 4 [1,4] 2 3 7 [3,7] 3 5 9 [5,9] 4 6 3 [6,3] */&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:13;123:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:17;123:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;通过 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:4;123:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;toArray&lt;/codeph&gt; + &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:5;123:19&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;group by&lt;/codeph&gt; 将表中每组的数据组合成 Array Vector。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:7;125:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;t = table(1 1 3 4 as id, 1 3 5 6 as v1) new_t = select toArray(v1) as newV1 from t group by id /* new_t id newV1 -- ----- 1 [1,3] 3 [5] 4 [6] */&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:18;137:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:10;137:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;注意事项&lt;/b&gt;：&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:19;139:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;因为 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:6;139:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;toArray&lt;/codeph&gt; 生成的结果是 Fast Array Vector 类型的数据，Fast Array Vector 暂时不支持 SYMBOL 和 STRING 类型，所以 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:7;139:95&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;toArray&lt;/codeph&gt; 函数暂时也不支持对 SYMBOL 和 STRING 的列使用。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:20;141:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;在 group by 的时候，如果需要将 SYMBOL 和 STRING 类型的数据组合，建议使用字符串拼接，比如&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:8;143:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;t = table(1 1 3 4 as group_id, `a1`a2`a3`a4 as name) new_t = select concat(name, &#34;;&#34;) as name from t group by group_id /* new_t group_id name -------- ----- 1 a1;a2 3 a3 4 a4 */&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:21;155:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;使用的时候，用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:8;155:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;split&lt;/codeph&gt; 函数再将字符串拆分，比如&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:9;157:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;select *, name.split(&#34;;&#34;)[0] as name0 from new_t /* group_id name name0 -------- ----- ----- 1 a1;a2 a1 3 a3 a3 4 a4 a4 */&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:14;168:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:22;168:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;设置 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../funcs/l/loadText.dita&#34; xtrc=&#34;xref:7;168:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;loadText&lt;/xref&gt; 的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:1;168:46&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;schema&lt;/i&gt; 和 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:2;168:57&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;arrayDelimiter&lt;/i&gt;，从文本文件中读取含 Fast Array Vector 列的表。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:23;170:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;用 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../funcs/s/saveText.dita&#34; xtrc=&#34;xref:8;170:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;saveText&lt;/xref&gt; 存储数据时，Fast Array Vector 的列会自动存储为如下格式：Array Vector 内部用 arrayDelimiter 隔开。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:10;172:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;x = array(INT[], 0).append!([1 3 5, 2 7 9]) t = table(1 2 as id, x as value) saveText(t, &#34;./test.csv&#34;)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:24;178:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&#34;./test.csv&#34; 内的文本内容&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:11;180:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;id,value 1,&#34;1,3,5&#34; 2,&#34;2,7,9&#34;&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:25;186:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;针对上面的 csv，读文本数据时，&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:3;186:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;schema&lt;/i&gt; 中设置 value 列的类型为“INT[]”，&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:4;186:55&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;arrayDelimiter&lt;/i&gt; 设置为逗号“,“。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:12;188:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;t = loadText(&#34;./test.csv&#34;, schema=table(`id`value as name, [&#34;INT&#34;, &#34;INT[]&#34;] as type), arrayDelimiter=&#34;,&#34;) /* t id value -- ------- 1 [1,3,5] 2 [2,7,9] */t = loadText(&#34;./test.csv&#34;, schema=table(`id`value as name, [&#34;INT&#34;, &#34;INT[]&#34;] as type), arrayDelimiter=&#34;,&#34;) /* t id value -- ------- 1 [1,3,5] 2 [2,7,9] */&lt;/codeblock&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;22-array-vector-的基础操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:7;198:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:7;198:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;2.2. Array Vector 的基础操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:7;198:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;221-访问-array-vector-中的元素&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:8;200:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:8;200:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;2.2.1. 访问 Array Vector 中的元素&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:8;200:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:26;202:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;用户可以通过函数（&lt;xref class=&#34;- topic/xref &#34; href=&#34;../funcs/r/row.dita&#34; xtrc=&#34;xref:9;202:10&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;row&lt;/xref&gt;、&lt;xref class=&#34;- topic/xref &#34; href=&#34;../funcs/a/at.dita&#34; xtrc=&#34;xref:10;202:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;at&lt;/xref&gt;）的方式访问 Array Vector 的行列；也可以通过下标（“x[index]”）的方式访问 Array Vector 的元素。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:27;204:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;当使用下标的方式（“x[index]”）访问 Array Vector 时满足以下规则：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:3;206:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:15;206:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;当 index 为标量或者数据对的时候，表示对列操作，比如 index=0 或者 index=0:3；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:16;207:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;当 index 为向量的时候，表示对行的操作，比如 index = [1, 2, 3]；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:17;208:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;当 index 越界时，对应位置的数据会用空值填充；&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;2211-访问-array-vector-变量中的行&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:9;210:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:9;210:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;2.2.1.1. 访问 Array Vector 变量中的行&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:9;210:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:4;212:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:18;212:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:28;212:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;通过 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../funcs/r/row.dita&#34; xtrc=&#34;xref:11;212:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;row&lt;/xref&gt; 函数读取 Array Vector 中的一行。【只能访问一行，返回一个向量】&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:13;214:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) x.row(1) /* [4,5] */ y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() y.row(1) /* [4,5] */ // 当 index 越界时，空值填充 x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) x.row(10) /* [,,,] */ y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() y.row(10) /* [,,,] */&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:19;241:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:29;241:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;通过 x[index] 且 index 为向量的方式访问 Array Vector 的行。【可以访问多行，返回一个和 x 相同类型的 Array Vector】&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:14;243:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;// 读取一行 x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) x[[1]] /* [[4,5]] */ y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() y[[1]] /* ([4,5]) */ // 读取多行 x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) x[[1, 2]] /* [[4,5],[6,7,8]] */ y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() y[[1, 2]] /* ([4,5],[6,7,8]) */ // 当 index 越界时，空值填充 x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) x[[3, 4]] /* [[9,10],] */ y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() y[[3, 4]] /* ([9,10],) */&lt;/codeblock&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;2212-访问-array-vector-变量中的列&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:10;284:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:10;284:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;2.2.1.2. 访问 Array Vector 变量中的列&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:10;284:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:5;286:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:20;286:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:30;286:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;通过 x[index] 且 index 为标量的方式访问 Array Vector 的一列。【只能访问一列，返回一个向量】&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:15;288:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) x[1] /* [2,5,7,10] */ y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() y[1] /* [2,5,7,10] */ // 当 index 越界时，空值填充 x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) x[10] /* [,,,] */ y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() y[10] /* [,,,] */&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:21;315:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:31;315:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;通过 x[start:end] 的方式访问 Array Vector 的列。【可以访问多行，返回一个 Array Vector】&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:16;317:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;// end 不为空 x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) x[0:2] /* [[1,2],[4,5],[6,7],[9,10]] */ y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() y[0:2] /* [[1,2],[4,5],[6,7],[9,10]] */ // end 为空 x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) x[1:] /* [[2,3],[5],[7,8],[10]] */ y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() y[1:] /* ([2,3],[5],[7,8],[10]) */ // 当 index 越界时，空值填充 x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) x[1:4] /* [[2,3,],[5,,],[7,8,],[10,,]] */ y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() y[1:4] /* [[2,3,],[5,,],[7,8,],[10,,]] */&lt;/codeblock&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:32;358:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:11;358:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;注意事项&lt;/b&gt;：&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:33;360:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;x[start:end]中必须满足 start &amp;gt;= 0 且 start &amp;lt; end，否则参数校验时抛出异常。。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:34;362:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;当 x 是 STRING 或 SYMBOL 类型的 Columnar Tuple，结果返回一个 Columnar Tuple；&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:35;364:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;当 x 是 Columnar Tuple 且 end == NULL（每一行的长度可能不一致），结果返回一个 Columnar Tuple；&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:36;366:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;其他情况下，结果都会返回一个 Fast Array Vector。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;2213-访问-array-vector-变量中-r-行-c-列的元素&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:11;368:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:11;368:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;2.2.1.3. 访问 Array Vector 变量中 r 行 c 列的元素&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:11;368:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:6;370:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:22;370:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:37;370:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Fast Array Vector 可以通过 x[r, c] 的方式定位一个元素；Columnar Tuple 可以通过 x[c, r] 的方式定位一个元素&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:17;372:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;r, c = 2, 1 x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) x[r, c] /* [7] */ y = [[1,2,3],[4,5],[6,7,8],[9,10]].setColumnarTuple!() y[c, r] /* 7 */&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:38;387:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:12;387:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;注意事项&lt;/b&gt;：x[r, c] 中的索引 r 和 c 不能越界，否则参数校验时抛出异常。&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:23;389:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:39;389:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;先定位行，再定位列&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:18;391:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;r, c = 2, 1 rows, cols = [1, 2, 3], 0:2 // 用函数先定位某一行，再定位某一列 x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) x.row(r).at(c) /* 7 */ y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() y.row(r).at(c) /* 7 */ // 用下标先定位某一行，再定位某一列 x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) x[[r]][c] /* [7] */ y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() y[[r]][c] /* [7] */ // 用下标先定位某几行，再定位某几列 x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) x[rows][cols] /* [[4,5],[6,7],[9,10]] */ y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() y[rows][cols] /* [[4,5],[6,7],[9,10]] */ // 当 index 越界时，空值填充 x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) x[2 3 4][1:3] /* [[7,8],[10,],[,]] */ y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() y[2 3 4][1:3] /* [[7,8],[10,],[,]] */&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:24;448:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:40;448:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;先定位列，再定位行&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:19;450:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;r, c = 2, 1 rows, cols = [1, 2, 3], 0:2 // 用下标先定位某一列，再定位某一行 x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) x[c][r] /* 7 */ y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() y[c][r] /* 7 */ // 用下标先定位某几列，再定位某几行 x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) x[cols][rows] /* [[4,5],[6,7],[9,10]] */ y = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) y[cols][rows] /* [[4,5],[6,7],[9,10]] */ // 当 index 越界时，空值填充 x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) x[1:3][2 3 4] /* [[7,8],[10,],] */ y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() y[1:3][2 3 4] /* [[7,8],[10,],] */&lt;/codeblock&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;2214-访问表中-array-vector-列的元素&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:12;494:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:12;494:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;2.2.1.4. 访问表中 Array Vector 列的元素&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:12;494:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:41;496:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;可以通过 x[index] 且 index 为标量或者数据对的方式将表中 Array Vector 列的指定位置的元素取出。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:42;498:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;当 index 越界时，指定位置元素用空值填充。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:20;500:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() t = table(1 2 3 4 as id, x as x, y as y) new_t = select *, x[2] as x_newCol1, x[1:3] as x_newCol2, y[2] as y_newCol1, y[1:3] as y_newCol2 from t /* new_t id x y x_newCol1 x_newCol2 y_newCol1 y_newCol2 -- ------- ------- --------- --------- --------- --------- 1 [1,2,3] [1,2,3] 3 [2,3] 3 [2,3] 2 [4,5] [4,5] [5,] [5,] 3 [6,7,8] [6,7,8] 8 [7,8] 8 [7,8] 4 [9,10] [9,10] [10,] [10,] */&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;222-array-vector-插入数据&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:13;515:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:13;515:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;2.2.2. Array Vector 插入数据&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:13;515:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:43;517:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Array Vector 目前支持末尾增加行的操作，暂时不支持修改和删除元素的操作。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:7;519:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:25;519:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:44;519:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;通过 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:9;519:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;append!&lt;/codeph&gt; 方法向 Array Vector 的变量中插入数据&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:21;521:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;// 插入一行 x = array(INT[], 0).append!([1 2 3, 4 5 6]) x.append!(7) x.append!([8 9]) /* x [[1,2,3],[4,5,6],[7],[8,9]] */ y = [1 2 3, 4 5 6].setColumnarTuple!() y.append!(7) y.append!([8 9]) /* y ([1,2,3],[4,5,6],7,[8,9]) */ // 插入多行 x = array(INT[], 0).append!([1 2 3, 4 5 6]) x.append!([7, 8 9]) /* x [[1,2,3],[4,5,6],[7],[8,9]] */ y = [1 2 3, 4 5 6].setColumnarTuple!() y.append!([7, 8 9]) /* y ([1,2,3],[4,5,6],7,[8,9]) */&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:26;551:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:45;551:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;通过 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../funcs/t/tableInsert.dita&#34; xtrc=&#34;xref:12;551:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:10;551:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;tableInsert&lt;/codeph&gt;&lt;/xref&gt; 、 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:11;551:53&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;append!&lt;/codeph&gt; 等方法向含有 Array Vector 列的表中插入数据&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:22;553:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() t = table(1 2 3 4 as id, x as col1, y as col2) t.tableInsert(5, 11, 11) t.tableInsert(6, [12 13 14], [12 13 14]) t.append!(table(7 8 as id, [15 16, 17] as col1, [15 16, 17] as col2)) /* t id col1 col2 -- ---------- ---------- 1 [1,2,3] [1,2,3] 2 [4,5] [4,5] 3 [6,7,8] [6,7,8] 4 [9,10] [9,10] 5 [11] 11 6 [12,13,14] [12,13,14] 7 [15,16] [15,16] 8 [17] 17 */&lt;/codeblock&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;223-转化-array-vector-为向量矩阵&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:14;574:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:14;574:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;2.2.3. 转化 Array Vector 为向量、矩阵&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:14;574:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:4;576:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:27;576:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:46;576:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;通过 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../funcs/f/flatten.dita&#34; xtrc=&#34;xref:13;576:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;flatten&lt;/xref&gt; 函数可以将 Array Vector 展开成一维向量。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:23;578:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;x = array(INT[], 0).append!([1 2 3, 4 5 6]) z = flatten(x) /* z [1,2,3,4,5,6] */ y = [1 2 3, 4 5 6].setColumnarTuple!() z = flatten(y) /* z [1,2,3,4,5,6] */&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:28;592:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:47;592:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;通过 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../funcs/m/matrix.dita&#34; xtrc=&#34;xref:14;592:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;matrix&lt;/xref&gt; 函数可以将等长的 Array Vector 转化为矩阵。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:24;594:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;x = array(INT[], 0).append!([1 2 3, 4 5 6]) z = matrix(x) /* z #0 #1 #2 -- -- -- 1 2 3 4 5 6 */ y = [1 2 3, 4 5 6].setColumnarTuple!() z = matrix(y) /* z #0 #1 -- -- 1 4 2 5 3 6 */&lt;/codeblock&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;224-对-fast-array-vector-的每个元素过滤&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:15;615:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:15;615:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;2.2.4. 对 Fast Array Vector 的每个元素过滤&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:15;615:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:48;617:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;可以通过 x[cond] 的方式将 Fast Array Vector 所有满足 cond 条件的元素过滤出来。（该功能 1.30.21 / 2.00.10 后支持）&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:25;619:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) z = x[x&amp;gt;=5] /* z [,[5],[6,7,8],[9,10]] */ t = table(1 2 3 4 as id, x as x) new_t = select *, x[x&amp;gt;=5] as newCol from t /* new_t id x newCol -- ------- ------- 1 [1,2,3] [] 2 [4,5] [5] 3 [6,7,8] [6,7,8] 4 [9,10] [9,10] */&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;23-array-vector-的计算&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:16;638:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:16;638:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;2.3. Array Vector 的计算&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:16;638:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;231-和标量计算&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:17;640:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:17;640:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;2.3.1. 和标量计算&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:17;640:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:49;642:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;即把 Array Vector 的每个元素和标量做计算。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:26;644:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) z = x + 1 /* z [[2,3,4],[5,6],[7,8,9],[10,11]] */ y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() z = y + 1 /* z ([2,3,4],[5,6],[7,8,9],[10,11]) */ t = table(1 2 3 4 as id, x as x, y as y) new_t = select *, x + 1 as new_x, y + 1 as new_y from t /* new_t id x y new_x new_y -- ------- ------- ------- ------- 1 [1,2,3] [1,2,3] [2,3,4] [2,3,4] 2 [4,5] [4,5] [5,6] [5,6] 3 [6,7,8] [6,7,8] [7,8,9] [7,8,9] 4 [9,10] [9,10] [10,11] [10,11] */&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;232-和向量计算&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:18;669:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:18;669:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;2.3.2. 和向量计算&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:18;669:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:50;671:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;要求向量的长度和 Array Vector 的行数相等。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:51;673:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;即把 Array Vector 的每行数据和向量对应位置的元素做计算。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:27;675:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) z = x * [1, 2, 3, 4] /* z [[1,2,3],[8,10],[18,21,24],[36,40]] */ y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() z = y * [1, 2, 3, 4] /* z ([1,2,3],[8,10],[18,21,24],[36,40]) */ t = table(1 2 3 4 as id, x as x, y as y) new_t = select *, x*id as new_x, y*id as new_y from t /* new_t id x y new_x new_y -- ------- ------- ---------- ---------- 1 [1,2,3] [1,2,3] [1,2,3] [1,2,3] 2 [4,5] [4,5] [8,10] [8,10] 3 [6,7,8] [6,7,8] [18,21,24] [18,21,24] 4 [9,10] [9,10] [36,40] [36,40] */&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;233-和-array-vector-计算&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:19;700:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:19;700:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;2.3.3. 和 Array Vector 计算&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:19;700:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:52;702:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;要求两个 Array Vector 的大小相等。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:53;704:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;即把两个 Array Vector 的对应位置的元素做计算。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:28;706:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) xx = array(INT[], 0).append!([3 1 2, 3 1, 1 2 3, 0 1]) z = pow(x, xx) /* z [[1,2,9],[64,5],[6,49,512],[1,10]] */ y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() yy = [3 1 2, 3 1, 1 2 3, 0 1].setColumnarTuple!() z = pow(y, yy) /* z ([1,2,9],[64,5],[6,49,512],[1,10]) */ t = table(1 2 3 4 as id, x as x, xx as xx, y as y, yy as yy) new_t = select *, pow(x, xx) as new_x, pow(y, yy) as new_y from t /* new_t id x xx y yy new_x new_y -- ------- ------- ------- ------- ---------- ---------- 1 [1,2,3] [3,1,2] [1,2,3] [3,1,2] [1,2,9] [1,2,9] 2 [4,5] [3,1] [4,5] [3,1] [64,5] [64,5] 3 [6,7,8] [1,2,3] [6,7,8] [1,2,3] [6,49,512] [6,49,512] 4 [9,10] [0,1] [9,10] [0,1] [1,10] [1,10] */&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:54;733:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:13;733:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;注意事项&lt;/b&gt;：&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:55;735:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Fast Array Vector 和 Columnar Tuple 之间不能直接计算。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;234-按行计算&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:20;737:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:20;737:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;2.3.4. 按行计算&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:20;737:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:5;739:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:29;739:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:56;739:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Array Vector 支持 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../funcs/themes/rowFunctions.dita&#34; xtrc=&#34;xref:15;739:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;行计算系列（row 系列）&lt;/xref&gt;。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:57;741:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;为了满足用户逐行计算的需求，DolphinDB 设计了 row 系列函数。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:58;743:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;row 系列函数以“rowFunc“的格式命名，例如 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:12;743:32&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;rowSum&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:13;743:41&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;rowAlign&lt;/codeph&gt; 等函数。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:59;745:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;row 系列函数的输入的参数可以是向量 / 向量元组 / 矩阵 / Array Vector。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:8;747:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:30;747:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:60;747:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;单目函数示例：按行求和&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:29;749:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) z = rowSum(x) /* z [6,9,21,19] */ y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() z = rowSum(y) /* z [6,9,21,19] */ t = table(1 2 3 4 as id, x as x, y as y) new_t = select *, rowSum(x) as new_x, rowSum(y) as new_y from t /* new_t id x y new_x new_y -- ------- ------- ----- ----- 1 [1,2,3] [1,2,3] 6 6 2 [4,5] [4,5] 9 9 3 [6,7,8] [6,7,8] 21 21 4 [9,10] [9,10] 19 19 */&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:31;774:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:61;774:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;双目函数示例（Array Vector 和向量）：按行求加权平均&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:30;776:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;x = array(INT[], 0).append!([1 2 3, 4 5 6, 6 7 8, 9 10 11]) z = rowWavg(x, [1, 1, 2]) /* z [2.25,5.25,7.25,10.25] */ y = [1 2 3, 4 5 6, 6 7 8, 9 10 11].setColumnarTuple!() z = rowWavg(y, [1, 1, 2]) /* z [2.25,5.25,7.25,10.25] */ t = table(1 2 3 4 as id, x as x, y as y) new_t = select *, rowWavg(x, [1, 1, 2]) as new_x, rowWavg(y, [1, 1, 2]) as new_y from t /* new_t id x y new_x new_y -- --------- --------- ----- ----- 1 [1,2,3] [1,2,3] 2.25 2.25 2 [4,5,6] [4,5,6] 5.25 5.25 3 [6,7,8] [6,7,8] 7.25 7.25 4 [9,10,11] [9,10,11] 10.25 10.25 */&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:32;801:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:62;801:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;双目函数示例（Array Vector 和 Array Vector）：按行求相关系数&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:31;803:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) xx = array(INT[], 0).append!([3 1 2, 3 1, 1 2 3, 0 1]) z = rowCorr(x, xx) /* z [-0.5,-1,1,1] */ y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() yy = [3 1 2, 3 1, 1 2 3, 0 1].setColumnarTuple!() z = rowCorr(y, yy) /* z [-0.5,-1,1,1] */ t = table(1 2 3 4 as id, x as x, xx as xx, y as y, yy as yy) new_t = select *, rowCorr(x, xx) as new_x, rowCorr(y, yy) as new_y from t /* new_t id x xx y yy new_x new_y -- ------- ------- ------- ------- ----- ----- 1 [1,2,3] [3,1,2] [1,2,3] [3,1,2] -0.5 -0.5 2 [4,5] [3,1] [4,5] [3,1] -1 -1 3 [6,7,8] [1,2,3] [6,7,8] [1,2,3] 1 1 4 [9,10] [0,1] [9,10] [0,1] 1 1 */&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:33;830:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:63;830:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;特殊双目函数示例：按行对齐&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:64;832:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;针对金融场景的存在的特殊的数据对齐规则，DolphinDB 开发了 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:14;832:43&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;rowAlign&lt;/codeph&gt; 和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:15;832:56&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;rowAt&lt;/codeph&gt; 函数。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:65;834:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; href=&#34;../funcs/r/rowAlign.dita&#34; xtrc=&#34;xref:16;834:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;rowAlign(left, right, how)&lt;/xref&gt;：实现 left 和 right 的数据对齐。输入参数 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:5;834:91&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;left&lt;/i&gt;、&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:6;834:98&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;right&lt;/i&gt; 是数组向量，表示需要对齐的数据；&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:7;834:122&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;how&lt;/i&gt; 是字符串，表述对齐的方式；最终返回一个长度为 2 的元组，分别表示对齐后数据在原数据中的索引。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Array_Vector/Array_Vector_1.png&#34; xtrc=&#34;image:1;836:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; dita-ot:image-width=&#34;890&#34; dita-ot:image-height=&#34;144&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:66;838:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; href=&#34;../funcs/r/rowAt.dita&#34; xtrc=&#34;xref:17;838:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;rowAt(X, Y)&lt;/xref&gt;：实现按行从 X 中取出 Y 索引的元素。输入参数 X 是矩阵或数组向量；当 Y 是和 X 行数相等的向量时，返回一个与 Y 长度相同的向量；当 Y 是和 X 行数相等的数组向量时，返回一个与 Y 维度相同的数组向量。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:67;840:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;下面以 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:8;840:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;how&lt;/i&gt;=&#34;bid&#34; 为例，说明具体的 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:16;840:34&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;rowAlign&lt;/codeph&gt; 对齐结果。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:68;842:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;假设 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:9;842:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;left&lt;/i&gt; 是某个时刻的五档买价，&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:10;842:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;right&lt;/i&gt; 是上一时刻的五档买价，都是严格单调减的序列&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Array_Vector/Array_Vector_2.png&#34; width=&#34;40%&#34; xtrc=&#34;image:2;844:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; dita-ot:image-width=&#34;536&#34; dita-ot:image-height=&#34;217&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:69;846:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;根据买价的值，按行进行数据对齐&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Array_Vector/Array_Vector_3.png&#34; width=&#34;55%&#34; xtrc=&#34;image:3;848:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; dita-ot:image-width=&#34;785&#34; dita-ot:image-height=&#34;194&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:70;850:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;根据 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:11;850:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;how&lt;/i&gt; 指定的对齐规则，保留满足条件的数据。&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:12;850:36&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;how&lt;/i&gt;=&#34;bid&#34; 时，最大值为 max(max(left), max(right)) = max(8.99, 9.00) = 9.00；最小值为 max(min(left), min(right)) = max(8.91, 8.95) = 8.95。【下图蓝色部分为删除部分】&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Array_Vector/Array_Vector_4.png&#34; width=&#34;55%&#34; xtrc=&#34;image:4;852:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; dita-ot:image-width=&#34;775&#34; dita-ot:image-height=&#34;191&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:71;854:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;获取剩余数据在原来向量中的索引，没有数据的位置用 -1 填充。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Array_Vector/Array_Vector_5.png&#34; width=&#34;40%&#34; xtrc=&#34;image:5;856:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; dita-ot:image-width=&#34;625&#34; dita-ot:image-height=&#34;187&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:72;858:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;下面以上图 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:13;858:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;left&lt;/i&gt; 和 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:14;858:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;leftIndex&lt;/i&gt; 为例，说明具体的 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:17;858:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;rowAt(left, leftIndex)&lt;/codeph&gt; 取数结果。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Array_Vector/Array_Vector_6.png&#34; width=&#34;80%&#34; xtrc=&#34;image:6;860:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; dita-ot:image-width=&#34;1110&#34; dita-ot:image-height=&#34;151&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:32;862:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;left = array(DOUBLE[], 0).append!([9.00 8.98 8.97 8.96 8.95, 8.99 8.97 8.95 8.93 8.91]) right = prev(left) /* left:[[9,8.98,8.97,8.96,8.949999999999999],[8.99,8.97,8.949999999999999,8.929999999999999,8.91]] right:[,[9,8.98,8.97,8.96,8.949999999999999]] */ leftIndex, rightIndex = rowAlign(left, right, how=&#34;bid&#34;) /* leftIndex:[[0,1,2,3,4],[-1,0,-1,1,-1,2]] rightIndex:[[-1,-1,-1,-1,-1],[0,-1,1,2,3,4]] */ leftResult = rowAt(left, leftIndex) rightResult = rowAt(right, rightIndex) /* leftResult:[[9,8.98,8.97,8.96,8.949999999999999],[,8.99,,8.97,,8.949999999999999]] rightResult:[[,,,,],[9,,8.98,8.97,8.96,8.949999999999999]] */&lt;/codeblock&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:34;884:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:73;884:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Fast Array Vector 支持调用高阶函数 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../funcs/ho_funcs/byRow.dita&#34; xtrc=&#34;xref:18;884:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;byRow&lt;/xref&gt;，对数组向量的每行元素进行计算。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:9;886:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:35;886:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:74;886:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;窗口函数示例：求每行的累计和&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:33;888:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) z = byRow(cumsum, x) /* z [[1,3,6],[4,9],[6,13,21],[9,19]] */ t = table(1 2 3 4 as id, x as x) new_t = select *, byRow(cumsum, x) as new_x from t /* new_t id x new_x -- ------- --------- 1 [1,2,3] [1,3,6] 2 [4,5] [4,9] 3 [6,7,8] [6,13,21] 4 [9,10] [9,19] */&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:75;907:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:14;907:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;注意事项&lt;/b&gt;：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:10;909:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:36;909:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:18;909:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;byRow&lt;/codeph&gt; 只支持 Fast Array Vector&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:37;910:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:19;910:14&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;byRow&lt;/codeph&gt; 函数时，自定义函数 func 的返回值只能是&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:15;910:44&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;标量&lt;/b&gt;（defg 定义的聚合函数）或者和 Fast Array Vector 每行&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:16;910:88&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;等长的向量&lt;/b&gt;（类似窗口函数）。&lt;/li&gt;&lt;/ul&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:34;912:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;// 返回值是标量 defg foo1(v){ return last(v)-first(v) } // 返回值是和 v 等长的向量 def foo2(v){ return v \ prev(v) - 1 } x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) x1 = byRow(foo1, x) x2 = byRow(foo2, x) /* x1: [2,1,2,1] x2: [[,1,0.5],[,0.25],[,0.166666666666667,0.142857142857143],[,0.111111111111111]] */ t = table(1 2 3 4 as id, x as x) new_t = select *, byRow(foo1, x) as x1, byRow(foo2, x) as x2 from t /* new_t id x x1 x2 -- ------- -- -------------------------------------- 1 [1,2,3] 2 [,1,0.5] 2 [4,5] 1 [,0.25] 3 [6,7,8] 2 [,0.166666666666667,0.142857142857143] 4 [9,10] 1 [,0.111111111111111] */&lt;/codeblock&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:38;943:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:76;943:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Array Vector 支持调用高阶函数 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../funcs/ho_funcs/each.dita&#34; xtrc=&#34;xref:19;943:26&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;each&lt;/xref&gt; 和 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../funcs/ho_funcs/loop.dita&#34; xtrc=&#34;xref:20;943:64&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;loop&lt;/xref&gt;，对 Array Vector 的每行元素进行计算。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:77;945:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:20;945:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;byRow&lt;/codeph&gt; 函数使用方式类似，都是将自定义函数作用在 Array Vector 的每一行上。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:11;947:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:39;947:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;两者的区别是：&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:12;948:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:40;948:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:21;948:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;byRow&lt;/codeph&gt; 只支持 Fast Array Vector；&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:22;948:39&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;each&lt;/codeph&gt; 和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:23;948:48&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;loop&lt;/codeph&gt; 支持 Fast Array Vector 和 Columnar Tuple。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:41;949:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:24;949:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;each&lt;/codeph&gt; 和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:25;949:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;loop&lt;/codeph&gt; 的自定义函数 func，返回值没有限制，可以是和每行元素不同长度的向量。自定义函数 func 返回值是向量时，返回的结果是 tuple 类型，对应表中的列是 Columnar Tuple 类型。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:42;950:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:26;950:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;byRow&lt;/codeph&gt; 的自定义函数 func 返回值是向量时，&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:27;950:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;byRow&lt;/codeph&gt; 返回的结果是 Fast Array Vector 类型，对应表中的列也是 Fast Array Vector 类型。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:35;952:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;// 返回值可以是和 v 不等长的向量 def foo3(v){ return [last(v)-first(v), last(v)+first(v)] } x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10]) z = loop(foo3, x) /* z ([2,4],[1,9],[2,14],[1,19]) */ y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!() z = loop(foo3, y) /* z ([2,4],[1,9],[2,14],[1,19]) */ t = table(1 2 3 4 as id, x as x, y as y) new_t = select *, loop(foo3, x) as new_x, loop(foo3, y) as new_y from t /* new_t id x y new_x new_y -- ------- ------- ------ ------ 1 [1,2,3] [1,2,3] [2,4] [2,4] 2 [4,5] [4,5] [1,9] [1,9] 3 [6,7,8] [6,7,8] [2,14] [2,14] 4 [9,10] [9,10] [1,19] [1,19] */&lt;/codeblock&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;24-api-写入&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:21;982:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:21;982:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;2.4. API 写入&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:21;982:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;241-c-api&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:22;984:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:22;984:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;2.4.1. C++ API&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:22;984:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:78;986:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:17;986:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Step1&lt;/b&gt;：C++ 中创建表对象。指定对应 Array Vector 列的类型为 DT_XX_ARRAY。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:79;988:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;（比如下例中的 value 列是 INT 类型的 Array Vector，所以指定为 DT_INT_ARRAY）&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:36;990:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;int rowNum = 3; int colNum = 2; vector&amp;lt;string&amp;gt; colNames = {&#34;id&#34;,&#34;value&#34;}; vector&amp;lt;DATA_TYPE&amp;gt; colTypes = {DT_INT, DT_INT_ARRAY}; ConstantSP table = Util::createTable(colNames, colTypes, rowNum, rowNum+1); vector&amp;lt;VectorSP&amp;gt; columnVecs; columnVecs.reserve(colNum); for(int i = 0; i &amp;lt; colNum; ++i) { columnVecs.emplace_back(table-&amp;gt;getColumn(i)); }&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:80;1003:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:18;1003:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Step2&lt;/b&gt;：逐行向 C++ 的表对象中添加数据。创建一个 DdbVector 类型的向量，作为 Array Vector 里的一行。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:37;1005:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;for(int i = 0; i &amp;lt; rowNum; ++i) { // 构造 Array Vector 的一行 DdbVector&amp;lt;int&amp;gt; intVec(0, 10); for(int j = 0; j &amp;lt; 3; ++j) { intVec.add(i*3+j); } VectorSP value_row = intVec.createVector(DT_INT); columnVecs[0]-&amp;gt;setInt(i, i); // id 列 columnVecs[1]-&amp;gt;set(i, value_row); // value 列 }&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:81;1018:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:19;1018:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Step3&lt;/b&gt;：连接 DolphinDB，上传数据。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:82;1020:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;（示例中，是通过 upload 方法把表数据 table 上传到 DolphinDB 的内存表 myTable。C++ API 的更多操作可以查看教程：&lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/cppdoc/cpp_api.html&#34; scope=&#34;external&#34; xtrc=&#34;xref:21;1020:77&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;?ditaot usertext?&gt;C++ API 使用教程&lt;/xref&gt;）&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:38;1022:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;// 连接 DolphinDB 节点 DBConnection conn; conn.connect(&#34;127.0.0.1&#34;, 8848); conn.login(&#34;admin&#34;, &#34;123456&#34;, false); // 上传数据到内存表 conn.upload(&#34;myTable&#34;, table);&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:83;1031:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:20;1031:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Step4&lt;/b&gt;：查询数据&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:39;1033:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;string script = &#34;select * from myTable;&#34;; ConstantSP result = conn.run(script); std::cout&amp;lt;&amp;lt;&#34;------ check data ------&#34;&amp;lt;&amp;lt;std::endl; std::cout&amp;lt;&amp;lt;result-&amp;gt;getString()&amp;lt;&amp;lt;std::endl;&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Array_Vector/Array_Vector_7.png&#34; xtrc=&#34;image:7;1040:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; dita-ot:image-width=&#34;219&#34; dita-ot:image-height=&#34;99&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;242-java-api&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:23;1042:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:23;1042:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;2.4.2. Java API&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:23;1042:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:84;1044:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:21;1044:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Step1&lt;/b&gt;：连接 DolphinDB，并在 DolphinDB 中创建一张维度表，用于接收数据。指定对应列的类型为 XX[]。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:85;1046:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;（比如下例中的 value 列是 INT 类型的 Array Vector，所以指定为 INT[]）&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:40;1048:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;// 连接 DolphinDB 的节点 DBConnection conn = new DBConnection(); boolean success = conn.connect(&#34;127.0.0.1&#34;, 8848, &#34;admin&#34;, &#34;123456&#34;); // 创建维度表 String ddb_script = &#34;dbName = \&#34;dfs://testDB\&#34;\n&#34; +&#34;../py_api.dita&#34;est\&#34;\n&#34; + &#34;if(existsDatabase(dbName)) {\n&#34; + &#34; dropDatabase(dbName)\n&#34; + &#34;}\n&#34; + &#34;db = database(dbName, VALUE, 1 2 3 4, , 'TSDB')\n&#34; + &#34;schemaTB = table(1:0, `id`value, [INT, INT[]])\n&#34; + &#34;pt = createTable(db, schemaTB, tbName, sortColumns=`id)&#34;; conn.run(ddb_script);&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:86;1063:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:22;1063:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Step2&lt;/b&gt;：Java 构造数据，创建表对象。每一列对应一个 List，Array Vector 列是一个类型为 vector 的 List，其中每一行是一个向量。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:41;1065:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;List&amp;lt;String&amp;gt; colNames = Arrays.asList(&#34;id&#34;, &#34;value&#34;); List&amp;lt;Vector&amp;gt; cols = new ArrayList&amp;lt;&amp;gt;(6); int rowNum = 4; List&amp;lt;Integer&amp;gt; idCol = new ArrayList&amp;lt;&amp;gt;(rowNum); List&amp;lt;Vector&amp;gt; valueCol = new ArrayList&amp;lt;&amp;gt;(rowNum); // Array Vector 列 for(int i = 0; i &amp;lt; rowNum; ++i) { idCol.add(i + 1); List&amp;lt;Integer&amp;gt; valueRow = new ArrayList&amp;lt;&amp;gt;(50); // Array Vector 中的一行 for(int j = 0; j &amp;lt; 3; ++j) { valueRow.add(i*3 +j); } valueCol.add(new BasicIntVector(valueRow)); } cols.add(new BasicIntVector(idCol)); cols.add(new BasicArrayVector(valueCol)); BasicTable tb = new BasicTable(colNames, cols);&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:87;1084:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:23;1084:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Step3&lt;/b&gt;：往预先创建的维度表中插入数据。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:88;1086:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;（示例中，是通过 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:28;1086:10&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;tableInsert&lt;/codeph&gt; 方法把表数据 tb 上传到 DolphinDB 的维度表 loadTable ('dfs://testDB','test')。Java API 的更多操作可以查看教程：&lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/javadoc/newjava.html&#34; scope=&#34;external&#34; xtrc=&#34;xref:22;1086:108&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;?ditaot usertext?&gt;Java API 使用教程&lt;/xref&gt;。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:42;1088:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;List&amp;lt;Entity&amp;gt; tbArg = new ArrayList&amp;lt;&amp;gt;(1); tbArg.add(tb); conn.run(&#34;tableInsert{loadTable('dfs://testDB','test')}&#34;, tbArg);&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:89;1094:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:24;1094:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Step4&lt;/b&gt;：查询数据&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:43;1096:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;BasicTable t; t = (BasicTable)conn.run(&#34;select * from loadTable('dfs://testDB','test')&#34;); System.out.println(t.getString());&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Array_Vector/Array_Vector_8.png&#34; xtrc=&#34;image:8;1102:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; dita-ot:image-width=&#34;137&#34; dita-ot:image-height=&#34;144&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;243-python-api&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:24;1104:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:24;1104:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;2.4.3. Python API&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:24;1104:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:90;1106:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:25;1106:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Step1&lt;/b&gt;：python 中创建表对象。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:91;1108:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;（比如下例中的 value 列是 INT 类型的 Array Vector）&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:44;1110:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;df = pd.DataFrame({ 'id': [1, 2, 3, 4], 'value': [np.array([1,2,3],dtype=np.int64), np.array([4,5,6],dtype=np.int64), np.array([7,8,9],dtype=np.int64), np.array([10,11,12],dtype=np.int64)] })&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:92;1117:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:26;1117:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Step2&lt;/b&gt;：连接 DolphinDB，上传数据。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:93;1119:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;（示例中，是通过 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:29;1119:10&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;table&lt;/codeph&gt; 方法把数据框 df 上传到 DolphinDB 的内存表 myTable。Python API 的更多操作可以查看教程：&lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/pydoc/py.html&#34; scope=&#34;external&#34; xtrc=&#34;xref:23;1119:78&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;?ditaot usertext?&gt;Python API 使用教程&lt;/xref&gt;）&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:45;1121:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;// 连接 DolphinDB 节点 s = ddb.session() s.connect(&#34;127.0.0.1&#34;, 8848, &#34;admin&#34;, &#34;123456&#34;) // 上传数据到内存表 s.table(data=df, tableAliasName=&#34;myTable&#34;)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:94;1129:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:27;1129:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Step3&lt;/b&gt;：查询数据&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:46;1131:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;t = s.run(&#34;select * from myTable&#34;) print(t)&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Array_Vector/Array_Vector_9.png&#34; xtrc=&#34;image:9;1136:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; dita-ot:image-width=&#34;168&#34; dita-ot:image-height=&#34;105&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;3-array-vector-在-level2-快照数据中的应用&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:25;1138:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:25;1138:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;3. Array Vector 在 level2 快照数据中的应用&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:25;1138:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;31-快照数据的存储&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:26;1140:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:26;1140:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;3.1. 快照数据的存储&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:26;1140:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:95;1142:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Array Vector 在存储中的一个典型应用场景就是存储快照十档行情数据。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:96;1144:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;level 2 的快照数据包含买卖十档价格、十档成交量、十档实际总委托笔数、前 50 笔买卖订单等多种多档数据，并且后续也常常需要将这些数据整体计算处理，所以很适合将多档数据作为整体存储为一列。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:13;1146:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:43;1146:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:97;1146:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:28;1146:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;多档多列存储&lt;/b&gt;&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Array_Vector/Array_Vector_10.png&#34; title=&#34;多档多列存储，共 194 列&#34; xtrc=&#34;image:10;1148:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; dita-ot:image-width=&#34;1921&#34; dita-ot:image-height=&#34;167&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:44;1150:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:98;1150:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:29;1150:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Array Vector 存储&lt;/b&gt;&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Array_Vector/Array_Vector_11.png&#34; title=&#34;Array Vector 存储，共 42 列&#34; xtrc=&#34;image:11;1152:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; dita-ot:image-width=&#34;1920&#34; dita-ot:image-height=&#34;166&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:99;1154:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;以上交所 level 2 的快照数据为例，进行具体的说明。下面是本教程中的存储的分布式表结构。&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:1;1156:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:1;1156:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:1;1156:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:2;1156:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:3;1156:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:1;1156:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:1;1156:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:1;1156:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:30;1156:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;字段名称&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:2;1156:26&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:31;1156:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;数据类型&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:3;1156:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:32;1156:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;数据说明&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:1;1158:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:2;1158:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:4;1158:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;SecurityID&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:5;1158:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;SYMBOL&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:6;1158:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;证券代码&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:3;1159:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:7;1159:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;DateTime&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:8;1159:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;TIMESTAMP&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:9;1159:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;日期时间&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:4;1160:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:10;1160:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;PreClosePx&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:11;1160:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:12;1160:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;昨收价&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:5;1161:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:13;1161:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;OpenPx&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:14;1161:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:15;1161:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;开始价&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:6;1162:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:16;1162:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;HighPx&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:17;1162:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:18;1162:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;最高价&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:7;1163:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:19;1163:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;LowPx&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:20;1163:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:21;1163:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;最低价&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:8;1164:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:22;1164:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;LastPx&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:23;1164:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:24;1164:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;最新价&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:9;1165:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:25;1165:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;TotalVolumeTrade&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:26;1165:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:27;1165:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;成交总量&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:10;1166:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:28;1166:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;TotalValueTrade&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:29;1166:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:30;1166:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;成交总金额&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:11;1167:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:31;1167:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;InstrumentStatus&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:32;1167:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;SYMBOL&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:33;1167:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;交易状态&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:12;1168:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:34;1168:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;BidPrice&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:35;1168:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;DOUBLE[]&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:36;1168:46&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;申买十价&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:13;1169:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:37;1169:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;BidOrderQty&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:38;1169:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT[]&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:39;1169:46&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;申买十量&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:14;1170:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:40;1170:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;BidNumOrders&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:41;1170:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT[]&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:42;1170:46&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;申买十实际总委托笔数&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:15;1171:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:43;1171:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;BidOrders&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:44;1171:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT[]&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:45;1171:46&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;申买一前 50 笔订单&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:16;1172:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:46;1172:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;OfferPrice&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:47;1172:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;DOUBLE[]&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:48;1172:46&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;申卖十价&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:17;1173:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:49;1173:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;OfferOrderQty&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:50;1173:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT[]&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:51;1173:46&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;申卖十量&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:18;1174:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;18&#34; xtrc=&#34;entry:52;1174:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;OfferNumOrders&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;18&#34; xtrc=&#34;entry:53;1174:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT[]&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;18&#34; xtrc=&#34;entry:54;1174:46&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;申卖十实际总委托笔数&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:19;1175:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;19&#34; xtrc=&#34;entry:55;1175:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;OfferOrders&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;19&#34; xtrc=&#34;entry:56;1175:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT[]&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;19&#34; xtrc=&#34;entry:57;1175:46&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;申卖一前 50 笔订单&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:20;1176:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;20&#34; xtrc=&#34;entry:58;1176:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;NumTrades&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;20&#34; xtrc=&#34;entry:59;1176:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;20&#34; xtrc=&#34;entry:60;1176:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;成交笔数&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:21;1177:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;21&#34; xtrc=&#34;entry:61;1177:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;IOPV&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;21&#34; xtrc=&#34;entry:62;1177:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;21&#34; xtrc=&#34;entry:63;1177:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;ETF 净值估值&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:22;1178:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;22&#34; xtrc=&#34;entry:64;1178:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;TotalBidQty&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;22&#34; xtrc=&#34;entry:65;1178:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;22&#34; xtrc=&#34;entry:66;1178:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;委托买入总量&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:23;1179:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;23&#34; xtrc=&#34;entry:67;1179:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;TotalOfferQty&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;23&#34; xtrc=&#34;entry:68;1179:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;23&#34; xtrc=&#34;entry:69;1179:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;委托卖出总量&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:24;1180:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;24&#34; xtrc=&#34;entry:70;1180:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;WeightedAvgBidPx&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;24&#34; xtrc=&#34;entry:71;1180:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;24&#34; xtrc=&#34;entry:72;1180:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;加权平均委买价格&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:25;1181:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;25&#34; xtrc=&#34;entry:73;1181:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;WeightedAvgOfferPx&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;25&#34; xtrc=&#34;entry:74;1181:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;25&#34; xtrc=&#34;entry:75;1181:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;加权平均委卖价格&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:26;1182:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;26&#34; xtrc=&#34;entry:76;1182:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;TotalBidNumber&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;26&#34; xtrc=&#34;entry:77;1182:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;26&#34; xtrc=&#34;entry:78;1182:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;买入总笔数&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:27;1183:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;27&#34; xtrc=&#34;entry:79;1183:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;TotalOfferNumber&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;27&#34; xtrc=&#34;entry:80;1183:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;27&#34; xtrc=&#34;entry:81;1183:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;卖出总笔数&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:28;1184:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;28&#34; xtrc=&#34;entry:82;1184:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;BidTradeMaxDuration&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;28&#34; xtrc=&#34;entry:83;1184:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;28&#34; xtrc=&#34;entry:84;1184:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;买入成交最大等待时间&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:29;1185:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;29&#34; xtrc=&#34;entry:85;1185:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;OfferTradeMaxDuration&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;29&#34; xtrc=&#34;entry:86;1185:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;29&#34; xtrc=&#34;entry:87;1185:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;买入成交最大等待时间&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:30;1186:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;30&#34; xtrc=&#34;entry:88;1186:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;NumBidOrders&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;30&#34; xtrc=&#34;entry:89;1186:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;30&#34; xtrc=&#34;entry:90;1186:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;买方委托价位数&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:31;1187:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;31&#34; xtrc=&#34;entry:91;1187:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;NumOfferOrders&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;31&#34; xtrc=&#34;entry:92;1187:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;31&#34; xtrc=&#34;entry:93;1187:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;卖方委托价位数&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:32;1188:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;32&#34; xtrc=&#34;entry:94;1188:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;WithdrawBuyNumber&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;32&#34; xtrc=&#34;entry:95;1188:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;32&#34; xtrc=&#34;entry:96;1188:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;买入撤单笔数&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:33;1189:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;33&#34; xtrc=&#34;entry:97;1189:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;WithdrawBuyAmount&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;33&#34; xtrc=&#34;entry:98;1189:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;33&#34; xtrc=&#34;entry:99;1189:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;买入撤单数量&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:34;1190:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;34&#34; xtrc=&#34;entry:100;1190:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;WithdrawBuyMoney&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;34&#34; xtrc=&#34;entry:101;1190:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;34&#34; xtrc=&#34;entry:102;1190:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;买入撤单金额&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:35;1191:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;35&#34; xtrc=&#34;entry:103;1191:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;WithdrawSellNumber&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;35&#34; xtrc=&#34;entry:104;1191:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;35&#34; xtrc=&#34;entry:105;1191:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;卖出撤单笔数&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:36;1192:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;36&#34; xtrc=&#34;entry:106;1192:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;WithdrawSellAmount&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;36&#34; xtrc=&#34;entry:107;1192:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;36&#34; xtrc=&#34;entry:108;1192:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;卖出撤单数量&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:37;1193:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;37&#34; xtrc=&#34;entry:109;1193:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;WithdrawSellMoney&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;37&#34; xtrc=&#34;entry:110;1193:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;37&#34; xtrc=&#34;entry:111;1193:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;卖出撤单金额&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:38;1194:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;38&#34; xtrc=&#34;entry:112;1194:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;ETFBuyNumber&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;38&#34; xtrc=&#34;entry:113;1194:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;38&#34; xtrc=&#34;entry:114;1194:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;ETF 申购笔数&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:39;1195:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;39&#34; xtrc=&#34;entry:115;1195:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;ETFBuyAmount&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;39&#34; xtrc=&#34;entry:116;1195:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;39&#34; xtrc=&#34;entry:117;1195:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;ETF 申购数量&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:40;1196:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;40&#34; xtrc=&#34;entry:118;1196:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;ETFBuyMoney&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;40&#34; xtrc=&#34;entry:119;1196:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;40&#34; xtrc=&#34;entry:120;1196:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;ETF 申购金额&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:41;1197:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;41&#34; xtrc=&#34;entry:121;1197:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;ETFSellNumber&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;41&#34; xtrc=&#34;entry:122;1197:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;41&#34; xtrc=&#34;entry:123;1197:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;ETF 赎回笔数&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:42;1198:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;42&#34; xtrc=&#34;entry:124;1198:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;ETFSellAmount&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;42&#34; xtrc=&#34;entry:125;1198:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;INT&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;42&#34; xtrc=&#34;entry:126;1198:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;ETF 赎回数量&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:43;1199:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;43&#34; xtrc=&#34;entry:127;1199:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;ETFSellMoney&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;43&#34; xtrc=&#34;entry:128;1199:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;43&#34; xtrc=&#34;entry:129;1199:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;ETF 赎回金额&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:100;1201:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;其中，买卖十档价格（BidPrice / OfferPrice）、十档成交量（BidOrderQty / OfferOrderQty）、十档实际总委托笔数（BidNumOrders / OfferNumOrders）、前 50 笔买卖订单（BidOrders / OfferOrders）这 8 个字段都采用 Array Vector 的格式存储。在建表时，通过“DOUBLE[]”和“INT[]”的方式指定列的类型为 Array Vector。下面是对应的建表语句。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:47;1203:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;dbName = &#34;dfs://SH_TSDB_snapshot_ArrayVector&#34; tbName = &#34;snapshot&#34; if(existsDatabase(dbName)){ dropDatabase(dbName) } db1 = database(, VALUE, 2020.01.01..2021.01.01) db2 = database(, HASH, [SYMBOL, 20]) db = database(dbName, COMPO, [db1, db2], , &#34;TSDB&#34;) schemaTable = table( array(SYMBOL, 0) as SecurityID, array(TIMESTAMP, 0) as DateTime, array(DOUBLE, 0) as PreClosePx, array(DOUBLE, 0) as OpenPx, array(DOUBLE, 0) as HighPx, array(DOUBLE, 0) as LowPx, array(DOUBLE, 0) as LastPx, array(INT, 0) as TotalVolumeTrade, array(DOUBLE, 0) as TotalValueTrade, array(SYMBOL, 0) as InstrumentStatus, array(DOUBLE[], 0) as BidPrice, array(INT[], 0) as BidOrderQty, array(INT[], 0) as BidNumOrders, array(INT[], 0) as BidOrders, array(DOUBLE[], 0) as OfferPrice, array(INT[], 0) as OfferOrderQty, array(INT[], 0) as OfferNumOrders, array(INT[], 0) as OfferOrders, array(INT, 0) as NumTrades, array(DOUBLE, 0) as IOPV, array(INT, 0) as TotalBidQty, array(INT, 0) as TotalOfferQty, array(DOUBLE, 0) as WeightedAvgBidPx, array(DOUBLE, 0) as WeightedAvgOfferPx, array(INT, 0) as TotalBidNumber, array(INT, 0) as TotalOfferNumber, array(INT, 0) as BidTradeMaxDuration, array(INT, 0) as OfferTradeMaxDuration, array(INT, 0) as NumBidOrders, array(INT, 0) as NumOfferOrders, array(INT, 0) as WithdrawBuyNumber, array(INT, 0) as WithdrawBuyAmount, array(DOUBLE, 0) as WithdrawBuyMoney, array(INT, 0) as WithdrawSellNumber, array(INT, 0) as WithdrawSellAmount, array(DOUBLE, 0) as WithdrawSellMoney, array(INT, 0) as ETFBuyNumber, array(INT, 0) as ETFBuyAmount, array(DOUBLE, 0) as ETFBuyMoney, array(INT, 0) as ETFSellNumber, array(INT, 0) as ETFSellAmount, array(DOUBLE, 0) as ETFSellMoney ) db.createPartitionedTable(table=schemaTable, tableName=tbName, partitionColumns=`DateTime`SecurityID, compressMethods={DateTime:&#34;delta&#34;}, sortColumns=`SecurityID`DateTime, keepDuplicates=ALL)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:101;1259:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;导入数据时，可以通过 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:30;1259:16&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;fixedLengthArrayVector&lt;/codeph&gt; 函数将多档的数据合并成一列 Array Vector。下面是对应的导入数据脚本。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:48;1261:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt; def transform(data){ t = select SecurityID, DateTime, PreClosePx, OpenPx, HighPx, LowPx, LastPx, TotalVolumeTrade, TotalValueTrade, InstrumentStatus, fixedLengthArrayVector(BidPrice0, BidPrice1, BidPrice2, BidPrice3, BidPrice4, BidPrice5, BidPrice6, BidPrice7, BidPrice8, BidPrice9) as BidPrice, fixedLengthArrayVector(BidOrderQty0, BidOrderQty1, BidOrderQty2, BidOrderQty3, BidOrderQty4, BidOrderQty5, BidOrderQty6, BidOrderQty7, BidOrderQty8, BidOrderQty9) as BidOrderQty, fixedLengthArrayVector(BidNumOrders0, BidNumOrders1, BidNumOrders2, BidNumOrders3, BidNumOrders4, BidNumOrders5, BidNumOrders6, BidNumOrders7, BidNumOrders8, BidNumOrders9) as BidNumOrders, fixedLengthArrayVector(BidOrders0, BidOrders1, BidOrders2, BidOrders3, BidOrders4, BidOrders5, BidOrders6, BidOrders7, BidOrders8, BidOrders9, BidOrders10, BidOrders11, BidOrders12, BidOrders13, BidOrders14, BidOrders15, BidOrders16, BidOrders17, BidOrders18, BidOrders19, BidOrders20, BidOrders21, BidOrders22, BidOrders23, BidOrders24, BidOrders25, BidOrders26, BidOrders27, BidOrders28, BidOrders29, BidOrders30, BidOrders31, BidOrders32, BidOrders33, BidOrders34, BidOrders35, BidOrders36, BidOrders37, BidOrders38, BidOrders39, BidOrders40, BidOrders41, BidOrders42, BidOrders43, BidOrders44, BidOrders45, BidOrders46, BidOrders47, BidOrders48, BidOrders49) as BidOrders, fixedLengthArrayVector(OfferPrice0, OfferPrice1, OfferPrice2, OfferPrice3, OfferPrice4, OfferPrice5, OfferPrice6, OfferPrice7, OfferPrice8, OfferPrice9) as OfferPrice, fixedLengthArrayVector(OfferOrderQty0, OfferOrderQty1, OfferOrderQty2, OfferOrderQty3, OfferOrderQty4, OfferOrderQty5, OfferOrderQty6, OfferOrderQty7, OfferOrderQty8, OfferOrderQty9) as OfferOrderQty, fixedLengthArrayVector(OfferNumOrders0, OfferNumOrders1, OfferNumOrders2, OfferNumOrders3, OfferNumOrders4, OfferNumOrders5, OfferNumOrders6, OfferNumOrders7, OfferNumOrders8, OfferNumOrders9) as OfferNumOrders, fixedLengthArrayVector(OfferOrders0, OfferOrders1, OfferOrders2, OfferOrders3, OfferOrders4, OfferOrders5, OfferOrders6, OfferOrders7, OfferOrders8, OfferOrders9, OfferOrders10, OfferOrders11, OfferOrders12, OfferOrders13, OfferOrders14, OfferOrders15, OfferOrders16, OfferOrders17, OfferOrders18, OfferOrders19, OfferOrders20, OfferOrders21, OfferOrders22, OfferOrders23, OfferOrders24, OfferOrders25, OfferOrders26, OfferOrders27, OfferOrders28, OfferOrders29, OfferOrders30, OfferOrders31, OfferOrders32, OfferOrders33, OfferOrders34, OfferOrders35, OfferOrders36, OfferOrders37, OfferOrders38, OfferOrders39, OfferOrders40, OfferOrders41, OfferOrders42, OfferOrders43, OfferOrders44, OfferOrders45, OfferOrders46, OfferOrders47, OfferOrders48, OfferOrders49) as OfferOrders, NumTrades, IOPV, TotalBidQty, TotalOfferQty, WeightedAvgBidPx, WeightedAvgOfferPx, TotalBidNumber, TotalOfferNumber, BidTradeMaxDuration,OfferTradeMaxDuration, NumBidOrders, NumOfferOrders, WithdrawBuyNumber, WithdrawBuyAmount, WithdrawBuyMoney,WithdrawSellNumber, WithdrawSellAmount, WithdrawSellMoney, ETFBuyNumber, ETFBuyAmount, ETFBuyMoney, ETFSellNumber, ETFSellAmount, ETFSellMoney from data return t } def loadData(csvDir, dbName, tbName){ schemaTB = extractTextSchema(csvDir) update schemaTB set type = &#34;SYMBOL&#34; where name = &#34;SecurityID&#34; loadTextEx(dbHandle=database(dbName), tableName=tbName, partitionColumns=`DateTime`SecurityID, sortColumns=`SecurityID`DateTime, filename=csvDir, schema=schemaTB, transform=transform) } // 后台提交导入任务 csvDir = &#34;/home/v2/下载/data/testdata/snapshot_100stocks_multi.csv&#34; dbName, tbName = &#34;dfs://SH_TSDB_snapshot_ArrayVector&#34;, &#34;snapshot&#34; submitJob(&#34;loadData&#34;, &#34;load Data&#34;, loadData{csvDir, dbName, tbName}) getRecentJobs()&lt;/codeblock&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;32-快照数据分组时保留明细&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:27;1289:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:27;1289:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;3.2. 快照数据分组时保留明细&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:27;1289:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:102;1291:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;Array Vector 在存储中的另一个典型应用场景就是分组计算时将组内所有明细数据保留。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:103;1293:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;DolphinDB 提供了函数 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:31;1293:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;toArray&lt;/codeph&gt;。&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:32;1293:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;toArray&lt;/codeph&gt; 搭配 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:33;1293:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;group by&lt;/codeph&gt; 语句，可以将 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:34;1293:58&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;group by&lt;/codeph&gt; 分组的数据存储成数组向量的一行，便于用户直接查看该分组下的所有数据。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:104;1295:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;比如，将快照数据聚合成 5 分钟 tick 数据并入库，结果表字段包括高开低收、成交量、成交金额、bid0 和 ask0 的量价切片。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Array_Vector/Array_Vector_12.png&#34; title=&#34;5 分钟 tick 数据&#34; xtrc=&#34;image:12;1297:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; dita-ot:image-width=&#34;1078&#34; dita-ot:image-height=&#34;235&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:49;1299:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;// 创建存储 5 min tick 数据的分布式库表 def createFiveMinuteBarDB(dbName, tbName){ if(existsDatabase(dbName)){ dropDatabase(dbName) } db = database(dbName, VALUE, 2021.01.01..2021.12.31, , &#34;TSDB&#34;) colNames = `SecurityID`DateTime`OpenPx`HighPx`LowPx`LastPx`TotalVolume`TotalValueTrade`BidPrice0`BidOrderQty0`OfferPrice0`OfferOrderQty0 colTypes = [SYMBOL, TIMESTAMP, DOUBLE, DOUBLE, DOUBLE, DOUBLE, LONG, DOUBLE, DOUBLE[], INT[], DOUBLE[], INT[]] schemaTable = table(1:0, colNames, colTypes) db.createPartitionedTable(table=schemaTable, tableName=tbName, partitionColumns=`DateTime, compressMethods={DateTime:&#34;delta&#34;}, sortColumns=`SecurityID`DateTime, keepDuplicates=ALL) } dbName, tbName = &#34;dfs://fiveMinuteBar&#34;, &#34;fiveMinuteBar&#34; createFiveMinuteBarDB(dbName, tbName) // 根据快照数计算 5 min tick 数据 t = select first(OpenPx) as OpenPx, max(HighPx) as HighPx, min(LowPx) as LowPx, last(LastPx) as LastPx, last(TotalVolumeTrade) as TotalVolumeTrade, last(TotalValueTrade) as TotalValueTrade, toArray(BidPrice[0]) as BidPrice0, toArray(BidOrderQty[0]) as BidOrderQty0, toArray(OfferPrice[0]) as OfferPrice0, toArray(OfferOrderQty[0]) as OfferOrderQty0 from loadTable(&#34;dfs://SH_TSDB_snapshot_ArrayVector&#34;, &#34;snapshot&#34;) group by SecurityID, interval(DateTime, 5m, &#34;none&#34;) as DateTime map // 将数据存入数据库 loadTable(dbName, tbName).append!(t)&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;33-基于快照数据的高频因子计算&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:28;1321:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:28;1321:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;3.3. 基于快照数据的高频因子计算&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:28;1321:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:105;1323:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;DolphinDB 不仅提供了高速存取时序数据的基本功能，还内置了向量化的多范式编程语言和强大的计算引擎，可高效用于量化金融的因子开发，包括基于历史数据的批量高频因子计算和基于实时 Level 2 行情的流式计算。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:106;1325:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;本章节以基于快照数据计算高频因子为例，展示 Array Vector 在因子计算中的应用。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;331-净委买增额&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:29;1327:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:29;1327:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;3.3.1. 净委买增额&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:29;1327:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:107;1329:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;根据《&lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://zhuanlan.zhihu.com/p/452566110&#34; scope=&#34;external&#34; xtrc=&#34;xref:24;1329:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;?ditaot usertext?&gt;量化交易因子挖掘笔记 - 从限价订单簿（LOB）挖掘高频价量因子&lt;/xref&gt;》中对净委买增额的定义和计算方法，实现的指标公式如下：：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Array_Vector/Array_Vector_13.png&#34; xtrc=&#34;image:13;1331:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; dita-ot:image-width=&#34;677&#34; dita-ot:image-height=&#34;151&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:108;1333:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;其中 bidAmtDiff&lt;sub class=&#34;+ topic/ph hi-d/sub &#34; xtrc=&#34;sub:1;1333:14&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;t&lt;/sub&gt; 表示 t 时刻的委买增额；bid&lt;sub class=&#34;+ topic/ph hi-d/sub &#34; xtrc=&#34;sub:2;1333:43&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;i,t&lt;/sub&gt; 表示 t 时刻快照数据的第 i 档买方报价；指示函数 I 含义如下：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Array_Vector/Array_Vector_14.png&#34; xtrc=&#34;image:14;1335:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; dita-ot:image-width=&#34;339&#34; dita-ot:image-height=&#34;94&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:109;1337:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;根据上述公式，结合 DolphinDB 丰富的内置函数（&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:35;1337:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;prev&lt;/codeph&gt; 获取上一个 tick 的价格；&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:36;1337:51&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;rowSum&lt;/codeph&gt; 计算 Array Vector 的行和），可以转写出如下代码：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:50;1339:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;@state def calculateAmtDiff(bid, ask, bidvol, askvol){ lastBidPrice = prev(bid[0]) // 上一个 tick 的买一价 lastAskPrice = prev(ask[0]) // 上一个 tick 的卖一价 lastBidQty = prev(bidvol[0]) // 上一个 tick 的买一量 lastAskQty = prev(askvol[0]) // 上一个 tick 的卖一量 // 求委买增额 bidAmtDiff = rowSum(bid*bidvol*(bid &amp;gt;= lastBidPrice)) - lastBidPrice*lastBidQty // 求委卖增额 askAmtDiff = rowSum(ask*askvol*(ask &amp;lt;= lastAskPrice)) - lastAskPrice*lastAskQty return bidAmtDiff - askAmtDiff }&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:110;1354:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;用上面的自定义函数，可以快速地实现净委买增额的批计算和流计算。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:14;1356:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:45;1356:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:111;1356:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:33;1356:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;批计算&lt;/b&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:51;1358:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;snapshot = loadTable(&#34;dfs://SH_TSDB_snapshot_ArrayVector&#34;, &#34;snapshot&#34;) res1 = select SecurityID, DateTime, calculateAmtDiff(BidPrice, OfferPrice, BidOrderQty, OfferOrderQty) as amtDiff from snapshot context by SecurityID csort DateTime&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:46;1363:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:112;1363:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:34;1363:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;流计算&lt;/b&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:52;1365:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;// 创建输入输出表 share(streamTable(1:0, snapshot.schema().colDefs.name, snapshot.schema().colDefs.typeString), `snapshotStreamTable) share(streamTable(1:0, `SecurityID`DateTime`amtDiff, [SYMBOL, TIMESTAMP, DOUBLE]), `res2) go // 创建流计算引擎 createReactiveStateEngine(name=&#34;calAmtDiffDemo&#34;, metrics=&amp;lt;[DateTime, calculateAmtDiff(BidPrice, OfferPrice, BidOrderQty, OfferOrderQty)]&amp;gt;, dummyTable=snapshotStreamTable, outputTable=res2, keyColumn=`SecurityID) // 创建订阅 subscribeTable(tableName=&#34;snapshotStreamTable&#34;, actionName=&#34;calAmtDiffTest&#34;, offset=-1, handler=getStreamEngine(&#34;calAmtDiffDemo&#34;), msgAsTable=true) // 取数据回放，模拟流数据 testData = select * from snapshot where date(DateTime)=2021.12.01 order by DateTime submitJob(&#34;replayData&#34;, &#34;replay snapshot data&#34;, replay{inputTables=testData, outputTables=snapshotStreamTable, dateColumn=`DateTime, timeColumn=`DateTime, replayRate=1000})&lt;/codeblock&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;332-十档净委买增额&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:30;1379:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:30;1379:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;3.3.2. 十档净委买增额&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:30;1379:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:113;1381:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;根据&lt;xref class=&#34;- topic/xref &#34; dita-ot:orig-format=&#34;md&#34; format=&#34;dita&#34; href=&#34;l2_stk_data_proc.md&#34; xtrc=&#34;xref:25;1381:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;处理 Level 2 行情数据实例&lt;/xref&gt; ，实现的指标公式如下：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Array_Vector/Array_Vector_15.png&#34; xtrc=&#34;image:15;1383:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; dita-ot:image-width=&#34;663&#34; dita-ot:image-height=&#34;68&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:114;1385:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;其中 level10_Diff&lt;sub class=&#34;+ topic/ph hi-d/sub &#34; xtrc=&#34;sub:3;1385:16&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;t&lt;/sub&gt; 表示 t 时刻的委买增额；bid&lt;sub class=&#34;+ topic/ph hi-d/sub &#34; xtrc=&#34;sub:4;1385:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;i,t&lt;/sub&gt; 表示 t 时刻快照数据的第 i 档买方报价；指示函数 I 含义如下：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Array_Vector/Array_Vector_16.png&#34; xtrc=&#34;image:16;1387:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34; dita-ot:image-width=&#34;554&#34; dita-ot:image-height=&#34;73&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:115;1389:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;DolphinDB 中可以先通过行对齐函数 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:37;1389:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;rowAlign&lt;/codeph&gt; 实现当前十档价格和前一个十档价格进行行对齐；然后通过 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:38;1389:61&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;rowAt&lt;/codeph&gt; 和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:39;1389:71&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;nullFill&lt;/codeph&gt; 函数分别获取对应档位的委托量和价格；最后通过 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:40;1389:105&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;rowSum&lt;/codeph&gt; 函数计算总的变化额。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:53;1391:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;@state def level10_Diff(price, qty, buy){ prevPrice = price.prev() left, right = rowAlign(price, prevPrice, how=iif(buy, &#34;bid&#34;, &#34;ask&#34;)) qtyDiff = (qty.rowAt(left).nullFill(0) - qty.prev().rowAt(right).nullFill(0)) amtDiff = rowSum(nullFill(price.rowAt(left), prevPrice.rowAt(right)) * qtyDiff) return amtDiff } snapshot = loadTable(&#34;dfs://SH_TSDB_snapshot_ArrayVector&#34;, &#34;snapshot&#34;) res = select SecurityID, DateTime, level10_Diff(BidPrice, BidOrderQty, true) as level10_Diff from snapshot context by SecurityID csort DateTime&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;4-总结&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:31;1405:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:31;1405:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;4. 总结&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:31;1405:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:116;1407:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;针对不定长度二维数组的存储和计算，DolphinDB 提供了一种特殊的数据形式 —— Array Vector。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:117;1409:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;本教程针对 Array Vector 的特点、使用方式、注意事项、应用场景等做了一系列的介绍。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:118;1411:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;DolphinDB 能够存储大量的历史高频行情数据，为其后续的高效因子挖掘和计算提供支持，特别是在 level 2 快照数据的存储和计算上，Array Vector 展现了其简洁、高效、灵活的特点。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;5-附件&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:32;1413:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:32;1413:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;5. 附件&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:32;1413:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:119;1415:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;zip&#34; href=&#34;https://cdn.dolphindb.cn/downloads/snapshot_100stocks_multi.zip&#34; scope=&#34;external&#34; xtrc=&#34;xref:26;1415:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Array_Vector.md&#34;&gt;&lt;?ditaot usertext?&gt;snapshot_100stocks_multi.zip&lt;/xref&gt;&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;"/><meta name="wh-source-relpath" content="tutorials/Array_Vector.md"/><meta name="wh-out-relpath" content="tutorials/Array_Vector.html"/>

    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/commons.css?buildId=2024012323"/>
    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic.css?buildId=2024012323"/>

    <script src="../oxygen-webhelp/app/options/properties.js?buildId=20250305183303"></script>
    <script src="../oxygen-webhelp/app/localization/strings.js?buildId=2024012323"></script>
    <script src="../oxygen-webhelp/app/search/index/keywords.js?buildId=20250305183303"></script>
    <script defer="defer" src="../oxygen-webhelp/app/commons.js?buildId=2024012323"></script>
    <script defer="defer" src="../oxygen-webhelp/app/topic.js?buildId=2024012323"></script>
<link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/styles.css?buildId=2024012323"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script></head>

    <body id="array-vector-的最佳实践指南" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            跳转到主要内容
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div xmlns:whc="http://www.oxygenxml.com/webhelp/components" class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="https://docs.dolphindb.cn/zh/index.html" class=" wh_logo d-none d-sm-block "><img src="../logo.png" alt="  DolphinDB 文档中心  "/></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="booktitle">  <span class="ph mainbooktitle">DolphinDB 文档中心</span>  </span></a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="搜索 " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="搜索查询" required="required"/><button type="submit" class="wh_search_button" aria-label="搜索"><span class="search_input_text">搜索</span></button></div></form>
            
            <script src="/vendors/react/umd/react.production.min.js" defer="defer"></script>
<script src="/vendors/react-dom/umd/react-dom.production.min.js" defer="defer"></script>
<script src="/vendors/dayjs/dayjs.min.js" defer="defer"></script>
<script src="/vendors/antd/dist/antd.min.js" defer="defer"></script>
<script src="/vendors/@ant-design/icons/dist/index.umd.min.js" defer="defer"></script>
<script src="/zh/index.js" type="module"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" defer="defer"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer="defer"><!--


--></script>
<script defer="defer"><!--

// 从主页重定向
const currentUrl = window.location.href;

// 判断当前URL是否包含index.html并且路径最后部分是index.html
if (currentUrl.endsWith('index.html')) {
    // 处理根目录下的index.html跳转
    const baseUrl = currentUrl.split('/index.html')[0]; // 获取index.html之前的部分
    const redirectUrl = `${baseUrl}/about/ddb_intro.html`; // 构建跳转路径
    window.location.href = redirectUrl; // 执行跳转
}

--></script>
            
        </div></div>
    </div>
</header>
        
        
         
        
        
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="../index.html"><span>主页</span></a></span></li><li><div class="topicref" data-id="about_tutorials"><div class="title"><a href="../tutorials/about_tutorials.html"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div></li><li><div class="topicref"><div class="title"><a href="../tutorials/std_sql_ddb.html">编程</a></div></div></li><li class="active"><div class="topicref" data-id="array-vector-的最佳实践指南"><div class="title"><a href="../tutorials/Array_Vector.html">Array Vector 的最佳实践指南</a></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="切换搜索突出显示" title="切换搜索突出显示"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="折叠截面" title="折叠截面"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="打印此页" aria-label="打印此页"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem"><div data-tocid="ddb_intro-d9713e87" class="topicref" data-id="ddb_intro" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../about/ddb_intro.html" id="ddb_intro-d9713e87-link">关于DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="chap1_getstarted-d9713e136" class="topicref" data-id="chap1_getstarted" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../getstarted/chap1_getstarted.html" id="chap1_getstarted-d9713e136-link">快速上手</a><div class="wh-tooltip"><p class="shortdesc">如何快速部署 DolphinDB、建库建表、写入和查询数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="sectionddb_deployment-d9713e189" class="topicref" data-id="sectionddb_deployment" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action sectionddb_deployment-d9713e189-link" class="wh-expand-btn"></span><div class="title"><a href="../deploy/deploy_intro.html" id="sectionddb_deployment-d9713e189-link"><span class="keyword label">部署</span></a><div class="wh-tooltip"><p class="shortdesc">如何在不同的场景中部署 DolphinDB</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259" class="topicref" data-id="new_chap_database_manage_new_chap_dbmanage_landing_page" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/cfg/db_intro.html" id="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link"><span class="keyword label">数据库</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 数据库的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_streaming-d9713e3760" class="topicref" data-id="chap7_tutorials_streaming" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_streaming-d9713e3760-link" class="wh-expand-btn"></span><div class="title"><a href="../stream/str_intro.html" id="chap7_tutorials_streaming-d9713e3760-link"><span class="keyword label">流数据</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 流数据引擎及流数据计算的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e7513" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e7513-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/db_oper/import_data.html" id="tocId-d9713e7513-link">数据迁移</a><div class="wh-tooltip"><p class="shortdesc">如何从不同数据源向 DolphinDB 迁移数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_system_management-d9713e7940" class="topicref" data-id="chap7_tutorials_system_management" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_system_management-d9713e7940-link" class="wh-expand-btn"></span><div class="title"><a href="../sys_man/om_intro.html" id="chap7_tutorials_system_management-d9713e7940-link"><span class="keyword label">系统运维</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 的系统运维功能及方法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="troubleshooting-d9713e8780" class="topicref" data-id="troubleshooting" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action troubleshooting-d9713e8780-link" class="wh-expand-btn"></span><div class="title"><a href="../error_codes/troubleshooting.html" id="troubleshooting-d9713e8780-link">故障排查</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="about_language_resources-d9713e20911" class="topicref" data-id="about_language_resources" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action about_language_resources-d9713e20911-link" class="wh-expand-btn"></span><div class="title"><a href="../progr/progr_intro.html" id="about_language_resources-d9713e20911-link"><span class="keyword label">编程语言</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 编程基本概念与方法、SQL 在 DolphinDB 的应用</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="functions_references-d9713e30925" class="topicref" data-id="functions_references" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action functions_references-d9713e30925-link" class="wh-expand-btn"></span><div class="title"><a href="../funcs/funcs_intro.html" id="functions_references-d9713e30925-link"><span class="keyword label">函数参考</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 函数分类、语法、详解及示例</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="api_protocol-d9713e94064" class="topicref" data-id="api_protocol" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action api_protocol-d9713e94064-link" class="wh-expand-btn"></span><div class="title"><a href="../api/connapi_intro.html" id="api_protocol-d9713e94064-link"><span class="keyword label">连接器 &amp; API</span></a><div class="wh-tooltip"><p class="shortdesc">面向不同编程语言的 DolphinDB API 及连接器，相关协议和用法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap6_plugin-d9713e94210" class="topicref" data-id="chap6_plugin" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap6_plugin-d9713e94210-link" class="wh-expand-btn"></span><div class="title"><a href="../plugins/plg_intro.html" id="chap6_plugin-d9713e94210-link"><span class="keyword label">插件</span></a><div class="wh-tooltip"><p class="shortdesc">多个应用场景的插件使用说明和插件开发指导</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="third_party-d9713e97904" class="topicref" data-id="third_party" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action third_party-d9713e97904-link" class="wh-expand-btn"></span><div class="title"><a href="../third_party.html" id="third_party-d9713e97904-link">第三方工具</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="about_tutorials-d9713e98227" class="topicref" data-id="about_tutorials" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action about_tutorials-d9713e98227-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/about_tutorials.html" id="about_tutorials-d9713e98227-link"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98280" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98280-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/new_users_finance.html" id="tocId-d9713e98280-link">新用户入门</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98327" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98327-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/database.html" id="tocId-d9713e98327-link">数据库</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="tocId-d9713e99111" class="topicref" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action tocId-d9713e99111-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/std_sql_ddb.html" id="tocId-d9713e99111-link">编程</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="sql-标准化-d9713e99112" class="topicref" data-id="sql-标准化" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/std_sql_ddb.html" id="sql-标准化-d9713e99112-link">SQL 标准化</a></div></div></li><li role="treeitem"><div data-tocid="topn-系列函数-d9713e99158" class="topicref" data-id="topn-系列函数" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/DolphinDB_TopN.html" id="topn-系列函数-d9713e99158-link">TopN 系列函数</a></div></div></li><li role="treeitem"><div data-tocid="使用-summary-函数生成大规模数据统计信息-d9713e99204" class="topicref" data-id="使用-summary-函数生成大规模数据统计信息" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/generate_large_scale_statistics_with_summary.html" id="使用-summary-函数生成大规模数据统计信息-d9713e99204-link">使用 summary 函数生成大规模数据统计信息</a></div></div></li><li role="treeitem"><div data-tocid="decimal-类型之于-dolphindb-d9713e99250" class="topicref" data-id="decimal-类型之于-dolphindb" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/DECIMAL.html" id="decimal-类型之于-dolphindb-d9713e99250-link">DECIMAL 类型之于 DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="计算精度问题与-decimal-类型-d9713e99296" class="topicref" data-id="计算精度问题与-decimal-类型" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/DECIMAL_Calculation_Characteristics.html" id="计算精度问题与-decimal-类型-d9713e99296-link">计算精度问题与 DECIMAL 类型</a></div></div></li><li role="treeitem"><div data-tocid="机器学习-d9713e99342" class="topicref" data-id="机器学习" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/machine_learning.html" id="机器学习-d9713e99342-link">机器学习</a></div></div></li><li role="treeitem"><div data-tocid="面板数据处理-d9713e99388" class="topicref" data-id="面板数据处理" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/panel_data.html" id="面板数据处理-d9713e99388-link">面板数据处理</a></div></div></li><li role="treeitem"><div data-tocid="时区处理-d9713e99434" class="topicref" data-id="时区处理" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/timezone.html" id="时区处理-d9713e99434-link">时区处理</a></div></div></li><li role="treeitem"><div data-tocid="pip-降采样算法-d9713e99480" class="topicref" data-id="pip-降采样算法" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/pip_ddb.html" id="pip-降采样算法-d9713e99480-link">PIP 降采样算法</a></div></div></li><li role="treeitem"><div data-tocid="动态增加字段和计算指标-d9713e99526" class="topicref" data-id="动态增加字段和计算指标" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/add_Column.html" id="动态增加字段和计算指标-d9713e99526-link">动态增加字段和计算指标</a></div></div></li><li role="treeitem"><div data-tocid="利用-dolphindb-高效清洗数据-d9713e99572" class="topicref" data-id="利用-dolphindb-高效清洗数据" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/data_ETL.html" id="利用-dolphindb-高效清洗数据-d9713e99572-link">利用 DolphinDB 高效清洗数据</a></div></div></li><li role="treeitem" class="active"><div data-tocid="array-vector-的最佳实践指南-d9713e99619" class="topicref" data-id="array-vector-的最佳实践指南" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Array_Vector.html" id="array-vector-的最佳实践指南-d9713e99619-link">Array Vector 的最佳实践指南</a></div></div></li><li role="treeitem"><div data-tocid="python-到-dolphindb-的函数映射-d9713e99665" class="topicref" data-id="python-到-dolphindb-的函数映射" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/function_mapping_py.html" id="python-到-dolphindb-的函数映射-d9713e99665-link">Python 到 DolphinDB 的函数映射</a></div></div></li><li role="treeitem"><div data-tocid="sql-编写案例-d9713e99711" class="topicref" data-id="sql-编写案例" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/ddb_sql_cases.html" id="sql-编写案例-d9713e99711-link">SQL 编写案例</a></div></div></li><li role="treeitem"><div data-tocid="sql-执行计划-d9713e99757" class="topicref" data-id="sql-执行计划" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/DolphinDB_Explain.html" id="sql-执行计划-d9713e99757-link">SQL 执行计划</a></div></div></li><li role="treeitem"><div data-tocid="启动脚本-d9713e99803" class="topicref" data-id="启动脚本" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Startup.html" id="启动脚本-d9713e99803-link">启动脚本</a></div></div></li><li role="treeitem"><div data-tocid="窗口计算-d9713e99849" class="topicref" data-id="窗口计算" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/window_cal.html" id="窗口计算-d9713e99849-link">窗口计算</a></div></div></li><li role="treeitem"><div data-tocid="多范式编程-d9713e99895" class="topicref" data-id="多范式编程" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/hybrid_programming_paradigms.html" id="多范式编程-d9713e99895-link">多范式编程</a></div></div></li><li role="treeitem"><div data-tocid="函数化编程案例-d9713e99941" class="topicref" data-id="函数化编程案例" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/func_progr_cases.html" id="函数化编程案例-d9713e99941-link">函数化编程案例</a></div></div></li><li role="treeitem"><div data-tocid="基于函数的元编程应用-d9713e99987" class="topicref" data-id="基于函数的元编程应用" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/meta_programming.html" id="基于函数的元编程应用-d9713e99987-link">基于函数的元编程应用</a></div></div></li><li role="treeitem"><div data-tocid="基于-sql-的元编程-d9713e100033" class="topicref" data-id="基于-sql-的元编程" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/macro_var_based_metaprogramming.html" id="基于-sql-的元编程-d9713e100033-link">基于 SQL 的元编程</a></div></div></li><li role="treeitem"><div data-tocid="即时编译jit-d9713e100079" class="topicref" data-id="即时编译jit" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/jit.html" id="即时编译jit-d9713e100079-link">即时编译（JIT）</a></div></div></li><li role="treeitem"><div data-tocid="矩阵运算-d9713e100126" class="topicref" data-id="矩阵运算" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/matrix.html" id="矩阵运算-d9713e100126-link">矩阵运算</a></div></div></li><li role="treeitem"><div data-tocid="通用计算-d9713e100172" class="topicref" data-id="通用计算" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/general_computing.html" id="通用计算-d9713e100172-link">通用计算</a></div></div></li><li role="treeitem"><div data-tocid="自定义聚合函数-d9713e100218" class="topicref" data-id="自定义聚合函数" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/udaf.html" id="自定义聚合函数-d9713e100218-link">自定义聚合函数</a></div></div></li><li role="treeitem"><div data-tocid="dolphindb-时间类型比较规则-d9713e100264" class="topicref" data-id="dolphindb-时间类型比较规则" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/ddb_comparison_rules_of_time_types.html" id="dolphindb-时间类型比较规则-d9713e100264-link">DolphinDB 时间类型比较规则</a></div></div></li><li role="treeitem"><div data-tocid="dolphindb-教程概率统计分析-d9713e100310" class="topicref" data-id="dolphindb-教程概率统计分析" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/probabilistic_and_statistical_analysis.html" id="dolphindb-教程概率统计分析-d9713e100310-link">DolphinDB 教程：概率统计分析</a></div></div></li><li role="treeitem"><div data-tocid="编程最容易忽略的十个细节-d9713e100356" class="topicref" data-id="编程最容易忽略的十个细节" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/the_ten_most_overlooked_details_of_programming.html" id="编程最容易忽略的十个细节-d9713e100356-link">编程最容易忽略的十个细节</a></div></div></li><li role="treeitem"><div data-tocid="dolphindb-数据访问接口开发教程-d9713e100402" class="topicref" data-id="dolphindb-数据访问接口开发教程" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/interface_development.html" id="dolphindb-数据访问接口开发教程-d9713e100402-link">DolphinDB 数据访问接口开发教程</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100448" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100448-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming-real-time-correlation-processing_2.html" id="tocId-d9713e100448-link">流数据</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100955" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100955-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/scheduledJob_2.html" id="tocId-d9713e100955-link">系统运维</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="模块概述-d9713e101923" class="topicref" data-id="模块概述" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action 模块概述-d9713e101923-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/tu_modules.html" id="模块概述-d9713e101923-link">模块</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e102568" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e102568-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/OHLC_2.html" id="tocId-d9713e102568-link">金融场景案例</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e104827" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e104827-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_engine_anomaly_alerts_2.html" id="tocId-d9713e104827-link">物联网场景案例</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105795" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105795-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/dolphindb_tensor_libtorch_tutorial.html" id="tocId-d9713e105795-link">机器学习</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105842" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105842-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/api_performance.html" id="tocId-d9713e105842-link">测试报告</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105982" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105982-link" class="wh-expand-btn"></span><div class="title"><a href="../rn/server/3_00_2.html" id="tocId-d9713e105982-link">版本说明</a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 版本发布历史</p></div></div></div></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-7 col-md-9 col-sm-12" id="wh_topic_body">
                        <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        <button id="wh_close_topic_toc_button" class="close-toc-button d-none" aria-label="Toggle topic table of content" aria-controls="wh_topic_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        <div class=" wh_topic_content body "><main role="main"><article class="- topic/topic topic" role="article" aria-labelledby="ariaid-title1"><h1 class="- topic/title title topictitle1" id="ariaid-title1">Array Vector 的最佳实践指南</h1><div class="- topic/body body"><p class="- topic/p p">越来越多的机构使用 L1/L2 的快照行情数据进行量化金融的研究。作为一个高性能实时计算平台，DolphinDB 非常适合存储和处理海量的历史高频行情数据。针对快照数据包含多档位信息的特点，DolphinDB 研发了一种方便、灵活且高效的数据结构——Array Vector，可以显著地简化某些常用的查询与计算代码，提高存储和计算地性能。Array Vector 还可以存储不定长的二维数组，在数据处理、模型应用等方面都具有重要意义。</p></div><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title2" id="1-概念"><h2 class="- topic/title title topictitle2" id="ariaid-title2">1. 概念</h2><div class="- topic/body body"><p class="- topic/p p">DolphinDB 提供了一种特殊的数据结构，数组向量（Array Vector），用以存储比如股票的多档报价数据。顾名思义，Array Vector 的每一个元素是一个一维数组（类型完全相同）。这种存储方式不仅可以简化某些查询与计算的代码，在不同列中含有大量重复数据的情况下，还可以提高数据压缩比，提升查询速度。计算上，Array Vector 可以与标量、向量或另一个 Array Vector 进行二元运算，能够方便地实现向量化运算，提升计算性能。</p><p class="- topic/p p">Array Vector 和矩阵（Matrix）都可以组织二维的结构化数据，但两者有很大区别。首先矩阵的每一行长度相同，Array Vector 无这一要求。其次，在 DolphinDB 的实现中，矩阵的存储是列优先，而 Array Vector 是行优先。根据实现方式的不同，Array Vector 又可以进一步分为 <strong class="+ topic/ph hi-d/b ph b">Fast Array Vector（数组向量）</strong> 和 <strong class="+ topic/ph hi-d/b ph b">Columnar Tuple（列式元组）</strong> 两种。后续在无特殊注明的情况下，Array Vector 一般指 Fast Array Vector。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Fast Array Vector</strong> 的实现有两个常规的向量组成，第二个向量连续存储所有行的数据，第一个向量存储每一行的数据结束的索引。这一种存储方式十分紧凑，读写和计算的效率都很高，但很难改变每一行的长度。为弥补这个不足，DolphinDB 引入了 <strong class="+ topic/ph hi-d/b ph b">Columnar Tuple</strong>。顾名思义，Columnar Tuple 是一个元组，代表一列，其中每一个元素代表一行，但值类型必须保持一致。Columnar Tuple 的元素都是一个独立的对象（Scalar 或 Vector），因此可以方便的更改。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Fast Array Vector 和 Columnar Tuple 的区别</strong>：</p><ul class="- topic/ul ul"><li class="- topic/li li">Fast Array Vector 目前暂时不支持 SYMBOL 和 STRING 两种类型；Columnar Tuple 支持。</li><li class="- topic/li li">使用 <code class="+ topic/ph pr-d/codeph ph codeph">typestr</code>函数查看数据类型，Fast Array Vector 返回的是“FAST XXX[] VECTOR”；Columnar Tuple 返回的是“ANY VECTOR”，所以需要用用 <code class="+ topic/ph pr-d/codeph ph codeph">isColumnarTuple</code> 函数判断变量类型是否为列式元组。</li><li class="- topic/li li">Fast Array Vector 的存储、查询、计算等效率更高，但更新和删除操作效率较低并且每一行的元素长度不能改变；Columnar Tuple 在更新和删除操作上的表现更好且每一行的元素长度允许改变。【上述的更新和删除操作是通过底层的 C++ 代码实现的。目前更新和删除的接口未开放，脚本层面还不支持更新和删除 Array Vector 中的元素。所以一般情况下，<strong class="+ topic/ph hi-d/b ph b">推荐用户使用 Fast Array Vector (数组向量)</strong>。】</li></ul><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Fast Array Vector 和 Columnar Tuple 的应用场景</strong>：</p><ul class="- topic/ul ul"><li class="- topic/li li">Fast Array Vector：数值类型的二维数组的存储和计算。比如，Level 2 行情的十档量价和 50 档委托等。</li><li class="- topic/li li">Columnar Tuple：需要频繁更新二维数组元素的场景。比如，响应式状态引擎内部会自动把输入的 Fast Array Vector 的列转化为 Columnar Tuple，以此提高更新引擎状态的效率。这部分的转化是引擎内部自动完成的，对用户是透明的。用户不会感知到这一个过程，只需要向引擎传入 Fast Array Vector 的列即可。</li></ul></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title3" id="2-array-vector-支持的函数和操作"><h2 class="- topic/title title topictitle2" id="ariaid-title3">2. Array Vector 支持的函数和操作</h2><div class="- topic/body body"></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title4" id="21-array-vector-的创建"><h3 class="- topic/title title topictitle3" id="ariaid-title4">2.1. Array Vector 的创建</h3><div class="- topic/body body"></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title5" id="211-创建-array-vector-类型的变量"><h4 class="- topic/title title topictitle4" id="ariaid-title5">2.1.1. 创建 Array Vector 类型的变量</h4><div class="- topic/body body"><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Fast Array Vector (数组向量)</strong></p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">通过 <a class="- topic/xref xref" href="../funcs/a/array.html">array</a> 或  <a class="- topic/xref xref" href="../funcs/b/bigarray.html">bigarray</a> 函数定义空的数组向量，并通过 <code class="+ topic/ph pr-d/codeph ph codeph">append!</code> 添加数据</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
/* x
[[1,2,3],[4,5],[6,7,8],[9,10]]
*/</code></pre></li><li class="- topic/li li"><p class="- topic/p p">通过 <a class="- topic/xref xref" href="../funcs/f/fixedLengthArrayVector.html">fixedLengthArrayVector</a> 将多个向量/元组/矩阵或表拼接成数组向量。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>vec = 1 2 3
tp = [4 5 6, 7 8 9]
m =  matrix(10 11 12, 13 14 15, 16 17 18)
tb = table(19 20 21 as v1, 22 23 24 as v2)
x = fixedLengthArrayVector(vec, tp, m, tb)
/* x
[[1,4,7,10,13,16,19,22],[2,5,8,11,14,17,20,23],[3,6,9,12,15,18,21,24]]
*/</code></pre></li><li class="- topic/li li"><p class="- topic/p p">通过 <a class="- topic/xref xref" href="../funcs/a/arrayVector.html">arrayVector</a> 将单个向量拆分成数组向量。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>x = arrayVector(3 5 8 10, [1, 2, 3, 4, 5, 6, 7, 8, 9, 10])
/* x
[[1,2,3],[4,5],[6,7,8],[9,10]]
*/</code></pre></li></ol></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Columnar Tuple (列式元组)</strong></p><p class="- topic/p p">通过 <a class="- topic/xref xref" href="../funcs/s/setColumnarTuple_.html">setColumnarTuple!</a> 函数将一个普通元组转换成列式元组。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>x = [[1,2,3],[4,5],[6,7,8],[9,10]].setColumnarTuple!()
/* x
([1,2,3],[4,5],[6,7,8],[9,10])
*/</code></pre></li></ul></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title6" id="212-创建含有-array-vector-类型列的表"><h4 class="- topic/title title topictitle4" id="ariaid-title6">2.1.2. 创建含有 Array Vector 类型列的表</h4><div class="- topic/body body"><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">创建 Array Vector 类型的变量，将其指定为表中的一列。</p><p class="- topic/p p">Fast Array Vector 的变量在表中的列类型是 "XXX[]"，比如 "INT[]"、"DOUBLE[]" 等；</p><p class="- topic/p p">Columnar Tuple 的变量在表中为”ANY“类型。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
t = table(1 2 3 4 as id, x as newCol1)
update t set newCol2=x
t["newCol3"] = y
/* t
id newCol1 newCol2 newCol3
-- ------- ------- -------
1  [1,2,3] [1,2,3] [1,2,3]
2  [4,5]   [4,5]   [4,5]  
3  [6,7,8] [6,7,8] [6,7,8]
4  [9,10]  [9,10]  [9,10] 
*/

t.schema().colDefs
/*
name    typeString typeInt extra comment
------- ---------- ------- ----- -------
id      INT        4                    
newCol1 INT[]      68                   
newCol2 INT[]      68                   
newCol3 ANY        25   
*/</code></pre></li><li class="- topic/li li"><p class="- topic/p p">通过 <a class="- topic/xref xref" href="../funcs/f/fixedLengthArrayVector.html">fixedLengthArrayVector</a> 将表中多列拼成一列。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>t = table(1 2 3 4 as id, 1 3 5 6 as v1, 4 7 9 3 as v2)
t = select *, fixedLengthArrayVector(v1, v2) as newCol from t
/* t
id v1 v2 newCol
-- -- -- ------
1  1  4  [1,4] 
2  3  7  [3,7] 
3  5  9  [5,9] 
4  6  3  [6,3] 
*/</code></pre></li><li class="- topic/li li"><p class="- topic/p p">通过 <code class="+ topic/ph pr-d/codeph ph codeph">toArray</code> + <code class="+ topic/ph pr-d/codeph ph codeph">group by</code> 将表中每组的数据组合成 Array Vector。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>t = table(1 1 3 4 as id, 1 3 5 6 as v1)
new_t = select toArray(v1) as newV1 from t group by id
/* new_t
id newV1
-- -----
1  [1,3]
3  [5]  
4  [6]  
*/</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意事项</strong>：</p><p class="- topic/p p">因为 <code class="+ topic/ph pr-d/codeph ph codeph">toArray</code> 生成的结果是 Fast Array Vector 类型的数据，Fast Array Vector 暂时不支持 SYMBOL 和 STRING 类型，所以 <code class="+ topic/ph pr-d/codeph ph codeph">toArray</code> 函数暂时也不支持对 SYMBOL 和 STRING 的列使用。</p><p class="- topic/p p">在 group by 的时候，如果需要将 SYMBOL 和 STRING 类型的数据组合，建议使用字符串拼接，比如</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>t = table(1 1 3 4 as group_id, `a1`a2`a3`a4 as name)
new_t = select concat(name, ";") as name from t group by group_id 
/* new_t
group_id name 
-------- -----
1        a1;a2
3        a3   
4        a4        
*/</code></pre><p class="- topic/p p">使用的时候，用 <code class="+ topic/ph pr-d/codeph ph codeph">split</code> 函数再将字符串拆分，比如</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>select *, name.split(";")[0] as name0 from new_t
/*
group_id name  name0
-------- ----- -----
1        a1;a2 a1   
3        a3    a3   
4        a4    a4   
*/</code></pre></li><li class="- topic/li li"><p class="- topic/p p">设置 <a class="- topic/xref xref" href="../funcs/l/loadText.html">loadText</a> 的 <em class="+ topic/ph hi-d/i ph i">schema</em> 和 <em class="+ topic/ph hi-d/i ph i">arrayDelimiter</em>，从文本文件中读取含 Fast Array Vector 列的表。</p><p class="- topic/p p">用 <a class="- topic/xref xref" href="../funcs/s/saveText.html">saveText</a> 存储数据时，Fast Array Vector 的列会自动存储为如下格式：Array Vector 内部用 arrayDelimiter 隔开。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>x = array(INT[], 0).append!([1 3 5, 2 7 9])
t = table(1 2 as id, x as value) 
saveText(t, "./test.csv")</code></pre><p class="- topic/p p">"./test.csv" 内的文本内容</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>id,value
1,"1,3,5"
2,"2,7,9"</code></pre><p class="- topic/p p">针对上面的 csv，读文本数据时，<em class="+ topic/ph hi-d/i ph i">schema</em> 中设置 value 列的类型为“INT[]”，<em class="+ topic/ph hi-d/i ph i">arrayDelimiter</em> 设置为逗号“,“。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>t = loadText("./test.csv", schema=table(`id`value as name, ["INT", "INT[]"] as type), arrayDelimiter=",")
/* t
id value  
-- -------
1  [1,3,5]
2  [2,7,9]
*/t = loadText("./test.csv", schema=table(`id`value as name, ["INT", "INT[]"] as type), arrayDelimiter=",") /* t id value   -- ------- 1  [1,3,5] 2  [2,7,9] */</code></pre></li></ol></div></article></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title7" id="22-array-vector-的基础操作"><h3 class="- topic/title title topictitle3" id="ariaid-title7">2.2. Array Vector 的基础操作</h3><div class="- topic/body body"></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title8" id="221-访问-array-vector-中的元素"><h4 class="- topic/title title topictitle4" id="ariaid-title8">2.2.1. 访问 Array Vector 中的元素</h4><div class="- topic/body body"><p class="- topic/p p">用户可以通过函数（<a class="- topic/xref xref" href="../funcs/r/row.html">row</a>、<a class="- topic/xref xref" href="../funcs/a/at.html">at</a>）的方式访问 Array Vector 的行列；也可以通过下标（“x[index]”）的方式访问 Array Vector 的元素。</p><p class="- topic/p p">当使用下标的方式（“x[index]”）访问 Array Vector 时满足以下规则：</p><ol class="- topic/ol ol"><li class="- topic/li li">当 index 为标量或者数据对的时候，表示对列操作，比如 index=0 或者 index=0:3；</li><li class="- topic/li li">当 index 为向量的时候，表示对行的操作，比如 index = [1, 2, 3]；</li><li class="- topic/li li">当 index 越界时，对应位置的数据会用空值填充；</li></ol></div><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title9" id="2211-访问-array-vector-变量中的行"><h5 class="- topic/title title topictitle5" id="ariaid-title9">2.2.1.1. 访问 Array Vector 变量中的行</h5><div class="- topic/body body"><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">通过 <a class="- topic/xref xref" href="../funcs/r/row.html">row</a> 函数读取 Array Vector 中的一行。【只能访问一行，返回一个向量】</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
x.row(1)
/*
[4,5]
*/

y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
y.row(1)
/*
[4,5]
*/

// 当 index 越界时，空值填充
x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
x.row(10)
/*
[,,,]
*/

y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
y.row(10)
/*
[,,,]
*/</code></pre></li><li class="- topic/li li"><p class="- topic/p p">通过 x[index] 且 index 为向量的方式访问 Array Vector 的行。【可以访问多行，返回一个和 x 相同类型的 Array Vector】</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>// 读取一行
x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
x[[1]]
/*
[[4,5]]
*/

y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
y[[1]]
/*
([4,5])
*/

// 读取多行
x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
x[[1, 2]]
/*
[[4,5],[6,7,8]]
*/

y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
y[[1, 2]]
/*
([4,5],[6,7,8])
*/

// 当 index 越界时，空值填充
x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
x[[3, 4]]
/*
[[9,10],]
*/

y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
y[[3, 4]]
/*
([9,10],)
*/</code></pre></li></ul></div></article><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title10" id="2212-访问-array-vector-变量中的列"><h5 class="- topic/title title topictitle5" id="ariaid-title10">2.2.1.2. 访问 Array Vector 变量中的列</h5><div class="- topic/body body"><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">通过 x[index] 且 index 为标量的方式访问 Array Vector 的一列。【只能访问一列，返回一个向量】</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
x[1]
/*
[2,5,7,10]
*/

y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
y[1]
/*
[2,5,7,10]
*/

// 当 index 越界时，空值填充
x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
x[10]
/*
[,,,]
*/

y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
y[10]
/*
[,,,]
*/</code></pre></li><li class="- topic/li li"><p class="- topic/p p">通过 x[start:end] 的方式访问 Array Vector 的列。【可以访问多行，返回一个 Array Vector】</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>// end 不为空
x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
x[0:2]
/*
[[1,2],[4,5],[6,7],[9,10]]
*/

y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
y[0:2]
/*
[[1,2],[4,5],[6,7],[9,10]]
*/

// end 为空
x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
x[1:]
/*
[[2,3],[5],[7,8],[10]]
*/

y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
y[1:]
/*
([2,3],[5],[7,8],[10])
*/

// 当 index 越界时，空值填充
x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
x[1:4]
/*
[[2,3,],[5,,],[7,8,],[10,,]]
*/

y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
y[1:4]
/*
[[2,3,],[5,,],[7,8,],[10,,]]
*/</code></pre></li></ul><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意事项</strong>：</p><p class="- topic/p p">x[start:end]中必须满足 start &gt;= 0 且 start &lt; end，否则参数校验时抛出异常。。</p><p class="- topic/p p">当 x 是 STRING 或 SYMBOL 类型的 Columnar Tuple，结果返回一个 Columnar Tuple；</p><p class="- topic/p p">当 x 是 Columnar Tuple 且 end == NULL（每一行的长度可能不一致），结果返回一个 Columnar Tuple；</p><p class="- topic/p p">其他情况下，结果都会返回一个 Fast Array Vector。</p></div></article><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title11" id="2213-访问-array-vector-变量中-r-行-c-列的元素"><h5 class="- topic/title title topictitle5" id="ariaid-title11">2.2.1.3. 访问 Array Vector 变量中 r 行 c 列的元素</h5><div class="- topic/body body"><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">Fast Array Vector 可以通过 x[r, c] 的方式定位一个元素；Columnar Tuple 可以通过 x[c, r] 的方式定位一个元素</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>r, c = 2, 1
x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
x[r, c]
/*
[7]
*/

y = [[1,2,3],[4,5],[6,7,8],[9,10]].setColumnarTuple!()
y[c, r]
/*
7
*/</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意事项</strong>：x[r, c] 中的索引 r 和 c 不能越界，否则参数校验时抛出异常。</p></li><li class="- topic/li li"><p class="- topic/p p">先定位行，再定位列</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>r, c = 2, 1
rows, cols = [1, 2, 3], 0:2

// 用函数先定位某一行，再定位某一列
x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
x.row(r).at(c)
/*
7
*/

y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
y.row(r).at(c)
/*
7
*/

// 用下标先定位某一行，再定位某一列
x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
x[[r]][c]
/*
[7]
*/

y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
y[[r]][c]
/*
[7]
*/

// 用下标先定位某几行，再定位某几列
x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
x[rows][cols]
/*
[[4,5],[6,7],[9,10]]
*/

y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
y[rows][cols]
/*
[[4,5],[6,7],[9,10]]
*/

// 当 index 越界时，空值填充
x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
x[2 3 4][1:3]
/*
[[7,8],[10,],[,]]
*/

y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
y[2 3 4][1:3]
/*
[[7,8],[10,],[,]]
*/</code></pre></li><li class="- topic/li li"><p class="- topic/p p">先定位列，再定位行</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>r, c = 2, 1
rows, cols = [1, 2, 3], 0:2

// 用下标先定位某一列，再定位某一行
x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
x[c][r]
/*
7
*/

y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
y[c][r]
/*
7
*/

// 用下标先定位某几列，再定位某几行
x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
x[cols][rows]
/*
[[4,5],[6,7],[9,10]]
*/

y = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
y[cols][rows]
/*
[[4,5],[6,7],[9,10]]
*/

// 当 index 越界时，空值填充
x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
x[1:3][2 3 4]
/*
[[7,8],[10,],]
*/

y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
y[1:3][2 3 4]
/*
[[7,8],[10,],]
*/</code></pre></li></ul></div></article><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title12" id="2214-访问表中-array-vector-列的元素"><h5 class="- topic/title title topictitle5" id="ariaid-title12">2.2.1.4. 访问表中 Array Vector 列的元素</h5><div class="- topic/body body"><p class="- topic/p p">可以通过 x[index] 且 index 为标量或者数据对的方式将表中 Array Vector 列的指定位置的元素取出。</p><p class="- topic/p p">当 index 越界时，指定位置元素用空值填充。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
t = table(1 2 3 4 as id, x as x, y as y)
new_t = select *, x[2] as x_newCol1, x[1:3] as x_newCol2, y[2] as y_newCol1, y[1:3] as y_newCol2 from t
/* new_t
id x       y       x_newCol1 x_newCol2 y_newCol1 y_newCol2
-- ------- ------- --------- --------- --------- ---------
1  [1,2,3] [1,2,3] 3         [2,3]     3         [2,3]    
2  [4,5]   [4,5]             [5,]                [5,]     
3  [6,7,8] [6,7,8] 8         [7,8]     8         [7,8]    
4  [9,10]  [9,10]            [10,]               [10,]    
*/</code></pre></div></article></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title13" id="222-array-vector-插入数据"><h4 class="- topic/title title topictitle4" id="ariaid-title13">2.2.2. Array Vector 插入数据</h4><div class="- topic/body body"><p class="- topic/p p">Array Vector 目前支持末尾增加行的操作，暂时不支持修改和删除元素的操作。</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">通过 <code class="+ topic/ph pr-d/codeph ph codeph">append!</code> 方法向 Array Vector 的变量中插入数据</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>// 插入一行
x = array(INT[], 0).append!([1 2 3, 4 5 6])
x.append!(7)
x.append!([8 9])
/* x
[[1,2,3],[4,5,6],[7],[8,9]]
*/

y = [1 2 3, 4 5 6].setColumnarTuple!()
y.append!(7)
y.append!([8 9])
/* y
([1,2,3],[4,5,6],7,[8,9])
*/

// 插入多行
x = array(INT[], 0).append!([1 2 3, 4 5 6])
x.append!([7, 8 9])
/* x
[[1,2,3],[4,5,6],[7],[8,9]]
*/

y = [1 2 3, 4 5 6].setColumnarTuple!()
y.append!([7, 8 9])
/* y
([1,2,3],[4,5,6],7,[8,9])
*/</code></pre></li><li class="- topic/li li"><p class="- topic/p p">通过 <a class="- topic/xref xref" href="../funcs/t/tableInsert.html"><code class="+ topic/ph pr-d/codeph ph codeph">tableInsert</code></a> 、 <code class="+ topic/ph pr-d/codeph ph codeph">append!</code> 等方法向含有 Array Vector 列的表中插入数据</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
t = table(1 2 3 4 as id, x as col1, y as col2)
t.tableInsert(5, 11, 11)
t.tableInsert(6, [12 13 14], [12 13 14])
t.append!(table(7 8 as id, [15 16, 17] as col1, [15 16, 17] as col2))
/* t
id col1       col2      
-- ---------- ----------
1  [1,2,3]    [1,2,3]   
2  [4,5]      [4,5]     
3  [6,7,8]    [6,7,8]   
4  [9,10]     [9,10]    
5  [11]       11        
6  [12,13,14] [12,13,14]
7  [15,16]    [15,16]   
8  [17]       17         
*/</code></pre></li></ul></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title14" id="223-转化-array-vector-为向量矩阵"><h4 class="- topic/title title topictitle4" id="ariaid-title14">2.2.3. 转化 Array Vector 为向量、矩阵</h4><div class="- topic/body body"><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">通过 <a class="- topic/xref xref" href="../funcs/f/flatten.html">flatten</a> 函数可以将 Array Vector 展开成一维向量。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>x = array(INT[], 0).append!([1 2 3, 4 5 6])
z = flatten(x)
/* z
[1,2,3,4,5,6]
*/

y = [1 2 3, 4 5 6].setColumnarTuple!()
z = flatten(y)
/* z
[1,2,3,4,5,6]
*/</code></pre></li><li class="- topic/li li"><p class="- topic/p p">通过 <a class="- topic/xref xref" href="../funcs/m/matrix.html">matrix</a> 函数可以将等长的 Array Vector 转化为矩阵。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>x = array(INT[], 0).append!([1 2 3, 4 5 6])
z = matrix(x)
/* z
#0 #1 #2
-- -- --
1  2  3 
4  5  6 
*/

y = [1 2 3, 4 5 6].setColumnarTuple!()
z = matrix(y)
/* z
#0 #1
-- --
1  4 
2  5 
3  6 
*/</code></pre></li></ol></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title15" id="224-对-fast-array-vector-的每个元素过滤"><h4 class="- topic/title title topictitle4" id="ariaid-title15">2.2.4. 对 Fast Array Vector 的每个元素过滤</h4><div class="- topic/body body"><p class="- topic/p p">可以通过 x[cond] 的方式将 Fast Array Vector 所有满足 cond 条件的元素过滤出来。（该功能 1.30.21 / 2.00.10 后支持）</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
z = x[x&gt;=5]
/* z
[,[5],[6,7,8],[9,10]]
*/

t = table(1 2 3 4 as id, x as x)
new_t = select *, x[x&gt;=5] as newCol from t
/* new_t
id x       newCol 
-- ------- -------
1  [1,2,3] []  
2  [4,5]   [5]    
3  [6,7,8] [6,7,8]
4  [9,10]  [9,10] 
*/</code></pre></div></article></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title16" id="23-array-vector-的计算"><h3 class="- topic/title title topictitle3" id="ariaid-title16">2.3. Array Vector 的计算</h3><div class="- topic/body body"></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title17" id="231-和标量计算"><h4 class="- topic/title title topictitle4" id="ariaid-title17">2.3.1. 和标量计算</h4><div class="- topic/body body"><p class="- topic/p p">即把 Array Vector 的每个元素和标量做计算。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
z = x + 1
/* z
[[2,3,4],[5,6],[7,8,9],[10,11]]
*/

y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
z = y + 1
/* z
([2,3,4],[5,6],[7,8,9],[10,11])
*/

t = table(1 2 3 4 as id, x as x, y as y)
new_t = select *, x + 1 as new_x, y + 1 as new_y from t
/* new_t
id x       y       new_x   new_y  
-- ------- ------- ------- -------
1  [1,2,3] [1,2,3] [2,3,4] [2,3,4]
2  [4,5]   [4,5]   [5,6]   [5,6]  
3  [6,7,8] [6,7,8] [7,8,9] [7,8,9]
4  [9,10]  [9,10]  [10,11] [10,11]
*/</code></pre></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title18" id="232-和向量计算"><h4 class="- topic/title title topictitle4" id="ariaid-title18">2.3.2. 和向量计算</h4><div class="- topic/body body"><p class="- topic/p p">要求向量的长度和 Array Vector 的行数相等。</p><p class="- topic/p p">即把 Array Vector 的每行数据和向量对应位置的元素做计算。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
z = x * [1, 2, 3, 4]
/* z
[[1,2,3],[8,10],[18,21,24],[36,40]]
*/

y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
z = y * [1, 2, 3, 4]
/* z
([1,2,3],[8,10],[18,21,24],[36,40])
*/

t = table(1 2 3 4 as id, x as x, y as y)
new_t = select *, x*id as new_x, y*id as new_y from t
/* new_t
id x       y       new_x      new_y     
-- ------- ------- ---------- ----------
1  [1,2,3] [1,2,3] [1,2,3]    [1,2,3]   
2  [4,5]   [4,5]   [8,10]     [8,10]    
3  [6,7,8] [6,7,8] [18,21,24] [18,21,24]
4  [9,10]  [9,10]  [36,40]    [36,40]  
*/</code></pre></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title19" id="233-和-array-vector-计算"><h4 class="- topic/title title topictitle4" id="ariaid-title19">2.3.3. 和 Array Vector 计算</h4><div class="- topic/body body"><p class="- topic/p p">要求两个 Array Vector 的大小相等。</p><p class="- topic/p p">即把两个 Array Vector 的对应位置的元素做计算。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
xx = array(INT[], 0).append!([3 1 2, 3 1, 1 2 3, 0 1])
z = pow(x, xx)
/* z
[[1,2,9],[64,5],[6,49,512],[1,10]]
*/

y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
yy = [3 1 2, 3 1, 1 2 3, 0 1].setColumnarTuple!()
z = pow(y, yy)
/* z
([1,2,9],[64,5],[6,49,512],[1,10])
*/

t = table(1 2 3 4 as id, x as x, xx as xx, y as y, yy as yy)
new_t = select *, pow(x, xx) as new_x, pow(y, yy) as new_y from t
/* new_t
id x       xx      y       yy      new_x      new_y     
-- ------- ------- ------- ------- ---------- ----------
1  [1,2,3] [3,1,2] [1,2,3] [3,1,2] [1,2,9]    [1,2,9]   
2  [4,5]   [3,1]   [4,5]   [3,1]   [64,5]     [64,5]    
3  [6,7,8] [1,2,3] [6,7,8] [1,2,3] [6,49,512] [6,49,512]
4  [9,10]  [0,1]   [9,10]  [0,1]   [1,10]     [1,10]     
*/</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意事项</strong>：</p><p class="- topic/p p">Fast Array Vector 和 Columnar Tuple 之间不能直接计算。</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title20" id="234-按行计算"><h4 class="- topic/title title topictitle4" id="ariaid-title20">2.3.4. 按行计算</h4><div class="- topic/body body"><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">Array Vector 支持 <a class="- topic/xref xref" href="../funcs/themes/rowFunctions.html">行计算系列（row 系列）</a>。</p><p class="- topic/p p">为了满足用户逐行计算的需求，DolphinDB 设计了 row 系列函数。</p><p class="- topic/p p">row 系列函数以“rowFunc“的格式命名，例如 <code class="+ topic/ph pr-d/codeph ph codeph">rowSum</code>、<code class="+ topic/ph pr-d/codeph ph codeph">rowAlign</code> 等函数。</p><p class="- topic/p p">row 系列函数的输入的参数可以是向量 / 向量元组 / 矩阵 / Array Vector。</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">单目函数示例：按行求和</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
z = rowSum(x)
/* z
[6,9,21,19]
*/

y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
z = rowSum(y)
/* z
[6,9,21,19]
*/

t = table(1 2 3 4 as id, x as x, y as y)
new_t = select *, rowSum(x) as new_x, rowSum(y) as new_y from t
/* new_t
id x       y       new_x new_y
-- ------- ------- ----- -----
1  [1,2,3] [1,2,3] 6     6    
2  [4,5]   [4,5]   9     9    
3  [6,7,8] [6,7,8] 21    21   
4  [9,10]  [9,10]  19    19   
*/</code></pre></li><li class="- topic/li li"><p class="- topic/p p">双目函数示例（Array Vector 和向量）：按行求加权平均</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>x = array(INT[], 0).append!([1 2 3, 4 5 6, 6 7 8, 9 10 11])
z = rowWavg(x, [1, 1, 2])
/* z
[2.25,5.25,7.25,10.25]
*/

y = [1 2 3, 4 5 6, 6 7 8, 9 10 11].setColumnarTuple!()
z = rowWavg(y, [1, 1, 2])
/* z
[2.25,5.25,7.25,10.25]
*/

t = table(1 2 3 4 as id, x as x, y as y)
new_t = select *, rowWavg(x, [1, 1, 2]) as new_x, rowWavg(y, [1, 1, 2]) as new_y from t
/* new_t
id x         y         new_x new_y
-- --------- --------- ----- -----
1  [1,2,3]   [1,2,3]   2.25  2.25 
2  [4,5,6]   [4,5,6]   5.25  5.25 
3  [6,7,8]   [6,7,8]   7.25  7.25 
4  [9,10,11] [9,10,11] 10.25 10.25
*/</code></pre></li><li class="- topic/li li"><p class="- topic/p p">双目函数示例（Array Vector 和 Array Vector）：按行求相关系数</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
xx = array(INT[], 0).append!([3 1 2, 3 1, 1 2 3, 0 1])
z = rowCorr(x, xx)
/* z
[-0.5,-1,1,1]
*/

y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
yy = [3 1 2, 3 1, 1 2 3, 0 1].setColumnarTuple!()
z = rowCorr(y, yy)
/* z
[-0.5,-1,1,1]
*/

t = table(1 2 3 4 as id, x as x, xx as xx, y as y, yy as yy)
new_t = select *, rowCorr(x, xx) as new_x, rowCorr(y, yy) as new_y from t
/* new_t
id x       xx      y       yy      new_x new_y
-- ------- ------- ------- ------- ----- -----
1  [1,2,3] [3,1,2] [1,2,3] [3,1,2] -0.5  -0.5 
2  [4,5]   [3,1]   [4,5]   [3,1]   -1    -1   
3  [6,7,8] [1,2,3] [6,7,8] [1,2,3] 1     1    
4  [9,10]  [0,1]   [9,10]  [0,1]   1     1       
*/</code></pre></li><li class="- topic/li li"><p class="- topic/p p">特殊双目函数示例：按行对齐</p><p class="- topic/p p">针对金融场景的存在的特殊的数据对齐规则，DolphinDB 开发了 <code class="+ topic/ph pr-d/codeph ph codeph">rowAlign</code> 和 <code class="+ topic/ph pr-d/codeph ph codeph">rowAt</code> 函数。</p><p class="- topic/p p"><a class="- topic/xref xref" href="../funcs/r/rowAlign.html">rowAlign(left, right, how)</a>：实现 left 和 right 的数据对齐。输入参数 <em class="+ topic/ph hi-d/i ph i">left</em>、<em class="+ topic/ph hi-d/i ph i">right</em> 是数组向量，表示需要对齐的数据；<em class="+ topic/ph hi-d/i ph i">how</em> 是字符串，表述对齐的方式；最终返回一个长度为 2 的元组，分别表示对齐后数据在原数据中的索引。</p><img class="- topic/image image" src="images/Array_Vector/Array_Vector_1.png"/><br/><p class="- topic/p p"><a class="- topic/xref xref" href="../funcs/r/rowAt.html">rowAt(X, Y)</a>：实现按行从 X 中取出 Y 索引的元素。输入参数 X 是矩阵或数组向量；当 Y 是和 X 行数相等的向量时，返回一个与 Y 长度相同的向量；当 Y 是和 X 行数相等的数组向量时，返回一个与 Y 维度相同的数组向量。</p><p class="- topic/p p">下面以 <em class="+ topic/ph hi-d/i ph i">how</em>="bid" 为例，说明具体的 <code class="+ topic/ph pr-d/codeph ph codeph">rowAlign</code> 对齐结果。</p><p class="- topic/p p">假设 <em class="+ topic/ph hi-d/i ph i">left</em> 是某个时刻的五档买价，<em class="+ topic/ph hi-d/i ph i">right</em> 是上一时刻的五档买价，都是严格单调减的序列</p><img class="- topic/image image" src="images/Array_Vector/Array_Vector_2.png"/><br/><p class="- topic/p p">根据买价的值，按行进行数据对齐</p><img class="- topic/image image" src="images/Array_Vector/Array_Vector_3.png"/><br/><p class="- topic/p p">根据 <em class="+ topic/ph hi-d/i ph i">how</em> 指定的对齐规则，保留满足条件的数据。<em class="+ topic/ph hi-d/i ph i">how</em>="bid" 时，最大值为 max(max(left), max(right)) = max(8.99, 9.00) = 9.00；最小值为 max(min(left), min(right)) = max(8.91, 8.95) = 8.95。【下图蓝色部分为删除部分】</p><img class="- topic/image image" src="images/Array_Vector/Array_Vector_4.png"/><br/><p class="- topic/p p">获取剩余数据在原来向量中的索引，没有数据的位置用 -1 填充。</p><img class="- topic/image image" src="images/Array_Vector/Array_Vector_5.png"/><br/><p class="- topic/p p">下面以上图 <em class="+ topic/ph hi-d/i ph i">left</em> 和 <em class="+ topic/ph hi-d/i ph i">leftIndex</em> 为例，说明具体的 <code class="+ topic/ph pr-d/codeph ph codeph">rowAt(left, leftIndex)</code> 取数结果。</p><img class="- topic/image image" src="images/Array_Vector/Array_Vector_6.png"/><br/><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>left = array(DOUBLE[], 0).append!([9.00 8.98 8.97 8.96 8.95, 8.99 8.97 8.95 8.93 8.91])
right = prev(left)
/* 
left:[[9,8.98,8.97,8.96,8.949999999999999],[8.99,8.97,8.949999999999999,8.929999999999999,8.91]]
right:[,[9,8.98,8.97,8.96,8.949999999999999]]
*/

leftIndex, rightIndex = rowAlign(left, right, how="bid")
/*
leftIndex:[[0,1,2,3,4],[-1,0,-1,1,-1,2]]
rightIndex:[[-1,-1,-1,-1,-1],[0,-1,1,2,3,4]]
*/

leftResult = rowAt(left, leftIndex)
rightResult = rowAt(right, rightIndex)
/*
leftResult:[[9,8.98,8.97,8.96,8.949999999999999],[,8.99,,8.97,,8.949999999999999]]
rightResult:[[,,,,],[9,,8.98,8.97,8.96,8.949999999999999]]
*/</code></pre></li></ul></li><li class="- topic/li li"><p class="- topic/p p">Fast Array Vector 支持调用高阶函数 <a class="- topic/xref xref" href="../funcs/ho_funcs/byRow.html">byRow</a>，对数组向量的每行元素进行计算。</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">窗口函数示例：求每行的累计和</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
z = byRow(cumsum, x)
/* z
[[1,3,6],[4,9],[6,13,21],[9,19]]
*/

t = table(1 2 3 4 as id, x as x)
new_t = select *, byRow(cumsum, x) as new_x from t
/* new_t
id x       new_x        
-- ------- ---------
1  [1,2,3] [1,3,6]  
2  [4,5]   [4,9]    
3  [6,7,8] [6,13,21]
4  [9,10]  [9,19]   
*/</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意事项</strong>：</p><ul class="- topic/ul ul"><li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">byRow</code> 只支持 Fast Array Vector</li><li class="- topic/li li">使用 <code class="+ topic/ph pr-d/codeph ph codeph">byRow</code> 函数时，自定义函数 func 的返回值只能是<strong class="+ topic/ph hi-d/b ph b">标量</strong>（defg 定义的聚合函数）或者和 Fast Array Vector 每行<strong class="+ topic/ph hi-d/b ph b">等长的向量</strong>（类似窗口函数）。</li></ul><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>// 返回值是标量
defg foo1(v){
    return last(v)-first(v)
}

// 返回值是和 v 等长的向量
def foo2(v){
    return v \ prev(v) - 1
}

x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
x1 = byRow(foo1, x)
x2 = byRow(foo2, x)
/*
x1: [2,1,2,1]
x2: [[,1,0.5],[,0.25],[,0.166666666666667,0.142857142857143],[,0.111111111111111]]
*/

t = table(1 2 3 4 as id, x as x)
new_t = select *, byRow(foo1, x) as x1, byRow(foo2, x) as x2 from t
/* new_t
id x       x1 x2                                    
-- ------- -- --------------------------------------
1  [1,2,3] 2  [,1,0.5]                              
2  [4,5]   1  [,0.25]                               
3  [6,7,8] 2  [,0.166666666666667,0.142857142857143]
4  [9,10]  1  [,0.111111111111111]                  
*/</code></pre></li></ul></li><li class="- topic/li li"><p class="- topic/p p">Array Vector 支持调用高阶函数 <a class="- topic/xref xref" href="../funcs/ho_funcs/each.html">each</a> 和 <a class="- topic/xref xref" href="../funcs/ho_funcs/loop.html">loop</a>，对 Array Vector 的每行元素进行计算。</p><p class="- topic/p p">和 <code class="+ topic/ph pr-d/codeph ph codeph">byRow</code> 函数使用方式类似，都是将自定义函数作用在 Array Vector 的每一行上。</p><ul class="- topic/ul ul"><li class="- topic/li li">两者的区别是：<ul class="- topic/ul ul"><li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">byRow</code> 只支持 Fast Array Vector；<code class="+ topic/ph pr-d/codeph ph codeph">each</code> 和 <code class="+ topic/ph pr-d/codeph ph codeph">loop</code> 支持 Fast Array Vector 和 Columnar Tuple。</li><li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">each</code> 和 <code class="+ topic/ph pr-d/codeph ph codeph">loop</code> 的自定义函数 func，返回值没有限制，可以是和每行元素不同长度的向量。自定义函数 func 返回值是向量时，返回的结果是 tuple 类型，对应表中的列是 Columnar Tuple 类型。</li><li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">byRow</code> 的自定义函数 func 返回值是向量时，<code class="+ topic/ph pr-d/codeph ph codeph">byRow</code> 返回的结果是 Fast Array Vector 类型，对应表中的列也是 Fast Array Vector 类型。</li></ul></li></ul><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>// 返回值可以是和 v 不等长的向量
def foo3(v){
    return [last(v)-first(v), last(v)+first(v)]
} 

x = array(INT[], 0).append!([1 2 3, 4 5, 6 7 8, 9 10])
z = loop(foo3, x)
/* z
([2,4],[1,9],[2,14],[1,19])
*/

y = [1 2 3, 4 5, 6 7 8, 9 10].setColumnarTuple!()
z = loop(foo3, y)
/* z
([2,4],[1,9],[2,14],[1,19])
*/

t = table(1 2 3 4 as id, x as x, y as y)
new_t = select *, loop(foo3, x) as new_x, loop(foo3, y) as new_y from t
/* new_t
id x       y       new_x  new_y 
-- ------- ------- ------ ------
1  [1,2,3] [1,2,3] [2,4]  [2,4] 
2  [4,5]   [4,5]   [1,9]  [1,9] 
3  [6,7,8] [6,7,8] [2,14] [2,14]
4  [9,10]  [9,10]  [1,19] [1,19]
*/</code></pre></li></ol></div></article></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title21" id="24-api-写入"><h3 class="- topic/title title topictitle3" id="ariaid-title21">2.4. API 写入</h3><div class="- topic/body body"></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title22" id="241-c-api"><h4 class="- topic/title title topictitle4" id="ariaid-title22">2.4.1. C++ API</h4><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Step1</strong>：C++ 中创建表对象。指定对应 Array Vector 列的类型为 DT_XX_ARRAY。</p><p class="- topic/p p">（比如下例中的 value 列是 INT 类型的 Array Vector，所以指定为 DT_INT_ARRAY）</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>int rowNum = 3;
int colNum = 2;
vector&lt;string&gt; colNames = {"id","value"};
vector&lt;DATA_TYPE&gt; colTypes = {DT_INT, DT_INT_ARRAY};
ConstantSP table = Util::createTable(colNames, colTypes, rowNum, rowNum+1);
vector&lt;VectorSP&gt; columnVecs;
columnVecs.reserve(colNum);
for(int i = 0; i &lt; colNum; ++i) {
    columnVecs.emplace_back(table-&gt;getColumn(i));
}</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Step2</strong>：逐行向 C++ 的表对象中添加数据。创建一个 DdbVector 类型的向量，作为 Array Vector 里的一行。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>for(int i = 0; i &lt; rowNum; ++i) {
    // 构造 Array Vector 的一行
    DdbVector&lt;int&gt; intVec(0, 10);
    for(int j = 0; j &lt; 3; ++j) {
        intVec.add(i*3+j);
    }
    VectorSP value_row = intVec.createVector(DT_INT);
    columnVecs[0]-&gt;setInt(i, i);        // id 列
    columnVecs[1]-&gt;set(i, value_row);    // value 列
}</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Step3</strong>：连接 DolphinDB，上传数据。</p><p class="- topic/p p">（示例中，是通过 upload 方法把表数据 table 上传到 DolphinDB 的内存表 myTable。C++ API 的更多操作可以查看教程：<a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/cppdoc/cpp_api.html" target="_blank" rel="external noopener">C++ API 使用教程</a>）</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>// 连接 DolphinDB 节点
DBConnection conn;
conn.connect("127.0.0.1", 8848);
conn.login("admin", "123456", false);
// 上传数据到内存表
conn.upload("myTable", table);</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Step4</strong>：查询数据</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>string script = "select * from myTable;";
ConstantSP result = conn.run(script);
std::cout&lt;&lt;"------ check data ------"&lt;&lt;std::endl;
std::cout&lt;&lt;result-&gt;getString()&lt;&lt;std::endl;</code></pre><img class="- topic/image image" src="images/Array_Vector/Array_Vector_7.png"/><br/></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title23" id="242-java-api"><h4 class="- topic/title title topictitle4" id="ariaid-title23">2.4.2. Java API</h4><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Step1</strong>：连接 DolphinDB，并在 DolphinDB 中创建一张维度表，用于接收数据。指定对应列的类型为 XX[]。</p><p class="- topic/p p">（比如下例中的 value 列是 INT 类型的 Array Vector，所以指定为 INT[]）</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>// 连接 DolphinDB 的节点
DBConnection conn = new DBConnection();
boolean success = conn.connect("127.0.0.1", 8848, "admin", "123456");
// 创建维度表
String ddb_script = "dbName = \"dfs://testDB\"\n" +"../py_api.dita"est\"\n" +
                "if(existsDatabase(dbName)) {\n" +
                "    dropDatabase(dbName)\n" +
                "}\n" +
                "db = database(dbName, VALUE, 1 2 3 4, , 'TSDB')\n" +
                "schemaTB = table(1:0, `id`value, [INT, INT[]])\n" +
                "pt = createTable(db, schemaTB, tbName, sortColumns=`id)";
conn.run(ddb_script);</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Step2</strong>：Java 构造数据，创建表对象。每一列对应一个 List，Array Vector 列是一个类型为 vector 的 List，其中每一行是一个向量。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>List&lt;String&gt; colNames = Arrays.asList("id", "value");
List&lt;Vector&gt; cols = new ArrayList&lt;&gt;(6);
int rowNum = 4;
List&lt;Integer&gt; idCol = new ArrayList&lt;&gt;(rowNum);
List&lt;Vector&gt; valueCol = new ArrayList&lt;&gt;(rowNum);    // Array Vector 列
for(int i = 0; i &lt; rowNum; ++i) {
    idCol.add(i + 1);
    List&lt;Integer&gt; valueRow = new ArrayList&lt;&gt;(50);   // Array Vector 中的一行
    for(int j = 0; j &lt; 3; ++j) {
        valueRow.add(i*3 +j);
    }
    valueCol.add(new BasicIntVector(valueRow));
}
cols.add(new BasicIntVector(idCol));
cols.add(new BasicArrayVector(valueCol));
BasicTable tb = new BasicTable(colNames, cols);</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Step3</strong>：往预先创建的维度表中插入数据。</p><p class="- topic/p p">（示例中，是通过 <code class="+ topic/ph pr-d/codeph ph codeph">tableInsert</code> 方法把表数据 tb 上传到 DolphinDB 的维度表 loadTable ('dfs://testDB','test')。Java API 的更多操作可以查看教程：<a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/javadoc/newjava.html" target="_blank" rel="external noopener">Java API 使用教程</a>。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>List&lt;Entity&gt; tbArg = new ArrayList&lt;&gt;(1);
tbArg.add(tb);
conn.run("tableInsert{loadTable('dfs://testDB','test')}", tbArg);</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Step4</strong>：查询数据</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>BasicTable t;
t = (BasicTable)conn.run("select * from loadTable('dfs://testDB','test')");
System.out.println(t.getString());</code></pre><img class="- topic/image image" src="images/Array_Vector/Array_Vector_8.png"/><br/></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title24" id="243-python-api"><h4 class="- topic/title title topictitle4" id="ariaid-title24">2.4.3. Python API</h4><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Step1</strong>：python 中创建表对象。</p><p class="- topic/p p">（比如下例中的 value 列是 INT 类型的 Array Vector）</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>df = pd.DataFrame({
    'id': [1, 2, 3, 4],
    'value': [np.array([1,2,3],dtype=np.int64), np.array([4,5,6],dtype=np.int64), np.array([7,8,9],dtype=np.int64), np.array([10,11,12],dtype=np.int64)]
})</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Step2</strong>：连接 DolphinDB，上传数据。</p><p class="- topic/p p">（示例中，是通过 <code class="+ topic/ph pr-d/codeph ph codeph">table</code> 方法把数据框 df 上传到 DolphinDB 的内存表 myTable。Python API 的更多操作可以查看教程：<a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/pydoc/py.html" target="_blank" rel="external noopener">Python API 使用教程</a>）</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>// 连接 DolphinDB 节点
s = ddb.session()
s.connect("127.0.0.1", 8848, "admin", "123456")
// 上传数据到内存表
s.table(data=df, tableAliasName="myTable")</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Step3</strong>：查询数据</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>t = s.run("select * from myTable")
print(t)</code></pre><img class="- topic/image image" src="images/Array_Vector/Array_Vector_9.png"/><br/></div></article></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title25" id="3-array-vector-在-level2-快照数据中的应用"><h2 class="- topic/title title topictitle2" id="ariaid-title25">3. Array Vector 在 level2 快照数据中的应用</h2><div class="- topic/body body"></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title26" id="31-快照数据的存储"><h3 class="- topic/title title topictitle3" id="ariaid-title26">3.1. 快照数据的存储</h3><div class="- topic/body body"><p class="- topic/p p">Array Vector 在存储中的一个典型应用场景就是存储快照十档行情数据。</p><p class="- topic/p p">level 2 的快照数据包含买卖十档价格、十档成交量、十档实际总委托笔数、前 50 笔买卖订单等多种多档数据，并且后续也常常需要将这些数据整体计算处理，所以很适合将多档数据作为整体存储为一列。</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">多档多列存储</strong></p><img class="- topic/image image" src="images/Array_Vector/Array_Vector_10.png"/><br/></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Array Vector 存储</strong></p><img class="- topic/image image" src="images/Array_Vector/Array_Vector_11.png"/><br/><p class="- topic/p p">以上交所 level 2 的快照数据为例，进行具体的说明。下面是本教程中的存储的分布式表结构。</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="31-快照数据的存储__entry__1"><strong class="+ topic/ph hi-d/b ph b">字段名称</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="31-快照数据的存储__entry__2"><strong class="+ topic/ph hi-d/b ph b">数据类型</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="31-快照数据的存储__entry__3"><strong class="+ topic/ph hi-d/b ph b">数据说明</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">SecurityID</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">SYMBOL</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">证券代码</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">DateTime</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">TIMESTAMP</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">日期时间</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">PreClosePx</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">DOUBLE</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">昨收价</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">OpenPx</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">DOUBLE</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">开始价</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">HighPx</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">DOUBLE</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">最高价</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">LowPx</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">DOUBLE</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">最低价</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">LastPx</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">DOUBLE</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">最新价</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">TotalVolumeTrade</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">成交总量</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">TotalValueTrade</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">DOUBLE</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">成交总金额</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">InstrumentStatus</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">SYMBOL</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">交易状态</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">BidPrice</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">DOUBLE[]</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">申买十价</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">BidOrderQty</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT[]</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">申买十量</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">BidNumOrders</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT[]</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">申买十实际总委托笔数</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">BidOrders</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT[]</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">申买一前 50 笔订单</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">OfferPrice</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">DOUBLE[]</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">申卖十价</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">OfferOrderQty</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT[]</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">申卖十量</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">OfferNumOrders</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT[]</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">申卖十实际总委托笔数</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">OfferOrders</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT[]</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">申卖一前 50 笔订单</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">NumTrades</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">成交笔数</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">IOPV</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">DOUBLE</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">ETF 净值估值</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">TotalBidQty</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">委托买入总量</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">TotalOfferQty</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">委托卖出总量</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">WeightedAvgBidPx</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">DOUBLE</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">加权平均委买价格</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">WeightedAvgOfferPx</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">DOUBLE</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">加权平均委卖价格</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">TotalBidNumber</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">买入总笔数</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">TotalOfferNumber</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">卖出总笔数</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">BidTradeMaxDuration</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">买入成交最大等待时间</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">OfferTradeMaxDuration</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">买入成交最大等待时间</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">NumBidOrders</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">买方委托价位数</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">NumOfferOrders</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">卖方委托价位数</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">WithdrawBuyNumber</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">买入撤单笔数</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">WithdrawBuyAmount</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">买入撤单数量</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">WithdrawBuyMoney</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">DOUBLE</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">买入撤单金额</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">WithdrawSellNumber</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">卖出撤单笔数</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">WithdrawSellAmount</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">卖出撤单数量</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">WithdrawSellMoney</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">DOUBLE</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">卖出撤单金额</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">ETFBuyNumber</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">ETF 申购笔数</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">ETFBuyAmount</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">ETF 申购数量</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">ETFBuyMoney</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">DOUBLE</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">ETF 申购金额</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">ETFSellNumber</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">ETF 赎回笔数</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">ETFSellAmount</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">INT</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">ETF 赎回数量</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__1">ETFSellMoney</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__2">DOUBLE</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="31-快照数据的存储__entry__3">ETF 赎回金额</td></tr></tbody></table></div><p class="- topic/p p">其中，买卖十档价格（BidPrice / OfferPrice）、十档成交量（BidOrderQty / OfferOrderQty）、十档实际总委托笔数（BidNumOrders / OfferNumOrders）、前 50 笔买卖订单（BidOrders / OfferOrders）这 8 个字段都采用 Array Vector 的格式存储。在建表时，通过“DOUBLE[]”和“INT[]”的方式指定列的类型为 Array Vector。下面是对应的建表语句。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>dbName = "dfs://SH_TSDB_snapshot_ArrayVector"
tbName = "snapshot"
if(existsDatabase(dbName)){
 dropDatabase(dbName)
}
db1 = database(, VALUE, 2020.01.01..2021.01.01)
db2 = database(, HASH, [SYMBOL, 20])
db = database(dbName, COMPO, [db1, db2], , "TSDB")
schemaTable = table(
 array(SYMBOL, 0) as SecurityID,
 array(TIMESTAMP, 0) as DateTime,
 array(DOUBLE, 0) as PreClosePx,
 array(DOUBLE, 0) as OpenPx,
 array(DOUBLE, 0) as HighPx,
 array(DOUBLE, 0) as LowPx,
 array(DOUBLE, 0) as LastPx,
 array(INT, 0) as TotalVolumeTrade,
 array(DOUBLE, 0) as TotalValueTrade,
 array(SYMBOL, 0) as InstrumentStatus,
 array(DOUBLE[], 0) as BidPrice,
 array(INT[], 0) as BidOrderQty,
 array(INT[], 0) as BidNumOrders,
 array(INT[], 0) as BidOrders,
 array(DOUBLE[], 0) as OfferPrice,
 array(INT[], 0) as OfferOrderQty,
 array(INT[], 0) as OfferNumOrders,
 array(INT[], 0) as OfferOrders,
 array(INT, 0) as NumTrades,
 array(DOUBLE, 0) as IOPV,
 array(INT, 0) as TotalBidQty,
 array(INT, 0) as TotalOfferQty,
 array(DOUBLE, 0) as WeightedAvgBidPx,
 array(DOUBLE, 0) as WeightedAvgOfferPx,
 array(INT, 0) as TotalBidNumber,
 array(INT, 0) as TotalOfferNumber,
 array(INT, 0) as BidTradeMaxDuration,
 array(INT, 0) as OfferTradeMaxDuration,
 array(INT, 0) as NumBidOrders,
 array(INT, 0) as NumOfferOrders,
 array(INT, 0) as WithdrawBuyNumber,
 array(INT, 0) as WithdrawBuyAmount,
 array(DOUBLE, 0) as WithdrawBuyMoney,
 array(INT, 0) as WithdrawSellNumber,
 array(INT, 0) as WithdrawSellAmount,
 array(DOUBLE, 0) as WithdrawSellMoney,
 array(INT, 0) as ETFBuyNumber,
 array(INT, 0) as ETFBuyAmount,
 array(DOUBLE, 0) as ETFBuyMoney,
 array(INT, 0) as ETFSellNumber,
 array(INT, 0) as ETFSellAmount,
 array(DOUBLE, 0) as ETFSellMoney
)
db.createPartitionedTable(table=schemaTable, tableName=tbName, partitionColumns=`DateTime`SecurityID, compressMethods={DateTime:"delta"}, sortColumns=`SecurityID`DateTime, keepDuplicates=ALL)</code></pre><p class="- topic/p p">导入数据时，可以通过 <code class="+ topic/ph pr-d/codeph ph codeph">fixedLengthArrayVector</code> 函数将多档的数据合并成一列 Array Vector。下面是对应的导入数据脚本。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code> def transform(data){
 t = select SecurityID, DateTime, PreClosePx, OpenPx, HighPx, LowPx, LastPx, TotalVolumeTrade, TotalValueTrade, InstrumentStatus,
        fixedLengthArrayVector(BidPrice0, BidPrice1, BidPrice2, BidPrice3,  BidPrice4, BidPrice5, BidPrice6, BidPrice7, BidPrice8, BidPrice9) as BidPrice,
        fixedLengthArrayVector(BidOrderQty0, BidOrderQty1, BidOrderQty2, BidOrderQty3,  BidOrderQty4, BidOrderQty5, BidOrderQty6, BidOrderQty7, BidOrderQty8, BidOrderQty9) as BidOrderQty,
        fixedLengthArrayVector(BidNumOrders0, BidNumOrders1, BidNumOrders2, BidNumOrders3,  BidNumOrders4, BidNumOrders5, BidNumOrders6, BidNumOrders7, BidNumOrders8, BidNumOrders9) as BidNumOrders,
        fixedLengthArrayVector(BidOrders0, BidOrders1, BidOrders2, BidOrders3,  BidOrders4, BidOrders5, BidOrders6, BidOrders7, BidOrders8, BidOrders9, BidOrders10, BidOrders11, BidOrders12, BidOrders13,  BidOrders14, BidOrders15, BidOrders16, BidOrders17, BidOrders18, BidOrders19, BidOrders20, BidOrders21, BidOrders22, BidOrders23,  BidOrders24, BidOrders25, BidOrders26, BidOrders27, BidOrders28, BidOrders29, BidOrders30, BidOrders31, BidOrders32, BidOrders33,  BidOrders34, BidOrders35, BidOrders36, BidOrders37, BidOrders38, BidOrders39, BidOrders40, BidOrders41, BidOrders42, BidOrders43,  BidOrders44, BidOrders45, BidOrders46, BidOrders47, BidOrders48, BidOrders49) as BidOrders,
        fixedLengthArrayVector(OfferPrice0, OfferPrice1, OfferPrice2, OfferPrice3,  OfferPrice4, OfferPrice5, OfferPrice6, OfferPrice7, OfferPrice8, OfferPrice9) as OfferPrice,
        fixedLengthArrayVector(OfferOrderQty0, OfferOrderQty1, OfferOrderQty2, OfferOrderQty3,  OfferOrderQty4, OfferOrderQty5, OfferOrderQty6, OfferOrderQty7, OfferOrderQty8, OfferOrderQty9) as OfferOrderQty,
        fixedLengthArrayVector(OfferNumOrders0, OfferNumOrders1, OfferNumOrders2, OfferNumOrders3,  OfferNumOrders4, OfferNumOrders5, OfferNumOrders6, OfferNumOrders7, OfferNumOrders8, OfferNumOrders9) as OfferNumOrders,
        fixedLengthArrayVector(OfferOrders0, OfferOrders1, OfferOrders2, OfferOrders3,  OfferOrders4, OfferOrders5, OfferOrders6, OfferOrders7, OfferOrders8, OfferOrders9, OfferOrders10, OfferOrders11, OfferOrders12, OfferOrders13,  OfferOrders14, OfferOrders15, OfferOrders16, OfferOrders17, OfferOrders18, OfferOrders19, OfferOrders20, OfferOrders21, OfferOrders22, OfferOrders23,  OfferOrders24, OfferOrders25, OfferOrders26, OfferOrders27, OfferOrders28, OfferOrders29, OfferOrders30, OfferOrders31, OfferOrders32, OfferOrders33,  OfferOrders34, OfferOrders35, OfferOrders36, OfferOrders37, OfferOrders38, OfferOrders39, OfferOrders40, OfferOrders41, OfferOrders42, OfferOrders43,  OfferOrders44, OfferOrders45, OfferOrders46, OfferOrders47, OfferOrders48, OfferOrders49) as OfferOrders,
        NumTrades, IOPV, TotalBidQty, TotalOfferQty, WeightedAvgBidPx, WeightedAvgOfferPx, TotalBidNumber, TotalOfferNumber, BidTradeMaxDuration,OfferTradeMaxDuration, NumBidOrders, NumOfferOrders, WithdrawBuyNumber, WithdrawBuyAmount, WithdrawBuyMoney,WithdrawSellNumber, WithdrawSellAmount, WithdrawSellMoney, ETFBuyNumber, ETFBuyAmount, ETFBuyMoney, ETFSellNumber, ETFSellAmount, ETFSellMoney
        from data
 return t
}

def loadData(csvDir, dbName, tbName){
 schemaTB = extractTextSchema(csvDir)
 update schemaTB set type = "SYMBOL" where name = "SecurityID"
 loadTextEx(dbHandle=database(dbName), tableName=tbName, partitionColumns=`DateTime`SecurityID, sortColumns=`SecurityID`DateTime, filename=csvDir, schema=schemaTB, transform=transform)
}
// 后台提交导入任务
csvDir = "/home/v2/下载/data/testdata/snapshot_100stocks_multi.csv"
dbName, tbName = "dfs://SH_TSDB_snapshot_ArrayVector", "snapshot"
submitJob("loadData", "load Data", loadData{csvDir, dbName, tbName})
getRecentJobs()</code></pre></li></ul></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title27" id="32-快照数据分组时保留明细"><h3 class="- topic/title title topictitle3" id="ariaid-title27">3.2. 快照数据分组时保留明细</h3><div class="- topic/body body"><p class="- topic/p p">Array Vector 在存储中的另一个典型应用场景就是分组计算时将组内所有明细数据保留。</p><p class="- topic/p p">DolphinDB 提供了函数 <code class="+ topic/ph pr-d/codeph ph codeph">toArray</code>。<code class="+ topic/ph pr-d/codeph ph codeph">toArray</code> 搭配 <code class="+ topic/ph pr-d/codeph ph codeph">group by</code> 语句，可以将 <code class="+ topic/ph pr-d/codeph ph codeph">group by</code> 分组的数据存储成数组向量的一行，便于用户直接查看该分组下的所有数据。</p><p class="- topic/p p">比如，将快照数据聚合成 5 分钟 tick 数据并入库，结果表字段包括高开低收、成交量、成交金额、bid0 和 ask0 的量价切片。</p><img class="- topic/image image" src="images/Array_Vector/Array_Vector_12.png"/><br/><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>// 创建存储 5 min tick 数据的分布式库表
def createFiveMinuteBarDB(dbName, tbName){
 if(existsDatabase(dbName)){
  dropDatabase(dbName)
 }
 db = database(dbName, VALUE, 2021.01.01..2021.12.31, , "TSDB")
 colNames = `SecurityID`DateTime`OpenPx`HighPx`LowPx`LastPx`TotalVolume`TotalValueTrade`BidPrice0`BidOrderQty0`OfferPrice0`OfferOrderQty0
 colTypes = [SYMBOL, TIMESTAMP, DOUBLE, DOUBLE, DOUBLE, DOUBLE, LONG, DOUBLE, DOUBLE[], INT[], DOUBLE[], INT[]]
 schemaTable = table(1:0, colNames, colTypes)
 db.createPartitionedTable(table=schemaTable, tableName=tbName, partitionColumns=`DateTime, compressMethods={DateTime:"delta"}, sortColumns=`SecurityID`DateTime, keepDuplicates=ALL)
}
dbName, tbName = "dfs://fiveMinuteBar", "fiveMinuteBar"
createFiveMinuteBarDB(dbName, tbName)

// 根据快照数计算 5 min tick 数据
t = select first(OpenPx) as OpenPx, max(HighPx) as HighPx, min(LowPx) as LowPx, last(LastPx) as LastPx, last(TotalVolumeTrade) as TotalVolumeTrade, last(TotalValueTrade) as TotalValueTrade, toArray(BidPrice[0]) as BidPrice0,  toArray(BidOrderQty[0]) as BidOrderQty0, toArray(OfferPrice[0]) as OfferPrice0, toArray(OfferOrderQty[0]) as OfferOrderQty0 from loadTable("dfs://SH_TSDB_snapshot_ArrayVector", "snapshot") group by SecurityID, interval(DateTime, 5m, "none") as DateTime map

// 将数据存入数据库
loadTable(dbName, tbName).append!(t)</code></pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title28" id="33-基于快照数据的高频因子计算"><h3 class="- topic/title title topictitle3" id="ariaid-title28">3.3. 基于快照数据的高频因子计算</h3><div class="- topic/body body"><p class="- topic/p p">DolphinDB 不仅提供了高速存取时序数据的基本功能，还内置了向量化的多范式编程语言和强大的计算引擎，可高效用于量化金融的因子开发，包括基于历史数据的批量高频因子计算和基于实时 Level 2 行情的流式计算。</p><p class="- topic/p p">本章节以基于快照数据计算高频因子为例，展示 Array Vector 在因子计算中的应用。</p></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title29" id="331-净委买增额"><h4 class="- topic/title title topictitle4" id="ariaid-title29">3.3.1. 净委买增额</h4><div class="- topic/body body"><p class="- topic/p p">根据《<a class="- topic/xref xref" href="https://zhuanlan.zhihu.com/p/452566110" target="_blank" rel="external noopener">量化交易因子挖掘笔记 - 从限价订单簿（LOB）挖掘高频价量因子</a>》中对净委买增额的定义和计算方法，实现的指标公式如下：：</p><img class="- topic/image image" src="images/Array_Vector/Array_Vector_13.png"/><br/><p class="- topic/p p">其中 bidAmtDiff<sub class="+ topic/ph hi-d/sub ph sub">t</sub> 表示 t 时刻的委买增额；bid<sub class="+ topic/ph hi-d/sub ph sub">i,t</sub> 表示 t 时刻快照数据的第 i 档买方报价；指示函数 I 含义如下：</p><img class="- topic/image image" src="images/Array_Vector/Array_Vector_14.png"/><br/><p class="- topic/p p">根据上述公式，结合 DolphinDB 丰富的内置函数（<code class="+ topic/ph pr-d/codeph ph codeph">prev</code> 获取上一个 tick 的价格；<code class="+ topic/ph pr-d/codeph ph codeph">rowSum</code> 计算 Array Vector 的行和），可以转写出如下代码：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>@state
def calculateAmtDiff(bid, ask, bidvol, askvol){
 lastBidPrice = prev(bid[0])  // 上一个 tick 的买一价
 lastAskPrice = prev(ask[0])  // 上一个 tick 的卖一价
 lastBidQty = prev(bidvol[0])  // 上一个 tick 的买一量
 lastAskQty = prev(askvol[0]) // 上一个 tick 的卖一量
 // 求委买增额
 bidAmtDiff = rowSum(bid*bidvol*(bid &gt;= lastBidPrice)) - lastBidPrice*lastBidQty
 // 求委卖增额
 askAmtDiff = rowSum(ask*askvol*(ask &lt;= lastAskPrice)) - lastAskPrice*lastAskQty
 return bidAmtDiff - askAmtDiff
}</code></pre><p class="- topic/p p">用上面的自定义函数，可以快速地实现净委买增额的批计算和流计算。</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">批计算</strong></p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>snapshot = loadTable("dfs://SH_TSDB_snapshot_ArrayVector", "snapshot")
res1 = select SecurityID, DateTime, calculateAmtDiff(BidPrice, OfferPrice, BidOrderQty, OfferOrderQty) as amtDiff from snapshot context by SecurityID csort DateTime</code></pre></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">流计算</strong></p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>// 创建输入输出表
share(streamTable(1:0, snapshot.schema().colDefs.name, snapshot.schema().colDefs.typeString), `snapshotStreamTable)
share(streamTable(1:0, `SecurityID`DateTime`amtDiff, [SYMBOL, TIMESTAMP, DOUBLE]), `res2)
go
// 创建流计算引擎
createReactiveStateEngine(name="calAmtDiffDemo", metrics=&lt;[DateTime, calculateAmtDiff(BidPrice, OfferPrice, BidOrderQty, OfferOrderQty)]&gt;, dummyTable=snapshotStreamTable, outputTable=res2, keyColumn=`SecurityID)
// 创建订阅
subscribeTable(tableName="snapshotStreamTable", actionName="calAmtDiffTest", offset=-1, handler=getStreamEngine("calAmtDiffDemo"), msgAsTable=true)
// 取数据回放，模拟流数据
testData = select * from snapshot where date(DateTime)=2021.12.01 order by DateTime
submitJob("replayData", "replay snapshot data", replay{inputTables=testData, outputTables=snapshotStreamTable, dateColumn=`DateTime, timeColumn=`DateTime, replayRate=1000})</code></pre></li></ul></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title30" id="332-十档净委买增额"><h4 class="- topic/title title topictitle4" id="ariaid-title30">3.3.2. 十档净委买增额</h4><div class="- topic/body body"><p class="- topic/p p">根据<a class="- topic/xref xref" href="l2_stk_data_proc.html">处理 Level 2 行情数据实例</a> ，实现的指标公式如下：</p><img class="- topic/image image" src="images/Array_Vector/Array_Vector_15.png"/><br/><p class="- topic/p p">其中 level10_Diff<sub class="+ topic/ph hi-d/sub ph sub">t</sub> 表示 t 时刻的委买增额；bid<sub class="+ topic/ph hi-d/sub ph sub">i,t</sub> 表示 t 时刻快照数据的第 i 档买方报价；指示函数 I 含义如下：</p><img class="- topic/image image" src="images/Array_Vector/Array_Vector_16.png"/><br/><p class="- topic/p p">DolphinDB 中可以先通过行对齐函数 <code class="+ topic/ph pr-d/codeph ph codeph">rowAlign</code> 实现当前十档价格和前一个十档价格进行行对齐；然后通过 <code class="+ topic/ph pr-d/codeph ph codeph">rowAt</code> 和 <code class="+ topic/ph pr-d/codeph ph codeph">nullFill</code> 函数分别获取对应档位的委托量和价格；最后通过 <code class="+ topic/ph pr-d/codeph ph codeph">rowSum</code> 函数计算总的变化额。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>@state
def level10_Diff(price, qty, buy){
        prevPrice = price.prev()
        left, right = rowAlign(price, prevPrice, how=iif(buy, "bid", "ask"))
        qtyDiff = (qty.rowAt(left).nullFill(0) - qty.prev().rowAt(right).nullFill(0)) 
        amtDiff = rowSum(nullFill(price.rowAt(left), prevPrice.rowAt(right)) * qtyDiff)
        return amtDiff
}

snapshot = loadTable("dfs://SH_TSDB_snapshot_ArrayVector", "snapshot")
res = select SecurityID, DateTime, level10_Diff(BidPrice, BidOrderQty, true) as level10_Diff from snapshot context by SecurityID csort DateTime</code></pre></div></article></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title31" id="4-总结"><h2 class="- topic/title title topictitle2" id="ariaid-title31">4. 总结</h2><div class="- topic/body body"><p class="- topic/p p">针对不定长度二维数组的存储和计算，DolphinDB 提供了一种特殊的数据形式 —— Array Vector。</p><p class="- topic/p p">本教程针对 Array Vector 的特点、使用方式、注意事项、应用场景等做了一系列的介绍。</p><p class="- topic/p p">DolphinDB 能够存储大量的历史高频行情数据，为其后续的高效因子挖掘和计算提供支持，特别是在 level 2 快照数据的存储和计算上，Array Vector 展现了其简洁、高效、灵活的特点。</p></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title32" id="5-附件"><h2 class="- topic/title title topictitle2" id="ariaid-title32">5. 附件</h2><div class="- topic/body body"><p class="- topic/p p"><a class="- topic/xref xref" href="https://cdn.dolphindb.cn/downloads/snapshot_100stocks_multi.zip" target="_blank" rel="external noopener">snapshot_100stocks_multi.zip</a></p></div></article></article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" aria-label="On this page" class="col-lg-2 d-none d-lg-block navbar d-print-none"> 
                            <div id="wh_topic_toc_content">
		                        
	                            <div class=" wh_topic_toc "><div class="wh_topic_label">在本页上</div><ul><li class="topic-item"><a href="#1-%E6%A6%82%E5%BF%B5" data-tocid="1-概念">1. 概念</a></li><li class="topic-item"><a href="#2-array-vector-%E6%94%AF%E6%8C%81%E7%9A%84%E5%87%BD%E6%95%B0%E5%92%8C%E6%93%8D%E4%BD%9C" data-tocid="2-array-vector-支持的函数和操作">2. Array Vector 支持的函数和操作</a><ul><li class="topic-item"><a href="#21-array-vector-%E7%9A%84%E5%88%9B%E5%BB%BA" data-tocid="21-array-vector-的创建">2.1. Array Vector 的创建</a><ul><li class="topic-item"><a href="#211-%E5%88%9B%E5%BB%BA-array-vector-%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8F%98%E9%87%8F" data-tocid="211-创建-array-vector-类型的变量">2.1.1. 创建 Array Vector 类型的变量</a></li><li class="topic-item"><a href="#212-%E5%88%9B%E5%BB%BA%E5%90%AB%E6%9C%89-array-vector-%E7%B1%BB%E5%9E%8B%E5%88%97%E7%9A%84%E8%A1%A8" data-tocid="212-创建含有-array-vector-类型列的表">2.1.2. 创建含有 Array Vector 类型列的表</a></li></ul></li><li class="topic-item"><a href="#22-array-vector-%E7%9A%84%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C" data-tocid="22-array-vector-的基础操作">2.2. Array Vector 的基础操作</a><ul><li class="topic-item"><a href="#221-%E8%AE%BF%E9%97%AE-array-vector-%E4%B8%AD%E7%9A%84%E5%85%83%E7%B4%A0" data-tocid="221-访问-array-vector-中的元素">2.2.1. 访问 Array Vector 中的元素</a><ul><li class="topic-item"><a href="#2211-%E8%AE%BF%E9%97%AE-array-vector-%E5%8F%98%E9%87%8F%E4%B8%AD%E7%9A%84%E8%A1%8C" data-tocid="2211-访问-array-vector-变量中的行">2.2.1.1. 访问 Array Vector 变量中的行</a></li><li class="topic-item"><a href="#2212-%E8%AE%BF%E9%97%AE-array-vector-%E5%8F%98%E9%87%8F%E4%B8%AD%E7%9A%84%E5%88%97" data-tocid="2212-访问-array-vector-变量中的列">2.2.1.2. 访问 Array Vector 变量中的列</a></li><li class="topic-item"><a href="#2213-%E8%AE%BF%E9%97%AE-array-vector-%E5%8F%98%E9%87%8F%E4%B8%AD-r-%E8%A1%8C-c-%E5%88%97%E7%9A%84%E5%85%83%E7%B4%A0" data-tocid="2213-访问-array-vector-变量中-r-行-c-列的元素">2.2.1.3. 访问 Array Vector 变量中 r 行 c 列的元素</a></li><li class="topic-item"><a href="#2214-%E8%AE%BF%E9%97%AE%E8%A1%A8%E4%B8%AD-array-vector-%E5%88%97%E7%9A%84%E5%85%83%E7%B4%A0" data-tocid="2214-访问表中-array-vector-列的元素">2.2.1.4. 访问表中 Array Vector 列的元素</a></li></ul></li><li class="topic-item"><a href="#222-array-vector-%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE" data-tocid="222-array-vector-插入数据">2.2.2. Array Vector 插入数据</a></li><li class="topic-item"><a href="#223-%E8%BD%AC%E5%8C%96-array-vector-%E4%B8%BA%E5%90%91%E9%87%8F%E7%9F%A9%E9%98%B5" data-tocid="223-转化-array-vector-为向量矩阵">2.2.3. 转化 Array Vector 为向量、矩阵</a></li><li class="topic-item"><a href="#224-%E5%AF%B9-fast-array-vector-%E7%9A%84%E6%AF%8F%E4%B8%AA%E5%85%83%E7%B4%A0%E8%BF%87%E6%BB%A4" data-tocid="224-对-fast-array-vector-的每个元素过滤">2.2.4. 对 Fast Array Vector 的每个元素过滤</a></li></ul></li><li class="topic-item"><a href="#23-array-vector-%E7%9A%84%E8%AE%A1%E7%AE%97" data-tocid="23-array-vector-的计算">2.3. Array Vector 的计算</a><ul><li class="topic-item"><a href="#231-%E5%92%8C%E6%A0%87%E9%87%8F%E8%AE%A1%E7%AE%97" data-tocid="231-和标量计算">2.3.1. 和标量计算</a></li><li class="topic-item"><a href="#232-%E5%92%8C%E5%90%91%E9%87%8F%E8%AE%A1%E7%AE%97" data-tocid="232-和向量计算">2.3.2. 和向量计算</a></li><li class="topic-item"><a href="#233-%E5%92%8C-array-vector-%E8%AE%A1%E7%AE%97" data-tocid="233-和-array-vector-计算">2.3.3. 和 Array Vector 计算</a></li><li class="topic-item"><a href="#234-%E6%8C%89%E8%A1%8C%E8%AE%A1%E7%AE%97" data-tocid="234-按行计算">2.3.4. 按行计算</a></li></ul></li><li class="topic-item"><a href="#24-api-%E5%86%99%E5%85%A5" data-tocid="24-api-写入">2.4. API 写入</a><ul><li class="topic-item"><a href="#241-c-api" data-tocid="241-c-api">2.4.1. C++ API</a></li><li class="topic-item"><a href="#242-java-api" data-tocid="242-java-api">2.4.2. Java API</a></li><li class="topic-item"><a href="#243-python-api" data-tocid="243-python-api">2.4.3. Python API</a></li></ul></li></ul></li><li class="topic-item"><a href="#3-array-vector-%E5%9C%A8-level2-%E5%BF%AB%E7%85%A7%E6%95%B0%E6%8D%AE%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8" data-tocid="3-array-vector-在-level2-快照数据中的应用">3. Array Vector 在 level2 快照数据中的应用</a><ul><li class="topic-item"><a href="#31-%E5%BF%AB%E7%85%A7%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AD%98%E5%82%A8" data-tocid="31-快照数据的存储">3.1. 快照数据的存储</a></li><li class="topic-item"><a href="#32-%E5%BF%AB%E7%85%A7%E6%95%B0%E6%8D%AE%E5%88%86%E7%BB%84%E6%97%B6%E4%BF%9D%E7%95%99%E6%98%8E%E7%BB%86" data-tocid="32-快照数据分组时保留明细">3.2. 快照数据分组时保留明细</a></li><li class="topic-item"><a href="#33-%E5%9F%BA%E4%BA%8E%E5%BF%AB%E7%85%A7%E6%95%B0%E6%8D%AE%E7%9A%84%E9%AB%98%E9%A2%91%E5%9B%A0%E5%AD%90%E8%AE%A1%E7%AE%97" data-tocid="33-基于快照数据的高频因子计算">3.3. 基于快照数据的高频因子计算</a><ul><li class="topic-item"><a href="#331-%E5%87%80%E5%A7%94%E4%B9%B0%E5%A2%9E%E9%A2%9D" data-tocid="331-净委买增额">3.3.1. 净委买增额</a></li><li class="topic-item"><a href="#332-%E5%8D%81%E6%A1%A3%E5%87%80%E5%A7%94%E4%B9%B0%E5%A2%9E%E9%A2%9D" data-tocid="332-十档净委买增额">3.3.2. 十档净委买增额</a></li></ul></li></ul></li><li class="topic-item"><a href="#4-%E6%80%BB%E7%BB%93" data-tocid="4-总结">4. 总结</a></li><li class="topic-item"><a href="#5-%E9%99%84%E4%BB%B6" data-tocid="5-附件">5. 附件</a></li></ul></div>
	                        	
                        	</div>
                        </nav>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
<title>Copyright</title><p><b> ©2025 浙江智臾科技有限公司 浙ICP备18048711号-3</b></p>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
    </body>
</html>