<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" data-whc_version="26.0">
    <head><link rel="shortcut icon" href="../favicon.ico"/><link rel="icon" href="../favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="物联网设备（如机床、锅炉、电梯、水表、气表等等）无时无刻不在产生海量的设备状态数据和业务消息数据，这些数据的在采集、计算、分析过程中又常常涉及异常数据的检测。 针对异常数据检测的需求，DolphinDB提供基于流数据框架的异常检测引擎函数，用户只需指定异常指标，异常检测引擎就可以实时地进行异常数据检测。 DolphinDB的异常检测引擎建立在流数据的发布-订阅模型之上。下例中，通过 ..."/><meta name="DC.rights.owner" content="(C) 版权 2025"/><meta name="copyright" content="(C) 版权 2025"/><meta name="generator" content="DITA-OT"/><meta name="DC.type" content="topic"/><meta name="DC.format" content="HTML5"/><meta name="DC.identifier" content="异常检测引擎"/><title>异常检测引擎</title><!--  Generated with Oxygen version 26.0, build number 2024012323.  --><meta name="wh-path2root" content="../"/><meta name="wh-toc-id" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;?workdir /tmp/temp20250305183303418/tutorials?&gt;&lt;?workdir-uri file:/tmp/temp20250305183303418/tutorials/?&gt;&lt;?path2project ../?&gt;&lt;?path2project-uri ../?&gt;&lt;?path2rootmap-uri ../?&gt;&lt;topic xmlns:dita-ot=&#34;http://dita-ot.sourceforge.net/ns/201007/dita-ot&#34; xmlns:ditaarch=&#34;http://dita.oasis-open.org/architecture/2005/&#34; class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;异常检测引擎&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;topic:1;1:1&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;title:1;1:1&#34;&gt;异常检测引擎&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;body:1;1:1&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:1;3:1&#34;&gt;物联网设备（如机床、锅炉、电梯、水表、气表等等）无时无刻不在产生海量的设备状态数据和业务消息数据，这些数据的在采集、计算、分析过程中又常常涉及异常数据的检测。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:2;5:1&#34;&gt;针对异常数据检测的需求，DolphinDB提供基于流数据框架的异常检测引擎函数，用户只需指定异常指标，异常检测引擎就可以实时地进行异常数据检测。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;1-异常检测引擎框架&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;topic:2;7:1&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;title:2;7:1&#34;&gt;1. 异常检测引擎框架&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;body:2;7:1&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:3;9:1&#34;&gt;DolphinDB的异常检测引擎建立在流数据的发布-订阅模型之上。下例中，通过&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeph:1;9:40&#34;&gt;createAnomalyDetectionEngine&lt;/codeph&gt;创建异常检测引擎，并通过&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeph:2;9:82&#34;&gt;subscribeTable&lt;/codeph&gt;函数订阅流数据，每次有新数据流入就会按指定规则触发&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeph:3;9:123&#34;&gt;append!{engine}&lt;/codeph&gt;，将流数据持续输入聚合引擎（指定的数据表中）。异常检测引擎实时检测数据是否符合用户自定义的警报指标temp&amp;gt;65，如发现异常数据，将它们输出到表outputTable中。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeblock:1;11:1&#34;&gt;share streamTable(1000:0, `time`device`temp, [TIMESTAMP, SYMBOL, DOUBLE]) as sensor share streamTable(1000:0, `time`device`anomalyType`anomalyString, [TIMESTAMP, SYMBOL, INT, SYMBOL]) as outputTable engine = createAnomalyDetectionEngine(&#34;engine1&#34;, &amp;lt;[temp &amp;gt; 65]&amp;gt;, sensor, outputTable, `time, `device, 10, 1) subscribeTable(, &#34;sensor&#34;, &#34;sensorAnomalyDetection&#34;, 0, append!{engine}, true)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:4;18:1&#34;&gt;这里对异常处理引擎涉及到的一些概念做简要介绍：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;ul:1;20:1&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;li:1;20:1&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:5;20:3&#34;&gt;流数据表：DolphinDB 为流式数据提供的一种特定的表对象，提供流式数据的发布功能。通过&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeph:4;20:49&#34;&gt;subscribeTable&lt;/codeph&gt;函数，其他的节点或应用可以订阅和消费流数据。&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;li:2;22:1&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:6;22:3&#34;&gt;异常处理引擎数据源：为异常处理引擎提供&#34;原料&#34;的通道。&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeph:5;22:30&#34;&gt;createAnomalyDetectionEngine&lt;/codeph&gt;函数返回一个抽象表，向这个抽象表写入数据，就意味着数据进入异常处理引擎进行计算。&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;li:3;24:1&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:7;24:3&#34;&gt;异常指标：以元代码的格式提供一组处理流数据的布尔表达式。其中可以包含聚合函数，以支持复杂的场景。&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;li:4;26:1&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:8;26:3&#34;&gt;数据窗口：每次计算时截取的流数据窗口长度。数据窗口仅在指标中包含聚合函数时有意义。&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;li:5;28:1&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:9;28:3&#34;&gt;输出表：异常检测引擎的输出表第一列必须是时间类型，用于存放检测到异常的时间戳，如果有指定分组列，那么第二列为分组列，之后的两列分别为int类型和string或symbol类型，用于记录异常的类型（异常指标的表达式在metrics中的下标）和异常的内容。&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;2-异常指标&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;topic:3;30:1&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;title:3;30:1&#34;&gt;2. 异常指标&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;body:3;30:1&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:10;32:1&#34;&gt;异常检测引擎中的指标均要求返回布尔值。一般是一个函数或一个表达式。当指标中包含聚合函数，必须指定窗口长度和计算的时间间隔，每隔一段时间，在固定长度的移动窗口中计算指标。异常指标一般有以下三种类型：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;ul:2;34:1&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;li:6;34:1&#34;&gt;只包含列名或非聚合函数，例如&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeph:6;34:17&#34;&gt;qty&amp;gt;10&lt;/codeph&gt;, &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeph:7;34:27&#34;&gt;lt(qty, prev(qty))&lt;/codeph&gt;。对于这类指标，异常检测引擎会对每一条收到的数据进行计算，判断是否符合指标并决定是否输出。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;li:7;35:1&#34;&gt;所有出现的列名都在聚合函数的参数中，例如&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeph:8;35:23&#34;&gt;avg(qty-price)&amp;gt;10&lt;/codeph&gt;, &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeph:9;35:44&#34;&gt;percentile(qty, 90)&amp;lt;100&lt;/codeph&gt;, &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeph:10;35:71&#34;&gt;sum(qty)&amp;gt;prev(sum(qty))&lt;/codeph&gt;。对于这类指标，异常检测引擎只会在窗口发生移动时对数据进行聚合计算，和时间序列聚合引擎（Time Series Aggregator）类似。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;li:8;36:1&#34;&gt;出现的列名中，既有作为聚合函数的参数的，又有不是聚合函数参数的，例如&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeph:11;36:37&#34;&gt;avg(qty) &amp;gt; qty&lt;/codeph&gt;, &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeph:12;36:55&#34;&gt;le(med(qty), price)&lt;/codeph&gt;。对于这类指标，异常检测引擎会在在窗口发生移动时进行聚合计算。每一条数据到达时，使用最近一个窗口的聚合函数的返回值与非聚合函数参数的列进行计算。&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;3-数据窗口&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;topic:4;38:1&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;title:4;38:1&#34;&gt;3. 数据窗口&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;body:4;38:1&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:11;40:1&#34;&gt;当异常指标中包含聚合函数时，用户必须指定数据窗口。流数据聚合计算是每隔一段时间，在固定长度的移动窗口中进行。窗口长度由参数 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;i:1;40:63&#34;&gt;windowSize&lt;/i&gt; 设定；计算的时间间隔由参数 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;i:2;40:90&#34;&gt;step&lt;/i&gt; 设定。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:12;42:1&#34;&gt;在有多组数据的情况下，若每组都根据各自第一条数据进入系统的时间来构造数据窗口的边界，则一般无法将各组的计算结果在相同数据窗口中进行对比。考虑到这一点，系统按照参数 step 值确定一个整型的规整尺度 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;i:3;42:101&#34;&gt;alignmentSize&lt;/i&gt; ，以对各组第一个数据窗口的边界值进行规整处理。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:13;44:1&#34;&gt;（1）当数据时间类型为MONTH时，会以第一条数据对应年份的1月作为窗口的上边界。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:14;46:1&#34;&gt;（2）当数据的时间类型为DATE时，不对第一个数据窗口的边界值进行规整。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:15;48:1&#34;&gt;（3）当数据时间精度为秒或分钟时，如MINUTE, DATETIME或SECOND类型，alignmentSize取值规则如下表：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;table:1;50:1&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;tgroup:1;50:1&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:1;50:1&#34; colnum=&#34;1&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:2;50:1&#34; colnum=&#34;2&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;thead:1;50:1&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:1;50:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:1;50:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34;&gt;step&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:2;50:8&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34;&gt;alignmentSize&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;tbody:1;52:1&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:2;52:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:3;52:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34;&gt;0~2&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:4;52:8&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34;&gt;2&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:3;53:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:5;53:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34;&gt;3~5&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:6;53:8&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34;&gt;5&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:4;54:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:7;54:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34;&gt;6~10&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:8;54:8&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34;&gt;10&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:5;55:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:9;55:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34;&gt;11~15&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:10;55:9&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34;&gt;15&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:6;56:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:11;56:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34;&gt;16~20&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:12;56:9&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34;&gt;20&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:7;57:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:13;57:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34;&gt;21~30&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:14;57:9&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34;&gt;30&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:8;58:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:15;58:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34;&gt;31~60&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:16;58:9&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34;&gt;60&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:16;60:1&#34;&gt;如果 roundTime = false, 对于step &amp;gt; 60, alignmentSize 都为60。 如果 roundTime = true，则alignmentSize取值规则如下表：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;table:2;62:1&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;tgroup:2;62:1&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:3;62:1&#34; colnum=&#34;1&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:4;62:1&#34; colnum=&#34;2&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;thead:2;62:1&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:9;62:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:17;62:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34;&gt;step&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:18;62:14&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34;&gt;alignmentSize&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;tbody:2;64:1&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:10;64:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:19;64:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34;&gt;61\～120&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:20;64:14&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34;&gt;120（2分钟）&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:11;65:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:21;65:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34;&gt;121~180&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:22;65:15&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34;&gt;180（3分钟）&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:12;66:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:23;66:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34;&gt;181~300&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:24;66:15&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34;&gt;300（5分钟）&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:13;67:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:25;67:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34;&gt;301~600&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:26;67:15&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34;&gt;600（10分钟）&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:14;68:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:27;68:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34;&gt;601~900&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:28;68:15&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34;&gt;900（15分钟）&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:15;69:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:29;69:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34;&gt;901~1200&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:30;69:15&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34;&gt;1200（20分钟）&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:16;70:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:31;70:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34;&gt;1201~1800&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:32;70:15&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34;&gt;1800（30分钟）&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:17;71:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:33;71:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;9&#34;&gt;&amp;gt;1800&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:34;71:14&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34;&gt;3600（1小时）&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:17;73:1&#34;&gt;（4）当数据时间精度为毫秒时，如TIMESTAMP或TIME类型，alignmentSize取值规则如下表：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;table:3;75:1&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;tgroup:3;75:1&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:5;75:1&#34; colnum=&#34;1&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:6;75:1&#34; colnum=&#34;2&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;thead:3;75:1&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:18;75:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:35;75:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34;&gt;step&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:36;75:16&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34;&gt;alignmentSize&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;tbody:3;77:1&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:19;77:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:37;77:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34;&gt;0~2&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:38;77:17&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34;&gt;2&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:20;78:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:39;78:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34;&gt;3~5&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:40;78:17&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34;&gt;5&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:21;79:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:41;79:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34;&gt;6~10&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:42;79:17&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34;&gt;10&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:22;80:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:43;80:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34;&gt;11~20&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:44;80:17&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34;&gt;20&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:23;81:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:45;81:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34;&gt;21~25&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:46;81:17&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34;&gt;25&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:24;82:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:47;82:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34;&gt;26~50&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:48;82:17&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34;&gt;50&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:25;83:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:49;83:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34;&gt;51~100&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:50;83:17&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34;&gt;100&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:26;84:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:51;84:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;9&#34;&gt;101~200&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:52;84:17&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34;&gt;200&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:27;85:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:53;85:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;10&#34;&gt;201~250&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:54;85:17&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;10&#34;&gt;250&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:28;86:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:55;86:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;11&#34;&gt;251~500&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:56;86:17&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;11&#34;&gt;500&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:29;87:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:57;87:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;12&#34;&gt;501~1000&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:58;87:17&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;12&#34;&gt;1000（1秒）&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:30;88:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:59;88:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;13&#34;&gt;1001~2000&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:60;88:17&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;13&#34;&gt;2000（2秒）&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:31;89:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:61;89:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;14&#34;&gt;2001~3000&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:62;89:17&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;14&#34;&gt;3000（3秒）&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:32;90:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:63;90:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;15&#34;&gt;3001~5000&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:64;90:17&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;15&#34;&gt;5000（5秒）&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:33;91:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:65;91:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;16&#34;&gt;5001~10000&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:66;91:17&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;16&#34;&gt;10000（10秒）&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:34;92:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:67;92:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;17&#34;&gt;10001~15000&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:68;92:17&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;17&#34;&gt;15000（15秒）&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:35;93:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:69;93:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;18&#34;&gt;15001~20000&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:70;93:17&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;18&#34;&gt;20000（20秒）&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:36;94:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:71;94:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;19&#34;&gt;20001~30000&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:72;94:17&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;19&#34;&gt;30000（30秒）&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:37;95:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:73;95:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;20&#34;&gt;30001~60000&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:74;95:17&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;20&#34;&gt;60000（1分钟）&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:18;97:1&#34;&gt;如果 roundTime = false, 对于step &amp;gt; 60000, alignmentSize 都为60000。 如果 roundTime = true，则alignmentSize取值规则如下表：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;table:4;99:1&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;tgroup:4;99:1&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:7;99:1&#34; colnum=&#34;1&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:8;99:1&#34; colnum=&#34;2&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;thead:4;99:1&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:38;99:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:75;99:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34;&gt;step&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:76;99:20&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34;&gt;alignmentSize&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;tbody:4;101:1&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:39;101:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:77;101:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34;&gt;60001~120000&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:78;101:21&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34;&gt;120000（2分钟）&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:40;102:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:79;102:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34;&gt;120001~180000&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:80;102:21&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34;&gt;180000（3分钟）&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:41;103:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:81;103:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34;&gt;120001~300000&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:82;103:21&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34;&gt;300000（5分钟）&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:42;104:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:83;104:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34;&gt;300001~600000&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:84;104:21&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34;&gt;600000（10分钟）&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:43;105:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:85;105:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34;&gt;600001~900000&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:86;105:21&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34;&gt;900000（15分钟）&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:44;106:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:87;106:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34;&gt;900001~1200000&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:88;106:21&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34;&gt;1200000（20分钟）&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:45;107:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:89;107:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34;&gt;1200001~1800000&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:90;107:21&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34;&gt;1800000（30分钟）&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:46;108:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:91;108:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;9&#34;&gt;&amp;gt;= 1800001&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:92;108:20&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34;&gt;3600000（1小时）&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:19;110:1&#34;&gt;假设第一条数据时间的最小精度值为x，那么第一个数据窗口的左边界最小精度经过规整后为&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeph:13;110:42&#34;&gt;x/alignmentSize\*alignmentSize&lt;/codeph&gt;，其中&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeph:14;110:77&#34;&gt;/&lt;/codeph&gt;代表相除后取整。举例来说，若第一条数据时间为 2018.10.08T01:01:01.365，则x=365。若step=100，根据上表，alignmentSize=100，可得出规整后的第一个数据窗口左边界最小精度为365\100*100=300，因此规整后的第一个数据窗口范围为2018.10.08T01:01:01.300至 2018.10.08T01:01:01.400。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;4-应用场景&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;topic:5;112:1&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;title:5;112:1&#34;&gt;4. 应用场景&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;body:5;112:1&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:20;114:1&#34;&gt;现模拟传感器设备采集温度。假设窗口长度为4ms，每隔2ms移动一次窗口，每隔1ms采集一次温度，规定以下异常指标：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;ol:1;116:1&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;li:9;116:1&#34;&gt;单次采集的温度超过65；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;li:10;117:1&#34;&gt;单次采集的温度超过上一个窗口中75%的值；&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:21;119:1&#34;&gt;采集的数据存放到流数据表中，异常检测引擎通过订阅流数据表来获取实时数据，并进行异常检测，符合异常指标的数据输出到另外一个表中。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:22;121:1&#34;&gt;实现步骤如下：&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:23;123:1&#34;&gt;(1) 定义流数据表sensor来存放采集的数据：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeblock:2;125:1&#34;&gt;share streamTable(1000:0, `time`temp, [TIMESTAMP, DOUBLE]) as sensor&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:24;129:1&#34;&gt;(2) 定义异常检测引擎和输出表outputTable，输出表也是流数据表：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeblock:3;131:1&#34;&gt;share streamTable(1000:0, `time`anomalyType`anomalyString, [TIMESTAMP, INT, SYMBOL]) as outputTable engine = createAnomalyDetectionEngine(&#34;engine1&#34;, &amp;lt;[temp &amp;gt; 65, temp &amp;gt; percentile(temp, 75)]&amp;gt;, sensor, outputTable, `time, , 6, 3)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:25;136:1&#34;&gt;(3) 异常检测引擎engine订阅流数据表sensor：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeblock:4;138:1&#34;&gt;subscribeTable(, &#34;sensor&#34;, &#34;sensorAnomalyDetection&#34;, 0, append!{engine}, true)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:26;142:1&#34;&gt;(4) 向流数据表sensor中写入10次数据模拟采集温度：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeblock:5;144:1&#34;&gt;timev = 2018.10.08T01:01:01.001 + 1..10 tempv = 59 66 57 60 63 51 53 52 56 55 insert into sensor values(timev, tempv)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:27;150:1&#34;&gt;查看流数据表 sensor 的内容：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;table:5;152:1&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;tgroup:5;152:1&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:9;152:1&#34; colnum=&#34;1&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:10;152:1&#34; colnum=&#34;2&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;thead:5;152:1&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:47;152:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:93;152:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34;&gt;time&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:94;152:26&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34;&gt;temp&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;tbody:5;154:1&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:48;154:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:95;154:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34;&gt;2018.10.08T01:01:01.002&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:96;154:25&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34;&gt;59&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:49;155:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:97;155:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34;&gt;2018.10.08T01:01:01.003&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:98;155:25&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34;&gt;66&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:50;156:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:99;156:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34;&gt;2018.10.08T01:01:01.004&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:100;156:25&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34;&gt;57&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:51;157:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:101;157:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34;&gt;2018.10.08T01:01:01.005&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:102;157:25&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34;&gt;60&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:52;158:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:103;158:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34;&gt;2018.10.08T01:01:01.006&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:104;158:25&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34;&gt;63&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:53;159:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:105;159:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34;&gt;2018.10.08T01:01:01.007&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:106;159:25&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34;&gt;51&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:54;160:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:107;160:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34;&gt;2018.10.08T01:01:01.008&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:108;160:25&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34;&gt;53&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:55;161:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:109;161:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;9&#34;&gt;2018.10.08T01:01:01.009&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:110;161:25&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34;&gt;52&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:56;162:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:111;162:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;10&#34;&gt;2018.10.08T01:01:01.010&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:112;162:25&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;10&#34;&gt;56&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:57;163:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:113;163:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;11&#34;&gt;2018.10.08T01:01:01.011&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:114;163:25&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;11&#34;&gt;55&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:28;166:1&#34;&gt;再查看结果表 outputTable ：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;table:6;168:1&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;tgroup:6;168:1&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:11;168:1&#34; colnum=&#34;1&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:12;168:1&#34; colnum=&#34;2&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:13;168:1&#34; colnum=&#34;3&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;thead:6;168:1&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:58;168:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:115;168:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34;&gt;time&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:116;168:25&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34;&gt;anomalyType&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:117;168:37&#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34;&gt;anomalyString&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;tbody:6;170:1&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:59;170:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:118;170:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34;&gt;2018.10.08T01:01:01.003&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:119;170:25&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34;&gt;0&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:120;170:37&#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34;&gt;temp &amp;gt; 65&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:60;171:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:121;171:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34;&gt;2018.10.08T01:01:01.003&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:122;171:25&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34;&gt;1&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:123;171:37&#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34;&gt;temp &amp;gt; percentile(temp, 75)&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:61;172:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:124;172:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34;&gt;2018.10.08T01:01:01.005&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:125;172:25&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34;&gt;1&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:126;172:37&#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34;&gt;temp &amp;gt; percentile(temp, 75)&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:62;173:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:127;173:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34;&gt;2018.10.08T01:01:01.006&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:128;173:25&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34;&gt;1&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:129;173:37&#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34;&gt;temp &amp;gt; percentile(temp, 75)&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:29;175:1&#34;&gt;下面详细解释异常检测引擎的计算过程。为方便阅读，对时间的描述中省略相同的2018.10.08T01:01:01部分，只列出毫秒部分。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:30;177:1&#34;&gt;（1）指标&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeph:15;177:6&#34;&gt;temp &amp;gt; 65&lt;/codeph&gt;只包含不作为函数参数的列temp，因此会在每条数据到达时计算。模拟数据中只有003时的温度满足检测异常的指标。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:31;179:1&#34;&gt;（2）指标&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeph:16;179:6&#34;&gt;temp &amp;gt; percentile(temp, 75)&lt;/codeph&gt;中，temp列既作为聚合函数&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeph:17;179:49&#34;&gt;percentile&lt;/codeph&gt;的参数，又单独出现，因此会在每条数据到达时，将其中的&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeph:18;179:87&#34;&gt;temp&lt;/codeph&gt;与上一个窗口计算得到的&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeph:19;179:104&#34;&gt;percentile(temp, 75)&lt;/codeph&gt;比较。第一个窗口基于第一行数据的时间002进行对齐，对齐后窗口起始边界为000，第一个窗口是从000到002，只包含002一条记录，计算&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeph:20;179:194&#34;&gt;percentile(temp, 75)&lt;/codeph&gt;的结果是59，数据003到005与这个值比较，满足条件的有003和005。第二个窗口是从002到005，计算&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeph:21;179:270&#34;&gt;percentile(temp, 75)&lt;/codeph&gt;的结果是60，数据006到008与这个值比较，满足条件的有006。第三个窗口是从003到008，计算&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeph:22;179:342&#34;&gt;percentile(temp, 75)&lt;/codeph&gt;的结果是63，数据009到011与这个值比较，其中没有满足条件的行。最后一条数据011到达后，尚未触发新的窗口计算。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:32;181:1&#34;&gt;监控异常检测引擎的状态&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeblock:6;183:1&#34;&gt;getAggregatorStat().AnomalyDetectionEngine&lt;/codeblock&gt;&lt;table class=&#34;- topic/table &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;table:7;186:1&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;tgroup:7;186:1&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:14;186:1&#34; colnum=&#34;1&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:15;186:1&#34; colnum=&#34;2&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:16;186:1&#34; colnum=&#34;3&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:17;186:1&#34; colnum=&#34;4&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:18;186:1&#34; colnum=&#34;5&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:19;186:1&#34; colnum=&#34;6&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:20;186:1&#34; colnum=&#34;7&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:21;186:1&#34; colnum=&#34;8&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:22;186:1&#34; colnum=&#34;9&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col10&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:23;186:1&#34; colnum=&#34;10&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:24;186:1&#34; colnum=&#34;11&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:25;186:1&#34; colnum=&#34;12&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:26;186:1&#34; colnum=&#34;13&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col14&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:27;186:1&#34; colnum=&#34;14&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;colspec:28;186:1&#34; colnum=&#34;15&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;thead:7;186:1&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:63;186:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:130;186:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34;&gt;name&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:131;186:12&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34;&gt;user&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:132;186:20&#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34;&gt;status&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:133;186:29&#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;1&#34;&gt;lastErrMsg&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:134;186:42&#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;1&#34;&gt;numGroups&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:135;186:54&#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;1&#34;&gt;numRows&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:136;186:64&#34; colname=&#34;col7&#34; dita-ot:x=&#34;7&#34; dita-ot:y=&#34;1&#34;&gt;numMetrics&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:137;186:105&#34; colname=&#34;col8&#34; dita-ot:x=&#34;8&#34; dita-ot:y=&#34;1&#34;&gt;metrics&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:138;186:115&#34; colname=&#34;col9&#34; dita-ot:x=&#34;9&#34; dita-ot:y=&#34;1&#34;&gt;snapshotDir&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:139;186:129&#34; colname=&#34;col10&#34; dita-ot:x=&#34;10&#34; dita-ot:y=&#34;1&#34;&gt;snapshotInterval&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:140;186:148&#34; colname=&#34;col11&#34; dita-ot:x=&#34;11&#34; dita-ot:y=&#34;1&#34;&gt;snapshotMsgId&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:141;186:164&#34; colname=&#34;col12&#34; dita-ot:x=&#34;12&#34; dita-ot:y=&#34;1&#34;&gt;snapshotTimestamp&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:142;186:184&#34; colname=&#34;col13&#34; dita-ot:x=&#34;13&#34; dita-ot:y=&#34;1&#34;&gt;garbageSize&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:143;186:198&#34; colname=&#34;col14&#34; dita-ot:x=&#34;14&#34; dita-ot:y=&#34;1&#34;&gt;memoryUsed&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:144;186:211&#34; colname=&#34;col15&#34; dita-ot:x=&#34;15&#34; dita-ot:y=&#34;1&#34;&gt; &lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;tbody:7;188:1&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;row:64;188:1&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:145;188:1&#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34;&gt;engine1&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:146;188:12&#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34;&gt;admin&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:147;188:20&#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34;&gt;OK&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:148;188:29&#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;2&#34;&gt; &lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:149;188:35&#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;2&#34;&gt;1&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:150;188:46&#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;2&#34;&gt;10&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:151;188:56&#34; colname=&#34;col7&#34; dita-ot:x=&#34;7&#34; dita-ot:y=&#34;2&#34;&gt;2&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:152;188:64&#34; colname=&#34;col8&#34; dita-ot:x=&#34;8&#34; dita-ot:y=&#34;2&#34;&gt;temp &amp;gt; 65, temp &amp;gt; percentile(temp, 75)&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:153;188:105&#34; colname=&#34;col9&#34; dita-ot:x=&#34;9&#34; dita-ot:y=&#34;2&#34;&gt; &lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:154;188:111&#34; colname=&#34;col10&#34; dita-ot:x=&#34;10&#34; dita-ot:y=&#34;2&#34;&gt; &lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:155;188:119&#34; colname=&#34;col11&#34; dita-ot:x=&#34;11&#34; dita-ot:y=&#34;2&#34;&gt;-1&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:156;188:132&#34; colname=&#34;col12&#34; dita-ot:x=&#34;12&#34; dita-ot:y=&#34;2&#34;&gt; &lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:157;188:138&#34; colname=&#34;col13&#34; dita-ot:x=&#34;13&#34; dita-ot:y=&#34;2&#34;&gt;2,000&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;entry:158;188:150&#34; colname=&#34;col14&#34; dita-ot:x=&#34;14&#34; dita-ot:y=&#34;2&#34;&gt;8,524&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;5-快照机制&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;topic:6;190:1&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;title:6;190:1&#34;&gt;5. 快照机制&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;body:6;190:1&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:33;192:1&#34;&gt;快照机制可以用于系统出现异常之后，对引擎进行恢复。通过以下这个例子，可以理解snapshotDir和snapshotIntervalInMsgCount的作用。如果启用snapshot，引擎订阅流数据表时，handler需是appendMsg函数，需指定handlerNeedMsgId=true，用来记录快照的消息位置。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;codeblock:7;194:1&#34;&gt;WORK_DIR=&#34;/home/root/WORK_DIR&#34; mkdir(WORK_DIR+&#34;/snapshotDir&#34;) enableTableShareAndPersistence(table = streamTable(10000:0,`time`sym`price`qty, [TIMESTAMP,SYMBOL,DOUBLE,INT]) , tableName=&#34;trades&#34;, cacheSize=1000000) enableTableShareAndPersistence(table = streamTable(10000:0, `time`sym`type`metric, [TIMESTAMP,STRING,INT,STRING]), tableName = &#34;output&#34;, cacheSize=1000000) go adengine = createAnomalyDetectionEngine(name=&#34;test&#34;, metrics=&amp;lt;[avg(qty)&amp;gt;1]&amp;gt;, dummyTable=trades, outputTable=output, timeColumn=`time, keyColumn=`sym, windowSize=10, step=10, snapshotDir=WORK_DIR+&#34;/snapshotDir&#34;, snapshotIntervalInMsgCount=100) subscribeTable(server=&#34;&#34;, tableName=&#34;trades&#34;, actionName=&#34;adengine&#34;,offset= 0, handler=appendMsg{adengine}, msgAsTable=true, handlerNeedMsgId=true) def writeData(mutable t){ do{ batch = 10 tmp = table(batch:batch, `time`sym`price`qty, [TIMESTAMP, SYMBOL, DOUBLE, DOUBLE]) tmp[`time] = take(now(), batch) tmp[`sym] = &#34;A&#34;+string(1..batch) tmp[`price] = round(rand(100.0, batch), 2) tmp[`qty] = rand(10, batch) t.append!(tmp) sleep(1000) }while(true) } job1=submitJob(&#34;write&#34;, &#34;&#34;, writeData, trades) //执行一段时间后重启server enableTableShareAndPersistence(table = streamTable(10000:0,`time`sym`price`qty, [TIMESTAMP,SYMBOL,DOUBLE,INT]) , tableName=&#34;trades&#34;, cacheSize=1000000) enableTableShareAndPersistence(table = streamTable(10000:0, `time`sym`type`metric, [TIMESTAMP,STRING,INT,STRING]), tableName = &#34;output&#34;, cacheSize=1000000) select last(time) from output &amp;gt;2021.03.16T11:59:10.920 select last(time) from trades &amp;gt;2021.03.16T11:59:13.916 WORK_DIR=&#34;/home/root/WORK_DIR&#34; adengine = createAnomalyDetectionEngine(name=&#34;test&#34;, metrics=&amp;lt;[avg(qty)&amp;gt;qty]&amp;gt;, dummyTable=trades, outputTable=output, timeColumn=`time, keyColumn=`sym, windowSize=10, step=10, snapshotDir=WORK_DIR+&#34;/snapshotDir&#34;, snapshotIntervalInMsgCount=100) ofst = getSnapshotMsgId(adengine) print(ofst) &amp;gt;299 select count(*) from trades &amp;gt;390 //从第300条数据开始订阅 subscribeTable(server=&#34;&#34;, tableName=&#34;trades&#34;, actionName=&#34;adengine&#34;,offset=ofst+1, handler=appendMsg{adengine}, msgAsTable=true, handlerNeedMsgId=true) &lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; id=&#34;6-总结&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;topic:7;243:1&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;title:7;243:1&#34;&gt;6. 总结&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;body:7;243:1&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Anomaly_Detection_Engine.md&#34; xtrc=&#34;p:34;245:1&#34;&gt;DolphinDB database 提供的异常检测引擎是一个轻量、使用方便的流数据引擎，它通过与流数据表合作来完成流数据的实时检测任务，能够满足物联网实时监控和预警的需求。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;"/><meta name="wh-source-relpath" content="tutorials/Anomaly_Detection_Engine.md"/><meta name="wh-out-relpath" content="tutorials/Anomaly_Detection_Engine.html"/>

    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/commons.css?buildId=2024012323"/>
    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic.css?buildId=2024012323"/>

    <script src="../oxygen-webhelp/app/options/properties.js?buildId=20250305183303"></script>
    <script src="../oxygen-webhelp/app/localization/strings.js?buildId=2024012323"></script>
    <script src="../oxygen-webhelp/app/search/index/keywords.js?buildId=20250305183303"></script>
    <script defer="defer" src="../oxygen-webhelp/app/commons.js?buildId=2024012323"></script>
    <script defer="defer" src="../oxygen-webhelp/app/topic.js?buildId=2024012323"></script>
<link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/styles.css?buildId=2024012323"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script></head>

    <body id="异常检测引擎" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            跳转到主要内容
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div xmlns:whc="http://www.oxygenxml.com/webhelp/components" class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="https://docs.dolphindb.cn/zh/index.html" class=" wh_logo d-none d-sm-block "><img src="../logo.png" alt="  DolphinDB 文档中心  "/></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="booktitle">  <span class="ph mainbooktitle">DolphinDB 文档中心</span>  </span></a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="搜索 " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="搜索查询" required="required"/><button type="submit" class="wh_search_button" aria-label="搜索"><span class="search_input_text">搜索</span></button></div></form>
            
            <script src="/vendors/react/umd/react.production.min.js" defer="defer"></script>
<script src="/vendors/react-dom/umd/react-dom.production.min.js" defer="defer"></script>
<script src="/vendors/dayjs/dayjs.min.js" defer="defer"></script>
<script src="/vendors/antd/dist/antd.min.js" defer="defer"></script>
<script src="/vendors/@ant-design/icons/dist/index.umd.min.js" defer="defer"></script>
<script src="/zh/index.js" type="module"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" defer="defer"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer="defer"><!--


--></script>
<script defer="defer"><!--

// 从主页重定向
const currentUrl = window.location.href;

// 判断当前URL是否包含index.html并且路径最后部分是index.html
if (currentUrl.endsWith('index.html')) {
    // 处理根目录下的index.html跳转
    const baseUrl = currentUrl.split('/index.html')[0]; // 获取index.html之前的部分
    const redirectUrl = `${baseUrl}/about/ddb_intro.html`; // 构建跳转路径
    window.location.href = redirectUrl; // 执行跳转
}

--></script>
            
        </div></div>
    </div>
</header>
        
        
         
        
        
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="切换搜索突出显示" title="切换搜索突出显示"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="折叠截面" title="折叠截面"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="打印此页" aria-label="打印此页"></button></div>
                        
                        
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                    
                    <div class="col-lg-10 col-md-10 col-sm-10 col-xs-12" id="wh_topic_body">
                        
                        <button id="wh_close_topic_toc_button" class="close-toc-button d-none" aria-label="Toggle topic table of content" aria-controls="wh_topic_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        <div class=" wh_topic_content body "><main role="main"><article class="- topic/topic topic" role="article" aria-labelledby="ariaid-title1"><h1 class="- topic/title title topictitle1" id="ariaid-title1">异常检测引擎</h1><div class="- topic/body body"><p class="- topic/p p">物联网设备（如机床、锅炉、电梯、水表、气表等等）无时无刻不在产生海量的设备状态数据和业务消息数据，这些数据的在采集、计算、分析过程中又常常涉及异常数据的检测。</p><p class="- topic/p p">针对异常数据检测的需求，DolphinDB提供基于流数据框架的异常检测引擎函数，用户只需指定异常指标，异常检测引擎就可以实时地进行异常数据检测。</p></div><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title2" id="1-异常检测引擎框架"><h2 class="- topic/title title topictitle2" id="ariaid-title2">1. 异常检测引擎框架</h2><div class="- topic/body body"><p class="- topic/p p">DolphinDB的异常检测引擎建立在流数据的发布-订阅模型之上。下例中，通过<code class="+ topic/ph pr-d/codeph ph codeph">createAnomalyDetectionEngine</code>创建异常检测引擎，并通过<code class="+ topic/ph pr-d/codeph ph codeph">subscribeTable</code>函数订阅流数据，每次有新数据流入就会按指定规则触发<code class="+ topic/ph pr-d/codeph ph codeph">append!{engine}</code>，将流数据持续输入聚合引擎（指定的数据表中）。异常检测引擎实时检测数据是否符合用户自定义的警报指标temp&gt;65，如发现异常数据，将它们输出到表outputTable中。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>share streamTable(1000:0, `time`device`temp, [TIMESTAMP, SYMBOL, DOUBLE]) as sensor
share streamTable(1000:0, `time`device`anomalyType`anomalyString, [TIMESTAMP, SYMBOL, INT, SYMBOL]) as outputTable
engine = createAnomalyDetectionEngine("engine1", &lt;[temp &gt; 65]&gt;, sensor, outputTable, `time, `device, 10, 1)
subscribeTable(, "sensor", "sensorAnomalyDetection", 0, append!{engine}, true)</code></pre><p class="- topic/p p">这里对异常处理引擎涉及到的一些概念做简要介绍：</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">流数据表：DolphinDB 为流式数据提供的一种特定的表对象，提供流式数据的发布功能。通过<code class="+ topic/ph pr-d/codeph ph codeph">subscribeTable</code>函数，其他的节点或应用可以订阅和消费流数据。</p></li><li class="- topic/li li"><p class="- topic/p p">异常处理引擎数据源：为异常处理引擎提供"原料"的通道。<code class="+ topic/ph pr-d/codeph ph codeph">createAnomalyDetectionEngine</code>函数返回一个抽象表，向这个抽象表写入数据，就意味着数据进入异常处理引擎进行计算。</p></li><li class="- topic/li li"><p class="- topic/p p">异常指标：以元代码的格式提供一组处理流数据的布尔表达式。其中可以包含聚合函数，以支持复杂的场景。</p></li><li class="- topic/li li"><p class="- topic/p p">数据窗口：每次计算时截取的流数据窗口长度。数据窗口仅在指标中包含聚合函数时有意义。</p></li><li class="- topic/li li"><p class="- topic/p p">输出表：异常检测引擎的输出表第一列必须是时间类型，用于存放检测到异常的时间戳，如果有指定分组列，那么第二列为分组列，之后的两列分别为int类型和string或symbol类型，用于记录异常的类型（异常指标的表达式在metrics中的下标）和异常的内容。</p></li></ul></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title3" id="2-异常指标"><h2 class="- topic/title title topictitle2" id="ariaid-title3">2. 异常指标</h2><div class="- topic/body body"><p class="- topic/p p">异常检测引擎中的指标均要求返回布尔值。一般是一个函数或一个表达式。当指标中包含聚合函数，必须指定窗口长度和计算的时间间隔，每隔一段时间，在固定长度的移动窗口中计算指标。异常指标一般有以下三种类型：</p><ul class="- topic/ul ul"><li class="- topic/li li">只包含列名或非聚合函数，例如<code class="+ topic/ph pr-d/codeph ph codeph">qty&gt;10</code>, <code class="+ topic/ph pr-d/codeph ph codeph">lt(qty, prev(qty))</code>。对于这类指标，异常检测引擎会对每一条收到的数据进行计算，判断是否符合指标并决定是否输出。</li><li class="- topic/li li">所有出现的列名都在聚合函数的参数中，例如<code class="+ topic/ph pr-d/codeph ph codeph">avg(qty-price)&gt;10</code>, <code class="+ topic/ph pr-d/codeph ph codeph">percentile(qty, 90)&lt;100</code>, <code class="+ topic/ph pr-d/codeph ph codeph">sum(qty)&gt;prev(sum(qty))</code>。对于这类指标，异常检测引擎只会在窗口发生移动时对数据进行聚合计算，和时间序列聚合引擎（Time Series Aggregator）类似。</li><li class="- topic/li li">出现的列名中，既有作为聚合函数的参数的，又有不是聚合函数参数的，例如<code class="+ topic/ph pr-d/codeph ph codeph">avg(qty) &gt; qty</code>, <code class="+ topic/ph pr-d/codeph ph codeph">le(med(qty), price)</code>。对于这类指标，异常检测引擎会在在窗口发生移动时进行聚合计算。每一条数据到达时，使用最近一个窗口的聚合函数的返回值与非聚合函数参数的列进行计算。</li></ul></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title4" id="3-数据窗口"><h2 class="- topic/title title topictitle2" id="ariaid-title4">3. 数据窗口</h2><div class="- topic/body body"><p class="- topic/p p">当异常指标中包含聚合函数时，用户必须指定数据窗口。流数据聚合计算是每隔一段时间，在固定长度的移动窗口中进行。窗口长度由参数 <em class="+ topic/ph hi-d/i ph i">windowSize</em> 设定；计算的时间间隔由参数 <em class="+ topic/ph hi-d/i ph i">step</em> 设定。</p><p class="- topic/p p">在有多组数据的情况下，若每组都根据各自第一条数据进入系统的时间来构造数据窗口的边界，则一般无法将各组的计算结果在相同数据窗口中进行对比。考虑到这一点，系统按照参数 step 值确定一个整型的规整尺度 <em class="+ topic/ph hi-d/i ph i">alignmentSize</em> ，以对各组第一个数据窗口的边界值进行规整处理。</p><p class="- topic/p p">（1）当数据时间类型为MONTH时，会以第一条数据对应年份的1月作为窗口的上边界。</p><p class="- topic/p p">（2）当数据的时间类型为DATE时，不对第一个数据窗口的边界值进行规整。</p><p class="- topic/p p">（3）当数据时间精度为秒或分钟时，如MINUTE, DATETIME或SECOND类型，alignmentSize取值规则如下表：</p><div class="table-container"><table class="- topic/table table" data-cols="2"><caption></caption><colgroup><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="3-数据窗口__entry__1">step</th><th class="- topic/entry entry colsep-0 rowsep-0" id="3-数据窗口__entry__2">alignmentSize</th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__1">0~2</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__2">2</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__1">3~5</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__2">5</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__1">6~10</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__2">10</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__1">11~15</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__2">15</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__1">16~20</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__2">20</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__1">21~30</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__2">30</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__1">31~60</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__2">60</td></tr></tbody></table></div><p class="- topic/p p">如果 roundTime = false, 对于step &gt; 60, alignmentSize 都为60。 如果 roundTime = true，则alignmentSize取值规则如下表：</p><div class="table-container"><table class="- topic/table table" data-cols="2"><caption></caption><colgroup><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="3-数据窗口__entry__17">step</th><th class="- topic/entry entry colsep-0 rowsep-0" id="3-数据窗口__entry__18">alignmentSize</th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__17">61\～120</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__18">120（2分钟）</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__17">121~180</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__18">180（3分钟）</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__17">181~300</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__18">300（5分钟）</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__17">301~600</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__18">600（10分钟）</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__17">601~900</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__18">900（15分钟）</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__17">901~1200</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__18">1200（20分钟）</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__17">1201~1800</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__18">1800（30分钟）</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__17">&gt;1800</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__18">3600（1小时）</td></tr></tbody></table></div><p class="- topic/p p">（4）当数据时间精度为毫秒时，如TIMESTAMP或TIME类型，alignmentSize取值规则如下表：</p><div class="table-container"><table class="- topic/table table" data-cols="2"><caption></caption><colgroup><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="3-数据窗口__entry__35">step</th><th class="- topic/entry entry colsep-0 rowsep-0" id="3-数据窗口__entry__36">alignmentSize</th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__35">0~2</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__36">2</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__35">3~5</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__36">5</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__35">6~10</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__36">10</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__35">11~20</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__36">20</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__35">21~25</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__36">25</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__35">26~50</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__36">50</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__35">51~100</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__36">100</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__35">101~200</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__36">200</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__35">201~250</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__36">250</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__35">251~500</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__36">500</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__35">501~1000</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__36">1000（1秒）</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__35">1001~2000</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__36">2000（2秒）</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__35">2001~3000</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__36">3000（3秒）</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__35">3001~5000</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__36">5000（5秒）</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__35">5001~10000</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__36">10000（10秒）</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__35">10001~15000</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__36">15000（15秒）</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__35">15001~20000</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__36">20000（20秒）</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__35">20001~30000</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__36">30000（30秒）</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__35">30001~60000</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__36">60000（1分钟）</td></tr></tbody></table></div><p class="- topic/p p">如果 roundTime = false, 对于step &gt; 60000, alignmentSize 都为60000。 如果 roundTime = true，则alignmentSize取值规则如下表：</p><div class="table-container"><table class="- topic/table table" data-cols="2"><caption></caption><colgroup><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="3-数据窗口__entry__75">step</th><th class="- topic/entry entry colsep-0 rowsep-0" id="3-数据窗口__entry__76">alignmentSize</th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__75">60001~120000</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__76">120000（2分钟）</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__75">120001~180000</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__76">180000（3分钟）</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__75">120001~300000</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__76">300000（5分钟）</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__75">300001~600000</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__76">600000（10分钟）</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__75">600001~900000</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__76">900000（15分钟）</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__75">900001~1200000</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__76">1200000（20分钟）</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__75">1200001~1800000</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__76">1800000（30分钟）</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__75">&gt;= 1800001</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-数据窗口__entry__76">3600000（1小时）</td></tr></tbody></table></div><p class="- topic/p p">假设第一条数据时间的最小精度值为x，那么第一个数据窗口的左边界最小精度经过规整后为<code class="+ topic/ph pr-d/codeph ph codeph">x/alignmentSize\*alignmentSize</code>，其中<code class="+ topic/ph pr-d/codeph ph codeph">/</code>代表相除后取整。举例来说，若第一条数据时间为 2018.10.08T01:01:01.365，则x=365。若step=100，根据上表，alignmentSize=100，可得出规整后的第一个数据窗口左边界最小精度为365\100*100=300，因此规整后的第一个数据窗口范围为2018.10.08T01:01:01.300至 2018.10.08T01:01:01.400。</p></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title5" id="4-应用场景"><h2 class="- topic/title title topictitle2" id="ariaid-title5">4. 应用场景</h2><div class="- topic/body body"><p class="- topic/p p">现模拟传感器设备采集温度。假设窗口长度为4ms，每隔2ms移动一次窗口，每隔1ms采集一次温度，规定以下异常指标：</p><ol class="- topic/ol ol"><li class="- topic/li li">单次采集的温度超过65；</li><li class="- topic/li li">单次采集的温度超过上一个窗口中75%的值；</li></ol><p class="- topic/p p">采集的数据存放到流数据表中，异常检测引擎通过订阅流数据表来获取实时数据，并进行异常检测，符合异常指标的数据输出到另外一个表中。</p><p class="- topic/p p">实现步骤如下：</p><p class="- topic/p p">(1) 定义流数据表sensor来存放采集的数据：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>share streamTable(1000:0, `time`temp, [TIMESTAMP, DOUBLE]) as sensor</code></pre><p class="- topic/p p">(2) 定义异常检测引擎和输出表outputTable，输出表也是流数据表：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>share streamTable(1000:0, `time`anomalyType`anomalyString, [TIMESTAMP, INT, SYMBOL]) as outputTable
engine = createAnomalyDetectionEngine("engine1", &lt;[temp &gt; 65, temp &gt; percentile(temp, 75)]&gt;, sensor, outputTable, `time, , 6, 3)</code></pre><p class="- topic/p p">(3) 异常检测引擎engine订阅流数据表sensor：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>subscribeTable(, "sensor", "sensorAnomalyDetection", 0, append!{engine}, true)</code></pre><p class="- topic/p p">(4) 向流数据表sensor中写入10次数据模拟采集温度：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>timev = 2018.10.08T01:01:01.001 + 1..10
tempv = 59 66 57 60 63 51 53 52 56 55
insert into sensor values(timev, tempv)</code></pre><p class="- topic/p p">查看流数据表 sensor 的内容：</p><div class="table-container"><table class="- topic/table table" data-cols="2"><caption></caption><colgroup><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="4-应用场景__entry__1">time</th><th class="- topic/entry entry colsep-0 rowsep-0" id="4-应用场景__entry__2">temp</th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__1">2018.10.08T01:01:01.002</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__2">59</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__1">2018.10.08T01:01:01.003</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__2">66</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__1">2018.10.08T01:01:01.004</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__2">57</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__1">2018.10.08T01:01:01.005</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__2">60</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__1">2018.10.08T01:01:01.006</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__2">63</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__1">2018.10.08T01:01:01.007</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__2">51</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__1">2018.10.08T01:01:01.008</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__2">53</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__1">2018.10.08T01:01:01.009</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__2">52</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__1">2018.10.08T01:01:01.010</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__2">56</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__1">2018.10.08T01:01:01.011</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__2">55</td></tr></tbody></table></div><p class="- topic/p p">再查看结果表 outputTable ：</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="4-应用场景__entry__23">time</th><th class="- topic/entry entry colsep-0 rowsep-0" id="4-应用场景__entry__24">anomalyType</th><th class="- topic/entry entry colsep-0 rowsep-0" id="4-应用场景__entry__25">anomalyString</th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__23">2018.10.08T01:01:01.003</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__24">0</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__25">temp &gt; 65</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__23">2018.10.08T01:01:01.003</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__24">1</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__25">temp &gt; percentile(temp, 75)</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__23">2018.10.08T01:01:01.005</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__24">1</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__25">temp &gt; percentile(temp, 75)</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__23">2018.10.08T01:01:01.006</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__24">1</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__25">temp &gt; percentile(temp, 75)</td></tr></tbody></table></div><p class="- topic/p p">下面详细解释异常检测引擎的计算过程。为方便阅读，对时间的描述中省略相同的2018.10.08T01:01:01部分，只列出毫秒部分。</p><p class="- topic/p p">（1）指标<code class="+ topic/ph pr-d/codeph ph codeph">temp &gt; 65</code>只包含不作为函数参数的列temp，因此会在每条数据到达时计算。模拟数据中只有003时的温度满足检测异常的指标。</p><p class="- topic/p p">（2）指标<code class="+ topic/ph pr-d/codeph ph codeph">temp &gt; percentile(temp, 75)</code>中，temp列既作为聚合函数<code class="+ topic/ph pr-d/codeph ph codeph">percentile</code>的参数，又单独出现，因此会在每条数据到达时，将其中的<code class="+ topic/ph pr-d/codeph ph codeph">temp</code>与上一个窗口计算得到的<code class="+ topic/ph pr-d/codeph ph codeph">percentile(temp, 75)</code>比较。第一个窗口基于第一行数据的时间002进行对齐，对齐后窗口起始边界为000，第一个窗口是从000到002，只包含002一条记录，计算<code class="+ topic/ph pr-d/codeph ph codeph">percentile(temp, 75)</code>的结果是59，数据003到005与这个值比较，满足条件的有003和005。第二个窗口是从002到005，计算<code class="+ topic/ph pr-d/codeph ph codeph">percentile(temp, 75)</code>的结果是60，数据006到008与这个值比较，满足条件的有006。第三个窗口是从003到008，计算<code class="+ topic/ph pr-d/codeph ph codeph">percentile(temp, 75)</code>的结果是63，数据009到011与这个值比较，其中没有满足条件的行。最后一条数据011到达后，尚未触发新的窗口计算。</p><p class="- topic/p p">监控异常检测引擎的状态</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>getAggregatorStat().AnomalyDetectionEngine</code></pre><div class="table-container"><table class="- topic/table table" data-cols="15"><caption></caption><colgroup><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="4-应用场景__entry__38">name</th><th class="- topic/entry entry colsep-0 rowsep-0" id="4-应用场景__entry__39">user</th><th class="- topic/entry entry colsep-0 rowsep-0" id="4-应用场景__entry__40">status</th><th class="- topic/entry entry colsep-0 rowsep-0" id="4-应用场景__entry__41">lastErrMsg</th><th class="- topic/entry entry colsep-0 rowsep-0" id="4-应用场景__entry__42">numGroups</th><th class="- topic/entry entry colsep-0 rowsep-0" id="4-应用场景__entry__43">numRows</th><th class="- topic/entry entry colsep-0 rowsep-0" id="4-应用场景__entry__44">numMetrics</th><th class="- topic/entry entry colsep-0 rowsep-0" id="4-应用场景__entry__45">metrics</th><th class="- topic/entry entry colsep-0 rowsep-0" id="4-应用场景__entry__46">snapshotDir</th><th class="- topic/entry entry colsep-0 rowsep-0" id="4-应用场景__entry__47">snapshotInterval</th><th class="- topic/entry entry colsep-0 rowsep-0" id="4-应用场景__entry__48">snapshotMsgId</th><th class="- topic/entry entry colsep-0 rowsep-0" id="4-应用场景__entry__49">snapshotTimestamp</th><th class="- topic/entry entry colsep-0 rowsep-0" id="4-应用场景__entry__50">garbageSize</th><th class="- topic/entry entry colsep-0 rowsep-0" id="4-应用场景__entry__51">memoryUsed</th><th class="- topic/entry entry colsep-0 rowsep-0" id="4-应用场景__entry__52"> </th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__38">engine1</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__39">admin</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__40">OK</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__41"> </td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__42">1</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__43">10</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__44">2</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__45">temp &gt; 65, temp &gt; percentile(temp, 75)</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__46"> </td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__47"> </td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__48">-1</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__49"> </td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__50">2,000</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="4-应用场景__entry__51">8,524</td></tr></tbody></table></div></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title6" id="5-快照机制"><h2 class="- topic/title title topictitle2" id="ariaid-title6">5. 快照机制</h2><div class="- topic/body body"><p class="- topic/p p">快照机制可以用于系统出现异常之后，对引擎进行恢复。通过以下这个例子，可以理解snapshotDir和snapshotIntervalInMsgCount的作用。如果启用snapshot，引擎订阅流数据表时，handler需是appendMsg函数，需指定handlerNeedMsgId=true，用来记录快照的消息位置。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>WORK_DIR="/home/root/WORK_DIR"
mkdir(WORK_DIR+"/snapshotDir")
enableTableShareAndPersistence(table = streamTable(10000:0,`time`sym`price`qty, [TIMESTAMP,SYMBOL,DOUBLE,INT]) , tableName="trades", cacheSize=1000000)
enableTableShareAndPersistence(table = streamTable(10000:0, `time`sym`type`metric, [TIMESTAMP,STRING,INT,STRING]), tableName = "output", cacheSize=1000000)
go

adengine = createAnomalyDetectionEngine(name="test", metrics=&lt;[avg(qty)&gt;1]&gt;, dummyTable=trades, outputTable=output, timeColumn=`time, keyColumn=`sym, windowSize=10, step=10, snapshotDir=WORK_DIR+"/snapshotDir", snapshotIntervalInMsgCount=100)
subscribeTable(server="", tableName="trades", actionName="adengine",offset= 0, handler=appendMsg{adengine}, msgAsTable=true, handlerNeedMsgId=true)

def writeData(mutable t){
do{
batch = 10
tmp = table(batch:batch, `time`sym`price`qty, [TIMESTAMP, SYMBOL, DOUBLE, DOUBLE])
tmp[`time] = take(now(), batch)
tmp[`sym] = "A"+string(1..batch)
tmp[`price] = round(rand(100.0, batch), 2)
tmp[`qty] = rand(10, batch)
t.append!(tmp)
sleep(1000)
}while(true)
}

job1=submitJob("write", "", writeData, trades)
//执行一段时间后重启server

enableTableShareAndPersistence(table = streamTable(10000:0,`time`sym`price`qty, [TIMESTAMP,SYMBOL,DOUBLE,INT]) , tableName="trades", cacheSize=1000000)
enableTableShareAndPersistence(table = streamTable(10000:0, `time`sym`type`metric, [TIMESTAMP,STRING,INT,STRING]), tableName = "output", cacheSize=1000000)

select last(time) from output
&gt;2021.03.16T11:59:10.920

select last(time) from trades
&gt;2021.03.16T11:59:13.916

WORK_DIR="/home/root/WORK_DIR"
adengine = createAnomalyDetectionEngine(name="test", metrics=&lt;[avg(qty)&gt;qty]&gt;, dummyTable=trades, outputTable=output, timeColumn=`time, keyColumn=`sym, windowSize=10, step=10, snapshotDir=WORK_DIR+"/snapshotDir", snapshotIntervalInMsgCount=100)

ofst = getSnapshotMsgId(adengine)
print(ofst)
&gt;299

select count(*) from trades
&gt;390

//从第300条数据开始订阅
subscribeTable(server="", tableName="trades", actionName="adengine",offset=ofst+1, handler=appendMsg{adengine}, msgAsTable=true, handlerNeedMsgId=true) </code></pre></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title7" id="6-总结"><h2 class="- topic/title title topictitle2" id="ariaid-title7">6. 总结</h2><div class="- topic/body body"><p class="- topic/p p">DolphinDB database 提供的异常检测引擎是一个轻量、使用方便的流数据引擎，它通过与流数据表合作来完成流数据的实时检测任务，能够满足物联网实时监控和预警的需求。</p></div></article></article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" aria-label="On this page" class="col-lg-2 d-none d-lg-block navbar d-print-none"> 
                            <div id="wh_topic_toc_content">
		                        
	                            <div class=" wh_topic_toc "><div class="wh_topic_label">在本页上</div><ul><li class="topic-item"><a href="#1-%E5%BC%82%E5%B8%B8%E6%A3%80%E6%B5%8B%E5%BC%95%E6%93%8E%E6%A1%86%E6%9E%B6" data-tocid="1-异常检测引擎框架">1. 异常检测引擎框架</a></li><li class="topic-item"><a href="#2-%E5%BC%82%E5%B8%B8%E6%8C%87%E6%A0%87" data-tocid="2-异常指标">2. 异常指标</a></li><li class="topic-item"><a href="#3-%E6%95%B0%E6%8D%AE%E7%AA%97%E5%8F%A3" data-tocid="3-数据窗口">3. 数据窗口</a></li><li class="topic-item"><a href="#4-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF" data-tocid="4-应用场景">4. 应用场景</a></li><li class="topic-item"><a href="#5-%E5%BF%AB%E7%85%A7%E6%9C%BA%E5%88%B6" data-tocid="5-快照机制">5. 快照机制</a></li><li class="topic-item"><a href="#6-%E6%80%BB%E7%BB%93" data-tocid="6-总结">6. 总结</a></li></ul></div>
	                        	
                        	</div>
                        </nav>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
<title>Copyright</title><p><b> ©2025 浙江智臾科技有限公司 浙ICP备18048711号-3</b></p>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
    </body>
</html>