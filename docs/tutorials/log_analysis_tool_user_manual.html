<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" data-whc_version="26.0">
    <head><link rel="shortcut icon" href="../favicon.ico"/><link rel="icon" href="../favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="当 DolphinDB 出现问题、亟需深入日志排查时，诸多繁琐操作容易影响排查效率。用户不仅需要手动定位问题时段对应的日志文件与关键片段，还需跨多个节点审查同时期的日志记录。这些过程不仅冗长复杂，还容易出错，更可能导致用户遗漏部分通用分析步骤，进而延误问题解决。此外，部分用户希望实现日志的实时监控，以便在特定模式出现时即刻通过邮件获得告警通知。 为解决这一系列挑战，DolphinDB ..."/><meta name="DC.rights.owner" content="(C) 版权 2025"/><meta name="copyright" content="(C) 版权 2025"/><meta name="generator" content="DITA-OT"/><meta name="DC.type" content="topic"/><meta name="DC.coverage" content=""/><meta name="DC.relation" content="../tutorials/tu_modules.html"/><meta name="prodname" content="DolphinDB"/><meta name="brand" content="DolphinDB"/><meta name="DC.creator" content="DolphinDB"/><meta name="DC.publisher" content="DDB N/A DDB 200"/><meta name="DC.format" content="HTML5"/><meta name="DC.identifier" content="dolphindb-日志分析工具使用手册"/><title>DolphinDB 日志分析工具使用手册</title><!--  Generated with Oxygen version 26.0, build number 2024012323.  --><meta name="wh-path2root" content="../"/><meta name="wh-toc-id" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;?workdir /tmp/temp20250305183303418/tutorials?&gt;&lt;?workdir-uri file:/tmp/temp20250305183303418/tutorials/?&gt;&lt;?path2project ../?&gt;&lt;?path2project-uri ../?&gt;&lt;?path2rootmap-uri ../?&gt;&lt;topic xmlns:dita-ot=&#34;http://dita-ot.sourceforge.net/ns/201007/dita-ot&#34; xmlns:ditaarch=&#34;http://dita.oasis-open.org/architecture/2005/&#34; class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;dolphindb-日志分析工具使用手册&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;DolphinDB 日志分析工具使用手册&lt;/title&gt;&lt;prolog class=&#34;- topic/prolog &#34;&gt;&lt;author class=&#34;- topic/author &#34; xtrc=&#34;author:1;12:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/author&gt;&lt;publisherinformation class=&#34;- topic/publisher bookmap/publisherinformation &#34; xtrc=&#34;publisherinformation:1;14:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:1;15:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;printlocation class=&#34;- topic/data bookmap/printlocation &#34; xtrc=&#34;printlocation:1;16:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;N/A&lt;/printlocation&gt; &lt;published class=&#34;- topic/data bookmap/published &#34; xtrc=&#34;published:1;17:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:2;18:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;publishtype class=&#34;- topic/data bookmap/publishtype &#34; value=&#34;HTML&#34; xtrc=&#34;publishtype:1;19:44&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;revisionid class=&#34;- topic/ph bookmap/revisionid &#34; xtrc=&#34;revisionid:1;20:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;200&lt;/revisionid&gt; &lt;summary class=&#34;- topic/ph bookmap/summary &#34; xtrc=&#34;summary:1;22:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:1;23:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/published&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:2;25:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/publisherinformation&gt;&lt;metadata class=&#34;- topic/metadata &#34;&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:2;39:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:1;28:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;category class=&#34;- topic/category &#34; xtrc=&#34;category:1;29:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;prodinfo class=&#34;- topic/prodinfo &#34; xtrc=&#34;prodinfo:1;34:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;prodname class=&#34;- topic/prodname &#34; xtrc=&#34;prodname:1;35:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/prodname&gt; &lt;brand class=&#34;- topic/brand &#34; xtrc=&#34;brand:1;36:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/brand&gt; &lt;/prodinfo&gt;&lt;/metadata&gt;&lt;/prolog&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:1;3:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;当 DolphinDB 出现问题、亟需深入日志排查时，诸多繁琐操作容易影响排查效率。用户不仅需要手动定位问题时段对应的日志文件与关键片段，还需跨多个节点审查同时期的日志记录。这些过程不仅冗长复杂，还容易出错，更可能导致用户遗漏部分通用分析步骤，进而延误问题解决。此外，部分用户希望实现日志的实时监控，以便在特定模式出现时即刻通过邮件获得告警通知。 为解决这一系列挑战，DolphinDB 精心打造了日志分析工具——一款专为提升日志分析效率而设计的模块。 该工具亮点纷呈，能够批量处理指定文件夹内的日志数据，精准读取用户指定时间范围内的所有日志条目，生成相关报表，支持灵活定制报告内容，满足多样化分析需求。 此外，该工具还实现了对节点日志的实时监控，从而确保用户能在第一时间掌握最新日志动态。用户可以配置白名单与黑名单机制，以过滤无关日志，进而聚焦核心信息；还可以启用邮件告警功能，并且自定义邮件内容。 最后，DolphinDB 日志分析工具还支持用户自定义日志解析内容，以此享受全面、便捷且高效的日志分析解决方案。 本文将从具体使用角度，详细介绍该工具的依赖、接口和使用案例。&lt;/p&gt;&lt;/body&gt;&lt;related-links class=&#34;- topic/related-links &#34;&gt;&lt;linkpool class=&#34;- topic/linkpool &#34; xtrc=&#34;topicref:93;125:92&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;../tutorials/tu_modules.dita&#34; mapclass=&#34;- map/topicref &#34; role=&#34;parent&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:81;112:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot gentext?&gt;模块&lt;/linktext&gt;&lt;/link&gt;&lt;/linkpool&gt;&lt;/related-links&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1-配置要求&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:2;12:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:2;12:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;1. 配置要求&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:2;12:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:2;14:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;2.00.10 或以上版本 DolphinDB Linux 版。本文测试通过的版本包括 2.00.10, 2.00.11, 2.00.12, 2.00.13, 2.00.14, 3.00.0, 3.00.1。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:3;16:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;在数据节点或计算节点：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:1;18:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:1;18:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;配置 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html?hl=persistencedir&#34; scope=&#34;external&#34; xtrc=&#34;xref:1;18:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;?ditaot usertext?&gt;persistenceDir&lt;/xref&gt; 用于设置共享流数据表的持久化路径。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:2;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;安装 HttpClient 插件，用于发送 HTTP 请求或者邮件。最低版本要求：3.00.1.5, 2.00.13.5, 3.00.0.9, 2.00.12.12, 2.00.11.13, 2.00.10.16。&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;2-快速上手&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:3;21:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:3;21:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;2. 快速上手&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:3;21:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:4;23:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;安装附件模块源码文件到 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:1;23:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;server/modules&lt;/i&gt; 目录下，在数据节点或计算节点运行。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;21-批量分析指定文件夹下的日志&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:4;25:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:4;25:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;2.1 批量分析指定文件夹下的日志&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:4;25:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:5;27:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;该 demo 实现批量读取目录 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:2;27:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;/dolphindb/server/log&lt;/i&gt; 下的日志到原始日志流表 originLogLines，日志时间范围为 1 小时前到当前时间戳，订阅并解析日志内容输出到解析结果流表 logAnalysisResult：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:1;29:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;clearCachedModules() go use DDBLogAnalyser::config use DDBLogAnalyser::logReader use DDBLogAnalyser::logParser::logParser use DDBLogAnalyser::reportGenerator::reportGenerator go clearEnv() go batchModeVersion = version() // 与 logDir 下的日志对应的 DolphinDB 版本相同 config = getExampleConfig(batchModeVersion) config[&#34;logDir&#34;] = &#34;/dolphindb/server/log&#34; config[&#34;startTime&#34;] = temporalAdd(now(), -1H) // 日志开始时间为当前时间戳 - 1H config[&#34;endTime&#34;] = now() // 日志结束时间当前时间戳 initConfig(config) go readLog() parseLog() generateReport()&lt;/codeblock&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:1;53:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:5;53:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;图 2-1 logAnalysisResult 流表部分数据截图&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/log_analysis_tool_user_manual/2_1.png&#34; xtrc=&#34;image:1;53:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34; dita-ot:image-width=&#34;1580&#34; dita-ot:image-height=&#34;469&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:6;55:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;全部解析完毕后生成多份报表，包括 errors 所有错误信息表、warnings 所有警告信息表、longestTransactionsReport 最长耗时事务表、transactionAuditReport 所有事务 DDL 日志表等：&lt;/p&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:2;57:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:6;57:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;图 2-2 结果报表部分截图&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/log_analysis_tool_user_manual/2_2.png&#34; xtrc=&#34;image:2;57:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34; dita-ot:image-width=&#34;500&#34; dita-ot:image-height=&#34;414&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;22--实时监控指定集群的最新日志&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:5;61:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:7;61:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;2.2 实时监控指定集群的最新日志&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:5;61:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:7;63:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;运行脚本时要求指定集群所有节点都在线，运行脚本后只要求指定集群控制节点和代理节点在线即可监控所有节点日志。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:8;65:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;该 demo 实现流式读取指定远程集群的所有节点的日志到原始日志流表 originLogLines，订阅并解析日志内容输出到解析结果流表 logAnalysisResult：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:2;67:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;try { loadPlugin(&#34;httpClient&#34;) } catch(err) { print(err) } go clearCachedModules() go use DDBLogAnalyser::config use DDBLogAnalyser::logReader use DDBLogAnalyser::logParser::logParser use DDBLogAnalyser::reportGenerator::reportGenerator use DDBLogAnalyser::alertGenerator go clearEnv() go config = getExampleConfig() config[&#34;remoteControllerSites&#34;] = [ &#34;192.168.100.43:7600&#34;, &#34;192.168.100.44:7600&#34;, &#34;192.168.100.45:7600&#34; ] // 远程集群的所有控制节点的 IP:端口号 config[&#34;remoteUsername&#34;] = &#34;admin&#34; // 远程集群的管理员账户 config[&#34;remotePassword&#34;] = &#34;123456&#34; // 远程集群的管理员密码 alertConfig = dict(STRING, ANY) alertConfig[&#34;userId&#34;] = &#34;xxx@xxx.com&#34; // 告警发送邮箱账号，必须开启 SMTP alertConfig[&#34;pwd&#34;] = &#34;xxxxxx&#34; // 告警发送邮箱密码 alertConfig[&#34;recipient&#34;] = &#34;xxx@xxx.com&#34; // 告警接收人邮箱 alertConfig[&#34;logLevelFilter&#34;] = [&#34;DEBUG&#34;] // 按日志等级过滤，排除 DEBUG 日志 alertConfig[&#34;whitelist&#34;] = [&#34;%whitelist error%&#34;] // 用 like 和日志内容匹配，过滤需要的日志，优先生效。不需要白名单时不配置。 alertConfig[&#34;blacklist&#34;] = [&#34;%blacklist error%&#34;] // 用 like 和日志内容匹配，过滤不要的日志，在白名单后生效。不需要黑名单时不配置。 config[&#34;alertConfig&#34;] = alertConfig initConfig(config) go readLog() parseLog() initAlertGenerator()&lt;/codeblock&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:3;106:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:8;106:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;图 2-3 logAnalysisResult 流表部分数据截图&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/log_analysis_tool_user_manual/2.3.png&#34; xtrc=&#34;image:3;106:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34; dita-ot:image-width=&#34;1837&#34; dita-ot:image-height=&#34;390&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:9;110:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;对内容含 “whitelist error“ 的日志发送邮件告警（需要修改 config 字典里配置的邮箱；需要邮箱支持 SMTP）：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:3;112:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;writeLog(&#34;whitelist error&#34;)&lt;/codeblock&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:4;118:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:9;118:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;图 2-4 告警邮件&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/log_analysis_tool_user_manual/2.4.png&#34; xtrc=&#34;image:4;118:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34; dita-ot:image-width=&#34;639&#34; dita-ot:image-height=&#34;208&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;3-配置项&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:6;122:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:10;122:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;3. 配置项&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:6;122:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:10;124:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;通用配置项：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:1;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:1;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:1;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:2;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:3;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:1;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:1;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:1;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;配置项&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:2;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;类型&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:3;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;说明&lt;/entry&gt; &lt;/row&gt; &lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:1;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:2;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:4;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;mode&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:5;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;正整数&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:6;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:2;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:3;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;0：为流处理模式，实时读取集群最新日志并解析。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:4;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;1：为批处理模式，批量解析 logDir 配置项下的日志文件。&lt;/li&gt;&lt;/ul&gt;&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:3;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:7;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;resultType&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:8;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;字符串&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:9;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:3;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:5;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;sharedTable：&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:4;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:6;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;批处理时，解析结果表为共享内存表，解析完毕后会对该表按日志时间排序。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:7;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;流处理时，解析结果表为共享流数据表。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:8;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;dfs：批处理和流处理可用，会额外增加一个订阅到分布式表。&lt;/li&gt;&lt;/ul&gt;&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:4;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:10;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;resultDbName&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:11;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;字符串&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:12;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;结果库名。 resultType 为 dfs 时使用。&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:5;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:13;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;resultTbName&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:14;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;字符串&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:15;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;结果表名。&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:6;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:16;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;originLogLinesTbName&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:17;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;字符串&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:18;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;读取原始日志的中间流表的表名。&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:7;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:19;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;logParserProjects&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:20;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;字符串数组&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:21;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;解析日志项目，元素值必须为 logParser/projects 下文件名，详见自定义解析项目一节。&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:11;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;为空时调用所有解析项目。&lt;/p&gt;&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:8;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:22;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;reportGeneratorProjects&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:23;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;字符串数组&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:24;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;生成报告项目，元素值必须为 reportGenerator/projects 下文件名，详见自定义报告项目一节。&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:12;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;为空时调用所有报告项目。&lt;/p&gt;&lt;/entry&gt; &lt;/row&gt; &lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:13;171:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;批处理配置项：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:2;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:2;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:4;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:5;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:6;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:2;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:9;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:25;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;配置项&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:26;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;类型&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:27;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;说明&lt;/entry&gt; &lt;/row&gt; &lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:2;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:10;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:28;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;version&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:29;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;字符串&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:30;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;日志对应的 DolphinDB 版本号，需要&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:1;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;至少填到第三级版本&lt;/b&gt;，例如 2.00.12。&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:14;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;注意：如果需要分析 DolphinDB 升级第三级版本前后的日志（例如从 2.00.11.x 升级到 2.00.12.x），需要使用 startTime 和 endTime 配置项分段提交升级前后的 version 的 readLog 任务；否则可能出现因为 version 和日志实际版本不匹配导致部分日志解析失败的问题。&lt;/p&gt;&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:11;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:31;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;startTime&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:32;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;时间类型&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:33;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;从开始时间（或之前一小段）开始读取。&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:12;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:34;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;endTime&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:35;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;时间类型&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:36;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;到结束时间（或之后一小段）结束读取。&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:13;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:37;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;logDir&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:38;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;字符串&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:39;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;路径文件夹，&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:2;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;要求路径下只包含 DolphinDB 日志文件，且必须使用原始日志文件名。&lt;/b&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:15;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;日志类型识别规则：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:5;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:9;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;{时间戳}dolphindb.log：single，单节点日志。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:10;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;{时间戳}controller.log：controller，控制节点日志。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:11;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;{时间戳} {节点别名}.log：datanode 数据节点日志。注意 computenode 计算节点也会被识别为数据节点，如果需要识别计算节点，需要配置 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:3;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;logTypes&lt;/i&gt; 配置项。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:12;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;{时间戳}agent.log：由于 agent 与业务无关，日志会被过滤。&lt;/li&gt;&lt;/ul&gt;&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:14;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:40;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;logTypes&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:41;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;字典&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:42;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;用于自定义日志对应的节点类型，例如：{“node2”： “计算节点”}&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:16;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;会识别{时间戳}node2.log 的日志的节点类型为 computenode。&lt;/p&gt;&lt;/entry&gt; &lt;/row&gt; &lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:17;208:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;流处理配置项：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:3;210:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:3;210:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:7;210:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:8;210:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:9;210:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:3;210:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:15;210:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:43;210:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;配置项&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:44;210:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;类型&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:45;210:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;说明&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:3;212:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:16;212:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:46;212:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;remoteControllerSites&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:47;212:26&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;字符串数组&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:48;212:33&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;远程集群的所有控制节点的 IP:端口号。若为单节点，为一个元素的数组，元素值为单节点的 IP:端口号。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:17;213:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:49;213:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;remoteUsername&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:50;213:19&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;字符串&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:51;213:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;若监控本地集群（即日志分析工具所在的集群），无需配置。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:18;214:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:52;214:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;remotePassword&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:53;214:19&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;字符串&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:54;214:35&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;远程集群的管理员账户。必须有管理员权限。若监控本地集群（即日志分析工具所在的集群），无需配置。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:19;215:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:55;215:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;getLogDuration&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:56;215:19&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;非负数&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:57;215:35&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;轮询获取 DolphinDB 日志的时间间隔，默认为 3000 ms。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:20;216:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:58;216:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;alertConfig&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:59;216:19&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;STRING-ANY 字典&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:60;216:35&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;详见下文 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:4;216:41&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;alertConfig&lt;/i&gt; 配置项。&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:18;218:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;alertConfig 配置项：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:4;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:4;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:10;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:11;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:12;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:4;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:21;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:61;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;配置项&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:62;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;类型&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:63;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;说明&lt;/entry&gt; &lt;/row&gt; &lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:4;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:22;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:64;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;userId&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:65;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;字符串&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:66;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;告警发送邮箱账号。 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:3;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;注意需要开启 SMTP 协议。&lt;/b&gt;&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:23;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:67;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;pwd&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:68;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;字符串&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:69;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;告警发送邮箱密码&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:24;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:70;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;recipient&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:71;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;字符串&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:72;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;告警接收人邮箱&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:25;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:73;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;logLevelFilter&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:74;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;字符串数组&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:75;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;按日志等级过滤&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:26;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:76;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;whitelist&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:77;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;字符串数组&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:78;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;用 like 和日志内容匹配，过滤需要的日志，优先生效。 不需要白名单时不配置。&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:19;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;例如 [&#34;%whitelist error%&#34;] 会匹配含 “whitelist error” 的日志。&lt;/p&gt;&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:27;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:79;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;blacklist&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:80;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;字符串数组&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:81;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;用 like 和日志内容匹配，过滤不要的日志，在白名单后生效。 不需要黑名单时不配置。&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:20;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;例如 [&#34;%blacklist error%&#34;] 会排除含 “blacklist error” 的日志。&lt;/p&gt;&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:28;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:82;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;generateEmailFunc&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:83;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;函数句柄&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:84;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;自定义邮件发送内容的函数。&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:21;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;入参：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:6;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:13;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;alertMsg：触发告警的日志的信息表，结构与 resultTbName 配置项的表相同。&lt;/li&gt;&lt;/ul&gt;返回值：&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:22;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;一个元组，第一个元素为邮件标题字符串，第二个元素为邮件正文字符串。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:23;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;例如：&lt;/p&gt;&lt;codeblock class=&#34;- topic/codeblock &#34; xtrc=&#34;codeblock:4;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;def customGenerateEmailFunc(alertMsg) { return “subject“, “body“ } alertConfig[&#34;generateEmailFunc&#34;] = customGenerateEmailFunc&lt;/codeblock&gt;&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:29;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:85;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;sendEmailInterval&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:86;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;正整数&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:87;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;发送邮件的最小时间间隔，单位毫秒，不配置或配置为 0 时表示有告警日志时立即发送邮件。&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:30;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:88;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;enableStdSMTPMsg&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:89;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;布尔值&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:90;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;是否使用标准 SMTP 格式消息。&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:24;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;/&gt;&lt;/entry&gt; &lt;/row&gt; &lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;4-接口&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:7;277:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:11;277:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;4. 接口&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:7;277:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:25;279:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;本章介绍日志分析工具的用户接口。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;41-initconfig&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:8;281:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:12;281:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;4.1 initConfig&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:8;281:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:26;283:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;参数：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:7;285:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:14;285:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;config：字典，定义详见《配置项》一节。&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:27;287:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;初始化一个名为 logAnalyserConfig 的共享字典，作为工具的全局配置。 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:4;287:44&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;需要首先运行该接口。&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:28;289:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:5;289:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;无法重复运行该接口。&lt;/b&gt; 需要修改配置时，可以直接修改共享字典的指定键的值（例如 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:1;289:44&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;logAnalyserConfig[&#34;version&#34;] = &#34;2.00.12&#34;&lt;/codeph&gt;），或者 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:2;289:91&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;undef(&#34;logAnalyserConfig&#34;, SHARED)&lt;/codeph&gt; 该共享字典后再重新调用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:3;289:140&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;initConfig&lt;/codeph&gt; 接口。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;42-readlog&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:9;291:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:13;291:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;4.2 readLog&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:9;291:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:29;293:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;读取日志。根据全局配置字典配置的读取模式，读取日志到 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:5;293:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;originLogLinesTbName&lt;/i&gt; 配置项指定名称的流表。批处理模式读取 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:4;293:70&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;logDir&lt;/codeph&gt; 配置项指定的文件夹下的日志到流表，流处理模式自动读取集群所有节点的日志到流表。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:30;295:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;结果流表如下：&lt;/p&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:5;299:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:14;299:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;图4-1 告警邮件&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/log_analysis_tool_user_manual/4_1.png&#34; xtrc=&#34;image:5;299:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34; dita-ot:image-width=&#34;1252&#34; dita-ot:image-height=&#34;211&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:31;303:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;字段说明：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:5;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:5;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:13;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:14;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:15;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:5;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:31;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:91;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;字段名&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:92;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;类型&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:93;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;说明&lt;/entry&gt; &lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:5;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:32;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:94;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;nodeAlias&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:95;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;STRING&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:96;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:8;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:15;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;批处理：日志文件名（不含时间戳和后缀）&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:16;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;流处理： &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:5;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;getNodeAlias()&lt;/codeph&gt; 返回的节点别名&lt;/li&gt;&lt;/ul&gt;&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:33;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:97;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;logFilename&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:98;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;STRING&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:99;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;日志文件所在路径&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:34;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:100;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;logType&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:101;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;SYMBOL&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:102;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;日志类型：&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:9;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:17;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;single：单节点日志&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:18;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;controller：controller 日志&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:19;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;datanode：datanode 日志&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:20;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;computenode：computenode 日志&lt;/li&gt;&lt;/ul&gt;&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:35;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:103;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;content&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:104;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;BLOB&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:105;304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;原始日志内容&lt;/entry&gt; &lt;/row&gt; &lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;43-parselog&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:10;334:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:15;334:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;4.3 parseLog&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:10;334:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:32;336:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;解析读取的日志日志。 订阅 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:6;336:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;originLogLinesTbName&lt;/i&gt; 配置项指定名称的流表，调用全局配置字典配置的解析项目进行解析，然后输出到 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:7;336:75&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;resultTbName&lt;/i&gt; 指定名称的流表。详见《自定义解析项目》一节。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:33;338:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;结果流表如下：&lt;/p&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:6;342:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:16;342:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;图4-2 parseLog 结果流表部分截图&lt;/title&gt; &lt;image class=&#34;- topic/image &#34; href=&#34;images/log_analysis_tool_user_manual/4_2.png&#34; xtrc=&#34;image:6;342:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34; dita-ot:image-width=&#34;1815&#34; dita-ot:image-height=&#34;383&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt; &lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:34;349:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;字段说明：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:6;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:6;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:16;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:17;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:18;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:6;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:36;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:106;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;字段名&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:107;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;类型&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:108;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;说明&lt;/entry&gt; &lt;/row&gt; &lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:6;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:37;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:109;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;logTime&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:110;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;NANOTIMESTAMP&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:111;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;日志时间戳&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:38;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:112;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;nodeAlias&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:113;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;STRING&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:114;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:10;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:21;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;批处理：日志文件名（不含时间戳和后缀）&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:22;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;流处理：&lt;codeph class=&#34;- topic/codeph &#34; xtrc=&#34;codeph:6;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;getNodeAlias()&lt;/codeph&gt; 返回的节点别名&lt;/li&gt;&lt;/ul&gt;&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:39;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:115;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;logType&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:116;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;SYMBOL&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:117;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;日志类型：&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:11;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:23;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;single：单节点日志&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:24;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;controller：controller 日志&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:25;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;datanode：datanode 日志&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:26;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;computenode：computenode 日志&lt;/li&gt;&lt;/ul&gt;&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:40;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:118;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;logFilename&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:119;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;STRING&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:120;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;日志文件所在路径&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:41;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:121;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;logLevel&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:122;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;SYMBOL&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:123;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;日志等级：&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:12;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:27;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;DEBUG&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:28;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;INFO&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:29;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;ERROR&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:30;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;WARNING&lt;/li&gt;&lt;/ul&gt;&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:42;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:124;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;threadId&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:125;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;STRING&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:126;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;打日志的线程的 ID&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:43;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:127;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;contentType&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:128;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;SYMBOL&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:129;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;日志类型：&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:13;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:31;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;transaction 开头：事务相关&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:32;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;startup 开头：启动相关&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:33;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;shutdown 开头：停止相关&lt;/li&gt;&lt;/ul&gt;&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:44;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:130;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;parsedContent&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:131;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;BLOB&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:132;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;解析的日志内容，为 JSON 字符串&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:45;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:133;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;originContent&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:134;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;BLOB&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:135;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;原始日志内容&lt;/entry&gt; &lt;/row&gt; &lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;44-generatereport&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:11;406:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:17;406:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;4.4 generateReport&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:11;406:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:35;408:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;根据解析日志结果生成报告表。 批处理模式下使用。 实现为运行 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:8;408:32&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;reportGenerator/projects&lt;/i&gt; 目录下所有与文件名同名的方法，详见《自定义解析项目》一节。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;45-initalertgenerator&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:12;410:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:18;410:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;4.5 initAlertGenerator&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:12;410:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:36;412:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;订阅解析结果流表，在触发配置的告警规则时发送邮件到指定邮箱。 流处理模式下使用。 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:6;412:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;注意需要邮箱开启 SMTP。&lt;/b&gt; 详见《自定义告警规则和内容》一节。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;46-clearenv&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:13;414:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:19;414:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;4.6 clearEnv&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:13;414:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:37;416:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;根据全局配置字典的配置项，清理所有相关的流表、订阅和后台任务等，然后清理全局配置字典。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;5进阶使用&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:14;418:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:20;418:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;5.进阶使用&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:14;418:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:38;420:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;本章介绍日志分析工具的进阶使用，实现自定义的日志分析。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;51自定义解析项目&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:15;422:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:21;422:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;5.1自定义解析项目&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:15;422:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:39;424:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;logParser 目录结构如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:5;426:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;. ├── logParser.dos └── projects ├── controller │   └── parseTransactionsInfo.dos └── datanode └── parseTransactionsInfo.dos&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:40;436:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;其中，&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:9;436:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;logParser.dos&lt;/i&gt; 包含入口方法 parseLog，该方法运行时，会加载 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:10;436:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;logParser/projects/controller&lt;/i&gt; 和 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:11;436:81&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;logParser/projects/datanode&lt;/i&gt; 目录下的所有模块文件，并运行与文件名同名的方法。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:41;438:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;例如，对解析事务相关日志行的模块 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:12;438:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;logParser/projects/controller/parseTransactionsInfo.dos&lt;/i&gt;，会加载并运行其中定义的方法 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:7;438:90&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;parseTransactionsInfo&lt;/codeph&gt;，入参说明：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:14;440:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:34;440:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;logTime：日志时间戳&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:35;441:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;logLevel：日志等级&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:36;442:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;line：日志行原始内容。 建议指定为 mutable 以提高性能。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:37;443:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;s：dropna(s.split(&#34; &#34;)) 的值，用于提取信息。 建议指定为 mutable 以提高性能。&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:42;445:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;返回值：一个元组。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:15;447:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:38;447:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;第一个元素为自定义类型字符串。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:39;448:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;第二个元素为解析的信息的字典，可自定义字段。&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:43;450:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;例如：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:6;452:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;module DDBLogAnalyser::logParser::projects::datanode::parseTransactionsInfo def parseTransactionsInfo(logTime, logLevel, mutable line, mutable s) { contentType = &#34;transactionCompleted&#34; info = {&#34;completedTime&#34;: logTime,&#34;tid&#34;: getTid(s),&#34;cid&#34;: getCid(s)} return (contentType, info) }&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:44;462:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;note class=&#34;- topic/note &#34; xtrc=&#34;note:1;462:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;如果配置了 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:13;462:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;logParserProjects&lt;/i&gt;，需要添加新增的 “parseTransactionsInfo” 到 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:14;462:67&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;logParserProjects&lt;/i&gt; 配置项。&lt;/note&gt;&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;52自定义报告项目&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:16;464:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:22;464:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;5.2自定义报告项目&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:16;464:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:45;466:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;logParser 目录结构如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:7;468:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;. ├── projects │   └── generateTransactionsReport.dos └── reportGenerator.dos&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:46;475:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;其中，&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:15;475:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;reportGenerator.dos&lt;/i&gt; 包含入口方法 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:8;475:33&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;generateReport&lt;/codeph&gt;，该方法运行时，会加载 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:16;475:61&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;reportGenerator/projects&lt;/i&gt; 目录下的所有模块文件，并运行与文件名同名的方法。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:47;477:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;例如，对生成事务相关报表的模块 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:17;477:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;reportGenerator/projects/generateTransactionsReport.dos&lt;/i&gt;，会加载并运行其中定义的方法 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:9;477:89&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;generateTransactionsReport&lt;/codeph&gt;，无入参，无返回值。目前设计为自行在方法内 share 报表。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:48;479:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;例如：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:8;481:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;def generateTransactionsReport() { rolledBackTransactions = generateRolledBackTransactionsReport() if (!isVoid(rolledBackTransactions)) { share(rolledBackTransactions, &#34;rolledBackTransactions&#34;) } }&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:49;490:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;note class=&#34;- topic/note &#34; xtrc=&#34;note:2;490:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;如果配置了 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:18;490:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;reportGeneratorProjects&lt;/i&gt;，需要添加新增的 “generateTransactionsReport” 到 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:19;490:78&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;reportGeneratorProjects&lt;/i&gt; 配置项。&lt;/note&gt;&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;53自定义告警规则和内容&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:17;492:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:23;492:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;5.3自定义告警规则和内容&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:17;492:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:50;494:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;主要通过 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:20;494:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;alertConfig&lt;/i&gt; 配置项来配置告警相关规则，支持黑名单和白名单模式，支持自定义告警邮件标题和内容。 具体见配置项一节的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:21;494:71&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;alertConfig&lt;/i&gt; 说明。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:51;496:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;例如，通过自定义告警邮件内容包含&#34;custom&#34; 字符串：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:9;498:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;def customGenerateEmailFunc(alertMsg) { h = &#34;custom alert!\n&#34; ret = exec string(originContent) from alertMsg ret = concat(ret, &#34;\n&#34;) subject = &#34;Custom alert from DolphinDB log analyser!&#34; body = h + ret return (subject, body) } alertConfig = dict(STRING, ANY) alertConfig[&#34;userId&#34;] = &#34;xxx@xxx.com&#34; // 告警发送邮箱账号 alertConfig[&#34;pwd&#34;] = &#34;xxxxxx&#34; // 告警发送邮箱密码 alertConfig[&#34;recipient&#34;] = &#34;xxx@xxx.com&#34; // 告警接收人邮箱 alertConfig[&#34;logLevelFilter&#34;] = [&#34;DEBUG&#34;] // 按日志等级过滤 alertConfig[&#34;whitelist&#34;] = [&#34;%whitelist error%&#34;] // 用 like 和日志内容匹配，过滤需要的日志，优先生效 alertConfig[&#34;blacklist&#34;] = [&#34;%blacklist error%&#34;] // 用 like 和日志内容匹配，过滤不要的日志，在白名单后生效 alertConfig[&#34;generateEmailBody&#34;] = customGenerateEmailBody config[&#34;alertConfig&#34;] = alertConfig&lt;/codeblock&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:7;521:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:24;521:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;图 5-1 自定义告警邮件&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/log_analysis_tool_user_manual/5_1.png&#34; xtrc=&#34;image:7;521:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34; dita-ot:image-width=&#34;588&#34; dita-ot:image-height=&#34;221&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;6日志分析案例&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:18;525:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:25;525:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;6.日志分析案例&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:18;525:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:52;527:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;本章介绍日志分析的常见案例。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;61排查事物回滚的原因&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:19;529:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:26;529:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;6.1排查事物回滚的原因&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:19;529:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:53;531:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;当某个库表由于事务回滚而出现数据缺失时，需要排查事务回滚的具体原因，使用命令行工具逐个查找回滚事务相关日志效率比较低且可读性较差。 参照 2.1 节执行批处理流程，查看生成的回滚事务报告表 rollbackTransactionsReport 如下：&lt;/p&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:8;535:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:27;535:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;图 6-1 回滚事务报告表部分截图&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/log_analysis_tool_user_manual/6_1.png&#34; xtrc=&#34;image:8;535:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34; dita-ot:image-width=&#34;522&#34; dita-ot:image-height=&#34;258&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:54;539:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;可见有 6 个事务回滚。 编写如下脚本遍历查询包含回滚事务 ID 的 ERROR 和 WARNING 日志并打印：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:10;541:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;tids = exec tid from rolledBackTransactions for (tid in tids) { pattern = &#34;%&#34; + tid + &#34;%&#34; info = select * from errors where originContent like pattern if(info.size() &amp;gt; 0) print(&#34;\nTransaction &#34; + tid + &#34; relative errors:\n&#34;, info[&#34;originContent&#34;]) info = select * from warnings where originContent like pattern if(info.size() &amp;gt; 0) print(&#34;\nTransaction &#34; + tid + &#34; relative warnings:&#34;, info[&#34;originContent&#34;]) }&lt;/codeblock&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:9;556:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:28;556:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;图 6-2 回滚事务报告表部分截图&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/log_analysis_tool_user_manual/6_2.png&#34; xtrc=&#34;image:9;556:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34; dita-ot:image-width=&#34;1024&#34; dita-ot:image-height=&#34;81&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:55;560:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;可见对 ID 为 53664920 的事务，有一个 WARNING 日志表明回滚原因可能为磁盘满。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;62排查对分布式库表的写入数据量&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:20;562:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:29;562:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;6.2排查对分布式库表的写入数据量&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:20;562:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:56;564:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;例如对分布式表执行每日导入数据的任务，如果用户反馈某天导入的数据量不合预期，或者导入时间过长，可以使用日志分析工具分析对分布式表的写入数据量。参照 2.1 节执行批处理流程，生成事务操作报告表 transactionAuditReport 和事务信息日志 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:10;564:129&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;transactionMetricsReport&lt;/codeph&gt;，执行如下查询统计每天每小时的对指定库的 DDL 操作数：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:11;566:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;select count(*) as DDLCount from transactionAuditReport where dbName = &#34;dfs://TL_Level2_merged&#34; group by dbName, date(logTime), hour(logTime) as date order by DDLCount desc&lt;/codeblock&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:10;574:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:30;574:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;图 6-3 统计每天每小时的对指定库的 DDL 操作数&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/log_analysis_tool_user_manual/6_3.png&#34; xtrc=&#34;image:10;574:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34; dita-ot:image-width=&#34;436&#34; dita-ot:image-height=&#34;658&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:57;578:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;可见 16, 17 日对库 dfs://TL_Level2_merged 的 DDL 操作数远高于 18 日。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:58;580:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;执行如下查询统计每天每小时的对指定库的写入分区数：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:12;582:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;select sum(partitionCount) from transactionMetricsReport left join transactionAuditReport on transactionMetricsReport.tid == transactionAuditReport.tid where dbName = &#34;dfs://TL_Level2_merged&#34; group by dbName, date(startTime) as date, hour(startTime) as hour order by sum_partitionCount desc&lt;/codeblock&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:11;591:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:31;591:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;图 6-4 统计每天每小时的对指定库的写入分区数&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/log_analysis_tool_user_manual/6_4.png&#34; xtrc=&#34;image:11;591:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34; dita-ot:image-width=&#34;475&#34; dita-ot:image-height=&#34;662&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:59;595:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;可见 16, 17 日对库 dfs://TL_Level2_merged 的写入分区数远高于 18 日。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:60;597:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;综上可以确定具体的业务逻辑，是16, 17 日重复提交了一些导入任务，导致并发写入变慢。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;63排查对分布式库表的误操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:21;599:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:32;599:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;6.3排查对分布式库表的误操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:21;599:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:61;601:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;note class=&#34;- topic/note &#34; xtrc=&#34;note:3;601:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;推荐配置 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html#topic_byd_23k_gcc&#34; scope=&#34;external&#34; xtrc=&#34;xref:2;601:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;?ditaot usertext?&gt;DDL 操作日志&lt;/xref&gt;配置项来查看对分布式库表的所有事务操作，本节适用于未开启该配置项或 DDL 操作日志已被自动删除时分析。&lt;/note&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:62;603:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;用户可能对分布式库表存在误操作，例如不小心执行了两遍 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:11;603:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;append!&lt;/codeph&gt; 写入重复数据，或者不小心执行了 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:12;603:54&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;delete&lt;/codeph&gt; SQL 导致数据丢失。以排查重复写入为例，参照 2.1 节执行批处理流程，生成事务操作报告表 transactionAuditReport 如下：&lt;/p&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:12;607:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:33;607:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;图 6-5 事务操作报告表部分截图&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/log_analysis_tool_user_manual/6_5.png&#34; xtrc=&#34;image:12;607:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34; dita-ot:image-width=&#34;1516&#34; dita-ot:image-height=&#34;149&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:63;611:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;该表记录了所有用户对库表的写入事务操作记录，注意到存在两条对 dfs://rangedb_tradedata 库的 Trades 表的 operation 为 savePartitionedTable 写入分布式表的记录，且 logTime 日志时间非常接近。 可结合 userName 用户名、remoteIP 客户端 IP 联系写入的用户，结合业务进一步确认是否为用户误操作导致重复写入。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;64排查耗时过长的事务&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:22;613:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:34;613:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;6.4排查耗时过长的事务&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:22;613:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:64;615:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;当客户写入性能出现问题时，一般需要排查耗时过长的事务以及其写入的库表，然后结合具体业务代码分析。 参照 &lt;xref class=&#34;- topic/xref &#34; dita-ot:orig-format=&#34;markdown&#34; format=&#34;dita&#34; href=&#34;#2.1批量分析指定文件夹下的日志&#34; xtrc=&#34;xref:3;615:53&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;?ditaot usertext?&gt;2.1 节&lt;/xref&gt;执行批处理流程，生成最长耗时事务报告表 longestTransactionsReport 如下：&lt;/p&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:13;619:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:35;619:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;图 6-6 最长耗时事务报告表部分截图&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/log_analysis_tool_user_manual/6_6.png&#34; xtrc=&#34;image:13;619:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34; dita-ot:image-width=&#34;719&#34; dita-ot:image-height=&#34;162&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:65;623:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;注意到事务 ID 为 30710128 的事务耗时最长，此时再查询 transactionAuditReport 表获得操作日志：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:13;625:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;select * from transactionAuditReport where tid == 30710128&lt;/codeblock&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:14;630:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:36;630:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;图 6-7 事务操作报告表部分截图&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/log_analysis_tool_user_manual/6_7.png&#34; xtrc=&#34;image:14;630:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34; dita-ot:image-width=&#34;1167&#34; dita-ot:image-height=&#34;61&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:66;634:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;可见该事务 contentType 为 savePartitionedTable 即写入事务，此时可结合 logTime 日志时间、userName 用户名、remoteIP 客户端 IP 联系写入的用户，结合业务进一步确认写入方式和数据量是否合理。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;65排查节点启动失败停止失败和宕机的原因&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:23;636:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:37;636:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;6.5排查节点启动失败、停止失败和宕机的原因&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:23;636:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:67;638:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;当节点启动失败、停止失败或宕机时，一般需要排查问题发生前日志是否有 ERROR 或 WARNING。 使用批处理模式分析日志得到节点启动和停止报表 startupAndShutdownReport 如下：&lt;/p&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:15;642:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:38;642:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;图 6-8 节点启动和停止报表部分截图&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/log_analysis_tool_user_manual/6_8.png&#34; xtrc=&#34;image:15;642:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34; dita-ot:image-width=&#34;1879&#34; dita-ot:image-height=&#34;415&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:68;646:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;其中 contentType 含义：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:16;648:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:40;648:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;startupInitializing：启动节点开始。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:41;649:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;startupCompleted： 启动节点完成。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:42;650:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;startupFailed：&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:7;650:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;启动节点失败。&lt;/b&gt; 该 contentType 的记录前会自动填充最近的 10 条 ERROR 和 WARNING 日志。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:43;651:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;shutdownReceivedSignal：节点收到 kill 信号。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:44;652:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;shutdownStarted：关闭节点开始。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:45;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;shutdownCompleted：关闭节点完成。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:46;654:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;shutdownFailed：&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:8;654:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;关闭节点失败。&lt;/b&gt; 该 contentType 的记录前会自动填充最近的 10 条 ERROR 和 WARNING 日志。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:47;655:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;coredump：&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:9;655:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;节点可能发生 coredump 宕机。&lt;/b&gt; 因为 coredump 并不会产生表明 coredump 的日志，该条记录为使用规则推理得到，需要根据是否产生 coredump 文件和操作系统日志（dmesg, /var/log/messages 等）来确定是否发生 coredump。 该 contentType 的记录前会自动填充最近的 10 条 ERROR 和 WARNING 日志。&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:69;657:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;注意到存在 contentType 为 coredump 的记录，检查 logTime 时间左右有对应 coredump 文件存在，需要进一步分析 coredump 堆栈内容和宕机前的动作确定原因。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:70;659:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;注意到存在 contentType 为 startupFailed 的记录，查看之前的 ERROR 日志发现报错内容为 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:13;659:61&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;Invalid license file&lt;/codeph&gt;，检查 license 发现已过期。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;66-统计用户登录情况&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:24;661:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:39;661:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;6.6 统计用户登录情况&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:24;661:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:71;663:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;使用批处理模式分析日志得到登录报表 loginReport 如下：&lt;/p&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:16;665:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:40;665:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;图 6-9 登录报表部分截图&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/log_analysis_tool_user_manual/6.9.png&#34; xtrc=&#34;image:16;665:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34; dita-ot:image-width=&#34;1390&#34; dita-ot:image-height=&#34;409&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:72;667:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;执行如下 SQL 统计每天各用户登录次数：&lt;/p&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:17;669:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:41;669:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;图 6-10 每天各用户登录次数统计结果&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/log_analysis_tool_user_manual/6.10.png&#34; xtrc=&#34;image:17;669:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34; dita-ot:image-width=&#34;373&#34; dita-ot:image-height=&#34;120&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:14;671:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;select count(*) from loginReport group by date(logTime) as date, operate&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;67-过滤相关日志&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:25;674:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:42;674:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;6.7 过滤相关日志&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:25;674:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:73;676:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;例如当客户的环境存在长期大量写入时，产生的大量事务日志可能干扰其他问题的排查，此时希望能过滤掉事务相关日志，可以直接对分析结果表执行查询，使用 like 方法过滤掉 contentType 为 transaction 开头的日志：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:15;678:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;t = select * from logAnalysisResult where contentType not like &#34;transaction%&#34;&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:74;682:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;如果需要过滤其他类型的日志，可以参考《自定义解析项目》一节编写相关日志的解析脚本，然后使用同样的方法过滤。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;68-生成日志分析每日报表&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:26;684:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:43;684:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;6.8 生成日志分析每日报表&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:26;684:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:75;686:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;可以结合定时任务和 HttpClient 插件实现生成日志分析每日报表并发送到指定邮箱。 参考定时任务如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:16;688:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;try { loadPlugin(&#34;HttpClient&#34;) } catch(err) { print(err) } go clearCachedModules() go use DDBLogAnalyser::config use DDBLogAnalyser::logReader use DDBLogAnalyser::logParser::logParser use DDBLogAnalyser::reportGenerator::reportGenerator use DDBLogAnalyser::alertGenerator go def analyseLogAndSend(userId, pwd, recipient) { clearEnv() go batchModeVersion = version() config = getExampleConfig(batchModeVersion) config[&#34;logDir&#34;] = getLogDir() config[&#34;startTime&#34;] = temporalAdd(now(), -24H) config[&#34;endTime&#34;] = now() initConfig(config) go readLog() parseLog() generateReport() // 批处理用 body = &#34;&amp;lt;pre&amp;gt;&#34; body += &#34;ERROR logs: &#34; + string(exec count(*) from objByName(&#34;errors&#34;)) + &#34;\n&#34; + string(objByName(&#34;errors&#34;)) body += &#34;\nWARNING logs: &#34; + string(exec count(*) from objByName(&#34;warnings&#34;)) + &#34;\n&#34; + string(objByName(&#34;warnings&#34;)) body += &#34;&amp;lt;/pre&amp;gt;&#34; res = HttpClient::sendEmail(userId, pwd, recipient, &#34;log analyser report for &#34; + string(today()), body); go clearEnv() } scheduleJob(&#34;analyseLogAndSend&#34;, &#34;analyseLogAndSend&#34;, analyseLogAndSend{&#34;xxxx@xxx.com&#34;, &#34;xxxxxxxx&#34;, &#34;xxxxx@xxx.com&#34;}, 23:55m, today(), 2055.12.31, 'D')&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:76;734:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;该定时任务每天 23:55 执行，解析单节点的日志生成报表，发送 ERROR 和 WARNING 日志的统计信息到指定邮箱。&lt;/p&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:18;738:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:44;738:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;图 6-11 每日报表部分截图&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/log_analysis_tool_user_manual/6_11.png&#34; xtrc=&#34;image:18;738:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34; dita-ot:image-width=&#34;1140&#34; dita-ot:image-height=&#34;733&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;7附录&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:27;742:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:45;742:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;7.附录&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:27;742:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:77;744:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;zip&#34; href=&#34;script/log_analysis_tool_user_manual/DDBLogAnalyser.zip&#34; xtrc=&#34;xref:4;744:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/log_analysis_tool_user_manual.md&#34;&gt;&lt;?ditaot usertext?&gt;DDBLogAnalyser&lt;/xref&gt;&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;"/><meta name="wh-source-relpath" content="tutorials/log_analysis_tool_user_manual.md"/><meta name="wh-out-relpath" content="tutorials/log_analysis_tool_user_manual.html"/>

    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/commons.css?buildId=2024012323"/>
    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic.css?buildId=2024012323"/>

    <script src="../oxygen-webhelp/app/options/properties.js?buildId=20250305183303"></script>
    <script src="../oxygen-webhelp/app/localization/strings.js?buildId=2024012323"></script>
    <script src="../oxygen-webhelp/app/search/index/keywords.js?buildId=20250305183303"></script>
    <script defer="defer" src="../oxygen-webhelp/app/commons.js?buildId=2024012323"></script>
    <script defer="defer" src="../oxygen-webhelp/app/topic.js?buildId=2024012323"></script>
<link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/styles.css?buildId=2024012323"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script></head>

    <body id="dolphindb-日志分析工具使用手册" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            跳转到主要内容
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div xmlns:whc="http://www.oxygenxml.com/webhelp/components" class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="https://docs.dolphindb.cn/zh/index.html" class=" wh_logo d-none d-sm-block "><img src="../logo.png" alt="  DolphinDB 文档中心  "/></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="booktitle">  <span class="ph mainbooktitle">DolphinDB 文档中心</span>  </span></a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="搜索 " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="搜索查询" required="required"/><button type="submit" class="wh_search_button" aria-label="搜索"><span class="search_input_text">搜索</span></button></div></form>
            
            <script src="/vendors/react/umd/react.production.min.js" defer="defer"></script>
<script src="/vendors/react-dom/umd/react-dom.production.min.js" defer="defer"></script>
<script src="/vendors/dayjs/dayjs.min.js" defer="defer"></script>
<script src="/vendors/antd/dist/antd.min.js" defer="defer"></script>
<script src="/vendors/@ant-design/icons/dist/index.umd.min.js" defer="defer"></script>
<script src="/zh/index.js" type="module"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" defer="defer"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer="defer"><!--


--></script>
<script defer="defer"><!--

// 从主页重定向
const currentUrl = window.location.href;

// 判断当前URL是否包含index.html并且路径最后部分是index.html
if (currentUrl.endsWith('index.html')) {
    // 处理根目录下的index.html跳转
    const baseUrl = currentUrl.split('/index.html')[0]; // 获取index.html之前的部分
    const redirectUrl = `${baseUrl}/about/ddb_intro.html`; // 构建跳转路径
    window.location.href = redirectUrl; // 执行跳转
}

--></script>
            
        </div></div>
    </div>
</header>
        
        
         
        
        
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="../index.html"><span>主页</span></a></span></li><li><div class="topicref" data-id="about_tutorials"><div class="title"><a href="../tutorials/about_tutorials.html"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div></li><li><div class="topicref" data-id="模块概述"><div class="title"><a href="../tutorials/tu_modules.html">模块</a></div></div></li><li class="active"><div class="topicref" data-id="dolphindb-日志分析工具使用手册"><div class="title"><a href="../tutorials/log_analysis_tool_user_manual.html">DolphinDB 日志分析工具使用手册</a></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="切换搜索突出显示" title="切换搜索突出显示"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="折叠截面" title="折叠截面"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="打印此页" aria-label="打印此页"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem"><div data-tocid="ddb_intro-d9713e87" class="topicref" data-id="ddb_intro" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../about/ddb_intro.html" id="ddb_intro-d9713e87-link">关于DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="chap1_getstarted-d9713e136" class="topicref" data-id="chap1_getstarted" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../getstarted/chap1_getstarted.html" id="chap1_getstarted-d9713e136-link">快速上手</a><div class="wh-tooltip"><p class="shortdesc">如何快速部署 DolphinDB、建库建表、写入和查询数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="sectionddb_deployment-d9713e189" class="topicref" data-id="sectionddb_deployment" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action sectionddb_deployment-d9713e189-link" class="wh-expand-btn"></span><div class="title"><a href="../deploy/deploy_intro.html" id="sectionddb_deployment-d9713e189-link"><span class="keyword label">部署</span></a><div class="wh-tooltip"><p class="shortdesc">如何在不同的场景中部署 DolphinDB</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259" class="topicref" data-id="new_chap_database_manage_new_chap_dbmanage_landing_page" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/cfg/db_intro.html" id="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link"><span class="keyword label">数据库</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 数据库的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_streaming-d9713e3760" class="topicref" data-id="chap7_tutorials_streaming" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_streaming-d9713e3760-link" class="wh-expand-btn"></span><div class="title"><a href="../stream/str_intro.html" id="chap7_tutorials_streaming-d9713e3760-link"><span class="keyword label">流数据</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 流数据引擎及流数据计算的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e7513" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e7513-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/db_oper/import_data.html" id="tocId-d9713e7513-link">数据迁移</a><div class="wh-tooltip"><p class="shortdesc">如何从不同数据源向 DolphinDB 迁移数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_system_management-d9713e7940" class="topicref" data-id="chap7_tutorials_system_management" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_system_management-d9713e7940-link" class="wh-expand-btn"></span><div class="title"><a href="../sys_man/om_intro.html" id="chap7_tutorials_system_management-d9713e7940-link"><span class="keyword label">系统运维</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 的系统运维功能及方法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="troubleshooting-d9713e8780" class="topicref" data-id="troubleshooting" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action troubleshooting-d9713e8780-link" class="wh-expand-btn"></span><div class="title"><a href="../error_codes/troubleshooting.html" id="troubleshooting-d9713e8780-link">故障排查</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="about_language_resources-d9713e20911" class="topicref" data-id="about_language_resources" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action about_language_resources-d9713e20911-link" class="wh-expand-btn"></span><div class="title"><a href="../progr/progr_intro.html" id="about_language_resources-d9713e20911-link"><span class="keyword label">编程语言</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 编程基本概念与方法、SQL 在 DolphinDB 的应用</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="functions_references-d9713e30925" class="topicref" data-id="functions_references" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action functions_references-d9713e30925-link" class="wh-expand-btn"></span><div class="title"><a href="../funcs/funcs_intro.html" id="functions_references-d9713e30925-link"><span class="keyword label">函数参考</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 函数分类、语法、详解及示例</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="api_protocol-d9713e94064" class="topicref" data-id="api_protocol" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action api_protocol-d9713e94064-link" class="wh-expand-btn"></span><div class="title"><a href="../api/connapi_intro.html" id="api_protocol-d9713e94064-link"><span class="keyword label">连接器 &amp; API</span></a><div class="wh-tooltip"><p class="shortdesc">面向不同编程语言的 DolphinDB API 及连接器，相关协议和用法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap6_plugin-d9713e94210" class="topicref" data-id="chap6_plugin" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap6_plugin-d9713e94210-link" class="wh-expand-btn"></span><div class="title"><a href="../plugins/plg_intro.html" id="chap6_plugin-d9713e94210-link"><span class="keyword label">插件</span></a><div class="wh-tooltip"><p class="shortdesc">多个应用场景的插件使用说明和插件开发指导</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="third_party-d9713e97904" class="topicref" data-id="third_party" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action third_party-d9713e97904-link" class="wh-expand-btn"></span><div class="title"><a href="../third_party.html" id="third_party-d9713e97904-link">第三方工具</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="about_tutorials-d9713e98227" class="topicref" data-id="about_tutorials" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action about_tutorials-d9713e98227-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/about_tutorials.html" id="about_tutorials-d9713e98227-link"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98280" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98280-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/new_users_finance.html" id="tocId-d9713e98280-link">新用户入门</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98327" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98327-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/database.html" id="tocId-d9713e98327-link">数据库</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e99111" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e99111-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/std_sql_ddb.html" id="tocId-d9713e99111-link">编程</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100448" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100448-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming-real-time-correlation-processing_2.html" id="tocId-d9713e100448-link">流数据</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100955" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100955-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/scheduledJob_2.html" id="tocId-d9713e100955-link">系统运维</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="模块概述-d9713e101923" class="topicref" data-id="模块概述" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action 模块概述-d9713e101923-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/tu_modules.html" id="模块概述-d9713e101923-link">模块</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="dolphindb-脚本工程化管理模块代码版本与权限管理-d9713e101969" class="topicref" data-id="dolphindb-脚本工程化管理模块代码版本与权限管理" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/module_code_versioning_and_rights_management.html" id="dolphindb-脚本工程化管理模块代码版本与权限管理-d9713e101969-link">DolphinDB 脚本工程化管理：模块代码版本与权限管理</a></div></div></li><li role="treeitem"><div data-tocid="easynsq-实时行情数据接入功能模块-d9713e102015" class="topicref" data-id="easynsq-实时行情数据接入功能模块" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../modules/easyNSQ/easynsq_2.html" id="easynsq-实时行情数据接入功能模块-d9713e102015-link">easyNSQ 实时行情数据接入功能模块</a></div></div></li><li role="treeitem"><div data-tocid="easytldataimport-通联历史数据自动化导入功能模块-d9713e102061" class="topicref" data-id="easytldataimport-通联历史数据自动化导入功能模块" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../modules/easyTLDataImport/easytl_data_import.html" id="easytldataimport-通联历史数据自动化导入功能模块-d9713e102061-link">easyTLDataImport 通联历史数据自动化导入功能模块</a></div></div></li><li role="treeitem"><div data-tocid="mytt-指标库-d9713e102107" class="topicref" data-id="mytt-指标库" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../modules/mytt/mytt.html" id="mytt-指标库-d9713e102107-link">MyTT 指标库</a></div></div></li><li role="treeitem"><div data-tocid="ops-运维函数库-d9713e102153" class="topicref" data-id="ops-运维函数库" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../modules/ops/ops.html" id="ops-运维函数库-d9713e102153-link">ops 运维函数库</a></div></div></li><li role="treeitem"><div data-tocid="worldquant-101-alpha-因子指标库-d9713e102199" class="topicref" data-id="worldquant-101-alpha-因子指标库" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../modules/wq101alpha/wq101alpha.html" id="worldquant-101-alpha-因子指标库-d9713e102199-link">WorldQuant 101 Alpha 因子指标库</a></div></div></li><li role="treeitem"><div data-tocid="国泰君安-191-alpha-因子库-d9713e102245" class="topicref" data-id="国泰君安-191-alpha-因子库" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../modules/gtja191Alpha/191alpha.html" id="国泰君安-191-alpha-因子库-d9713e102245-link">国泰君安 191 Alpha 因子库</a></div></div></li><li role="treeitem"><div data-tocid="基于-dolphindb-的-barra-多因子风险模型实践-d9713e102291" class="topicref" data-id="基于-dolphindb-的-barra-多因子风险模型实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/barra_multi_factor_risk_model.html" id="基于-dolphindb-的-barra-多因子风险模型实践-d9713e102291-link">基于 DolphinDB 的 Barra 多因子风险模型实践</a></div></div></li><li role="treeitem"><div data-tocid="技术分析technical-analysis指标库-d9713e102337" class="topicref" data-id="技术分析technical-analysis指标库" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../modules/ta/ta.html" id="技术分析technical-analysis指标库-d9713e102337-link">技术分析（Technical Analysis）指标库</a></div></div></li><li role="treeitem"><div data-tocid="交易日历-d9713e102383" class="topicref" data-id="交易日历" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../modules/MarketHoliday/mkt_calendar.html" id="交易日历-d9713e102383-link">交易日历</a></div></div></li><li role="treeitem"><div data-tocid="金融-mock-数据生成模块-d9713e102430" class="topicref" data-id="金融-mock-数据生成模块" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/financial_mock_data_generation_module.html" id="金融-mock-数据生成模块-d9713e102430-link">金融 Mock 数据生成模块</a></div></div></li><li role="treeitem" class="active"><div data-tocid="dolphindb-日志分析工具使用手册-d9713e102476" class="topicref" data-id="dolphindb-日志分析工具使用手册" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/log_analysis_tool_user_manual.html" id="dolphindb-日志分析工具使用手册-d9713e102476-link">DolphinDB 日志分析工具使用手册</a></div></div></li><li role="treeitem"><div data-tocid="ImportTLData_toturial-d9713e102522" class="topicref" data-id="ImportTLData_toturial" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/ImportTLData_toturial.html" id="ImportTLData_toturial-d9713e102522-link">通联历史数据导入教程</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e102568" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e102568-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/OHLC_2.html" id="tocId-d9713e102568-link">金融场景案例</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e104827" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e104827-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_engine_anomaly_alerts_2.html" id="tocId-d9713e104827-link">物联网场景案例</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105795" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105795-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/dolphindb_tensor_libtorch_tutorial.html" id="tocId-d9713e105795-link">机器学习</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105842" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105842-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/api_performance.html" id="tocId-d9713e105842-link">测试报告</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105982" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105982-link" class="wh-expand-btn"></span><div class="title"><a href="../rn/server/3_00_2.html" id="tocId-d9713e105982-link">版本说明</a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 版本发布历史</p></div></div></div></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-7 col-md-9 col-sm-12" id="wh_topic_body">
                        <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        <button id="wh_close_topic_toc_button" class="close-toc-button d-none" aria-label="Toggle topic table of content" aria-controls="wh_topic_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        <div class=" wh_topic_content body "><main role="main"><article class="- topic/topic topic" role="article" aria-labelledby="ariaid-title1"><h1 class="- topic/title title topictitle1" id="ariaid-title1">DolphinDB 日志分析工具使用手册</h1><div class="- topic/body body"><p class="- topic/p p">当 DolphinDB 出现问题、亟需深入日志排查时，诸多繁琐操作容易影响排查效率。用户不仅需要手动定位问题时段对应的日志文件与关键片段，还需跨多个节点审查同时期的日志记录。这些过程不仅冗长复杂，还容易出错，更可能导致用户遗漏部分通用分析步骤，进而延误问题解决。此外，部分用户希望实现日志的实时监控，以便在特定模式出现时即刻通过邮件获得告警通知。
为解决这一系列挑战，DolphinDB 精心打造了日志分析工具——一款专为提升日志分析效率而设计的模块。
该工具亮点纷呈，能够批量处理指定文件夹内的日志数据，精准读取用户指定时间范围内的所有日志条目，生成相关报表，支持灵活定制报告内容，满足多样化分析需求。
此外，该工具还实现了对节点日志的实时监控，从而确保用户能在第一时间掌握最新日志动态。用户可以配置白名单与黑名单机制，以过滤无关日志，进而聚焦核心信息；还可以启用邮件告警功能，并且自定义邮件内容。
最后，DolphinDB 日志分析工具还支持用户自定义日志解析内容，以此享受全面、便捷且高效的日志分析解决方案。
本文将从具体使用角度，详细介绍该工具的依赖、接口和使用案例。</p></div><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title2" id="1-配置要求"><h2 class="- topic/title title topictitle2" id="ariaid-title2">1. 配置要求</h2><div class="- topic/body body"><p class="- topic/p p">2.00.10 或以上版本 DolphinDB Linux 版。本文测试通过的版本包括 2.00.10, 2.00.11, 2.00.12, 2.00.13, 2.00.14, 3.00.0, 3.00.1。</p><p class="- topic/p p">在数据节点或计算节点：</p><ul class="- topic/ul ul"><li class="- topic/li li">配置 <a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html?hl=persistencedir" target="_blank" rel="external noopener">persistenceDir</a> 用于设置共享流数据表的持久化路径。</li><li class="- topic/li li">安装 HttpClient 插件，用于发送 HTTP 请求或者邮件。最低版本要求：3.00.1.5, 2.00.13.5, 3.00.0.9, 2.00.12.12, 2.00.11.13, 2.00.10.16。</li></ul></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title3" id="2-快速上手"><h2 class="- topic/title title topictitle2" id="ariaid-title3">2. 快速上手</h2><div class="- topic/body body"><p class="- topic/p p">安装附件模块源码文件到 <em class="+ topic/ph hi-d/i ph i">server/modules</em> 目录下，在数据节点或计算节点运行。</p></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title4" id="21-批量分析指定文件夹下的日志"><h3 class="- topic/title title topictitle3" id="ariaid-title4">2.1 批量分析指定文件夹下的日志</h3><div class="- topic/body body"><p class="- topic/p p">该 demo 实现批量读取目录 <em class="+ topic/ph hi-d/i ph i">/dolphindb/server/log</em> 下的日志到原始日志流表 originLogLines，日志时间范围为 1 小时前到当前时间戳，订阅并解析日志内容输出到解析结果流表 logAnalysisResult：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>clearCachedModules()
go
use DDBLogAnalyser::config
use DDBLogAnalyser::logReader
use DDBLogAnalyser::logParser::logParser
use DDBLogAnalyser::reportGenerator::reportGenerator
go

clearEnv()
go
batchModeVersion = version() // 与 logDir 下的日志对应的 DolphinDB 版本相同
config = getExampleConfig(batchModeVersion)
config["logDir"] = "/dolphindb/server/log"
config["startTime"] = temporalAdd(now(), -1H) // 日志开始时间为当前时间戳 - 1H
config["endTime"] = now() // 日志结束时间当前时间戳
initConfig(config)
go

readLog()
parseLog()
generateReport()</code></pre><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 1</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图 2-1 logAnalysisResult 流表部分数据截图</span></figcaption><img class="- topic/image image" src="images/log_analysis_tool_user_manual/2_1.png"/><br/></figure><p class="- topic/p p">全部解析完毕后生成多份报表，包括 errors 所有错误信息表、warnings 所有警告信息表、longestTransactionsReport 最长耗时事务表、transactionAuditReport 所有事务 DDL 日志表等：</p><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 2</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图 2-2 结果报表部分截图</span></figcaption><img class="- topic/image image" src="images/log_analysis_tool_user_manual/2_2.png"/><br/></figure></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title5" id="22--实时监控指定集群的最新日志"><h3 class="- topic/title title topictitle3" id="ariaid-title5">2.2  实时监控指定集群的最新日志</h3><div class="- topic/body body"><p class="- topic/p p">运行脚本时要求指定集群所有节点都在线，运行脚本后只要求指定集群控制节点和代理节点在线即可监控所有节点日志。</p><p class="- topic/p p">该 demo 实现流式读取指定远程集群的所有节点的日志到原始日志流表 originLogLines，订阅并解析日志内容输出到解析结果流表 logAnalysisResult：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>try { loadPlugin("httpClient") } catch(err) { print(err) }
go
clearCachedModules()
go
use DDBLogAnalyser::config
use DDBLogAnalyser::logReader
use DDBLogAnalyser::logParser::logParser
use DDBLogAnalyser::reportGenerator::reportGenerator
use DDBLogAnalyser::alertGenerator
go

clearEnv()
go
config = getExampleConfig()
config["remoteControllerSites"] = [
  "192.168.100.43:7600",
  "192.168.100.44:7600",
  "192.168.100.45:7600"
] // 远程集群的所有控制节点的 IP:端口号
config["remoteUsername"] = "admin" // 远程集群的管理员账户
config["remotePassword"] = "123456" // 远程集群的管理员密码
alertConfig = dict(STRING, ANY)
alertConfig["userId"] = "xxx@xxx.com" // 告警发送邮箱账号，必须开启 SMTP
alertConfig["pwd"] = "xxxxxx" // 告警发送邮箱密码
alertConfig["recipient"] = "xxx@xxx.com" // 告警接收人邮箱
alertConfig["logLevelFilter"] = ["DEBUG"] // 按日志等级过滤，排除 DEBUG 日志
alertConfig["whitelist"] = ["%whitelist error%"] // 用 like 和日志内容匹配，过滤需要的日志，优先生效。不需要白名单时不配置。
alertConfig["blacklist"] = ["%blacklist error%"] // 用 like 和日志内容匹配，过滤不要的日志，在白名单后生效。不需要黑名单时不配置。
config["alertConfig"] = alertConfig
initConfig(config)
go

readLog()
parseLog()
initAlertGenerator()</code></pre><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 3</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图 2-3 logAnalysisResult 流表部分数据截图</span></figcaption><img class="- topic/image image" src="images/log_analysis_tool_user_manual/2.3.png"/><br/></figure><p class="- topic/p p">对内容含 “whitelist error“ 的日志发送邮件告警（需要修改 config 字典里配置的邮箱；需要邮箱支持 SMTP）：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>writeLog("whitelist error")</code></pre><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 4</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图 2-4 告警邮件</span></figcaption><img class="- topic/image image" src="images/log_analysis_tool_user_manual/2.4.png"/><br/></figure></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title6" id="3-配置项"><h2 class="- topic/title title topictitle2" id="ariaid-title6">3. 配置项</h2><div class="- topic/body body"><p class="- topic/p p">通用配置项：</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead">
  <tr class="- topic/row">  
    <th class="- topic/entry entry colsep-0 rowsep-0" id="3-配置项__entry__1">配置项</th>  
    <th class="- topic/entry entry colsep-0 rowsep-0" id="3-配置项__entry__2">类型</th>  
    <th class="- topic/entry entry colsep-0 rowsep-0" id="3-配置项__entry__3">说明</th>  
  </tr>  
 </thead><tbody class="- topic/tbody tbody"><tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__1">mode</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__2">正整数</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__3"><ul class="- topic/ul ul"><li class="- topic/li li">0：为流处理模式，实时读取集群最新日志并解析。</li><li class="- topic/li li">1：为批处理模式，批量解析 logDir 配置项下的日志文件。</li></ul></td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__1">resultType</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__2">字符串</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__3"><ul class="- topic/ul ul"><li class="- topic/li li">sharedTable：<ul class="- topic/ul ul"><li class="- topic/li li">批处理时，解析结果表为共享内存表，解析完毕后会对该表按日志时间排序。</li><li class="- topic/li li">流处理时，解析结果表为共享流数据表。</li></ul></li><li class="- topic/li li">dfs：批处理和流处理可用，会额外增加一个订阅到分布式表。</li></ul></td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__1">resultDbName</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__2">字符串</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__3">结果库名。 resultType 为 dfs 时使用。</td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__1">resultTbName</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__2">字符串</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__3">结果表名。</td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__1">originLogLinesTbName</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__2">字符串</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__3">读取原始日志的中间流表的表名。</td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__1">logParserProjects</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__2">字符串数组</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__3">解析日志项目，元素值必须为 logParser/projects 下文件名，详见自定义解析项目一节。<p class="- topic/p p">为空时调用所有解析项目。</p></td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__1">reportGeneratorProjects</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__2">字符串数组</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__3">生成报告项目，元素值必须为 reportGenerator/projects 下文件名，详见自定义报告项目一节。<p class="- topic/p p">为空时调用所有报告项目。</p></td>  
  </tr>  
</tbody></table></div><p class="- topic/p p">批处理配置项：</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead">
  <tr class="- topic/row">  
    <th class="- topic/entry entry colsep-0 rowsep-0" id="3-配置项__entry__25">配置项</th>  
    <th class="- topic/entry entry colsep-0 rowsep-0" id="3-配置项__entry__26">类型</th>  
    <th class="- topic/entry entry colsep-0 rowsep-0" id="3-配置项__entry__27">说明</th>  
  </tr> 
  </thead><tbody class="- topic/tbody tbody"><tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__25">version</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__26">字符串</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__27">日志对应的 DolphinDB 版本号，需要<strong class="+ topic/ph hi-d/b ph b">至少填到第三级版本</strong>，例如 2.00.12。<p class="- topic/p p">注意：如果需要分析 DolphinDB 升级第三级版本前后的日志（例如从 2.00.11.x 升级到 2.00.12.x），需要使用 startTime 和 endTime 配置项分段提交升级前后的 version 的 readLog 任务；否则可能出现因为 version 和日志实际版本不匹配导致部分日志解析失败的问题。</p></td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__25">startTime</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__26">时间类型</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__27">从开始时间（或之前一小段）开始读取。</td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__25">endTime</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__26">时间类型</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__27">到结束时间（或之后一小段）结束读取。</td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__25">logDir</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__26">字符串</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__27">路径文件夹，<strong class="+ topic/ph hi-d/b ph b">要求路径下只包含 DolphinDB 日志文件，且必须使用原始日志文件名。</strong><p class="- topic/p p">日志类型识别规则：</p><ul class="- topic/ul ul"><li class="- topic/li li">{时间戳}dolphindb.log：single，单节点日志。</li><li class="- topic/li li">{时间戳}controller.log：controller，控制节点日志。</li><li class="- topic/li li">{时间戳} {节点别名}.log：datanode 数据节点日志。注意 computenode 计算节点也会被识别为数据节点，如果需要识别计算节点，需要配置 <em class="+ topic/ph hi-d/i ph i">logTypes</em> 配置项。</li><li class="- topic/li li">{时间戳}agent.log：由于 agent 与业务无关，日志会被过滤。</li></ul></td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__25">logTypes</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__26">字典</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__27">用于自定义日志对应的节点类型，例如：{“node2”： “计算节点”}<p class="- topic/p p">会识别{时间戳}node2.log 的日志的节点类型为 computenode。</p></td>  
  </tr>  
</tbody></table></div><p class="- topic/p p">流处理配置项：</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="3-配置项__entry__43">配置项</th><th class="- topic/entry entry colsep-0 rowsep-0" id="3-配置项__entry__44">类型</th><th class="- topic/entry entry colsep-0 rowsep-0" id="3-配置项__entry__45">说明</th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__43">remoteControllerSites</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__44">字符串数组</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__45">远程集群的所有控制节点的 IP:端口号。若为单节点，为一个元素的数组，元素值为单节点的 IP:端口号。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__43">remoteUsername</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__44">字符串</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__45">若监控本地集群（即日志分析工具所在的集群），无需配置。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__43">remotePassword</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__44">字符串</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__45">远程集群的管理员账户。必须有管理员权限。若监控本地集群（即日志分析工具所在的集群），无需配置。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__43">getLogDuration</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__44">非负数</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__45">轮询获取 DolphinDB 日志的时间间隔，默认为 3000 ms。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__43">alertConfig</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__44">STRING-ANY 字典</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__45">详见下文 <em class="+ topic/ph hi-d/i ph i">alertConfig</em> 配置项。</td></tr></tbody></table></div><p class="- topic/p p">alertConfig 配置项：</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead">
  <tr class="- topic/row">  
    <th class="- topic/entry entry colsep-0 rowsep-0" id="3-配置项__entry__61">配置项</th>  
    <th class="- topic/entry entry colsep-0 rowsep-0" id="3-配置项__entry__62">类型</th>  
    <th class="- topic/entry entry colsep-0 rowsep-0" id="3-配置项__entry__63">说明</th>  
  </tr>
  </thead><tbody class="- topic/tbody tbody"><tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__61">userId</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__62">字符串</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__63">告警发送邮箱账号。 <strong class="+ topic/ph hi-d/b ph b">注意需要开启 SMTP 协议。</strong></td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__61">pwd</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__62">字符串</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__63">告警发送邮箱密码</td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__61">recipient</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__62">字符串</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__63">告警接收人邮箱</td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__61">logLevelFilter</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__62">字符串数组</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__63">按日志等级过滤</td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__61">whitelist</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__62">字符串数组</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__63">用 like 和日志内容匹配，过滤需要的日志，优先生效。 不需要白名单时不配置。<p class="- topic/p p">例如 ["%whitelist error%"] 会匹配含 “whitelist error” 的日志。</p></td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__61">blacklist</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__62">字符串数组</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__63">用 like 和日志内容匹配，过滤不要的日志，在白名单后生效。 不需要黑名单时不配置。<p class="- topic/p p">例如 ["%blacklist error%"] 会排除含 “blacklist error” 的日志。</p></td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__61">generateEmailFunc</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__62">函数句柄</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__63">自定义邮件发送内容的函数。<p class="- topic/p p">入参：</p><ul class="- topic/ul ul"><li class="- topic/li li">alertMsg：触发告警的日志的信息表，结构与 resultTbName 配置项的表相同。</li></ul>返回值：<p class="- topic/p p">一个元组，第一个元素为邮件标题字符串，第二个元素为邮件正文字符串。</p><p class="- topic/p p">例如：</p><span class="undefined_element">def customGenerateEmailFunc(alertMsg) {
    return “subject“, “body“
}
alertConfig["generateEmailFunc"] = customGenerateEmailFunc</span></td>
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__61">sendEmailInterval</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__62">正整数</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__63">发送邮件的最小时间间隔，单位毫秒，不配置或配置为 0 时表示有告警日志时立即发送邮件。</td>  
  </tr>
    <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__61">enableStdSMTPMsg</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__62">布尔值</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="3-配置项__entry__63">是否使用标准 SMTP 格式消息。<p class="- topic/p p"></p></td>  
  </tr>   
</tbody></table></div></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title7" id="4-接口"><h2 class="- topic/title title topictitle2" id="ariaid-title7">4. 接口</h2><div class="- topic/body body"><p class="- topic/p p">本章介绍日志分析工具的用户接口。</p></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title8" id="41-initconfig"><h3 class="- topic/title title topictitle3" id="ariaid-title8">4.1 initConfig</h3><div class="- topic/body body"><p class="- topic/p p">参数：</p><ul class="- topic/ul ul"><li class="- topic/li li">config：字典，定义详见《配置项》一节。</li></ul><p class="- topic/p p">初始化一个名为 logAnalyserConfig 的共享字典，作为工具的全局配置。 <strong class="+ topic/ph hi-d/b ph b">需要首先运行该接口。</strong></p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">无法重复运行该接口。</strong> 需要修改配置时，可以直接修改共享字典的指定键的值（例如 <code class="+ topic/ph pr-d/codeph ph codeph">logAnalyserConfig["version"] = "2.00.12"</code>），或者 <code class="+ topic/ph pr-d/codeph ph codeph">undef("logAnalyserConfig", SHARED)</code> 该共享字典后再重新调用 <code class="+ topic/ph pr-d/codeph ph codeph">initConfig</code> 接口。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title9" id="42-readlog"><h3 class="- topic/title title topictitle3" id="ariaid-title9">4.2 readLog</h3><div class="- topic/body body"><p class="- topic/p p">读取日志。根据全局配置字典配置的读取模式，读取日志到 <em class="+ topic/ph hi-d/i ph i">originLogLinesTbName</em> 配置项指定名称的流表。批处理模式读取 <code class="+ topic/ph pr-d/codeph ph codeph">logDir</code> 配置项指定的文件夹下的日志到流表，流处理模式自动读取集群所有节点的日志到流表。</p><p class="- topic/p p">结果流表如下：</p><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 5</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图4-1 告警邮件</span></figcaption><img class="- topic/image image" src="images/log_analysis_tool_user_manual/4_1.png"/><br/></figure><p class="- topic/p p">字段说明：</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead">
  <tr class="- topic/row">  
    <th class="- topic/entry entry colsep-0 rowsep-0" id="42-readlog__entry__1">字段名</th>  
    <th class="- topic/entry entry colsep-0 rowsep-0" id="42-readlog__entry__2">类型</th>  
    <th class="- topic/entry entry colsep-0 rowsep-0" id="42-readlog__entry__3">说明</th>
    </tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="42-readlog__entry__1">nodeAlias</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="42-readlog__entry__2">STRING</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="42-readlog__entry__3"><ul class="- topic/ul ul"><li class="- topic/li li">批处理：日志文件名（不含时间戳和后缀）</li><li class="- topic/li li">流处理： <code class="+ topic/ph pr-d/codeph ph codeph">getNodeAlias()</code> 返回的节点别名</li></ul></td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="42-readlog__entry__1">logFilename</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="42-readlog__entry__2">STRING</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="42-readlog__entry__3">日志文件所在路径</td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="42-readlog__entry__1">logType</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="42-readlog__entry__2">SYMBOL</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="42-readlog__entry__3">日志类型：<ul class="- topic/ul ul"><li class="- topic/li li">single：单节点日志</li><li class="- topic/li li">controller：controller 日志</li><li class="- topic/li li">datanode：datanode 日志</li><li class="- topic/li li">computenode：computenode 日志</li></ul></td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="42-readlog__entry__1">content</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="42-readlog__entry__2">BLOB</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="42-readlog__entry__3">原始日志内容</td>  
  </tr>  
</tbody></table></div></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title10" id="43-parselog"><h3 class="- topic/title title topictitle3" id="ariaid-title10">4.3 parseLog</h3><div class="- topic/body body"><p class="- topic/p p">解析读取的日志日志。 订阅 <em class="+ topic/ph hi-d/i ph i">originLogLinesTbName</em> 配置项指定名称的流表，调用全局配置字典配置的解析项目进行解析，然后输出到 <em class="+ topic/ph hi-d/i ph i">resultTbName</em> 指定名称的流表。详见《自定义解析项目》一节。</p><p class="- topic/p p">结果流表如下：</p><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 6</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图4-2 parseLog 结果流表部分截图</span></figcaption>

<img class="- topic/image image" src="images/log_analysis_tool_user_manual/4_2.png"/><br/>
</figure><p class="- topic/p p">字段说明：</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead">
  <tr class="- topic/row">  
    <th class="- topic/entry entry colsep-0 rowsep-0" id="43-parselog__entry__1">字段名</th>  
    <th class="- topic/entry entry colsep-0 rowsep-0" id="43-parselog__entry__2">类型</th>  
    <th class="- topic/entry entry colsep-0 rowsep-0" id="43-parselog__entry__3">说明</th>  
  </tr>
  </thead><tbody class="- topic/tbody tbody"><tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__1">logTime</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__2">NANOTIMESTAMP</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__3">日志时间戳</td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__1">nodeAlias</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__2">STRING</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__3"><ul class="- topic/ul ul"><li class="- topic/li li">批处理：日志文件名（不含时间戳和后缀）</li><li class="- topic/li li">流处理：<span class="undefined_element">getNodeAlias()</span> 返回的节点别名</li></ul></td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__1">logType</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__2">SYMBOL</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__3">日志类型：<ul class="- topic/ul ul"><li class="- topic/li li">single：单节点日志</li><li class="- topic/li li">controller：controller 日志</li><li class="- topic/li li">datanode：datanode 日志</li><li class="- topic/li li">computenode：computenode 日志</li></ul></td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__1">logFilename</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__2">STRING</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__3">日志文件所在路径</td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__1">logLevel</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__2">SYMBOL</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__3">日志等级：<ul class="- topic/ul ul"><li class="- topic/li li">DEBUG</li><li class="- topic/li li">INFO</li><li class="- topic/li li">ERROR</li><li class="- topic/li li">WARNING</li></ul></td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__1">threadId</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__2">STRING</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__3">打日志的线程的 ID</td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__1">contentType</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__2">SYMBOL</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__3">日志类型：<ul class="- topic/ul ul"><li class="- topic/li li">transaction 开头：事务相关</li><li class="- topic/li li">startup 开头：启动相关</li><li class="- topic/li li">shutdown 开头：停止相关</li></ul></td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__1">parsedContent</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__2">BLOB</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__3">解析的日志内容，为 JSON 字符串</td>  
  </tr>  
  <tr class="- topic/row">  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__1">originContent</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__2">BLOB</td>  
    <td class="- topic/entry entry colsep-0 rowsep-0" headers="43-parselog__entry__3">原始日志内容</td>  
  </tr>  
</tbody></table></div></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title11" id="44-generatereport"><h3 class="- topic/title title topictitle3" id="ariaid-title11">4.4 generateReport</h3><div class="- topic/body body"><p class="- topic/p p">根据解析日志结果生成报告表。 批处理模式下使用。 实现为运行 <em class="+ topic/ph hi-d/i ph i">reportGenerator/projects</em> 目录下所有与文件名同名的方法，详见《自定义解析项目》一节。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title12" id="45-initalertgenerator"><h3 class="- topic/title title topictitle3" id="ariaid-title12">4.5 initAlertGenerator</h3><div class="- topic/body body"><p class="- topic/p p">订阅解析结果流表，在触发配置的告警规则时发送邮件到指定邮箱。 流处理模式下使用。 <strong class="+ topic/ph hi-d/b ph b">注意需要邮箱开启 SMTP。</strong> 详见《自定义告警规则和内容》一节。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title13" id="46-clearenv"><h3 class="- topic/title title topictitle3" id="ariaid-title13">4.6 clearEnv</h3><div class="- topic/body body"><p class="- topic/p p">根据全局配置字典的配置项，清理所有相关的流表、订阅和后台任务等，然后清理全局配置字典。</p></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title14" id="5进阶使用"><h2 class="- topic/title title topictitle2" id="ariaid-title14">5.进阶使用</h2><div class="- topic/body body"><p class="- topic/p p">本章介绍日志分析工具的进阶使用，实现自定义的日志分析。</p></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title15" id="51自定义解析项目"><h3 class="- topic/title title topictitle3" id="ariaid-title15">5.1自定义解析项目</h3><div class="- topic/body body"><p class="- topic/p p">logParser 目录结构如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>.
├── logParser.dos
└── projects
    ├── controller
    │   └── parseTransactionsInfo.dos
    └── datanode
        └── parseTransactionsInfo.dos</code></pre><p class="- topic/p p">其中，<em class="+ topic/ph hi-d/i ph i">logParser.dos</em> 包含入口方法 parseLog，该方法运行时，会加载 <em class="+ topic/ph hi-d/i ph i">logParser/projects/controller</em> 和 <em class="+ topic/ph hi-d/i ph i">logParser/projects/datanode</em> 目录下的所有模块文件，并运行与文件名同名的方法。</p><p class="- topic/p p">例如，对解析事务相关日志行的模块 <em class="+ topic/ph hi-d/i ph i">logParser/projects/controller/parseTransactionsInfo.dos</em>，会加载并运行其中定义的方法 <code class="+ topic/ph pr-d/codeph ph codeph">parseTransactionsInfo</code>，入参说明：</p><ul class="- topic/ul ul"><li class="- topic/li li">logTime：日志时间戳</li><li class="- topic/li li">logLevel：日志等级</li><li class="- topic/li li">line：日志行原始内容。 建议指定为 mutable 以提高性能。</li><li class="- topic/li li">s：dropna(s.split(" ")) 的值，用于提取信息。 建议指定为 mutable 以提高性能。</li></ul><p class="- topic/p p">返回值：一个元组。</p><ul class="- topic/ul ul"><li class="- topic/li li">第一个元素为自定义类型字符串。</li><li class="- topic/li li">第二个元素为解析的信息的字典，可自定义字段。</li></ul><p class="- topic/p p">例如：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>module DDBLogAnalyser::logParser::projects::datanode::parseTransactionsInfo

def parseTransactionsInfo(logTime, logLevel, mutable line, mutable s) {
  contentType = "transactionCompleted"
  info = {"completedTime": logTime,"tid": getTid(s),"cid": getCid(s)}
  return (contentType, info)
}</code></pre><div class="- topic/p p"><div class="- topic/note note note note_note"><span class="note__title">注：</span> 如果配置了 <em class="+ topic/ph hi-d/i ph i">logParserProjects</em>，需要添加新增的 “parseTransactionsInfo” 到 <em class="+ topic/ph hi-d/i ph i">logParserProjects</em> 配置项。</div></div></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title16" id="52自定义报告项目"><h3 class="- topic/title title topictitle3" id="ariaid-title16">5.2自定义报告项目</h3><div class="- topic/body body"><p class="- topic/p p">logParser 目录结构如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>.
├── projects
│   └── generateTransactionsReport.dos
└── reportGenerator.dos</code></pre><p class="- topic/p p">其中，<em class="+ topic/ph hi-d/i ph i">reportGenerator.dos</em> 包含入口方法 <code class="+ topic/ph pr-d/codeph ph codeph">generateReport</code>，该方法运行时，会加载 <em class="+ topic/ph hi-d/i ph i">reportGenerator/projects</em> 目录下的所有模块文件，并运行与文件名同名的方法。</p><p class="- topic/p p">例如，对生成事务相关报表的模块 <em class="+ topic/ph hi-d/i ph i">reportGenerator/projects/generateTransactionsReport.dos</em>，会加载并运行其中定义的方法 <code class="+ topic/ph pr-d/codeph ph codeph">generateTransactionsReport</code>，无入参，无返回值。目前设计为自行在方法内 share 报表。</p><p class="- topic/p p">例如：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>def generateTransactionsReport() {
    rolledBackTransactions = generateRolledBackTransactionsReport()
    if (!isVoid(rolledBackTransactions)) {
        share(rolledBackTransactions, "rolledBackTransactions")
    }
}</code></pre><div class="- topic/p p"><div class="- topic/note note note note_note"><span class="note__title">注：</span> 如果配置了 <em class="+ topic/ph hi-d/i ph i">reportGeneratorProjects</em>，需要添加新增的 “generateTransactionsReport” 到 <em class="+ topic/ph hi-d/i ph i">reportGeneratorProjects</em> 配置项。</div></div></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title17" id="53自定义告警规则和内容"><h3 class="- topic/title title topictitle3" id="ariaid-title17">5.3自定义告警规则和内容</h3><div class="- topic/body body"><p class="- topic/p p">主要通过 <em class="+ topic/ph hi-d/i ph i">alertConfig</em> 配置项来配置告警相关规则，支持黑名单和白名单模式，支持自定义告警邮件标题和内容。 具体见配置项一节的 <em class="+ topic/ph hi-d/i ph i">alertConfig</em> 说明。</p><p class="- topic/p p">例如，通过自定义告警邮件内容包含"custom" 字符串：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>def customGenerateEmailFunc(alertMsg) {
    h = "custom alert!\n"
    ret = exec string(originContent) from alertMsg
    ret = concat(ret, "\n")
    subject = "Custom alert from DolphinDB log analyser!"
    body = h + ret
    return (subject, body)
}

alertConfig = dict(STRING, ANY)
alertConfig["userId"] = "xxx@xxx.com" // 告警发送邮箱账号
alertConfig["pwd"] = "xxxxxx" // 告警发送邮箱密码
alertConfig["recipient"] = "xxx@xxx.com" // 告警接收人邮箱
alertConfig["logLevelFilter"] = ["DEBUG"] // 按日志等级过滤
alertConfig["whitelist"] = ["%whitelist error%"] // 用 like 和日志内容匹配，过滤需要的日志，优先生效
alertConfig["blacklist"] = ["%blacklist error%"] // 用 like 和日志内容匹配，过滤不要的日志，在白名单后生效
alertConfig["generateEmailBody"] = customGenerateEmailBody
config["alertConfig"] = alertConfig</code></pre><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 7</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图 5-1 自定义告警邮件</span></figcaption><img class="- topic/image image" src="images/log_analysis_tool_user_manual/5_1.png"/><br/></figure></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title18" id="6日志分析案例"><h2 class="- topic/title title topictitle2" id="ariaid-title18">6.日志分析案例</h2><div class="- topic/body body"><p class="- topic/p p">本章介绍日志分析的常见案例。</p></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title19" id="61排查事物回滚的原因"><h3 class="- topic/title title topictitle3" id="ariaid-title19">6.1排查事物回滚的原因</h3><div class="- topic/body body"><p class="- topic/p p">当某个库表由于事务回滚而出现数据缺失时，需要排查事务回滚的具体原因，使用命令行工具逐个查找回滚事务相关日志效率比较低且可读性较差。 参照 2.1 节执行批处理流程，查看生成的回滚事务报告表 rollbackTransactionsReport 如下：</p><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 8</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图 6-1 回滚事务报告表部分截图</span></figcaption><img class="- topic/image image" src="images/log_analysis_tool_user_manual/6_1.png"/><br/></figure><p class="- topic/p p">可见有 6 个事务回滚。 编写如下脚本遍历查询包含回滚事务 ID 的 ERROR 和 WARNING 日志并打印：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>tids = exec tid from rolledBackTransactions
for (tid in tids) {
    pattern = "%" + tid + "%"
    info = select * from errors where originContent like pattern
    if(info.size() &gt; 0)
        print("\nTransaction " + tid + " relative errors:\n", info["originContent"])
    info = select * from warnings where originContent like pattern
    if(info.size() &gt; 0)
        print("\nTransaction " + tid + " relative warnings:", info["originContent"])
}</code></pre><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 9</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图 6-2 回滚事务报告表部分截图</span></figcaption><img class="- topic/image image" src="images/log_analysis_tool_user_manual/6_2.png"/><br/></figure><p class="- topic/p p">可见对 ID 为 53664920 的事务，有一个 WARNING 日志表明回滚原因可能为磁盘满。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title20" id="62排查对分布式库表的写入数据量"><h3 class="- topic/title title topictitle3" id="ariaid-title20">6.2排查对分布式库表的写入数据量</h3><div class="- topic/body body"><p class="- topic/p p">例如对分布式表执行每日导入数据的任务，如果用户反馈某天导入的数据量不合预期，或者导入时间过长，可以使用日志分析工具分析对分布式表的写入数据量。参照 2.1 节执行批处理流程，生成事务操作报告表 transactionAuditReport 和事务信息日志 <code class="+ topic/ph pr-d/codeph ph codeph">transactionMetricsReport</code>，执行如下查询统计每天每小时的对指定库的 DDL 操作数：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>select count(*) as DDLCount from transactionAuditReport where dbName 
	= "dfs://TL_Level2_merged" group by dbName, date(logTime), hour(logTime) 
	as date order by DDLCount desc</code></pre><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 10</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图 6-3 统计每天每小时的对指定库的 DDL 操作数</span></figcaption><img class="- topic/image image" src="images/log_analysis_tool_user_manual/6_3.png"/><br/></figure><p class="- topic/p p">可见 16, 17 日对库 dfs://TL_Level2_merged 的 DDL 操作数远高于 18 日。</p><p class="- topic/p p">执行如下查询统计每天每小时的对指定库的写入分区数：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>select sum(partitionCount) from transactionMetricsReport left join transactionAuditReport on 
	transactionMetricsReport.tid == transactionAuditReport.tid where dbName = 
	"dfs://TL_Level2_merged" group by dbName, date(startTime) as date, 
	hour(startTime) as hour order by sum_partitionCount desc</code></pre><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 11</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图 6-4 统计每天每小时的对指定库的写入分区数</span></figcaption><img class="- topic/image image" src="images/log_analysis_tool_user_manual/6_4.png"/><br/></figure><p class="- topic/p p">可见 16, 17 日对库 dfs://TL_Level2_merged 的写入分区数远高于 18 日。</p><p class="- topic/p p">综上可以确定具体的业务逻辑，是16, 17 日重复提交了一些导入任务，导致并发写入变慢。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title21" id="63排查对分布式库表的误操作"><h3 class="- topic/title title topictitle3" id="ariaid-title21">6.3排查对分布式库表的误操作</h3><div class="- topic/body body"><div class="- topic/p p"><div class="- topic/note note note note_note"><span class="note__title">注：</span> 推荐配置 <a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html#topic_byd_23k_gcc" target="_blank" rel="external noopener">DDL 操作日志</a>配置项来查看对分布式库表的所有事务操作，本节适用于未开启该配置项或 DDL 操作日志已被自动删除时分析。</div></div><p class="- topic/p p">用户可能对分布式库表存在误操作，例如不小心执行了两遍 <code class="+ topic/ph pr-d/codeph ph codeph">append!</code> 写入重复数据，或者不小心执行了 <code class="+ topic/ph pr-d/codeph ph codeph">delete</code> SQL 导致数据丢失。以排查重复写入为例，参照 2.1 节执行批处理流程，生成事务操作报告表 transactionAuditReport 如下：</p><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 12</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图 6-5 事务操作报告表部分截图</span></figcaption><img class="- topic/image image" src="images/log_analysis_tool_user_manual/6_5.png"/><br/></figure><p class="- topic/p p">该表记录了所有用户对库表的写入事务操作记录，注意到存在两条对 dfs://rangedb_tradedata 库的 Trades 表的 operation 为 savePartitionedTable 写入分布式表的记录，且 logTime 日志时间非常接近。 可结合 userName 用户名、remoteIP 客户端 IP 联系写入的用户，结合业务进一步确认是否为用户误操作导致重复写入。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title22" id="64排查耗时过长的事务"><h3 class="- topic/title title topictitle3" id="ariaid-title22">6.4排查耗时过长的事务</h3><div class="- topic/body body"><p class="- topic/p p">当客户写入性能出现问题时，一般需要排查耗时过长的事务以及其写入的库表，然后结合具体业务代码分析。 参照 <a class="- topic/xref xref" href="#2.1%E6%89%B9%E9%87%8F%E5%88%86%E6%9E%90%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E7%9A%84%E6%97%A5%E5%BF%97">2.1 节</a>执行批处理流程，生成最长耗时事务报告表 longestTransactionsReport 如下：</p><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 13</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图 6-6 最长耗时事务报告表部分截图</span></figcaption><img class="- topic/image image" src="images/log_analysis_tool_user_manual/6_6.png"/><br/></figure><p class="- topic/p p">注意到事务 ID 为 30710128 的事务耗时最长，此时再查询 transactionAuditReport 表获得操作日志：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>select * from transactionAuditReport where tid == 30710128</code></pre><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 14</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图 6-7 事务操作报告表部分截图</span></figcaption><img class="- topic/image image" src="images/log_analysis_tool_user_manual/6_7.png"/><br/></figure><p class="- topic/p p">可见该事务 contentType 为 savePartitionedTable 即写入事务，此时可结合 logTime 日志时间、userName 用户名、remoteIP 客户端 IP 联系写入的用户，结合业务进一步确认写入方式和数据量是否合理。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title23" id="65排查节点启动失败停止失败和宕机的原因"><h3 class="- topic/title title topictitle3" id="ariaid-title23">6.5排查节点启动失败、停止失败和宕机的原因</h3><div class="- topic/body body"><p class="- topic/p p">当节点启动失败、停止失败或宕机时，一般需要排查问题发生前日志是否有 ERROR 或 WARNING。 使用批处理模式分析日志得到节点启动和停止报表 startupAndShutdownReport 如下：</p><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 15</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图 6-8 节点启动和停止报表部分截图</span></figcaption><img class="- topic/image image" src="images/log_analysis_tool_user_manual/6_8.png"/><br/></figure><p class="- topic/p p">其中 contentType 含义：</p><ul class="- topic/ul ul"><li class="- topic/li li">startupInitializing：启动节点开始。</li><li class="- topic/li li">startupCompleted： 启动节点完成。</li><li class="- topic/li li">startupFailed：<strong class="+ topic/ph hi-d/b ph b">启动节点失败。</strong> 该 contentType 的记录前会自动填充最近的 10 条 ERROR 和 WARNING 日志。</li><li class="- topic/li li">shutdownReceivedSignal：节点收到 kill 信号。</li><li class="- topic/li li">shutdownStarted：关闭节点开始。</li><li class="- topic/li li">shutdownCompleted：关闭节点完成。</li><li class="- topic/li li">shutdownFailed：<strong class="+ topic/ph hi-d/b ph b">关闭节点失败。</strong> 该 contentType 的记录前会自动填充最近的 10 条 ERROR 和 WARNING 日志。</li><li class="- topic/li li">coredump：<strong class="+ topic/ph hi-d/b ph b">节点可能发生 coredump 宕机。</strong> 因为 coredump 并不会产生表明 coredump 的日志，该条记录为使用规则推理得到，需要根据是否产生 coredump 文件和操作系统日志（dmesg, /var/log/messages 等）来确定是否发生 coredump。 该 contentType 的记录前会自动填充最近的 10 条 ERROR 和 WARNING 日志。</li></ul><p class="- topic/p p">注意到存在 contentType 为 coredump 的记录，检查 logTime 时间左右有对应 coredump 文件存在，需要进一步分析 coredump 堆栈内容和宕机前的动作确定原因。</p><p class="- topic/p p">注意到存在 contentType 为 startupFailed 的记录，查看之前的 ERROR 日志发现报错内容为 <code class="+ topic/ph pr-d/codeph ph codeph">Invalid license file</code>，检查 license 发现已过期。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title24" id="66-统计用户登录情况"><h3 class="- topic/title title topictitle3" id="ariaid-title24">6.6 统计用户登录情况</h3><div class="- topic/body body"><p class="- topic/p p">使用批处理模式分析日志得到登录报表 loginReport 如下：</p><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 16</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图 6-9 登录报表部分截图</span></figcaption><img class="- topic/image image" src="images/log_analysis_tool_user_manual/6.9.png"/><br/></figure><p class="- topic/p p">执行如下 SQL 统计每天各用户登录次数：</p><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 17</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图 6-10 每天各用户登录次数统计结果</span></figcaption><img class="- topic/image image" src="images/log_analysis_tool_user_manual/6.10.png"/><br/></figure><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>select count(*) from loginReport group by date(logTime) as date, operate</code></pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title25" id="67-过滤相关日志"><h3 class="- topic/title title topictitle3" id="ariaid-title25">6.7 过滤相关日志</h3><div class="- topic/body body"><p class="- topic/p p">例如当客户的环境存在长期大量写入时，产生的大量事务日志可能干扰其他问题的排查，此时希望能过滤掉事务相关日志，可以直接对分析结果表执行查询，使用 like 方法过滤掉 contentType 为 transaction 开头的日志：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>t = select * from logAnalysisResult where contentType not like "transaction%"</code></pre><p class="- topic/p p">如果需要过滤其他类型的日志，可以参考《自定义解析项目》一节编写相关日志的解析脚本，然后使用同样的方法过滤。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title26" id="68-生成日志分析每日报表"><h3 class="- topic/title title topictitle3" id="ariaid-title26">6.8 生成日志分析每日报表</h3><div class="- topic/body body"><p class="- topic/p p">可以结合定时任务和 HttpClient 插件实现生成日志分析每日报表并发送到指定邮箱。 参考定时任务如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>try { loadPlugin("HttpClient") } catch(err) { print(err) }
go

clearCachedModules()
go
use DDBLogAnalyser::config
use DDBLogAnalyser::logReader
use DDBLogAnalyser::logParser::logParser
use DDBLogAnalyser::reportGenerator::reportGenerator
use DDBLogAnalyser::alertGenerator
go

def analyseLogAndSend(userId, pwd, recipient) {
    clearEnv()
    go
    batchModeVersion = version()
    config = getExampleConfig(batchModeVersion)
    config["logDir"] = getLogDir()
    config["startTime"] = temporalAdd(now(), -24H)
    config["endTime"] = now()
    initConfig(config)
    go
    
    readLog()
    parseLog()
    generateReport() // 批处理用

    body = "&lt;pre&gt;"
    body += "ERROR logs: " + string(exec count(*) 
    	from objByName("errors")) + "\n" + string(objByName("errors"))
    body += "\nWARNING logs: " + string(exec count(*) 
    	from objByName("warnings")) + "\n" + string(objByName("warnings"))
    body += "&lt;/pre&gt;"
    res = HttpClient::sendEmail(userId, pwd, recipient, 
    	"log analyser report for " + string(today()), body);
    go

    clearEnv()
}

scheduleJob("analyseLogAndSend", "analyseLogAndSend", 
	analyseLogAndSend{"xxxx@xxx.com", "xxxxxxxx", "xxxxx@xxx.com"}, 
	23:55m, today(), 2055.12.31, 'D')</code></pre><p class="- topic/p p">该定时任务每天 23:55 执行，解析单节点的日志生成报表，发送 ERROR 和 WARNING 日志的统计信息到指定邮箱。</p><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 18</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图 6-11 每日报表部分截图</span></figcaption><img class="- topic/image image" src="images/log_analysis_tool_user_manual/6_11.png"/><br/></figure></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title27" id="7附录"><h2 class="- topic/title title topictitle2" id="ariaid-title27">7.附录</h2><div class="- topic/body body"><p class="- topic/p p"><a class="- topic/xref xref" href="script/log_analysis_tool_user_manual/DDBLogAnalyser.zip">DDBLogAnalyser</a></p></div></article></article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" aria-label="On this page" class="col-lg-2 d-none d-lg-block navbar d-print-none"> 
                            <div id="wh_topic_toc_content">
		                        
	                            <div class=" wh_topic_toc "><div class="wh_topic_label">在本页上</div><ul><li class="topic-item"><a href="#1-%E9%85%8D%E7%BD%AE%E8%A6%81%E6%B1%82" data-tocid="1-配置要求">1. 配置要求</a></li><li class="topic-item"><a href="#2-%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B" data-tocid="2-快速上手">2. 快速上手</a><ul><li class="topic-item"><a href="#21-%E6%89%B9%E9%87%8F%E5%88%86%E6%9E%90%E6%8C%87%E5%AE%9A%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E7%9A%84%E6%97%A5%E5%BF%97" data-tocid="21-批量分析指定文件夹下的日志">2.1 批量分析指定文件夹下的日志</a></li><li class="topic-item"><a href="#22--%E5%AE%9E%E6%97%B6%E7%9B%91%E6%8E%A7%E6%8C%87%E5%AE%9A%E9%9B%86%E7%BE%A4%E7%9A%84%E6%9C%80%E6%96%B0%E6%97%A5%E5%BF%97" data-tocid="22--实时监控指定集群的最新日志">2.2  实时监控指定集群的最新日志</a></li></ul></li><li class="topic-item"><a href="#3-%E9%85%8D%E7%BD%AE%E9%A1%B9" data-tocid="3-配置项">3. 配置项</a></li><li class="topic-item"><a href="#4-%E6%8E%A5%E5%8F%A3" data-tocid="4-接口">4. 接口</a><ul><li class="topic-item"><a href="#41-initconfig" data-tocid="41-initconfig">4.1 initConfig</a></li><li class="topic-item"><a href="#42-readlog" data-tocid="42-readlog">4.2 readLog</a></li><li class="topic-item"><a href="#43-parselog" data-tocid="43-parselog">4.3 parseLog</a></li><li class="topic-item"><a href="#44-generatereport" data-tocid="44-generatereport">4.4 generateReport</a></li><li class="topic-item"><a href="#45-initalertgenerator" data-tocid="45-initalertgenerator">4.5 initAlertGenerator</a></li><li class="topic-item"><a href="#46-clearenv" data-tocid="46-clearenv">4.6 clearEnv</a></li></ul></li><li class="topic-item"><a href="#5%E8%BF%9B%E9%98%B6%E4%BD%BF%E7%94%A8" data-tocid="5进阶使用">5.进阶使用</a><ul><li class="topic-item"><a href="#51%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A7%A3%E6%9E%90%E9%A1%B9%E7%9B%AE" data-tocid="51自定义解析项目">5.1自定义解析项目</a></li><li class="topic-item"><a href="#52%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8A%A5%E5%91%8A%E9%A1%B9%E7%9B%AE" data-tocid="52自定义报告项目">5.2自定义报告项目</a></li><li class="topic-item"><a href="#53%E8%87%AA%E5%AE%9A%E4%B9%89%E5%91%8A%E8%AD%A6%E8%A7%84%E5%88%99%E5%92%8C%E5%86%85%E5%AE%B9" data-tocid="53自定义告警规则和内容">5.3自定义告警规则和内容</a></li></ul></li><li class="topic-item"><a href="#6%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E6%A1%88%E4%BE%8B" data-tocid="6日志分析案例">6.日志分析案例</a><ul><li class="topic-item"><a href="#61%E6%8E%92%E6%9F%A5%E4%BA%8B%E7%89%A9%E5%9B%9E%E6%BB%9A%E7%9A%84%E5%8E%9F%E5%9B%A0" data-tocid="61排查事物回滚的原因">6.1排查事物回滚的原因</a></li><li class="topic-item"><a href="#62%E6%8E%92%E6%9F%A5%E5%AF%B9%E5%88%86%E5%B8%83%E5%BC%8F%E5%BA%93%E8%A1%A8%E7%9A%84%E5%86%99%E5%85%A5%E6%95%B0%E6%8D%AE%E9%87%8F" data-tocid="62排查对分布式库表的写入数据量">6.2排查对分布式库表的写入数据量</a></li><li class="topic-item"><a href="#63%E6%8E%92%E6%9F%A5%E5%AF%B9%E5%88%86%E5%B8%83%E5%BC%8F%E5%BA%93%E8%A1%A8%E7%9A%84%E8%AF%AF%E6%93%8D%E4%BD%9C" data-tocid="63排查对分布式库表的误操作">6.3排查对分布式库表的误操作</a></li><li class="topic-item"><a href="#64%E6%8E%92%E6%9F%A5%E8%80%97%E6%97%B6%E8%BF%87%E9%95%BF%E7%9A%84%E4%BA%8B%E5%8A%A1" data-tocid="64排查耗时过长的事务">6.4排查耗时过长的事务</a></li><li class="topic-item"><a href="#65%E6%8E%92%E6%9F%A5%E8%8A%82%E7%82%B9%E5%90%AF%E5%8A%A8%E5%A4%B1%E8%B4%A5%E5%81%9C%E6%AD%A2%E5%A4%B1%E8%B4%A5%E5%92%8C%E5%AE%95%E6%9C%BA%E7%9A%84%E5%8E%9F%E5%9B%A0" data-tocid="65排查节点启动失败停止失败和宕机的原因">6.5排查节点启动失败、停止失败和宕机的原因</a></li><li class="topic-item"><a href="#66-%E7%BB%9F%E8%AE%A1%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E6%83%85%E5%86%B5" data-tocid="66-统计用户登录情况">6.6 统计用户登录情况</a></li><li class="topic-item"><a href="#67-%E8%BF%87%E6%BB%A4%E7%9B%B8%E5%85%B3%E6%97%A5%E5%BF%97" data-tocid="67-过滤相关日志">6.7 过滤相关日志</a></li><li class="topic-item"><a href="#68-%E7%94%9F%E6%88%90%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E6%AF%8F%E6%97%A5%E6%8A%A5%E8%A1%A8" data-tocid="68-生成日志分析每日报表">6.8 生成日志分析每日报表</a></li></ul></li><li class="topic-item"><a href="#7%E9%99%84%E5%BD%95" data-tocid="7附录">7.附录</a></li></ul></div>
	                        	
                        	</div>
                        </nav>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
<title>Copyright</title><p><b> ©2025 浙江智臾科技有限公司 浙ICP备18048711号-3</b></p>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
    </body>
</html>