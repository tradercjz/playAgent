<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" data-whc_version="26.0">
    <head><link rel="shortcut icon" href="../favicon.ico"/><link rel="icon" href="../favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="数据库缓存在提升数据库性能和响应速度方面起着至关重要的作用。然而，不必要的缓存可能会占用过多的内存资源，从而影响系统效率。本文将介绍如何高效清理 DolphinDB 的缓存，以优化资源利用和系统性能。 在 DolphinDB 中，使用 getSessionMemoryStat 可获取当前节点的内存占用状态。 其中，不同数据库缓存类型介绍如下： 表 1-1 数据库缓存类型介绍表 数据库缓存类型 介绍 ..."/><meta name="DC.rights.owner" content="(C) 版权 2025"/><meta name="copyright" content="(C) 版权 2025"/><meta name="generator" content="DITA-OT"/><meta name="DC.type" content="topic"/><meta name="DC.coverage" content=""/><meta name="DC.relation" content="../tutorials/about_tutorials.html"/><meta name="prodname" content="DolphinDB"/><meta name="brand" content="DolphinDB"/><meta name="DC.creator" content="DolphinDB"/><meta name="DC.publisher" content="DDB N/A DDB 200"/><meta name="DC.format" content="HTML5"/><meta name="DC.identifier" content="clear_cache"/><title>数据库缓存清理机制</title><!--  Generated with Oxygen version 26.0, build number 2024012323.  --><meta name="wh-path2root" content="../"/><meta name="wh-toc-id" content="clear_cache-d9713e98973"/><meta name="wh-source-relpath" content="tutorials/clear_cache.dita"/><meta name="wh-out-relpath" content="tutorials/clear_cache.html"/>

    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/commons.css?buildId=2024012323"/>
    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic.css?buildId=2024012323"/>

    <script src="../oxygen-webhelp/app/options/properties.js?buildId=20250305183303"></script>
    <script src="../oxygen-webhelp/app/localization/strings.js?buildId=2024012323"></script>
    <script src="../oxygen-webhelp/app/search/index/keywords.js?buildId=20250305183303"></script>
    <script defer="defer" src="../oxygen-webhelp/app/commons.js?buildId=2024012323"></script>
    <script defer="defer" src="../oxygen-webhelp/app/topic.js?buildId=2024012323"></script>
<link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/styles.css?buildId=2024012323"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script></head>

    <body id="clear_cache" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            跳转到主要内容
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div xmlns:whc="http://www.oxygenxml.com/webhelp/components" class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="https://docs.dolphindb.cn/zh/index.html" class=" wh_logo d-none d-sm-block "><img src="../logo.png" alt="  DolphinDB 文档中心  "/></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="booktitle">  <span class="ph mainbooktitle">DolphinDB 文档中心</span>  </span></a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="搜索 " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="搜索查询" required="required"/><button type="submit" class="wh_search_button" aria-label="搜索"><span class="search_input_text">搜索</span></button></div></form>
            
            <script src="/vendors/react/umd/react.production.min.js" defer="defer"></script>
<script src="/vendors/react-dom/umd/react-dom.production.min.js" defer="defer"></script>
<script src="/vendors/dayjs/dayjs.min.js" defer="defer"></script>
<script src="/vendors/antd/dist/antd.min.js" defer="defer"></script>
<script src="/vendors/@ant-design/icons/dist/index.umd.min.js" defer="defer"></script>
<script src="/zh/index.js" type="module"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" defer="defer"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer="defer"><!--


--></script>
<script defer="defer"><!--

// 从主页重定向
const currentUrl = window.location.href;

// 判断当前URL是否包含index.html并且路径最后部分是index.html
if (currentUrl.endsWith('index.html')) {
    // 处理根目录下的index.html跳转
    const baseUrl = currentUrl.split('/index.html')[0]; // 获取index.html之前的部分
    const redirectUrl = `${baseUrl}/about/ddb_intro.html`; // 构建跳转路径
    window.location.href = redirectUrl; // 执行跳转
}

--></script>
            
        </div></div>
    </div>
</header>
        
        
         
        
        
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="../index.html"><span>主页</span></a></span></li><li><div class="topicref" data-id="about_tutorials"><div class="title"><a href="../tutorials/about_tutorials.html"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div></li><li><div class="topicref"><div class="title"><a href="../tutorials/database.html">数据库</a></div></div></li><li class="active"><div class="topicref" data-id="clear_cache"><div class="title"><a href="../tutorials/clear_cache.html">数据库缓存清理机制 </a></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="切换搜索突出显示" title="切换搜索突出显示"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="折叠截面" title="折叠截面"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="打印此页" aria-label="打印此页"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem"><div data-tocid="ddb_intro-d9713e87" class="topicref" data-id="ddb_intro" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../about/ddb_intro.html" id="ddb_intro-d9713e87-link">关于DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="chap1_getstarted-d9713e136" class="topicref" data-id="chap1_getstarted" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../getstarted/chap1_getstarted.html" id="chap1_getstarted-d9713e136-link">快速上手</a><div class="wh-tooltip"><p class="shortdesc">如何快速部署 DolphinDB、建库建表、写入和查询数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="sectionddb_deployment-d9713e189" class="topicref" data-id="sectionddb_deployment" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action sectionddb_deployment-d9713e189-link" class="wh-expand-btn"></span><div class="title"><a href="../deploy/deploy_intro.html" id="sectionddb_deployment-d9713e189-link"><span class="keyword label">部署</span></a><div class="wh-tooltip"><p class="shortdesc">如何在不同的场景中部署 DolphinDB</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259" class="topicref" data-id="new_chap_database_manage_new_chap_dbmanage_landing_page" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/cfg/db_intro.html" id="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link"><span class="keyword label">数据库</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 数据库的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_streaming-d9713e3760" class="topicref" data-id="chap7_tutorials_streaming" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_streaming-d9713e3760-link" class="wh-expand-btn"></span><div class="title"><a href="../stream/str_intro.html" id="chap7_tutorials_streaming-d9713e3760-link"><span class="keyword label">流数据</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 流数据引擎及流数据计算的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e7513" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e7513-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/db_oper/import_data.html" id="tocId-d9713e7513-link">数据迁移</a><div class="wh-tooltip"><p class="shortdesc">如何从不同数据源向 DolphinDB 迁移数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_system_management-d9713e7940" class="topicref" data-id="chap7_tutorials_system_management" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_system_management-d9713e7940-link" class="wh-expand-btn"></span><div class="title"><a href="../sys_man/om_intro.html" id="chap7_tutorials_system_management-d9713e7940-link"><span class="keyword label">系统运维</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 的系统运维功能及方法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="troubleshooting-d9713e8780" class="topicref" data-id="troubleshooting" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action troubleshooting-d9713e8780-link" class="wh-expand-btn"></span><div class="title"><a href="../error_codes/troubleshooting.html" id="troubleshooting-d9713e8780-link">故障排查</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="about_language_resources-d9713e20911" class="topicref" data-id="about_language_resources" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action about_language_resources-d9713e20911-link" class="wh-expand-btn"></span><div class="title"><a href="../progr/progr_intro.html" id="about_language_resources-d9713e20911-link"><span class="keyword label">编程语言</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 编程基本概念与方法、SQL 在 DolphinDB 的应用</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="functions_references-d9713e30925" class="topicref" data-id="functions_references" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action functions_references-d9713e30925-link" class="wh-expand-btn"></span><div class="title"><a href="../funcs/funcs_intro.html" id="functions_references-d9713e30925-link"><span class="keyword label">函数参考</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 函数分类、语法、详解及示例</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="api_protocol-d9713e94064" class="topicref" data-id="api_protocol" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action api_protocol-d9713e94064-link" class="wh-expand-btn"></span><div class="title"><a href="../api/connapi_intro.html" id="api_protocol-d9713e94064-link"><span class="keyword label">连接器 &amp; API</span></a><div class="wh-tooltip"><p class="shortdesc">面向不同编程语言的 DolphinDB API 及连接器，相关协议和用法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap6_plugin-d9713e94210" class="topicref" data-id="chap6_plugin" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap6_plugin-d9713e94210-link" class="wh-expand-btn"></span><div class="title"><a href="../plugins/plg_intro.html" id="chap6_plugin-d9713e94210-link"><span class="keyword label">插件</span></a><div class="wh-tooltip"><p class="shortdesc">多个应用场景的插件使用说明和插件开发指导</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="third_party-d9713e97904" class="topicref" data-id="third_party" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action third_party-d9713e97904-link" class="wh-expand-btn"></span><div class="title"><a href="../third_party.html" id="third_party-d9713e97904-link">第三方工具</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="about_tutorials-d9713e98227" class="topicref" data-id="about_tutorials" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action about_tutorials-d9713e98227-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/about_tutorials.html" id="about_tutorials-d9713e98227-link"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98280" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98280-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/new_users_finance.html" id="tocId-d9713e98280-link">新用户入门</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="tocId-d9713e98327" class="topicref" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action tocId-d9713e98327-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/database.html" id="tocId-d9713e98327-link">数据库</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="分区数据库设计和操作-d9713e98328" class="topicref" data-id="分区数据库设计和操作" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/database.html" id="分区数据库设计和操作-d9713e98328-link">分区数据库设计和操作</a></div></div></li><li role="treeitem"><div data-tocid="dolphindb-内存表详解-d9713e98374" class="topicref" data-id="dolphindb-内存表详解" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/in_memory_table.html" id="dolphindb-内存表详解-d9713e98374-link">DolphinDB 内存表详解</a></div></div></li><li role="treeitem"><div data-tocid="内存数据表-d9713e98420" class="topicref" data-id="内存数据表" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/partitioned_in_memory_table.html" id="内存数据表-d9713e98420-link">内存数据表</a></div></div></li><li role="treeitem"><div data-tocid="oltp-内存存储引擎非嵌入式版使用教程-d9713e98466" class="topicref" data-id="oltp-内存存储引擎非嵌入式版使用教程" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/oltp_in-memory_storage_engine_non-embedded_version_tutorials.html" id="oltp-内存存储引擎非嵌入式版使用教程-d9713e98466-link">OLTP 内存存储引擎（非嵌入式版）使用教程</a></div></div></li><li role="treeitem"><div data-tocid="利用缓存表快速实现-mysql-库间信息同步-d9713e98512" class="topicref" data-id="利用缓存表快速实现-mysql-库间信息同步" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/cachedtable.html" id="利用缓存表快速实现-mysql-库间信息同步-d9713e98512-link">利用缓存表快速实现 MySQL 库间信息同步</a></div></div></li><li role="treeitem"><div data-tocid="建库建表最容易忽略的十个细节-d9713e98558" class="topicref" data-id="建库建表最容易忽略的十个细节" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/database_and_table_creation_details.html" id="建库建表最容易忽略的十个细节-d9713e98558-link">建库建表最容易忽略的十个细节</a></div></div></li><li role="treeitem"><div data-tocid="redo-log-和-cache-engine-d9713e98604" class="topicref" data-id="redo-log-和-cache-engine" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/redoLog_cacheEngine.html" id="redo-log-和-cache-engine-d9713e98604-link">redo log 和 cache engine</a></div></div></li><li role="treeitem"><div data-tocid="tsdb-存储引擎简介-d9713e98650" class="topicref" data-id="tsdb-存储引擎简介" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/tsdb_engine.html" id="tsdb-存储引擎简介-d9713e98650-link">TSDB 存储引擎简介</a></div></div></li><li role="treeitem"><div data-tocid="tsdb-存储引擎详解-d9713e98696" class="topicref" data-id="tsdb-存储引擎详解" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/tsdb_explained.html" id="tsdb-存储引擎详解-d9713e98696-link">TSDB 存储引擎详解</a></div></div></li><li role="treeitem"><div data-tocid="分布式表数据更新原理和性能-d9713e98742" class="topicref" data-id="分布式表数据更新原理和性能" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/dolphindb_update.html" id="分布式表数据更新原理和性能-d9713e98742-link">分布式表数据更新原理和性能</a></div></div></li><li role="treeitem"><div data-tocid="软删除-d9713e98788" class="topicref" data-id="软删除" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/soft_delete.html" id="软删除-d9713e98788-link">软删除</a></div></div></li><li role="treeitem"><div data-tocid="基于-datax-的-dolphindb-数据导入工具-d9713e98835" class="topicref" data-id="基于-datax-的-dolphindb-数据导入工具" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/datax_writer.html" id="基于-datax-的-dolphindb-数据导入工具-d9713e98835-link">基于 DataX 的 DolphinDB 数据导入工具</a></div></div></li><li role="treeitem"><div data-tocid="debezium--kafka-实时同步-mysql-数据到-dolphindb-d9713e98881" class="topicref" data-id="debezium--kafka-实时同步-mysql-数据到-dolphindb" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Debezium_and_Kafka_data_sync.html" id="debezium--kafka-实时同步-mysql-数据到-dolphindb-d9713e98881-link">Debezium + Kafka 实时同步 MySQL 数据到 DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="debeziumkafka-实时同步-oracle-11g-数据到-dolphindb-d9713e98927" class="topicref" data-id="debeziumkafka-实时同步-oracle-11g-数据到-dolphindb" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Debezium_Kafka_Oracle_sync.html" id="debeziumkafka-实时同步-oracle-11g-数据到-dolphindb-d9713e98927-link">Debezium+Kafka 实时同步 Oracle 11g 数据到 DolphinDB</a></div></div></li><li role="treeitem" class="active"><div data-tocid="clear_cache-d9713e98973" class="topicref" data-id="clear_cache" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/clear_cache.html" id="clear_cache-d9713e98973-link">数据库缓存清理机制 </a></div></div></li><li role="treeitem"><div data-tocid="best_practice_for_storage_compute_separation-d9713e99019" class="topicref" data-id="best_practice_for_storage_compute_separation" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/best_practice_for_storage_compute_separation.html" id="best_practice_for_storage_compute_separation-d9713e99019-link">存算分离最佳实践教程</a></div></div></li><li role="treeitem"><div data-tocid="database_and_table_creation_wizard-d9713e99065" class="topicref" data-id="database_and_table_creation_wizard" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/database_and_table_creation_wizard.html" id="database_and_table_creation_wizard-d9713e99065-link">DolphinDB Web 界面库表创建指南</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e99111" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e99111-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/std_sql_ddb.html" id="tocId-d9713e99111-link">编程</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100448" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100448-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming-real-time-correlation-processing_2.html" id="tocId-d9713e100448-link">流数据</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100955" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100955-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/scheduledJob_2.html" id="tocId-d9713e100955-link">系统运维</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="模块概述-d9713e101923" class="topicref" data-id="模块概述" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action 模块概述-d9713e101923-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/tu_modules.html" id="模块概述-d9713e101923-link">模块</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e102568" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e102568-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/OHLC_2.html" id="tocId-d9713e102568-link">金融场景案例</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e104827" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e104827-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_engine_anomaly_alerts_2.html" id="tocId-d9713e104827-link">物联网场景案例</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105795" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105795-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/dolphindb_tensor_libtorch_tutorial.html" id="tocId-d9713e105795-link">机器学习</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105842" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105842-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/api_performance.html" id="tocId-d9713e105842-link">测试报告</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105982" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105982-link" class="wh-expand-btn"></span><div class="title"><a href="../rn/server/3_00_2.html" id="tocId-d9713e105982-link">版本说明</a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 版本发布历史</p></div></div></div></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-7 col-md-9 col-sm-12" id="wh_topic_body">
                        <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        <button id="wh_close_topic_toc_button" class="close-toc-button d-none" aria-label="Toggle topic table of content" aria-controls="wh_topic_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        <div class=" wh_topic_content body "><main role="main"><article class="- topic/topic topic" role="article" aria-labelledby="ariaid-title1">
    <h1 class="- topic/title title topictitle1" id="ariaid-title1">数据库缓存清理机制  </h1>
    <div class="- topic/body body">
        <p class="- topic/p p">数据库缓存在提升数据库性能和响应速度方面起着至关重要的作用。然而，不必要的缓存可能会占用过多的内存资源，从而影响系统效率。本文将介绍如何高效清理 DolphinDB
            的缓存，以优化资源利用和系统性能。</p>
    </div>
    <article class="- topic/topic topic nested1" aria-labelledby="ariaid-title2" id="topic_j4v_bg3_b2c">
        <h2 class="- topic/title title topictitle2" id="ariaid-title2">1. 数据库缓存类型</h2>
        <div class="- topic/body body">
            <p class="- topic/p p">在 DolphinDB 中，使用 <a class="- topic/xref xref" href="../funcs/g/getSessionMemoryStat.html">getSessionMemoryStat</a> 可获取当前节点的内存占用状态。</p>
            <img class="- topic/image image" id="topic_j4v_bg3_b2c__image_obx_hg3_b2c" src="images/clear_cache/1-1.png"/>
            <p class="- topic/p p">其中，不同数据库缓存类型介绍如下：</p>
            <p class="- topic/p p">表 1-1 数据库缓存类型介绍表</p>
            <div class="table-container"><table class="- topic/table table frame-all" id="topic_j4v_bg3_b2c__table_ab4_jg3_b2c" data-ofbid="topic_j4v_bg3_b2c__table_ab4_jg3_b2c" data-cols="2"><caption></caption><colgroup><col/><col/></colgroup><thead class="- topic/thead thead">
                        <tr class="- topic/row">
                            <th class="- topic/entry entry align-left colsep-1 rowsep-1" id="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__1"><strong class="+ topic/ph hi-d/b ph b">数据库缓存类型</strong></th>
                            <th class="- topic/entry entry align-left colsep-0 rowsep-1" id="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__2"><strong class="+ topic/ph hi-d/b ph b">介绍</strong></th>
                        </tr>
                    </thead><tbody class="- topic/tbody tbody">
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__1">__DimensionalTable__</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__2">维度表缓存，单位为字节。</td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__1">__SharedTable__</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__2">共享表缓存，单位为字节。</td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__1">__OLAPTablet__</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__2">OLAP 引擎数据库表的缓存，单位为字节。</td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__1">__OLAPCacheEngine__</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__2">OLAP 引擎 Cache Engine 的内存占用，单位为字节。</td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__1">__OLAPCachedSymbolBase__</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__2">OLAP 引擎 SYMBOL 类型字典编码的缓存，单位为字节。</td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__1">__DFSMetadata__</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__2">分布式存储的元数据内存占用情况，单位为字节。</td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__1">__TSDBCacheEngine__</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__2">TSDB 引擎 Cache Engine 的内存占用，单位为字节。</td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__1">__TSDBLevelFileIndex__</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__2">TSDB 引擎 level file 索引的缓存，单位为字节。</td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__1">__TSDBCachedSymbolBase__</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__2">TSDB 引擎 SYMBOL 类型字典编码的缓存，单位为字节。</td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__1">__IOTDBStaticTableCache__</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__2">点位管理引擎 IOTDB 的静态表缓存，单位为字节。</td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__1">__IOTDBLatestKeyCache__</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__2">点位管理引擎 IOTDB 的最新值缓存，单位为字节。</td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__1">__StreamingPubQueue__</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__2">流数据发布队列里未处理的消息数。</td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-0" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__1">__StreamingSubQueue__</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="topic_j4v_bg3_b2c__table_ab4_jg3_b2c__entry__2">流数据订阅队列里未处理的消息数。</td>
                        </tr>
                    </tbody></table></div>
        </div>
    </article>
    <article class="- topic/topic topic nested1" aria-labelledby="ariaid-title3" id="topic_pxb_cg3_b2c">
        <h2 class="- topic/title title topictitle2" id="ariaid-title3">2. 数据库缓存清理 </h2>
        <div class="- topic/body body">
            <p class="- topic/p p">下文将介绍如何清理不同类型的数据库缓存。</p>
            <p class="- topic/p p">本文中的所有示例均已在 3.00.2 单节点版本上验证通过。清理缓存前后，可通过执行以下语句验证对应缓存是否已清除：</p>
            <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="topic_pxb_cg3_b2c__codeblock_r24_lg3_b2c" data-ofbid="topic_pxb_cg3_b2c__codeblock_r24_lg3_b2c"><code>exec memSize from getSessionMemoryStat() where userId="__******__"</code></pre>
        </div>
        <article class="- topic/topic topic nested2" aria-labelledby="ariaid-title4" id="topic_odk_cg3_b2c">
            <h3 class="- topic/title title topictitle3" id="ariaid-title4">2.1 维度表缓存 </h3>
            <div class="- topic/body body">
                <p class="- topic/p p">维度表是分布式数据库中没有进行分区的表，查询时会将表中所有数据加载到内存，适用于存储不频繁更新的小数据集。</p>
                <p class="- topic/p p">维度表缓存支持通过以下方式清理:</p>
                <ul class="- topic/ul ul" id="topic_odk_cg3_b2c__ul_ubh_mg3_b2c" data-ofbid="topic_odk_cg3_b2c__ul_ubh_mg3_b2c">
                    <li class="- topic/li li">从 2.00.11 和 1.30.23 版本开始，维度表引入了自动回收机制，当内存使用超过系统配置参数 warningMemSize
                        设定的阈值时，系统会根据 LRU（Least Recently Used）策略尝试释放部分维度表缓存。</li>
                    <li class="- topic/li li">调用 <a class="- topic/xref xref" href="../funcs/c/clearCachedDatabase.html">clearCachedDatabase</a> 手动释放维度表的缓存。</li>
                    <li class="- topic/li li">从 2.00.11 和1.30.23 版本开始，<a class="- topic/xref xref" href="../funcs/c/clearAllCache.html">clearAllCache</a> 函数也会清理维度表缓存。</li>
                </ul>
                <p class="- topic/p p">例1，例2，例3脚本中所用数据库表由以下脚本生成</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="topic_odk_cg3_b2c__codeblock_b3y_4g3_b2c" data-ofbid="topic_odk_cg3_b2c__codeblock_b3y_4g3_b2c"><code>dbNameOLAP = "dfs://test_OLAP"
dbNameTSDB = "dfs://test_TSDB"
if(existsDatabase(dbNameOLAP)){
    dropDatabase(dbNameOLAP)
}
if(existsDatabase(dbNameTSDB)){
    dropDatabase(dbNameTSDB)
}
t = table(1..10 as x, symbol(string(1..10)) as y)
dbOLAP = database(dbNameOLAP, VALUE, 1..10)
dbTSDB = database(dbNameTSDB, VALUE, 1..10, engine="TSDB")
createTable(dbOLAP, t, `dt1).append!(t)
createTable(dbOLAP, t, `dt2).append!(t)
createTable(dbOLAP, t, `dt3).append!(t)
createTable(dbTSDB, t, `dt1, sortColumns=`x).append!(t)
createTable(dbTSDB, t, `dt2, sortColumns=`x).append!(t)
createTable(dbTSDB, t, `dt3, sortColumns=`x).append!(t)</code></pre>
                <p class="- topic/p p">例1. 清除指定维度表缓存</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="topic_odk_cg3_b2c__codeblock_rfm_pg3_b2c" data-ofbid="topic_odk_cg3_b2c__codeblock_rfm_pg3_b2c"><code>//生成维度表缓存
select * from loadTable(dbOLAP, `dt1)   
select * from loadTable(dbTSDB, `dt1)  
//output：544
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__DimensionalTable__" 

//清除指定维度表缓存
pnodeRun(clearCachedDatabase{dbNameOLAP, `dt1})
pnodeRun(clearCachedDatabase{dbNameTSDB, `dt1})
//output：0
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__DimensionalTable__"</code></pre>
                <p class="- topic/p p">例2. 清除指定数据库中所有的数据表缓存</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="topic_odk_cg3_b2c__codeblock_mcs_qg3_b2c" data-ofbid="topic_odk_cg3_b2c__codeblock_mcs_qg3_b2c"><code>//生成维度表缓存
select * from loadTable(dbNameOLAP, `dt1)
select * from loadTable(dbNameOLAP, `dt2)
select * from loadTable(dbNameOLAP, `dt3)
select * from loadTable(dbNameTSDB, `dt1)
select * from loadTable(dbNameTSDB, `dt2)
select * from loadTable(dbNameTSDB, `dt3)
//output：1632
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__DimensionalTable__"

//清除指定数据库中所有的数据表缓存
pnodeRun(clearCachedDatabase{dbNameOLAP})
pnodeRun(clearCachedDatabase{dbNameTSDB})
//output：0
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__DimensionalTable__"</code></pre>
                <p class="- topic/p p">例3. <code class="+ topic/ph pr-d/codeph ph codeph">clearAllCach</code> 函数也会清除维度表缓存</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="topic_odk_cg3_b2c__codeblock_ihn_rg3_b2c" data-ofbid="topic_odk_cg3_b2c__codeblock_ihn_rg3_b2c"><code>//生成维度表缓存
select * from loadTable(dbNameOLAP, `dt1)
select * from loadTable(dbNameOLAP, `dt2)
select * from loadTable(dbNameOLAP, `dt3)
select * from loadTable(dbNameTSDB, `dt1)
select * from loadTable(dbNameTSDB, `dt2)
select * from loadTable(dbNameTSDB, `dt3)
//output：1632
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__DimensionalTable__"

//清除维度表缓存
pnodeRun(clearAllCache)
//output：0
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__DimensionalTable__"
</code></pre>
            </div>
        </article>
        <article class="- topic/topic topic nested2" aria-labelledby="ariaid-title5" id="topic_s4k_cg3_b2c">
            <h3 class="- topic/title title topictitle3" id="ariaid-title5">2.2 共享表变量</h3>
            <div class="- topic/body body">
                <p class="- topic/p p">内存表等本地对象默认在其他会话中不可见。通过 <code class="+ topic/ph pr-d/codeph ph codeph">share</code> 函数共享后，表可在其他会话中访问。</p>
                <p class="- topic/p p">释放共享表变量可使用 <a class="- topic/xref xref" href="../funcs/u/undef.html">undef</a> 函数，并通过指定
                        <em class="+ topic/ph hi-d/i ph i">objType</em>=SHARED 来释放共享变量占用的内存。</p>
                <p class="- topic/p p">例4. 释放指定共享表变量</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="topic_s4k_cg3_b2c__codeblock_mt2_5g3_b2c" data-ofbid="topic_s4k_cg3_b2c__codeblock_mt2_5g3_b2c"><code>//生成指定共享表变量
t = table(1..10 as x, 1..10 as y)
share t as st
//output：272
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__SharedTable__"

//释放指定共享表变量
undef(`st, SHARED)
//output：0
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__SharedTable__"</code></pre>
            </div>
        </article>
        <article class="- topic/topic topic nested2" aria-labelledby="ariaid-title6" id="topic_cyk_cg3_b2c">
            <h3 class="- topic/title title topictitle3" id="ariaid-title6">2.3 OLAP 引擎读缓存</h3>
            <div class="- topic/body body">
                <p class="- topic/p p">OLAP
                    引擎自动将查询过的历史数据加载到读缓存，后续相关数据的查询将先从缓存中读取。多个会话共享分区表读缓存数据，以提高内存使用率。其分布式表的内存管理有如下特点：</p>
                <ul class="- topic/ul ul" id="topic_cyk_cg3_b2c__ul_er5_5g3_b2c" data-ofbid="topic_cyk_cg3_b2c__ul_er5_5g3_b2c">
                    <li class="- topic/li li">内存以分区的一列为单位进行管理。</li>
                    <li class="- topic/li li">数据只加载到所在的节点，不会在节点间转移。</li>
                    <li class="- topic/li li">多个用户访问相同分区时，使用同一份缓存。</li>
                    <li class="- topic/li li">内存使用不超过 warningMemSize 情况下，尽量多缓存数据。</li>
                </ul>
                <p class="- topic/p p">OLAP引擎读缓存支持通过以下方式清理：</p>
                <ul class="- topic/ul ul" id="topic_cyk_cg3_b2c__ul_fr5_5g3_b2c" data-ofbid="topic_cyk_cg3_b2c__ul_fr5_5g3_b2c">
                    <li class="- topic/li li">当总的内存使用达到 warningMemSize 时，系统会采用 LRU 的内存回收策略，自动回收一部分内存。</li>
                    <li class="- topic/li li">使用 <code class="+ topic/ph pr-d/codeph ph codeph">clearAllCache</code> 函数或 <code class="+ topic/ph pr-d/codeph ph codeph">clearCachedDatabase</code>
                        函数手动清理。</li>
                </ul>
                <p class="- topic/p p">例5，例6脚本中所用数据库表由以下脚本生成</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="topic_cyk_cg3_b2c__codeblock_t2l_vg3_b2c" data-ofbid="topic_cyk_cg3_b2c__codeblock_t2l_vg3_b2c"><code>dbName = "dfs://test"
if(existsDatabase(dbName)){
    dropDatabase(dbName)
}
t = table(1..10 as x, symbol(string(1..10)) as y)
db = database(dbName, VALUE, 1..10)
pt1 = createPartitionedTable(db, t, `pt1, `x).append!(t)
pt2 = createPartitionedTable(db, t, `pt2, `x).append!(t)
pt3 = createPartitionedTable(db, t, `pt3, `x).append!(t)</code></pre>
                <p class="- topic/p p">例5. <code class="+ topic/ph pr-d/codeph ph codeph">clearAllCache</code> 清理 OLAP 引擎数据库表缓存</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="topic_cyk_cg3_b2c__codeblock_tvf_wg3_b2c" data-ofbid="topic_cyk_cg3_b2c__codeblock_tvf_wg3_b2c"><code>//生成 OLAP 引擎数据库表缓存
select * from loadTable(dbName, `pt1)
select * from loadTable(dbName, `pt2)
select * from loadTable(dbName, `pt3)
//output：240
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__OLAPTablet__"

//clearAllCache 清理 OLAP 引擎数据库表缓存
pnodeRun(clearAllCache)
//output：0
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__OLAPTablet__"
</code></pre>
                <p class="- topic/p p">例6. <code class="+ topic/ph pr-d/codeph ph codeph">clearCachedDatabase</code> 清理 OLAP 引擎数据库表缓存</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="topic_cyk_cg3_b2c__codeblock_qkx_wg3_b2c" data-ofbid="topic_cyk_cg3_b2c__codeblock_qkx_wg3_b2c"><code>//生成 OLAP 引擎数据库表缓存
select * from loadTable(dbName, `pt1)
select * from loadTable(dbName, `pt2)
select * from loadTable(dbName, `pt3)
//output：240
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__OLAPTablet__"

//clearCachedDatabase清理OLAP 引擎数据库表缓存
pnodeRun(clearCachedDatabase{dbName})
//output：0
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__OLAPTablet__"
</code></pre>
            </div>
        </article>
        <article class="- topic/topic topic nested2" aria-labelledby="ariaid-title7" id="topic_dgl_cg3_b2c">
            <h3 class="- topic/title title topictitle3" id="ariaid-title7">2.4 OLAP引擎写入缓存</h3>
            <div class="- topic/body body">
                <p class="- topic/p p">Cache Engine 是 DolphinDB 中的一种数据写入缓存机制，用于提升海量数据写入性能。DolphinDB 采用先写入 Redo
                    log（预写式日志）和 Cache Engine（写入缓存）的通用做法，等数据积累到一定数量时，批量写入。</p>
                <p class="- topic/p p">OLAP 引擎 Cache Engine 有两种自动回收机制：</p>
                <ul class="- topic/ul ul" id="topic_dgl_cg3_b2c__ul_cpt_xg3_b2c" data-ofbid="topic_dgl_cg3_b2c__ul_cpt_xg3_b2c">
                    <li class="- topic/li li">每 30 秒一次的定期回收。</li>
                    <li class="- topic/li li">当缓存中的数据量达到 OLAPCacheEngineSize 的 30% 时，Cache Engine 会将内容写到列文件，完成回收。</li>
                </ul>
                <p class="- topic/p p">OLAP 引擎 Cache Engine 的内存占用支持手动清理：</p>
                <ul class="- topic/ul ul" id="topic_dgl_cg3_b2c__ul_dpt_xg3_b2c" data-ofbid="topic_dgl_cg3_b2c__ul_dpt_xg3_b2c">
                    <li class="- topic/li li">可使用 <a class="- topic/xref xref" href="../funcs/f/flushOLAPCache.html">flushOLAPCache</a>
                        函数将缓冲区内已完成的事务强制写入数据库，从而释放 Cache Engine 的内存。</li>
                    <li class="- topic/li li">需要注意，<code class="+ topic/ph pr-d/codeph ph codeph">flushOLAPCache</code> 函数为异步操作，调用后内存不会立即释放。可通过 <a class="- topic/xref xref" href="../funcs/g/getOLAPCacheEngineSize.html">getOLAPCacheEngineSize</a> 函数监控 Cache Engine 的内存状态。</li>
                </ul>
                <p class="- topic/p p">例7. 使用 <code class="+ topic/ph pr-d/codeph ph codeph">flushOLAPCache</code> 清理 OLAP 引擎 Cache Engine 的内存占用</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="topic_dgl_cg3_b2c__codeblock_w4h_bh3_b2c" data-ofbid="topic_dgl_cg3_b2c__codeblock_w4h_bh3_b2c"><code>//生成OLAP引擎写入缓存
dbName = "dfs://test"
if(existsDatabase(dbName)){
    dropDatabase(dbName)
}
t = table(1..10 as x, symbol(string(1..10)) as y)
db = database(dbName, VALUE, 1..10)
dt1 = createTable(db, t, `dt1).append!(t)
dt2 = createTable(db, t, `dt2).append!(t)
dt3 = createTable(db, t, `dt3).append!(t)
pt1 = createPartitionedTable(db, t, `pt1, `x).append!(t)
pt2 = createPartitionedTable(db, t, `pt2, `x).append!(t)
pt3 = createPartitionedTable(db, t, `pt3, `x).append!(t)

//output：480
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__OLAPCacheEngine__"

//将 OLAP 引擎缓冲区里已经完成的事务强制写入数据库
pnodeRun(flushOLAPCache)
sleep(1000)
//output：0
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__OLAPCacheEngine__"</code></pre>
            </div>
        </article>
        <article class="- topic/topic topic nested2" aria-labelledby="ariaid-title8" id="topic_vnl_cg3_b2c">
            <h3 class="- topic/title title topictitle3" id="ariaid-title8">2.5 OLAP引擎symbolBase缓存</h3>
            <div class="- topic/body body">
                <p class="- topic/p p">在 OLAP 引擎中，当分布式表包含 SYMBOL 类型字段时，系统会在对其进行读写操作时缓存其 symbolBase（每个 symbol 与其对应 id
                    的映射字典，存储数据时存储 id 而非 symbol）。读缓存记录在 getSessionMemoryStat 的 OLAPTablet 中，写缓存即为
                    OLAPCachedSymbolBase。</p>
                <p class="- topic/p p">为了管理内存使用，系统会根据缓存大小等条件定期清理 OLAPCachedSymbolBase，其中同时符合以下条件的 symbolBase 将被移出缓存：</p>
                <ul class="- topic/ul ul" id="topic_vnl_cg3_b2c__ul_bwd_ch3_b2c" data-ofbid="topic_vnl_cg3_b2c__ul_bwd_ch3_b2c">
                    <li class="- topic/li li">超过 5 分钟未被访问。</li>
                    <li class="- topic/li li">对应的数据既不在 Cache Engine 中，也不在正在进行的事务中。</li>
                </ul>
            </div>
        </article>
        <article class="- topic/topic topic nested2" aria-labelledby="ariaid-title9" id="topic_rvl_cg3_b2c">
            <h3 class="- topic/title title topictitle3" id="ariaid-title9">2.6 TSDB引擎写入缓存</h3>
            <div class="- topic/body body">
                <p class="- topic/p p">TSDB 引擎的 Cache Engine 会对缓存数据进行排序。当 Cache Engine 写满或经过 60
                    秒时，系统会自动将缓存数据刷入磁盘。刷盘期间，Cache Engine 为只读状态，无法继续接收新的写入数据。如果此时有新的数据写入，系统会为 TSDB
                    引擎分配新的内存空间作为 Cache Engine。因此，TSDB 的 Cache Engine 内存占用可能暂时超过设置的
                    TSDBCacheEngineSize。</p>
                <p class="- topic/p p">TSDB 引擎 Cache Engine 的内存占用可通过 <a class="- topic/xref xref" href="../funcs/f/flushTSDBCache.html">flushTSDBCache</a> 函数进行手动清理。该函数会将缓冲区中已完成的事务强制写入数据库，以释放内存资源。</p>
                <p class="- topic/p p">例8. 使用 <code class="+ topic/ph pr-d/codeph ph codeph">flushTSDBCache</code>清理 TSDB 引擎 Cache Engine 的内存占用</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="topic_rvl_cg3_b2c__codeblock_hm1_2h3_b2c" data-ofbid="topic_rvl_cg3_b2c__codeblock_hm1_2h3_b2c"><code>//生成TSDB引擎写入缓存
dbName = "dfs://test"
if(existsDatabase(dbName)){
    dropDatabase(dbName)
}
t = table(1..10 as x, symbol(string(1..10)) as y)
db = database(dbName, VALUE, 1..10, engine="TSDB")
dt1 = createTable(db, t, `dt1, sortColumns=`x).append!(t)
dt2 = createTable(db, t, `dt2, sortColumns=`x).append!(t)
dt3 = createTable(db, t, `dt3, sortColumns=`x).append!(t)
pt1 = createPartitionedTable(db, t, `pt1, `x, sortColumns=`x).append!(t)
pt2 = createPartitionedTable(db, t, `pt2, `x, sortColumns=`x).append!(t)
pt3 = createPartitionedTable(db, t, `pt3, `x, sortColumns=`x).append!(t)

//output：7560
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__TSDBCacheEngine__"
//将 TSDB 引擎缓冲区里已经完成的事务强制写入数据库
pnodeRun(flushTSDBCache)
//output：0
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__TSDBCacheEngine__"</code></pre>
            </div>
        </article>
        <article class="- topic/topic topic nested2" aria-labelledby="ariaid-title10" id="topic_n2m_cg3_b2c">
            <h3 class="- topic/title title topictitle3" id="ariaid-title10">2.7 TSDB引擎levelFile索引缓存</h3>
            <div class="- topic/body body">
                <p class="- topic/p p">与 OLAP 引擎存储数据的最小文件为列文件不同，TSDB 引擎存储数据的最小文件是 level file。每个 level file
                    都记录了元信息，数据块和数据块对应的索引。TSDB 查询分布式表数据时，会将分区下 level file
                    的索引部分加载到内存，然后将索引定位的数据部分加载到内存。正是因为通过索引就可以快速定位数据并加载，TSDB
                    只需要缓存索引数据，无需缓存查询的分区数据。TSDB 引擎 levelFile 索引缓存支持通过以下方式清理：</p>
                <ul class="- topic/ul ul" id="topic_n2m_cg3_b2c__ul_uns_2h3_b2c" data-ofbid="topic_n2m_cg3_b2c__ul_uns_2h3_b2c">
                    <li class="- topic/li li">由配置参数 TSDBLevelFileIndexCacheSize 指定TSDB索引缓存的容量，单位为 GB，默认值为 maxMemSize 的
                        5%，最小值为 0.1GB。若索引缓存空间不够时，会按照 LRU 算法，自动释放最近最少使用的 5% 的缓存空间。</li>
                    <li class="- topic/li li">使用 invalidateLevelIndexCache 函数手动清理。</li>
                    <li class="- topic/li li">从2.00.13/3.00.1版本开始，clearAllCache 函数也会对 TSDB 的 level file 索引缓存清理。</li>
                </ul>
                <p class="- topic/p p">例9，例10脚本中所用数据库表由以下脚本生成</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="topic_n2m_cg3_b2c__codeblock_elh_fh3_b2c" data-ofbid="topic_n2m_cg3_b2c__codeblock_elh_fh3_b2c"><code>dbName = "dfs://test"
if(existsDatabase(dbName)){
    dropDatabase(dbName)
}
t = table(1..10 as x, symbol(string(1..10)) as y)
db = database(dbName, VALUE, 1..10, engine="TSDB")
dt1 = createTable(db, t, `dt1, sortColumns=`x)
dt2 = createTable(db, t, `dt2, sortColumns=`x)
dt3 = createTable(db, t, `dt3, sortColumns=`x)
pt1 = createPartitionedTable(db, t, `pt1, `x, sortColumns=`x)
pt2 = createPartitionedTable(db, t, `pt2, `x, sortColumns=`x)
pt3 = createPartitionedTable(db, t, `pt3, `x, sortColumns=`x)</code></pre>
                <p class="- topic/p p">例9. 使用 <code class="+ topic/ph pr-d/codeph ph codeph">invalidateLevelIndexCache</code> 清理TSDB引擎 level file 索引的缓存</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="topic_n2m_cg3_b2c__codeblock_pqc_gh3_b2c" data-ofbid="topic_n2m_cg3_b2c__codeblock_pqc_gh3_b2c"><code>dt1.append!(t)
dt2.append!(t)
dt3.append!(t)
pt1.append!(t)
pt2.append!(t)
pt3.append!(t)
//生成TSDB引擎 level file 索引的缓存
pnodeRun(flushTSDBCache)
//output：12510
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__TSDBLevelFileIndex__"

//invalidateLevelIndexCache 清理TSDB引擎 level file 索引的缓存
pnodeRun(invalidateLevelIndexCache)
//output：0
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__TSDBLevelFileIndex__"</code></pre>
                <p class="- topic/p p">例10. 使用 <code class="+ topic/ph pr-d/codeph ph codeph">clearAllCache</code> 清理TSDB引擎 level f</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="topic_n2m_cg3_b2c__codeblock_xhr_gh3_b2c" data-ofbid="topic_n2m_cg3_b2c__codeblock_xhr_gh3_b2c"><code>dt1.append!(t)
dt2.append!(t)
dt3.append!(t)
pt1.append!(t)
pt2.append!(t)
pt3.append!(t)
//生成TSDB引擎level file索引的缓存
pnodeRun(flushTSDBCache)
//output：12510
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__TSDBLevelFileIndex__"

//clearAllCache 清理TSDB引擎level file索引的缓存
pnodeRun(clearAllCache)
//output：0
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__TSDBLevelFileIndex__"</code></pre>
            </div>
        </article>
        <article class="- topic/topic topic nested2" aria-labelledby="ariaid-title11" id="topic_unm_cg3_b2c">
            <h3 class="- topic/title title topictitle3" id="ariaid-title11">2.8 TSDB引擎symbolBase缓存 </h3>
            <div class="- topic/body body">
                <p class="- topic/p p">在 TSDB 中，当分布式表中存储了 symbol 类型字段时，会在对其读或写时进行 SymbolBase 的缓存。</p>
                <p class="- topic/p p">在 2.00.13/3.00.1 版本之前，后台线程每 30s 会遍历所有缓存的 symbolBase，其中同时符合以下条件的 symbolBase
                    将被移出缓存：</p>
                <ul class="- topic/ul ul" id="topic_unm_cg3_b2c__ul_ph3_hh3_b2c" data-ofbid="topic_unm_cg3_b2c__ul_ph3_hh3_b2c">
                    <li class="- topic/li li">超过 5 分钟未被访问。</li>
                    <li class="- topic/li li">对应的数据既不在 Cache Engine 中，也不在正在进行的事务中。</li>
                </ul>
                <p class="- topic/p p">从 2.00.13/3.00.1 版本开始，我们对 TSDB symbolBase缓存清理机制进行修改，使用 LRU
                    缓存机制回收，移除缓存时根据容量和缓存时间两个维度来判断。容量通过配置项 TSDBCachedSymbolBaseCapacity 设置， 缓存时间通过配置项
                    TSDBSymbolBaseEvictTime 设置。</p>
                <p class="- topic/p p">从2.00.13/3.00.1 版本开始，<code class="+ topic/ph pr-d/codeph ph codeph">clearAllCache</code> 函数和
                        <code class="+ topic/ph pr-d/codeph ph codeph">clearAllTSDBSymbolBaseCache </code>函数都会清理 TSDB 中未被使用的 symbolBase
                    缓存。其中，未被使用的 symbolBase 是指其对应分区的数据不在 Cache Engine 中，也不在执行的任何事务中。</p>
                <p class="- topic/p p">例11. 使用 <code class="+ topic/ph pr-d/codeph ph codeph">clearAllCache</code>清理 TSDB 引擎的 symbolBase 缓存</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="topic_unm_cg3_b2c__codeblock_iy5_hh3_b2c" data-ofbid="topic_unm_cg3_b2c__codeblock_iy5_hh3_b2c"><code>//生成TSDB引擎symbolBase缓存
dbName = "dfs://test"
if(existsDatabase(dbName)){
    dropDatabase(dbName)
}
t = table(1..10 as x, symbol(string(1..10)) as y)
db = database(dbName, VALUE, 1..10,,"TSDB")
dt1 = createTable(db, t, `dt1,,"x").append!(t)
dt2 = createTable(db, t, `dt2,,"x").append!(t)
dt3 = createTable(db, t, `dt3,,"x").append!(t)
pt1 = createPartitionedTable(db, t, `pt1, `x,,"x").append!(t)
pt2 = createPartitionedTable(db, t, `pt2, `x,,"x").append!(t)
pt3 = createPartitionedTable(db, t, `pt3, `x,,"x").append!(t)

//output：438
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__TSDBCachedSymbolBase__"

//清理TSDB的symbolBase缓存
pnodeRun(flushTSDBCache)
sleep(61000) //flush后需等待1分钟
pnodeRun(clearAllCache)

//output：0
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__TSDBCachedSymbolBase__"</code></pre>
            </div>
        </article>
        <article class="- topic/topic topic nested2" aria-labelledby="ariaid-title12" id="topic_uwm_cg3_b2c">
            <h3 class="- topic/title title topictitle3" id="ariaid-title12">2.9 点位管理引擎的静态表缓存</h3>
            <div class="- topic/body body">
                <p class="- topic/p p">在点位管理引擎中，静态表存储对 sortColumns 中指定的除最后时间列外的其它列的映射。配置项 IOTDBStaticTableCacheSize
                    用于管理静态表缓存最大值，默认为 maxMemSize 的 5%。</p>
                <p class="- topic/p p">静态表缓存管理与 symbolBase 一致，系统会将同时符合以下条件的静态表缓存清理：</p>
                <ul class="- topic/ul ul" id="topic_uwm_cg3_b2c__ul_fxm_3h3_b2c" data-ofbid="topic_uwm_cg3_b2c__ul_fxm_3h3_b2c">
                    <li class="- topic/li li">定期（每隔 30 秒）踢出最近未使用的分区。</li>
                    <li class="- topic/li li">其对应的数据不在 Cache Engine 中，也不在正在进行的事务中。</li>
                </ul>
                <p class="- topic/p p">此外，静态表缓存可用 <a class="- topic/xref xref" href="../funcs/c/clearalliotdbstatictablecache.html">clearAllIOTDBStaticTableCache</a> 函数手动清理。</p>
                <p class="- topic/p p">例12. 使用 clearAllIOTDBStaticTableCache 清理静态表缓存</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="topic_uwm_cg3_b2c__codeblock_l4s_jh3_b2c" data-ofbid="topic_uwm_cg3_b2c__codeblock_l4s_jh3_b2c"><code>//生成静态表缓存
if(existsDatabase('dfs://test')){
	dropDatabase('dfs://test')
}
db1 = database(, partitionType=VALUE, partitionScheme=1..100)
db2 = database(, partitionType=VALUE, partitionScheme=2018.08.07..2018.08.11)
db = database('dfs://test', COMPO, [db1, db2], engine='IOTDB')
create table 'dfs://test'.'pt'(
	id INT,
	ticket SYMBOL,
	id2 LONG,
	ts TIMESTAMP,
	id3 IOTANY
)
partitioned by id, ts,
sortColumns=[`ticket, `id2, `ts],
sortKeyMappingFunction=[hashBucket{, 50}, hashBucket{, 50}],
latestKeyCache=true
pt = loadTable('dfs://test', 'pt')

n=10000
idv=take(1..100, n)
ticketv=take(`adsfe`basdfewf`csdffeaefast4et4eadf join NULL, n)
id2v=take(-2 3 4 5 NULL 2, n)
tsv=take(2018.08.07..2018.08.11, n)
id3v = take(string(1..1000000), n)
t = table(idv as id, ticketv as ticket, id2v as id2, tsv as ts, id3v as id3)
pt.append!(t)

//output：21600
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__IOTDBStaticTableCache__"

//clearAllIOTDBStaticTableCache 清理静态表缓存
pnodeRun(clearAllIOTDBStaticTableCache)

//output：0
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__IOTDBStaticTableCache__"
</code></pre>
            </div>
        </article>
        <article class="- topic/topic topic nested2" aria-labelledby="ariaid-title13" id="topic_adn_cg3_b2c">
            <h3 class="- topic/title title topictitle3" id="ariaid-title13">2.10 点位管理引擎的最新值缓存表缓存</h3>
            <div class="- topic/body body">
                <p class="- topic/p p">在点位管理引擎中，系统会实时更新最新值缓存，并直接从缓存而非磁盘中读取数据，创建以分区为单位的最新值缓存表。配置项 IOTDBLatestKeyCacheSize
                    用于管理最新值缓存表最大值，默认为 maxMemSize 的 5%。</p>
                <p class="- topic/p p">最新值缓存表缓存管理与 symbolBase 缓存管理机制相似，系统会将同时符合以下条件的最新值缓存表缓存清理：</p>
                <ul class="- topic/ul ul" id="topic_adn_cg3_b2c__ul_lcp_kh3_b2c" data-ofbid="topic_adn_cg3_b2c__ul_lcp_kh3_b2c">
                    <li class="- topic/li li">定期（每隔 30 秒）踢出最近未使用的分区。</li>
                    <li class="- topic/li li">其对应的数据不在 Cache Engine 中，也不在正在进行的事务中。 </li>
                </ul>
                <p class="- topic/p p">此外，最新值缓存表缓存可用 <a class="- topic/xref xref" href="../funcs/c/clearalliotdblatestkeycache.html">clearAllIOTDBLatestKeyCache</a> 函数手动清理（注：如果某个分区在Cache
                    Engine有数据，则该分区的最新值缓存表不会从内存缓存中清除)。</p>
                <p class="- topic/p p">例13. 使用 <code class="+ topic/ph pr-d/codeph ph codeph">clearAllIOTDBLatestKeyCache</code> 清理最新值缓存表缓存</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="topic_adn_cg3_b2c__codeblock_crh_mh3_b2c" data-ofbid="topic_adn_cg3_b2c__codeblock_crh_mh3_b2c"><code>//生成最新值缓存表缓存
if(existsDatabase('dfs://test')){
	dropDatabase('dfs://test')
}
db1 = database(, partitionType=VALUE, partitionScheme=1..100)
db2 = database(, partitionType=VALUE, partitionScheme=2018.08.07..2018.08.11)
db = database('dfs://test', COMPO, [db1, db2], engine='IOTDB')
create table 'dfs://test'.'pt'(
	id INT,
	ticket SYMBOL,
	id2 LONG,
	ts TIMESTAMP,
	id3 IOTANY
)
partitioned by id, ts,
sortColumns=[`ticket, `id2, `ts],
sortKeyMappingFunction=[hashBucket{, 50}, hashBucket{, 50}],
latestKeyCache=true
pt = loadTable('dfs://test', 'pt')

n=10000
idv=take(1..100, n)
ticketv=take(`adsfe`basdfewf`csdffeaefast4et4eadf join NULL, n)
id2v=take(-2 3 4 5 NULL 2, n)
tsv=take(2018.08.07..2018.08.11, n)
id3v = take(string(1..1000000), n)
t = table(idv as id, ticketv as ticket, id2v as id2, tsv as ts, id3v as id3)
pt.append!(t)

//output：55900
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__IOTDBLatestKeyCache__"

//clearAllIOTDBLatestKeyCache 清理最新值缓存表缓存
pnodeRun(flushTSDBCache)
pnodeRun(clearAllIOTDBLatestKeyCache)

//output：0
exec memSize from pnodeRun(getSessionMemoryStat) where userId="__IOTDBLatestKeyCache__"
</code></pre>
            </div>
        </article>
        <article class="- topic/topic topic nested2" aria-labelledby="ariaid-title14" id="topic_dnn_cg3_b2c">
            <h3 class="- topic/title title topictitle3" id="ariaid-title14">2.11 流数据消息缓存队列 </h3>
            <div class="- topic/body body">
                <p class="- topic/p p">DolphinDB 为流数据发送节点提供持久化队列缓存和发送队列缓存，为订阅节点提供接收数据队列缓存。</p>
                <p class="- topic/p p">当数据进入流数据系统时，首先写入流数据表，然后写入持久化队列和发送队列。假设用户设置为异步持久化，则持久化队列异步写入磁盘，发送队列发送到订阅端。
                    当订阅端收到数据后，先放入接受队列，然后用户定义的 handler 从接收队列中取数据并处理。如果 handler
                    处理缓慢，会导致接收队列有数据堆积，占用内存。</p>
                <p class="- topic/p p">StreamingPubQueue 为流数据发布队列里未处理的消息数， 其大小与 maxPubQueueDepthPerSite 配置项有关。</p>
                <p class="- topic/p p">StreamingSubQueue 为流数据订阅队列里未处理的消息数， 其大小与 maxSubQueueDepth 配置项有关。</p>
                <p class="- topic/p p">这两个类型的缓存只能等待消费完成后释放。</p>
            </div>
        </article>
    </article>
    <article class="- topic/topic topic nested1" aria-labelledby="ariaid-title15" id="topic_w3c_cg3_b2c">
        <h2 class="- topic/title title topictitle2" id="ariaid-title15">3. 小结</h2>
        <div class="- topic/body body">
            <p class="- topic/p p">综上所述，DolphinDB 中不同类型的缓存可以通过对应的清理函数或机制清除，总结的关系表如下：</p>
            <p class="- topic/p p">表 3-1 数据库缓存清理总结表</p>
            <div class="table-container"><table class="- topic/table table frame-all" id="topic_w3c_cg3_b2c__table_c2b_rh3_b2c" data-ofbid="topic_w3c_cg3_b2c__table_c2b_rh3_b2c" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead">
                        <tr class="- topic/row">
                            <th class="- topic/entry entry align-left colsep-1 rowsep-1" id="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__1"><strong class="+ topic/ph hi-d/b ph b">数据库缓存类型</strong></th>
                            <th class="- topic/entry entry align-left colsep-1 rowsep-1" id="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__2"><strong class="+ topic/ph hi-d/b ph b">介绍</strong></th>
                            <th class="- topic/entry entry align-left colsep-0 rowsep-1" id="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__3"><strong class="+ topic/ph hi-d/b ph b">清理方式</strong></th>
                        </tr>
                    </thead><tbody class="- topic/tbody tbody">
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__1">__DimensionalTable__</td>
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__2">维度表缓存，单位为 Bytes。</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__3">
                                <ul class="- topic/ul ul" id="topic_w3c_cg3_b2c__ul_g2b_rh3_b2c" data-ofbid="topic_w3c_cg3_b2c__ul_g2b_rh3_b2c">
                                    <li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">clearCachedDatabase</code>函数</li>
                                    <li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">clearAllCache</code>函数</li>
                                    <li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">warningMemSize</code>配置项</li>
                                </ul>
                            </td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__1">__SharedTable__</td>
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__2">共享表缓存，单位为 Bytes。</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__3"><code class="+ topic/ph pr-d/codeph ph codeph">undef</code>函数</td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__1">__OLAPTablet__</td>
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__2">OLAP 引擎数据库表的缓存，单位为 Bytes。</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__3">
                                <ul class="- topic/ul ul" id="topic_w3c_cg3_b2c__ul_h2b_rh3_b2c" data-ofbid="topic_w3c_cg3_b2c__ul_h2b_rh3_b2c">
                                    <li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">clearAllCache</code>函数</li>
                                    <li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">clearCachedDatabase</code>函数</li>
                                    <li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">warningMemSize</code>配置项</li>
                                </ul>
                            </td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__1">__OLAPCacheEngine__</td>
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__2">OLAP 引擎 Cache Engine 的内存占用，单位为 Bytes。</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__3">
                                <ul class="- topic/ul ul" id="topic_w3c_cg3_b2c__ul_i2b_rh3_b2c" data-ofbid="topic_w3c_cg3_b2c__ul_i2b_rh3_b2c">
                                    <li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">flushOLAPCache</code>函数</li>
                                    <li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">OLAPCacheEngineSize</code>配置项</li>
                                </ul>
                            </td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__1">__OLAPCachedSymbolBase__</td>
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__2">OLAP 引擎 SYMBOL 类型字典编码的缓存，单位为 Bytes。</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__3"> 后台线程自动清理</td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__1">__DFSMetadata__</td>
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__2">分布式存储的元数据内存占用情况，单位为字节。</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__3"> 非缓存，无需清理</td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__1">__TSDBCacheEngine__</td>
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__2">TSDB 引擎 Cache Engine 的内存占用，单位为 Bytes。</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__3">
                                <ul class="- topic/ul ul" id="topic_w3c_cg3_b2c__ul_j2b_rh3_b2c" data-ofbid="topic_w3c_cg3_b2c__ul_j2b_rh3_b2c">
                                    <li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">flushTSDBCache</code>函数</li>
                                    <li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">TSDBCacheEngineSize</code>配置项</li>
                                </ul>
                            </td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__1">__TSDBLevelFileIndex__</td>
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__2">TSDB 引擎 level file 索引的缓存，单位为 Bytes。</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__3">
                                <ul class="- topic/ul ul" id="topic_w3c_cg3_b2c__ul_k2b_rh3_b2c" data-ofbid="topic_w3c_cg3_b2c__ul_k2b_rh3_b2c">
                                    <li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">invalidateLevelIndexCache</code>函数</li>
                                    <li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">clearAllCache</code>函数</li>
                                    <li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">TSDBLevelFileIndexCacheSize</code>配置项</li>
                                </ul>
                            </td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__1">__TSDBCachedSymbolBase__</td>
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__2">TSDB 引擎 SYMBOL 类型字典编码的缓存，单位为 Bytes。</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__3">
                                <ul class="- topic/ul ul" id="topic_w3c_cg3_b2c__ul_l2b_rh3_b2c" data-ofbid="topic_w3c_cg3_b2c__ul_l2b_rh3_b2c">
                                    <li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">clearAllCache</code>函数</li>
                                    <li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">TSDBSymbolBaseEvictTime</code>配置项</li>
                                    <li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">TSDBCachedSymbolBaseCapacity</code>配置项</li>
                                </ul>
                            </td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__1">__IOTDBStaticTableCache__</td>
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__2">静态表缓存，单位为字节。</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__3">
                                <ul class="- topic/ul ul" id="topic_w3c_cg3_b2c__ul_m2b_rh3_b2c" data-ofbid="topic_w3c_cg3_b2c__ul_m2b_rh3_b2c">
                                    <li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">clearAllIOTDBStaticTableCache</code>函数</li>
                                    <li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">IOTDBStaticTableCacheSize</code>配置项</li>
                                </ul>
                            </td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__1">__IOTDBLatestKeyCache__</td>
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__2">最新值表缓存，单位为字节。</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__3">
                                <ul class="- topic/ul ul" id="topic_w3c_cg3_b2c__ul_n2b_rh3_b2c" data-ofbid="topic_w3c_cg3_b2c__ul_n2b_rh3_b2c">
                                    <li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">clearAllIOTDBLatestKeyCache</code>函数</li>
                                    <li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">IOTDBStaticTableCacheSize</code>配置项</li>
                                </ul>
                            </td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__1">__StreamingPubQueue__</td>
                            <td class="- topic/entry entry align-left colsep-1 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__2">流数据发布队列里未处理的消息数。</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-1" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__3"> 无需清理，等待消费完成</td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry align-left colsep-1 rowsep-0" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__1">__StreamingSubQueue__</td>
                            <td class="- topic/entry entry align-left colsep-1 rowsep-0" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__2">流数据订阅队列里未处理的消息数。</td>
                            <td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="topic_w3c_cg3_b2c__table_c2b_rh3_b2c__entry__3"> 无需清理，等待消费完成</td>
                        </tr>
                    </tbody></table></div>
        </div>
    </article>
</article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" aria-label="On this page" class="col-lg-2 d-none d-lg-block navbar d-print-none"> 
                            <div id="wh_topic_toc_content">
		                        
	                            <div class=" wh_topic_toc "><div class="wh_topic_label">在本页上</div><ul><li class="topic-item"><a href="#topic_j4v_bg3_b2c" data-tocid="topic_j4v_bg3_b2c">1. 数据库缓存类型</a></li><li class="topic-item"><a href="#topic_pxb_cg3_b2c" data-tocid="topic_pxb_cg3_b2c">2. 数据库缓存清理 </a><ul><li class="topic-item"><a href="#topic_odk_cg3_b2c" data-tocid="topic_odk_cg3_b2c">2.1 维度表缓存 </a></li><li class="topic-item"><a href="#topic_s4k_cg3_b2c" data-tocid="topic_s4k_cg3_b2c">2.2 共享表变量</a></li><li class="topic-item"><a href="#topic_cyk_cg3_b2c" data-tocid="topic_cyk_cg3_b2c">2.3 OLAP 引擎读缓存</a></li><li class="topic-item"><a href="#topic_dgl_cg3_b2c" data-tocid="topic_dgl_cg3_b2c">2.4 OLAP引擎写入缓存</a></li><li class="topic-item"><a href="#topic_vnl_cg3_b2c" data-tocid="topic_vnl_cg3_b2c">2.5 OLAP引擎symbolBase缓存</a></li><li class="topic-item"><a href="#topic_rvl_cg3_b2c" data-tocid="topic_rvl_cg3_b2c">2.6 TSDB引擎写入缓存</a></li><li class="topic-item"><a href="#topic_n2m_cg3_b2c" data-tocid="topic_n2m_cg3_b2c">2.7 TSDB引擎levelFile索引缓存</a></li><li class="topic-item"><a href="#topic_unm_cg3_b2c" data-tocid="topic_unm_cg3_b2c">2.8 TSDB引擎symbolBase缓存 </a></li><li class="topic-item"><a href="#topic_uwm_cg3_b2c" data-tocid="topic_uwm_cg3_b2c">2.9 点位管理引擎的静态表缓存</a></li><li class="topic-item"><a href="#topic_adn_cg3_b2c" data-tocid="topic_adn_cg3_b2c">2.10 点位管理引擎的最新值缓存表缓存</a></li><li class="topic-item"><a href="#topic_dnn_cg3_b2c" data-tocid="topic_dnn_cg3_b2c">2.11 流数据消息缓存队列 </a></li></ul></li><li class="topic-item"><a href="#topic_w3c_cg3_b2c" data-tocid="topic_w3c_cg3_b2c">3. 小结</a></li></ul></div>
	                        	
                        	</div>
                        </nav>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
<title>Copyright</title><p><b> ©2025 浙江智臾科技有限公司 浙ICP备18048711号-3</b></p>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
    </body>
</html>