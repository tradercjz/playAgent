<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" data-whc_version="26.0">
    <head><link rel="shortcut icon" href="../favicon.ico"/><link rel="icon" href="../favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="DolphinDB是一款高性能的分布式时序数据库，提供了分布式的存储和计算引擎，可以高效的满足金融和物联网等众多领域海量时序数据库的存储和计算用途。根据数据库排名权威DB-ENGINES ..."/><meta name="DC.rights.owner" content="(C) 版权 2025"/><meta name="copyright" content="(C) 版权 2025"/><meta name="generator" content="DITA-OT"/><meta name="DC.type" content="topic"/><meta name="DC.coverage" content=""/><meta name="DC.relation" content="../tutorials/about_tutorials.html"/><meta name="prodname" content="DolphinDB"/><meta name="brand" content="DolphinDB"/><meta name="DC.creator" content="DolphinDB"/><meta name="DC.publisher" content="DDB N/A DDB 200"/><meta name="DC.format" content="HTML5"/><meta name="DC.identifier" content="集群水平扩展性能测试"/><title>集群水平扩展性能测试</title><!--  Generated with Oxygen version 26.0, build number 2024012323.  --><meta name="wh-path2root" content="../"/><meta name="wh-toc-id" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;?workdir /tmp/temp20250305183303418/tutorials?&gt;&lt;?workdir-uri file:/tmp/temp20250305183303418/tutorials/?&gt;&lt;?path2project ../?&gt;&lt;?path2project-uri ../?&gt;&lt;?path2rootmap-uri ../?&gt;&lt;topic xmlns:dita-ot=&#34;http://dita-ot.sourceforge.net/ns/201007/dita-ot&#34; xmlns:ditaarch=&#34;http://dita.oasis-open.org/architecture/2005/&#34; class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;集群水平扩展性能测试&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:1;1:2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:1;1:2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群水平扩展性能测试&lt;/title&gt;&lt;prolog class=&#34;- topic/prolog &#34;&gt;&lt;author class=&#34;- topic/author &#34; xtrc=&#34;author:1;12:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/author&gt;&lt;publisherinformation class=&#34;- topic/publisher bookmap/publisherinformation &#34; xtrc=&#34;publisherinformation:1;14:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:1;15:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;printlocation class=&#34;- topic/data bookmap/printlocation &#34; xtrc=&#34;printlocation:1;16:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;N/A&lt;/printlocation&gt; &lt;published class=&#34;- topic/data bookmap/published &#34; xtrc=&#34;published:1;17:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:2;18:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;publishtype class=&#34;- topic/data bookmap/publishtype &#34; value=&#34;HTML&#34; xtrc=&#34;publishtype:1;19:44&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;revisionid class=&#34;- topic/ph bookmap/revisionid &#34; xtrc=&#34;revisionid:1;20:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;200&lt;/revisionid&gt; &lt;summary class=&#34;- topic/ph bookmap/summary &#34; xtrc=&#34;summary:1;22:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:1;23:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/published&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:2;25:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/publisherinformation&gt;&lt;metadata class=&#34;- topic/metadata &#34;&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:2;39:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:1;28:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;category class=&#34;- topic/category &#34; xtrc=&#34;category:1;29:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;prodinfo class=&#34;- topic/prodinfo &#34; xtrc=&#34;prodinfo:1;34:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;prodname class=&#34;- topic/prodname &#34; xtrc=&#34;prodname:1;35:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/prodname&gt; &lt;brand class=&#34;- topic/brand &#34; xtrc=&#34;brand:1;36:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/brand&gt; &lt;/prodinfo&gt;&lt;/metadata&gt;&lt;/prolog&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:1;1:2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;related-links class=&#34;- topic/related-links &#34;&gt;&lt;linkpool class=&#34;- topic/linkpool &#34; xtrc=&#34;topicref:167;214:89&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;../tutorials/about_tutorials.dita&#34; mapclass=&#34;- map/topicref bookmap/chapter &#34; role=&#34;parent&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:1;5:53&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot usertext?&gt;教程&lt;/linktext&gt;&lt;?ditaot usershortdesc?&gt;&lt;desc class=&#34;- topic/desc &#34;&gt;DolphinDB 产品使用教程&lt;/desc&gt;&lt;/link&gt;&lt;/linkpool&gt;&lt;/related-links&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1-概述&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:2;4:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:2;4:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;1. 概述&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:2;4:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:1;6:2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;DolphinDB是一款高性能的分布式时序数据库，提供了分布式的存储和计算引擎，可以高效的满足金融和物联网等众多领域海量时序数据库的存储和计算用途。根据数据库排名权威DB-ENGINES 2020年8月发布的全球时序数据库流行程度排名，DolphinDB排名第12，位居国产时序数据库之首。DolphinDB数据库支持水平扩展，允许在线增加节点。数据库的元数据和副本数据支持冗余和高可用，多节点之间的数据复制支持强一致性，这大大降低了运维的难度和工作量。数据的写入支持事务，数据的读取支持快照隔离，这些特点也让数据库在没有应用层的支持下即可满足较为苛刻的业务要求。 一个分布式数据库对ACID以及分布式功能的支持越好，系统的开销也会越大。工程实现能力显得尤为关键，否则节点增加带来的性能提升会被高昂的分布式开销快速冲蚀。本次测试的目的是检测DolphinDB数据库的水平扩展能力，也即DolphinDB集群整体的性能和节点增长之间的关系。为此，我们部署了4个集群，节点数分别为2，4，6和8，对数据库的分布式写入，读取和计算三个方面做了对比测试。实验结果显示DolphinDB集群从2个节点扩展到8个节点，在读，写和计算三个方面，系统的吞吐量均得到了几乎线性的提升。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;2-测试环境&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:3;10:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:3;10:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;2. 测试环境&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:3;10:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;21-硬件配置&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:4;12:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:4;12:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;2.1. 硬件配置&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:4;12:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:2;14:2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;测试使用四台配置相同的服务器（Server1，Server2，Server3，Server4），具体硬件配置如下：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:1;16:2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:1;16:2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;主机：PowerEdge R730xd&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:2;17:2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;CPU：E5-2650 24 CPU核 48超线程&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:3;18:2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;内存：512G&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:4;19:2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;硬盘：HDD 1.8T * 12&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:5;20:2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;网络：万兆以太网&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:6;21:2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;OS：CentOS Linux release 7.6.1810&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;22-集群配置&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:5;24:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:5;24:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;2.2. 集群配置&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:5;24:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:3;26:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;部署了4个集群用于对比测试，每个集群分别包含1，2，3和4个物理服务器。每个物理服务器上部署2个数据节点，因此4个集群的数据节点数分别为2，4，6和8。每个数据节点使用16个CPU核，64G内存和4个HDD。控制节点（存储元数据的节点)配置一个。本次测试的目的是测试DolphinDB集群的水平扩展能力，控制节点是否高可用与测试内容无关。4个集群的资源配置如下表所示。&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:1;28:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;4&#34; xtrc=&#34;tgroup:1;28:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:1;28:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:2;28:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:3;28:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col4&#34; colnum=&#34;4&#34; xtrc=&#34;colspec:4;28:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:1;28:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:1;28:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:1;28:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:2;28:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;部署机器&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:3;28:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;配置节点&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:4;28:84&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群资源占用&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:1;30:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:2;30:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:5;30:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群1&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:6;30:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;Server1&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:7;30:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;node1,node2&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:8;30:92&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;32Core，128GB内存，8 HDD&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:3;31:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:9;31:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群2&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:10;31:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;Server1 Server2&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:11;31:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;node1,node2 node3,node4&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:12;31:92&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;64Core，256GB内存，16 HDD&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:4;32:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:13;32:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群3&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:14;32:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;Server1 Server2 Server3&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:15;32:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;node1,node2 node3,node4 node5,node6&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:16;32:92&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;96Core，384GB内存，24HDD&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:5;33:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:17;33:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群4&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:18;33:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;Server1 Server2 Server3 Server4&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:19;33:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;node1,node2 node3,node4 node5,node6 node7,node8&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:20;33:92&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;128Core，512GB内存，32HDD&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:4;35:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;一个物理硬盘的读写吞吐量约为150MB/秒。一个数据节点读写的理论上限为600MB/秒。一个8节点的集群的磁盘吞吐能力的理论上限约为4.8G/秒。参数diskIOConcurrencyLevel配置为4，也即为每一个挂载的硬盘配置一个读写线程。将对一个磁盘的读写任务串行化到一个队列，避免了并发线程之间的磁盘读写竞争，有助于提升节点整体的读写吞吐能力。写入数据库的数据启用了数据压缩，压缩率约为20~25%。后续实验中发现集群的吞吐能力超过了磁盘的物理上限，就是因为启用了数据压缩。 数据的副本数配置为2。DolphinDB采用二阶段提交协议维护多副本之间的强一致性。DolphinDB的多副本冗余策略，不仅可以解决数据高可用的问题，也解决了负载均衡的问题。读数据时，可以就近选择或随机选择一个副本。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;3-数据写入性能测试&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:6;39:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:6;39:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;3. 数据写入性能测试&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:6;39:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;31-测试方案&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:7;41:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:7;41:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;3.1. 测试方案&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:7;41:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:5;43:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;通过C++ API客户端，向数据库并发写入数据，每个客户端启动16个写入线程，每批次写入20万条记录，每个线程共计写入10亿条数据。每条记录45个字节，类型为 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:1;43:81&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;[INT, DATE, SECOND, DOUBLE, DOUBLE, INT, INT, INT, CHAR, SYMBOL]&lt;/codeph&gt;，所以每个线程写入45GB数据，每个写入客户端同时启动，写入客户端部署如表-1所示：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:2;45:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:2;45:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:5;45:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:6;45:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:7;45:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:2;45:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:6;45:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:21;45:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:22;45:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;C++ 客户端&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:23;45:39&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;说明&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:2;47:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:7;47:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:24;47:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群1&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:25;47:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;Server1&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:26;47:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;部署1个写入客户端，启动16个写入线程&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:8;48:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:27;48:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群2&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:28;48:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;Server1 Server2&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:29;48:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;每个物理机器部署1个写入客户端，共部署2个，共启动32个写入线程&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:9;49:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:30;49:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群3&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:31;49:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;Server1 Server2 Server3&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:32;49:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;每个物理机器部署1个写入客户端，共部署3个，共启动48个写入线程&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:10;50:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:33;50:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群4&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:34;50:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;Server1 Server2 Server3 Server4&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:35;50:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;每个物理机器部署1个写入客户端，共部署4个，共启动64个写入线程&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;32-测试结果&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:8;52:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:8;52:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;3.2. 测试结果&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:8;52:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:6;53:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;每个线程写入10亿条数据，吞吐量按照写入条数除以时间计算。由于每个集群配置两个副本，数据量乘以2，总体性能如下表所示。&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:3;55:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;4&#34; xtrc=&#34;tgroup:3;55:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:8;55:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:9;55:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:10;55:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col4&#34; colnum=&#34;4&#34; xtrc=&#34;colspec:11;55:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:3;55:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:11;55:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:36;55:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:37;55:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;写入吞吐量(百万条/秒)&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:38;55:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;写入吞吐量(兆/秒)&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:39;55:36&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;按照2副本吞吐量(兆/秒)&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:3;57:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:12;57:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:40;57:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群1&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:41;57:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;4.69&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:42;57:32&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;201.3&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:43;57:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;402.6&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:13;58:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:44;58:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群2&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:45;58:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;7.23&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:46;58:32&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;310.3&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:47;58:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;620.6&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:14;59:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:48;59:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群3&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:49;59:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;10.93&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:50;59:32&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;469.1&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:51;59:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;938.2&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:15;60:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:52;60:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群4&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:53;60:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;14.58&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:54;60:32&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;625.7&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:55;60:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;1251.4&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:7;62:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:1;62:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;表1: DolphinDB集群数据写入吞吐量随节点数量的变化&lt;/b&gt;&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/cluster_scale4.png&#34; placement=&#34;break&#34; xtrc=&#34;image:1;64:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34; dita-ot:image-width=&#34;877&#34; dita-ot:image-height=&#34;511&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:1;64:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;图1：DolphinDB集群数据写入吞吐量随节点数量的变化&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:8;66:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:2;66:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;图1：DolphinDB集群数据写入吞吐量随节点数量的变化&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:9;68:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;上述测试中，我们将数据库的配置选项dataSync设置为1，也就是写入的元数据以及Write Ahead Log （WAL）必须强制刷入磁盘后，方可返回给客户端。现代操作系统为了提升磁盘写入性能，写入文件的数据通常先写入Page Buffer，然后再由操作系统批量将Page Buffer中的数据刷入磁盘。写入Page Buffer并不是完全可靠的，如果服务器掉电或操作系统崩溃均可能导致数据丢失。本次测试中元数据和WAL均写入一个SSD盘，写入吞吐量约在500MB/秒。由于每个物理服务器只配置了一个SSD盘，一个物理服务器上的两个逻辑节点实际上是共用了一个SSD盘。因此测试的4个DolphinDB集群写入能力的理论上限分别为0.5G/秒，1G/秒，1.5G/秒和2G/秒。第1个集群的吞吐能力约为理论上限的81%，第4个集群的吞吐能力为理论上限的63%。要想增加整个集群的写入吞吐能力，除了增加节点数量，还有一个办法便是每个数据节点进行垂直扩展，降低元数据写入延迟以及增加WAL的磁盘吞吐量。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:10;70:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;如果是非生产环境，服务器掉电的概率极低，将配置选项dataSync设置为0，也可以大幅提升数据库写入吞吐量。关闭dataSync选项后，元数据的写入不再强制刷入磁盘，副本数据的写入跳过WAL，直接写入数据库文件（不强制刷盘）。从表2和图2的实验结果可以看出，在此配置下，集群的写入吞吐量是开启选项dataSync的近4倍，而且展示了非常理想的线性扩展能力，也就是集群的吞吐量几乎等于等于单节点的吞吐量和节点数目的乘积。&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:4;72:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;4&#34; xtrc=&#34;tgroup:4;72:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:12;72:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:13;72:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:14;72:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col4&#34; colnum=&#34;4&#34; xtrc=&#34;colspec:15;72:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:4;72:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:16;72:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:56;72:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:57;72:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;写入吞吐量(百万条/秒)&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:58;72:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;写入吞吐量(兆/秒)&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:59;72:36&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;按照2副本吞吐量(兆/秒)&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:4;74:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:17;74:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:60;74:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群1&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:61;74:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;15.2&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:62;74:32&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;652.3&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:63;74:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;1304.6&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:18;75:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:64;75:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群2&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:65;75:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;31.3&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:66;75:32&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;1343.3&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:67;75:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;2686.5&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:19;76:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:68;76:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群3&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:69;76:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;48.0&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:70;76:32&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;2059.9&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:71;76:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;4119.9&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:20;77:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:72;77:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群4&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:73;77:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;61.7&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:74;77:32&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;2647.9&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:75;77:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;5295.8&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:11;79:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:3;79:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;表2: 关闭dataSync选项后DolphinDB集群数据写入吞吐量随节点数量的变化&lt;/b&gt;&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/cluster_scale6.png&#34; placement=&#34;break&#34; xtrc=&#34;image:2;81:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34; dita-ot:image-width=&#34;888&#34; dita-ot:image-height=&#34;530&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:2;81:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;图2：关闭dataSync选项后DolphinDB集群数据写入吞吐量随节点数量的变化&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:12;83:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:4;83:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;图2：关闭dataSync选项后DolphinDB集群数据写入吞吐量随节点数量的变化&lt;/b&gt;&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;4-数据读取性能测试&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:9;86:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:9;86:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;4. 数据读取性能测试&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:9;86:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;41-测试方案&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:10;88:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:10;88:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;4.1. 测试方案&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:10;88:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:13;90:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;四种集群配置下，通过C++ 客户端，从数据库中查询原始数据。测试每种集群配置情况下，随着并发用户数量的增加，集群读取数据吞吐量的性能变化趋势。为了避免客户端成为性能瓶颈，在不同的物理机器上分别部署客户端程序。 取数据方案是，每个连接随机取某天某只股票的所有数据，不断累加，直到取得数据总量超过1亿条，等所有用户取完，计算取的数据总量以及总的耗费时间的比值，作为集群吞吐量。 每个集群先写入4年数据，总的数据量约为2700亿条，数据量约12.6TB，压缩存储在磁盘上约3TB数据，这样可可以尽量避免并发用户取相同数据，模拟所有数据都从磁盘读取的情况。 每次取数据之前通过&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;cmd&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:1;95:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;echo 1 &amp;gt; /proc/sys/vm/drop_caches &lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:14;98:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;命令，强制清空操作系统对文件的缓存，也就是每次强制数据库读取HDD磁盘上的数据文件，由于数据库总量很大，可以认为所有数据都是从磁盘加载，出现取重复数据的概率很低。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;42--测试结果&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:11;100:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:11;100:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;4.2. 测试结果&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:11;100:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:15;102:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;并发用户数按照1/2/4/8/16/32/64/128个进行读取测试，总体性能如表-3所示。&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:5;104:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;5&#34; xtrc=&#34;tgroup:5;104:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:16;104:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:17;104:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:18;104:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col4&#34; colnum=&#34;4&#34; xtrc=&#34;colspec:19;104:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col5&#34; colnum=&#34;5&#34; xtrc=&#34;colspec:20;104:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:5;104:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:21;104:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:76;104:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;并发用户数&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:77;104:10&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群1吞吐量(百万条/秒)&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:78;104:26&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群2吞吐量(百万条/秒)&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:79;104:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群3吞吐量(百万条/秒)&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:80;104:58&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群4吞吐量(百万条/秒)&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:5;106:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:22;106:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:81;106:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;1&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:82;106:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;2.06&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:83;106:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;1.70&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:84;106:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;1.49&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:85;106:90&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;1.45&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:23;107:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:86;107:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;2&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:87;107:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;3.46&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:88;107:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;3.14&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:89;107:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;2.94&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:90;107:90&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;2.73&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:24;108:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:91;108:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;4&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:92;108:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;5.46&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:93;108:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;5.33&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:94;108:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;5.21&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:95;108:90&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;5.4&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:25;109:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:96;109:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;8&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:97;109:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;7.02&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:98;109:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;8.87&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:99;109:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;9.44&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:100;109:90&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;9.65&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:26;110:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:101;110:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;16&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:102;110:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;10.02&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:103;110:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;14.42&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:104;110:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;16.53&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:105;110:90&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;17.16&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:27;111:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:106;111:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;32&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:107;111:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;10.04&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:108;111:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;17.90&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:109;111:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;23.60&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:110;111:90&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;25.29&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:28;112:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:111;112:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;64&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:112;112:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;10.03&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:113;112:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;20.59&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:114;112:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;28.8&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:115;112:90&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;31.51&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:29;113:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:116;113:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;128&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:117;113:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;9.98&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:118;113:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;21.42&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:119;113:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;30.79&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:120;113:90&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;36.50&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:16;116:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:5;116:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;表3: 数据库查询吞吐量（百万条/秒）随节点数目和并发用户数量的变化&lt;/b&gt;&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:6;118:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;5&#34; xtrc=&#34;tgroup:6;118:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:21;118:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:22;118:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:23;118:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col4&#34; colnum=&#34;4&#34; xtrc=&#34;colspec:24;118:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col5&#34; colnum=&#34;5&#34; xtrc=&#34;colspec:25;118:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:6;118:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:30;118:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:121;118:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;并发用户数&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:122;118:10&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群1吞吐量(百万条/秒)&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:123;118:26&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群2吞吐量(百万条/秒)&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:124;118:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群3吞吐量(百万条/秒)&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:125;118:58&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群4吞吐量(百万条/秒)&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:6;120:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:31;120:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:126;120:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;1&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:127;120:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;88.4&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:128;120:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;73.0&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:129;120:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;63.9&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:130;120:90&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;62.2&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:32;121:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:131;121:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;2&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:132;121:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;148.5&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:133;121:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;134.8&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:134;121:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;126.2&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:135;121:90&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;117.2&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:33;122:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:136;122:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;4&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:137;122:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;234.3&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:138;122:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;228.7&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:139;122:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;223.6&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:140;122:90&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;231.7&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:34;123:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:141;123:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;8&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:142;123:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;301.3&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:143;123:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;380.7&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:144;123:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;405.1&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:145;123:90&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;414.1&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:35;124:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:146;124:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;16&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:147;124:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;430.0&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:148;124:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;618.8&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:149;124:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;709.4&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:150;124:90&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;736.4&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:36;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:151;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;32&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:152;125:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;430.9&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:153;125:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;768.2&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:154;125:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;1012.8&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:155;125:90&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;1085.3&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:37;126:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:156;126:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;64&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:157;126:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;430.4&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:158;126:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;883.6&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:159;126:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;1239.4&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:160;126:90&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;1352.3&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:38;127:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:161;127:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;128&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:162;127:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;428.3&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:163;127:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;919.2&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:164;127:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;1321.4&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:165;127:90&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;1566.4&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:17;129:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:6;129:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;表4: 数据库查询吞吐量（兆字节/秒）随节点数目和并发用户数量的变化&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:18;131:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;当并发用户较少时，多节点查询原始数据并无优势，甚至性能会略微下降，原因是当用户很少时，数据从远程节点拷贝到本地C++客户端，网络开销占比较大，集群的并行能力发挥非常有限。 随着并发用户数的增加，集群的优势越发明显。当并发用户数达到128时，从集群1（1台物理服务器，2个逻辑节点）到集群4（4台物理服务器，8个逻辑节点），读数据的吞吐量几乎跟节点数目呈线性关系。 实验展现的另一个现象是，随着发用户数增加，线程切换频繁，磁盘竞争以及网络都会成为资源瓶颈，集群的读吞吐量会上升，但边际效用递减，最后达到极限。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/cluster_scale9.png&#34; placement=&#34;break&#34; xtrc=&#34;image:3;135:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34; dita-ot:image-width=&#34;918&#34; dita-ot:image-height=&#34;552&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:3;135:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;图3：数据库查询吞吐量（兆字节/秒）随节点数目和并发用户数量的变化&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:19;137:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:7;137:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;图3：数据库查询吞吐量（兆字节/秒）随节点数目和并发用户数量的变化&lt;/b&gt;&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;5-数据库计算性能测试&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:12;140:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:12;140:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;5. 数据库计算性能测试&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:12;140:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:20;142:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;数据库写入4年美股的Level 1 TAQ（报价和交易）数据，总的数据量约为2700亿条数据，共计约12.6TB，压缩后存储在磁盘上占用空间约3TB。按照从简单到复杂，我们安排了三个计算型测试任务:(1)SQL多维过滤和分组计算， （2）分钟级K线生成和写入，（3）线性回归。这些任务的共同特点是计算需要的原始数据量非常大，但是计算结果的数据量非常小。 计算之前都需要从数据库文件读取数据。因此每个测试任务我们都考虑了两种情况：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:2;144:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:7;144:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;清除所有操作系统缓存&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:8;145:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;保留操作系统缓存。如果数据节点的内存很大，可以发挥缓存的优势。&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;51-sql多维过滤和分组计算&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:13;147:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:13;147:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;5.1. SQL多维过滤和分组计算&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:13;147:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;511-测试方案&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:14;149:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:14;149:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;5.1.1. 测试方案&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:14;149:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:21;151:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;选择金融市场的微观结构分析作为计算任务。具体说，分析美股从早上9;30开盘到16:00收盘，股票报价的价差 (spread) 有何规律。为了更好的发现价差和交易时段之间的关系，将所有股票的所有报价按分钟进行聚合计算平均价差。为了避免单天数据的偶然性，选择了一个星期的报价数据，总的数据量约16.7亿条记录，43GB大小。完整的SQL语句如下。quotes表是一个按照日期和股票代码组合分区的分布式表。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:2;152:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;select avg((ofr-bid)/(ofr+bid)*2) as avgSpread from quotes where date between 2007.08.01 : 2007.08.07, time between 09:30:00 : 15:59:59, ofr&amp;gt;bid, bid&amp;gt;0, ofr/bid&amp;lt;1.2 group by minute(time) as minute&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;512-测试结果&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:15;156:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:15;156:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;5.1.2. 测试结果&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:15;156:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:22;158:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;实验结果如表-5和图-4所示，不管有没有操作系统缓存，集群的计算吞吐量随着机器数量的增加几乎线性增长。计算下沉到数据侧，这样不需要将大量数据在节点间移动，只有处理后的少量数据汇总到发起节点做二次聚合处理。这种场景下的分布式计算，DolphinDB集群的计算吞吐量可以随着节点的增加而线性增加。值得一提的是在没有缓存的情况下，计算吞吐量已经超过了集群磁盘IO的理论上限，这是数据压缩的贡献。在有操作系统缓存的情况下，吞吐量有近50%的提升，这是因为在内存中读取文件数据，吞吐量增加了&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:7;160:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;5&#34; xtrc=&#34;tgroup:7;160:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:26;160:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:27;160:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:28;160:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col4&#34; colnum=&#34;4&#34; xtrc=&#34;colspec:29;160:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col5&#34; colnum=&#34;5&#34; xtrc=&#34;colspec:30;160:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:7;160:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:39;160:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:166;160:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:167;160:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;清除所有缓存(毫秒)&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:168;160:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;计算吞吐量(GB/秒)&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:169;160:35&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;保留缓存(毫秒）&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:170;160:46&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;计算吞吐量(GB/秒)&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:7;162:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:40;162:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:171;162:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群1&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:172;162:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;17,647&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:173;162:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;2.437&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:174;162:49&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;12,056&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:175;162:67&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;3.567&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:41;163:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:176;163:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群2&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:177;163:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;8,248&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:178;163:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;5.213&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:179;163:49&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;5,924&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:180;163:67&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;7.259&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:42;164:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:181;164:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群3&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:182;164:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;6,248&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:183;164:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;6.882&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:184;164:49&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;3,895&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:185;164:67&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;11.040&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:43;165:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:186;165:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群4&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:187;165:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;4,249&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:188;165:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;10.120&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:189;165:49&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;3,117&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:190;165:67&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;13.795&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:23;167:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:8;167:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;表5： SQL多维过滤和分组计算的吞吐量随节点数目的变化&lt;/b&gt;&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/cluster_scale11.png&#34; placement=&#34;break&#34; xtrc=&#34;image:4;169:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34; dita-ot:image-width=&#34;916&#34; dita-ot:image-height=&#34;552&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:4;169:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;图4： SQL多维过滤和分组计算的吞吐量随节点数目的变化&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:24;171:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:9;171:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;图4： SQL多维过滤和分组计算的吞吐量随节点数目的变化&lt;/b&gt;&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;52-使用map-reduce生成分钟级k线&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:16;173:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:16;173:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;5.2. 使用map-reduce生成分钟级K线&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:16;173:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:25;175:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;DolphinDB不仅支持使用SQL语句隐式的完成分布式计算，也允许用户显式的自定义map函数和reduce函数，并通过内置的map-reduce框架定制分布式计算。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;521-测试方案&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:17;177:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:17;177:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;5.2.1. 测试方案&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:17;177:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:26;179:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;这里我们使用map-reduce来计算生成一个月的分钟级K线数据，并将结果保存到同一个数据库的另一张数据表minuteQuotes中。核心脚本如下。计算涉及的数据量约为65亿条记录，172GB大小，最后生成的K线数据约6000万条。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:3;180:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;def saveMinuteQuote(t){ minuteQuotes=select avg(bid) as bid, avg(ofr) as ofr from t group by symbol, date, minute(time) as minute loadTable(&#34;dfs://TAQ&#34;, &#34;quotes_minute&#34;).append!(minuteQuotes) return minuteQuotes.size() } ds = sqlDS(&amp;lt;select symbol, date, time, bid, ofr from quotes where date between 2007.08.01 : 2007.08.31&amp;gt;) mr(ds, saveMinuteQuote, +)&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;522-测试结果&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:18;191:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:18;191:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;5.2.2. 测试结果&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:18;191:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:8;193:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;5&#34; xtrc=&#34;tgroup:8;193:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:31;193:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:32;193:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:33;193:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col4&#34; colnum=&#34;4&#34; xtrc=&#34;colspec:34;193:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col5&#34; colnum=&#34;5&#34; xtrc=&#34;colspec:35;193:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:8;193:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:44;193:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:191;193:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:192;193:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;清除所有缓存(毫秒)&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:193;193:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;计算吞吐量(GB/秒)&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:194;193:35&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;保留缓存(毫秒）&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:195;193:46&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;计算吞吐量(GB/秒)&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:8;195:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:45;195:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:196;195:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群1&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:197;195:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;181,508&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:198;195:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;0.947&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:199;195:49&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;33,808&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:200;195:67&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;5.087&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:46;196:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:201;196:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群2&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:202;196:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;97,034&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:203;196:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;1.772&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:204;196:49&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;18,859&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:205;196:67&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;9.120&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:47;197:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:206;197:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群3&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:207;197:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;62,996&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:208;197:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;2.730&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:209;197:49&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;12,134&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:210;197:67&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;14.174&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:48;198:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:211;198:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群4&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:212;198:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;48,801&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:213;198:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;3.524&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:214;198:49&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;9,630&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:215;198:67&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;19.928&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:27;200:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:10;200:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;表6： 分钟级K线计算的吞吐量随节点数目的变化&lt;/b&gt;&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/cluster_scale12.png&#34; placement=&#34;break&#34; xtrc=&#34;image:5;202:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34; dita-ot:image-width=&#34;1125&#34; dita-ot:image-height=&#34;262&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:5;202:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;图5：分钟级K线计算的吞吐量随节点数目的变化&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:28;204:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:11;204:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;图5：分钟级K线计算的吞吐量随节点数目的变化&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:29;206:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;实验结果如表-6和图-5所示，不管有没有操作系统缓存，集群的计算吞吐量随着机器数量的增加几乎线性增长。与前一个计算任务相比，当使用操作系统缓存时，带来了更明显的性能提升。当前任务缓存带来的提升约400%，而前一任务约为50%。究其原因，当前任务更彻底的将计算任务下沉到了数据端，导致计算在整个任务中的比重更低，凸显了IO缓存的功效。在前一任务中，在每个数据节点上按分钟和股票聚合的数据仍然需要汇总到发起节点进行二次聚合，而当前任务没有这个二次聚合的步骤。从这个例子我们也可以看到，将计算任务下沉到数据端并结合缓存（大内存）的使用，可以大大提升数据库类型的计算任务的性能。这也是DolphinDB要在分布式存储引擎的基础上，开发一个强大的计算引擎的初衷。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;53-分布式线性回归&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:19;208:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:19;208:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;5.3. 分布式线性回归&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:19;208:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:30;210:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;DolphinDB内置了近千个函数，大部分属于计算函数，涵盖从最简单的加减乘除到复杂的分布式机器学习算法。线性回归是金融分析中最常用的机器学习工具。为此，我们测试了分布式集群如何提升传统的机器学习算法线性回归的性能。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;531-测试方案&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:20;212:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:20;212:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;5.3.1. 测试方案&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:20;212:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:31;214:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;测试了两个计算变量spread和quotesize之间的关系。这两个变量不存在于原始的quotes表，而是通过表中的其它字段计算得到。数据选择了从8.1号到8.3号共3天的数据。总数据约10亿条记录，26.5G大小。核心的测试脚本如下。首先定义了一个数据源，然后赋给函数olsEx做分布式的线性回归计算。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:4;215:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;ds = sqlDS(&amp;lt;select ofr/bid-1 as spread, (bidsiz+ofrsiz)*(ofr+bid)\2 as quoteSize from quotes where date between 2007.08.01 : 2007.08.05, time between 09:30:00 : 15:59:59, ofr&amp;gt;bid, ofr&amp;gt;0, bid&amp;gt;0, ofr/bid&amp;lt;1.2&amp;gt;) olsEx(ds, `spread, `quoteSize, true, 2)&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;532-测试结果&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:21;220:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:21;220:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;5.3.2. 测试结果&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:21;220:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:9;222:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;5&#34; xtrc=&#34;tgroup:9;222:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:36;222:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:37;222:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:38;222:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col4&#34; colnum=&#34;4&#34; xtrc=&#34;colspec:39;222:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col5&#34; colnum=&#34;5&#34; xtrc=&#34;colspec:40;222:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:9;222:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:49;222:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:216;222:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:217;222:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;清除所有缓存(毫秒)&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:218;222:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;计算吞吐量(GB/秒)&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:219;222:35&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;保留缓存(毫秒）&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:220;222:46&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;计算吞吐量(GB/秒)&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:9;224:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:50;224:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:221;224:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群1&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:222;224:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;21,482&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:223;224:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;1.234&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:224;224:49&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;10,834&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:225;224:67&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;2.552&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:51;225:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:226;225:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群2&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:227;225:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;10,925&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:228;225:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;2.425&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:229;225:49&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;5,860&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:230;225:67&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;4.522&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:52;226:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:231;226:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群3&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:232;226:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;8,142&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:233;226:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;3.255&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:234;226:49&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;4,298&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:235;226:67&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;6.166&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:53;227:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:236;227:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;集群4&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:237;227:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;5,356&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:238;227:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;4.948&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:239;227:49&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;2,995&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:240;227:67&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;8.848&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:32;229:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:12;229:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;表7： 线性回归计算的吞吐量随节点数目的变化&lt;/b&gt;&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/cluster_scale15.png&#34; placement=&#34;break&#34; xtrc=&#34;image:6;231:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34; dita-ot:image-width=&#34;877&#34; dita-ot:image-height=&#34;530&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:6;231:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;图6： 线性回归计算的吞吐量随节点数目的变化&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:33;233:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:13;233:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;图6： 线性回归计算的吞吐量随节点数目的变化&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:34;235:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;根据测试结果，随着节点的增加，两种场景下的性能基本保持了线性提升。在有缓存的情况下，性能表现更加突出。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;6-小结&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:22;238:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:22;238:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;6. 小结&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:22;238:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:35;240:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;通过对分布式数据库DolphinDB在写，读和计算三方面的测试，展示了其优秀的近乎线性的水平扩展能力。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:3;242:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:9;242:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;在数据写入方面，优化分区机制和多客户端并发批量写入，能极大的提升写入的性能。开启dataSync（写入数据必须同步刷入磁盘）选项的情况下，增加集群节点数，可以快速提升整体的写入吞吐量，但单节点的平均性能性能随着节点数的增加，略有衰减。4台机器构成的集群的最大写入量约1450万条/秒，达到1.25G/秒的写入吞吐量。关闭dataSync选项后，写入吞吐量随着节点数线性提升。4机器集群吞吐量超过6170万条/秒，约5.3G/秒的写入量。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:10;243:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;在数据读取方面，对于某个集群，随着用户数增加，吞吐量逐步增长，但并不是并发数越多，吞吐量越大，吞吐量受到硬件资源的限制，存在性能的极限。从集群规模的增长看，随着节点数的增加，集群的吞吐量几乎线性提升。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:11;244:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cluster_scaleout_perf_test.md&#34;&gt;从计算性能趋势看，DolphinDB的分布式计算框架，可以最大化利用集群资源，计算放在数据侧，减少数据在节点间移动，集群性能随着节点个数增加几乎线性提升。另外，DolphinDB也会充分利用系统缓存，当数据被缓存后，后续计算性能也会大幅提升。&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;"/><meta name="wh-source-relpath" content="tutorials/cluster_scaleout_perf_test.md"/><meta name="wh-out-relpath" content="tutorials/cluster_scaleout_perf_test.html"/>

    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/commons.css?buildId=2024012323"/>
    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic.css?buildId=2024012323"/>

    <script src="../oxygen-webhelp/app/options/properties.js?buildId=20250305183303"></script>
    <script src="../oxygen-webhelp/app/localization/strings.js?buildId=2024012323"></script>
    <script src="../oxygen-webhelp/app/search/index/keywords.js?buildId=20250305183303"></script>
    <script defer="defer" src="../oxygen-webhelp/app/commons.js?buildId=2024012323"></script>
    <script defer="defer" src="../oxygen-webhelp/app/topic.js?buildId=2024012323"></script>
<link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/styles.css?buildId=2024012323"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script></head>

    <body id="集群水平扩展性能测试" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            跳转到主要内容
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div xmlns:whc="http://www.oxygenxml.com/webhelp/components" class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="https://docs.dolphindb.cn/zh/index.html" class=" wh_logo d-none d-sm-block "><img src="../logo.png" alt="  DolphinDB 文档中心  "/></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="booktitle">  <span class="ph mainbooktitle">DolphinDB 文档中心</span>  </span></a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="搜索 " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="搜索查询" required="required"/><button type="submit" class="wh_search_button" aria-label="搜索"><span class="search_input_text">搜索</span></button></div></form>
            
            <script src="/vendors/react/umd/react.production.min.js" defer="defer"></script>
<script src="/vendors/react-dom/umd/react-dom.production.min.js" defer="defer"></script>
<script src="/vendors/dayjs/dayjs.min.js" defer="defer"></script>
<script src="/vendors/antd/dist/antd.min.js" defer="defer"></script>
<script src="/vendors/@ant-design/icons/dist/index.umd.min.js" defer="defer"></script>
<script src="/zh/index.js" type="module"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" defer="defer"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer="defer"><!--


--></script>
<script defer="defer"><!--

// 从主页重定向
const currentUrl = window.location.href;

// 判断当前URL是否包含index.html并且路径最后部分是index.html
if (currentUrl.endsWith('index.html')) {
    // 处理根目录下的index.html跳转
    const baseUrl = currentUrl.split('/index.html')[0]; // 获取index.html之前的部分
    const redirectUrl = `${baseUrl}/about/ddb_intro.html`; // 构建跳转路径
    window.location.href = redirectUrl; // 执行跳转
}

--></script>
            
        </div></div>
    </div>
</header>
        
        
         
        
        
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="../index.html"><span>主页</span></a></span></li><li><div class="topicref" data-id="about_tutorials"><div class="title"><a href="../tutorials/about_tutorials.html"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div></li><li><div class="topicref"><div class="title"><a href="../tutorials/api_performance.html">测试报告</a></div></div></li><li class="active"><div class="topicref" data-id="集群水平扩展性能测试"><div class="title"><a href="../tutorials/cluster_scaleout_perf_test.html">集群水平扩展性能测试</a></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="切换搜索突出显示" title="切换搜索突出显示"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="折叠截面" title="折叠截面"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="打印此页" aria-label="打印此页"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem"><div data-tocid="ddb_intro-d9713e87" class="topicref" data-id="ddb_intro" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../about/ddb_intro.html" id="ddb_intro-d9713e87-link">关于DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="chap1_getstarted-d9713e136" class="topicref" data-id="chap1_getstarted" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../getstarted/chap1_getstarted.html" id="chap1_getstarted-d9713e136-link">快速上手</a><div class="wh-tooltip"><p class="shortdesc">如何快速部署 DolphinDB、建库建表、写入和查询数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="sectionddb_deployment-d9713e189" class="topicref" data-id="sectionddb_deployment" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action sectionddb_deployment-d9713e189-link" class="wh-expand-btn"></span><div class="title"><a href="../deploy/deploy_intro.html" id="sectionddb_deployment-d9713e189-link"><span class="keyword label">部署</span></a><div class="wh-tooltip"><p class="shortdesc">如何在不同的场景中部署 DolphinDB</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259" class="topicref" data-id="new_chap_database_manage_new_chap_dbmanage_landing_page" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/cfg/db_intro.html" id="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link"><span class="keyword label">数据库</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 数据库的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_streaming-d9713e3760" class="topicref" data-id="chap7_tutorials_streaming" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_streaming-d9713e3760-link" class="wh-expand-btn"></span><div class="title"><a href="../stream/str_intro.html" id="chap7_tutorials_streaming-d9713e3760-link"><span class="keyword label">流数据</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 流数据引擎及流数据计算的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e7513" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e7513-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/db_oper/import_data.html" id="tocId-d9713e7513-link">数据迁移</a><div class="wh-tooltip"><p class="shortdesc">如何从不同数据源向 DolphinDB 迁移数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_system_management-d9713e7940" class="topicref" data-id="chap7_tutorials_system_management" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_system_management-d9713e7940-link" class="wh-expand-btn"></span><div class="title"><a href="../sys_man/om_intro.html" id="chap7_tutorials_system_management-d9713e7940-link"><span class="keyword label">系统运维</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 的系统运维功能及方法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="troubleshooting-d9713e8780" class="topicref" data-id="troubleshooting" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action troubleshooting-d9713e8780-link" class="wh-expand-btn"></span><div class="title"><a href="../error_codes/troubleshooting.html" id="troubleshooting-d9713e8780-link">故障排查</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="about_language_resources-d9713e20911" class="topicref" data-id="about_language_resources" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action about_language_resources-d9713e20911-link" class="wh-expand-btn"></span><div class="title"><a href="../progr/progr_intro.html" id="about_language_resources-d9713e20911-link"><span class="keyword label">编程语言</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 编程基本概念与方法、SQL 在 DolphinDB 的应用</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="functions_references-d9713e30925" class="topicref" data-id="functions_references" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action functions_references-d9713e30925-link" class="wh-expand-btn"></span><div class="title"><a href="../funcs/funcs_intro.html" id="functions_references-d9713e30925-link"><span class="keyword label">函数参考</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 函数分类、语法、详解及示例</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="api_protocol-d9713e94064" class="topicref" data-id="api_protocol" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action api_protocol-d9713e94064-link" class="wh-expand-btn"></span><div class="title"><a href="../api/connapi_intro.html" id="api_protocol-d9713e94064-link"><span class="keyword label">连接器 &amp; API</span></a><div class="wh-tooltip"><p class="shortdesc">面向不同编程语言的 DolphinDB API 及连接器，相关协议和用法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap6_plugin-d9713e94210" class="topicref" data-id="chap6_plugin" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap6_plugin-d9713e94210-link" class="wh-expand-btn"></span><div class="title"><a href="../plugins/plg_intro.html" id="chap6_plugin-d9713e94210-link"><span class="keyword label">插件</span></a><div class="wh-tooltip"><p class="shortdesc">多个应用场景的插件使用说明和插件开发指导</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="third_party-d9713e97904" class="topicref" data-id="third_party" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action third_party-d9713e97904-link" class="wh-expand-btn"></span><div class="title"><a href="../third_party.html" id="third_party-d9713e97904-link">第三方工具</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="about_tutorials-d9713e98227" class="topicref" data-id="about_tutorials" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action about_tutorials-d9713e98227-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/about_tutorials.html" id="about_tutorials-d9713e98227-link"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98280" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98280-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/new_users_finance.html" id="tocId-d9713e98280-link">新用户入门</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98327" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98327-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/database.html" id="tocId-d9713e98327-link">数据库</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e99111" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e99111-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/std_sql_ddb.html" id="tocId-d9713e99111-link">编程</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100448" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100448-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming-real-time-correlation-processing_2.html" id="tocId-d9713e100448-link">流数据</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100955" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100955-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/scheduledJob_2.html" id="tocId-d9713e100955-link">系统运维</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="模块概述-d9713e101923" class="topicref" data-id="模块概述" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action 模块概述-d9713e101923-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/tu_modules.html" id="模块概述-d9713e101923-link">模块</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e102568" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e102568-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/OHLC_2.html" id="tocId-d9713e102568-link">金融场景案例</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e104827" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e104827-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_engine_anomaly_alerts_2.html" id="tocId-d9713e104827-link">物联网场景案例</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105795" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105795-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/dolphindb_tensor_libtorch_tutorial.html" id="tocId-d9713e105795-link">机器学习</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="tocId-d9713e105842" class="topicref" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action tocId-d9713e105842-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/api_performance.html" id="tocId-d9713e105842-link">测试报告</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="api性能基准测试报告-d9713e105843" class="topicref" data-id="api性能基准测试报告" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/api_performance.html" id="api性能基准测试报告-d9713e105843-link">API性能基准测试报告</a></div></div></li><li role="treeitem" class="active"><div data-tocid="集群水平扩展性能测试-d9713e105889" class="topicref" data-id="集群水平扩展性能测试" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/cluster_scaleout_perf_test.html" id="集群水平扩展性能测试-d9713e105889-link">集群水平扩展性能测试</a></div></div></li><li role="treeitem"><div data-tocid="金融市场高频数据的有效管理-d9713e105935" class="topicref" data-id="金融市场高频数据的有效管理" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/pickle_comparison.html" id="金融市场高频数据的有效管理-d9713e105935-link">金融市场高频数据的有效管理</a></div></div></li></ul></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105982" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105982-link" class="wh-expand-btn"></span><div class="title"><a href="../rn/server/3_00_2.html" id="tocId-d9713e105982-link">版本说明</a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 版本发布历史</p></div></div></div></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-7 col-md-9 col-sm-12" id="wh_topic_body">
                        <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        <button id="wh_close_topic_toc_button" class="close-toc-button d-none" aria-label="Toggle topic table of content" aria-controls="wh_topic_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        <div class=" wh_topic_content body "><main role="main"><article class="- topic/topic topic" role="article" aria-labelledby="ariaid-title1"><h1 class="- topic/title title topictitle1" id="ariaid-title1">集群水平扩展性能测试</h1><div class="- topic/body body"></div><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title2" id="1-概述"><h2 class="- topic/title title topictitle2" id="ariaid-title2">1. 概述</h2><div class="- topic/body body"><p class="- topic/p p">DolphinDB是一款高性能的分布式时序数据库，提供了分布式的存储和计算引擎，可以高效的满足金融和物联网等众多领域海量时序数据库的存储和计算用途。根据数据库排名权威DB-ENGINES 2020年8月发布的全球时序数据库流行程度排名，DolphinDB排名第12，位居国产时序数据库之首。DolphinDB数据库支持水平扩展，允许在线增加节点。数据库的元数据和副本数据支持冗余和高可用，多节点之间的数据复制支持强一致性，这大大降低了运维的难度和工作量。数据的写入支持事务，数据的读取支持快照隔离，这些特点也让数据库在没有应用层的支持下即可满足较为苛刻的业务要求。
一个分布式数据库对ACID以及分布式功能的支持越好，系统的开销也会越大。工程实现能力显得尤为关键，否则节点增加带来的性能提升会被高昂的分布式开销快速冲蚀。本次测试的目的是检测DolphinDB数据库的水平扩展能力，也即DolphinDB集群整体的性能和节点增长之间的关系。为此，我们部署了4个集群，节点数分别为2，4，6和8，对数据库的分布式写入，读取和计算三个方面做了对比测试。实验结果显示DolphinDB集群从2个节点扩展到8个节点，在读，写和计算三个方面，系统的吞吐量均得到了几乎线性的提升。</p></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title3" id="2-测试环境"><h2 class="- topic/title title topictitle2" id="ariaid-title3">2. 测试环境</h2><div class="- topic/body body"></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title4" id="21-硬件配置"><h3 class="- topic/title title topictitle3" id="ariaid-title4">2.1. 硬件配置</h3><div class="- topic/body body"><p class="- topic/p p">测试使用四台配置相同的服务器（Server1，Server2，Server3，Server4），具体硬件配置如下：</p><ul class="- topic/ul ul"><li class="- topic/li li">主机：PowerEdge R730xd</li><li class="- topic/li li">CPU：E5-2650  24 CPU核 48超线程</li><li class="- topic/li li">内存：512G</li><li class="- topic/li li">硬盘：HDD  1.8T * 12</li><li class="- topic/li li">网络：万兆以太网</li><li class="- topic/li li">OS：CentOS Linux release 7.6.1810</li></ul></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title5" id="22-集群配置"><h3 class="- topic/title title topictitle3" id="ariaid-title5">2.2. 集群配置</h3><div class="- topic/body body"><p class="- topic/p p">部署了4个集群用于对比测试，每个集群分别包含1，2，3和4个物理服务器。每个物理服务器上部署2个数据节点，因此4个集群的数据节点数分别为2，4，6和8。每个数据节点使用16个CPU核，64G内存和4个HDD。控制节点（存储元数据的节点)配置一个。本次测试的目的是测试DolphinDB集群的水平扩展能力，控制节点是否高可用与测试内容无关。4个集群的资源配置如下表所示。</p><div class="table-container"><table class="- topic/table table" data-cols="4"><caption></caption><colgroup><col/><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="22-集群配置__entry__1">集群</th><th class="- topic/entry entry colsep-0 rowsep-0" id="22-集群配置__entry__2">部署机器</th><th class="- topic/entry entry colsep-0 rowsep-0" id="22-集群配置__entry__3">配置节点</th><th class="- topic/entry entry colsep-0 rowsep-0" id="22-集群配置__entry__4">集群资源占用</th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="22-集群配置__entry__1">集群1</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="22-集群配置__entry__2">Server1</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="22-集群配置__entry__3">node1,node2</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="22-集群配置__entry__4">32Core，128GB内存，8 HDD</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="22-集群配置__entry__1">集群2</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="22-集群配置__entry__2">Server1 Server2</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="22-集群配置__entry__3">node1,node2 node3,node4</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="22-集群配置__entry__4">64Core，256GB内存，16 HDD</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="22-集群配置__entry__1">集群3</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="22-集群配置__entry__2">Server1 Server2 Server3</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="22-集群配置__entry__3">node1,node2 node3,node4 node5,node6</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="22-集群配置__entry__4">96Core，384GB内存，24HDD</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="22-集群配置__entry__1">集群4</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="22-集群配置__entry__2">Server1 Server2 Server3 Server4</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="22-集群配置__entry__3">node1,node2 node3,node4 node5,node6 node7,node8</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="22-集群配置__entry__4">128Core，512GB内存，32HDD</td></tr></tbody></table></div><p class="- topic/p p">一个物理硬盘的读写吞吐量约为150MB/秒。一个数据节点读写的理论上限为600MB/秒。一个8节点的集群的磁盘吞吐能力的理论上限约为4.8G/秒。参数diskIOConcurrencyLevel配置为4，也即为每一个挂载的硬盘配置一个读写线程。将对一个磁盘的读写任务串行化到一个队列，避免了并发线程之间的磁盘读写竞争，有助于提升节点整体的读写吞吐能力。写入数据库的数据启用了数据压缩，压缩率约为20~25%。后续实验中发现集群的吞吐能力超过了磁盘的物理上限，就是因为启用了数据压缩。
数据的副本数配置为2。DolphinDB采用二阶段提交协议维护多副本之间的强一致性。DolphinDB的多副本冗余策略，不仅可以解决数据高可用的问题，也解决了负载均衡的问题。读数据时，可以就近选择或随机选择一个副本。</p></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title6" id="3-数据写入性能测试"><h2 class="- topic/title title topictitle2" id="ariaid-title6">3. 数据写入性能测试</h2><div class="- topic/body body"></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title7" id="31-测试方案"><h3 class="- topic/title title topictitle3" id="ariaid-title7">3.1. 测试方案</h3><div class="- topic/body body"><p class="- topic/p p">通过C++ API客户端，向数据库并发写入数据，每个客户端启动16个写入线程，每批次写入20万条记录，每个线程共计写入10亿条数据。每条记录45个字节，类型为 <code class="+ topic/ph pr-d/codeph ph codeph">[INT, DATE, SECOND, DOUBLE, DOUBLE, INT, INT, INT, CHAR, SYMBOL]</code>，所以每个线程写入45GB数据，每个写入客户端同时启动，写入客户端部署如表-1所示：</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="31-测试方案__entry__1">集群</th><th class="- topic/entry entry colsep-0 rowsep-0" id="31-测试方案__entry__2">C++ 客户端</th><th class="- topic/entry entry colsep-0 rowsep-0" id="31-测试方案__entry__3">说明</th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="31-测试方案__entry__1">集群1</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="31-测试方案__entry__2">Server1</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="31-测试方案__entry__3">部署1个写入客户端，启动16个写入线程</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="31-测试方案__entry__1">集群2</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="31-测试方案__entry__2">Server1 Server2</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="31-测试方案__entry__3">每个物理机器部署1个写入客户端，共部署2个，共启动32个写入线程</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="31-测试方案__entry__1">集群3</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="31-测试方案__entry__2">Server1 Server2 Server3</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="31-测试方案__entry__3">每个物理机器部署1个写入客户端，共部署3个，共启动48个写入线程</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="31-测试方案__entry__1">集群4</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="31-测试方案__entry__2">Server1 Server2 Server3 Server4</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="31-测试方案__entry__3">每个物理机器部署1个写入客户端，共部署4个，共启动64个写入线程</td></tr></tbody></table></div></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title8" id="32-测试结果"><h3 class="- topic/title title topictitle3" id="ariaid-title8">3.2. 测试结果</h3><div class="- topic/body body"><p class="- topic/p p">每个线程写入10亿条数据，吞吐量按照写入条数除以时间计算。由于每个集群配置两个副本，数据量乘以2，总体性能如下表所示。</p><div class="table-container"><table class="- topic/table table" data-cols="4"><caption></caption><colgroup><col/><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="32-测试结果__entry__1">集群</th><th class="- topic/entry entry colsep-0 rowsep-0" id="32-测试结果__entry__2">写入吞吐量(百万条/秒)</th><th class="- topic/entry entry colsep-0 rowsep-0" id="32-测试结果__entry__3">写入吞吐量(兆/秒)</th><th class="- topic/entry entry colsep-0 rowsep-0" id="32-测试结果__entry__4">按照2副本吞吐量(兆/秒)</th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__1">集群1</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__2">4.69</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__3">201.3</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__4">402.6</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__1">集群2</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__2">7.23</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__3">310.3</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__4">620.6</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__1">集群3</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__2">10.93</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__3">469.1</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__4">938.2</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__1">集群4</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__2">14.58</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__3">625.7</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__4">1251.4</td></tr></tbody></table></div><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">表1: DolphinDB集群数据写入吞吐量随节点数量的变化</strong></p><br/><img class="- topic/image image" src="images/cluster_scale4.png" alt="图1：DolphinDB集群数据写入吞吐量随节点数量的变化"/><br/><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">图1：DolphinDB集群数据写入吞吐量随节点数量的变化</strong></p><p class="- topic/p p">上述测试中，我们将数据库的配置选项dataSync设置为1，也就是写入的元数据以及Write Ahead Log （WAL）必须强制刷入磁盘后，方可返回给客户端。现代操作系统为了提升磁盘写入性能，写入文件的数据通常先写入Page Buffer，然后再由操作系统批量将Page Buffer中的数据刷入磁盘。写入Page Buffer并不是完全可靠的，如果服务器掉电或操作系统崩溃均可能导致数据丢失。本次测试中元数据和WAL均写入一个SSD盘，写入吞吐量约在500MB/秒。由于每个物理服务器只配置了一个SSD盘，一个物理服务器上的两个逻辑节点实际上是共用了一个SSD盘。因此测试的4个DolphinDB集群写入能力的理论上限分别为0.5G/秒，1G/秒，1.5G/秒和2G/秒。第1个集群的吞吐能力约为理论上限的81%，第4个集群的吞吐能力为理论上限的63%。要想增加整个集群的写入吞吐能力，除了增加节点数量，还有一个办法便是每个数据节点进行垂直扩展，降低元数据写入延迟以及增加WAL的磁盘吞吐量。</p><p class="- topic/p p">如果是非生产环境，服务器掉电的概率极低，将配置选项dataSync设置为0，也可以大幅提升数据库写入吞吐量。关闭dataSync选项后，元数据的写入不再强制刷入磁盘，副本数据的写入跳过WAL，直接写入数据库文件（不强制刷盘）。从表2和图2的实验结果可以看出，在此配置下，集群的写入吞吐量是开启选项dataSync的近4倍，而且展示了非常理想的线性扩展能力，也就是集群的吞吐量几乎等于等于单节点的吞吐量和节点数目的乘积。</p><div class="table-container"><table class="- topic/table table" data-cols="4"><caption></caption><colgroup><col/><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="32-测试结果__entry__21">集群</th><th class="- topic/entry entry colsep-0 rowsep-0" id="32-测试结果__entry__22">写入吞吐量(百万条/秒)</th><th class="- topic/entry entry colsep-0 rowsep-0" id="32-测试结果__entry__23">写入吞吐量(兆/秒)</th><th class="- topic/entry entry colsep-0 rowsep-0" id="32-测试结果__entry__24">按照2副本吞吐量(兆/秒)</th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__21">集群1</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__22">15.2</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__23">652.3</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__24">1304.6</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__21">集群2</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__22">31.3</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__23">1343.3</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__24">2686.5</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__21">集群3</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__22">48.0</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__23">2059.9</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__24">4119.9</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__21">集群4</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__22">61.7</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__23">2647.9</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-测试结果__entry__24">5295.8</td></tr></tbody></table></div><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">表2: 关闭dataSync选项后DolphinDB集群数据写入吞吐量随节点数量的变化</strong></p><br/><img class="- topic/image image" src="images/cluster_scale6.png" alt="图2：关闭dataSync选项后DolphinDB集群数据写入吞吐量随节点数量的变化"/><br/><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">图2：关闭dataSync选项后DolphinDB集群数据写入吞吐量随节点数量的变化</strong></p></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title9" id="4-数据读取性能测试"><h2 class="- topic/title title topictitle2" id="ariaid-title9">4. 数据读取性能测试</h2><div class="- topic/body body"></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title10" id="41-测试方案"><h3 class="- topic/title title topictitle3" id="ariaid-title10">4.1. 测试方案</h3><div class="- topic/body body"><p class="- topic/p p">四种集群配置下，通过C++ 客户端，从数据库中查询原始数据。测试每种集群配置情况下，随着并发用户数量的增加，集群读取数据吞吐量的性能变化趋势。为了避免客户端成为性能瓶颈，在不同的物理机器上分别部署客户端程序。
取数据方案是，每个连接随机取某天某只股票的所有数据，不断累加，直到取得数据总量超过1亿条，等所有用户取完，计算取的数据总量以及总的耗费时间的比值，作为集群吞吐量。
每个集群先写入4年数据，总的数据量约为2700亿条，数据量约12.6TB，压缩存储在磁盘上约3TB数据，这样可可以尽量避免并发用户取相同数据，模拟所有数据都从磁盘读取的情况。
每次取数据之前通过</p><pre class="+ topic/pre pr-d/codeblock pre codeblock cmd"><strong class="hl-keyword">echo</strong> <span class="hl-number">1</span> &gt; /proc/sys/vm/drop_caches </pre><p class="- topic/p p">命令，强制清空操作系统对文件的缓存，也就是每次强制数据库读取HDD磁盘上的数据文件，由于数据库总量很大，可以认为所有数据都是从磁盘加载，出现取重复数据的概率很低。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title11" id="42--测试结果"><h3 class="- topic/title title topictitle3" id="ariaid-title11">4.2.  测试结果</h3><div class="- topic/body body"><p class="- topic/p p">并发用户数按照1/2/4/8/16/32/64/128个进行读取测试，总体性能如表-3所示。</p><div class="table-container"><table class="- topic/table table" data-cols="5"><caption></caption><colgroup><col/><col/><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="42--测试结果__entry__1">并发用户数</th><th class="- topic/entry entry colsep-0 rowsep-0" id="42--测试结果__entry__2">集群1吞吐量(百万条/秒)</th><th class="- topic/entry entry colsep-0 rowsep-0" id="42--测试结果__entry__3">集群2吞吐量(百万条/秒)</th><th class="- topic/entry entry colsep-0 rowsep-0" id="42--测试结果__entry__4">集群3吞吐量(百万条/秒)</th><th class="- topic/entry entry colsep-0 rowsep-0" id="42--测试结果__entry__5">集群4吞吐量(百万条/秒)</th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__1">1</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__2">2.06</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__3">1.70</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__4">1.49</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__5">1.45</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__1">2</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__2">3.46</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__3">3.14</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__4">2.94</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__5">2.73</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__1">4</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__2">5.46</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__3">5.33</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__4">5.21</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__5">5.4</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__1">8</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__2">7.02</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__3">8.87</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__4">9.44</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__5">9.65</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__1">16</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__2">10.02</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__3">14.42</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__4">16.53</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__5">17.16</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__1">32</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__2">10.04</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__3">17.90</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__4">23.60</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__5">25.29</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__1">64</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__2">10.03</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__3">20.59</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__4">28.8</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__5">31.51</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__1">128</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__2">9.98</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__3">21.42</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__4">30.79</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__5">36.50</td></tr></tbody></table></div><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">表3: 数据库查询吞吐量（百万条/秒）随节点数目和并发用户数量的变化</strong></p><div class="table-container"><table class="- topic/table table" data-cols="5"><caption></caption><colgroup><col/><col/><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="42--测试结果__entry__46">并发用户数</th><th class="- topic/entry entry colsep-0 rowsep-0" id="42--测试结果__entry__47">集群1吞吐量(百万条/秒)</th><th class="- topic/entry entry colsep-0 rowsep-0" id="42--测试结果__entry__48">集群2吞吐量(百万条/秒)</th><th class="- topic/entry entry colsep-0 rowsep-0" id="42--测试结果__entry__49">集群3吞吐量(百万条/秒)</th><th class="- topic/entry entry colsep-0 rowsep-0" id="42--测试结果__entry__50">集群4吞吐量(百万条/秒)</th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__46">1</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__47">88.4</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__48">73.0</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__49">63.9</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__50">62.2</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__46">2</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__47">148.5</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__48">134.8</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__49">126.2</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__50">117.2</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__46">4</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__47">234.3</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__48">228.7</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__49">223.6</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__50">231.7</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__46">8</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__47">301.3</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__48">380.7</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__49">405.1</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__50">414.1</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__46">16</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__47">430.0</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__48">618.8</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__49">709.4</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__50">736.4</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__46">32</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__47">430.9</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__48">768.2</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__49">1012.8</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__50">1085.3</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__46">64</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__47">430.4</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__48">883.6</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__49">1239.4</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__50">1352.3</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__46">128</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__47">428.3</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__48">919.2</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__49">1321.4</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="42--测试结果__entry__50">1566.4</td></tr></tbody></table></div><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">表4: 数据库查询吞吐量（兆字节/秒）随节点数目和并发用户数量的变化</strong></p><p class="- topic/p p">当并发用户较少时，多节点查询原始数据并无优势，甚至性能会略微下降，原因是当用户很少时，数据从远程节点拷贝到本地C++客户端，网络开销占比较大，集群的并行能力发挥非常有限。
随着并发用户数的增加，集群的优势越发明显。当并发用户数达到128时，从集群1（1台物理服务器，2个逻辑节点）到集群4（4台物理服务器，8个逻辑节点），读数据的吞吐量几乎跟节点数目呈线性关系。
实验展现的另一个现象是，随着发用户数增加，线程切换频繁，磁盘竞争以及网络都会成为资源瓶颈，集群的读吞吐量会上升，但边际效用递减，最后达到极限。</p><br/><img class="- topic/image image" src="images/cluster_scale9.png" alt="图3：数据库查询吞吐量（兆字节/秒）随节点数目和并发用户数量的变化"/><br/><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">图3：数据库查询吞吐量（兆字节/秒）随节点数目和并发用户数量的变化</strong></p></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title12" id="5-数据库计算性能测试"><h2 class="- topic/title title topictitle2" id="ariaid-title12">5. 数据库计算性能测试</h2><div class="- topic/body body"><p class="- topic/p p">数据库写入4年美股的Level 1 TAQ（报价和交易）数据，总的数据量约为2700亿条数据，共计约12.6TB，压缩后存储在磁盘上占用空间约3TB。按照从简单到复杂，我们安排了三个计算型测试任务:(1)SQL多维过滤和分组计算， （2）分钟级K线生成和写入，（3）线性回归。这些任务的共同特点是计算需要的原始数据量非常大，但是计算结果的数据量非常小。
计算之前都需要从数据库文件读取数据。因此每个测试任务我们都考虑了两种情况：</p><ul class="- topic/ul ul"><li class="- topic/li li">清除所有操作系统缓存</li><li class="- topic/li li">保留操作系统缓存。如果数据节点的内存很大，可以发挥缓存的优势。</li></ul></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title13" id="51-sql多维过滤和分组计算"><h3 class="- topic/title title topictitle3" id="ariaid-title13">5.1. SQL多维过滤和分组计算</h3><div class="- topic/body body"></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title14" id="511-测试方案"><h4 class="- topic/title title topictitle4" id="ariaid-title14">5.1.1. 测试方案</h4><div class="- topic/body body"><p class="- topic/p p">选择金融市场的微观结构分析作为计算任务。具体说，分析美股从早上9;30开盘到16:00收盘，股票报价的价差 (spread) 有何规律。为了更好的发现价差和交易时段之间的关系，将所有股票的所有报价按分钟进行聚合计算平均价差。为了避免单天数据的偶然性，选择了一个星期的报价数据，总的数据量约16.7亿条记录，43GB大小。完整的SQL语句如下。quotes表是一个按照日期和股票代码组合分区的分布式表。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>select avg((ofr-bid)/(ofr+bid)*2) as avgSpread from quotes where date between 2007.08.01 : 2007.08.07, time between 09:30:00 : 15:59:59, ofr&gt;bid, bid&gt;0, ofr/bid&lt;1.2 group by minute(time) as minute</code></pre></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title15" id="512-测试结果"><h4 class="- topic/title title topictitle4" id="ariaid-title15">5.1.2. 测试结果</h4><div class="- topic/body body"><p class="- topic/p p">实验结果如表-5和图-4所示，不管有没有操作系统缓存，集群的计算吞吐量随着机器数量的增加几乎线性增长。计算下沉到数据侧，这样不需要将大量数据在节点间移动，只有处理后的少量数据汇总到发起节点做二次聚合处理。这种场景下的分布式计算，DolphinDB集群的计算吞吐量可以随着节点的增加而线性增加。值得一提的是在没有缓存的情况下，计算吞吐量已经超过了集群磁盘IO的理论上限，这是数据压缩的贡献。在有操作系统缓存的情况下，吞吐量有近50%的提升，这是因为在内存中读取文件数据，吞吐量增加了</p><div class="table-container"><table class="- topic/table table" data-cols="5"><caption></caption><colgroup><col/><col/><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="512-测试结果__entry__1">集群</th><th class="- topic/entry entry colsep-0 rowsep-0" id="512-测试结果__entry__2">清除所有缓存(毫秒)</th><th class="- topic/entry entry colsep-0 rowsep-0" id="512-测试结果__entry__3">计算吞吐量(GB/秒)</th><th class="- topic/entry entry colsep-0 rowsep-0" id="512-测试结果__entry__4">保留缓存(毫秒）</th><th class="- topic/entry entry colsep-0 rowsep-0" id="512-测试结果__entry__5">计算吞吐量(GB/秒)</th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="512-测试结果__entry__1">集群1</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="512-测试结果__entry__2">17,647</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="512-测试结果__entry__3">2.437</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="512-测试结果__entry__4">12,056</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="512-测试结果__entry__5">3.567</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="512-测试结果__entry__1">集群2</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="512-测试结果__entry__2">8,248</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="512-测试结果__entry__3">5.213</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="512-测试结果__entry__4">5,924</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="512-测试结果__entry__5">7.259</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="512-测试结果__entry__1">集群3</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="512-测试结果__entry__2">6,248</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="512-测试结果__entry__3">6.882</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="512-测试结果__entry__4">3,895</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="512-测试结果__entry__5">11.040</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="512-测试结果__entry__1">集群4</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="512-测试结果__entry__2">4,249</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="512-测试结果__entry__3">10.120</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="512-测试结果__entry__4">3,117</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="512-测试结果__entry__5">13.795</td></tr></tbody></table></div><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">表5： SQL多维过滤和分组计算的吞吐量随节点数目的变化</strong></p><br/><img class="- topic/image image" src="images/cluster_scale11.png" alt="图4： SQL多维过滤和分组计算的吞吐量随节点数目的变化"/><br/><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">图4： SQL多维过滤和分组计算的吞吐量随节点数目的变化</strong></p></div></article></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title16" id="52-使用map-reduce生成分钟级k线"><h3 class="- topic/title title topictitle3" id="ariaid-title16">5.2. 使用map-reduce生成分钟级K线</h3><div class="- topic/body body"><p class="- topic/p p">DolphinDB不仅支持使用SQL语句隐式的完成分布式计算，也允许用户显式的自定义map函数和reduce函数，并通过内置的map-reduce框架定制分布式计算。</p></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title17" id="521-测试方案"><h4 class="- topic/title title topictitle4" id="ariaid-title17">5.2.1. 测试方案</h4><div class="- topic/body body"><p class="- topic/p p">这里我们使用map-reduce来计算生成一个月的分钟级K线数据，并将结果保存到同一个数据库的另一张数据表minuteQuotes中。核心脚本如下。计算涉及的数据量约为65亿条记录，172GB大小，最后生成的K线数据约6000万条。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>def saveMinuteQuote(t){
	minuteQuotes=select avg(bid) as bid, avg(ofr) as ofr from t group by symbol, date, minute(time) as minute
	loadTable("dfs://TAQ", "quotes_minute").append!(minuteQuotes)
	return minuteQuotes.size()
}

ds = sqlDS(&lt;select symbol, date, time, bid, ofr from quotes where date between 2007.08.01 : 2007.08.31&gt;)
mr(ds, saveMinuteQuote, +)</code></pre></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title18" id="522-测试结果"><h4 class="- topic/title title topictitle4" id="ariaid-title18">5.2.2. 测试结果</h4><div class="- topic/body body"><div class="table-container"><table class="- topic/table table" data-cols="5"><caption></caption><colgroup><col/><col/><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="522-测试结果__entry__1">集群</th><th class="- topic/entry entry colsep-0 rowsep-0" id="522-测试结果__entry__2">清除所有缓存(毫秒)</th><th class="- topic/entry entry colsep-0 rowsep-0" id="522-测试结果__entry__3">计算吞吐量(GB/秒)</th><th class="- topic/entry entry colsep-0 rowsep-0" id="522-测试结果__entry__4">保留缓存(毫秒）</th><th class="- topic/entry entry colsep-0 rowsep-0" id="522-测试结果__entry__5">计算吞吐量(GB/秒)</th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="522-测试结果__entry__1">集群1</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="522-测试结果__entry__2">181,508</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="522-测试结果__entry__3">0.947</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="522-测试结果__entry__4">33,808</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="522-测试结果__entry__5">5.087</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="522-测试结果__entry__1">集群2</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="522-测试结果__entry__2">97,034</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="522-测试结果__entry__3">1.772</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="522-测试结果__entry__4">18,859</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="522-测试结果__entry__5">9.120</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="522-测试结果__entry__1">集群3</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="522-测试结果__entry__2">62,996</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="522-测试结果__entry__3">2.730</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="522-测试结果__entry__4">12,134</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="522-测试结果__entry__5">14.174</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="522-测试结果__entry__1">集群4</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="522-测试结果__entry__2">48,801</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="522-测试结果__entry__3">3.524</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="522-测试结果__entry__4">9,630</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="522-测试结果__entry__5">19.928</td></tr></tbody></table></div><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">表6： 分钟级K线计算的吞吐量随节点数目的变化</strong></p><br/><img class="- topic/image image" src="images/cluster_scale12.png" alt="图5：分钟级K线计算的吞吐量随节点数目的变化"/><br/><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">图5：分钟级K线计算的吞吐量随节点数目的变化</strong></p><p class="- topic/p p">实验结果如表-6和图-5所示，不管有没有操作系统缓存，集群的计算吞吐量随着机器数量的增加几乎线性增长。与前一个计算任务相比，当使用操作系统缓存时，带来了更明显的性能提升。当前任务缓存带来的提升约400%，而前一任务约为50%。究其原因，当前任务更彻底的将计算任务下沉到了数据端，导致计算在整个任务中的比重更低，凸显了IO缓存的功效。在前一任务中，在每个数据节点上按分钟和股票聚合的数据仍然需要汇总到发起节点进行二次聚合，而当前任务没有这个二次聚合的步骤。从这个例子我们也可以看到，将计算任务下沉到数据端并结合缓存（大内存）的使用，可以大大提升数据库类型的计算任务的性能。这也是DolphinDB要在分布式存储引擎的基础上，开发一个强大的计算引擎的初衷。</p></div></article></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title19" id="53-分布式线性回归"><h3 class="- topic/title title topictitle3" id="ariaid-title19">5.3. 分布式线性回归</h3><div class="- topic/body body"><p class="- topic/p p">DolphinDB内置了近千个函数，大部分属于计算函数，涵盖从最简单的加减乘除到复杂的分布式机器学习算法。线性回归是金融分析中最常用的机器学习工具。为此，我们测试了分布式集群如何提升传统的机器学习算法线性回归的性能。</p></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title20" id="531-测试方案"><h4 class="- topic/title title topictitle4" id="ariaid-title20">5.3.1. 测试方案</h4><div class="- topic/body body"><p class="- topic/p p">测试了两个计算变量spread和quotesize之间的关系。这两个变量不存在于原始的quotes表，而是通过表中的其它字段计算得到。数据选择了从8.1号到8.3号共3天的数据。总数据约10亿条记录，26.5G大小。核心的测试脚本如下。首先定义了一个数据源，然后赋给函数olsEx做分布式的线性回归计算。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>ds = sqlDS(&lt;select ofr/bid-1 as spread, (bidsiz+ofrsiz)*(ofr+bid)\2 as quoteSize from quotes where date between 2007.08.01 : 2007.08.05, time between 09:30:00 : 15:59:59, ofr&gt;bid, ofr&gt;0, bid&gt;0, ofr/bid&lt;1.2&gt;)
olsEx(ds, `spread, `quoteSize, true, 2)</code></pre></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title21" id="532-测试结果"><h4 class="- topic/title title topictitle4" id="ariaid-title21">5.3.2. 测试结果</h4><div class="- topic/body body"><div class="table-container"><table class="- topic/table table" data-cols="5"><caption></caption><colgroup><col/><col/><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="532-测试结果__entry__1">集群</th><th class="- topic/entry entry colsep-0 rowsep-0" id="532-测试结果__entry__2">清除所有缓存(毫秒)</th><th class="- topic/entry entry colsep-0 rowsep-0" id="532-测试结果__entry__3">计算吞吐量(GB/秒)</th><th class="- topic/entry entry colsep-0 rowsep-0" id="532-测试结果__entry__4">保留缓存(毫秒）</th><th class="- topic/entry entry colsep-0 rowsep-0" id="532-测试结果__entry__5">计算吞吐量(GB/秒)</th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="532-测试结果__entry__1">集群1</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="532-测试结果__entry__2">21,482</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="532-测试结果__entry__3">1.234</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="532-测试结果__entry__4">10,834</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="532-测试结果__entry__5">2.552</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="532-测试结果__entry__1">集群2</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="532-测试结果__entry__2">10,925</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="532-测试结果__entry__3">2.425</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="532-测试结果__entry__4">5,860</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="532-测试结果__entry__5">4.522</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="532-测试结果__entry__1">集群3</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="532-测试结果__entry__2">8,142</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="532-测试结果__entry__3">3.255</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="532-测试结果__entry__4">4,298</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="532-测试结果__entry__5">6.166</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="532-测试结果__entry__1">集群4</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="532-测试结果__entry__2">5,356</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="532-测试结果__entry__3">4.948</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="532-测试结果__entry__4">2,995</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="532-测试结果__entry__5">8.848</td></tr></tbody></table></div><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">表7： 线性回归计算的吞吐量随节点数目的变化</strong></p><br/><img class="- topic/image image" src="images/cluster_scale15.png" alt="图6： 线性回归计算的吞吐量随节点数目的变化"/><br/><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">图6： 线性回归计算的吞吐量随节点数目的变化</strong></p><p class="- topic/p p">根据测试结果，随着节点的增加，两种场景下的性能基本保持了线性提升。在有缓存的情况下，性能表现更加突出。</p></div></article></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title22" id="6-小结"><h2 class="- topic/title title topictitle2" id="ariaid-title22">6. 小结</h2><div class="- topic/body body"><p class="- topic/p p">通过对分布式数据库DolphinDB在写，读和计算三方面的测试，展示了其优秀的近乎线性的水平扩展能力。</p><ul class="- topic/ul ul"><li class="- topic/li li">在数据写入方面，优化分区机制和多客户端并发批量写入，能极大的提升写入的性能。开启dataSync（写入数据必须同步刷入磁盘）选项的情况下，增加集群节点数，可以快速提升整体的写入吞吐量，但单节点的平均性能性能随着节点数的增加，略有衰减。4台机器构成的集群的最大写入量约1450万条/秒，达到1.25G/秒的写入吞吐量。关闭dataSync选项后，写入吞吐量随着节点数线性提升。4机器集群吞吐量超过6170万条/秒，约5.3G/秒的写入量。</li><li class="- topic/li li">在数据读取方面，对于某个集群，随着用户数增加，吞吐量逐步增长，但并不是并发数越多，吞吐量越大，吞吐量受到硬件资源的限制，存在性能的极限。从集群规模的增长看，随着节点数的增加，集群的吞吐量几乎线性提升。</li><li class="- topic/li li">从计算性能趋势看，DolphinDB的分布式计算框架，可以最大化利用集群资源，计算放在数据侧，减少数据在节点间移动，集群性能随着节点个数增加几乎线性提升。另外，DolphinDB也会充分利用系统缓存，当数据被缓存后，后续计算性能也会大幅提升。</li></ul></div></article></article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" aria-label="On this page" class="col-lg-2 d-none d-lg-block navbar d-print-none"> 
                            <div id="wh_topic_toc_content">
		                        
	                            <div class=" wh_topic_toc "><div class="wh_topic_label">在本页上</div><ul><li class="topic-item"><a href="#1-%E6%A6%82%E8%BF%B0" data-tocid="1-概述">1. 概述</a></li><li class="topic-item"><a href="#2-%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83" data-tocid="2-测试环境">2. 测试环境</a><ul><li class="topic-item"><a href="#21-%E7%A1%AC%E4%BB%B6%E9%85%8D%E7%BD%AE" data-tocid="21-硬件配置">2.1. 硬件配置</a></li><li class="topic-item"><a href="#22-%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE" data-tocid="22-集群配置">2.2. 集群配置</a></li></ul></li><li class="topic-item"><a href="#3-%E6%95%B0%E6%8D%AE%E5%86%99%E5%85%A5%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95" data-tocid="3-数据写入性能测试">3. 数据写入性能测试</a><ul><li class="topic-item"><a href="#31-%E6%B5%8B%E8%AF%95%E6%96%B9%E6%A1%88" data-tocid="31-测试方案">3.1. 测试方案</a></li><li class="topic-item"><a href="#32-%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C" data-tocid="32-测试结果">3.2. 测试结果</a></li></ul></li><li class="topic-item"><a href="#4-%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%8F%96%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95" data-tocid="4-数据读取性能测试">4. 数据读取性能测试</a><ul><li class="topic-item"><a href="#41-%E6%B5%8B%E8%AF%95%E6%96%B9%E6%A1%88" data-tocid="41-测试方案">4.1. 测试方案</a></li><li class="topic-item"><a href="#42--%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C" data-tocid="42--测试结果">4.2.  测试结果</a></li></ul></li><li class="topic-item"><a href="#5-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%A1%E7%AE%97%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95" data-tocid="5-数据库计算性能测试">5. 数据库计算性能测试</a><ul><li class="topic-item"><a href="#51-sql%E5%A4%9A%E7%BB%B4%E8%BF%87%E6%BB%A4%E5%92%8C%E5%88%86%E7%BB%84%E8%AE%A1%E7%AE%97" data-tocid="51-sql多维过滤和分组计算">5.1. SQL多维过滤和分组计算</a><ul><li class="topic-item"><a href="#511-%E6%B5%8B%E8%AF%95%E6%96%B9%E6%A1%88" data-tocid="511-测试方案">5.1.1. 测试方案</a></li><li class="topic-item"><a href="#512-%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C" data-tocid="512-测试结果">5.1.2. 测试结果</a></li></ul></li><li class="topic-item"><a href="#52-%E4%BD%BF%E7%94%A8map-reduce%E7%94%9F%E6%88%90%E5%88%86%E9%92%9F%E7%BA%A7k%E7%BA%BF" data-tocid="52-使用map-reduce生成分钟级k线">5.2. 使用map-reduce生成分钟级K线</a><ul><li class="topic-item"><a href="#521-%E6%B5%8B%E8%AF%95%E6%96%B9%E6%A1%88" data-tocid="521-测试方案">5.2.1. 测试方案</a></li><li class="topic-item"><a href="#522-%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C" data-tocid="522-测试结果">5.2.2. 测试结果</a></li></ul></li><li class="topic-item"><a href="#53-%E5%88%86%E5%B8%83%E5%BC%8F%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92" data-tocid="53-分布式线性回归">5.3. 分布式线性回归</a><ul><li class="topic-item"><a href="#531-%E6%B5%8B%E8%AF%95%E6%96%B9%E6%A1%88" data-tocid="531-测试方案">5.3.1. 测试方案</a></li><li class="topic-item"><a href="#532-%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C" data-tocid="532-测试结果">5.3.2. 测试结果</a></li></ul></li></ul></li><li class="topic-item"><a href="#6-%E5%B0%8F%E7%BB%93" data-tocid="6-小结">6. 小结</a></li></ul></div>
	                        	
                        	</div>
                        </nav>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
<title>Copyright</title><p><b> ©2025 浙江智臾科技有限公司 浙ICP备18048711号-3</b></p>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
    </body>
</html>