<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" data-whc_version="26.0">
    <head><link rel="shortcut icon" href="../favicon.ico"/><link rel="icon" href="../favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="DolphinDB 的重启是运维工作的重要部分，在启动节点时可能会遇到一些问题，例如启动太慢、启动失败等。本教程以 DolphinDB v2.00.11 版本为例，结合运行日志简析 DolphinDB 整体的启动流程和重要模块的启动流程，并分析启动时常见问题的现象、原因和解决方案。 DolphinDB 节点整体的启动流程可分为 7 个阶段： 初始化内部基础模块； ..."/><meta name="DC.rights.owner" content="(C) 版权 2025"/><meta name="copyright" content="(C) 版权 2025"/><meta name="generator" content="DITA-OT"/><meta name="DC.type" content="topic"/><meta name="DC.coverage" content=""/><meta name="DC.relation" content="../tutorials/about_tutorials.html"/><meta name="prodname" content="DolphinDB"/><meta name="brand" content="DolphinDB"/><meta name="DC.creator" content="DolphinDB"/><meta name="DC.publisher" content="DDB N/A DDB 200"/><meta name="DC.format" content="HTML5"/><meta name="DC.identifier" content="节点启动流程简析与常见问题"/><title>节点启动流程简析与常见问题</title><!--  Generated with Oxygen version 26.0, build number 2024012323.  --><meta name="wh-path2root" content="../"/><meta name="wh-toc-id" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;?workdir /tmp/temp20250305183303418/tutorials?&gt;&lt;?workdir-uri file:/tmp/temp20250305183303418/tutorials/?&gt;&lt;?path2project ../?&gt;&lt;?path2project-uri ../?&gt;&lt;?path2rootmap-uri ../?&gt;&lt;topic xmlns:dita-ot=&#34;http://dita-ot.sourceforge.net/ns/201007/dita-ot&#34; xmlns:ditaarch=&#34;http://dita.oasis-open.org/architecture/2005/&#34; class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;节点启动流程简析与常见问题&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;节点启动流程简析与常见问题&lt;/title&gt;&lt;prolog class=&#34;- topic/prolog &#34;&gt;&lt;author class=&#34;- topic/author &#34; xtrc=&#34;author:1;12:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/author&gt;&lt;publisherinformation class=&#34;- topic/publisher bookmap/publisherinformation &#34; xtrc=&#34;publisherinformation:1;14:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:1;15:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;printlocation class=&#34;- topic/data bookmap/printlocation &#34; xtrc=&#34;printlocation:1;16:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;N/A&lt;/printlocation&gt; &lt;published class=&#34;- topic/data bookmap/published &#34; xtrc=&#34;published:1;17:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:2;18:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;publishtype class=&#34;- topic/data bookmap/publishtype &#34; value=&#34;HTML&#34; xtrc=&#34;publishtype:1;19:44&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;revisionid class=&#34;- topic/ph bookmap/revisionid &#34; xtrc=&#34;revisionid:1;20:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;200&lt;/revisionid&gt; &lt;summary class=&#34;- topic/ph bookmap/summary &#34; xtrc=&#34;summary:1;22:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:1;23:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/published&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:2;25:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/publisherinformation&gt;&lt;metadata class=&#34;- topic/metadata &#34;&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:2;39:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:1;28:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;category class=&#34;- topic/category &#34; xtrc=&#34;category:1;29:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;prodinfo class=&#34;- topic/prodinfo &#34; xtrc=&#34;prodinfo:1;34:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;prodname class=&#34;- topic/prodname &#34; xtrc=&#34;prodname:1;35:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/prodname&gt; &lt;brand class=&#34;- topic/brand &#34; xtrc=&#34;brand:1;36:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/brand&gt; &lt;/prodinfo&gt;&lt;/metadata&gt;&lt;/prolog&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:1;3:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DolphinDB 的重启是运维工作的重要部分，在启动节点时可能会遇到一些问题，例如启动太慢、启动失败等。本教程以 DolphinDB v2.00.11 版本为例，结合运行日志简析 DolphinDB 整体的启动流程和重要模块的启动流程，并分析启动时常见问题的现象、原因和解决方案。&lt;/p&gt;&lt;/body&gt;&lt;related-links class=&#34;- topic/related-links &#34;&gt;&lt;linkpool class=&#34;- topic/linkpool &#34; xtrc=&#34;topicref:74;102:97&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;../tutorials/about_tutorials.dita&#34; mapclass=&#34;- map/topicref bookmap/chapter &#34; role=&#34;parent&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:1;5:53&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot usertext?&gt;教程&lt;/linktext&gt;&lt;?ditaot usershortdesc?&gt;&lt;desc class=&#34;- topic/desc &#34;&gt;DolphinDB 产品使用教程&lt;/desc&gt;&lt;/link&gt;&lt;/linkpool&gt;&lt;/related-links&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1-节点整体启动流程&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:2;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:2;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;1. 节点整体启动流程&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:2;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:2;7:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DolphinDB 节点整体的启动流程可分为 7 个阶段：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:1;9:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:1;9:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;初始化内部基础模块；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:2;10:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;解析和校验参数、配置文件、license 文件，并初始化和启动一些基本功能模块和线程；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:3;11:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;根据加载的配置文件内容初始化 server，执行 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:1;11:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;dolphindb.dos&lt;/i&gt;，加载 preloadModules 配置的插件和模块；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:4;12:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;初始化和启动 server 的各个功能模块和线程，绑定端口。包括用户权限与函数视图初始化、元数据初始化、事务回滚、redo log 回放、RAFT 初始化等；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:5;13:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;执行 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/db_distr_comp/cfg/standalone.html?hl=startup#ariaid-title4&#34; scope=&#34;external&#34; xtrc=&#34;xref:1;13:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;?ditaot usertext?&gt;startup 配置项&lt;/xref&gt;指定的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:2;13:113&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;startup.dos&lt;/i&gt; 脚本；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:6;14:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;初始化定时任务；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:7;15:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;执行 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/db_distr_comp/cfg/standalone.html?hl=postStart#ariaid-title4&#34; scope=&#34;external&#34; xtrc=&#34;xref:2;15:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;?ditaot usertext?&gt;postStart 配置项&lt;/xref&gt;指定的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:3;15:117&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;postStart.dos&lt;/i&gt; 脚本。&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:3;17:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;其中第 4 步，不同节点会根据自己的职能初始化和启动相应功能的模块和线程。例如单节点和控制节点会启动 DFS 模块来管理分布式文件元数据，而数据节点不会启动；单节点和数据节点会启动 ChunkNode 模块来存储和管理分区数据，而控制节点不会启动。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/node_startup_process_and_questions/01.png&#34; placement=&#34;break&#34; xtrc=&#34;image:1;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34; dita-ot:image-width=&#34;222&#34; dita-ot:image-height=&#34;582&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:1;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;01&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:4;21:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;重要启动流程开始和成功日志如下表：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:1;23:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;4&#34; xtrc=&#34;tgroup:1;23:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:1;23:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:2;23:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:3;23:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col4&#34; colnum=&#34;4&#34; xtrc=&#34;colspec:4;23:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:1;23:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:1;23:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:1;23:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:1;23:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;流程&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:2;23:33&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:2;23:34&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;开始日志&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:3;23:92&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:3;23:93&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;成功日志&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:4;23:151&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:4;23:152&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;备注&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:1;25:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:2;25:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:5;25:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;用户权限与函数视图初始化&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:6;25:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:1;25:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Initializing AclManager with Raft &amp;lt;raft mode&amp;gt;&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:7;25:86&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:2;25:87&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Initialization of AclManager is completed with Raft &amp;lt;raft mode&amp;gt;&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:8;25:154&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;RAFT mode 为 enabled 或 disabled&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:3;26:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:9;26:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;控制节点元数据初始化&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:10;26:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt; &lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:11;26:88&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;非 RAFT 模式：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:3;26:99&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Controller initialization completed.&lt;/codeph&gt;RAFT 模式：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:4;26:145&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DFSRaftReplayWorker started&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:12;26:176&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt; &lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:4;27:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:13;27:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;数据节点分区元数据初始化&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:14;27:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt; &lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:15;27:86&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:5;27:87&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;ChunkMgmt initialization completed.&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:16;27:149&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt; &lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:5;28:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:17;28:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;数据节点恢复事务的重做日志回放&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:18;28:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:6;28:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;dfsRecoverLogDir: &amp;lt;dfsRedoLogDir&amp;gt;&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:19;28:83&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:7;28:84&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;RecoverRedoLogManager finished chunk num is &amp;lt;finishPacksSize&amp;gt;, total chunks recover num is &amp;lt;lsnChunksSize&amp;gt;, compare checksum succ pack num is &amp;lt;recoverChecksumPackNum&amp;gt;, test replay num is &amp;lt;recoverTestPackNum&amp;gt;, actual recover redo pack num is &amp;lt;recoverReplayPackNum&amp;gt;, redo chunk num is &amp;lt;recoverReplayNum&amp;gt;&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:20;28:389&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt; &lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:6;29:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:21;29:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;数据节点 TSDB 元数据初始化&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:22;29:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt; &lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:23;29:88&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:8;29:89&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Restore TSDB meta successfuly.&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:24;29:151&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt; &lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:7;30:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:25;30:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;redo log 回放&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:26;30:33&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;若存在 redo log：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:9;30:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Start recovering from redo log. This may take a few minutes.&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:27;30:111&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;若存在 redo log：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:10;30:125&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Completed CacheEngine GC and RedoLog GC after applying all redo logs and engine is &amp;lt;engine type&amp;gt;&lt;/codeph&gt;若不存在 redo log：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:11;30:237&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;No available redo log files were found. Redo log replay was skipped.&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:28;30:309&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;engine type 为 OLAP 或 TSDB，故如果为 DolphinDB 2.0 版本，相应日志会有两条&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:8;31:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:29;31:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;RAFT 初始化&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:30;31:32&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:12;31:33&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DFSMaster ElectionTick is set to &amp;lt;electionTick&amp;gt;&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:31;31:95&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:13;31:96&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DFSRaftReplayWorker started&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:32;31:158&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt; &lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:9;32:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:33;32:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;执行 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:4;32:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;startup.dos&lt;/i&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:34;32:35&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:14;32:36&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Executing the startup script: &amp;lt;scriptFile&amp;gt;&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:35;32:98&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:15;32:99&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;The startup script: &amp;lt;scriptFile&amp;gt; execution completed.&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:36;32:161&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt; &lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:10;33:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:37;33:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;定时任务初始化&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:38;33:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:16;33:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Job scheduler start to initialize.&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:39;33:91&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:17;33:92&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Job scheduler initialization completed.&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:40;33:154&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt; &lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:11;34:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:41;34:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;执行 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:5;34:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;postStart.dos&lt;/i&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:42;34:35&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:18;34:36&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Executing the post start script: &amp;lt;scriptFile&amp;gt;&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:43;34:98&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:19;34:99&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;The post start script: &amp;lt;scriptFile&amp;gt; execution completed.&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:44;34:161&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt; &lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:5;36:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Redo log 回放完成后，数据节点会向控制节点汇报本地分区信息，然后启动心跳进程，此时节点在 web 集群管理界面的状态会转变为绿色，但还没有到“执行 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:6;36:79&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;startup.dos&lt;/i&gt;”一步。由于执行 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:7;36:101&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;postStart.dos&lt;/i&gt; 失败并不会导致节点启动失败，故&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:5;36:132&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;节点启动完成的标志日志&lt;/b&gt;为 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:20;36:149&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Job scheduler initialization completed.&lt;/codeph&gt;&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;2-重要启动流程简析&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:3;38:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:3;38:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2. 重要启动流程简析&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:3;38:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;21-license-校验&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:4;40:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:4;40:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2.1. license 校验&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:4;40:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:6;42:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DolphinDB 启动时会先校验 license 与集群配置信息是否合规。如果启用了 license server，则连接 license server 进行校验，否则读取安装目录下 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:8;42:94&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;dolphindb.lic&lt;/i&gt; 文件进行校验。校验内容包括：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:1;44:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:8;44:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;过期时间&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:9;45:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;每个节点绑定的核数&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:10;46:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;每个节点的最大内存&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:11;47:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;集群内最大节点数&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:12;48:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;最高支持的 server 版本&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:7;50:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;如果校验失败，会打印相应的错误日志然后节点关闭。例如 license 过期时会打印错误日志 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:21;50:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;ERROR&amp;gt; The license has expired.&lt;/codeph&gt;&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;22-用户权限与函数视图初始化&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:5;52:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:5;52:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2.2. 用户权限与函数视图初始化&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:5;52:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:8;54:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DolphinDB 的&lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/tutorials/ACL_and_Security.html&#34; scope=&#34;external&#34; xtrc=&#34;xref:3;54:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;?ditaot usertext?&gt;权限管理&lt;/xref&gt;与&lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/db_distr_comp/db_oper/FunctionView.html&#34; scope=&#34;external&#34; xtrc=&#34;xref:4;54:81&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;?ditaot usertext?&gt;函数视图&lt;/xref&gt;定义持久化保存在单节点或控制节点的数据目录，根据是否启用 RAFT 高可用存储在不同的位置。非 RAFT 模式（即单节点或普通集群）时，存储在控制节点的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:9;54:234&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;HOME_DIR&amp;gt;/&amp;lt;NodeAlias&amp;gt;/sysmgmt&lt;/i&gt; 路径下，相关文件说明如下表：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:2;56:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;2&#34; xtrc=&#34;tgroup:2;56:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:5;56:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:6;56:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:2;56:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:12;56:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:45;56:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:6;56:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;文件名&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:46;56:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:7;56:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;说明&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:2;58:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:13;58:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:47;58:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:22;58:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;aclEditlog.meta&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:48;58:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;权限与函数视图的编辑日志文件&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:14;59:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:49;59:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:23;59:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;aclCheckPoint.meta&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:50;59:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;权限与函数视图的 checkpoint 文件，当编辑日志过大时会做一次 checkpoint 保存最新的权限与函数视图的状态&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:15;60:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:51;60:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:24;60:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;aclCheckPoint.tmp&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:52;60:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;权限与函数视图的 checkpoint 临时文件，做 checkpoint 时临时生成&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:9;62:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:8;62:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;注意&lt;/b&gt;：HOME_DIR 指节点的主目录，即 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:25;62:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;getHomeDir()&lt;/codeph&gt; 方法返回结果；NodeAlias 指节点别名，即&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:26;62:66&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;getNodeAlias()&lt;/codeph&gt; 方法返回结果。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:10;64:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;RAFT 模式（即高可用集群）时，存储在 leader 控制节点的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:10;64:35&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;HOME_DIR&amp;gt;/&amp;lt;NodeAlias&amp;gt;/raft&lt;/i&gt; 路径下，详见 RAFT 元数据初始化一节。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:11;66:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;非 RAFT 模式初始化流程如下：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/node_startup_process_and_questions/02.png&#34; placement=&#34;break&#34; xtrc=&#34;image:2;68:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34; dita-ot:image-width=&#34;709&#34; dita-ot:image-height=&#34;693&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:2;68:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;02&lt;/alt&gt;&lt;/image&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:2;70:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:13;70:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:12;70:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;开始，打印日志：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:27;70:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Initializing AclManager with Raft &amp;lt;raft mode&amp;gt;&lt;/codeph&gt;；&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:14;72:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:13;72:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;如果不是高可用集群：&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:14;74:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;a. 读取节点数据目录 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:11;74:16&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;/sysmgmt&lt;/i&gt;，如果不存在则创建；&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:15;76:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;b. 如果不存在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:12;76:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;aclEditlog.meta&lt;/i&gt; 但存在有效的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:13;76:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;aclCheckPoint.tmp&lt;/i&gt;，重命名 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:14;76:62&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;aclCheckPoint.tmp&lt;/i&gt; 为 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:15;76:84&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;aclEditlog.meta&lt;/i&gt;；&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:16;78:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;c. 如果存在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:16;78:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;aclCheckPoint.meta&lt;/i&gt;，检查校验；&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:17;80:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;d. 读取 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:17;80:10&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;aclCheckPoint.meta&lt;/i&gt; 文件恢复用户权限和函数视图；&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:18;82:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;e. 读取和回放 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:18;82:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;aclEditlog.meta&lt;/i&gt; 文件恢复用户权限和函数视图；&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:19;84:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;f. 裁剪 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:19;84:10&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;aclEditlog.meta&lt;/i&gt; 中的无效部分；&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:15;86:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:20;86:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;如果不存在 RSA 校验密钥（&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:28;86:19&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;aclPublic.key&lt;/codeph&gt; 和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:29;86:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;aclPrivate.key&lt;/codeph&gt;，存储路径为 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:20;86:60&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;HOME_DIR&amp;gt;/&amp;lt;NodeAlias&amp;gt;/keys&lt;/i&gt;，用于集群间加密通信），如果不是高可用集群，生成 RSA 校验密钥；如果是高可用集群，则以控制节点名字母表顺序从其他控制节点拿密钥；&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:16;88:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:21;88:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;如果不存在 admin 用户，创建 admin 用户；&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:17;90:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:22;90:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;结束，打印日志：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:30;90:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Initialization of AclManager is completed with Raft &amp;lt;raft mode&amp;gt;&lt;/codeph&gt;。&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;23-控制节点元数据初始化&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:6;92:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:6;92:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2.3. 控制节点元数据初始化&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:6;92:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:23;94:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DolphinDB 的分布式文件系统（DFS）管理集群的所有分区数据的元数据，元数据根据是否启用 RAFT 高可用存储在不同的位置。非 RAFT 模式（即单节点或普通集群）时，存储在单节点或控制节点的 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html?hl=dfsmetadir&#34; scope=&#34;external&#34; xtrc=&#34;xref:5;94:102&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;?ditaot usertext?&gt;dfsMetaDir 配置项&lt;/xref&gt;路径下，相关文件说明如下表：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:3;96:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;2&#34; xtrc=&#34;tgroup:3;96:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:7;96:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:8;96:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:3;96:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:16;96:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:53;96:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:9;96:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;文件名&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:54;96:35&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:10;96:36&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;说明&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:3;98:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:17;98:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:55;98:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DFSMetaLog.cid&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:56;98:36&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DFS 元数据的编辑日志文件。其中 cid 指事务提交 ID&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:18;99:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:57;99:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DFSMasterMetaCheckpoint.cid&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:58;99:36&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DFS 元数据的 checkpoint 文件，当编辑日志过大时会做一次 checkpoint 保存最新的元数据的状态&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:19;100:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:59;100:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DFSMasterMetaCheckpoint.cid.tmp&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:60;100:36&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DFS 元数据的 checkpoint 临时文件，做 checkpoint 时临时生成&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:24;102:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;RAFT 模式（即高可用集群）时，存储在 leader 控制节点的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:21;102:35&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;HOME_DIR&amp;gt;/&amp;lt;NodeAlias&amp;gt;/raft&lt;/i&gt; 路径下，详见 RAFT 初始化一节。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:25;104:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;非 RAFT 模式初始化流程如下：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/node_startup_process_and_questions/03.png&#34; placement=&#34;break&#34; xtrc=&#34;image:3;106:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34; dita-ot:image-width=&#34;458&#34; dita-ot:image-height=&#34;759&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:3;106:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;03&lt;/alt&gt;&lt;/image&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:3;108:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:18;108:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:26;108:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;读取节点 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:22;108:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;dfsMetaDir&lt;/i&gt; 配置项目录，如果不存在则创建；&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:19;110:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:27;110:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;如果存在临时 checkpoint 文件，尝试解析，如果文件无效，只保存文件名的 cid 信息然后删除；否则重命名为 checkpoint 文件；&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:20;112:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:28;112:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;如果存在 checkpoint 文件，尝试解析，如果解析失败则程序退出；否则读取 checkpoint 信息。相关运行日志： &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:31;113:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;checkpoint file &amp;lt;checkpointFilepath&amp;gt;&lt;/codeph&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:29;115:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:32;115:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;metalog file &amp;lt;metalogFilepath&amp;gt;&lt;/codeph&gt;&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:21;117:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:30;117:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;读取和回放 checkpoint 的 cid 开始的所有编辑日志。相关运行日志： &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:33;118:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;---------start replaying edit log, &amp;lt;metaFileNum&amp;gt; log files to replay----------&lt;/codeph&gt; &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:34;119:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;done reading editlog file &amp;lt;filepath&amp;gt;, processsed &amp;lt;num&amp;gt; records&lt;/codeph&gt; &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:35;120:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;---------done replaying edit log, &amp;lt;num&amp;gt; record(s) processed-----------&lt;/codeph&gt; &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:36;121:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Global cid &amp;lt;currentGlobalCID&amp;gt; Global tid &amp;lt;currentGlobalTID&amp;gt;, reader snapshot id &amp;lt;currentGlobalTID - 1&amp;gt;&lt;/codeph&gt;&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:22;123:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:31;123:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;清理过期无效的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:23;123:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DFSMetaLog&lt;/i&gt;。&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:23;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:32;125:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;结束，打印日志 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:37;125:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Controller initialization completed.&lt;/codeph&gt;。&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;24-数据节点元数据初始化&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:7;127:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:7;127:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2.4. 数据节点元数据初始化&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:7;127:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:33;129:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DolphinDB 单节点或数据节点存储和管理本地分区数据及元数据，启动时会先恢复本地分区的元数据，然后根据事务 log 回滚关机时未完成的事务，上报已提交的事务到控制节点。相关文件存储在 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html?hl=chunkmetadir&#34; scope=&#34;external&#34; xtrc=&#34;xref:6;129:96&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;?ditaot usertext?&gt;chunkMetaDir 配置项&lt;/xref&gt;路径和 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html?hl=volumes&#34; scope=&#34;external&#34; xtrc=&#34;xref:7;129:210&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;?ditaot usertext?&gt;volumes 配置项&lt;/xref&gt;路径下，说明如下：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:4;131:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:4;131:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:9;131:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:10;131:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:11;131:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:4;131:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:20;131:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:61;131:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:11;131:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;文件名&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:62;131:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:12;131:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;存储路径&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:63;131:49&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:13;131:50&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;说明&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:4;133:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:21;133:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:64;133:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;editlog.cid&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:65;133:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;chunkMetaDir&amp;gt;/CHUNK_METADATA&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:66;133:57&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;本地元数据的编辑日志文件。其中 cid 指事务提交 ID&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:22;134:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:67;134:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;checkpoint.cid&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:68;134:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;chunkMetaDir&amp;gt;/CHUNK_METADATA&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:69;134:57&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;本地元数据的 checkpoint 文件，当编辑日志过大时会做一次 checkpoint 保存最新的元数据的状态&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:23;135:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:70;135:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;checkpoint.tmp.cid&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:71;135:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;chunkMetaDir&amp;gt;/CHUNK_METADATA&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:72;135:57&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;本地元数据的 checkpoint 临时文件，做 checkpoint 时临时生成&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:24;136:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:73;136:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;以 tid 为名的文件夹&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:74;136:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;chunkMetaDir&amp;gt;/LOG&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:75;136:50&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;事务 log。其中 tid 为事务 ID&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:25;137:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:76;137:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;以 tid 为名的文件夹&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:77;137:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;volumes&amp;gt;/LOG&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:78;137:50&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;删除事务涉及的数据文件临时存放的目录&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:34;139:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;具体初始化流程如下：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/node_startup_process_and_questions/04.png&#34; placement=&#34;break&#34; xtrc=&#34;image:4;141:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34; dita-ot:image-width=&#34;581&#34; dita-ot:image-height=&#34;494&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:4;141:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;04&lt;/alt&gt;&lt;/image&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:4;143:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:24;143:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;如果存在 checkpoint 临时文件，校验是否有效，若有效，重命名为 checkpoint 文件；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:25;144:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;找到 tid 最大的 checkpoint 文件并读取元数据状态；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:26;145:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;读取 tid 大于等于最大的 checkpoint tid 的 editlog 编辑日志并回放，相关运行日志： &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:38;146:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Opened editlog file &amp;lt;editLogFile&amp;gt;.&lt;/codeph&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:27;147:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;回滚未提交的事务，相关运行日志： &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:39;148:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Will process pending transactions.&lt;/codeph&gt; &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:40;149:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Processing transactions took &amp;lt;time&amp;gt; seconds.&lt;/codeph&gt; &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:41;150:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Will process uncommited and committed but not completed transactions.&lt;/codeph&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:28;151:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;删除已回滚的事务 LOG 文件夹，相关运行日志： &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:42;152:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;As transaction &amp;lt;tid&amp;gt; is rollbacked, transaction log directory &amp;lt;logDir&amp;gt; is deleted.&lt;/codeph&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:29;153:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;完成，打印日志 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:43;153:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;ChunkMgmt initialization completed.。&lt;/codeph&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;25-数据节点恢复事务的重做日志回放&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:8;155:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:8;155:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2.5. 数据节点恢复事务的重做日志回放&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:8;155:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:35;157:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DolphinDB 集群支持&lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html?hl=enableDfsRecoverRedo&#34; scope=&#34;external&#34; xtrc=&#34;xref:8;157:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;?ditaot usertext?&gt;节点间数据恢复&lt;/xref&gt;功能，若配置了 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:24;157:132&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;enableDfsRecoverRedo = true&lt;/i&gt;，在节点间数据恢复的过程中，会将恢复事务相关的数据先写入 recover redo log 中，然后在启动时回放恢复事务的重做日志。相关文件存储在 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html?hl=recoverlogdir&#34; scope=&#34;external&#34; xtrc=&#34;xref:9;157:235&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;?ditaot usertext?&gt;recoverLogDir 配置项&lt;/xref&gt;目录下，说明如下：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:5;159:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;2&#34; xtrc=&#34;tgroup:5;159:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:12;159:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:13;159:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:5;159:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:26;159:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:79;159:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:14;159:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;文件名&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:80;159:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:15;159:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;说明&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:5;161:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:27;161:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:81;161:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;recover.log&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:82;161:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;恢复事务重做日志&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:28;162:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:83;162:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;recover.log.tmp&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:84;162:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;生成恢复事务重做日志时的临时文件&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:36;164:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;具体初始化流程如下：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/node_startup_process_and_questions/05.png&#34; placement=&#34;break&#34; xtrc=&#34;image:5;166:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34; dita-ot:image-width=&#34;172&#34; dita-ot:image-height=&#34;451&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:5;166:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;05&lt;/alt&gt;&lt;/image&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:5;168:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:30;168:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;如果同时存在恢复事务重做日志和对应临时文件，删除临时文件；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:31;169:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;从恢复事务重做日志中解析需要回放的恢复事务，相关运行日志： &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:44;170:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;RecoverRedoLogManager will recover chunk num=&amp;lt;chunkLsnSize&amp;gt;, total recover pack num=&amp;lt;allPacksSize&amp;gt;, skip garbage pack num=&amp;lt;garbageLsnsSize&amp;gt; will redo pack num=&amp;lt;size&amp;gt;&lt;/codeph&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:32;171:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;重做恢复事务，相关运行日志： &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:45;172:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;RecoverRedoLogManager finished chunk num is &amp;lt;finishPacksSize&amp;gt;, total chunks recover num is &amp;lt;lsnChunksSize&amp;gt;, compare checksum succ pack num is &amp;lt;recoverChecksumPackNum&amp;gt;, test replay num is &amp;lt;recoverTestPackNum&amp;gt;, actual recover redo pack num is &amp;lt;recoverReplayPackNum&amp;gt;, redo chunk num is &amp;lt;recoverReplayNum&amp;gt;&lt;/codeph&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:33;173:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;清理无用的恢复日志。&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;26-数据节点-tsdb-元数据初始化&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:9;175:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:9;175:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2.6. 数据节点 TSDB 元数据初始化&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:9;175:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:37;177:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DolphinDB 2.0 版本支持 TSDB 存储引擎，启动时会恢复 TSDB 的 level file 相关元数据。相关文件存储在 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html?hl=tsdbredologdir&#34; scope=&#34;external&#34; xtrc=&#34;xref:10;177:69&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;?ditaot usertext?&gt;TSDBRedoLogDir 配置项&lt;/xref&gt;的同级目录的 TSDBMeta 目录下，说明如下：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:6;179:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;2&#34; xtrc=&#34;tgroup:6;179:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:14;179:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:15;179:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:6;179:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:29;179:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:85;179:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:16;179:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;文件名&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:86;179:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:17;179:26&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;说明&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:6;181:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:30;181:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:87;181:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;iotEditLog.meta&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:88;181:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;TSDB 元数据的编辑日志文件。其中 cid 指事务提交 ID&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:31;182:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:89;182:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;iotCheckPointFile.meta&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:90;182:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;TSDB 元数据的 checkpoint 文件，当编辑日志过大时会做一次 checkpoint 保存最新的元数据的状态&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:32;183:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:91;183:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;iotCheckPointerFile.tmp&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:92;183:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;TSDB 元数据的 checkpoint 临时文件，做 checkpoint 时临时生成&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:38;185:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;具体初始化流程如下：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/node_startup_process_and_questions/06.png&#34; placement=&#34;break&#34; xtrc=&#34;image:6;187:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34; dita-ot:image-width=&#34;391&#34; dita-ot:image-height=&#34;571&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:6;187:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;06&lt;/alt&gt;&lt;/image&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:6;189:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:34;189:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;如果存在 checkpoint 临时文件，校验是否有效，若有效，重命名为 checkpoint 文件并删除编辑日志；若无效，则删除 checkpoint 临时文件，相关运行日志： &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:46;190:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;------RESTORE &amp;lt;tmpCheckPointFile&amp;gt; size &amp;lt;tmpLength&amp;gt;, &amp;lt;checkPointFile&amp;gt; size &amp;lt;length&amp;gt;, &amp;lt;editLogFile&amp;gt; size &amp;lt;editLength&amp;gt;;&lt;/codeph&gt; &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:47;191:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;------RESTORE rename tmp file&amp;lt;tmpCheckPointFile&amp;gt; to &amp;lt;checkPointFile&amp;gt;&lt;/codeph&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:35;192:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;读取 checkpoint 文件恢复元数据状态，相关运行日志： &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:48;193:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;------RESTORE checkpoint file to validPos &amp;lt;validPos&amp;gt;&lt;/codeph&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:36;194:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;读取和回放编辑日志文件恢复元数据状态，相关运行日志： &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:49;195:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;------RESTORE editLogFile file to validPos &amp;lt;validPos&amp;gt;&lt;/codeph&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:37;196:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;完成，打印日志 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:50;196:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Restore TSDB meta successfuly.&lt;/codeph&gt;。&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;27-数据节点-redo-log-回放&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:10;198:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:10;198:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2.7. 数据节点 redo log 回放&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:10;198:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:39;200:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DolphinDB 通过 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/tutorials/redoLog_cacheEngine.html?hl=redo%2Clog&#34; scope=&#34;external&#34; xtrc=&#34;xref:11;200:14&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;?ditaot usertext?&gt;redo log&lt;/xref&gt; 来实现意外重启时对已提交但未完成事务的回放。DolphinDB v2.00.10.3 版本对 append, tableInsert, insert into 等新增数据的写入操作支持 redo log。OLAP 存储引擎的 redo log 存储路径在 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html?hl=redologdir&#34; scope=&#34;external&#34; xtrc=&#34;xref:12;200:232&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;?ditaot usertext?&gt;redoLogDir 配置项&lt;/xref&gt;目录下，TSDB 存储引擎的 redo log 存储路径在 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html?hl=tsdbredologdir&#34; scope=&#34;external&#34; xtrc=&#34;xref:13;200:368&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;?ditaot usertext?&gt;TSDBRedoLogDir 配置项&lt;/xref&gt;目录下，相关文件：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:7;202:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;2&#34; xtrc=&#34;tgroup:7;202:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:16;202:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:17;202:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:7;202:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:33;202:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:93;202:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:18;202:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;文件名&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:94;202:14&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:19;202:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;说明&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:7;204:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:34;204:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:95;204:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;head.log&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:96;204:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;redo log 元数据信息&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:35;205:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:97;205:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;head.log.tmp&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:98;205:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;生成 redo log 元数据信息时的临时文件&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:36;206:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:99;206:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;lsn.log&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:100;206:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;redo log 全局序列号&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:37;207:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:101;207:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;tid.log&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:102;207:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;未完成的事务数据信息&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:40;209:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;具体初始化流程如下：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/node_startup_process_and_questions/07.png&#34; placement=&#34;break&#34; xtrc=&#34;image:7;211:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34; dita-ot:image-width=&#34;351&#34; dita-ot:image-height=&#34;487&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:7;211:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;07&lt;/alt&gt;&lt;/image&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:7;213:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:38;213:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;如果不存在 redo log 文件夹或 redo log 文件夹为空，跳过 redo log 回放，打印日志：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:51;213:59&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;No available redo log files were found. Redo log replay was skipped.&lt;/codeph&gt;；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:39;214:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;开始回放，打印日志：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:52;214:14&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Start recovering from redo log. This may take a few minutes.&lt;/codeph&gt;；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:40;215:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;如果存在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:25;215:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;head.log.tmp&lt;/i&gt;，删除；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:41;216:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;解析 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:26;216:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;head.log&lt;/i&gt; 得到 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:27;216:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;redo log&lt;/i&gt; 的元数据信息，包含可能需要回放的事务（已提交的）和不需要回放的事务（未提交或已完成的）；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:42;217:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;遍历可能需要回放的事务的 redo log，结合多方面信息具体判断是否需要回放，对于状态完成的事务立即回放，状态不确定的事务保留相关信息以备决议，相关运行日志： &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:53;218:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;applyTidRedoLog : &amp;lt;tid&amp;gt;,&amp;lt;chunkId&amp;gt;,&amp;lt;chunkPath&amp;gt;,&amp;lt;tablePhysicalName&amp;gt;,&amp;lt;newTableSize&amp;gt;,&amp;lt;lsn&amp;gt;,&amp;lt;newColumns&amp;gt;&lt;/codeph&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:43;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;结束回放，打印日志：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:54;219:14&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Completed CacheEngine GC and RedoLog GC after applying all redo logs and engine is &amp;lt;engineType&amp;gt;&lt;/codeph&gt;。&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:41;221:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:20;221:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;注意&lt;/b&gt;：redo log 与 cache engine 的具体功能介绍见 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/tutorials/redoLog_cacheEngine.html&#34; scope=&#34;external&#34; xtrc=&#34;xref:14;221:41&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;?ditaot usertext?&gt;redo log 和 cache engine&lt;/xref&gt;。有后台线程定期自动清理不再需要的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:28;221:149&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;tid.log&lt;/i&gt; 文件。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;28-控制节点-raft-元数据初始化&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:11;223:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:11;223:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2.8. 控制节点 RAFT 元数据初始化&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:11;223:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:42;225:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DolphinDB 的高可用集群通过 RAFT 管理 DFS 元数据、权限和函数视图数据等控制节点的元数据。Raft 日志存储在控制节点的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:29;225:71&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;HOME_DIR&amp;gt;/&amp;lt;NodeAlias&amp;gt;/raft&lt;/i&gt; 目录下，相关文件说明：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:8;227:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;2&#34; xtrc=&#34;tgroup:8;227:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:18;227:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:19;227:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:8;227:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:38;227:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:103;227:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:21;227:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;文件&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:104;227:26&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:22;227:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;说明&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:8;229:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:39;229:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:105;229:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;raftHardstate[group]&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:106;229:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;RAFT 的任期（term）和投票相关元数据信息。其中 group 为 RAFT 组号&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:40;230:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:107;230:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;raftWAL[group]&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:108;230:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;RAFT 业务数据日志，含其他使用 RAFT 模块的数据，如 DFS 元数据、权限和函数视图数据等。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:41;231:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:109;231:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;raftSnapshot[group]&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:110;231:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;RAFT 业务数据日志的快照&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:42;232:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:111;232:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;raftWAL[group].old&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:112;232:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;旧的业务数据日志，生成快照时的临时文件&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:43;233:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:113;233:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;raftSnapshot[group].tmp&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:114;233:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;生成快照时的临时文件&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:43;235:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;具体初始化流程如下：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/node_startup_process_and_questions/08.png&#34; placement=&#34;break&#34; xtrc=&#34;image:8;237:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34; dita-ot:image-width=&#34;121&#34; dita-ot:image-height=&#34;561&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:8;237:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;08&lt;/alt&gt;&lt;/image&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:8;239:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:44;239:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;开始，打印日志：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:55;239:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DFSMaster ElectionTick is set to [electionTick]&lt;/codeph&gt;；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:45;240:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;从 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:30;240:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;controller.cfg&lt;/i&gt; 读取 RAFT 集群信息；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:46;241:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;从 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:31;241:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;raftHardstate&lt;/i&gt; 读取 RAFT 成员相关的信息；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:47;242:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;从 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:32;242:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;raftSnapshot&lt;/i&gt; 读取业务日志的快照（可以理解为 checkpoint），清理快照临时文件；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:48;243:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;从 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:33;243:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;raftWAL&lt;/i&gt; 读取和重做业务日志（包含 dfsMeta, acl log, streamingHA log 等），相关运行日志： &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:56;244:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;Raft&amp;gt; Group &amp;lt;groupAlias&amp;gt; RaftWAL::reconstruct: read new file with &amp;lt;size&amp;gt; entries&lt;/codeph&gt; &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:57;245:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;Raft&amp;gt; Group &amp;lt;groupAlias&amp;gt; RaftWAL::reconstruct: read old file with &amp;lt;size&amp;gt; entries&lt;/codeph&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:49;246:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;初始化节点成为 follower，加入 RAFT 集群，相关运行日志： &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:58;247:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;Raft&amp;gt; Group &amp;lt;groupAlias&amp;gt; &amp;lt;NodeAlias&amp;gt; became follower at term &amp;lt;currentTerm&amp;gt;, leader is &amp;lt;leader&amp;gt;&lt;/codeph&gt; &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:59;248:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;Raft&amp;gt; Group &amp;lt;groupAlias&amp;gt; &amp;lt;NodeAlias&amp;gt; begin to clear all old notifiers&lt;/codeph&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:50;249:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;完成，打印日志：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:60;249:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;Raft&amp;gt; Group &amp;lt;groupAlias&amp;gt; initialized successfully.&lt;/codeph&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;29-定时任务初始化&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:12;251:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:12;251:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2.9. 定时任务初始化&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:12;251:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:44;253:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DolphinDB 的&lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/tutorials/scheduledJob.html&#34; scope=&#34;external&#34; xtrc=&#34;xref:15;253:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;?ditaot usertext?&gt;定时任务&lt;/xref&gt;会持久化保存到硬盘，单节点或控制节点保存在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:34;253:98&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;HOME_DIR&amp;gt;/&amp;lt;NodeAlias&amp;gt;/sysmgmt&lt;/i&gt; 目录下，数据节点或计算节点保存在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:35;253:150&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;HOME_DIR&amp;gt;/sysmgmt&lt;/i&gt; 目录下，相关文件说明：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:9;255:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;2&#34; xtrc=&#34;tgroup:9;255:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:20;255:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:21;255:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:9;255:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:44;255:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:115;255:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:23;255:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;文件&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:116;255:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:24;255:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;说明&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:9;257:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:45;257:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:117;257:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;jobEditlog.meta&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:118;257:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;定时任务的编辑日志文件&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:46;258:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:119;258:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;jobCheckPoint.meta&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:120;258:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;定时任务的 checkpoint 文件，当编辑日志过大时会做一次 checkpoint 保存最新的元数据的状态&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:47;259:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:121;259:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;jobCheckPoint.tmp&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:122;259:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;定时任务的 checkpoint 临时文件，做 checkpoint 时临时生成&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:45;261:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;具体初始化流程如下：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/node_startup_process_and_questions/09.png&#34; placement=&#34;break&#34; xtrc=&#34;image:9;263:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34; dita-ot:image-width=&#34;451&#34; dita-ot:image-height=&#34;661&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:9;263:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;09&lt;/alt&gt;&lt;/image&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:9;265:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:51;265:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;开始，打印日志：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:61;265:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Job scheduler start to initialize.&lt;/codeph&gt;；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:52;266:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;如果不存在编辑日志文件或为空，校验 checkpoint 临时文件，如果有效则重命名为 checkpoint 文件；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:53;267:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;如果存在 checkpoint 文件，校验，如果失效则报错退出；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:54;268:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;读取 checkpoint 文件恢复定时任务；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:55;269:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;读取和回放编辑日志文件恢复定时任务；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:56;270:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;裁剪无效的编辑日志；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:57;271:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;结束，打印日志：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:62;271:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Job scheduler initialization completed.&lt;/codeph&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;3-启动问题定位思路&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:13;273:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:13;273:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;3. 启动问题定位思路&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:13;273:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:46;275:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DolphinDB 节点启动失败时，最明显的现象是启动节点后，对应的 web 界面无法访问，如果是集群在 web 管理界面会看到节点状态为红色。启动问题主要可以分为三类：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:2;277:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:58;277:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;启动异常关闭&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:59;278:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;启动异常卡住&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:60;279:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;启动慢&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:47;281:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;首先需要先确认是哪类问题，在启动节点后，通过如下命令查看节点进程是否存在：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:1;283:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;ps -ef | grep dolphindb // 如果修改了可执行文件名，需要修改 dolphindb 为相应可执行文件名&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:48;287:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;若进程不存在则是启动异常关闭；若进程存在，通过如下命令搜索日志确定节点是否启动完成：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:2;289:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;grep &#34;Job scheduler initialization completed.&#34; dolphindb.log&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:49;293:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;若有执行启动后的时间的日志输出则节点已正常启动，可以去 web 界面刷新确认节点状态是否已为绿色；否则是启动异常卡住或启动慢。通过如下命令搜索节点运行日志中的 ERROR：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:3;295:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;grep &#34;ERROR&#34; dolphindb.log&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:50;299:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;若在执行启动后的时间一直重复刷某段 ERROR 日志，且节点进程一直在，则为启动异常卡在某个阶段；否则为正常启动，只是比较慢还没启动成功，需要继续等待观察启动结果。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:51;301:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;具体问题需要分析&lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html#ariaid-title4&#34; scope=&#34;external&#34; xtrc=&#34;xref:16;301:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;?ditaot usertext?&gt;节点运行日志&lt;/xref&gt;，节点运行日志存储位置由命令行参数 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:36;301:125&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;logFile&lt;/i&gt; 决定。另外集群环境下可以通过 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:37;301:150&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;logFile&lt;/i&gt; 配置项指定节点运行日志存储位置。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:52;303:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:25;303:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;注意&lt;/b&gt;：若使用 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:38;303:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;startSingle.sh&lt;/i&gt; 启动单节点，节点运行日志默认存储在安装目录的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:39;303:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;dolphindb.log&lt;/i&gt;。若使用 clusterDemo 文件夹下的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:40;303:90&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;startController.sh&lt;/i&gt; 和 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:41;303:113&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;startAgent.sh&lt;/i&gt; 来启动集群，节点运行日志默认存储在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:42;303:147&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;clusterDemo/log&lt;/i&gt;，文件名为 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:43;303:170&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;NodeAlias&amp;gt;.log&lt;/i&gt;。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;31-启动异常关闭&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:14;305:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:14;305:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;3.1. 启动异常关闭&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:14;305:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:53;307:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;首先需要区分节点是启动成功后的运行过程中异常宕机，还是启动过程中异常关闭。需要参照&lt;xref class=&#34;- topic/xref &#34; dita-ot:orig-format=&#34;md&#34; format=&#34;dita&#34; href=&#34;node_startup_process_and_questions.md#节点整体启动流程&#34; xtrc=&#34;xref:17;307:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;?ditaot usertext?&gt;“节点整体启动流程”&lt;/xref&gt;一节查看是否有节点启动完成的日志 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:63;307:121&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Job scheduler initialization completed.&lt;/codeph&gt;，有则是节点启动成功后运行过程中异常宕机，需要根据 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/tutorials/how_to_handle_crash.html&#34; scope=&#34;external&#34; xtrc=&#34;xref:18;307:188&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;?ditaot usertext?&gt;排查节点宕机的原因&lt;/xref&gt; 来定位节点宕机问题；否则是启动过程中异常关闭问题。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:54;309:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;需要查看节点最新运行日志中启动阶段的 ERROR 日志。注意要查看启动阶段的 ERROR 日志而不是启动失败后关机阶段的 ERROR 日志。DolphinDB 在关机时打印如下 ERROR 日志是预期的：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:4;311:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;... &amp;lt;ERROR&amp;gt; : The socket server ended. ... &amp;lt;ERROR&amp;gt; : AsynchronousSubscriberImp::run Shut down the subscription daemon. ...&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:55;319:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;如果存在关机日志，需要继续往上搜索 ERROR 查看启动阶段的日志，结合前文的启动流程分析和后文的常见启动问题来分析失败原因。另外需要注意是否在启动过程中宕机，若宕机节点进程会直接被杀死，而不会走关机流程，此时需要查看 coredump 里的堆栈信息：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:5;321:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;cd /path/to/dolphindb gdb dolphindb /path/to/corefile bt&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:56;327:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;堆栈信息需要发给 DolphinDB 技术支持来分析定位。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;32-启动异常卡住&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:15;329:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:15;329:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;3.2. 启动异常卡住&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:15;329:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:57;331:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;需要查看节点最新运行日志中的 ERROR 日志，结合前文的启动流程分析、后文的常见启动问题来确定当前节点正在启动什么模块、执行什么动作失败。一般会重复打印某段 ERROR 日志以尝试启动，可以使用如下命令实时查看节点刷的日志：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:6;333:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;tail -f dolphindb.log&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:58;337:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;另外可以使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:64;337:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;pstack&lt;/codeph&gt; 命令来查看启动时节点内部各个线程的堆栈信息，以确定线程具体执行的动作：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:7;339:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;pstack dolphindb_pid &amp;gt; /tmp/pstack.log # 替换 dolphindb_pid 为 dolphindb 进程号&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:59;343:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;堆栈信息需要发给 DolphinDB 技术支持来分析定位。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;33-启动慢&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:16;345:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:16;345:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;3.3. 启动慢&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:16;345:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:60;347:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;需要查看节点最新运行日志，结合前文的启动流程分析、后文的常见启动问题来确定当前节点正在启动什么模块、执行什么动作。启动慢时，一般不会有 ERROR 日志。常见的启动慢原因是回滚事务或回放 redo log，详见 &lt;xref class=&#34;- topic/xref &#34; dita-ot:orig-format=&#34;md&#34; format=&#34;dita&#34; href=&#34;node_startup_process_and_questions.md#启动慢&#34; xtrc=&#34;xref:19;347:107&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;?ditaot usertext?&gt;“启动慢”&lt;/xref&gt;一节。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:61;349:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;另外可以使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:65;349:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;pstack&lt;/codeph&gt; 命令来查看启动时节点内部各个线程的堆栈信息，以确定线程具体执行的动作：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:8;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;pstack dolphindb_pid &amp;gt; /tmp/pstack.log # 替换 dolphindb_pid 为 dolphindb 进程号&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:62;355:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;堆栈信息需要发给 DolphinDB 技术支持来分析定位。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;4-常见问题&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:17;357:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:17;357:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;4. 常见问题&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:17;357:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:63;359:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;列出 DolphinDB 常见的启动问题和解决方案。若问题现象不属于常见问题，请联系 DolphinDB 技术支持定位处理。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;41-启动异常关闭&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:18;361:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:18;361:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;4.1. 启动异常关闭&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:18;361:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;411-license-过期&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:19;363:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:19;363:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;4.1.1. license 过期&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:19;363:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:64;365:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DolphinDB 会在 license 过期前 15 天在 web 或 gui 提示 license 即将过期，而过期后如果节点还在线则能够继续使用 15 天，到第 15 天时会自动关机。License 过期后启动 DolphinDB 会失败，节点运行日志中会有如下 WARNING 和 ERROR 日志：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:9;367:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2023-10-13 09:52:30.007743 &amp;lt;WARNING&amp;gt; :The license has expired. Please renew the license and restart the server. 2023-10-13 09:52:30.163238 &amp;lt;ERROR&amp;gt; : The license has expired.&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:65;372:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;需要联系销售获取更新 license。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;412-端口冲突&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:20;374:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:20;374:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;4.1.2. 端口冲突&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:20;374:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:66;376:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DolphinDB 启动时会绑定一个端口用来做网络传输，由配置文件的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:44;376:36&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;localSite&lt;/i&gt; 配置项指定。若配置的端口被其他程序占用，或上一次关闭节点还没有完全关闭，则会导致节点启动时绑定端口失败而启动失败。查看节点运行日志有如下报错：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:10;378:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2023-10-26 09:01:31.349118 &amp;lt;ERROR&amp;gt; :Failed to bind the socket on port 8848 with error code 98 2023-10-26 09:01:31.349273 &amp;lt;ERROR&amp;gt; :Failed to bind the socket on port 8848. Shutting down the server. Please try again in a couple of minutes.&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:67;384:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;运行如下命令查看占用指定端口的程序：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:11;386:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;netstat -nlp | grep 端口号&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:68;390:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;解决方案是停止占用端口的程序后再启动。若为上一次关闭的节点还没有完全关闭，需要等待节点关闭或使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:66;390:50&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;kill -9&lt;/codeph&gt; 强行停止节点再启动，强行停止节点可能会导致关机前未完成的写入的数据丢失。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;413-redo-log-文件损坏&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:21;392:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:21;392:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;4.1.3. redo log 文件损坏&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:21;392:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:69;394:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;数据节点启动时会回放 redo log，如果上次运行时出现磁盘满、宕机或 bug，可能导致 redo log 文件损坏，可能导致节点启动时回放 redo log 失败抛出异常而启动失败。例如查看节点运行日志有如下报错：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:12;396:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2023-12-11 15:18:58.888865 &amp;lt;INFO&amp;gt; :applyTidRedoLog : 2853,c686664b-d020-429a-1746-287d670099e9,/hdd/hdd7/hanyang/server/clusterDemo/data/P1-datanode/storage/CHUNKS/multiValueTypeDb1/20231107/Key0/g z,pt_2,32054400,1046013,0 2023-12-11 15:18:58.895064 &amp;lt;ERROR&amp;gt; :VectorUnmarshall::start Invalid data form 0 type 0 2023-12-11 15:18:58.895233 &amp;lt;ERROR&amp;gt; :The redo log for transaction [2853] comes across error: Failed to unmarshall data.. Invalid message format 2023-12-11 15:18:58.895476 &amp;lt;ERROR&amp;gt; :The ChunkNode failed to initialize with exception [Failed to unmarshall data.. Invalid message format]. 2023-12-11 15:18:58.895555 &amp;lt;ERROR&amp;gt; :ChunkNode service comes up with the error message: Failed to unmarshall data.. Invalid message format&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:70;405:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;日志含义为回放 redo log 时发现 tid 为 2853 的 redo log 文件格式错误导致回放失败。此时需要通过如下步骤跳过 redo log 回放：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:10;407:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:61;407:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;mv 移走 redoLogDir 和 TSDBRedoLogDir 文件夹下的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:45;407:44&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;head.log&lt;/i&gt; 文件，cp 备份报错对应的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:46;407:69&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2853.log&lt;/i&gt; 文件；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:62;408:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;启动节点，观察是否正常启动，启动后检查重启前正在写入的数据完整性，是否要补数据等。&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:71;410:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;如果不是磁盘满导致，需要将 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:47;410:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;head.log&lt;/i&gt; 和报错对应的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:48;410:33&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2853.log&lt;/i&gt; 发给 DolphinDB 技术支持定位问题。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;414-函数视图或定时任务包含不存在的方法&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:22;412:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:22;412:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;4.1.4. 函数视图或定时任务包含不存在的方法&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:22;412:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:72;414:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;节点启动时会反序列化函数视图和定时任务文件，若反序列化的方法定义中包含不存在于内存的方法，将会导致相关函数视图和定时任务反序列化失败。常见情况如下：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:3;416:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:63;416:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;使用了未配置自动加载的插件和模块的方法&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:64;417:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;更新插件或模块后相关方法名变更&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:73;419:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;例如，定义定时任务 myTest 调用 rabbitmq 插件的方法：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:13;421:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;loadPlugin(&#34;plugins/rabbitmq/PluginRabbitMQ.txt&#34;) def myTest() { HOST=&#34;192.168.0.53&#34; PORT=5672 USERNAME=&#34;guest&#34; PASSWORD=&#34;guest&#34; conn = rabbitmq::connection(HOST, PORT, USERNAME, PASSWORD); } scheduleJob(&#34;myTest&#34;, &#34;myTest&#34;, myTest, 15:50m, startDate=today(), endDate=today()+3, frequency='D')&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:74;436:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;如果未配置 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:49;436:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;preloadModules=plugins::rabbitmq&lt;/i&gt;，则节点启动时不会加载 rabbitmq 插件的函数定义到内存，节点启动反序列化定时任务会失败，运行日志会有如下报错：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:14;438:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2023-10-13 09:55:30.166268 &amp;lt;ERROR&amp;gt; :CodeUnmarshall::start readObjectAndDependency exception: Can't recognize function: rabbitmq::connection 2023-10-13 09:55:30.166338 &amp;lt;ERROR&amp;gt; :Failed to unmarshall the job [myTest]. Can't recognize function: rabbitmq::connection. Invalid message format&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:75;443:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;解决方案是添加报错方法对应的插件或模块到 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:50;443:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;preloadModules&lt;/i&gt; 配置项，即配置 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:51;443:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;preloadModules=plugins::rabbitmq&lt;/i&gt;，然后再启动节点。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:76;445:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;若为更新插件或模块后相关方法名变更，需要回退插件或模块再启动，删除对应的视图或定时任务后，再升级插件或模块。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;415-函数视图或定时任务包含不存在的共享表&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:23;447:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:23;447:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;4.1.5. 函数视图或定时任务包含不存在的共享表&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:23;447:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:77;449:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:26;449:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;注意&lt;/b&gt;：该问题已在 1.30.23.1/2.00.11.1 或以上版本修复。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:78;451:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;节点启动时会反序列化函数视图和定时任务文件，若反序列化的方法定义中包含不存在于内存的共享表，将会导致相关函数视图和定时任务反序列化失败。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:79;453:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:27;453:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;问题 1&lt;/b&gt;：&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:28;453:10&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;定时任务反序列化失败&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:80;455:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;例如，定时任务 myTest 的定义如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:15;457:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;share table(1 2 3 as id, 1 2 3 as val) as t def myTest() { update t set val = val + 1 } scheduleJob(&#34;myTest&#34;, &#34;myTest&#34;, myTest, minute(now())+5, today(), today(), 'D')&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:81;467:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;其中第 4 行的 update 语句用于更新共享表 t。如果在启动脚本 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:52;467:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;startup.dos&lt;/i&gt; 中未创建共享表 t，则节点启动时反序列化定时任务会失败，运行日志会有如下 WARNING 和 ERROR 日志：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:16;469:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2023-10-23 09:38:27.746184 &amp;lt;WARNING&amp;gt; :Failed to recognize shared variable t 2023-10-23 09:38:27.746343 &amp;lt;ERROR&amp;gt; :CodeUnmarshall::start readObjectAndDependency exception: Failed to deserialize update statement 2023-10-23 09:38:27.746404 &amp;lt;ERROR&amp;gt; :Failed to deserialize update statement. Invalid message format&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:82;475:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;原因：定时任务的定义中使用了未创建的表。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:83;477:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;解决方法：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:11;479:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:65;479:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;在报错的定时任务 myTest 中检查是否使用了未创建的表，例如前述的共享表 t。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:66;480:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;在定时任务所在节点的启动脚本 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:53;480:19&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;startup.dos&lt;/i&gt; 中添加相应的建表语句。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:67;481:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;启动节点。&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:84;483:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:29;483:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;问题 2：函数视图反序列化失败&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:85;485:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;如果将前述问题 1 中的定时任务 myTest 添加到函数视图，例如：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:67;485:36&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;addFunctionView(myTest)&lt;/codeph&gt;，也会导致节点启动时反序列化函数视图失败，运行日志中会出现相同的报错。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:86;487:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;原因：函数视图反序列化先于节点启动，因此在控制节点的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:54;487:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;startup.dos&lt;/i&gt; 中定义共享表 t 也不会有效。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:87;489:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;解决方法：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:4;491:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:68;491:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;对于普通集群：&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:12;492:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:69;492:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;移除 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:55;492:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;/sysmgmt&lt;/i&gt; 下的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:56;492:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;aclEditlog.meta&lt;/i&gt;、&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:57;492:41&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;aclCheckPoint.meta&lt;/i&gt;、&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:58;492:62&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;aclCheckPoint.tmp&lt;/i&gt;。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:70;493:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;重新启动节点。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:71;494:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:30;494:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;启动后重新添加所有权限和函数视图定义。&lt;/b&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:72;495:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;对于高可用集群，如果未重启，或存在半数以上控制节点存活：&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:13;496:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:73;496:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;删除相关函数视图：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:68;496:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;dropFunctionView(&#34;myTest&#34;)&lt;/codeph&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:74;497:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;生成权限与函数视图的 checkpoint 文件以避免启动时回放 RAFT 日志执行之前的函数视图定义。&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:69;497:58&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;rpc(getControllerAlias(), aclCheckPoint, true)&lt;/codeph&gt; // 参数 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:59;497:113&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;force&lt;/i&gt; = true 表示强制生成 checkpoint。&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:75;498:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;对于高可用集群，如果已重启：&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:14;499:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:76;499:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;移除所有控制节点的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:60;499:16&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;HOME_DIR&amp;gt;/&amp;lt;NodeAlias&amp;gt;/raft&lt;/i&gt; 目录下的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:61;499:53&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;raftHardstate[group]&lt;/i&gt;、&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:62;499:77&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;raftWAL[group]&lt;/i&gt;、&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:63;499:95&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;raftSnapshot[group]&lt;/i&gt;、&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:64;499:118&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;raftWAL[group].old&lt;/i&gt;、&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:65;499:140&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;raftSnapshot[group].tmp&lt;/i&gt;。&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:31;499:167&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;注意：这会导致集群元数据全部失效。&lt;/b&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:77;500:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;重新启动节点。&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:88;502:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;必然存在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:66;502:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;aclEditlog.meta&lt;/i&gt;，可能存在&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:67;502:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;aclCheckPoint.meta&lt;/i&gt;，&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:68;502:49&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;aclCheckPoint.tmp&lt;/i&gt;。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:89;504:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;必然存在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:69;504:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;raftHardstate[group]&lt;/i&gt;，&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:70;504:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;raftWAL[group]&lt;/i&gt;，可能存在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:71;504:53&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;raftSnapshot[group]&lt;/i&gt;，&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:72;504:76&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;raftWAL[group].old&lt;/i&gt;，&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:73;504:98&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;raftSnapshot[group].tmp&lt;/i&gt;。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:90;506:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;后续版本会优化添加函数视图的功能以避免需要删除元数据来解决该问题。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;416-函数视图方法名与预加载的模块或插件的方法名冲突&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:24;508:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:24;508:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;4.1.6. 函数视图方法名与预加载的模块或插件的方法名冲突&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:24;508:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:91;510:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;节点启动时会反序列化函数视图文件，若反序列化的函数视图方法名与已通过 preloadModule 加载的方法名冲突，将会导致函数视图反序列化失败。例如，直接添加 ops 模块的 cancelJobEx 方法到函数视图：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:17;512:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;use ops addFunctionView(ops::cancelJobEx)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:92;517:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;若同时配置 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:74;517:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;preloadModules=ops&lt;/i&gt;，启动时运行日志会有如下报错：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:18;519:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2023-10-20 08:46:15.733365 &amp;lt;ERROR&amp;gt; :CodeUnmarshall::start readObjectAndDependency exception: Not allowed to overwrite existing functions/procedures [ops::cancelJobEx] by system users. 2023-10-20 08:46:15.733422 &amp;lt;ERROR&amp;gt; :Not allowed to overwrite existing functions/procedures [ops::cancelJobEx] by system users.. Invalid message format&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:93;524:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;解决方案是去掉 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:75;524:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;preloadModules=ops&lt;/i&gt; 配置项，然后再启动节点。不建议先定义模块再将模块内的方法添加到函数视图，而应该直接定义方法再添加到函数视图。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;417-定时任务文件损坏&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:25;526:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:25;526:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;4.1.7. 定时任务文件损坏&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:25;526:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:94;528:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DolphinDB 序列化定时任务到文件时，如果上次运行时出现磁盘满、宕机或 bug，可能导致定时任务文件损坏，可能导致节点启动时反序列化失败抛出异常而启动失败。例如查看节点运行日志有如下报错：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:19;530:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2023-10-13 09:57:30.456789 &amp;lt;ERROR&amp;gt; :CodeUnmarshall::start readObjectAndDependency exception: Failed to deserialize update statement 2023-10-13 09:57:30.456789 &amp;lt;ERROR&amp;gt; :Failed to unmarshall the job [myTest]. Failed to deserialize update statement. Invalid message format&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:95;535:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;此时如果希望尽快启动节点，可以移走 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:76;535:19&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;jobEditlog.meta&lt;/i&gt;、&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:77;535:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;jobCheckPoint.meta&lt;/i&gt;、&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:78;535:58&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;jobCheckPoint.tmp&lt;/i&gt; 文件以跳过启动时的定时任务反序列化，再启动节点。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:96;537:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:32;537:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;注意&lt;/b&gt;：必然存在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:79;537:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;jobEditlog.meta&lt;/i&gt;，可能存在&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:80;537:35&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;jobCheckPoint.meta&lt;/i&gt;、&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:81;537:56&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;jobCheckPoint.tmp&lt;/i&gt;。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:97;539:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;请打包定时任务文件、日志里报错的定时任务脚本和节点运行日志，联系 DolphinDB 技术支持排查问题。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:98;541:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;节点启动后，需要重新提交所有定时任务。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;418-权限与函数视图文件损坏&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:26;543:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:26;543:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;4.1.8. 权限与函数视图文件损坏&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:26;543:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:99;545:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DolphinDB 序列化权限操作和函数视图定义到文件时，如果上次运行时出现磁盘满、宕机或 bug，可能导致权限和函数视图文件损坏，可能导致节点启动时反序列化失败抛出异常而启动失败。例如查看节点运行日志有如下报错：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:20;547:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2023-10-13 09:59:35.786438 &amp;lt;ERROR&amp;gt; :CodeUnmarshall::start readObjectAndDependency exception: Failed to deserialize sql query object 2023-10-13 09:59:35.786438 &amp;lt;ERROR&amp;gt; :Failed to unmarshall the job [myTest1]. Failed to deserialize sql query object. Invalid message format&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:100;552:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;此时如果希望尽快启动节点，可以参考&lt;xref class=&#34;- topic/xref &#34; dita-ot:orig-format=&#34;md&#34; format=&#34;dita&#34; href=&#34;node_startup_process_and_questions.md#函数视图或定时任务包含不存在的共享表&#34; xtrc=&#34;xref:20;552:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;?ditaot usertext?&gt;“函数视图或定时任务包含不存在的共享表”&lt;/xref&gt;中的 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:33;552:103&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;问题 2：函数视图反序列化失败&lt;/b&gt; 小节的解决方法移走权限与函数视图文件以跳过反序列化。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:101;554:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;请打包权限和函数视图文件、日志里报错的函数视图脚本和节点运行日志，联系 DolphinDB 技术支持排查问题。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:102;556:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;节点启动后，需要重新添加所有权限和函数视图定义。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;419-raft-文件损坏&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:27;558:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:27;558:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;4.1.9. RAFT 文件损坏&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:27;558:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:103;560:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:34;560:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;注意&lt;/b&gt;：下面介绍的操作需要确保已经有另一个节点成为 RAFT 集群 leader 才可以进行。DolphinDB 写 RAFT 元数据和日志时，如果上次运行时出现磁盘满、宕机或 bug，可能导致 RAFT 元数据或日志文件损坏，可能导致控制节点启动时恢复 RAFT 数据失败抛出异常而启动失败。例如查看节点运行日志有如下报错：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:21;562:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2023-10-13 09:59:35.786438 &amp;lt;WARNING&amp;gt; :[Raft] incomplete hardstate file [/data/server/data/controllerl/raft/raftHardstatel] 2023-10-13 09:59:35.786438 &amp;lt;INFO&amp;gt; :[Raft] Group DFSMaster RaftWAL::reconstruct: read new file with 83213 entries 2023-10-13 09:59:35.786438 &amp;lt;ERROR&amp;gt; :[Raft] Group DFSMaster RawNode::init: failed to initialize with exception [basic_string::_S_create]. 2023-10-13 09:59:35.786438 &amp;lt;ERROR&amp;gt; :Failed to start DFSMaster with the error message: basic_string::_S_create &lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:104;569:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;此时如果希望尽快启动节点，可以移走问题节点的 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html?hl=dfsmetadir&#34; scope=&#34;external&#34; xtrc=&#34;xref:21;569:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;?ditaot usertext?&gt;dfsMetaDir 配置项&lt;/xref&gt;文件夹和 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:82;569:135&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;HOME_DIR&amp;gt;/&amp;lt;NodeAlias&amp;gt;/raft&lt;/i&gt; 文件夹以跳过启动时的 DFS 和 RAFT 元数据初始化，再启动节点。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:105;571:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;请打包 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html?hl=dfsmetadir&#34; scope=&#34;external&#34; xtrc=&#34;xref:22;571:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;?ditaot usertext?&gt;dfsMetaDir 配置项&lt;/xref&gt;文件夹、 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:83;571:116&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;HOME_DIR&amp;gt;/&amp;lt;NodeAlias&amp;gt;/raft&lt;/i&gt; 文件夹和节点运行日志，联系 DolphinDB 技术支持排查问题。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:106;573:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;节点启动后，会自动同步 leader 节点的元数据。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;42-启动异常卡住&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:28;575:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:28;575:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;4.2. 启动异常卡住&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:28;575:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;421-集群间网络不通&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:29;577:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:29;577:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;4.2.1. 集群间网络不通&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:29;577:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:107;579:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;在多台机器上部署 DolphinDB 时，需要确保集群间各个节点的 IP:端口号互通，否则会导致节点启动失败。常见原因和现象是调整了机器网络配置后重启高可用集群，进入控制节点 web 管理界面白屏，查看控制节点日志中有如下报错：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:22;581:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2023-11-01 16:00:34.992500 &amp;lt;INFO&amp;gt; :New connection from ip = 192.168.0.44 port = 35416 2023-11-01 16:00:35.459220 &amp;lt;INFO&amp;gt; :DomainSiteSocketPool::closeConnection: Close connection to ctl1 #44 with error: epoll-thread: Read/Write failed. Connection timed out. siteIndex 0, withinSiteIndex 44&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:108;586:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;或在 web 启动数据节点时报错 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:70;586:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;IO error type 1&lt;/codeph&gt;（含义为 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:71;586:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Socket is disconnected/closed or file is closed&lt;/codeph&gt;，即网络连接断开）。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:109;588:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;需要联系运维调通网络。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;422-rsa-密钥校验文件损坏&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:30;590:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:30;590:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;4.2.2. RSA 密钥校验文件损坏&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:30;590:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:110;592:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DolphinDB 生成 RSA 密钥校验文件时，如果上次运行时出现磁盘满、宕机或 bug，可能导致 RSA 密钥校验文件损坏，使节点无法正常通过 RSA 密钥来通信，进而导致启动流程卡住。查看节点运行日志有如下报错：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:23;594:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2023-10-25 11:55:04.987161 &amp;lt;ERROR&amp;gt; :Failed to decrypt the message by RSA public key.&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:111;598:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;解决方案是删除所有控制节点的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:84;598:16&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;HOME_DIR&amp;gt;/&amp;lt;NodeAlias&amp;gt;/keys&lt;/i&gt; 目录并重启集群，以触发 RSA 密钥校验文件重新生成。&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:35;598:75&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;注意删除 keys 文件夹后需要重新提交集群的所有定时任务。&lt;/b&gt;&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;43-启动慢&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:31;600:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:31;600:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;4.3. 启动慢&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:31;600:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;431-正在回滚事务如何查看进度如何删除事务-log-以跳过&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:32;602:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:32;602:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;4.3.1. 正在回滚事务，如何查看进度，如何删除事务 log 以跳过&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:32;602:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:112;604:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DolphinDB 启动时，如果日志里有 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:72;604:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Will process pending transactions.&lt;/codeph&gt; 而没有&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:73;604:62&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;ChunkMgmt initialization completed.&lt;/codeph&gt; 说明正在回滚事务。如果节点宕机时的写入事务涉及的分区过多或数据量过大，可能导致事务回滚时间较长。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:113;606:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;查看回滚进度的方法：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:15;608:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:78;608:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;查看 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:85;608:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;chunkMetaDir&amp;gt;/LOG&lt;/i&gt; 目录下以 tid 命名的文件夹数目是否减少，这里只能根据文件夹减少速度估计回滚速度；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:79;609:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;若关机前有删除事务，查看 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:86;609:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;volumes&amp;gt;/LOG&lt;/i&gt; 目录下以 tid 命名的文件夹数目是否减少，文件夹数目为 0 时回滚完毕。&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:114;611:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:36;611:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;注意&lt;/b&gt;：统计文件数目可以使用 Linux 命令： &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:74;611:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;ll -hrt &amp;lt;chunkMetaDir&amp;gt;/LOG | wc -l&lt;/codeph&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:115;613:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:37;613:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;强烈建议等待事务回滚完成&lt;/b&gt;，跳过事务回滚会使原本应该回滚的事务不回滚，导致事务相关的数据或元数据错误。若客户希望尽快启动节点且&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:38;613:67&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;不需要保证节点宕机前正在写入的数据完整性&lt;/b&gt;，可以通过如下步骤跳过事务回滚：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:16;615:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:80;615:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:75;615:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;kill -15 pid&lt;/codeph&gt; 安全关闭节点，若正在启动时无法关闭则使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:76;615:43&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;kill -9&lt;/codeph&gt; 强制关闭节点，因为正在启动所以不会有新的写入；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:81;616:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;mv 移走 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:87;616:10&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;chunkMetaDir&amp;gt;/LOG&lt;/i&gt; 和 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:88;616:34&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&amp;lt;volumes&amp;gt;/LOG&lt;/i&gt; 文件夹；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:82;617:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;启动节点，观察是否正常启动，启动后检查重启前正在写入的数据完整性，是否要补数据等。&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;432-正在回放-redo-log如何查看进度如何删除-redo-log-以跳过&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:33;619:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:33;619:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;4.3.2. 正在回放 redo log，如何查看进度，如何删除 redo log 以跳过&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:33;619:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:116;621:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DolphinDB 启动时，如果日志里有 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:77;621:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Start recovering from redo log. This may take a few minutes.&lt;/codeph&gt; 而没有&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:78;621:88&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Completed CacheEngine GC and RedoLog GC after applying all redo logs and engine is &amp;lt;engineType&amp;gt;&lt;/codeph&gt; ，说明正在回放 redo log。期间会刷带“RedoLog”的日志例如：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:24;623:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&#34;applyTidRedoLog : 20716,f7dbaef9-05bc-10b6-f042-a14bc0e9c897,/home/DolphinDB/server/clusterDemo/data/node2/storage/CHUNKS/snapshotDB/20220803/Key17/5o7,shfe_5,166259,107,0&#34;&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:117;627:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;注意：如果是 DolphinDB 2.0 版本，会有两次 redo log 回放，对应 OLAP 和 TSDB 存储引擎，故对应的日志也有两份；如果是 DolphinDB 1.0 版本，只会有一次 OLAP 存储引擎的 redo log 回放。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:118;629:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;查看回放进度的方法：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:5;631:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:83;631:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;统计 redoLogDir 和 TSDBRedoLogDir 下的 tid.log 文件数目，为 0 时回放完毕；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:84;632:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;统计 redoLogDir 和 TSDBRedoLogDir 文件夹大小，除以硬盘的读速率，可估计最快的回放完成时间。&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:119;634:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:39;634:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;注意&lt;/b&gt;：统计文件夹大小可以使用 Linux 命令：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:79;634:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;du -sh &amp;lt;redoLogDir&amp;gt;&lt;/codeph&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:120;636:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:40;636:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;强烈建议等待 redo log 回放完成&lt;/b&gt;，跳过 redo log 回放会使原本应该回放的事务不回放，会导致事务相关的数据或元数据错误。若客户希望尽快启动节点且&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:41;636:84&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;不需要保证节点宕机前正在写入的数据完整性&lt;/b&gt;，可以通过如下步骤跳过 redo log 回放：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:17;638:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:85;638:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:80;638:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;kill -15 pid&lt;/codeph&gt; 安全关闭节点，若正在启动时无法关闭则使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:81;638:43&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;kill -9&lt;/codeph&gt; 强制关闭节点，因为正在启动所以不会有新的写入；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:86;639:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;mv 移走 redoLogDir 和 TSDBRedoLogDir 文件夹下的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:89;639:44&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;head.log&lt;/i&gt; 文件；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:87;640:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;启动节点，观察是否正常启动，启动后检查重启前正在写入的数据完整性，是否要补数据等。&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;44-其他问题&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:34;642:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:34;642:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;4.4. 其他问题&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:34;642:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;441-启动脚本运行慢或失败&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:35;644:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:35;644:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;4.4.1. 启动脚本运行慢或失败&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:35;644:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:121;646:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;启动脚本 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:90;646:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;startup.dos&lt;/i&gt; 运行慢会导致启动流程走不到初始化定时任务一步，但由于节点在 redo log 回放完成后即在 web 集群管理界面转变状态为绿色，已经可以访问，故会导致定时任务相关功能在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:91;646:106&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;startup.dos&lt;/i&gt; 执行完前无法使用。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:122;648:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;启动脚本 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:92;648:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;startup.dos&lt;/i&gt; 或 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:93;648:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;postStart.dos&lt;/i&gt; 运行失败会在节点运行日志里打印错误日志，然后跳过启动脚本报错行后的执行，不会导致节点启动失败，也不会回滚执行失败的动作，需要客户自行考虑启动脚本运行失败的情况。注意在&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:42;648:121&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;集群模式下，执行启动脚本时无法保证分布式数据库已初始化完毕&lt;/b&gt;，在启动脚本访问分布式库表可能会报错。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:123;650:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;故不建议在启动脚本执行太慢的操作或涉及分布式库表的操作，而只做一些比较简单的操作如建共享表、加载插件等。启动脚本详细介绍见 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/tutorials/Startup.html&#34; scope=&#34;external&#34; xtrc=&#34;xref:23;650:63&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;?ditaot usertext?&gt;启动脚本&lt;/xref&gt;。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:124;652:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;可以参考如下脚本在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:94;652:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;startup.dos&lt;/i&gt; 或 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:95;652:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;postStart.dos&lt;/i&gt; 等待分布式模块准备完毕：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:25;654:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;def isClusterOk() { do { try { meta = rpc(getControllerAlias(), getClusterChunksStatus) configReplicaCount = 2 // 需要修改为 dfsReplicationFactor 配置项值 cnt1 = exec count(*) from meta where state != &#34;COMPLETE&#34; cnt2 = exec count(*) from meta where replicaCount != configReplicaCount if (cnt1 == 0 and cnt2 == 0) { break } else { writeLog(&#34;startup isClusterOk: state != 'COMPLETE' cnt: &#34; + string(cnt1) + &#34;, &#34; + &#34;replicaCount != &#34; + string(configReplicaCount) + &#34; cnt: &#34; + string(cnt2)) } } catch (err) { writeLog(&#34;startup isClusterOk: &#34; + err) } sleep(3*1000) } while(1) return true } res = isClusterOk() writeLog(&#34;startup isClusterOk: &#34;, string(res))&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;5-新旧版本日志对照表&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:36;683:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:36;683:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;5. 新旧版本日志对照表&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:36;683:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:10;685:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;4&#34; xtrc=&#34;tgroup:10;685:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:22;685:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:23;685:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:24;685:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col4&#34; colnum=&#34;4&#34; xtrc=&#34;colspec:25;685:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:10;685:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:48;685:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:123;685:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:43;685:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2.00.11 及以后&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:124;685:62&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:44;685:63&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;新版备注&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:125;685:93&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:45;685:94&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;2.00.11 以前&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:126;685:154&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:46;685:155&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;旧版备注&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:10;687:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:49;687:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:127;687:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:82;687:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Initializing AclManager with Raft &amp;lt;raft mode&amp;gt;&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:128;687:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;RAFT mode 为 enabled 或 disabled&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:129;687:98&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:83;687:99&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;AclManager start to initialize with raftmode is &amp;lt;raft mode&amp;gt;&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:130;687:162&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;RAFT mode 为 0 或 1&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:50;688:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:131;688:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:84;688:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Initialization of AclManager is completed with Raft &amp;lt;raft mode&amp;gt;&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:132;688:70&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;RAFT mode 为 enabled 或 disabled&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:133;688:103&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:85;688:104&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;AclManager::init successfully with raftmode is &amp;lt;raft mode&amp;gt;&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:134;688:166&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;RAFT mode 为 0 或 1&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:51;689:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:135;689:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:86;689:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Controller initialization completed.&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:136;689:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt; &lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:137;689:100&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:87;689:101&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;DFS master is ready.&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:138;689:163&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt; &lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:52;690:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:139;690:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:88;690:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;ChunkMgmt initialization completed.&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:140;690:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt; &lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:141;690:100&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:89;690:101&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;ChunkMgmt initiated successfully.&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:142;690:163&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt; &lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:53;691:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:143;691:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:90;691:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Restore TSDB meta successfuly.&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:144;691:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt; &lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:145;691:100&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:91;691:101&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Restore iot meta successfuly.&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:146;691:163&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt; &lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:54;692:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:147;692:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:92;692:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;No available redo log files were found. Redo log replay was skipped.&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:148;692:75&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt; &lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:149;692:110&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:93;692:111&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;No need to recover from redo log.&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:150;692:173&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt; &lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:55;693:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:151;693:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:94;693:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Job scheduler start to initialize.&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:152;693:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt; &lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:153;693:100&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:95;693:101&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Job schedule start to initialize.&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:154;693:163&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt; &lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:56;694:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:155;694:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:96;694:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Job scheduler initialization completed.&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:156;694:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt; &lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:157;694:100&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:97;694:101&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;Job schedule initialized successfully.&lt;/codeph&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:158;694:163&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt; &lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;6-总结&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:37;696:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:37;696:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;6. 总结&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:37;696:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:125;698:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/node_startup_process_and_questions.md&#34;&gt;本文介绍了 DolphinDB 整体的启动流程和重要模块的启动流程，并分析了启动时常见问题的现象、原因和解决方案。了解 DolphinDB 的启动流程与常见问题，有助于维护 DolphinDB 的稳定运行。遇到启动问题时，DolphinDB 运维人员可以参照本文处理一些常见问题，使 DolphinDB 尽快正常运行。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;"/><meta name="wh-source-relpath" content="tutorials/node_startup_process_and_questions.md"/><meta name="wh-out-relpath" content="tutorials/node_startup_process_and_questions.html"/>

    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/commons.css?buildId=2024012323"/>
    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic.css?buildId=2024012323"/>

    <script src="../oxygen-webhelp/app/options/properties.js?buildId=20250305183303"></script>
    <script src="../oxygen-webhelp/app/localization/strings.js?buildId=2024012323"></script>
    <script src="../oxygen-webhelp/app/search/index/keywords.js?buildId=20250305183303"></script>
    <script defer="defer" src="../oxygen-webhelp/app/commons.js?buildId=2024012323"></script>
    <script defer="defer" src="../oxygen-webhelp/app/topic.js?buildId=2024012323"></script>
<link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/styles.css?buildId=2024012323"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script></head>

    <body id="节点启动流程简析与常见问题" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            跳转到主要内容
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div xmlns:whc="http://www.oxygenxml.com/webhelp/components" class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="https://docs.dolphindb.cn/zh/index.html" class=" wh_logo d-none d-sm-block "><img src="../logo.png" alt="  DolphinDB 文档中心  "/></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="booktitle">  <span class="ph mainbooktitle">DolphinDB 文档中心</span>  </span></a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="搜索 " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="搜索查询" required="required"/><button type="submit" class="wh_search_button" aria-label="搜索"><span class="search_input_text">搜索</span></button></div></form>
            
            <script src="/vendors/react/umd/react.production.min.js" defer="defer"></script>
<script src="/vendors/react-dom/umd/react-dom.production.min.js" defer="defer"></script>
<script src="/vendors/dayjs/dayjs.min.js" defer="defer"></script>
<script src="/vendors/antd/dist/antd.min.js" defer="defer"></script>
<script src="/vendors/@ant-design/icons/dist/index.umd.min.js" defer="defer"></script>
<script src="/zh/index.js" type="module"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" defer="defer"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer="defer"><!--


--></script>
<script defer="defer"><!--

// 从主页重定向
const currentUrl = window.location.href;

// 判断当前URL是否包含index.html并且路径最后部分是index.html
if (currentUrl.endsWith('index.html')) {
    // 处理根目录下的index.html跳转
    const baseUrl = currentUrl.split('/index.html')[0]; // 获取index.html之前的部分
    const redirectUrl = `${baseUrl}/about/ddb_intro.html`; // 构建跳转路径
    window.location.href = redirectUrl; // 执行跳转
}

--></script>
            
        </div></div>
    </div>
</header>
        
        
         
        
        
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="../index.html"><span>主页</span></a></span></li><li><div class="topicref" data-id="about_tutorials"><div class="title"><a href="../tutorials/about_tutorials.html"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div></li><li><div class="topicref"><div class="title"><a href="../tutorials/scheduledJob_2.html">系统运维</a></div></div></li><li class="active"><div class="topicref" data-id="节点启动流程简析与常见问题"><div class="title"><a href="../tutorials/node_startup_process_and_questions.html">节点启动流程简析与常见问题</a></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="切换搜索突出显示" title="切换搜索突出显示"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="折叠截面" title="折叠截面"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="打印此页" aria-label="打印此页"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem"><div data-tocid="ddb_intro-d9713e87" class="topicref" data-id="ddb_intro" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../about/ddb_intro.html" id="ddb_intro-d9713e87-link">关于DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="chap1_getstarted-d9713e136" class="topicref" data-id="chap1_getstarted" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../getstarted/chap1_getstarted.html" id="chap1_getstarted-d9713e136-link">快速上手</a><div class="wh-tooltip"><p class="shortdesc">如何快速部署 DolphinDB、建库建表、写入和查询数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="sectionddb_deployment-d9713e189" class="topicref" data-id="sectionddb_deployment" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action sectionddb_deployment-d9713e189-link" class="wh-expand-btn"></span><div class="title"><a href="../deploy/deploy_intro.html" id="sectionddb_deployment-d9713e189-link"><span class="keyword label">部署</span></a><div class="wh-tooltip"><p class="shortdesc">如何在不同的场景中部署 DolphinDB</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259" class="topicref" data-id="new_chap_database_manage_new_chap_dbmanage_landing_page" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/cfg/db_intro.html" id="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link"><span class="keyword label">数据库</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 数据库的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_streaming-d9713e3760" class="topicref" data-id="chap7_tutorials_streaming" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_streaming-d9713e3760-link" class="wh-expand-btn"></span><div class="title"><a href="../stream/str_intro.html" id="chap7_tutorials_streaming-d9713e3760-link"><span class="keyword label">流数据</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 流数据引擎及流数据计算的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e7513" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e7513-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/db_oper/import_data.html" id="tocId-d9713e7513-link">数据迁移</a><div class="wh-tooltip"><p class="shortdesc">如何从不同数据源向 DolphinDB 迁移数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_system_management-d9713e7940" class="topicref" data-id="chap7_tutorials_system_management" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_system_management-d9713e7940-link" class="wh-expand-btn"></span><div class="title"><a href="../sys_man/om_intro.html" id="chap7_tutorials_system_management-d9713e7940-link"><span class="keyword label">系统运维</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 的系统运维功能及方法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="troubleshooting-d9713e8780" class="topicref" data-id="troubleshooting" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action troubleshooting-d9713e8780-link" class="wh-expand-btn"></span><div class="title"><a href="../error_codes/troubleshooting.html" id="troubleshooting-d9713e8780-link">故障排查</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="about_language_resources-d9713e20911" class="topicref" data-id="about_language_resources" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action about_language_resources-d9713e20911-link" class="wh-expand-btn"></span><div class="title"><a href="../progr/progr_intro.html" id="about_language_resources-d9713e20911-link"><span class="keyword label">编程语言</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 编程基本概念与方法、SQL 在 DolphinDB 的应用</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="functions_references-d9713e30925" class="topicref" data-id="functions_references" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action functions_references-d9713e30925-link" class="wh-expand-btn"></span><div class="title"><a href="../funcs/funcs_intro.html" id="functions_references-d9713e30925-link"><span class="keyword label">函数参考</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 函数分类、语法、详解及示例</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="api_protocol-d9713e94064" class="topicref" data-id="api_protocol" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action api_protocol-d9713e94064-link" class="wh-expand-btn"></span><div class="title"><a href="../api/connapi_intro.html" id="api_protocol-d9713e94064-link"><span class="keyword label">连接器 &amp; API</span></a><div class="wh-tooltip"><p class="shortdesc">面向不同编程语言的 DolphinDB API 及连接器，相关协议和用法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap6_plugin-d9713e94210" class="topicref" data-id="chap6_plugin" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap6_plugin-d9713e94210-link" class="wh-expand-btn"></span><div class="title"><a href="../plugins/plg_intro.html" id="chap6_plugin-d9713e94210-link"><span class="keyword label">插件</span></a><div class="wh-tooltip"><p class="shortdesc">多个应用场景的插件使用说明和插件开发指导</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="third_party-d9713e97904" class="topicref" data-id="third_party" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action third_party-d9713e97904-link" class="wh-expand-btn"></span><div class="title"><a href="../third_party.html" id="third_party-d9713e97904-link">第三方工具</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="about_tutorials-d9713e98227" class="topicref" data-id="about_tutorials" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action about_tutorials-d9713e98227-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/about_tutorials.html" id="about_tutorials-d9713e98227-link"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98280" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98280-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/new_users_finance.html" id="tocId-d9713e98280-link">新用户入门</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98327" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98327-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/database.html" id="tocId-d9713e98327-link">数据库</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e99111" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e99111-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/std_sql_ddb.html" id="tocId-d9713e99111-link">编程</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100448" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100448-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming-real-time-correlation-processing_2.html" id="tocId-d9713e100448-link">流数据</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="tocId-d9713e100955" class="topicref" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action tocId-d9713e100955-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/scheduledJob_2.html" id="tocId-d9713e100955-link">系统运维</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="定时作业-d9713e100956" class="topicref" data-id="定时作业" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/scheduledJob_2.html" id="定时作业-d9713e100956-link">定时作业</a></div></div></li><li role="treeitem"><div data-tocid="作业管理-d9713e101002" class="topicref" data-id="作业管理" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/job_management_tutorial_2.html" id="作业管理-d9713e101002-link">作业管理</a></div></div></li><li role="treeitem"><div data-tocid="用户权限管理-d9713e101048" class="topicref" data-id="用户权限管理" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/ACL_and_Security_2.html" id="用户权限管理-d9713e101048-link">用户权限管理</a></div></div></li><li role="treeitem"><div data-tocid="数据备份以及恢复-130202008及之后版本-d9713e101094" class="topicref" data-id="数据备份以及恢复-130202008及之后版本" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/backup-restore-new.html" id="数据备份以及恢复-130202008及之后版本-d9713e101094-link">数据备份以及恢复 （1.30.20/2.00.8及之后版本）</a></div></div></li><li role="treeitem"><div data-tocid="数据备份以及恢复-130202008以前版本-d9713e101140" class="topicref" data-id="数据备份以及恢复-130202008以前版本" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/backup_restore_before_208.html" id="数据备份以及恢复-130202008以前版本-d9713e101140-link">数据备份以及恢复 （1.30.20/2.00.8以前版本）</a></div></div></li><li role="treeitem"><div data-tocid="数据再平衡-d9713e101186" class="topicref" data-id="数据再平衡" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Data_Move_Rebalance.html" id="数据再平衡-d9713e101186-link">数据再平衡</a></div></div></li><li role="treeitem"><div data-tocid="集群间数据库同步-d9713e101232" class="topicref" data-id="集群间数据库同步" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/data_sync_among_clusters.html" id="集群间数据库同步-d9713e101232-link">集群间数据库同步</a></div></div></li><li role="treeitem"><div data-tocid="集群间异步复制-d9713e101278" class="topicref" data-id="集群间异步复制" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/async_replication.html" id="集群间异步复制-d9713e101278-link">集群间异步复制</a></div></div></li><li role="treeitem"><div data-tocid="数据导入最容易忽略的十个细节-d9713e101324" class="topicref" data-id="数据导入最容易忽略的十个细节" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/data_import_details.html" id="数据导入最容易忽略的十个细节-d9713e101324-link">数据导入最容易忽略的十个细节</a></div></div></li><li role="treeitem"><div data-tocid="线程模型-d9713e101370" class="topicref" data-id="线程模型" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/threading_model.html" id="线程模型-d9713e101370-link">线程模型</a></div></div></li><li role="treeitem"><div data-tocid="线程简介-d9713e101416" class="topicref" data-id="线程简介" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/thread_intro_2.html" id="线程简介-d9713e101416-link">线程简介</a></div></div></li><li role="treeitem"><div data-tocid="内存管理-d9713e101463" class="topicref" data-id="内存管理" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/memory_management.html" id="内存管理-d9713e101463-link">内存管理</a></div></div></li><li role="treeitem"><div data-tocid="out-of-memory-d9713e101509" class="topicref" data-id="out-of-memory" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/oom_settlement_2.html" id="out-of-memory-d9713e101509-link">Out of Memory</a></div></div></li><li role="treeitem"><div data-tocid="非标权限管理-d9713e101555" class="topicref" data-id="非标权限管理" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/non-standard_permission_management.html" id="非标权限管理-d9713e101555-link">非标权限管理</a></div></div></li><li role="treeitem" class="active"><div data-tocid="节点启动流程简析与常见问题-d9713e101601" class="topicref" data-id="节点启动流程简析与常见问题" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/node_startup_process_and_questions.html" id="节点启动流程简析与常见问题-d9713e101601-link">节点启动流程简析与常见问题</a></div></div></li><li role="treeitem"><div data-tocid="用户级别的资源跟踪详解-d9713e101647" class="topicref" data-id="用户级别的资源跟踪详解" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/user_level_resource_tracking.html" id="用户级别的资源跟踪详解-d9713e101647-link">用户级别的资源跟踪详解</a></div></div></li><li role="treeitem"><div data-tocid="使用-prometheus-监控告警-d9713e101693" class="topicref" data-id="使用-prometheus-监控告警" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/promethues2.html" id="使用-prometheus-监控告警-d9713e101693-link">使用 Prometheus 监控告警</a></div></div></li><li role="treeitem"><div data-tocid="redash-连接-dolphindb-数据源-d9713e101739" class="topicref" data-id="redash-连接-dolphindb-数据源" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/data_interface_for_redash.html" id="redash-连接-dolphindb-数据源-d9713e101739-link">Redash 连接 DolphinDB 数据源</a></div></div></li><li role="treeitem"><div data-tocid="使用-chart-组件展示数据-d9713e101785" class="topicref" data-id="使用-chart-组件展示数据" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/web_chart_integration.html" id="使用-chart-组件展示数据-d9713e101785-link">使用 chart 组件展示数据</a></div></div></li><li role="treeitem"><div data-tocid="debezium--kafka-实时同步-oracle-11g-数据到-dolphindb-运维手册-d9713e101831" class="topicref" data-id="debezium--kafka-实时同步-oracle-11g-数据到-dolphindb-运维手册" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.html" id="debezium--kafka-实时同步-oracle-11g-数据到-dolphindb-运维手册-d9713e101831-link">Debezium + Kafka 实时同步 Oracle 11g 数据到 DolphinDB 运维手册</a></div></div></li><li role="treeitem"><div data-tocid="基于_zabbix_的_dolphindb_集群运维监控-d9713e101877" class="topicref" data-id="基于_zabbix_的_dolphindb_集群运维监控" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/zabbix_cluster_monitoring.html" id="基于_zabbix_的_dolphindb_集群运维监控-d9713e101877-link">基于 Zabbix 的 DolphinDB 集群运维监控</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="模块概述-d9713e101923" class="topicref" data-id="模块概述" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action 模块概述-d9713e101923-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/tu_modules.html" id="模块概述-d9713e101923-link">模块</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e102568" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e102568-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/OHLC_2.html" id="tocId-d9713e102568-link">金融场景案例</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e104827" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e104827-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_engine_anomaly_alerts_2.html" id="tocId-d9713e104827-link">物联网场景案例</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105795" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105795-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/dolphindb_tensor_libtorch_tutorial.html" id="tocId-d9713e105795-link">机器学习</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105842" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105842-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/api_performance.html" id="tocId-d9713e105842-link">测试报告</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105982" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105982-link" class="wh-expand-btn"></span><div class="title"><a href="../rn/server/3_00_2.html" id="tocId-d9713e105982-link">版本说明</a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 版本发布历史</p></div></div></div></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-7 col-md-9 col-sm-12" id="wh_topic_body">
                        <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        <button id="wh_close_topic_toc_button" class="close-toc-button d-none" aria-label="Toggle topic table of content" aria-controls="wh_topic_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        <div class=" wh_topic_content body "><main role="main"><article class="- topic/topic topic" role="article" aria-labelledby="ariaid-title1"><h1 class="- topic/title title topictitle1" id="ariaid-title1">节点启动流程简析与常见问题</h1><div class="- topic/body body"><p class="- topic/p p">DolphinDB 的重启是运维工作的重要部分，在启动节点时可能会遇到一些问题，例如启动太慢、启动失败等。本教程以 DolphinDB v2.00.11 版本为例，结合运行日志简析 DolphinDB 整体的启动流程和重要模块的启动流程，并分析启动时常见问题的现象、原因和解决方案。</p></div><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title2" id="1-节点整体启动流程"><h2 class="- topic/title title topictitle2" id="ariaid-title2">1. 节点整体启动流程</h2><div class="- topic/body body"><p class="- topic/p p">DolphinDB 节点整体的启动流程可分为 7 个阶段：</p><ol class="- topic/ol ol"><li class="- topic/li li">初始化内部基础模块；</li><li class="- topic/li li">解析和校验参数、配置文件、license 文件，并初始化和启动一些基本功能模块和线程；</li><li class="- topic/li li">根据加载的配置文件内容初始化 server，执行 <em class="+ topic/ph hi-d/i ph i">dolphindb.dos</em>，加载 preloadModules 配置的插件和模块；</li><li class="- topic/li li">初始化和启动 server 的各个功能模块和线程，绑定端口。包括用户权限与函数视图初始化、元数据初始化、事务回滚、redo log 回放、RAFT 初始化等；</li><li class="- topic/li li">执行 <a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/db_distr_comp/cfg/standalone.html?hl=startup#ariaid-title4" target="_blank" rel="external noopener">startup 配置项</a>指定的 <em class="+ topic/ph hi-d/i ph i">startup.dos</em> 脚本；</li><li class="- topic/li li">初始化定时任务；</li><li class="- topic/li li">执行 <a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/db_distr_comp/cfg/standalone.html?hl=postStart#ariaid-title4" target="_blank" rel="external noopener">postStart 配置项</a>指定的 <em class="+ topic/ph hi-d/i ph i">postStart.dos</em> 脚本。</li></ol><p class="- topic/p p">其中第 4 步，不同节点会根据自己的职能初始化和启动相应功能的模块和线程。例如单节点和控制节点会启动 DFS 模块来管理分布式文件元数据，而数据节点不会启动；单节点和数据节点会启动 ChunkNode 模块来存储和管理分区数据，而控制节点不会启动。</p><br/><img class="- topic/image image" src="images/node_startup_process_and_questions/01.png" alt="01"/><br/><p class="- topic/p p">重要启动流程开始和成功日志如下表：</p><div class="table-container"><table class="- topic/table table" data-cols="4"><caption></caption><colgroup><col/><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="1-节点整体启动流程__entry__1"><strong class="+ topic/ph hi-d/b ph b">流程</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="1-节点整体启动流程__entry__2"><strong class="+ topic/ph hi-d/b ph b">开始日志</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="1-节点整体启动流程__entry__3"><strong class="+ topic/ph hi-d/b ph b">成功日志</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="1-节点整体启动流程__entry__4"><strong class="+ topic/ph hi-d/b ph b">备注</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__1">用户权限与函数视图初始化</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__2"><code class="+ topic/ph pr-d/codeph ph codeph">Initializing AclManager with Raft &lt;raft mode&gt;</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__3"><code class="+ topic/ph pr-d/codeph ph codeph">Initialization of AclManager is completed with Raft &lt;raft mode&gt;</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__4">RAFT mode 为 enabled 或 disabled</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__1">控制节点元数据初始化</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__2"> </td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__3">非 RAFT 模式：<code class="+ topic/ph pr-d/codeph ph codeph">Controller initialization completed.</code>RAFT 模式：<code class="+ topic/ph pr-d/codeph ph codeph">DFSRaftReplayWorker started</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__4"> </td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__1">数据节点分区元数据初始化</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__2"> </td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__3"><code class="+ topic/ph pr-d/codeph ph codeph">ChunkMgmt initialization completed.</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__4"> </td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__1">数据节点恢复事务的重做日志回放</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__2"><code class="+ topic/ph pr-d/codeph ph codeph">dfsRecoverLogDir: &lt;dfsRedoLogDir&gt;</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__3"><code class="+ topic/ph pr-d/codeph ph codeph">RecoverRedoLogManager finished chunk num is &lt;finishPacksSize&gt;, total chunks recover num is &lt;lsnChunksSize&gt;, compare checksum succ pack num is &lt;recoverChecksumPackNum&gt;, test replay num is &lt;recoverTestPackNum&gt;, actual recover redo pack num is &lt;recoverReplayPackNum&gt;, redo chunk num is &lt;recoverReplayNum&gt;</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__4"> </td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__1">数据节点 TSDB 元数据初始化</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__2"> </td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__3"><code class="+ topic/ph pr-d/codeph ph codeph">Restore TSDB meta successfuly.</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__4"> </td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__1">redo log 回放</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__2">若存在 redo log：<code class="+ topic/ph pr-d/codeph ph codeph">Start recovering from redo log. This may take a few minutes.</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__3">若存在 redo log：<code class="+ topic/ph pr-d/codeph ph codeph">Completed CacheEngine GC and RedoLog GC after applying all redo logs and engine is &lt;engine type&gt;</code>若不存在 redo log：<code class="+ topic/ph pr-d/codeph ph codeph">No available redo log files were found. Redo log replay was skipped.</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__4">engine type 为 OLAP 或 TSDB，故如果为 DolphinDB 2.0 版本，相应日志会有两条</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__1">RAFT 初始化</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__2"><code class="+ topic/ph pr-d/codeph ph codeph">DFSMaster ElectionTick is set to &lt;electionTick&gt;</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__3"><code class="+ topic/ph pr-d/codeph ph codeph">DFSRaftReplayWorker started</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__4"> </td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__1">执行 <em class="+ topic/ph hi-d/i ph i">startup.dos</em></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__2"><code class="+ topic/ph pr-d/codeph ph codeph">Executing the startup script: &lt;scriptFile&gt;</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__3"><code class="+ topic/ph pr-d/codeph ph codeph">The startup script: &lt;scriptFile&gt; execution completed.</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__4"> </td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__1">定时任务初始化</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__2"><code class="+ topic/ph pr-d/codeph ph codeph">Job scheduler start to initialize.</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__3"><code class="+ topic/ph pr-d/codeph ph codeph">Job scheduler initialization completed.</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__4"> </td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__1">执行 <em class="+ topic/ph hi-d/i ph i">postStart.dos</em></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__2"><code class="+ topic/ph pr-d/codeph ph codeph">Executing the post start script: &lt;scriptFile&gt;</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__3"><code class="+ topic/ph pr-d/codeph ph codeph">The post start script: &lt;scriptFile&gt; execution completed.</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-节点整体启动流程__entry__4"> </td></tr></tbody></table></div><p class="- topic/p p">Redo log 回放完成后，数据节点会向控制节点汇报本地分区信息，然后启动心跳进程，此时节点在 web 集群管理界面的状态会转变为绿色，但还没有到“执行 <em class="+ topic/ph hi-d/i ph i">startup.dos</em>”一步。由于执行 <em class="+ topic/ph hi-d/i ph i">postStart.dos</em> 失败并不会导致节点启动失败，故<strong class="+ topic/ph hi-d/b ph b">节点启动完成的标志日志</strong>为 <code class="+ topic/ph pr-d/codeph ph codeph">Job scheduler initialization completed.</code></p></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title3" id="2-重要启动流程简析"><h2 class="- topic/title title topictitle2" id="ariaid-title3">2. 重要启动流程简析</h2><div class="- topic/body body"></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title4" id="21-license-校验"><h3 class="- topic/title title topictitle3" id="ariaid-title4">2.1. license 校验</h3><div class="- topic/body body"><p class="- topic/p p">DolphinDB 启动时会先校验 license 与集群配置信息是否合规。如果启用了 license server，则连接 license server 进行校验，否则读取安装目录下 <em class="+ topic/ph hi-d/i ph i">dolphindb.lic</em> 文件进行校验。校验内容包括：</p><ul class="- topic/ul ul"><li class="- topic/li li">过期时间</li><li class="- topic/li li">每个节点绑定的核数</li><li class="- topic/li li">每个节点的最大内存</li><li class="- topic/li li">集群内最大节点数</li><li class="- topic/li li">最高支持的 server 版本</li></ul><p class="- topic/p p">如果校验失败，会打印相应的错误日志然后节点关闭。例如 license 过期时会打印错误日志 <code class="+ topic/ph pr-d/codeph ph codeph">&lt;ERROR&gt; The license has expired.</code></p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title5" id="22-用户权限与函数视图初始化"><h3 class="- topic/title title topictitle3" id="ariaid-title5">2.2. 用户权限与函数视图初始化</h3><div class="- topic/body body"><p class="- topic/p p">DolphinDB 的<a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/tutorials/ACL_and_Security.html" target="_blank" rel="external noopener">权限管理</a>与<a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/db_distr_comp/db_oper/FunctionView.html" target="_blank" rel="external noopener">函数视图</a>定义持久化保存在单节点或控制节点的数据目录，根据是否启用 RAFT 高可用存储在不同的位置。非 RAFT 模式（即单节点或普通集群）时，存储在控制节点的 <em class="+ topic/ph hi-d/i ph i">&lt;HOME_DIR&gt;/&lt;NodeAlias&gt;/sysmgmt</em> 路径下，相关文件说明如下表：</p><div class="table-container"><table class="- topic/table table" data-cols="2"><caption></caption><colgroup><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="22-用户权限与函数视图初始化__entry__1"><strong class="+ topic/ph hi-d/b ph b">文件名</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="22-用户权限与函数视图初始化__entry__2"><strong class="+ topic/ph hi-d/b ph b">说明</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-用户权限与函数视图初始化__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">aclEditlog.meta</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-用户权限与函数视图初始化__entry__2">权限与函数视图的编辑日志文件</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-用户权限与函数视图初始化__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">aclCheckPoint.meta</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-用户权限与函数视图初始化__entry__2">权限与函数视图的 checkpoint 文件，当编辑日志过大时会做一次 checkpoint 保存最新的权限与函数视图的状态</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-用户权限与函数视图初始化__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">aclCheckPoint.tmp</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-用户权限与函数视图初始化__entry__2">权限与函数视图的 checkpoint 临时文件，做 checkpoint 时临时生成</td></tr></tbody></table></div><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>：HOME_DIR 指节点的主目录，即 <code class="+ topic/ph pr-d/codeph ph codeph">getHomeDir()</code> 方法返回结果；NodeAlias 指节点别名，即<code class="+ topic/ph pr-d/codeph ph codeph">getNodeAlias()</code> 方法返回结果。</p><p class="- topic/p p">RAFT 模式（即高可用集群）时，存储在 leader 控制节点的 <em class="+ topic/ph hi-d/i ph i">&lt;HOME_DIR&gt;/&lt;NodeAlias&gt;/raft</em> 路径下，详见 RAFT 元数据初始化一节。</p><p class="- topic/p p">非 RAFT 模式初始化流程如下：</p><br/><img class="- topic/image image" src="images/node_startup_process_and_questions/02.png" alt="02"/><br/><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">开始，打印日志：<code class="+ topic/ph pr-d/codeph ph codeph">Initializing AclManager with Raft &lt;raft mode&gt;</code>；</p></li><li class="- topic/li li"><p class="- topic/p p">如果不是高可用集群：</p><p class="- topic/p p">a. 读取节点数据目录 <em class="+ topic/ph hi-d/i ph i">/sysmgmt</em>，如果不存在则创建；</p><p class="- topic/p p">b. 如果不存在 <em class="+ topic/ph hi-d/i ph i">aclEditlog.meta</em> 但存在有效的 <em class="+ topic/ph hi-d/i ph i">aclCheckPoint.tmp</em>，重命名 <em class="+ topic/ph hi-d/i ph i">aclCheckPoint.tmp</em> 为 <em class="+ topic/ph hi-d/i ph i">aclEditlog.meta</em>；</p><p class="- topic/p p">c. 如果存在 <em class="+ topic/ph hi-d/i ph i">aclCheckPoint.meta</em>，检查校验；</p><p class="- topic/p p">d. 读取 <em class="+ topic/ph hi-d/i ph i">aclCheckPoint.meta</em> 文件恢复用户权限和函数视图；</p><p class="- topic/p p">e. 读取和回放 <em class="+ topic/ph hi-d/i ph i">aclEditlog.meta</em> 文件恢复用户权限和函数视图；</p><p class="- topic/p p">f. 裁剪 <em class="+ topic/ph hi-d/i ph i">aclEditlog.meta</em> 中的无效部分；</p></li><li class="- topic/li li"><p class="- topic/p p">如果不存在 RSA 校验密钥（<code class="+ topic/ph pr-d/codeph ph codeph">aclPublic.key</code> 和 <code class="+ topic/ph pr-d/codeph ph codeph">aclPrivate.key</code>，存储路径为 <em class="+ topic/ph hi-d/i ph i">&lt;HOME_DIR&gt;/&lt;NodeAlias&gt;/keys</em>，用于集群间加密通信），如果不是高可用集群，生成 RSA 校验密钥；如果是高可用集群，则以控制节点名字母表顺序从其他控制节点拿密钥；</p></li><li class="- topic/li li"><p class="- topic/p p">如果不存在 admin 用户，创建 admin 用户；</p></li><li class="- topic/li li"><p class="- topic/p p">结束，打印日志：<code class="+ topic/ph pr-d/codeph ph codeph">Initialization of AclManager is completed with Raft &lt;raft mode&gt;</code>。</p></li></ol></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title6" id="23-控制节点元数据初始化"><h3 class="- topic/title title topictitle3" id="ariaid-title6">2.3. 控制节点元数据初始化</h3><div class="- topic/body body"><p class="- topic/p p">DolphinDB 的分布式文件系统（DFS）管理集群的所有分区数据的元数据，元数据根据是否启用 RAFT 高可用存储在不同的位置。非 RAFT 模式（即单节点或普通集群）时，存储在单节点或控制节点的 <a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html?hl=dfsmetadir" target="_blank" rel="external noopener">dfsMetaDir 配置项</a>路径下，相关文件说明如下表：</p><div class="table-container"><table class="- topic/table table" data-cols="2"><caption></caption><colgroup><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="23-控制节点元数据初始化__entry__1"><strong class="+ topic/ph hi-d/b ph b">文件名</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="23-控制节点元数据初始化__entry__2"><strong class="+ topic/ph hi-d/b ph b">说明</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="23-控制节点元数据初始化__entry__1">DFSMetaLog.cid</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="23-控制节点元数据初始化__entry__2">DFS 元数据的编辑日志文件。其中 cid 指事务提交 ID</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="23-控制节点元数据初始化__entry__1">DFSMasterMetaCheckpoint.cid</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="23-控制节点元数据初始化__entry__2">DFS 元数据的 checkpoint 文件，当编辑日志过大时会做一次 checkpoint 保存最新的元数据的状态</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="23-控制节点元数据初始化__entry__1">DFSMasterMetaCheckpoint.cid.tmp</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="23-控制节点元数据初始化__entry__2">DFS 元数据的 checkpoint 临时文件，做 checkpoint 时临时生成</td></tr></tbody></table></div><p class="- topic/p p">RAFT 模式（即高可用集群）时，存储在 leader 控制节点的 <em class="+ topic/ph hi-d/i ph i">&lt;HOME_DIR&gt;/&lt;NodeAlias&gt;/raft</em> 路径下，详见 RAFT 初始化一节。</p><p class="- topic/p p">非 RAFT 模式初始化流程如下：</p><br/><img class="- topic/image image" src="images/node_startup_process_and_questions/03.png" alt="03"/><br/><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">读取节点 <em class="+ topic/ph hi-d/i ph i">dfsMetaDir</em> 配置项目录，如果不存在则创建；</p></li><li class="- topic/li li"><p class="- topic/p p">如果存在临时 checkpoint 文件，尝试解析，如果文件无效，只保存文件名的 cid 信息然后删除；否则重命名为 checkpoint 文件；</p></li><li class="- topic/li li"><p class="- topic/p p">如果存在 checkpoint 文件，尝试解析，如果解析失败则程序退出；否则读取 checkpoint 信息。相关运行日志：
<code class="+ topic/ph pr-d/codeph ph codeph">checkpoint file &lt;checkpointFilepath&gt;</code></p><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">metalog file &lt;metalogFilepath&gt;</code></p></li><li class="- topic/li li"><p class="- topic/p p">读取和回放 checkpoint 的 cid 开始的所有编辑日志。相关运行日志：
<code class="+ topic/ph pr-d/codeph ph codeph">---------start replaying edit log, &lt;metaFileNum&gt; log files to replay----------</code>
<code class="+ topic/ph pr-d/codeph ph codeph">done reading editlog file &lt;filepath&gt;, processsed &lt;num&gt; records</code>
<code class="+ topic/ph pr-d/codeph ph codeph">---------done replaying edit log, &lt;num&gt; record(s) processed-----------</code>
<code class="+ topic/ph pr-d/codeph ph codeph">Global cid &lt;currentGlobalCID&gt; Global tid &lt;currentGlobalTID&gt;, reader snapshot id &lt;currentGlobalTID - 1&gt;</code></p></li><li class="- topic/li li"><p class="- topic/p p">清理过期无效的 <em class="+ topic/ph hi-d/i ph i">DFSMetaLog</em>。</p></li><li class="- topic/li li"><p class="- topic/p p">结束，打印日志 <code class="+ topic/ph pr-d/codeph ph codeph">Controller initialization completed.</code>。</p></li></ol></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title7" id="24-数据节点元数据初始化"><h3 class="- topic/title title topictitle3" id="ariaid-title7">2.4. 数据节点元数据初始化</h3><div class="- topic/body body"><p class="- topic/p p">DolphinDB 单节点或数据节点存储和管理本地分区数据及元数据，启动时会先恢复本地分区的元数据，然后根据事务 log 回滚关机时未完成的事务，上报已提交的事务到控制节点。相关文件存储在 <a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html?hl=chunkmetadir" target="_blank" rel="external noopener">chunkMetaDir 配置项</a>路径和 <a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html?hl=volumes" target="_blank" rel="external noopener">volumes 配置项</a>路径下，说明如下：</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="24-数据节点元数据初始化__entry__1"><strong class="+ topic/ph hi-d/b ph b">文件名</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="24-数据节点元数据初始化__entry__2"><strong class="+ topic/ph hi-d/b ph b">存储路径</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="24-数据节点元数据初始化__entry__3"><strong class="+ topic/ph hi-d/b ph b">说明</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="24-数据节点元数据初始化__entry__1">editlog.cid</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="24-数据节点元数据初始化__entry__2">&lt;chunkMetaDir&gt;/CHUNK_METADATA</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="24-数据节点元数据初始化__entry__3">本地元数据的编辑日志文件。其中 cid 指事务提交 ID</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="24-数据节点元数据初始化__entry__1">checkpoint.cid</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="24-数据节点元数据初始化__entry__2">&lt;chunkMetaDir&gt;/CHUNK_METADATA</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="24-数据节点元数据初始化__entry__3">本地元数据的 checkpoint 文件，当编辑日志过大时会做一次 checkpoint 保存最新的元数据的状态</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="24-数据节点元数据初始化__entry__1">checkpoint.tmp.cid</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="24-数据节点元数据初始化__entry__2">&lt;chunkMetaDir&gt;/CHUNK_METADATA</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="24-数据节点元数据初始化__entry__3">本地元数据的 checkpoint 临时文件，做 checkpoint 时临时生成</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="24-数据节点元数据初始化__entry__1">以 tid 为名的文件夹</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="24-数据节点元数据初始化__entry__2">&lt;chunkMetaDir&gt;/LOG</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="24-数据节点元数据初始化__entry__3">事务 log。其中 tid 为事务 ID</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="24-数据节点元数据初始化__entry__1">以 tid 为名的文件夹</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="24-数据节点元数据初始化__entry__2">&lt;volumes&gt;/LOG</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="24-数据节点元数据初始化__entry__3">删除事务涉及的数据文件临时存放的目录</td></tr></tbody></table></div><p class="- topic/p p">具体初始化流程如下：</p><br/><img class="- topic/image image" src="images/node_startup_process_and_questions/04.png" alt="04"/><br/><ol class="- topic/ol ol"><li class="- topic/li li">如果存在 checkpoint 临时文件，校验是否有效，若有效，重命名为 checkpoint 文件；</li><li class="- topic/li li">找到 tid 最大的 checkpoint 文件并读取元数据状态；</li><li class="- topic/li li">读取 tid 大于等于最大的 checkpoint tid 的 editlog 编辑日志并回放，相关运行日志：
<code class="+ topic/ph pr-d/codeph ph codeph">Opened editlog file &lt;editLogFile&gt;.</code></li><li class="- topic/li li">回滚未提交的事务，相关运行日志：
<code class="+ topic/ph pr-d/codeph ph codeph">Will process pending transactions.</code>
<code class="+ topic/ph pr-d/codeph ph codeph">Processing transactions took &lt;time&gt; seconds.</code>
<code class="+ topic/ph pr-d/codeph ph codeph">Will process uncommited and committed but not completed transactions.</code></li><li class="- topic/li li">删除已回滚的事务 LOG 文件夹，相关运行日志：
<code class="+ topic/ph pr-d/codeph ph codeph">As transaction &lt;tid&gt; is rollbacked, transaction log directory &lt;logDir&gt; is deleted.</code></li><li class="- topic/li li">完成，打印日志 <code class="+ topic/ph pr-d/codeph ph codeph">ChunkMgmt initialization completed.。</code></li></ol></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title8" id="25-数据节点恢复事务的重做日志回放"><h3 class="- topic/title title topictitle3" id="ariaid-title8">2.5. 数据节点恢复事务的重做日志回放</h3><div class="- topic/body body"><p class="- topic/p p">DolphinDB 集群支持<a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html?hl=enableDfsRecoverRedo" target="_blank" rel="external noopener">节点间数据恢复</a>功能，若配置了 <em class="+ topic/ph hi-d/i ph i">enableDfsRecoverRedo = true</em>，在节点间数据恢复的过程中，会将恢复事务相关的数据先写入 recover redo log 中，然后在启动时回放恢复事务的重做日志。相关文件存储在 <a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html?hl=recoverlogdir" target="_blank" rel="external noopener">recoverLogDir 配置项</a>目录下，说明如下：</p><div class="table-container"><table class="- topic/table table" data-cols="2"><caption></caption><colgroup><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="25-数据节点恢复事务的重做日志回放__entry__1"><strong class="+ topic/ph hi-d/b ph b">文件名</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="25-数据节点恢复事务的重做日志回放__entry__2"><strong class="+ topic/ph hi-d/b ph b">说明</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="25-数据节点恢复事务的重做日志回放__entry__1">recover.log</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="25-数据节点恢复事务的重做日志回放__entry__2">恢复事务重做日志</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="25-数据节点恢复事务的重做日志回放__entry__1">recover.log.tmp</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="25-数据节点恢复事务的重做日志回放__entry__2">生成恢复事务重做日志时的临时文件</td></tr></tbody></table></div><p class="- topic/p p">具体初始化流程如下：</p><br/><img class="- topic/image image" src="images/node_startup_process_and_questions/05.png" alt="05"/><br/><ol class="- topic/ol ol"><li class="- topic/li li">如果同时存在恢复事务重做日志和对应临时文件，删除临时文件；</li><li class="- topic/li li">从恢复事务重做日志中解析需要回放的恢复事务，相关运行日志：
<code class="+ topic/ph pr-d/codeph ph codeph">RecoverRedoLogManager will recover chunk num=&lt;chunkLsnSize&gt;, total recover pack num=&lt;allPacksSize&gt;, skip garbage pack num=&lt;garbageLsnsSize&gt; will redo pack num=&lt;size&gt;</code></li><li class="- topic/li li">重做恢复事务，相关运行日志：
<code class="+ topic/ph pr-d/codeph ph codeph">RecoverRedoLogManager finished chunk num is &lt;finishPacksSize&gt;, total chunks recover num is &lt;lsnChunksSize&gt;, compare checksum succ pack num is &lt;recoverChecksumPackNum&gt;, test replay num is &lt;recoverTestPackNum&gt;, actual recover redo pack num is &lt;recoverReplayPackNum&gt;, redo chunk num is &lt;recoverReplayNum&gt;</code></li><li class="- topic/li li">清理无用的恢复日志。</li></ol></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title9" id="26-数据节点-tsdb-元数据初始化"><h3 class="- topic/title title topictitle3" id="ariaid-title9">2.6. 数据节点 TSDB 元数据初始化</h3><div class="- topic/body body"><p class="- topic/p p">DolphinDB 2.0 版本支持 TSDB 存储引擎，启动时会恢复 TSDB 的 level file 相关元数据。相关文件存储在 <a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html?hl=tsdbredologdir" target="_blank" rel="external noopener">TSDBRedoLogDir 配置项</a>的同级目录的 TSDBMeta 目录下，说明如下：</p><div class="table-container"><table class="- topic/table table" data-cols="2"><caption></caption><colgroup><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="26-数据节点-tsdb-元数据初始化__entry__1"><strong class="+ topic/ph hi-d/b ph b">文件名</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="26-数据节点-tsdb-元数据初始化__entry__2"><strong class="+ topic/ph hi-d/b ph b">说明</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="26-数据节点-tsdb-元数据初始化__entry__1">iotEditLog.meta</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="26-数据节点-tsdb-元数据初始化__entry__2">TSDB 元数据的编辑日志文件。其中 cid 指事务提交 ID</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="26-数据节点-tsdb-元数据初始化__entry__1">iotCheckPointFile.meta</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="26-数据节点-tsdb-元数据初始化__entry__2">TSDB 元数据的 checkpoint 文件，当编辑日志过大时会做一次 checkpoint 保存最新的元数据的状态</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="26-数据节点-tsdb-元数据初始化__entry__1">iotCheckPointerFile.tmp</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="26-数据节点-tsdb-元数据初始化__entry__2">TSDB 元数据的 checkpoint 临时文件，做 checkpoint 时临时生成</td></tr></tbody></table></div><p class="- topic/p p">具体初始化流程如下：</p><br/><img class="- topic/image image" src="images/node_startup_process_and_questions/06.png" alt="06"/><br/><ol class="- topic/ol ol"><li class="- topic/li li">如果存在 checkpoint 临时文件，校验是否有效，若有效，重命名为 checkpoint 文件并删除编辑日志；若无效，则删除 checkpoint 临时文件，相关运行日志：
<code class="+ topic/ph pr-d/codeph ph codeph">------RESTORE &lt;tmpCheckPointFile&gt; size &lt;tmpLength&gt;, &lt;checkPointFile&gt; size &lt;length&gt;, &lt;editLogFile&gt; size &lt;editLength&gt;;</code>
<code class="+ topic/ph pr-d/codeph ph codeph">------RESTORE rename tmp file&lt;tmpCheckPointFile&gt; to &lt;checkPointFile&gt;</code></li><li class="- topic/li li">读取 checkpoint 文件恢复元数据状态，相关运行日志：
<code class="+ topic/ph pr-d/codeph ph codeph">------RESTORE checkpoint file to validPos &lt;validPos&gt;</code></li><li class="- topic/li li">读取和回放编辑日志文件恢复元数据状态，相关运行日志：
<code class="+ topic/ph pr-d/codeph ph codeph">------RESTORE editLogFile file to validPos &lt;validPos&gt;</code></li><li class="- topic/li li">完成，打印日志 <code class="+ topic/ph pr-d/codeph ph codeph">Restore TSDB meta successfuly.</code>。</li></ol></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title10" id="27-数据节点-redo-log-回放"><h3 class="- topic/title title topictitle3" id="ariaid-title10">2.7. 数据节点 redo log 回放</h3><div class="- topic/body body"><p class="- topic/p p">DolphinDB 通过 <a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/tutorials/redoLog_cacheEngine.html?hl=redo%2Clog" target="_blank" rel="external noopener">redo log</a> 来实现意外重启时对已提交但未完成事务的回放。DolphinDB v2.00.10.3 版本对 append, tableInsert, insert into 等新增数据的写入操作支持 redo log。OLAP 存储引擎的 redo log 存储路径在 <a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html?hl=redologdir" target="_blank" rel="external noopener">redoLogDir 配置项</a>目录下，TSDB 存储引擎的 redo log 存储路径在 <a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html?hl=tsdbredologdir" target="_blank" rel="external noopener">TSDBRedoLogDir 配置项</a>目录下，相关文件：</p><div class="table-container"><table class="- topic/table table" data-cols="2"><caption></caption><colgroup><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="27-数据节点-redo-log-回放__entry__1"><strong class="+ topic/ph hi-d/b ph b">文件名</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="27-数据节点-redo-log-回放__entry__2"><strong class="+ topic/ph hi-d/b ph b">说明</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="27-数据节点-redo-log-回放__entry__1">head.log</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="27-数据节点-redo-log-回放__entry__2">redo log 元数据信息</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="27-数据节点-redo-log-回放__entry__1">head.log.tmp</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="27-数据节点-redo-log-回放__entry__2">生成 redo log 元数据信息时的临时文件</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="27-数据节点-redo-log-回放__entry__1">lsn.log</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="27-数据节点-redo-log-回放__entry__2">redo log 全局序列号</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="27-数据节点-redo-log-回放__entry__1">tid.log</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="27-数据节点-redo-log-回放__entry__2">未完成的事务数据信息</td></tr></tbody></table></div><p class="- topic/p p">具体初始化流程如下：</p><br/><img class="- topic/image image" src="images/node_startup_process_and_questions/07.png" alt="07"/><br/><ol class="- topic/ol ol"><li class="- topic/li li">如果不存在 redo log 文件夹或 redo log 文件夹为空，跳过 redo log 回放，打印日志：<code class="+ topic/ph pr-d/codeph ph codeph">No available redo log files were found. Redo log replay was skipped.</code>；</li><li class="- topic/li li">开始回放，打印日志：<code class="+ topic/ph pr-d/codeph ph codeph">Start recovering from redo log. This may take a few minutes.</code>；</li><li class="- topic/li li">如果存在 <em class="+ topic/ph hi-d/i ph i">head.log.tmp</em>，删除；</li><li class="- topic/li li">解析 <em class="+ topic/ph hi-d/i ph i">head.log</em> 得到 <em class="+ topic/ph hi-d/i ph i">redo log</em> 的元数据信息，包含可能需要回放的事务（已提交的）和不需要回放的事务（未提交或已完成的）；</li><li class="- topic/li li">遍历可能需要回放的事务的 redo log，结合多方面信息具体判断是否需要回放，对于状态完成的事务立即回放，状态不确定的事务保留相关信息以备决议，相关运行日志：
<code class="+ topic/ph pr-d/codeph ph codeph">applyTidRedoLog : &lt;tid&gt;,&lt;chunkId&gt;,&lt;chunkPath&gt;,&lt;tablePhysicalName&gt;,&lt;newTableSize&gt;,&lt;lsn&gt;,&lt;newColumns&gt;</code></li><li class="- topic/li li">结束回放，打印日志：<code class="+ topic/ph pr-d/codeph ph codeph">Completed CacheEngine GC and RedoLog GC after applying all redo logs and engine is &lt;engineType&gt;</code>。</li></ol><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>：redo log 与 cache engine 的具体功能介绍见 <a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/tutorials/redoLog_cacheEngine.html" target="_blank" rel="external noopener">redo log 和 cache engine</a>。有后台线程定期自动清理不再需要的 <em class="+ topic/ph hi-d/i ph i">tid.log</em> 文件。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title11" id="28-控制节点-raft-元数据初始化"><h3 class="- topic/title title topictitle3" id="ariaid-title11">2.8. 控制节点 RAFT 元数据初始化</h3><div class="- topic/body body"><p class="- topic/p p">DolphinDB 的高可用集群通过 RAFT 管理 DFS 元数据、权限和函数视图数据等控制节点的元数据。Raft 日志存储在控制节点的 <em class="+ topic/ph hi-d/i ph i">&lt;HOME_DIR&gt;/&lt;NodeAlias&gt;/raft</em> 目录下，相关文件说明：</p><div class="table-container"><table class="- topic/table table" data-cols="2"><caption></caption><colgroup><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="28-控制节点-raft-元数据初始化__entry__1"><strong class="+ topic/ph hi-d/b ph b">文件</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="28-控制节点-raft-元数据初始化__entry__2"><strong class="+ topic/ph hi-d/b ph b">说明</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="28-控制节点-raft-元数据初始化__entry__1">raftHardstate[group]</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="28-控制节点-raft-元数据初始化__entry__2">RAFT 的任期（term）和投票相关元数据信息。其中 group 为 RAFT 组号</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="28-控制节点-raft-元数据初始化__entry__1">raftWAL[group]</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="28-控制节点-raft-元数据初始化__entry__2">RAFT 业务数据日志，含其他使用 RAFT 模块的数据，如 DFS 元数据、权限和函数视图数据等。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="28-控制节点-raft-元数据初始化__entry__1">raftSnapshot[group]</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="28-控制节点-raft-元数据初始化__entry__2">RAFT 业务数据日志的快照</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="28-控制节点-raft-元数据初始化__entry__1">raftWAL[group].old</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="28-控制节点-raft-元数据初始化__entry__2">旧的业务数据日志，生成快照时的临时文件</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="28-控制节点-raft-元数据初始化__entry__1">raftSnapshot[group].tmp</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="28-控制节点-raft-元数据初始化__entry__2">生成快照时的临时文件</td></tr></tbody></table></div><p class="- topic/p p">具体初始化流程如下：</p><br/><img class="- topic/image image" src="images/node_startup_process_and_questions/08.png" alt="08"/><br/><ol class="- topic/ol ol"><li class="- topic/li li">开始，打印日志：<code class="+ topic/ph pr-d/codeph ph codeph">DFSMaster ElectionTick is set to [electionTick]</code>；</li><li class="- topic/li li">从 <em class="+ topic/ph hi-d/i ph i">controller.cfg</em> 读取 RAFT 集群信息；</li><li class="- topic/li li">从 <em class="+ topic/ph hi-d/i ph i">raftHardstate</em> 读取 RAFT 成员相关的信息；</li><li class="- topic/li li">从 <em class="+ topic/ph hi-d/i ph i">raftSnapshot</em> 读取业务日志的快照（可以理解为 checkpoint），清理快照临时文件；</li><li class="- topic/li li">从 <em class="+ topic/ph hi-d/i ph i">raftWAL</em> 读取和重做业务日志（包含 dfsMeta, acl log, streamingHA log 等），相关运行日志：
<code class="+ topic/ph pr-d/codeph ph codeph">&lt;Raft&gt; Group &lt;groupAlias&gt; RaftWAL::reconstruct: read new file with &lt;size&gt; entries</code>
<code class="+ topic/ph pr-d/codeph ph codeph">&lt;Raft&gt; Group &lt;groupAlias&gt; RaftWAL::reconstruct: read old file with &lt;size&gt; entries</code></li><li class="- topic/li li">初始化节点成为 follower，加入 RAFT 集群，相关运行日志：
<code class="+ topic/ph pr-d/codeph ph codeph">&lt;Raft&gt; Group &lt;groupAlias&gt; &lt;NodeAlias&gt; became follower at term &lt;currentTerm&gt;, leader is &lt;leader&gt;</code>
<code class="+ topic/ph pr-d/codeph ph codeph">&lt;Raft&gt; Group &lt;groupAlias&gt; &lt;NodeAlias&gt; begin to clear all old notifiers</code></li><li class="- topic/li li">完成，打印日志：<code class="+ topic/ph pr-d/codeph ph codeph">&lt;Raft&gt; Group &lt;groupAlias&gt; initialized successfully.</code></li></ol></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title12" id="29-定时任务初始化"><h3 class="- topic/title title topictitle3" id="ariaid-title12">2.9. 定时任务初始化</h3><div class="- topic/body body"><p class="- topic/p p">DolphinDB 的<a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/tutorials/scheduledJob.html" target="_blank" rel="external noopener">定时任务</a>会持久化保存到硬盘，单节点或控制节点保存在 <em class="+ topic/ph hi-d/i ph i">&lt;HOME_DIR&gt;/&lt;NodeAlias&gt;/sysmgmt</em> 目录下，数据节点或计算节点保存在 <em class="+ topic/ph hi-d/i ph i">&lt;HOME_DIR&gt;/sysmgmt</em> 目录下，相关文件说明：</p><div class="table-container"><table class="- topic/table table" data-cols="2"><caption></caption><colgroup><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="29-定时任务初始化__entry__1"><strong class="+ topic/ph hi-d/b ph b">文件</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="29-定时任务初始化__entry__2"><strong class="+ topic/ph hi-d/b ph b">说明</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="29-定时任务初始化__entry__1">jobEditlog.meta</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="29-定时任务初始化__entry__2">定时任务的编辑日志文件</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="29-定时任务初始化__entry__1">jobCheckPoint.meta</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="29-定时任务初始化__entry__2">定时任务的 checkpoint 文件，当编辑日志过大时会做一次 checkpoint 保存最新的元数据的状态</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="29-定时任务初始化__entry__1">jobCheckPoint.tmp</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="29-定时任务初始化__entry__2">定时任务的 checkpoint 临时文件，做 checkpoint 时临时生成</td></tr></tbody></table></div><p class="- topic/p p">具体初始化流程如下：</p><br/><img class="- topic/image image" src="images/node_startup_process_and_questions/09.png" alt="09"/><br/><ol class="- topic/ol ol"><li class="- topic/li li">开始，打印日志：<code class="+ topic/ph pr-d/codeph ph codeph">Job scheduler start to initialize.</code>；</li><li class="- topic/li li">如果不存在编辑日志文件或为空，校验 checkpoint 临时文件，如果有效则重命名为 checkpoint 文件；</li><li class="- topic/li li">如果存在 checkpoint 文件，校验，如果失效则报错退出；</li><li class="- topic/li li">读取 checkpoint 文件恢复定时任务；</li><li class="- topic/li li">读取和回放编辑日志文件恢复定时任务；</li><li class="- topic/li li">裁剪无效的编辑日志；</li><li class="- topic/li li">结束，打印日志：<code class="+ topic/ph pr-d/codeph ph codeph">Job scheduler initialization completed.</code></li></ol></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title13" id="3-启动问题定位思路"><h2 class="- topic/title title topictitle2" id="ariaid-title13">3. 启动问题定位思路</h2><div class="- topic/body body"><p class="- topic/p p">DolphinDB 节点启动失败时，最明显的现象是启动节点后，对应的 web 界面无法访问，如果是集群在 web 管理界面会看到节点状态为红色。启动问题主要可以分为三类：</p><ul class="- topic/ul ul"><li class="- topic/li li">启动异常关闭</li><li class="- topic/li li">启动异常卡住</li><li class="- topic/li li">启动慢</li></ul><p class="- topic/p p">首先需要先确认是哪类问题，在启动节点后，通过如下命令查看节点进程是否存在：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>ps -ef | grep dolphindb // 如果修改了可执行文件名，需要修改 dolphindb 为相应可执行文件名</code></pre><p class="- topic/p p">若进程不存在则是启动异常关闭；若进程存在，通过如下命令搜索日志确定节点是否启动完成：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>grep "Job scheduler initialization completed." dolphindb.log</code></pre><p class="- topic/p p">若有执行启动后的时间的日志输出则节点已正常启动，可以去 web 界面刷新确认节点状态是否已为绿色；否则是启动异常卡住或启动慢。通过如下命令搜索节点运行日志中的 ERROR：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>grep "ERROR" dolphindb.log</code></pre><p class="- topic/p p">若在执行启动后的时间一直重复刷某段 ERROR 日志，且节点进程一直在，则为启动异常卡在某个阶段；否则为正常启动，只是比较慢还没启动成功，需要继续等待观察启动结果。</p><p class="- topic/p p">具体问题需要分析<a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html#ariaid-title4" target="_blank" rel="external noopener">节点运行日志</a>，节点运行日志存储位置由命令行参数 <em class="+ topic/ph hi-d/i ph i">logFile</em> 决定。另外集群环境下可以通过 <em class="+ topic/ph hi-d/i ph i">logFile</em> 配置项指定节点运行日志存储位置。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>：若使用 <em class="+ topic/ph hi-d/i ph i">startSingle.sh</em> 启动单节点，节点运行日志默认存储在安装目录的 <em class="+ topic/ph hi-d/i ph i">dolphindb.log</em>。若使用 clusterDemo 文件夹下的 <em class="+ topic/ph hi-d/i ph i">startController.sh</em> 和 <em class="+ topic/ph hi-d/i ph i">startAgent.sh</em> 来启动集群，节点运行日志默认存储在 <em class="+ topic/ph hi-d/i ph i">clusterDemo/log</em>，文件名为 <em class="+ topic/ph hi-d/i ph i">&lt;NodeAlias&gt;.log</em>。</p></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title14" id="31-启动异常关闭"><h3 class="- topic/title title topictitle3" id="ariaid-title14">3.1. 启动异常关闭</h3><div class="- topic/body body"><p class="- topic/p p">首先需要区分节点是启动成功后的运行过程中异常宕机，还是启动过程中异常关闭。需要参照<a class="- topic/xref xref" href="node_startup_process_and_questions.html#%E8%8A%82%E7%82%B9%E6%95%B4%E4%BD%93%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B">“节点整体启动流程”</a>一节查看是否有节点启动完成的日志 <code class="+ topic/ph pr-d/codeph ph codeph">Job scheduler initialization completed.</code>，有则是节点启动成功后运行过程中异常宕机，需要根据 <a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/tutorials/how_to_handle_crash.html" target="_blank" rel="external noopener">排查节点宕机的原因</a> 来定位节点宕机问题；否则是启动过程中异常关闭问题。</p><p class="- topic/p p">需要查看节点最新运行日志中启动阶段的 ERROR 日志。注意要查看启动阶段的 ERROR 日志而不是启动失败后关机阶段的 ERROR 日志。DolphinDB 在关机时打印如下 ERROR 日志是预期的：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>...
&lt;ERROR&gt; : The socket server ended.
...
&lt;ERROR&gt; : AsynchronousSubscriberImp::run Shut down the subscription daemon.
...</code></pre><p class="- topic/p p">如果存在关机日志，需要继续往上搜索 ERROR 查看启动阶段的日志，结合前文的启动流程分析和后文的常见启动问题来分析失败原因。另外需要注意是否在启动过程中宕机，若宕机节点进程会直接被杀死，而不会走关机流程，此时需要查看 coredump 里的堆栈信息：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /path/to/dolphindb
gdb dolphindb /path/to/corefile
bt</code></pre><p class="- topic/p p">堆栈信息需要发给 DolphinDB 技术支持来分析定位。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title15" id="32-启动异常卡住"><h3 class="- topic/title title topictitle3" id="ariaid-title15">3.2. 启动异常卡住</h3><div class="- topic/body body"><p class="- topic/p p">需要查看节点最新运行日志中的 ERROR 日志，结合前文的启动流程分析、后文的常见启动问题来确定当前节点正在启动什么模块、执行什么动作失败。一般会重复打印某段 ERROR 日志以尝试启动，可以使用如下命令实时查看节点刷的日志：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>tail -f dolphindb.log</code></pre><p class="- topic/p p">另外可以使用 <code class="+ topic/ph pr-d/codeph ph codeph">pstack</code> 命令来查看启动时节点内部各个线程的堆栈信息，以确定线程具体执行的动作：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>pstack dolphindb_pid &gt; /tmp/pstack.log # 替换 dolphindb_pid 为 dolphindb 进程号</code></pre><p class="- topic/p p">堆栈信息需要发给 DolphinDB 技术支持来分析定位。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title16" id="33-启动慢"><h3 class="- topic/title title topictitle3" id="ariaid-title16">3.3. 启动慢</h3><div class="- topic/body body"><p class="- topic/p p">需要查看节点最新运行日志，结合前文的启动流程分析、后文的常见启动问题来确定当前节点正在启动什么模块、执行什么动作。启动慢时，一般不会有 ERROR 日志。常见的启动慢原因是回滚事务或回放 redo log，详见 <a class="- topic/xref xref" href="node_startup_process_and_questions.html#%E5%90%AF%E5%8A%A8%E6%85%A2">“启动慢”</a>一节。</p><p class="- topic/p p">另外可以使用 <code class="+ topic/ph pr-d/codeph ph codeph">pstack</code> 命令来查看启动时节点内部各个线程的堆栈信息，以确定线程具体执行的动作：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>pstack dolphindb_pid &gt; /tmp/pstack.log # 替换 dolphindb_pid 为 dolphindb 进程号</code></pre><p class="- topic/p p">堆栈信息需要发给 DolphinDB 技术支持来分析定位。</p></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title17" id="4-常见问题"><h2 class="- topic/title title topictitle2" id="ariaid-title17">4. 常见问题</h2><div class="- topic/body body"><p class="- topic/p p">列出 DolphinDB 常见的启动问题和解决方案。若问题现象不属于常见问题，请联系 DolphinDB 技术支持定位处理。</p></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title18" id="41-启动异常关闭"><h3 class="- topic/title title topictitle3" id="ariaid-title18">4.1. 启动异常关闭</h3><div class="- topic/body body"></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title19" id="411-license-过期"><h4 class="- topic/title title topictitle4" id="ariaid-title19">4.1.1. license 过期</h4><div class="- topic/body body"><p class="- topic/p p">DolphinDB 会在 license 过期前 15 天在 web 或 gui 提示 license 即将过期，而过期后如果节点还在线则能够继续使用 15 天，到第 15 天时会自动关机。License 过期后启动 DolphinDB 会失败，节点运行日志中会有如下 WARNING 和 ERROR 日志：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>2023-10-13 09:52:30.007743 &lt;WARNING&gt; :The license has expired. Please renew the license and restart the server.
2023-10-13 09:52:30.163238 &lt;ERROR&gt; : The license has expired.</code></pre><p class="- topic/p p">需要联系销售获取更新 license。</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title20" id="412-端口冲突"><h4 class="- topic/title title topictitle4" id="ariaid-title20">4.1.2. 端口冲突</h4><div class="- topic/body body"><p class="- topic/p p">DolphinDB 启动时会绑定一个端口用来做网络传输，由配置文件的 <em class="+ topic/ph hi-d/i ph i">localSite</em> 配置项指定。若配置的端口被其他程序占用，或上一次关闭节点还没有完全关闭，则会导致节点启动时绑定端口失败而启动失败。查看节点运行日志有如下报错：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>2023-10-26 09:01:31.349118 &lt;ERROR&gt; :Failed to bind the socket on port 8848 with error code 98
2023-10-26 09:01:31.349273 &lt;ERROR&gt; :Failed to bind the socket on port 8848. Shutting down the server. Please try again in a couple of
 minutes.</code></pre><p class="- topic/p p">运行如下命令查看占用指定端口的程序：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>netstat -nlp | grep 端口号</code></pre><p class="- topic/p p">解决方案是停止占用端口的程序后再启动。若为上一次关闭的节点还没有完全关闭，需要等待节点关闭或使用 <code class="+ topic/ph pr-d/codeph ph codeph">kill -9</code> 强行停止节点再启动，强行停止节点可能会导致关机前未完成的写入的数据丢失。</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title21" id="413-redo-log-文件损坏"><h4 class="- topic/title title topictitle4" id="ariaid-title21">4.1.3. redo log 文件损坏</h4><div class="- topic/body body"><p class="- topic/p p">数据节点启动时会回放 redo log，如果上次运行时出现磁盘满、宕机或 bug，可能导致 redo log 文件损坏，可能导致节点启动时回放 redo log 失败抛出异常而启动失败。例如查看节点运行日志有如下报错：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>2023-12-11 15:18:58.888865 &lt;INFO&gt; :applyTidRedoLog : 2853,c686664b-d020-429a-1746-287d670099e9,/hdd/hdd7/hanyang/server/clusterDemo/data/P1-datanode/storage/CHUNKS/multiValueTypeDb1/20231107/Key0/g
z,pt_2,32054400,1046013,0
2023-12-11 15:18:58.895064 &lt;ERROR&gt; :VectorUnmarshall::start Invalid data form 0 type 0
2023-12-11 15:18:58.895233 &lt;ERROR&gt; :The redo log for transaction [2853] comes across error: Failed to unmarshall data.. Invalid message format
2023-12-11 15:18:58.895476 &lt;ERROR&gt; :The ChunkNode failed to initialize with exception [Failed to unmarshall data.. Invalid message format].
2023-12-11 15:18:58.895555 &lt;ERROR&gt; :ChunkNode service comes up with the error message: Failed to unmarshall data.. Invalid message format</code></pre><p class="- topic/p p">日志含义为回放 redo log 时发现 tid 为 2853 的 redo log 文件格式错误导致回放失败。此时需要通过如下步骤跳过 redo log 回放：</p><ol class="- topic/ol ol"><li class="- topic/li li">mv 移走 redoLogDir 和 TSDBRedoLogDir 文件夹下的 <em class="+ topic/ph hi-d/i ph i">head.log</em> 文件，cp 备份报错对应的 <em class="+ topic/ph hi-d/i ph i">2853.log</em> 文件；</li><li class="- topic/li li">启动节点，观察是否正常启动，启动后检查重启前正在写入的数据完整性，是否要补数据等。</li></ol><p class="- topic/p p">如果不是磁盘满导致，需要将 <em class="+ topic/ph hi-d/i ph i">head.log</em> 和报错对应的 <em class="+ topic/ph hi-d/i ph i">2853.log</em> 发给 DolphinDB 技术支持定位问题。</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title22" id="414-函数视图或定时任务包含不存在的方法"><h4 class="- topic/title title topictitle4" id="ariaid-title22">4.1.4. 函数视图或定时任务包含不存在的方法</h4><div class="- topic/body body"><p class="- topic/p p">节点启动时会反序列化函数视图和定时任务文件，若反序列化的方法定义中包含不存在于内存的方法，将会导致相关函数视图和定时任务反序列化失败。常见情况如下：</p><ul class="- topic/ul ul"><li class="- topic/li li">使用了未配置自动加载的插件和模块的方法</li><li class="- topic/li li">更新插件或模块后相关方法名变更</li></ul><p class="- topic/p p">例如，定义定时任务 myTest 调用 rabbitmq 插件的方法：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>loadPlugin("plugins/rabbitmq/PluginRabbitMQ.txt")

def myTest() {
	HOST="192.168.0.53"
    PORT=5672
    USERNAME="guest"
    PASSWORD="guest"

    conn = rabbitmq::connection(HOST, PORT, USERNAME, PASSWORD);
}

scheduleJob("myTest", "myTest", myTest, 15:50m, startDate=today(), endDate=today()+3, frequency='D')</code></pre><p class="- topic/p p">如果未配置 <em class="+ topic/ph hi-d/i ph i">preloadModules=plugins::rabbitmq</em>，则节点启动时不会加载 rabbitmq 插件的函数定义到内存，节点启动反序列化定时任务会失败，运行日志会有如下报错：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>2023-10-13 09:55:30.166268 &lt;ERROR&gt; :CodeUnmarshall::start readObjectAndDependency exception: Can't recognize function: rabbitmq::connection
2023-10-13 09:55:30.166338 &lt;ERROR&gt; :Failed to unmarshall the job [myTest]. Can't recognize function: rabbitmq::connection. Invalid message format</code></pre><p class="- topic/p p">解决方案是添加报错方法对应的插件或模块到 <em class="+ topic/ph hi-d/i ph i">preloadModules</em> 配置项，即配置 <em class="+ topic/ph hi-d/i ph i">preloadModules=plugins::rabbitmq</em>，然后再启动节点。</p><p class="- topic/p p">若为更新插件或模块后相关方法名变更，需要回退插件或模块再启动，删除对应的视图或定时任务后，再升级插件或模块。</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title23" id="415-函数视图或定时任务包含不存在的共享表"><h4 class="- topic/title title topictitle4" id="ariaid-title23">4.1.5. 函数视图或定时任务包含不存在的共享表</h4><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>：该问题已在 1.30.23.1/2.00.11.1 或以上版本修复。</p><p class="- topic/p p">节点启动时会反序列化函数视图和定时任务文件，若反序列化的方法定义中包含不存在于内存的共享表，将会导致相关函数视图和定时任务反序列化失败。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">问题 1</strong>：<strong class="+ topic/ph hi-d/b ph b">定时任务反序列化失败</strong></p><p class="- topic/p p">例如，定时任务 myTest 的定义如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>share table(1 2 3 as id, 1 2 3 as val) as t

def myTest() {
	update t set val = val + 1
}

scheduleJob("myTest", "myTest", myTest, minute(now())+5, today(), today(), 'D')</code></pre><p class="- topic/p p">其中第 4 行的 update 语句用于更新共享表 t。如果在启动脚本 <em class="+ topic/ph hi-d/i ph i">startup.dos</em> 中未创建共享表 t，则节点启动时反序列化定时任务会失败，运行日志会有如下 WARNING 和 ERROR 日志：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>2023-10-23 09:38:27.746184 &lt;WARNING&gt; :Failed to recognize shared variable t
2023-10-23 09:38:27.746343 &lt;ERROR&gt; :CodeUnmarshall::start readObjectAndDependency exception: Failed to deserialize update statement
2023-10-23 09:38:27.746404 &lt;ERROR&gt; :Failed to deserialize update statement. Invalid message format</code></pre><p class="- topic/p p">原因：定时任务的定义中使用了未创建的表。</p><p class="- topic/p p">解决方法：</p><ol class="- topic/ol ol"><li class="- topic/li li">在报错的定时任务 myTest 中检查是否使用了未创建的表，例如前述的共享表 t。</li><li class="- topic/li li">在定时任务所在节点的启动脚本 <em class="+ topic/ph hi-d/i ph i">startup.dos</em> 中添加相应的建表语句。</li><li class="- topic/li li">启动节点。</li></ol><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">问题 2：函数视图反序列化失败</strong></p><p class="- topic/p p">如果将前述问题 1 中的定时任务 myTest 添加到函数视图，例如：<code class="+ topic/ph pr-d/codeph ph codeph">addFunctionView(myTest)</code>，也会导致节点启动时反序列化函数视图失败，运行日志中会出现相同的报错。</p><p class="- topic/p p">原因：函数视图反序列化先于节点启动，因此在控制节点的 <em class="+ topic/ph hi-d/i ph i">startup.dos</em> 中定义共享表 t 也不会有效。</p><p class="- topic/p p">解决方法：</p><ul class="- topic/ul ul"><li class="- topic/li li">对于普通集群：<ol class="- topic/ol ol"><li class="- topic/li li">移除 <em class="+ topic/ph hi-d/i ph i">/sysmgmt</em> 下的 <em class="+ topic/ph hi-d/i ph i">aclEditlog.meta</em>、<em class="+ topic/ph hi-d/i ph i">aclCheckPoint.meta</em>、<em class="+ topic/ph hi-d/i ph i">aclCheckPoint.tmp</em>。</li><li class="- topic/li li">重新启动节点。</li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">启动后重新添加所有权限和函数视图定义。</strong></li></ol></li><li class="- topic/li li">对于高可用集群，如果未重启，或存在半数以上控制节点存活：<ol class="- topic/ol ol"><li class="- topic/li li">删除相关函数视图：<code class="+ topic/ph pr-d/codeph ph codeph">dropFunctionView("myTest")</code></li><li class="- topic/li li">生成权限与函数视图的 checkpoint 文件以避免启动时回放 RAFT 日志执行之前的函数视图定义。<code class="+ topic/ph pr-d/codeph ph codeph">rpc(getControllerAlias(), aclCheckPoint, true)</code> // 参数 <em class="+ topic/ph hi-d/i ph i">force</em> = true 表示强制生成 checkpoint。</li></ol></li><li class="- topic/li li">对于高可用集群，如果已重启：<ol class="- topic/ol ol"><li class="- topic/li li">移除所有控制节点的 <em class="+ topic/ph hi-d/i ph i">&lt;HOME_DIR&gt;/&lt;NodeAlias&gt;/raft</em> 目录下的 <em class="+ topic/ph hi-d/i ph i">raftHardstate[group]</em>、<em class="+ topic/ph hi-d/i ph i">raftWAL[group]</em>、<em class="+ topic/ph hi-d/i ph i">raftSnapshot[group]</em>、<em class="+ topic/ph hi-d/i ph i">raftWAL[group].old</em>、<em class="+ topic/ph hi-d/i ph i">raftSnapshot[group].tmp</em>。<strong class="+ topic/ph hi-d/b ph b">注意：这会导致集群元数据全部失效。</strong></li><li class="- topic/li li">重新启动节点。</li></ol></li></ul><p class="- topic/p p">必然存在 <em class="+ topic/ph hi-d/i ph i">aclEditlog.meta</em>，可能存在<em class="+ topic/ph hi-d/i ph i">aclCheckPoint.meta</em>，<em class="+ topic/ph hi-d/i ph i">aclCheckPoint.tmp</em>。</p><p class="- topic/p p">必然存在 <em class="+ topic/ph hi-d/i ph i">raftHardstate[group]</em>，<em class="+ topic/ph hi-d/i ph i">raftWAL[group]</em>，可能存在 <em class="+ topic/ph hi-d/i ph i">raftSnapshot[group]</em>，<em class="+ topic/ph hi-d/i ph i">raftWAL[group].old</em>，<em class="+ topic/ph hi-d/i ph i">raftSnapshot[group].tmp</em>。</p><p class="- topic/p p">后续版本会优化添加函数视图的功能以避免需要删除元数据来解决该问题。</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title24" id="416-函数视图方法名与预加载的模块或插件的方法名冲突"><h4 class="- topic/title title topictitle4" id="ariaid-title24">4.1.6. 函数视图方法名与预加载的模块或插件的方法名冲突</h4><div class="- topic/body body"><p class="- topic/p p">节点启动时会反序列化函数视图文件，若反序列化的函数视图方法名与已通过 preloadModule 加载的方法名冲突，将会导致函数视图反序列化失败。例如，直接添加 ops 模块的 cancelJobEx 方法到函数视图：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>use ops
addFunctionView(ops::cancelJobEx)</code></pre><p class="- topic/p p">若同时配置 <em class="+ topic/ph hi-d/i ph i">preloadModules=ops</em>，启动时运行日志会有如下报错：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>2023-10-20 08:46:15.733365 &lt;ERROR&gt; :CodeUnmarshall::start readObjectAndDependency exception: Not allowed to overwrite existing functions/procedures [ops::cancelJobEx] by system users.
2023-10-20 08:46:15.733422 &lt;ERROR&gt; :Not allowed to overwrite existing functions/procedures [ops::cancelJobEx] by system users.. Invalid message format</code></pre><p class="- topic/p p">解决方案是去掉 <em class="+ topic/ph hi-d/i ph i">preloadModules=ops</em> 配置项，然后再启动节点。不建议先定义模块再将模块内的方法添加到函数视图，而应该直接定义方法再添加到函数视图。</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title25" id="417-定时任务文件损坏"><h4 class="- topic/title title topictitle4" id="ariaid-title25">4.1.7. 定时任务文件损坏</h4><div class="- topic/body body"><p class="- topic/p p">DolphinDB 序列化定时任务到文件时，如果上次运行时出现磁盘满、宕机或 bug，可能导致定时任务文件损坏，可能导致节点启动时反序列化失败抛出异常而启动失败。例如查看节点运行日志有如下报错：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>2023-10-13 09:57:30.456789 &lt;ERROR&gt; :CodeUnmarshall::start readObjectAndDependency exception: Failed to deserialize update statement
2023-10-13 09:57:30.456789 &lt;ERROR&gt; :Failed to unmarshall the job [myTest]. Failed to deserialize update statement. Invalid message format</code></pre><p class="- topic/p p">此时如果希望尽快启动节点，可以移走 <em class="+ topic/ph hi-d/i ph i">jobEditlog.meta</em>、<em class="+ topic/ph hi-d/i ph i">jobCheckPoint.meta</em>、<em class="+ topic/ph hi-d/i ph i">jobCheckPoint.tmp</em> 文件以跳过启动时的定时任务反序列化，再启动节点。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>：必然存在 <em class="+ topic/ph hi-d/i ph i">jobEditlog.meta</em>，可能存在<em class="+ topic/ph hi-d/i ph i">jobCheckPoint.meta</em>、<em class="+ topic/ph hi-d/i ph i">jobCheckPoint.tmp</em>。</p><p class="- topic/p p">请打包定时任务文件、日志里报错的定时任务脚本和节点运行日志，联系 DolphinDB 技术支持排查问题。</p><p class="- topic/p p">节点启动后，需要重新提交所有定时任务。</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title26" id="418-权限与函数视图文件损坏"><h4 class="- topic/title title topictitle4" id="ariaid-title26">4.1.8. 权限与函数视图文件损坏</h4><div class="- topic/body body"><p class="- topic/p p">DolphinDB 序列化权限操作和函数视图定义到文件时，如果上次运行时出现磁盘满、宕机或 bug，可能导致权限和函数视图文件损坏，可能导致节点启动时反序列化失败抛出异常而启动失败。例如查看节点运行日志有如下报错：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>2023-10-13 09:59:35.786438 &lt;ERROR&gt; :CodeUnmarshall::start readObjectAndDependency exception: Failed to deserialize sql query object
2023-10-13 09:59:35.786438 &lt;ERROR&gt; :Failed to unmarshall the job [myTest1]. Failed to deserialize sql query object. Invalid message format</code></pre><p class="- topic/p p">此时如果希望尽快启动节点，可以参考<a class="- topic/xref xref" href="node_startup_process_and_questions.html#%E5%87%BD%E6%95%B0%E8%A7%86%E5%9B%BE%E6%88%96%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E5%8C%85%E5%90%AB%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E5%85%B1%E4%BA%AB%E8%A1%A8">“函数视图或定时任务包含不存在的共享表”</a>中的 <strong class="+ topic/ph hi-d/b ph b">问题 2：函数视图反序列化失败</strong> 小节的解决方法移走权限与函数视图文件以跳过反序列化。</p><p class="- topic/p p">请打包权限和函数视图文件、日志里报错的函数视图脚本和节点运行日志，联系 DolphinDB 技术支持排查问题。</p><p class="- topic/p p">节点启动后，需要重新添加所有权限和函数视图定义。</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title27" id="419-raft-文件损坏"><h4 class="- topic/title title topictitle4" id="ariaid-title27">4.1.9. RAFT 文件损坏</h4><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>：下面介绍的操作需要确保已经有另一个节点成为 RAFT 集群 leader 才可以进行。DolphinDB 写 RAFT 元数据和日志时，如果上次运行时出现磁盘满、宕机或 bug，可能导致 RAFT 元数据或日志文件损坏，可能导致控制节点启动时恢复 RAFT 数据失败抛出异常而启动失败。例如查看节点运行日志有如下报错：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>2023-10-13 09:59:35.786438 &lt;WARNING&gt; :[Raft] incomplete hardstate file [/data/server/data/controllerl/raft/raftHardstatel]
2023-10-13 09:59:35.786438 &lt;INFO&gt; :[Raft] Group DFSMaster RaftWAL::reconstruct: read new file with 83213 entries 
2023-10-13 09:59:35.786438 &lt;ERROR&gt; :[Raft] Group DFSMaster RawNode::init: failed to initialize with exception [basic_string::_S_create].
2023-10-13 09:59:35.786438 &lt;ERROR&gt; :Failed to start DFSMaster with the error message: basic_string::_S_create </code></pre><p class="- topic/p p">此时如果希望尽快启动节点，可以移走问题节点的 <a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html?hl=dfsmetadir" target="_blank" rel="external noopener">dfsMetaDir 配置项</a>文件夹和 <em class="+ topic/ph hi-d/i ph i">&lt;HOME_DIR&gt;/&lt;NodeAlias&gt;/raft</em> 文件夹以跳过启动时的 DFS 和 RAFT 元数据初始化，再启动节点。</p><p class="- topic/p p">请打包 <a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/db_distr_comp/cfg/function_configuration.html?hl=dfsmetadir" target="_blank" rel="external noopener">dfsMetaDir 配置项</a>文件夹、 <em class="+ topic/ph hi-d/i ph i">&lt;HOME_DIR&gt;/&lt;NodeAlias&gt;/raft</em> 文件夹和节点运行日志，联系 DolphinDB 技术支持排查问题。</p><p class="- topic/p p">节点启动后，会自动同步 leader 节点的元数据。</p></div></article></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title28" id="42-启动异常卡住"><h3 class="- topic/title title topictitle3" id="ariaid-title28">4.2. 启动异常卡住</h3><div class="- topic/body body"></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title29" id="421-集群间网络不通"><h4 class="- topic/title title topictitle4" id="ariaid-title29">4.2.1. 集群间网络不通</h4><div class="- topic/body body"><p class="- topic/p p">在多台机器上部署 DolphinDB 时，需要确保集群间各个节点的 IP:端口号互通，否则会导致节点启动失败。常见原因和现象是调整了机器网络配置后重启高可用集群，进入控制节点 web 管理界面白屏，查看控制节点日志中有如下报错：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>2023-11-01 16:00:34.992500 &lt;INFO&gt; :New connection from ip = 192.168.0.44 port = 35416
2023-11-01 16:00:35.459220 &lt;INFO&gt; :DomainSiteSocketPool::closeConnection: Close connection to ctl1 #44 with error: epoll-thread: Read/Write failed. Connection timed out. siteIndex 0, withinSiteIndex 44</code></pre><p class="- topic/p p">或在 web 启动数据节点时报错 <code class="+ topic/ph pr-d/codeph ph codeph">IO error type 1</code>（含义为 <code class="+ topic/ph pr-d/codeph ph codeph">Socket is disconnected/closed or file is closed</code>，即网络连接断开）。</p><p class="- topic/p p">需要联系运维调通网络。</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title30" id="422-rsa-密钥校验文件损坏"><h4 class="- topic/title title topictitle4" id="ariaid-title30">4.2.2. RSA 密钥校验文件损坏</h4><div class="- topic/body body"><p class="- topic/p p">DolphinDB 生成 RSA 密钥校验文件时，如果上次运行时出现磁盘满、宕机或 bug，可能导致 RSA 密钥校验文件损坏，使节点无法正常通过 RSA 密钥来通信，进而导致启动流程卡住。查看节点运行日志有如下报错：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>2023-10-25 11:55:04.987161 &lt;ERROR&gt; :Failed to decrypt the message by RSA public key.</code></pre><p class="- topic/p p">解决方案是删除所有控制节点的 <em class="+ topic/ph hi-d/i ph i">&lt;HOME_DIR&gt;/&lt;NodeAlias&gt;/keys</em> 目录并重启集群，以触发 RSA 密钥校验文件重新生成。<strong class="+ topic/ph hi-d/b ph b">注意删除 keys 文件夹后需要重新提交集群的所有定时任务。</strong></p></div></article></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title31" id="43-启动慢"><h3 class="- topic/title title topictitle3" id="ariaid-title31">4.3. 启动慢</h3><div class="- topic/body body"></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title32" id="431-正在回滚事务如何查看进度如何删除事务-log-以跳过"><h4 class="- topic/title title topictitle4" id="ariaid-title32">4.3.1. 正在回滚事务，如何查看进度，如何删除事务 log 以跳过</h4><div class="- topic/body body"><p class="- topic/p p">DolphinDB 启动时，如果日志里有 <code class="+ topic/ph pr-d/codeph ph codeph">Will process pending transactions.</code> 而没有<code class="+ topic/ph pr-d/codeph ph codeph">ChunkMgmt initialization completed.</code> 说明正在回滚事务。如果节点宕机时的写入事务涉及的分区过多或数据量过大，可能导致事务回滚时间较长。</p><p class="- topic/p p">查看回滚进度的方法：</p><ol class="- topic/ol ol"><li class="- topic/li li">查看 <em class="+ topic/ph hi-d/i ph i">&lt;chunkMetaDir&gt;/LOG</em> 目录下以 tid 命名的文件夹数目是否减少，这里只能根据文件夹减少速度估计回滚速度；</li><li class="- topic/li li">若关机前有删除事务，查看 <em class="+ topic/ph hi-d/i ph i">&lt;volumes&gt;/LOG</em> 目录下以 tid 命名的文件夹数目是否减少，文件夹数目为 0 时回滚完毕。</li></ol><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>：统计文件数目可以使用 Linux 命令： <code class="+ topic/ph pr-d/codeph ph codeph">ll -hrt &lt;chunkMetaDir&gt;/LOG | wc -l</code></p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">强烈建议等待事务回滚完成</strong>，跳过事务回滚会使原本应该回滚的事务不回滚，导致事务相关的数据或元数据错误。若客户希望尽快启动节点且<strong class="+ topic/ph hi-d/b ph b">不需要保证节点宕机前正在写入的数据完整性</strong>，可以通过如下步骤跳过事务回滚：</p><ol class="- topic/ol ol"><li class="- topic/li li">使用 <code class="+ topic/ph pr-d/codeph ph codeph">kill -15 pid</code> 安全关闭节点，若正在启动时无法关闭则使用 <code class="+ topic/ph pr-d/codeph ph codeph">kill -9</code> 强制关闭节点，因为正在启动所以不会有新的写入；</li><li class="- topic/li li">mv 移走 <em class="+ topic/ph hi-d/i ph i">&lt;chunkMetaDir&gt;/LOG</em> 和 <em class="+ topic/ph hi-d/i ph i">&lt;volumes&gt;/LOG</em> 文件夹；</li><li class="- topic/li li">启动节点，观察是否正常启动，启动后检查重启前正在写入的数据完整性，是否要补数据等。</li></ol></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title33" id="432-正在回放-redo-log如何查看进度如何删除-redo-log-以跳过"><h4 class="- topic/title title topictitle4" id="ariaid-title33">4.3.2. 正在回放 redo log，如何查看进度，如何删除 redo log 以跳过</h4><div class="- topic/body body"><p class="- topic/p p">DolphinDB 启动时，如果日志里有 <code class="+ topic/ph pr-d/codeph ph codeph">Start recovering from redo log. This may take a few minutes.</code> 而没有<code class="+ topic/ph pr-d/codeph ph codeph">Completed CacheEngine GC and RedoLog GC after applying all redo logs and engine is &lt;engineType&gt;</code> ，说明正在回放 redo log。期间会刷带“RedoLog”的日志例如：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>"applyTidRedoLog : 20716,f7dbaef9-05bc-10b6-f042-a14bc0e9c897,/home/DolphinDB/server/clusterDemo/data/node2/storage/CHUNKS/snapshotDB/20220803/Key17/5o7,shfe_5,166259,107,0"</code></pre><p class="- topic/p p">注意：如果是 DolphinDB 2.0 版本，会有两次 redo log 回放，对应 OLAP 和 TSDB 存储引擎，故对应的日志也有两份；如果是 DolphinDB 1.0 版本，只会有一次 OLAP 存储引擎的 redo log 回放。</p><p class="- topic/p p">查看回放进度的方法：</p><ul class="- topic/ul ul"><li class="- topic/li li">统计 redoLogDir 和 TSDBRedoLogDir 下的 tid.log 文件数目，为 0 时回放完毕；</li><li class="- topic/li li">统计 redoLogDir 和 TSDBRedoLogDir 文件夹大小，除以硬盘的读速率，可估计最快的回放完成时间。</li></ul><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>：统计文件夹大小可以使用 Linux 命令：<code class="+ topic/ph pr-d/codeph ph codeph">du -sh &lt;redoLogDir&gt;</code></p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">强烈建议等待 redo log 回放完成</strong>，跳过 redo log 回放会使原本应该回放的事务不回放，会导致事务相关的数据或元数据错误。若客户希望尽快启动节点且<strong class="+ topic/ph hi-d/b ph b">不需要保证节点宕机前正在写入的数据完整性</strong>，可以通过如下步骤跳过 redo log 回放：</p><ol class="- topic/ol ol"><li class="- topic/li li">使用 <code class="+ topic/ph pr-d/codeph ph codeph">kill -15 pid</code> 安全关闭节点，若正在启动时无法关闭则使用 <code class="+ topic/ph pr-d/codeph ph codeph">kill -9</code> 强制关闭节点，因为正在启动所以不会有新的写入；</li><li class="- topic/li li">mv 移走 redoLogDir 和 TSDBRedoLogDir 文件夹下的 <em class="+ topic/ph hi-d/i ph i">head.log</em> 文件；</li><li class="- topic/li li">启动节点，观察是否正常启动，启动后检查重启前正在写入的数据完整性，是否要补数据等。</li></ol></div></article></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title34" id="44-其他问题"><h3 class="- topic/title title topictitle3" id="ariaid-title34">4.4. 其他问题</h3><div class="- topic/body body"></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title35" id="441-启动脚本运行慢或失败"><h4 class="- topic/title title topictitle4" id="ariaid-title35">4.4.1. 启动脚本运行慢或失败</h4><div class="- topic/body body"><p class="- topic/p p">启动脚本 <em class="+ topic/ph hi-d/i ph i">startup.dos</em> 运行慢会导致启动流程走不到初始化定时任务一步，但由于节点在 redo log 回放完成后即在 web 集群管理界面转变状态为绿色，已经可以访问，故会导致定时任务相关功能在 <em class="+ topic/ph hi-d/i ph i">startup.dos</em> 执行完前无法使用。</p><p class="- topic/p p">启动脚本 <em class="+ topic/ph hi-d/i ph i">startup.dos</em> 或 <em class="+ topic/ph hi-d/i ph i">postStart.dos</em> 运行失败会在节点运行日志里打印错误日志，然后跳过启动脚本报错行后的执行，不会导致节点启动失败，也不会回滚执行失败的动作，需要客户自行考虑启动脚本运行失败的情况。注意在<strong class="+ topic/ph hi-d/b ph b">集群模式下，执行启动脚本时无法保证分布式数据库已初始化完毕</strong>，在启动脚本访问分布式库表可能会报错。</p><p class="- topic/p p">故不建议在启动脚本执行太慢的操作或涉及分布式库表的操作，而只做一些比较简单的操作如建共享表、加载插件等。启动脚本详细介绍见 <a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/tutorials/Startup.html" target="_blank" rel="external noopener">启动脚本</a>。</p><p class="- topic/p p">可以参考如下脚本在 <em class="+ topic/ph hi-d/i ph i">startup.dos</em> 或 <em class="+ topic/ph hi-d/i ph i">postStart.dos</em> 等待分布式模块准备完毕：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>def isClusterOk() {
    do {
        try {
            meta = rpc(getControllerAlias(), getClusterChunksStatus)
            configReplicaCount = 2 // 需要修改为 dfsReplicationFactor 配置项值

            cnt1 = exec count(*) from meta where state != "COMPLETE"
            cnt2 = exec count(*) from meta where replicaCount != configReplicaCount
  
            if (cnt1 == 0 and cnt2 == 0) {
                break
            } else {
                writeLog("startup isClusterOk: state != 'COMPLETE' cnt: " + string(cnt1) + ", " + "replicaCount != " + string(configReplicaCount) + " cnt: " + string(cnt2))
            }
        } catch (err) {
            writeLog("startup isClusterOk: " + err)
        }

        sleep(3*1000)
    } while(1)

    return true
}

res = isClusterOk()
writeLog("startup isClusterOk: ", string(res))</code></pre></div></article></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title36" id="5-新旧版本日志对照表"><h2 class="- topic/title title topictitle2" id="ariaid-title36">5. 新旧版本日志对照表</h2><div class="- topic/body body"><div class="table-container"><table class="- topic/table table" data-cols="4"><caption></caption><colgroup><col/><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="5-新旧版本日志对照表__entry__1"><strong class="+ topic/ph hi-d/b ph b">2.00.11 及以后</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="5-新旧版本日志对照表__entry__2"><strong class="+ topic/ph hi-d/b ph b">新版备注</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="5-新旧版本日志对照表__entry__3"><strong class="+ topic/ph hi-d/b ph b">2.00.11 以前</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="5-新旧版本日志对照表__entry__4"><strong class="+ topic/ph hi-d/b ph b">旧版备注</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">Initializing AclManager with Raft &lt;raft mode&gt;</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__2">RAFT mode 为 enabled 或 disabled</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__3"><code class="+ topic/ph pr-d/codeph ph codeph">AclManager start to initialize with raftmode is &lt;raft mode&gt;</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__4">RAFT mode 为 0 或 1</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">Initialization of AclManager is completed with Raft &lt;raft mode&gt;</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__2">RAFT mode 为 enabled 或 disabled</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__3"><code class="+ topic/ph pr-d/codeph ph codeph">AclManager::init successfully with raftmode is &lt;raft mode&gt;</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__4">RAFT mode 为 0 或 1</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">Controller initialization completed.</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__2"> </td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__3"><code class="+ topic/ph pr-d/codeph ph codeph">DFS master is ready.</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__4"> </td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">ChunkMgmt initialization completed.</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__2"> </td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__3"><code class="+ topic/ph pr-d/codeph ph codeph">ChunkMgmt initiated successfully.</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__4"> </td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">Restore TSDB meta successfuly.</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__2"> </td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__3"><code class="+ topic/ph pr-d/codeph ph codeph">Restore iot meta successfuly.</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__4"> </td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">No available redo log files were found. Redo log replay was skipped.</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__2"> </td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__3"><code class="+ topic/ph pr-d/codeph ph codeph">No need to recover from redo log.</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__4"> </td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">Job scheduler start to initialize.</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__2"> </td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__3"><code class="+ topic/ph pr-d/codeph ph codeph">Job schedule start to initialize.</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__4"> </td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">Job scheduler initialization completed.</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__2"> </td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__3"><code class="+ topic/ph pr-d/codeph ph codeph">Job schedule initialized successfully.</code></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-新旧版本日志对照表__entry__4"> </td></tr></tbody></table></div></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title37" id="6-总结"><h2 class="- topic/title title topictitle2" id="ariaid-title37">6. 总结</h2><div class="- topic/body body"><p class="- topic/p p">本文介绍了 DolphinDB 整体的启动流程和重要模块的启动流程，并分析了启动时常见问题的现象、原因和解决方案。了解 DolphinDB 的启动流程与常见问题，有助于维护 DolphinDB 的稳定运行。遇到启动问题时，DolphinDB 运维人员可以参照本文处理一些常见问题，使 DolphinDB 尽快正常运行。</p></div></article></article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" aria-label="On this page" class="col-lg-2 d-none d-lg-block navbar d-print-none"> 
                            <div id="wh_topic_toc_content">
		                        
	                            <div class=" wh_topic_toc "><div class="wh_topic_label">在本页上</div><ul><li class="topic-item"><a href="#1-%E8%8A%82%E7%82%B9%E6%95%B4%E4%BD%93%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B" data-tocid="1-节点整体启动流程">1. 节点整体启动流程</a></li><li class="topic-item"><a href="#2-%E9%87%8D%E8%A6%81%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E7%AE%80%E6%9E%90" data-tocid="2-重要启动流程简析">2. 重要启动流程简析</a><ul><li class="topic-item"><a href="#21-license-%E6%A0%A1%E9%AA%8C" data-tocid="21-license-校验">2.1. license 校验</a></li><li class="topic-item"><a href="#22-%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E4%B8%8E%E5%87%BD%E6%95%B0%E8%A7%86%E5%9B%BE%E5%88%9D%E5%A7%8B%E5%8C%96" data-tocid="22-用户权限与函数视图初始化">2.2. 用户权限与函数视图初始化</a></li><li class="topic-item"><a href="#23-%E6%8E%A7%E5%88%B6%E8%8A%82%E7%82%B9%E5%85%83%E6%95%B0%E6%8D%AE%E5%88%9D%E5%A7%8B%E5%8C%96" data-tocid="23-控制节点元数据初始化">2.3. 控制节点元数据初始化</a></li><li class="topic-item"><a href="#24-%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9%E5%85%83%E6%95%B0%E6%8D%AE%E5%88%9D%E5%A7%8B%E5%8C%96" data-tocid="24-数据节点元数据初始化">2.4. 数据节点元数据初始化</a></li><li class="topic-item"><a href="#25-%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9%E6%81%A2%E5%A4%8D%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%87%8D%E5%81%9A%E6%97%A5%E5%BF%97%E5%9B%9E%E6%94%BE" data-tocid="25-数据节点恢复事务的重做日志回放">2.5. 数据节点恢复事务的重做日志回放</a></li><li class="topic-item"><a href="#26-%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9-tsdb-%E5%85%83%E6%95%B0%E6%8D%AE%E5%88%9D%E5%A7%8B%E5%8C%96" data-tocid="26-数据节点-tsdb-元数据初始化">2.6. 数据节点 TSDB 元数据初始化</a></li><li class="topic-item"><a href="#27-%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9-redo-log-%E5%9B%9E%E6%94%BE" data-tocid="27-数据节点-redo-log-回放">2.7. 数据节点 redo log 回放</a></li><li class="topic-item"><a href="#28-%E6%8E%A7%E5%88%B6%E8%8A%82%E7%82%B9-raft-%E5%85%83%E6%95%B0%E6%8D%AE%E5%88%9D%E5%A7%8B%E5%8C%96" data-tocid="28-控制节点-raft-元数据初始化">2.8. 控制节点 RAFT 元数据初始化</a></li><li class="topic-item"><a href="#29-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E5%88%9D%E5%A7%8B%E5%8C%96" data-tocid="29-定时任务初始化">2.9. 定时任务初始化</a></li></ul></li><li class="topic-item"><a href="#3-%E5%90%AF%E5%8A%A8%E9%97%AE%E9%A2%98%E5%AE%9A%E4%BD%8D%E6%80%9D%E8%B7%AF" data-tocid="3-启动问题定位思路">3. 启动问题定位思路</a><ul><li class="topic-item"><a href="#31-%E5%90%AF%E5%8A%A8%E5%BC%82%E5%B8%B8%E5%85%B3%E9%97%AD" data-tocid="31-启动异常关闭">3.1. 启动异常关闭</a></li><li class="topic-item"><a href="#32-%E5%90%AF%E5%8A%A8%E5%BC%82%E5%B8%B8%E5%8D%A1%E4%BD%8F" data-tocid="32-启动异常卡住">3.2. 启动异常卡住</a></li><li class="topic-item"><a href="#33-%E5%90%AF%E5%8A%A8%E6%85%A2" data-tocid="33-启动慢">3.3. 启动慢</a></li></ul></li><li class="topic-item"><a href="#4-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98" data-tocid="4-常见问题">4. 常见问题</a><ul><li class="topic-item"><a href="#41-%E5%90%AF%E5%8A%A8%E5%BC%82%E5%B8%B8%E5%85%B3%E9%97%AD" data-tocid="41-启动异常关闭">4.1. 启动异常关闭</a><ul><li class="topic-item"><a href="#411-license-%E8%BF%87%E6%9C%9F" data-tocid="411-license-过期">4.1.1. license 过期</a></li><li class="topic-item"><a href="#412-%E7%AB%AF%E5%8F%A3%E5%86%B2%E7%AA%81" data-tocid="412-端口冲突">4.1.2. 端口冲突</a></li><li class="topic-item"><a href="#413-redo-log-%E6%96%87%E4%BB%B6%E6%8D%9F%E5%9D%8F" data-tocid="413-redo-log-文件损坏">4.1.3. redo log 文件损坏</a></li><li class="topic-item"><a href="#414-%E5%87%BD%E6%95%B0%E8%A7%86%E5%9B%BE%E6%88%96%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E5%8C%85%E5%90%AB%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E6%96%B9%E6%B3%95" data-tocid="414-函数视图或定时任务包含不存在的方法">4.1.4. 函数视图或定时任务包含不存在的方法</a></li><li class="topic-item"><a href="#415-%E5%87%BD%E6%95%B0%E8%A7%86%E5%9B%BE%E6%88%96%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E5%8C%85%E5%90%AB%E4%B8%8D%E5%AD%98%E5%9C%A8%E7%9A%84%E5%85%B1%E4%BA%AB%E8%A1%A8" data-tocid="415-函数视图或定时任务包含不存在的共享表">4.1.5. 函数视图或定时任务包含不存在的共享表</a></li><li class="topic-item"><a href="#416-%E5%87%BD%E6%95%B0%E8%A7%86%E5%9B%BE%E6%96%B9%E6%B3%95%E5%90%8D%E4%B8%8E%E9%A2%84%E5%8A%A0%E8%BD%BD%E7%9A%84%E6%A8%A1%E5%9D%97%E6%88%96%E6%8F%92%E4%BB%B6%E7%9A%84%E6%96%B9%E6%B3%95%E5%90%8D%E5%86%B2%E7%AA%81" data-tocid="416-函数视图方法名与预加载的模块或插件的方法名冲突">4.1.6. 函数视图方法名与预加载的模块或插件的方法名冲突</a></li><li class="topic-item"><a href="#417-%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E6%96%87%E4%BB%B6%E6%8D%9F%E5%9D%8F" data-tocid="417-定时任务文件损坏">4.1.7. 定时任务文件损坏</a></li><li class="topic-item"><a href="#418-%E6%9D%83%E9%99%90%E4%B8%8E%E5%87%BD%E6%95%B0%E8%A7%86%E5%9B%BE%E6%96%87%E4%BB%B6%E6%8D%9F%E5%9D%8F" data-tocid="418-权限与函数视图文件损坏">4.1.8. 权限与函数视图文件损坏</a></li><li class="topic-item"><a href="#419-raft-%E6%96%87%E4%BB%B6%E6%8D%9F%E5%9D%8F" data-tocid="419-raft-文件损坏">4.1.9. RAFT 文件损坏</a></li></ul></li><li class="topic-item"><a href="#42-%E5%90%AF%E5%8A%A8%E5%BC%82%E5%B8%B8%E5%8D%A1%E4%BD%8F" data-tocid="42-启动异常卡住">4.2. 启动异常卡住</a><ul><li class="topic-item"><a href="#421-%E9%9B%86%E7%BE%A4%E9%97%B4%E7%BD%91%E7%BB%9C%E4%B8%8D%E9%80%9A" data-tocid="421-集群间网络不通">4.2.1. 集群间网络不通</a></li><li class="topic-item"><a href="#422-rsa-%E5%AF%86%E9%92%A5%E6%A0%A1%E9%AA%8C%E6%96%87%E4%BB%B6%E6%8D%9F%E5%9D%8F" data-tocid="422-rsa-密钥校验文件损坏">4.2.2. RSA 密钥校验文件损坏</a></li></ul></li><li class="topic-item"><a href="#43-%E5%90%AF%E5%8A%A8%E6%85%A2" data-tocid="43-启动慢">4.3. 启动慢</a><ul><li class="topic-item"><a href="#431-%E6%AD%A3%E5%9C%A8%E5%9B%9E%E6%BB%9A%E4%BA%8B%E5%8A%A1%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E8%BF%9B%E5%BA%A6%E5%A6%82%E4%BD%95%E5%88%A0%E9%99%A4%E4%BA%8B%E5%8A%A1-log-%E4%BB%A5%E8%B7%B3%E8%BF%87" data-tocid="431-正在回滚事务如何查看进度如何删除事务-log-以跳过">4.3.1. 正在回滚事务，如何查看进度，如何删除事务 log 以跳过</a></li><li class="topic-item"><a href="#432-%E6%AD%A3%E5%9C%A8%E5%9B%9E%E6%94%BE-redo-log%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E8%BF%9B%E5%BA%A6%E5%A6%82%E4%BD%95%E5%88%A0%E9%99%A4-redo-log-%E4%BB%A5%E8%B7%B3%E8%BF%87" data-tocid="432-正在回放-redo-log如何查看进度如何删除-redo-log-以跳过">4.3.2. 正在回放 redo log，如何查看进度，如何删除 redo log 以跳过</a></li></ul></li><li class="topic-item"><a href="#44-%E5%85%B6%E4%BB%96%E9%97%AE%E9%A2%98" data-tocid="44-其他问题">4.4. 其他问题</a><ul><li class="topic-item"><a href="#441-%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC%E8%BF%90%E8%A1%8C%E6%85%A2%E6%88%96%E5%A4%B1%E8%B4%A5" data-tocid="441-启动脚本运行慢或失败">4.4.1. 启动脚本运行慢或失败</a></li></ul></li></ul></li><li class="topic-item"><a href="#5-%E6%96%B0%E6%97%A7%E7%89%88%E6%9C%AC%E6%97%A5%E5%BF%97%E5%AF%B9%E7%85%A7%E8%A1%A8" data-tocid="5-新旧版本日志对照表">5. 新旧版本日志对照表</a></li><li class="topic-item"><a href="#6-%E6%80%BB%E7%BB%93" data-tocid="6-总结">6. 总结</a></li></ul></div>
	                        	
                        	</div>
                        </nav>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
<title>Copyright</title><p><b> ©2025 浙江智臾科技有限公司 浙ICP备18048711号-3</b></p>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
    </body>
</html>