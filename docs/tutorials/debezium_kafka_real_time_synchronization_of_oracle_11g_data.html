<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" data-whc_version="26.0">
    <head><link rel="shortcut icon" href="../favicon.ico"/><link rel="icon" href="../favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="教程难度 高级 面向读者 已经掌握： Debezium+Kafka 实时同步 Oracle 11g 数据到 DolphinDB 本教程提供了操作步骤，掌握了上面内容的读者可以跟随教程内容进行运维操作 基于开源技术 Debezium + Kafka 实时同步数据到 DolphinDB 中，我们目前已经支持了 Mysql 和 Oracle 11g。由于当前方案涉及到四个程序的部署，而且具体的 ..."/><meta name="DC.rights.owner" content="(C) 版权 2025"/><meta name="copyright" content="(C) 版权 2025"/><meta name="generator" content="DITA-OT"/><meta name="DC.type" content="topic"/><meta name="DC.coverage" content=""/><meta name="DC.relation" content="../tutorials/about_tutorials.html"/><meta name="prodname" content="DolphinDB"/><meta name="brand" content="DolphinDB"/><meta name="DC.creator" content="DolphinDB"/><meta name="DC.publisher" content="DDB N/A DDB 200"/><meta name="DC.format" content="HTML5"/><meta name="DC.identifier" content="debezium--kafka-实时同步-oracle-11g-数据到-dolphindb-运维手册"/><title>Debezium + Kafka 实时同步 Oracle 11g 数据到 DolphinDB 运维手册</title><!--  Generated with Oxygen version 26.0, build number 2024012323.  --><meta name="wh-path2root" content="../"/><meta name="wh-toc-id" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;?workdir /tmp/temp20250305183303418/tutorials?&gt;&lt;?workdir-uri file:/tmp/temp20250305183303418/tutorials/?&gt;&lt;?path2project ../?&gt;&lt;?path2project-uri ../?&gt;&lt;?path2rootmap-uri ../?&gt;&lt;topic xmlns:dita-ot=&#34;http://dita-ot.sourceforge.net/ns/201007/dita-ot&#34; xmlns:ditaarch=&#34;http://dita.oasis-open.org/architecture/2005/&#34; class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;debezium--kafka-实时同步-oracle-11g-数据到-dolphindb-运维手册&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;Debezium + Kafka 实时同步 Oracle 11g 数据到 DolphinDB 运维手册&lt;/title&gt;&lt;prolog class=&#34;- topic/prolog &#34;&gt;&lt;author class=&#34;- topic/author &#34; xtrc=&#34;author:1;12:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/author&gt;&lt;publisherinformation class=&#34;- topic/publisher bookmap/publisherinformation &#34; xtrc=&#34;publisherinformation:1;14:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:1;15:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;printlocation class=&#34;- topic/data bookmap/printlocation &#34; xtrc=&#34;printlocation:1;16:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;N/A&lt;/printlocation&gt; &lt;published class=&#34;- topic/data bookmap/published &#34; xtrc=&#34;published:1;17:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:2;18:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;publishtype class=&#34;- topic/data bookmap/publishtype &#34; value=&#34;HTML&#34; xtrc=&#34;publishtype:1;19:44&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;revisionid class=&#34;- topic/ph bookmap/revisionid &#34; xtrc=&#34;revisionid:1;20:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;200&lt;/revisionid&gt; &lt;summary class=&#34;- topic/ph bookmap/summary &#34; xtrc=&#34;summary:1;22:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:1;23:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/published&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:2;25:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/publisherinformation&gt;&lt;metadata class=&#34;- topic/metadata &#34;&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:2;39:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:1;28:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;category class=&#34;- topic/category &#34; xtrc=&#34;category:1;29:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;prodinfo class=&#34;- topic/prodinfo &#34; xtrc=&#34;prodinfo:1;34:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;prodname class=&#34;- topic/prodname &#34; xtrc=&#34;prodname:1;35:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/prodname&gt; &lt;brand class=&#34;- topic/brand &#34; xtrc=&#34;brand:1;36:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/brand&gt; &lt;/prodinfo&gt;&lt;/metadata&gt;&lt;/prolog&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:1;3:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:1;3:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;教程难度&lt;/b&gt;&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:1;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:1;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;高级&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:2;7:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:2;7:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;面向读者&lt;/b&gt;&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:2;9:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:2;9:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;已经掌握：&lt;xref class=&#34;- topic/xref &#34; dita-ot:orig-format=&#34;md&#34; format=&#34;dita&#34; href=&#34;Debezium_Kafka_Oracle_sync.md&#34; xtrc=&#34;xref:1;9:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;Debezium+Kafka 实时同步 Oracle 11g 数据到 DolphinDB&lt;/xref&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:3;10:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;本教程提供了操作步骤，掌握了上面内容的读者可以跟随教程内容进行运维操作&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:3;12:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;基于开源技术 Debezium + Kafka 实时同步数据到 DolphinDB 中，我们目前已经支持了 Mysql 和 Oracle 11g。由于当前方案涉及到四个程序的部署，而且具体的 Source 同步任务和 Sink 同步任务还需要额外的管理，在运维上具有一定难度。本篇中基于 Oracle 11g 实时同步数据到 DolphinDB 的场景进行运维操作的介绍。&lt;/p&gt;&lt;/body&gt;&lt;related-links class=&#34;- topic/related-links &#34;&gt;&lt;linkpool class=&#34;- topic/linkpool &#34; xtrc=&#34;topicref:79;109:36&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;../tutorials/about_tutorials.dita&#34; mapclass=&#34;- map/topicref bookmap/chapter &#34; role=&#34;parent&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:1;5:53&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot usertext?&gt;教程&lt;/linktext&gt;&lt;?ditaot usershortdesc?&gt;&lt;desc class=&#34;- topic/desc &#34;&gt;DolphinDB 产品使用教程&lt;/desc&gt;&lt;/link&gt;&lt;/linkpool&gt;&lt;/related-links&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1-数据同步运维工具包准备&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:2;16:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:2;16:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;1. 数据同步运维工具包准备&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:2;16:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:4;18:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;本同步方案包含对 Kafka 操作命令、通过 REST API 对 Kafka-Connect 的操作，这些操作命令涉及的参数比较多，但有些参数比如 Kafka 的访问 IP、端口等当操作环境固定之后，都是固定的参数。因此为了提高操作数据同步程序的便捷性，封装了一些运维操作脚本到 kafka-tools 工具包中。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;11-安装和配置&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:3;20:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:3;20:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;1.1 安装和配置&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:3;20:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:5;22:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;下载地址请参见附录。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:6;24:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;将 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:1;24:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;kafka-tools.tar&lt;/i&gt; 包解压缩，本例中解压到 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:2;24:33&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;/KFDATA&lt;/i&gt; 路径下。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:1;26:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt; tar -xvf kafka-tools.tar&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:7;30:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;按当前环境配置 kafka-tools 工具包的配置文件。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:2;32:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;vim /KFDATA/kafka-tools/config.properties&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:8;36:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;配置项配置如下&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:9;38:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;kafka-tools 中提供了 3 个脚本，每个脚本不带参数执行时可以输出使用说明。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:10;40:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;kafka.sh : 封装了一些对 Kafka 的操作脚本，如创建、查看 topic 明细，查看指定 topic 当前 offsets 等。&lt;/p&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:1;42:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:4;42:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt; 图1-1 kafka.sh 脚本函数列表&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/1_1.png&#34; xtrc=&#34;image:1;42:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;1080&#34; dita-ot:image-height=&#34;246&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:11;44:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;rest.s : 封装了通过 REST API 访问 Kafka-Connect 进行同步任务配置、检查等操作。&lt;/p&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:2;46:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:5;46:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt; 图1-2 rest.sh 脚本函数列表&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/1_2.png&#34; xtrc=&#34;image:2;46:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;1265&#34; dita-ot:image-height=&#34;321&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:12;48:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;tpconsumer : 用于查看 topic 中数据的脚本，对 Kafka 中的序列化数据，加载 Schema Registry 中的表元数据数据进行反序列化解析。&lt;/p&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:3;50:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:6;50:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt; 图1-3 tpconsumer.sh 脚本参数列表&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/1_3.png&#34; xtrc=&#34;image:3;50:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;1330&#34; dita-ot:image-height=&#34;302&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;/fig&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;2-同步程序和同步任务的基础操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:4;53:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:7;53:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;2. 同步程序和同步任务的基础操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:4;53:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:13;55:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:3;55:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;注意：手册中的所有操作都需要使用 kafka 用户来进行，并默认 kafka 用户拥有 sudo 权限。&lt;/b&gt;&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;21-同步程序组件的启动和停止&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:5;57:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:8;57:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;2.1 同步程序组件的启动和停止&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:5;57:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:14;59:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;同步程序组件包括 ZooKeeper、Kafka Server、Schema Registry 和 Kafka-Connect，这些组件在部署教程中已被设置为 Linux 服务，可以通过 Linux 系统命令 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:3;59:106&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;systemctl 进行启动&lt;/i&gt;。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:15;61:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;按如下顺序启动各个组件：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:3;63:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;sudo systemctl start zookeeper sudo systemctl start kafka-server sudo systemctl start schema-registry sudo systemctl start kafka-connect&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:16;70:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;按如下顺序停止各个组件：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:4;72:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;sudo systemctl stop kafka-connect sudo systemctl stop schema-registry sudo systemctl stop kafka-server sudo systemctl stop zookeeper&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:17;79:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;如果只暂停同步，则只需要停止 Kafka-Connect 程序。停止 Kafka-Connect 程序后，可以对 Kafka 进行修改 topic 消费进度、删除 topic 等操作：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:5;81:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;sudo systemctl stop kafka-connect&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:18;85:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;可以通过以下脚本快速查看当前同步程序的四个服务是否在运行状态。如下图所示则同步程序均正常运行。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:6;87:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;sudo systemctl list-units |egrep 'zookeeper|kafka-server|schema-registry|kafka-connect'&lt;/codeblock&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:4;91:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:9;91:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt; 图2-1 同步程序服务状态展示&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/2_1.png&#34; xtrc=&#34;image:4;91:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;1825&#34; dita-ot:image-height=&#34;282&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;22-同步任务部署操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:6;94:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:10;94:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;2.2 同步任务部署操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:6;94:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:19;96:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;同步任务是指通过 REST API 向 Kafka-Connect 发起调用，开启从 Oracle11g 到 Kafka 的 source 数据同步和从Kafka 到 DolphinDB 的 sink* *数据同步任务。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:3;98:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:4;98:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:20;98:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:4;98:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;Oracle 的 source 数据同步操作&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:21;100:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;创建连接 Oracle 的 source 连接器配置文件如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:7;102:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;mkdir -p /KFDATA/datasyn-config vim /KFDATA/datasyn-config/source-oracle.json&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:22;107:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;录入以下配置，&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:4;107:10&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;hostname&lt;/i&gt; 和 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:5;107:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;kafka&lt;/i&gt; 启动地址参数需按实际情况对应修改：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:8;109:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;{ &#34;name&#34;: &#34;oracle-connector&#34;, &#34;config&#34;: { &#34;connector.class&#34;: &#34;io.debezium.connector.oracle.OracleConnector&#34;, &#34;tasks.max&#34;: &#34;1&#34;, &#34;topic.prefix&#34;: &#34;oracle_service&#34;, &#34;database.hostname&#34;: &#34;183.134.101.144&#34;, &#34;database.port&#34;: 1521, &#34;database.user&#34;: &#34;debezium&#34;, &#34;database.password&#34;: &#34;123456&#34;, &#34;database.dbname&#34;: &#34;testdb&#34;, &#34;database.connection.adapter&#34;: &#34;logminer&#34;, &#34;schema.include.list&#34;: &#34;debezium&#34;, &#34;table.include.list&#34;: &#34;debezium.index_example,debezium.stock_example&#34;, &#34;schema.history.internal.kafka.bootstrap.servers&#34;: &#34;183.134.101.144:9092&#34;, &#34;schema.history.internal.kafka.topic&#34;: &#34;schema-changes.test&#34;, &#34;event.processing.failure.handling.mode&#34;: &#34;skip&#34;, &#34;decimal.handling.mode&#34;: &#34;string&#34;, &#34;snapshot.mode&#34;: &#34;initial&#34;, &#34;log.mining.strategy&#34;: &#34;online_catalog&#34;, &#34;log.mining.query.filter.mode&#34;: &#34;in&#34;, &#34;log.mining.continuous.mine&#34;: true, &#34;heartbeat.interval.ms&#34;: &#34;20000&#34;, &#34;schema.history.internal.store.only.captured.tables.ddl&#34;: true, &#34;schema.history.internal.store.only.captured.databases.ddl&#34;: true } }&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:23;139:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;通过封装了 REST API 的脚本启动 Oracle 的 source 数据同步任务：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:9;141:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;cd /KFDATA/kafka-tools/bin ./rest.sh create /KFDATA/datasyn-config/source-oracle.json&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:24;146:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;启动成功如下图所示： ​&lt;/p&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:5;148:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:11;148:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt; 图2-2 source 同步任务启动成功展示&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/2_2.png&#34; xtrc=&#34;image:5;148:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;1033&#34; dita-ot:image-height=&#34;432&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:25;150:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;对于已启动的数据同步任务，我们可以通过如下命令查看当前同步任务列表：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:10;152:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;cd /KFDATA/kafka-tools/bin ./rest.sh showall&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:26;156:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;​&lt;/p&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:6;157:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:12;157:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;图2-3 查看当前同步任务列表&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/2_3.jpg&#34; xtrc=&#34;image:6;157:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;1444&#34; dita-ot:image-height=&#34;138&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:27;160:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;查看 Source 同步任务启动后，Oracle 中配置了数据同步的数据表数据会同步到 Kafka 中的 topic 中。当前 Kafka 中的 topic 列表可以通过如下命令查看：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:11;162:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;./kafka.sh tplist&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:28;166:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;如下图所示 Oracle Source 同步任务创建后，Kafka 中的 topic。 ​&lt;/p&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:7;169:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:13;169:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;图2-4 查看当前 Kafka 中的 topic&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/2_4.jpg&#34; xtrc=&#34;image:7;169:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;373&#34; dita-ot:image-height=&#34;183&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:29;171:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;上图中：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:4;173:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:5;173:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;下划线开头的 topic 为 Kafka 和同步程序创建的内部 topic。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:6;174:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:6;174:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;connect-configs&lt;/i&gt;、&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:7;174:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;connnect-offsets&lt;/i&gt;、&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:8;174:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;connect-statuses&lt;/i&gt; 是 Kafka-connect 程序创建的 topic，用于存储同步云运行的配置、状态、偏移量等信息。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:7;175:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;oracle_service 是 Oracle Source 同步任务信息记录 topic。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:8;176:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;oracle_service.Debezium 开头的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:9;176:33&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;topic&lt;/i&gt; 则是存储表 Oracle 中同步表的数据的 topic。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:9;177:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;包含 schema 的字符串的是 schema-registry 存储表元数据及改变的 topic。&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:30;179:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;​&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:10;181:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:31;181:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:5;181:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;DolphinDB 的 sink 数据同步操作&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:32;183:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;创建 DolphinDB 数据同步任务配置文件：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:12;185:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;cd /KFDATA/datasyn-config vim ddb-sink.json&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:33;190:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;ddb-sink.json 的配置内容如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:13;192:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;{ &#34;name&#34;: &#34;ddb-sink&#34;, &#34;config&#34;: { &#34;connector.class&#34;: &#34;io.confluent.connect.jdbc.JdbcSinkConnector&#34;, &#34;tasks.max&#34;: &#34;2&#34;, &#34;topics&#34;: &#34;oracle_service.DEBEZIUM.INDEX_EXAMPLE,oracle_service.DEBEZIUM.STOCK_EXAMPLE&#34;, &#34;connection.url&#34;: &#34;jdbc:dolphindb://183.134.101.144:8848?user=admin&amp;amp;password=123456&#34;, &#34;transforms&#34;: &#34;unwrap&#34;, &#34;transforms.unwrap.type&#34;: &#34;io.debezium.transforms.ExtractNewRecordState&#34;, &#34;transforms.unwrap.drop.tombstones&#34;: &#34;false&#34;, &#34;auto.evolve&#34;: &#34;false&#34;, &#34;insert.mode&#34;: &#34;insert&#34;, &#34;delete.enabled&#34;: &#34;true&#34;, &#34;batch.size&#34;:&#34;10000&#34;, &#34;pk.mode&#34;: &#34;record_key&#34;, &#34;ddbsync.config.table&#34;:&#34;dfs://ddb_sync_config,sync_config&#34;, &#34;ddbsync.addSortColFlag&#34;: &#34;true&#34; } }&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:34;214:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;通过封装了 REST API 的脚本启动 DolphinDB 的 sink 数据同步任务。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:14;216:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;cd /KFDATA/kafka-tools/bin ./rest.sh create /KFDATA/datasyn-config/ddb-sink.json&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:35;221:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;查看同步任务状态。如下图所示，当前正在运行了 一个 source 同步任务和 一个 sink 同步任务。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:15;223:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;./rest.sh showall&lt;/codeblock&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:8;227:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:14;227:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;图2-5 当前的 source 和 sink 同步任务展示&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/2_5.png&#34; xtrc=&#34;image:8;227:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;1454&#34; dita-ot:image-height=&#34;207&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;/fig&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;3-运维检查&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:7;230:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:15;230:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;3. 运维检查&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:7;230:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:36;232:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;本章将介绍日常运维的一些检查操作。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;31-检查同步程序运行状态&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:8;234:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:16;234:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;3.1 检查同步程序运行状态&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:8;234:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:37;236:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;同步程序包含 4 个部署程序，通过以下命令检查这个 4 个同步程序是否正常运行状态。如下图则为全部正常寻运行。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:16;238:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;sudo systemctl list-units |egrep 'zookeeper|kafka-server|schema-registry|kafka-connect'&lt;/codeblock&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:9;242:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:17;242:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;图3-1 同步程序 4 个服务运行状态列表&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/3_1.png&#34; xtrc=&#34;image:9;242:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;1825&#34; dita-ot:image-height=&#34;282&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;32-同步任务检查及操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:9;245:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:18;245:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;3.2 同步任务检查及操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:9;245:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:38;247:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:6;247:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第一步&lt;/b&gt;：查看当前有哪些同步任务：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:17;249:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;./rest.sh list&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:39;253:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;下图中，可以看到有 2 个同步任务。&lt;/p&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:10;256:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:19;256:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;图3-2 查看当前同步任务&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/3_2.png&#34; xtrc=&#34;image:10;256:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;862&#34; dita-ot:image-height=&#34;72&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:40;259:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:7;259:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第二步&lt;/b&gt;：根据同步任务名称查看某个同步任务的状态。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:18;261:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;./rest.sh status ddb-sink&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:41;265:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;每个同步任务包含 1 个 connector 和至少 1 个 task ，如下图所示当前同步任务的 connector 和 task 均为正常运行状态 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:10;265:77&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;RUNNING&lt;/i&gt;。&lt;/p&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:11;268:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:20;268:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;图3-3 查看同步状态明细&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/3_3.png&#34; xtrc=&#34;image:11;268:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;1825&#34; dita-ot:image-height=&#34;127&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:42;271:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:8;271:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第三步&lt;/b&gt;：快速查看当前全部同步任务状态。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:19;273:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;./rest.sh showall&lt;/codeblock&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:12;277:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:21;277:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;图3-4 查看全部同步任务同步状态&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/3_4.jpg&#34; xtrc=&#34;image:12;277:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;1444&#34; dita-ot:image-height=&#34;138&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:43;280:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:9;280:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第四步&lt;/b&gt;：暂停同步任务，该操作会停止当前整体 connector 同步任务。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:20;282:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;./rest.sh c_pause ddb-sink&lt;/codeblock&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:13;287:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:22;287:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;图3-5 暂停 ddb-sink 同步任务&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/3_5.png&#34; xtrc=&#34;image:13;287:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;1825&#34; dita-ot:image-height=&#34;282&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:44;290:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:10;290:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第五步&lt;/b&gt;：恢复暂停的同步任务。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:21;292:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;./rest.sh c_resume ddb-sink&lt;/codeblock&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:14;296:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:23;296:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;图3-6 将 ddb-sink 任务从暂停状态恢复&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/3_6.png&#34; xtrc=&#34;image:14;296:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;1822&#34; dita-ot:image-height=&#34;273&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:45;299:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:11;299:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第六步&lt;/b&gt;：恢复同步异常终止的 task。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:46;301:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;对于曾经由于数据库连接失败而一度暂停的同步任务的某个 task，在数据库问题消除后，只要 connector 运行正常，可以通过以下命令使其恢复同步：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:22;303:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;./rest.sh t_restart ${connector_name} ${task_id}&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;33-检查数据同步情况&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:10;308:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:24;308:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;3.3 检查数据同步情况&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:10;308:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:47;310:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;本小节内容主要介绍当发现 DolphinDB 与 Oracle 数据不一致时，如何进行调查。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:48;312:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:12;312:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第一步：检查数据同步是否落后 Oracle 实时写入进度过多。&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:49;314:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;Oracle 的 SCN 是一个递增的序列号，用于标识数据库中所有事务的提交顺序和数据的变更点。可以通过以下命令查看 Oracle 的最新 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:11;314:71&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;SCN&lt;/i&gt;，即 Oracle 当前的最新事务号。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:23;316:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;select current_scn from v$database;&lt;/codeblock&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:15;321:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:25;321:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;图3-7 Oracle 的当前 SCN 序号&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/3_7.png&#34; xtrc=&#34;image:15;321:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;417&#34; dita-ot:image-height=&#34;136&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:50;324:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;Kafka-Connect 框架接收到 Oracle 的增量数时，也会获得对应的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:12;324:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;SCN&lt;/i&gt;，在处理完增量数据后（配置了同步的表数据会写入 Kafka 中的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:13;324:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;topic&lt;/i&gt;，未配置同步的表的增量数据会被跳过）会将已经处理完的数据的对应 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:14;324:119&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;SCN&lt;/i&gt; 记录到名字为 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:15;324:132&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;connect-offsets&lt;/i&gt; 的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:16;324:152&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;topic&lt;/i&gt; 中。那么我们通过以下命令可以跟踪当前最新完成同步的增量数据的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:17;324:191&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;SCN&lt;/i&gt; 。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:24;326:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;./consume.sh --topic connect-offsets --from-beginning|grep oraclenew&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:51;330:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;上图中代码中的 oraclenew 是source 同步任务的 connector name。已完成同步的增量数据的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:18;330:62&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;SCN&lt;/i&gt; 在 commit_scn 上记录。&lt;/p&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:16;333:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:26;333:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;图3-8 同步程序在 kafka 的 topic 中记录的 SCN 记录&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/3_8.png&#34; xtrc=&#34;image:16;333:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;1745&#34; dita-ot:image-height=&#34;101&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:52;336:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;如果 Oracle 中的最新 SCN 和 connect-offsets topic 中记录的 commit_scn 落差很大，说明 Oracle source 同步任务落后 Oracle 实时写入很多，需要分析原因（例如 Oracle 的 logminer 挖掘比较慢，网络传输慢、Kafka 数据写入慢等）。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:53;338:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:13;338:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第二步：检查当前同步各表的数据同步状态&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:54;340:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;DolphinDB 的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:19;340:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;sink&lt;/i&gt; 写入程序通过消费 Kafka 中的数据，并按照 Kafka 中数据的顺序写入 DolphinDB 中。通过查看同步程序对 Kafka 中数据的消费进度可以检查每张同步数据表的同步进度。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:55;342:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;首先，查看当前 Kafka 中的消费组列表。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:25;344:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;./kafka.sh cm_list&lt;/codeblock&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:17;349:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:27;349:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;图3-9 Kafka 中的消费组列表&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/3_9.png&#34; xtrc=&#34;image:17;349:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;432&#34; dita-ot:image-height=&#34;48&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:56;352:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;DolphinDB 的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:20;352:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;sink&lt;/i&gt; 写入任务的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:21;352:26&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;connector name&lt;/i&gt; 前面拼接 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:22;352:48&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;connect&lt;/i&gt; 就是这个同步写入任务的消费组名字，&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:57;354:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;这里我们只有一个消费组，即我们同步程序使用的消费组。查看这个消费组的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:23;354:36&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;topic&lt;/i&gt; 数据消费状态。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:26;356:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;./kafka.sh cm_detail connect-ddb-sink-oracle&lt;/codeblock&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:18;361:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:28;361:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;图3-10 Kafka 中消费组的消费状态&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/3_10.png&#34; xtrc=&#34;image:18;361:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;1603&#34; dita-ot:image-height=&#34;162&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:58;364:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;图中的 LOG-END-OFFSET 是对应 Oracle 目标表同步到 Kafka 中的数据条数，CURRENT-OFFSET 当前已经消费执行了对 DolphinDB 进行写入的数据条数。LAG 表示当前未消费的 topic 中数据的数量。如果 LAG 全部为 0，则代表当前 Kafka 中的数据全部同步到 DolphinDB 中，如果 LAG 值很多都大于 0，且很大，则表明当前数据同步延迟很高。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:59;366:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:14;366:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第三步：查看 Kafka 的中数据。&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:60;368:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;当发生 Oracle 中的数据和同步到 DolphinDB 数据发生不一致时， 首先需要判断是数据传递到 Kafka 中出现了转换错误，还是数据从 Kafka 传递到 DolphinDB 时发生了转换错误，那么就需要对 Kafka 中的数据进行检查。Kafka 中存储的数据是已序列化的二进制存储，需要使用 avro 调用 Schema Registry 中的表结构信息并进行反序列化。这里我们提供了 tpconsumer.sh 脚本，可以获取反序列化后的 Kafka 中的真实数据，并匹配上该条数据对应的表结构，用于核查 Kafka 中的数据是否正确。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:27;370:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;./tpconsumer.sh --op=2 --topic=mysqlserver.basicinfo.index_components --offset=1 --max-messages=2&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:61;374:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;上图中 --offset 参数表示从第多少条数据开始, --max-messages 参数表示展示多少条数据。&lt;/p&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:19;377:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:29;377:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;图3-11 tpconsumer.sh 脚本解析 Kafka 中数据&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/3_11.png&#34; xtrc=&#34;image:19;377:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;1862&#34; dita-ot:image-height=&#34;425&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:62;380:2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:24;380:2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;tpconsumer.sh&lt;/i&gt; 脚本使用时的参数，在不传递参数时会输出参数说明。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;4-表结构同步调整相关操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:11;384:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:30;384:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;4. 表结构同步调整相关操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:11;384:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:63;386:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;本节介绍了如何进行单表数据修复，以及当部分表结构调整等同步运维操作。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;41-单表数据修复&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:12;388:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:31;388:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;4.1 单表数据修复&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:12;388:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:64;390:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;当发生某张表数据因意外情况数据不一致时，我们可以对这张表进行单独的数据修复，操作步骤如下。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:65;392:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:15;392:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第一步&lt;/b&gt;：停止要修复数据表在 Oracle 中的数据写入，并确认该表的 Kafka 中数据都已经同步到 DolphinDB 中。可以通过第 3节中 **检查当前同步各表的数据同步状态 **部分内容的方法进行判断。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:66;394:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:16;394:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第二步&lt;/b&gt;：暂停同步任务。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:67;396:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;可以直接停止 Kafka-Connect 程序来停止全部同步任务。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:28;398:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;sudo systemctl stop kafka-connect&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:68;402:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;也可以通过以下脚本停止同步任务&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:29;404:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;./rest.sh showall&lt;/codeblock&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:20;409:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:32;409:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;图4-1 查看当前同步任务&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/4_1.png&#34; xtrc=&#34;image:20;409:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;1053&#34; dita-ot:image-height=&#34;202&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:69;412:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;暂停同步任务 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:25;412:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;oraclenew&lt;/i&gt; 。由下面图中可见同步任务 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:26;412:33&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;oraclenew&lt;/i&gt; 的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:27;412:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;connector&lt;/i&gt; 和 worker 都已变成停止状态。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:70;414:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;后续可以使用 c_resume 参数进行恢复。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:30;416:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt; ./rest.sh c_pause oraclenew&lt;/codeblock&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:21;421:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:33;421:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;图4-2 暂停同步任务&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/4_2.png&#34; xtrc=&#34;image:21;421:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;1048&#34; dita-ot:image-height=&#34;323&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:71;424:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:17;424:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第三步&lt;/b&gt;：删除该表对应的 Kafka 中的 *topic，*可以使用以下命令进行。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:31;426:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;./kafka.sh tp_delete oracle_service.SCHEMA.TABLENAME&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:72;430:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:18;430:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第四步&lt;/b&gt;：此时执行这张表的全量数据同步，可以使用 DataX 工具将 Oracle 中这张表的数据一次性同步到 DolphinDB 中。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:73;432:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:19;432:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第五步&lt;/b&gt;：恢复同步任务，并检查同步任务的状态。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:32;434:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;sudo systemctl start kafka-connect&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:74;438:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;如果是单独停止同步任务，可以使用以下命令进行恢复。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:33;440:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;./rest.sh c_resume oraclenew&lt;/codeblock&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:22;445:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:34;445:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;图4-3 恢复暂停的同步任务&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/4_3.png&#34; xtrc=&#34;image:22;445:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;1045&#34; dita-ot:image-height=&#34;334&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:75;448:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:20;448:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第六步&lt;/b&gt;：此时 Oracle 的这张表可以数据写入，后续的增量数据会继续实时同步到 DolphinDB 中。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;42-表结构变更&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:13;450:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:35;450:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;4.2 表结构变更&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:13;450:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:76;452:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;当必须进行表结构变更时，可以结合上一小节中的单表修复的方式来进行操作。具体操作步骤如下。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:77;454:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:21;454:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第一步&lt;/b&gt;：停止要修复数据表在 Oracle 中的数据写入，并确保表结构变更之前，这张表的变更数据已被消费完毕。任何情况的表结构变更都可以使用单表全量同步修复的方式完成变更。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:78;456:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:22;456:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第二步&lt;/b&gt;：暂停同步任务，详细操作参见 4.1 小节。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:79;458:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:23;458:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第三步&lt;/b&gt;：删除该表对应的 kafka topic。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:34;460:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;./kafka.sh tp_delete oracle_service.SCHEMA.TABLENAME&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:80;464:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:24;464:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第四步&lt;/b&gt;：在 Oracle 中执行对目标表的表结构变更操作。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:81;466:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:25;466:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第五步&lt;/b&gt;：DolphinDB 对应表drop后重建，注意进行对应表结构更改。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:82;468:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:26;468:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第六步&lt;/b&gt;：使用 DataX 进行该表的全量数据同步。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:83;470:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:27;470:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第七步&lt;/b&gt;：恢复同步任务，并确认同步任务状态。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:84;472:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:28;472:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第八步&lt;/b&gt;：此时可以恢复对该表的数据写入。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;43-单独对表添加字段&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:14;474:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:36;474:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;4.3 单独对表添加字段&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:14;474:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:85;476:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;由于大表全量同步花费时间高，在某些情况下也可以通过直接同步更改 DolphinDB 表结构的方式完成变更。&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:29;476:54&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;目前只支持在表末尾增加一列&lt;/b&gt;，且该表不可包含 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:28;476:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;dummySortKey__&lt;/i&gt; 列。操作步骤如下：&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:86;478:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:30;478:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第一步&lt;/b&gt;：停止要修复数据表在 Oracle 中的数据写入，并确保表结构变更之前，这张表的变更数据已被消费完毕。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:87;480:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:31;480:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第二步&lt;/b&gt;：暂停同步任务。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:88;482:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:32;482:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第三步&lt;/b&gt;：在 Oracle 和 DolphinDB 的中添加新增字段。新增字段必须时当前表的最后一个字段切不能调整字段顺序。在Oracle 中添加字段时，该字段不能设置默认值。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:89;484:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:33;484:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第四步&lt;/b&gt;：恢复同步任务，并确认同步任务状态。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:90;486:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:34;486:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第五步&lt;/b&gt;：此时可以恢复对该表的数据写入。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;44-增加一张同步表&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:15;488:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:37;488:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;4.4 增加一张同步表&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:15;488:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:91;490:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;当需要额外增加一张 Oracle 中的数据表，并进行数据同步时，可以按如下步骤进行操作。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:92;492:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:35;492:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第一步&lt;/b&gt;：在 Oracle 中为 Logminer 用户增加该表的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:29;492:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;SELECT&lt;/i&gt; 和 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:30;492:49&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;FLASHBACK&lt;/i&gt; 权限。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:35;494:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;GRANT SELECT ON schema.tablename to debezium; GRANT FLASHBACK ON schema.tablename to debezium;&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:93;499:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;如果给用户赋权时赋了所有表的 *SELECT *和 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:31;499:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;FLASHBACK&lt;/i&gt; 权限，则跳过。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:94;501:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:36;501:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第二步&lt;/b&gt;：为该表设置全字段补充日志。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:36;503:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;alter table schema.tablename add supplemental log data (all) columns;&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:95;507:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;如果设置的是数据库级别的全字段补充日志，则跳过（推荐按表设置，数据层级设置最小权限）。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:96;509:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:37;509:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第三步&lt;/b&gt;：在 DolphinDB 中创建表，并配置同步配置表。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:5;511:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:11;511:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;根据 Oracle 表结构创建 DolphinDB 中的对应表，设置 sortColumns，确认是否需要增加dummySortKey__。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:12;512:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;在 DolphinDB Sink 任务中参数 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:32;512:26&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;ddbsync.config.table&lt;/i&gt; 所指定的 DolphinDB 配置表内增加一行该表的配置信息。&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:97;514:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:38;514:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第四步&lt;/b&gt;：使用 DataX 从 Oracle 全量同步该表数据到 DolphinDB。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:98;516:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:39;516:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第五步&lt;/b&gt;：修改 Oracle Source 任务配置。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:6;518:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:13;518:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;修改原有配置文件，在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:33;518:14&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;table.include.list&lt;/i&gt; 配置项中增加该表。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:14;519:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;将原来配置文件复制一份，只保留 *config *中的内容，其余均删除。&lt;/li&gt;&lt;/ul&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:37;521:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;cp /KFDATA/datasyn_config/source-oracle.json /KFDATA/datasyn_config/source-oracle-alter.json&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:99;525:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;修改 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:34;525:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;/KFDATA/datasyn_config/source-oracle-alter.json&lt;/i&gt; ,在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:35;525:57&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;table.include.list&lt;/i&gt; 参数中添加要同步的新表。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:100;527:2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;格式示例：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:38;529:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;{ &#34;connector.class&#34; : &#34;io.debezium.connector.oracle.OracleConnector&#34;, &#34;tasks.max&#34; : &#34;1&#34;, &#34;topic.prefix&#34; : &#34;oracle_service&#34;, &#34;table.include.list&#34; : &#34;debezium.deltest,debezium.bigtb,debezium.doubletest&#34;, ... }&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:101;539:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;该修改是对 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:36;539:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;config&lt;/i&gt; 内容的完全替换，因此不能只设置修改项，需要提供完整的配置。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:7;541:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:15;541:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;修改Oracle 的 source 同步任务&lt;/li&gt;&lt;/ul&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:39;543:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;./rest.sh c_alter oracle-connector /KFDATA/datasyn_config/source-oracle-alter.json&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:102;547:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;其中 oracle-connector 为设置的 Oracle Source 任务的中的 connector 的名称。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:103;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:40;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;第六步&lt;/b&gt;：修改 DolphinDB Sink 任务配置&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:8;551:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:16;551:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;修改原有配置文件，在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:37;551:14&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;topic&lt;/i&gt; 配置项中增加该表对应的 topic 名称。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:17;552:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;将原来配置文件复制一份，只保留 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:38;552:19&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;config&lt;/i&gt; 中的内容，其余均删除。&lt;/li&gt;&lt;/ul&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:40;554:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;cp /KFDATA/datasyn_config/ddb-sink.json /KFDATA/datasyn_config/ddb-sink-alter.json&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:104;558:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;修改 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:1;558:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;/KFDATA/datasyn_config/ddb-sink-alter.json&lt;/codeph&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:105;560:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;格式示例：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:41;562:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;{ &#34;connector.class&#34;: &#34;io.confluent.connect.jdbc.JdbcSinkConnector&#34;, &#34;tasks.max&#34;: &#34;4&#34;, &#34;topics&#34;: &#34;oracle_service.SCHEMA.TABLE1,oracle_service.SCHEMA.TABLE2&#34;, ... }&lt;/codeblock&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:9;571:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:18;571:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;修改 DolphinDB 的 sink 同步任务&lt;/li&gt;&lt;/ul&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:42;573:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;./rest.sh c_alter ddb-sink /KFDATA/datasyn_config/ddb-sink-alter.json&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:106;577:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;其中 ddb-sink 为设置的 DolphinDB Sink 任务的 connector 的名称&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:107;579:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;以上配置修改完毕后，新表的实时增量数据会自动同步到 DolphinDB 的对应表中。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;45-重新消费-kafka-中数据&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:16;581:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:38;581:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;4.5 重新消费 Kafka 中数据&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:16;581:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:108;583:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;为了方便运维人员排查问题，有时候需要同步程序重新消费某个 Kafka Topic 中的数据。为此，我们需要重置 Kafka 中记录的对该 Topic 的消费进度。该操作主要包含以下步骤：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:10;585:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:19;585:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;停止 Kafka Connect&lt;/li&gt;&lt;/ul&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:43;587:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;sudo systemctl stop kafka-connect&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:109;591:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;这一步是为了确保没有活跃的消费者订阅该 Topic。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:11;593:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:20;593:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;重置 Kafka 中消费进度到某个 offset&lt;/li&gt;&lt;/ul&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:44;595:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;cd /KFDATA/kafka-tools/bin ./kafka.sh cm_reset_offsets connect-ddb-sink oracle_service.DEBEZIUM.TESTTB 0&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:110;600:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;示例中的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:39;600:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;connect-ddb-sink&lt;/i&gt; 为消费者名称，&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:40;600:32&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;oracle_service.DEBEZIUM.TESTTB&lt;/i&gt; 为目标 Kafka 中的 topic 的名称，0 表示设置为从头开始消费，0 可以替换成数字。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:12;602:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:21;602:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;重新启动 Kafka Connect&lt;/li&gt;&lt;/ul&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:45;604:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;sudo systemctl start kafka-connect&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:111;608:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;重启后，同步程序会自动从该 offset 的位置开始消费。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;46-不产生数据变更日志的特殊情况&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:17;610:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:39;610:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;4.6 不产生数据变更日志的特殊情况&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:17;610:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:112;612:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;当前数据同步程序机制上依赖于数据库产生数据改变日志，对于 DDL 更改带来的数据变更，因为并不会产生数据改变日志，所以 DDL 更改带来的数据更改无法捕获到，这种情况下会影响数据的一致性。下面列了已知的两种情况：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:13;614:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:22;614:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:41;614:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;更改数据类型导致数据改变&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:113;616:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;例如 Oracle 中的 CHAR 类型，当 Oracle从 CHAR(5) 变更到 CHAR(6) 类型时，原来字符串长度为 5 的数据会被自动填充到长度为 6，填充的部分为空格。该数据变更属于 DDL 变更，无法自动同步。解决方法是做 4.1 节中的单表修复，整表重新拉取一遍数据。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:14;618:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:23;618:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:42;618:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;新增列并设置默认值&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:114;620:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;4.3 小节中提到，如果需要在 Oracle 表末尾添加一列的这种情况，DolphinDB 可以同步做添加列操作来完成表结构的变更。此时如果 Oracle 在增加列时设置了该列的默认值，该操作属于 DDL 操作，DolphinDB 变更表结构后同步无法该列的默认值，需要手动设置 DolphinDB 中该列的默认值。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;5-oracle-和-dolphindb-的数据校验&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:18;624:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:40;624:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;5. Oracle 和 DolphinDB 的数据校验&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:18;624:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:115;626:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;为了检查实时同步的两边表是否一致，需要进行数据校验。本节提供了数据校验工具，并介绍如何使用。目前数据校验工具仅支持 Oracle 和 DolphinDB 的数据校验。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:116;628:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;数据校验工具包 oracle_ddb_datacompare.zip 下载地址详见附件。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:117;630:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;数据校验工具主要包含三个部分：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:1;632:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:24;632:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;行数校验：行数校验可以快速比较 Oracle 和 DolphinDB 对应表的行数是否相等。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:25;633:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;整表数据校验：整表数据校验通过计算 MD5 值来校验整张表的数据是否完全一致。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:26;634:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;错误定位：错误定位用于当整表数据校验未通过时，具体定位是哪一行的数据不一致。&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:118;636:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;目前数据校验工具暂不包含表结构校验，能正确进行数据校验的前提是表结构必须一致，尤其列名必须保持一致，可不区分大小写。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;51-数据校验中的数据转换&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:19;638:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:41;638:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;5.1 数据校验中的数据转换&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:19;638:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:119;640:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;数据校验的基础是相同的数据行可以用相同的字符串表示出来，Oracle 数据类型到 DolphinDB 会有一些数据转换行为。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:15;642:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:27;642:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:43;642:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;时间类型处理&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:120;644:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;Oracle 的时间类型和 DolphinDB 不能完全对应。比如 Oracle 中常用的 DATE 类型实际精度在秒级，DolphinDB 中的 DATE 类型精度在日期，且不包含任何时间信息。Oracle 中使用了 DATE 类型的表示某种日期含义的列，存储的数据也只有日期，如果 DolphinDB 中明确只需要日期数据，则也可以选择存储类型为 DATE 类型。对应的在数据校验时我们容忍了这种精度不同，当 Oracle 数据是 2024-01-01 00:00:00，我们认为这和 DolphinDB 中存储的 2024.01.01 是一致的，校验通过。但如果 Oracle 中的数据是 2024-01-01 12:00:00，而在 DolphinDB 使用了 DATE 类型，DolphinDB 中接收到的同步数据会变成 2024.01.01，这种情况我们的校验结果是这两者数据不一致，校验不通过。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:16;646:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:28;646:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:44;646:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;浮点数处理&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:121;648:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;Oracle 常用的是 NUMBER 类型，存储的是十进制的精确值，实际应该对应 DolphinDB 的 DECIMAL 类型。但考虑到在 DolphinDB 中 DOUBLE 类型非常常用，并且 DOUBLE 类型在计算速度方面对 DECIMAL 类型有一定优势，因此我们也支持了 Oracle NUMBER 类型和 DolphinDB DOUBLE 类型的校验。精确的十进制数转浮点数一定会发生精度丢失，两者值实际是不相等的，四舍五入进行比较也不能保证完全校验正确。为了可以正常校验，当 DolphinDB 的类型是 DOUBLE 时，我们将 NUMBER 类型转换为双精度浮点数，并取 Oracle 和 DolphinDB 两边浮点数的十六进制值作为字符串进行比较。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:17;650:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:29;650:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:45;650:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;数据类型对照表&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:1;652:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;2&#34; xtrc=&#34;tgroup:1;652:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:1;652:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:2;652:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:1;652:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:1;652:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:1;652:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:46;652:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;Oracle 数据类型&lt;/b&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:2;652:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:47;652:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;DolphinDB 数据类型&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:1;654:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:2;654:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:3;654:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;DATE, TIMESTAMP(N)&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:4;654:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;DATE, TIMESTAMP&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:3;655:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:5;655:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;NUMBER&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:6;655:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;INT, LONG, DOUBLE, DECIMAL&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:4;656:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:7;656:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;CHAR(N)，VARCHAR(N)&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:8;656:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;STRING, SYMBOL&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:122;658:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;表5-1 数据类型对照表&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;52-整表数据校验&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:20;660:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:42;660:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:48;660:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;5.2 整表数据校验&lt;/b&gt;&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:20;660:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:18;662:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:30;662:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;数据校验程序原理 ​&lt;/li&gt;&lt;/ul&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:23;665:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:43;665:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;图5-1 数据校验 md5 计算逻辑&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/5_1.png&#34; xtrc=&#34;image:23;665:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;3052&#34; dita-ot:image-height=&#34;1236&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:123;668:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;数据校验的原理是将各类型数据按相同规则转换为字符串，根据字符串计算得到 MD5 值，两边数据库只比较MD5 值即可判断数据是否一致。由于字符串长度限制等因素，我们以行为单位计算 MD5 值，并将每行的 MD5 值进行相加再得到最终的校验值。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:124;670:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;理论上，数据校验正确无法 100% 保证数据完全一致，但实际中，数据校验计算的 md5值 一致而数据不一致的情况极为罕见，因此数据校验的结果具有较高可信度。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:19;672:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:31;672:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;数据校验程序用法&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:125;674:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;数据校验程序对应的 Python 程序为 datacompare.py，执行 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:2;674:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;python datacompare.py config.json&lt;/codeph&gt; 即可进行数据校验。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:126;676:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;配置 JSON 文件示例：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:46;678:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;{ &#34;config&#34;: { &#34;oracle_host&#34;: &#34;183.134.101.144&#34;, &#34;oracle_port&#34;: 1521, &#34;oracle_dbname&#34;: &#34;dbname&#34;, &#34;oracle_user&#34;: &#34;username&#34;, &#34;oracle_password&#34;: &#34;password&#34;, &#34;oracle_table_list&#34;: &#34;schema.tb1,schema.tb2&#34;, &#34;ddb_host&#34;: &#34;183.134.101.144&#34;, &#34;ddb_port&#34;: 8848, &#34;ddb_user&#34;: &#34;username&#34;, &#34;ddb_password&#34;: &#34;password&#34;, &#34;ddb_table_list&#34;: &#34;dfs://db.tb1,dfs://db.tb2&#34; &#34;use_config_table&#34;: true, &#34;config_table&#34;: &#34;dfs://ddb_sync_config.sync_config&#34;, &#34;worker_num&#34;: 4, &#34;oracle_parallel&#34;: 8 } }&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:127;700:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;配置文件的各个参数说明：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:2;702:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;2&#34; xtrc=&#34;tgroup:2;702:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:3;702:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:4;702:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:2;702:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:5;702:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:9;702:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:49;702:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;参数名&lt;/b&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:10;702:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:50;702:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;参数含义&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:2;704:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:6;704:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:11;704:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;oracle_host&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:12;704:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;Oracle 数据库的 IP 地址。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:7;705:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:13;705:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;oracle_port&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:14;705:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;Oracle 数据库的端口。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:8;706:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:15;706:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;oracle_dbname&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:16;706:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;连接 Oracle 数据库的库名。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:9;707:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:17;707:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;oracle_user&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:18;707:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;连接 DolphinDB 数据库的用户名。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:10;708:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:19;708:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;oracle_password&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:20;708:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;连接 DolphinDB 数据库的用户名密码。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:11;709:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:21;709:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;oracle_table_list&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:22;709:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;Oracle 数据库需要校验的表名列表。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:12;710:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:23;710:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;ddb_host&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:24;710:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;DolphinDB 数据库的 IP 地址。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:13;711:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:25;711:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;ddb_port&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:26;711:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;DolphinDB 数据库的端口。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:14;712:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:27;712:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;ddb_user&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:28;712:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;连接 DolphinDB 数据库的用户名。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:15;713:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:29;713:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;ddb_password&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:30;713:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;连接 DolphinDB 数据库的用户名密码。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:16;714:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:31;714:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;ddb_table_list&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:32;714:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;DolphinDB 数据库需要校验的表名列表，需和 oracle_table_list 参数中的表顺序保持一致。如果指定了 use_config_table = true，无需再填写该参数。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:17;715:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:33;715:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;use_config_table&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:34;715:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;是否使用配置表，默认值为 false。配置表存储了实时同步配置信息，该配置项设置为 true 时，程序会直接根据配置表来设置 Oracle 表到 DolphinDB 表之间的映射。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:18;716:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:35;716:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;config_table&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:36;716:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;配置表表名。格式为库名.表名。例如dfs://ddb_sync_config.sync_config。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:19;717:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:37;717:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;worker_num&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:38;717:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;工作进程数，默认值为1。设置值大于1时，程序将使用 Python 多进程模块并行发起多个查询请求。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:20;718:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:39;718:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;oracle_parallel&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:40;718:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;Oracle 并发数，默认不开启并发。设置后，程序将在 Oracle 查询语句中添加 parallel 关键字来触发并行查询。&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:128;720:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;表5-2 配置参数介绍表&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;53-错误定位&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:21;722:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:44;722:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:51;722:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;5.3 错误定位&lt;/b&gt;&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:21;722:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:20;724:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:32;724:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;错误定位程序原理&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:129;726:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;错误定位程序根据 Oracle 设定的主键划分数据，每次计算 M 行数据的 MD5 值。如果 Oracle 和 DolphinDB 两边的 MD5 值相同，则计算下一个 M 行数据。否则，取 M 行数据中的前 N 行数据计算 MD5 值，如果两边校验相同则计算下一批数据，否则将取出该 N 行数据的具体值进行逐行比较，即可找到错误数据。在程序中 M 值设定为 100000，N 值设定为 5000，该设定值可以高效的进行错误定位。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:21;728:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:33;728:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;错误定位程序用法&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:130;730:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;与整表数据校验不同，错误定位目前只支持单表，参数设置与整表数据校验的参数基本一致。如果设置了多个表，错误定位只会对第一个表生效。错误定位程序仅会找出第一条错误数据并返回，不会继续往下查找。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:131;732:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;错误定位程序对应的 python 程序为 errorlocation.py，执行 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:3;732:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;python errorlocation.py config.json&lt;/codeph&gt; 即可进行错误定位。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;54-数据校验示例&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:22;734:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:45;734:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;5.4 数据校验示例&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:22;734:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:132;736:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;Oracle 建表脚本：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:47;738:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;CREATE TABLE DEBEZIUM.SYNC_TB ( SYNC_ID INTEGER NOT NULL, SYNC_DT DATE NOT NULL, SYNC_VAL1 NUMBER(10, 4) NOT NULL, SYNC_VAL2 NUMBER(10, 4) NOT NULL, SYNC_STR VARCHAR(20) NOT NULL ); ALTER TABLE DEBEZIUM.SYNC_TB ADD PRIMARY KEY (SYNC_ID, SYNC_DT);&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:133;751:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;在 Oracle 表中插入一些数据：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:48;753:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;INSERT INTO DEBEZIUM.SYNC_TB SELECT LEVEL, TO_DATE('2020-01-01', 'YYYY-MM-DD') + LEVEL - 1, ROUND(LEVEL * 0.1234, 4), ROUND(LEVEL * 1.1111, 4), 'a' || LEVEL FROM DUAL CONNECT BY LEVEL &amp;lt;= 1000;&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:134;760:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;DolphinDB 建表脚本：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:49;762:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;tbName = &#34;sync_tb&#34; dbName = &#34;dfs://sync_db&#34; colNames = [&#34;SYNC_ID&#34;, &#34;SYNC_DT&#34;, &#34;SYNC_VAL1&#34;, &#34;SYNC_VAL2&#34;, &#34;SYNC_STR&#34;] colTypes = [INT, DATE, DOUBLE, DECIMAL64(4), STRING] t = table(1:0, colNames, colTypes) db = database(dbName, HASH, [INT, 1], engine=&#34;TSDB&#34;) db.createTable(t, tbName, sortColumns=`SYNC_ID`SYNC_DT, keepDuplicates=LAST)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:135;772:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;在 DolphinDB 表中插入相同的数据，这一步也可以通过实时同步来做。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:50;774:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;ids = 1..1000 days = 2020.01.01 + ids - 1 val1 = round(ids * 0.1234, 4) val2 = round(1..1000 * decimal64(&#34;1.1111&#34;, 4), 4) str1 = &#34;a&#34; + 1..1000$STRING t = table(ids, days, val1, val2, str1) loadTable(&#34;dfs://sync_db&#34;, &#34;sync_tb&#34;).append!(t)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:136;784:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;新建数据校验任务配置：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:51;786:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;vim config.json&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:137;790:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;编辑配置文件，其中 IP、用户名需修改。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:52;792:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;{ &#34;config&#34;: { &#34;oracle_host&#34;: &#34;183.134.101.144&#34;, &#34;oracle_port&#34;: 1521, &#34;oracle_dbname&#34;: &#34;dbname&#34;, &#34;oracle_user&#34;: &#34;username&#34;, &#34;oracle_password&#34;: &#34;password&#34;, &#34;oracle_table_list&#34;: &#34;debezium.sync_tb&#34;, &#34;ddb_host&#34;: &#34;183.134.101.144&#34;, &#34;ddb_port&#34;: 8848, &#34;ddb_user&#34;: &#34;username&#34;, &#34;ddb_password&#34;: &#34;password&#34;, &#34;ddb_table_list&#34;: &#34;dfs://sync_db.sync_tb&#34;, &#34;use_config_table&#34;: false, &#34;worker_num&#34;: 4, &#34;oracle_parallel&#34;: 8, &#34;float_mode&#34;: &#34;hex&#34; } }&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:138;814:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;可以先执行行数校验查看是否一致：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:53;816:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;python rowscheck.py config.json&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:139;820:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;任务输出如下，这表明两张表的行数一致。&lt;/p&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:24;823:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:46;823:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;图5-2 数据比对行数一致&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/5_2.png&#34; xtrc=&#34;image:24;823:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;736&#34; dita-ot:image-height=&#34;33&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:140;826:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;再执行整表数据校验任务：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:54;828:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;python datacompare.py config.json&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:141;832:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;任务输出如下，这表明两张表数据一致。&lt;/p&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:25;835:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:47;835:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;图5-3 数据比对行数一致&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/5_3.png&#34; xtrc=&#34;image:25;835:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;578&#34; dita-ot:image-height=&#34;52&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:142;838:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;修改 Oracle 中的一条数据，使得两张表数据不一致：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:55;840:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;UPDATE DEBEZIUM.SYNC_TB SET SYNC_VAL1 = '9.999' WHERE SYNC_DT = TO_DATE('2020-01-31', 'YYYY-MM-DD')&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:143;844:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;再执行一次校验任务：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:56;846:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;python datacompare.py config.json&lt;/codeblock&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:26;851:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:48;851:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;图5-4 数据比对不一致&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/5_4.png&#34; xtrc=&#34;image:26;851:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;710&#34; dita-ot:image-height=&#34;84&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:144;854:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;此时，我们需使用错误定位程序来定位具体不一致的数据行。错误定位的配置文件和数据校验基本一致，区别在于错误定位一次只能定位一张表。这里我们可以复用同样的配置文件进行错误定位。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:57;856:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;python errorlocation.py config.json&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:145;860:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;任务输出如下所示，最后一行的输出表明主键值 sync_id 为 31，sync_dt 为 2020-01-31 所在数据行不一致，后面的 oracle value 和 ddb value 是数据行经过一定规则转换后的字符串。可以利用该主键查找两边数据，对比不一致的地方。&lt;/p&gt;&lt;fig class=&#34;- topic/fig &#34; xtrc=&#34;fig:27;863:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:49;863:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;图5-5 数据比对定位不一致数据行&lt;/title&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/5_5.png&#34; xtrc=&#34;image:27;863:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34; dita-ot:image-width=&#34;731&#34; dita-ot:image-height=&#34;220&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/fig&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:146;866:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;在校验耗时较长的大表时，推荐使用后台运行的方式执行。校验结果可以从日志文件中查看，在&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:41;866:43&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;oracle_ddb_datacompare/logs/&lt;/i&gt; 目录下。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;6-附录&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:23;870:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:50;870:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;6. 附录&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:23;870:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:147;872:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;tar&#34; href=&#34;script/debezium_kafka_real_time_synchronization_of_oracle_11g_data/kafka-tools.tar&#34; xtrc=&#34;xref:2;872:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;?ditaot usertext?&gt;运维工具包 kafka-tools&lt;/xref&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:148;875:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;zip&#34; href=&#34;script/debezium_kafka_real_time_synchronization_of_oracle_11g_data/oracle_ddb_datacompare.zip&#34; xtrc=&#34;xref:3;875:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md&#34;&gt;&lt;?ditaot usertext?&gt;数据校验工具包&lt;/xref&gt;&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;"/><meta name="wh-source-relpath" content="tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.md"/><meta name="wh-out-relpath" content="tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.html"/>

    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/commons.css?buildId=2024012323"/>
    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic.css?buildId=2024012323"/>

    <script src="../oxygen-webhelp/app/options/properties.js?buildId=20250305183303"></script>
    <script src="../oxygen-webhelp/app/localization/strings.js?buildId=2024012323"></script>
    <script src="../oxygen-webhelp/app/search/index/keywords.js?buildId=20250305183303"></script>
    <script defer="defer" src="../oxygen-webhelp/app/commons.js?buildId=2024012323"></script>
    <script defer="defer" src="../oxygen-webhelp/app/topic.js?buildId=2024012323"></script>
<link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/styles.css?buildId=2024012323"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script></head>

    <body id="debezium--kafka-实时同步-oracle-11g-数据到-dolphindb-运维手册" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            跳转到主要内容
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div xmlns:whc="http://www.oxygenxml.com/webhelp/components" class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="https://docs.dolphindb.cn/zh/index.html" class=" wh_logo d-none d-sm-block "><img src="../logo.png" alt="  DolphinDB 文档中心  "/></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="booktitle">  <span class="ph mainbooktitle">DolphinDB 文档中心</span>  </span></a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="搜索 " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="搜索查询" required="required"/><button type="submit" class="wh_search_button" aria-label="搜索"><span class="search_input_text">搜索</span></button></div></form>
            
            <script src="/vendors/react/umd/react.production.min.js" defer="defer"></script>
<script src="/vendors/react-dom/umd/react-dom.production.min.js" defer="defer"></script>
<script src="/vendors/dayjs/dayjs.min.js" defer="defer"></script>
<script src="/vendors/antd/dist/antd.min.js" defer="defer"></script>
<script src="/vendors/@ant-design/icons/dist/index.umd.min.js" defer="defer"></script>
<script src="/zh/index.js" type="module"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" defer="defer"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer="defer"><!--


--></script>
<script defer="defer"><!--

// 从主页重定向
const currentUrl = window.location.href;

// 判断当前URL是否包含index.html并且路径最后部分是index.html
if (currentUrl.endsWith('index.html')) {
    // 处理根目录下的index.html跳转
    const baseUrl = currentUrl.split('/index.html')[0]; // 获取index.html之前的部分
    const redirectUrl = `${baseUrl}/about/ddb_intro.html`; // 构建跳转路径
    window.location.href = redirectUrl; // 执行跳转
}

--></script>
            
        </div></div>
    </div>
</header>
        
        
         
        
        
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="../index.html"><span>主页</span></a></span></li><li><div class="topicref" data-id="about_tutorials"><div class="title"><a href="../tutorials/about_tutorials.html"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div></li><li><div class="topicref"><div class="title"><a href="../tutorials/scheduledJob_2.html">系统运维</a></div></div></li><li class="active"><div class="topicref" data-id="debezium--kafka-实时同步-oracle-11g-数据到-dolphindb-运维手册"><div class="title"><a href="../tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.html">Debezium + Kafka 实时同步 Oracle 11g 数据到 DolphinDB 运维手册</a></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="切换搜索突出显示" title="切换搜索突出显示"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="折叠截面" title="折叠截面"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="打印此页" aria-label="打印此页"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem"><div data-tocid="ddb_intro-d9713e87" class="topicref" data-id="ddb_intro" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../about/ddb_intro.html" id="ddb_intro-d9713e87-link">关于DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="chap1_getstarted-d9713e136" class="topicref" data-id="chap1_getstarted" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../getstarted/chap1_getstarted.html" id="chap1_getstarted-d9713e136-link">快速上手</a><div class="wh-tooltip"><p class="shortdesc">如何快速部署 DolphinDB、建库建表、写入和查询数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="sectionddb_deployment-d9713e189" class="topicref" data-id="sectionddb_deployment" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action sectionddb_deployment-d9713e189-link" class="wh-expand-btn"></span><div class="title"><a href="../deploy/deploy_intro.html" id="sectionddb_deployment-d9713e189-link"><span class="keyword label">部署</span></a><div class="wh-tooltip"><p class="shortdesc">如何在不同的场景中部署 DolphinDB</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259" class="topicref" data-id="new_chap_database_manage_new_chap_dbmanage_landing_page" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/cfg/db_intro.html" id="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link"><span class="keyword label">数据库</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 数据库的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_streaming-d9713e3760" class="topicref" data-id="chap7_tutorials_streaming" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_streaming-d9713e3760-link" class="wh-expand-btn"></span><div class="title"><a href="../stream/str_intro.html" id="chap7_tutorials_streaming-d9713e3760-link"><span class="keyword label">流数据</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 流数据引擎及流数据计算的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e7513" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e7513-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/db_oper/import_data.html" id="tocId-d9713e7513-link">数据迁移</a><div class="wh-tooltip"><p class="shortdesc">如何从不同数据源向 DolphinDB 迁移数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_system_management-d9713e7940" class="topicref" data-id="chap7_tutorials_system_management" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_system_management-d9713e7940-link" class="wh-expand-btn"></span><div class="title"><a href="../sys_man/om_intro.html" id="chap7_tutorials_system_management-d9713e7940-link"><span class="keyword label">系统运维</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 的系统运维功能及方法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="troubleshooting-d9713e8780" class="topicref" data-id="troubleshooting" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action troubleshooting-d9713e8780-link" class="wh-expand-btn"></span><div class="title"><a href="../error_codes/troubleshooting.html" id="troubleshooting-d9713e8780-link">故障排查</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="about_language_resources-d9713e20911" class="topicref" data-id="about_language_resources" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action about_language_resources-d9713e20911-link" class="wh-expand-btn"></span><div class="title"><a href="../progr/progr_intro.html" id="about_language_resources-d9713e20911-link"><span class="keyword label">编程语言</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 编程基本概念与方法、SQL 在 DolphinDB 的应用</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="functions_references-d9713e30925" class="topicref" data-id="functions_references" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action functions_references-d9713e30925-link" class="wh-expand-btn"></span><div class="title"><a href="../funcs/funcs_intro.html" id="functions_references-d9713e30925-link"><span class="keyword label">函数参考</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 函数分类、语法、详解及示例</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="api_protocol-d9713e94064" class="topicref" data-id="api_protocol" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action api_protocol-d9713e94064-link" class="wh-expand-btn"></span><div class="title"><a href="../api/connapi_intro.html" id="api_protocol-d9713e94064-link"><span class="keyword label">连接器 &amp; API</span></a><div class="wh-tooltip"><p class="shortdesc">面向不同编程语言的 DolphinDB API 及连接器，相关协议和用法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap6_plugin-d9713e94210" class="topicref" data-id="chap6_plugin" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap6_plugin-d9713e94210-link" class="wh-expand-btn"></span><div class="title"><a href="../plugins/plg_intro.html" id="chap6_plugin-d9713e94210-link"><span class="keyword label">插件</span></a><div class="wh-tooltip"><p class="shortdesc">多个应用场景的插件使用说明和插件开发指导</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="third_party-d9713e97904" class="topicref" data-id="third_party" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action third_party-d9713e97904-link" class="wh-expand-btn"></span><div class="title"><a href="../third_party.html" id="third_party-d9713e97904-link">第三方工具</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="about_tutorials-d9713e98227" class="topicref" data-id="about_tutorials" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action about_tutorials-d9713e98227-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/about_tutorials.html" id="about_tutorials-d9713e98227-link"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98280" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98280-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/new_users_finance.html" id="tocId-d9713e98280-link">新用户入门</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98327" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98327-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/database.html" id="tocId-d9713e98327-link">数据库</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e99111" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e99111-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/std_sql_ddb.html" id="tocId-d9713e99111-link">编程</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100448" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100448-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming-real-time-correlation-processing_2.html" id="tocId-d9713e100448-link">流数据</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="tocId-d9713e100955" class="topicref" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action tocId-d9713e100955-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/scheduledJob_2.html" id="tocId-d9713e100955-link">系统运维</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="定时作业-d9713e100956" class="topicref" data-id="定时作业" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/scheduledJob_2.html" id="定时作业-d9713e100956-link">定时作业</a></div></div></li><li role="treeitem"><div data-tocid="作业管理-d9713e101002" class="topicref" data-id="作业管理" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/job_management_tutorial_2.html" id="作业管理-d9713e101002-link">作业管理</a></div></div></li><li role="treeitem"><div data-tocid="用户权限管理-d9713e101048" class="topicref" data-id="用户权限管理" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/ACL_and_Security_2.html" id="用户权限管理-d9713e101048-link">用户权限管理</a></div></div></li><li role="treeitem"><div data-tocid="数据备份以及恢复-130202008及之后版本-d9713e101094" class="topicref" data-id="数据备份以及恢复-130202008及之后版本" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/backup-restore-new.html" id="数据备份以及恢复-130202008及之后版本-d9713e101094-link">数据备份以及恢复 （1.30.20/2.00.8及之后版本）</a></div></div></li><li role="treeitem"><div data-tocid="数据备份以及恢复-130202008以前版本-d9713e101140" class="topicref" data-id="数据备份以及恢复-130202008以前版本" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/backup_restore_before_208.html" id="数据备份以及恢复-130202008以前版本-d9713e101140-link">数据备份以及恢复 （1.30.20/2.00.8以前版本）</a></div></div></li><li role="treeitem"><div data-tocid="数据再平衡-d9713e101186" class="topicref" data-id="数据再平衡" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Data_Move_Rebalance.html" id="数据再平衡-d9713e101186-link">数据再平衡</a></div></div></li><li role="treeitem"><div data-tocid="集群间数据库同步-d9713e101232" class="topicref" data-id="集群间数据库同步" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/data_sync_among_clusters.html" id="集群间数据库同步-d9713e101232-link">集群间数据库同步</a></div></div></li><li role="treeitem"><div data-tocid="集群间异步复制-d9713e101278" class="topicref" data-id="集群间异步复制" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/async_replication.html" id="集群间异步复制-d9713e101278-link">集群间异步复制</a></div></div></li><li role="treeitem"><div data-tocid="数据导入最容易忽略的十个细节-d9713e101324" class="topicref" data-id="数据导入最容易忽略的十个细节" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/data_import_details.html" id="数据导入最容易忽略的十个细节-d9713e101324-link">数据导入最容易忽略的十个细节</a></div></div></li><li role="treeitem"><div data-tocid="线程模型-d9713e101370" class="topicref" data-id="线程模型" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/threading_model.html" id="线程模型-d9713e101370-link">线程模型</a></div></div></li><li role="treeitem"><div data-tocid="线程简介-d9713e101416" class="topicref" data-id="线程简介" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/thread_intro_2.html" id="线程简介-d9713e101416-link">线程简介</a></div></div></li><li role="treeitem"><div data-tocid="内存管理-d9713e101463" class="topicref" data-id="内存管理" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/memory_management.html" id="内存管理-d9713e101463-link">内存管理</a></div></div></li><li role="treeitem"><div data-tocid="out-of-memory-d9713e101509" class="topicref" data-id="out-of-memory" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/oom_settlement_2.html" id="out-of-memory-d9713e101509-link">Out of Memory</a></div></div></li><li role="treeitem"><div data-tocid="非标权限管理-d9713e101555" class="topicref" data-id="非标权限管理" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/non-standard_permission_management.html" id="非标权限管理-d9713e101555-link">非标权限管理</a></div></div></li><li role="treeitem"><div data-tocid="节点启动流程简析与常见问题-d9713e101601" class="topicref" data-id="节点启动流程简析与常见问题" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/node_startup_process_and_questions.html" id="节点启动流程简析与常见问题-d9713e101601-link">节点启动流程简析与常见问题</a></div></div></li><li role="treeitem"><div data-tocid="用户级别的资源跟踪详解-d9713e101647" class="topicref" data-id="用户级别的资源跟踪详解" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/user_level_resource_tracking.html" id="用户级别的资源跟踪详解-d9713e101647-link">用户级别的资源跟踪详解</a></div></div></li><li role="treeitem"><div data-tocid="使用-prometheus-监控告警-d9713e101693" class="topicref" data-id="使用-prometheus-监控告警" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/promethues2.html" id="使用-prometheus-监控告警-d9713e101693-link">使用 Prometheus 监控告警</a></div></div></li><li role="treeitem"><div data-tocid="redash-连接-dolphindb-数据源-d9713e101739" class="topicref" data-id="redash-连接-dolphindb-数据源" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/data_interface_for_redash.html" id="redash-连接-dolphindb-数据源-d9713e101739-link">Redash 连接 DolphinDB 数据源</a></div></div></li><li role="treeitem"><div data-tocid="使用-chart-组件展示数据-d9713e101785" class="topicref" data-id="使用-chart-组件展示数据" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/web_chart_integration.html" id="使用-chart-组件展示数据-d9713e101785-link">使用 chart 组件展示数据</a></div></div></li><li role="treeitem" class="active"><div data-tocid="debezium--kafka-实时同步-oracle-11g-数据到-dolphindb-运维手册-d9713e101831" class="topicref" data-id="debezium--kafka-实时同步-oracle-11g-数据到-dolphindb-运维手册" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.html" id="debezium--kafka-实时同步-oracle-11g-数据到-dolphindb-运维手册-d9713e101831-link">Debezium + Kafka 实时同步 Oracle 11g 数据到 DolphinDB 运维手册</a></div></div></li><li role="treeitem"><div data-tocid="基于_zabbix_的_dolphindb_集群运维监控-d9713e101877" class="topicref" data-id="基于_zabbix_的_dolphindb_集群运维监控" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/zabbix_cluster_monitoring.html" id="基于_zabbix_的_dolphindb_集群运维监控-d9713e101877-link">基于 Zabbix 的 DolphinDB 集群运维监控</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="模块概述-d9713e101923" class="topicref" data-id="模块概述" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action 模块概述-d9713e101923-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/tu_modules.html" id="模块概述-d9713e101923-link">模块</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e102568" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e102568-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/OHLC_2.html" id="tocId-d9713e102568-link">金融场景案例</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e104827" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e104827-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_engine_anomaly_alerts_2.html" id="tocId-d9713e104827-link">物联网场景案例</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105795" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105795-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/dolphindb_tensor_libtorch_tutorial.html" id="tocId-d9713e105795-link">机器学习</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105842" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105842-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/api_performance.html" id="tocId-d9713e105842-link">测试报告</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105982" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105982-link" class="wh-expand-btn"></span><div class="title"><a href="../rn/server/3_00_2.html" id="tocId-d9713e105982-link">版本说明</a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 版本发布历史</p></div></div></div></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-7 col-md-9 col-sm-12" id="wh_topic_body">
                        <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        <button id="wh_close_topic_toc_button" class="close-toc-button d-none" aria-label="Toggle topic table of content" aria-controls="wh_topic_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        <div class=" wh_topic_content body "><main role="main"><article class="- topic/topic topic" role="article" aria-labelledby="ariaid-title1"><h1 class="- topic/title title topictitle1" id="ariaid-title1">Debezium + Kafka 实时同步 Oracle 11g 数据到 DolphinDB 运维手册</h1><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">教程难度</strong></p><ul class="- topic/ul ul"><li class="- topic/li li">高级</li></ul><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">面向读者</strong></p><ul class="- topic/ul ul"><li class="- topic/li li">已经掌握：<a class="- topic/xref xref" href="Debezium_Kafka_Oracle_sync.html">Debezium+Kafka 实时同步 Oracle 11g 数据到 DolphinDB</a></li><li class="- topic/li li">本教程提供了操作步骤，掌握了上面内容的读者可以跟随教程内容进行运维操作</li></ul><p class="- topic/p p">基于开源技术 Debezium + Kafka 实时同步数据到 DolphinDB 中，我们目前已经支持了 Mysql 和 Oracle 11g。由于当前方案涉及到四个程序的部署，而且具体的 Source 同步任务和 Sink 同步任务还需要额外的管理，在运维上具有一定难度。本篇中基于 Oracle 11g 实时同步数据到 DolphinDB 的场景进行运维操作的介绍。</p></div><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title2" id="1-数据同步运维工具包准备"><h2 class="- topic/title title topictitle2" id="ariaid-title2">1. 数据同步运维工具包准备</h2><div class="- topic/body body"><p class="- topic/p p">本同步方案包含对 Kafka 操作命令、通过 REST API 对 Kafka-Connect 的操作，这些操作命令涉及的参数比较多，但有些参数比如 Kafka 的访问 IP、端口等当操作环境固定之后，都是固定的参数。因此为了提高操作数据同步程序的便捷性，封装了一些运维操作脚本到 kafka-tools 工具包中。</p></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title3" id="11-安装和配置"><h3 class="- topic/title title topictitle3" id="ariaid-title3">1.1 安装和配置</h3><div class="- topic/body body"><p class="- topic/p p">下载地址请参见附录。</p><p class="- topic/p p">将 <em class="+ topic/ph hi-d/i ph i">kafka-tools.tar</em> 包解压缩，本例中解压到 <em class="+ topic/ph hi-d/i ph i">/KFDATA</em> 路径下。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code> tar -xvf kafka-tools.tar</code></pre><p class="- topic/p p">按当前环境配置 kafka-tools 工具包的配置文件。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>vim /KFDATA/kafka-tools/config.properties</code></pre><p class="- topic/p p">配置项配置如下</p><p class="- topic/p p">kafka-tools 中提供了 3 个脚本，每个脚本不带参数执行时可以输出使用说明。</p><p class="- topic/p p">kafka.sh : 封装了一些对 Kafka 的操作脚本，如创建、查看 topic 明细，查看指定 topic 当前 offsets 等。</p><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 1</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title"> 图1-1 kafka.sh 脚本函数列表</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/1_1.png"/><br/></figure><p class="- topic/p p">rest.s : 封装了通过 REST API 访问 Kafka-Connect 进行同步任务配置、检查等操作。</p><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 2</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title"> 图1-2 rest.sh 脚本函数列表</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/1_2.png"/><br/></figure><p class="- topic/p p">tpconsumer : 用于查看 topic 中数据的脚本，对 Kafka 中的序列化数据，加载 Schema Registry 中的表元数据数据进行反序列化解析。</p><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 3</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title"> 图1-3 tpconsumer.sh 脚本参数列表</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/1_3.png"/><br/></figure></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title4" id="2-同步程序和同步任务的基础操作"><h2 class="- topic/title title topictitle2" id="ariaid-title4">2. 同步程序和同步任务的基础操作</h2><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意：手册中的所有操作都需要使用 kafka 用户来进行，并默认 kafka 用户拥有 sudo 权限。</strong></p></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title5" id="21-同步程序组件的启动和停止"><h3 class="- topic/title title topictitle3" id="ariaid-title5">2.1 同步程序组件的启动和停止</h3><div class="- topic/body body"><p class="- topic/p p">同步程序组件包括 ZooKeeper、Kafka Server、Schema Registry 和 Kafka-Connect，这些组件在部署教程中已被设置为 Linux 服务，可以通过 Linux 系统命令 <em class="+ topic/ph hi-d/i ph i">systemctl 进行启动</em>。</p><p class="- topic/p p">按如下顺序启动各个组件：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo systemctl start zookeeper
sudo systemctl start kafka-server
sudo systemctl start schema-registry
sudo systemctl start kafka-connect</code></pre><p class="- topic/p p">按如下顺序停止各个组件：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo systemctl stop kafka-connect
sudo systemctl stop schema-registry
sudo systemctl stop kafka-server
sudo systemctl stop zookeeper</code></pre><p class="- topic/p p">如果只暂停同步，则只需要停止 Kafka-Connect 程序。停止 Kafka-Connect 程序后，可以对 Kafka 进行修改 topic 消费进度、删除 topic 等操作：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo systemctl stop kafka-connect</code></pre><p class="- topic/p p">可以通过以下脚本快速查看当前同步程序的四个服务是否在运行状态。如下图所示则同步程序均正常运行。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo systemctl list-units |egrep 'zookeeper|kafka-server|schema-registry|kafka-connect'</code></pre><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 4</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title"> 图2-1 同步程序服务状态展示</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/2_1.png"/><br/></figure></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title6" id="22-同步任务部署操作"><h3 class="- topic/title title topictitle3" id="ariaid-title6">2.2 同步任务部署操作</h3><div class="- topic/body body"><p class="- topic/p p">同步任务是指通过 REST API 向 Kafka-Connect 发起调用，开启从 Oracle11g 到 Kafka 的 source 数据同步和从Kafka 到 DolphinDB 的 sink* *数据同步任务。</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">Oracle 的  source 数据同步操作</strong></p><p class="- topic/p p">创建连接 Oracle 的 source 连接器配置文件如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>mkdir -p /KFDATA/datasyn-config
vim /KFDATA/datasyn-config/source-oracle.json</code></pre><p class="- topic/p p">录入以下配置，<em class="+ topic/ph hi-d/i ph i">hostname</em> 和 <em class="+ topic/ph hi-d/i ph i">kafka</em> 启动地址参数需按实际情况对应修改：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>{
    "name": "oracle-connector",
    "config": {
     "connector.class": "io.debezium.connector.oracle.OracleConnector",
     "tasks.max": "1",
     "topic.prefix": "oracle_service",
     "database.hostname": "183.134.101.144",
     "database.port": 1521,
     "database.user": "debezium",
     "database.password": "123456",
     "database.dbname": "testdb",
     "database.connection.adapter": "logminer",
     "schema.include.list": "debezium",
     "table.include.list": "debezium.index_example,debezium.stock_example",
     "schema.history.internal.kafka.bootstrap.servers": "183.134.101.144:9092",
     "schema.history.internal.kafka.topic": "schema-changes.test",
     "event.processing.failure.handling.mode": "skip",
     "decimal.handling.mode": "string",
     "snapshot.mode": "initial",
     "log.mining.strategy": "online_catalog",
     "log.mining.query.filter.mode": "in",
     "log.mining.continuous.mine": true,
     "heartbeat.interval.ms": "20000",
     "schema.history.internal.store.only.captured.tables.ddl": true,
     "schema.history.internal.store.only.captured.databases.ddl": true
  }
}</code></pre><p class="- topic/p p">通过封装了 REST API 的脚本启动 Oracle 的 source 数据同步任务：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /KFDATA/kafka-tools/bin
 ./rest.sh create /KFDATA/datasyn-config/source-oracle.json</code></pre><p class="- topic/p p">启动成功如下图所示：
​</p><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 5</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title"> 图2-2 source 同步任务启动成功展示</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/2_2.png"/><br/></figure><p class="- topic/p p">对于已启动的数据同步任务，我们可以通过如下命令查看当前同步任务列表：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /KFDATA/kafka-tools/bin 
./rest.sh showall</code></pre><p class="- topic/p p">​</p><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 6</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图2-3 查看当前同步任务列表</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/2_3.jpg"/><br/></figure><p class="- topic/p p">查看  Source 同步任务启动后，Oracle 中配置了数据同步的数据表数据会同步到 Kafka 中的 topic 中。当前 Kafka 中的 topic 列表可以通过如下命令查看：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./kafka.sh tplist</code></pre><p class="- topic/p p">如下图所示 Oracle Source  同步任务创建后，Kafka 中的 topic。
​</p><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 7</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图2-4 查看当前 Kafka 中的 topic</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/2_4.jpg"/><br/></figure><p class="- topic/p p">上图中：</p><ul class="- topic/ul ul"><li class="- topic/li li">下划线开头的 topic 为 Kafka 和同步程序创建的内部 topic。</li><li class="- topic/li li"><em class="+ topic/ph hi-d/i ph i">connect-configs</em>、<em class="+ topic/ph hi-d/i ph i">connnect-offsets</em>、<em class="+ topic/ph hi-d/i ph i">connect-statuses</em> 是 Kafka-connect 程序创建的 topic，用于存储同步云运行的配置、状态、偏移量等信息。</li><li class="- topic/li li">oracle_service 是 Oracle Source 同步任务信息记录 topic。</li><li class="- topic/li li">oracle_service.Debezium 开头的 <em class="+ topic/ph hi-d/i ph i">topic</em> 则是存储表 Oracle 中同步表的数据的 topic。</li><li class="- topic/li li">包含 schema 的字符串的是 schema-registry 存储表元数据及改变的 topic。</li></ul><p class="- topic/p p">​</p></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">DolphinDB 的 sink 数据同步操作</strong></p><p class="- topic/p p">创建 DolphinDB 数据同步任务配置文件：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /KFDATA/datasyn-config 
vim ddb-sink.json</code></pre><p class="- topic/p p">ddb-sink.json 的配置内容如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>{
    "name": "ddb-sink",
    "config": {
        "connector.class": "io.confluent.connect.jdbc.JdbcSinkConnector",
        "tasks.max": "2",
        "topics": "oracle_service.DEBEZIUM.INDEX_EXAMPLE,oracle_service.DEBEZIUM.STOCK_EXAMPLE",
        "connection.url": "jdbc:dolphindb://183.134.101.144:8848?user=admin&amp;password=123456",
        "transforms": "unwrap",
        "transforms.unwrap.type": "io.debezium.transforms.ExtractNewRecordState",
        "transforms.unwrap.drop.tombstones": "false",
        "auto.evolve": "false",
        "insert.mode": "insert",
        "delete.enabled": "true",
        "batch.size":"10000",
        "pk.mode": "record_key",
        "ddbsync.config.table":"dfs://ddb_sync_config,sync_config",
        "ddbsync.addSortColFlag": "true"
    }
}</code></pre><p class="- topic/p p">通过封装了 REST API 的脚本启动 DolphinDB 的 sink 数据同步任务。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /KFDATA/kafka-tools/bin
./rest.sh create /KFDATA/datasyn-config/ddb-sink.json</code></pre><p class="- topic/p p">查看同步任务状态。如下图所示，当前正在运行了 一个 source 同步任务和 一个 sink 同步任务。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./rest.sh showall</code></pre><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 8</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图2-5 当前的 source 和 sink 同步任务展示</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/2_5.png"/><br/></figure></li></ul></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title7" id="3-运维检查"><h2 class="- topic/title title topictitle2" id="ariaid-title7">3. 运维检查</h2><div class="- topic/body body"><p class="- topic/p p">本章将介绍日常运维的一些检查操作。</p></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title8" id="31-检查同步程序运行状态"><h3 class="- topic/title title topictitle3" id="ariaid-title8">3.1 检查同步程序运行状态</h3><div class="- topic/body body"><p class="- topic/p p">同步程序包含 4 个部署程序，通过以下命令检查这个 4 个同步程序是否正常运行状态。如下图则为全部正常寻运行。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo systemctl list-units |egrep 'zookeeper|kafka-server|schema-registry|kafka-connect'</code></pre><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 9</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图3-1 同步程序 4 个服务运行状态列表</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/3_1.png"/><br/></figure></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title9" id="32-同步任务检查及操作"><h3 class="- topic/title title topictitle3" id="ariaid-title9">3.2 同步任务检查及操作</h3><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第一步</strong>：查看当前有哪些同步任务：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./rest.sh list</code></pre><p class="- topic/p p">下图中，可以看到有 2 个同步任务。</p><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 10</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图3-2 查看当前同步任务</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/3_2.png"/><br/></figure><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第二步</strong>：根据同步任务名称查看某个同步任务的状态。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./rest.sh status ddb-sink</code></pre><p class="- topic/p p">每个同步任务包含 1 个 connector 和至少 1 个 task ，如下图所示当前同步任务的 connector 和 task 均为正常运行状态 <em class="+ topic/ph hi-d/i ph i">RUNNING</em>。</p><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 11</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图3-3 查看同步状态明细</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/3_3.png"/><br/></figure><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第三步</strong>：快速查看当前全部同步任务状态。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./rest.sh showall</code></pre><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 12</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图3-4 查看全部同步任务同步状态</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/3_4.jpg"/><br/></figure><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第四步</strong>：暂停同步任务，该操作会停止当前整体 connector 同步任务。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./rest.sh c_pause ddb-sink</code></pre><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 13</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图3-5 暂停 ddb-sink 同步任务</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/3_5.png"/><br/></figure><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第五步</strong>：恢复暂停的同步任务。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./rest.sh c_resume ddb-sink</code></pre><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 14</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图3-6 将 ddb-sink 任务从暂停状态恢复</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/3_6.png"/><br/></figure><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第六步</strong>：恢复同步异常终止的 task。</p><p class="- topic/p p">对于曾经由于数据库连接失败而一度暂停的同步任务的某个 task，在数据库问题消除后，只要 connector 运行正常，可以通过以下命令使其恢复同步：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./rest.sh t_restart ${connector_name} ${task_id}</code></pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title10" id="33-检查数据同步情况"><h3 class="- topic/title title topictitle3" id="ariaid-title10">3.3 检查数据同步情况</h3><div class="- topic/body body"><p class="- topic/p p">本小节内容主要介绍当发现 DolphinDB 与 Oracle 数据不一致时，如何进行调查。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第一步：检查数据同步是否落后 Oracle 实时写入进度过多。</strong></p><p class="- topic/p p">Oracle 的 SCN 是一个递增的序列号，用于标识数据库中所有事务的提交顺序和数据的变更点。可以通过以下命令查看 Oracle 的最新 <em class="+ topic/ph hi-d/i ph i">SCN</em>，即 Oracle 当前的最新事务号。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>select current_scn from v$database;</code></pre><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 15</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图3-7 Oracle 的当前 SCN 序号</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/3_7.png"/><br/></figure><p class="- topic/p p">Kafka-Connect 框架接收到 Oracle 的增量数时，也会获得对应的 <em class="+ topic/ph hi-d/i ph i">SCN</em>，在处理完增量数据后（配置了同步的表数据会写入 Kafka 中的 <em class="+ topic/ph hi-d/i ph i">topic</em>，未配置同步的表的增量数据会被跳过）会将已经处理完的数据的对应 <em class="+ topic/ph hi-d/i ph i">SCN</em> 记录到名字为 <em class="+ topic/ph hi-d/i ph i">connect-offsets</em> 的 <em class="+ topic/ph hi-d/i ph i">topic</em> 中。那么我们通过以下命令可以跟踪当前最新完成同步的增量数据的 <em class="+ topic/ph hi-d/i ph i">SCN</em> 。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./consume.sh --topic connect-offsets --from-beginning|grep oraclenew</code></pre><p class="- topic/p p">上图中代码中的  oraclenew  是source 同步任务的 connector name。已完成同步的增量数据的 <em class="+ topic/ph hi-d/i ph i">SCN</em> 在 commit_scn 上记录。</p><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 16</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图3-8 同步程序在 kafka 的 topic 中记录的 SCN 记录</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/3_8.png"/><br/></figure><p class="- topic/p p">如果 Oracle 中的最新 SCN 和 connect-offsets  topic 中记录的 commit_scn  落差很大，说明 Oracle source 同步任务落后 Oracle 实时写入很多，需要分析原因（例如 Oracle 的 logminer 挖掘比较慢，网络传输慢、Kafka 数据写入慢等）。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第二步：检查当前同步各表的数据同步状态</strong></p><p class="- topic/p p">DolphinDB 的 <em class="+ topic/ph hi-d/i ph i">sink</em> 写入程序通过消费 Kafka 中的数据，并按照 Kafka 中数据的顺序写入 DolphinDB 中。通过查看同步程序对 Kafka 中数据的消费进度可以检查每张同步数据表的同步进度。</p><p class="- topic/p p">首先，查看当前 Kafka 中的消费组列表。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./kafka.sh cm_list</code></pre><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 17</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图3-9 Kafka 中的消费组列表</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/3_9.png"/><br/></figure><p class="- topic/p p">DolphinDB 的 <em class="+ topic/ph hi-d/i ph i">sink</em> 写入任务的 <em class="+ topic/ph hi-d/i ph i">connector name</em> 前面拼接 <em class="+ topic/ph hi-d/i ph i">connect</em> 就是这个同步写入任务的消费组名字，</p><p class="- topic/p p">这里我们只有一个消费组，即我们同步程序使用的消费组。查看这个消费组的 <em class="+ topic/ph hi-d/i ph i">topic</em> 数据消费状态。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./kafka.sh cm_detail connect-ddb-sink-oracle</code></pre><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 18</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图3-10 Kafka 中消费组的消费状态</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/3_10.png"/><br/></figure><p class="- topic/p p">图中的 LOG-END-OFFSET 是对应 Oracle 目标表同步到 Kafka 中的数据条数，CURRENT-OFFSET 当前已经消费执行了对 DolphinDB 进行写入的数据条数。LAG 表示当前未消费的 topic 中数据的数量。如果 LAG 全部为 0，则代表当前 Kafka 中的数据全部同步到 DolphinDB 中，如果 LAG 值很多都大于 0，且很大，则表明当前数据同步延迟很高。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第三步：查看 Kafka 的中数据。</strong></p><p class="- topic/p p">当发生 Oracle 中的数据和同步到 DolphinDB 数据发生不一致时， 首先需要判断是数据传递到 Kafka 中出现了转换错误，还是数据从 Kafka 传递到 DolphinDB 时发生了转换错误，那么就需要对 Kafka 中的数据进行检查。Kafka 中存储的数据是已序列化的二进制存储，需要使用 avro 调用 Schema Registry 中的表结构信息并进行反序列化。这里我们提供了 tpconsumer.sh 脚本，可以获取反序列化后的 Kafka 中的真实数据，并匹配上该条数据对应的表结构，用于核查 Kafka 中的数据是否正确。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./tpconsumer.sh --op=2 --topic=mysqlserver.basicinfo.index_components --offset=1 --max-messages=2</code></pre><p class="- topic/p p">上图中 --offset 参数表示从第多少条数据开始, --max-messages 参数表示展示多少条数据。</p><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 19</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图3-11 tpconsumer.sh 脚本解析 Kafka 中数据</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/3_11.png"/><br/></figure><p class="- topic/p p"><em class="+ topic/ph hi-d/i ph i">tpconsumer.sh</em> 脚本使用时的参数，在不传递参数时会输出参数说明。</p></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title11" id="4-表结构同步调整相关操作"><h2 class="- topic/title title topictitle2" id="ariaid-title11">4. 表结构同步调整相关操作</h2><div class="- topic/body body"><p class="- topic/p p">本节介绍了如何进行单表数据修复，以及当部分表结构调整等同步运维操作。</p></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title12" id="41-单表数据修复"><h3 class="- topic/title title topictitle3" id="ariaid-title12">4.1 单表数据修复</h3><div class="- topic/body body"><p class="- topic/p p">当发生某张表数据因意外情况数据不一致时，我们可以对这张表进行单独的数据修复，操作步骤如下。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第一步</strong>：停止要修复数据表在 Oracle 中的数据写入，并确认该表的 Kafka 中数据都已经同步到 DolphinDB 中。可以通过第 3节中 **检查当前同步各表的数据同步状态 **部分内容的方法进行判断。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第二步</strong>：暂停同步任务。</p><p class="- topic/p p">可以直接停止 Kafka-Connect 程序来停止全部同步任务。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo systemctl stop kafka-connect</code></pre><p class="- topic/p p">也可以通过以下脚本停止同步任务</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./rest.sh showall</code></pre><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 20</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图4-1 查看当前同步任务</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/4_1.png"/><br/></figure><p class="- topic/p p">暂停同步任务 <em class="+ topic/ph hi-d/i ph i">oraclenew</em> 。由下面图中可见同步任务 <em class="+ topic/ph hi-d/i ph i">oraclenew</em> 的 <em class="+ topic/ph hi-d/i ph i">connector</em> 和 worker 都已变成停止状态。</p><p class="- topic/p p">后续可以使用 c_resume 参数进行恢复。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code> ./rest.sh c_pause oraclenew</code></pre><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 21</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图4-2 暂停同步任务</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/4_2.png"/><br/></figure><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第三步</strong>：删除该表对应的 Kafka 中的 *topic，*可以使用以下命令进行。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./kafka.sh tp_delete oracle_service.SCHEMA.TABLENAME</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第四步</strong>：此时执行这张表的全量数据同步，可以使用 DataX 工具将 Oracle 中这张表的数据一次性同步到 DolphinDB 中。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第五步</strong>：恢复同步任务，并检查同步任务的状态。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo systemctl start kafka-connect</code></pre><p class="- topic/p p">如果是单独停止同步任务，可以使用以下命令进行恢复。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./rest.sh c_resume oraclenew</code></pre><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 22</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图4-3 恢复暂停的同步任务</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/4_3.png"/><br/></figure><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第六步</strong>：此时 Oracle 的这张表可以数据写入，后续的增量数据会继续实时同步到 DolphinDB 中。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title13" id="42-表结构变更"><h3 class="- topic/title title topictitle3" id="ariaid-title13">4.2 表结构变更</h3><div class="- topic/body body"><p class="- topic/p p">当必须进行表结构变更时，可以结合上一小节中的单表修复的方式来进行操作。具体操作步骤如下。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第一步</strong>：停止要修复数据表在 Oracle 中的数据写入，并确保表结构变更之前，这张表的变更数据已被消费完毕。任何情况的表结构变更都可以使用单表全量同步修复的方式完成变更。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第二步</strong>：暂停同步任务，详细操作参见 4.1 小节。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第三步</strong>：删除该表对应的 kafka topic。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./kafka.sh tp_delete oracle_service.SCHEMA.TABLENAME</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第四步</strong>：在 Oracle 中执行对目标表的表结构变更操作。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第五步</strong>：DolphinDB 对应表drop后重建，注意进行对应表结构更改。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第六步</strong>：使用 DataX 进行该表的全量数据同步。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第七步</strong>：恢复同步任务，并确认同步任务状态。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第八步</strong>：此时可以恢复对该表的数据写入。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title14" id="43-单独对表添加字段"><h3 class="- topic/title title topictitle3" id="ariaid-title14">4.3 单独对表添加字段</h3><div class="- topic/body body"><p class="- topic/p p">由于大表全量同步花费时间高，在某些情况下也可以通过直接同步更改 DolphinDB 表结构的方式完成变更。<strong class="+ topic/ph hi-d/b ph b">目前只支持在表末尾增加一列</strong>，且该表不可包含 <em class="+ topic/ph hi-d/i ph i">dummySortKey__</em> 列。操作步骤如下：</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第一步</strong>：停止要修复数据表在 Oracle 中的数据写入，并确保表结构变更之前，这张表的变更数据已被消费完毕。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第二步</strong>：暂停同步任务。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第三步</strong>：在 Oracle 和 DolphinDB 的中添加新增字段。新增字段必须时当前表的最后一个字段切不能调整字段顺序。在Oracle 中添加字段时，该字段不能设置默认值。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第四步</strong>：恢复同步任务，并确认同步任务状态。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第五步</strong>：此时可以恢复对该表的数据写入。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title15" id="44-增加一张同步表"><h3 class="- topic/title title topictitle3" id="ariaid-title15">4.4 增加一张同步表</h3><div class="- topic/body body"><p class="- topic/p p">当需要额外增加一张 Oracle 中的数据表，并进行数据同步时，可以按如下步骤进行操作。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第一步</strong>：在 Oracle 中为 Logminer 用户增加该表的 <em class="+ topic/ph hi-d/i ph i">SELECT</em> 和 <em class="+ topic/ph hi-d/i ph i">FLASHBACK</em> 权限。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>GRANT SELECT ON schema.tablename to debezium;
GRANT FLASHBACK ON schema.tablename to debezium;</code></pre><p class="- topic/p p">如果给用户赋权时赋了所有表的 *SELECT *和 <em class="+ topic/ph hi-d/i ph i">FLASHBACK</em> 权限，则跳过。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第二步</strong>：为该表设置全字段补充日志。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>alter table schema.tablename add supplemental log data (all) columns;</code></pre><p class="- topic/p p">如果设置的是数据库级别的全字段补充日志，则跳过（推荐按表设置，数据层级设置最小权限）。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第三步</strong>：在 DolphinDB 中创建表，并配置同步配置表。</p><ul class="- topic/ul ul"><li class="- topic/li li">根据 Oracle 表结构创建 DolphinDB 中的对应表，设置  sortColumns，确认是否需要增加dummySortKey__。</li><li class="- topic/li li">在 DolphinDB Sink 任务中参数 <em class="+ topic/ph hi-d/i ph i">ddbsync.config.table</em> 所指定的 DolphinDB 配置表内增加一行该表的配置信息。</li></ul><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第四步</strong>：使用 DataX 从 Oracle 全量同步该表数据到 DolphinDB。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第五步</strong>：修改 Oracle Source 任务配置。</p><ul class="- topic/ul ul"><li class="- topic/li li">修改原有配置文件，在 <em class="+ topic/ph hi-d/i ph i">table.include.list</em> 配置项中增加该表。</li><li class="- topic/li li">将原来配置文件复制一份，只保留 *config *中的内容，其余均删除。</li></ul><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cp /KFDATA/datasyn_config/source-oracle.json /KFDATA/datasyn_config/source-oracle-alter.json</code></pre><p class="- topic/p p">修改 <em class="+ topic/ph hi-d/i ph i">/KFDATA/datasyn_config/source-oracle-alter.json</em> ,在 <em class="+ topic/ph hi-d/i ph i">table.include.list</em> 参数中添加要同步的新表。</p><p class="- topic/p p">格式示例：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>{
    "connector.class" : "io.debezium.connector.oracle.OracleConnector",
    "tasks.max" : "1",
    "topic.prefix" : "oracle_service",
    "table.include.list" : "debezium.deltest,debezium.bigtb,debezium.doubletest",
    ...
}</code></pre><p class="- topic/p p">该修改是对 <em class="+ topic/ph hi-d/i ph i">config</em> 内容的完全替换，因此不能只设置修改项，需要提供完整的配置。</p><ul class="- topic/ul ul"><li class="- topic/li li">修改Oracle 的 source 同步任务</li></ul><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./rest.sh c_alter oracle-connector /KFDATA/datasyn_config/source-oracle-alter.json</code></pre><p class="- topic/p p">其中 oracle-connector 为设置的 Oracle Source 任务的中的 connector 的名称。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第六步</strong>：修改 DolphinDB Sink 任务配置</p><ul class="- topic/ul ul"><li class="- topic/li li">修改原有配置文件，在 <em class="+ topic/ph hi-d/i ph i">topic</em> 配置项中增加该表对应的 topic 名称。</li><li class="- topic/li li">将原来配置文件复制一份，只保留 <em class="+ topic/ph hi-d/i ph i">config</em> 中的内容，其余均删除。</li></ul><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cp /KFDATA/datasyn_config/ddb-sink.json /KFDATA/datasyn_config/ddb-sink-alter.json</code></pre><p class="- topic/p p">修改 <code class="+ topic/ph pr-d/codeph ph codeph">/KFDATA/datasyn_config/ddb-sink-alter.json</code></p><p class="- topic/p p">格式示例：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>{
    "connector.class": "io.confluent.connect.jdbc.JdbcSinkConnector",
    "tasks.max": "4",
    "topics": "oracle_service.SCHEMA.TABLE1,oracle_service.SCHEMA.TABLE2",
    ...
}</code></pre><ul class="- topic/ul ul"><li class="- topic/li li">修改 DolphinDB 的 sink 同步任务</li></ul><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./rest.sh c_alter ddb-sink /KFDATA/datasyn_config/ddb-sink-alter.json</code></pre><p class="- topic/p p">其中 ddb-sink 为设置的 DolphinDB Sink 任务的 connector 的名称</p><p class="- topic/p p">以上配置修改完毕后，新表的实时增量数据会自动同步到 DolphinDB 的对应表中。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title16" id="45-重新消费-kafka-中数据"><h3 class="- topic/title title topictitle3" id="ariaid-title16">4.5 重新消费 Kafka 中数据</h3><div class="- topic/body body"><p class="- topic/p p">为了方便运维人员排查问题，有时候需要同步程序重新消费某个 Kafka Topic 中的数据。为此，我们需要重置 Kafka 中记录的对该 Topic 的消费进度。该操作主要包含以下步骤：</p><ul class="- topic/ul ul"><li class="- topic/li li">停止 Kafka Connect</li></ul><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo systemctl stop kafka-connect</code></pre><p class="- topic/p p">这一步是为了确保没有活跃的消费者订阅该 Topic。</p><ul class="- topic/ul ul"><li class="- topic/li li">重置 Kafka 中消费进度到某个 offset</li></ul><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /KFDATA/kafka-tools/bin
./kafka.sh cm_reset_offsets connect-ddb-sink oracle_service.DEBEZIUM.TESTTB 0</code></pre><p class="- topic/p p">示例中的 <em class="+ topic/ph hi-d/i ph i">connect-ddb-sink</em> 为消费者名称，<em class="+ topic/ph hi-d/i ph i">oracle_service.DEBEZIUM.TESTTB</em> 为目标 Kafka 中的 topic 的名称，0 表示设置为从头开始消费，0 可以替换成数字。</p><ul class="- topic/ul ul"><li class="- topic/li li">重新启动 Kafka Connect</li></ul><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo systemctl start kafka-connect</code></pre><p class="- topic/p p">重启后，同步程序会自动从该 offset 的位置开始消费。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title17" id="46-不产生数据变更日志的特殊情况"><h3 class="- topic/title title topictitle3" id="ariaid-title17">4.6 不产生数据变更日志的特殊情况</h3><div class="- topic/body body"><p class="- topic/p p">当前数据同步程序机制上依赖于数据库产生数据改变日志，对于 DDL 更改带来的数据变更，因为并不会产生数据改变日志，所以 DDL 更改带来的数据更改无法捕获到，这种情况下会影响数据的一致性。下面列了已知的两种情况：</p><ul class="- topic/ul ul"><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">更改数据类型导致数据改变</strong></li></ul><p class="- topic/p p">例如 Oracle 中的 CHAR 类型，当 Oracle从 CHAR(5) 变更到 CHAR(6) 类型时，原来字符串长度为 5 的数据会被自动填充到长度为 6，填充的部分为空格。该数据变更属于 DDL 变更，无法自动同步。解决方法是做 4.1 节中的单表修复，整表重新拉取一遍数据。</p><ul class="- topic/ul ul"><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">新增列并设置默认值</strong></li></ul><p class="- topic/p p">4.3 小节中提到，如果需要在 Oracle 表末尾添加一列的这种情况，DolphinDB 可以同步做添加列操作来完成表结构的变更。此时如果 Oracle 在增加列时设置了该列的默认值，该操作属于 DDL 操作，DolphinDB 变更表结构后同步无法该列的默认值，需要手动设置 DolphinDB 中该列的默认值。</p></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title18" id="5-oracle-和-dolphindb-的数据校验"><h2 class="- topic/title title topictitle2" id="ariaid-title18">5. Oracle 和 DolphinDB 的数据校验</h2><div class="- topic/body body"><p class="- topic/p p">为了检查实时同步的两边表是否一致，需要进行数据校验。本节提供了数据校验工具，并介绍如何使用。目前数据校验工具仅支持 Oracle 和 DolphinDB 的数据校验。</p><p class="- topic/p p">数据校验工具包 oracle_ddb_datacompare.zip 下载地址详见附件。</p><p class="- topic/p p">数据校验工具主要包含三个部分：</p><ol class="- topic/ol ol"><li class="- topic/li li">行数校验：行数校验可以快速比较 Oracle 和 DolphinDB 对应表的行数是否相等。</li><li class="- topic/li li">整表数据校验：整表数据校验通过计算 MD5 值来校验整张表的数据是否完全一致。</li><li class="- topic/li li">错误定位：错误定位用于当整表数据校验未通过时，具体定位是哪一行的数据不一致。</li></ol><p class="- topic/p p">目前数据校验工具暂不包含表结构校验，能正确进行数据校验的前提是表结构必须一致，尤其列名必须保持一致，可不区分大小写。</p></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title19" id="51-数据校验中的数据转换"><h3 class="- topic/title title topictitle3" id="ariaid-title19">5.1 数据校验中的数据转换</h3><div class="- topic/body body"><p class="- topic/p p">数据校验的基础是相同的数据行可以用相同的字符串表示出来，Oracle 数据类型到 DolphinDB 会有一些数据转换行为。</p><ul class="- topic/ul ul"><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">时间类型处理</strong></li></ul><p class="- topic/p p">Oracle 的时间类型和 DolphinDB 不能完全对应。比如 Oracle 中常用的 DATE 类型实际精度在秒级，DolphinDB 中的 DATE 类型精度在日期，且不包含任何时间信息。Oracle 中使用了 DATE 类型的表示某种日期含义的列，存储的数据也只有日期，如果 DolphinDB 中明确只需要日期数据，则也可以选择存储类型为 DATE 类型。对应的在数据校验时我们容忍了这种精度不同，当 Oracle 数据是 2024-01-01 00:00:00，我们认为这和 DolphinDB 中存储的 2024.01.01 是一致的，校验通过。但如果 Oracle 中的数据是 2024-01-01 12:00:00，而在 DolphinDB 使用了 DATE 类型，DolphinDB 中接收到的同步数据会变成 2024.01.01，这种情况我们的校验结果是这两者数据不一致，校验不通过。</p><ul class="- topic/ul ul"><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">浮点数处理</strong></li></ul><p class="- topic/p p">Oracle 常用的是 NUMBER 类型，存储的是十进制的精确值，实际应该对应 DolphinDB 的 DECIMAL 类型。但考虑到在 DolphinDB 中 DOUBLE 类型非常常用，并且 DOUBLE 类型在计算速度方面对 DECIMAL 类型有一定优势，因此我们也支持了 Oracle NUMBER 类型和 DolphinDB DOUBLE 类型的校验。精确的十进制数转浮点数一定会发生精度丢失，两者值实际是不相等的，四舍五入进行比较也不能保证完全校验正确。为了可以正常校验，当 DolphinDB 的类型是 DOUBLE 时，我们将 NUMBER 类型转换为双精度浮点数，并取 Oracle 和 DolphinDB 两边浮点数的十六进制值作为字符串进行比较。</p><ul class="- topic/ul ul"><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">数据类型对照表</strong></li></ul><div class="table-container"><table class="- topic/table table" data-cols="2"><caption></caption><colgroup><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="51-数据校验中的数据转换__entry__1"><strong class="+ topic/ph hi-d/b ph b">Oracle 数据类型</strong></th><th class="- topic/entry entry colsep-0 rowsep-0" id="51-数据校验中的数据转换__entry__2"><strong class="+ topic/ph hi-d/b ph b">DolphinDB 数据类型</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="51-数据校验中的数据转换__entry__1">DATE, TIMESTAMP(N)</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="51-数据校验中的数据转换__entry__2">DATE, TIMESTAMP</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="51-数据校验中的数据转换__entry__1">NUMBER</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="51-数据校验中的数据转换__entry__2">INT, LONG, DOUBLE, DECIMAL</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="51-数据校验中的数据转换__entry__1">CHAR(N)，VARCHAR(N)</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="51-数据校验中的数据转换__entry__2">STRING, SYMBOL</td></tr></tbody></table></div><p class="- topic/p p">表5-1 数据类型对照表</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title20" id="52-整表数据校验"><h3 class="- topic/title title topictitle3" id="ariaid-title20"><strong class="+ topic/ph hi-d/b ph b">5.2 整表数据校验</strong></h3><div class="- topic/body body"><ul class="- topic/ul ul"><li class="- topic/li li">数据校验程序原理
​</li></ul><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 23</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图5-1 数据校验 md5 计算逻辑</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/5_1.png"/><br/></figure><p class="- topic/p p">数据校验的原理是将各类型数据按相同规则转换为字符串，根据字符串计算得到 MD5 值，两边数据库只比较MD5 值即可判断数据是否一致。由于字符串长度限制等因素，我们以行为单位计算 MD5 值，并将每行的 MD5 值进行相加再得到最终的校验值。</p><p class="- topic/p p">理论上，数据校验正确无法 100% 保证数据完全一致，但实际中，数据校验计算的 md5值 一致而数据不一致的情况极为罕见，因此数据校验的结果具有较高可信度。</p><ul class="- topic/ul ul"><li class="- topic/li li">数据校验程序用法</li></ul><p class="- topic/p p">数据校验程序对应的 Python 程序为 datacompare.py，执行 <code class="+ topic/ph pr-d/codeph ph codeph">python datacompare.py config.json</code> 即可进行数据校验。</p><p class="- topic/p p">配置 JSON 文件示例：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>{
    "config": {
        "oracle_host": "183.134.101.144",
        "oracle_port": 1521,
        "oracle_dbname": "dbname",
        "oracle_user": "username",
        "oracle_password": "password",
        "oracle_table_list": "schema.tb1,schema.tb2",
        "ddb_host": "183.134.101.144",
        "ddb_port": 8848,
        "ddb_user": "username",
        "ddb_password": "password",
        "ddb_table_list": "dfs://db.tb1,dfs://db.tb2"
        "use_config_table": true,
        "config_table": "dfs://ddb_sync_config.sync_config",
        "worker_num": 4,
        "oracle_parallel": 8
    }
}</code></pre><p class="- topic/p p">配置文件的各个参数说明：</p><div class="table-container"><table class="- topic/table table" data-cols="2"><caption></caption><colgroup><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="52-整表数据校验__entry__1"><strong class="+ topic/ph hi-d/b ph b">参数名</strong></th><th class="- topic/entry entry colsep-0 rowsep-0" id="52-整表数据校验__entry__2"><strong class="+ topic/ph hi-d/b ph b">参数含义</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__1">oracle_host</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__2">Oracle 数据库的 IP 地址。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__1">oracle_port</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__2">Oracle 数据库的端口。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__1">oracle_dbname</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__2">连接 Oracle 数据库的库名。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__1">oracle_user</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__2">连接 DolphinDB 数据库的用户名。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__1">oracle_password</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__2">连接 DolphinDB 数据库的用户名密码。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__1">oracle_table_list</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__2">Oracle 数据库需要校验的表名列表。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__1">ddb_host</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__2">DolphinDB 数据库的 IP 地址。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__1">ddb_port</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__2">DolphinDB 数据库的端口。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__1">ddb_user</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__2">连接 DolphinDB 数据库的用户名。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__1">ddb_password</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__2">连接 DolphinDB 数据库的用户名密码。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__1">ddb_table_list</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__2">DolphinDB 数据库需要校验的表名列表，需和 oracle_table_list 参数中的表顺序保持一致。如果指定了 use_config_table = true，无需再填写该参数。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__1">use_config_table</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__2">是否使用配置表，默认值为 false。配置表存储了实时同步配置信息，该配置项设置为 true 时，程序会直接根据配置表来设置 Oracle 表到 DolphinDB 表之间的映射。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__1">config_table</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__2">配置表表名。格式为库名.表名。例如dfs://ddb_sync_config.sync_config。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__1">worker_num</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__2">工作进程数，默认值为1。设置值大于1时，程序将使用 Python 多进程模块并行发起多个查询请求。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__1">oracle_parallel</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="52-整表数据校验__entry__2">Oracle 并发数，默认不开启并发。设置后，程序将在 Oracle 查询语句中添加 parallel 关键字来触发并行查询。</td></tr></tbody></table></div><p class="- topic/p p">表5-2 配置参数介绍表</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title21" id="53-错误定位"><h3 class="- topic/title title topictitle3" id="ariaid-title21"><strong class="+ topic/ph hi-d/b ph b">5.3 错误定位</strong></h3><div class="- topic/body body"><ul class="- topic/ul ul"><li class="- topic/li li">错误定位程序原理</li></ul><p class="- topic/p p">错误定位程序根据 Oracle 设定的主键划分数据，每次计算 M 行数据的 MD5 值。如果 Oracle 和 DolphinDB 两边的 MD5 值相同，则计算下一个 M 行数据。否则，取 M 行数据中的前 N 行数据计算 MD5 值，如果两边校验相同则计算下一批数据，否则将取出该 N 行数据的具体值进行逐行比较，即可找到错误数据。在程序中 M 值设定为 100000，N 值设定为 5000，该设定值可以高效的进行错误定位。</p><ul class="- topic/ul ul"><li class="- topic/li li">错误定位程序用法</li></ul><p class="- topic/p p">与整表数据校验不同，错误定位目前只支持单表，参数设置与整表数据校验的参数基本一致。如果设置了多个表，错误定位只会对第一个表生效。错误定位程序仅会找出第一条错误数据并返回，不会继续往下查找。</p><p class="- topic/p p">错误定位程序对应的 python 程序为 errorlocation.py，执行 <code class="+ topic/ph pr-d/codeph ph codeph">python errorlocation.py config.json</code> 即可进行错误定位。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title22" id="54-数据校验示例"><h3 class="- topic/title title topictitle3" id="ariaid-title22">5.4 数据校验示例</h3><div class="- topic/body body"><p class="- topic/p p">Oracle 建表脚本：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>CREATE TABLE DEBEZIUM.SYNC_TB
(
  SYNC_ID INTEGER NOT NULL,
  SYNC_DT DATE NOT NULL,
  SYNC_VAL1 NUMBER(10, 4) NOT NULL,
  SYNC_VAL2 NUMBER(10, 4) NOT NULL,
  SYNC_STR VARCHAR(20) NOT NULL
);

ALTER TABLE DEBEZIUM.SYNC_TB ADD PRIMARY KEY (SYNC_ID, SYNC_DT);</code></pre><p class="- topic/p p">在 Oracle 表中插入一些数据：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>INSERT INTO DEBEZIUM.SYNC_TB
SELECT LEVEL, TO_DATE('2020-01-01', 'YYYY-MM-DD') + LEVEL - 1, ROUND(LEVEL * 0.1234, 4), ROUND(LEVEL * 1.1111, 4), 'a' || LEVEL
FROM DUAL
CONNECT BY LEVEL &lt;= 1000;</code></pre><p class="- topic/p p">DolphinDB 建表脚本：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>tbName = "sync_tb"
dbName = "dfs://sync_db"
colNames = ["SYNC_ID", "SYNC_DT", "SYNC_VAL1", "SYNC_VAL2", "SYNC_STR"]
colTypes = [INT, DATE, DOUBLE, DECIMAL64(4), STRING]
t = table(1:0, colNames, colTypes)
db = database(dbName, HASH, [INT, 1], engine="TSDB")
db.createTable(t, tbName, sortColumns=`SYNC_ID`SYNC_DT, keepDuplicates=LAST)</code></pre><p class="- topic/p p">在 DolphinDB 表中插入相同的数据，这一步也可以通过实时同步来做。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>ids = 1..1000
days = 2020.01.01 + ids - 1
val1 = round(ids * 0.1234, 4)
val2 = round(1..1000 * decimal64("1.1111", 4), 4)
str1 = "a" + 1..1000$STRING
t = table(ids, days, val1, val2, str1)
loadTable("dfs://sync_db", "sync_tb").append!(t)</code></pre><p class="- topic/p p">新建数据校验任务配置：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>vim config.json</code></pre><p class="- topic/p p">编辑配置文件，其中 IP、用户名需修改。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>{
    "config": {
        "oracle_host": "183.134.101.144",
        "oracle_port": 1521,
        "oracle_dbname": "dbname",
        "oracle_user": "username",
        "oracle_password": "password",
        "oracle_table_list": "debezium.sync_tb",
        "ddb_host": "183.134.101.144",
        "ddb_port": 8848,
        "ddb_user": "username",
        "ddb_password": "password",
        "ddb_table_list": "dfs://sync_db.sync_tb",
        "use_config_table": false,
        "worker_num": 4,
        "oracle_parallel": 8,
        "float_mode": "hex"
    }
}</code></pre><p class="- topic/p p">可以先执行行数校验查看是否一致：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>python rowscheck.py config.json</code></pre><p class="- topic/p p">任务输出如下，这表明两张表的行数一致。</p><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 24</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图5-2 数据比对行数一致</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/5_2.png"/><br/></figure><p class="- topic/p p">再执行整表数据校验任务：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>python datacompare.py config.json</code></pre><p class="- topic/p p">任务输出如下，这表明两张表数据一致。</p><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 25</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图5-3 数据比对行数一致</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/5_3.png"/><br/></figure><p class="- topic/p p">修改 Oracle 中的一条数据，使得两张表数据不一致：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>UPDATE DEBEZIUM.SYNC_TB SET SYNC_VAL1 = '9.999' WHERE SYNC_DT = TO_DATE('2020-01-31', 'YYYY-MM-DD')</code></pre><p class="- topic/p p">再执行一次校验任务：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>python datacompare.py config.json</code></pre><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 26</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图5-4 数据比对不一致</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/5_4.png"/><br/></figure><p class="- topic/p p">此时，我们需使用错误定位程序来定位具体不一致的数据行。错误定位的配置文件和数据校验基本一致，区别在于错误定位一次只能定位一张表。这里我们可以复用同样的配置文件进行错误定位。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>python errorlocation.py config.json</code></pre><p class="- topic/p p">任务输出如下所示，最后一行的输出表明主键值 sync_id 为 31，sync_dt 为 2020-01-31 所在数据行不一致，后面的 oracle value 和 ddb value 是数据行经过一定规则转换后的字符串。可以利用该主键查找两边数据，对比不一致的地方。</p><figure class="- topic/fig fig fignone"><figcaption data-caption-side="top" class="- topic/title title figcap"><span class="figtitleprefix fig--title-label">图<span class="fig--title-label-number"> 27</span><span class="fig--title-label-punctuation">. </span></span><span class="fig--title">图5-5 数据比对定位不一致数据行</span></figcaption><img class="- topic/image image" src="images/debezium_kafka_real_time_synchronization_of_oracle_11g_data/5_5.png"/><br/></figure><p class="- topic/p p">在校验耗时较长的大表时，推荐使用后台运行的方式执行。校验结果可以从日志文件中查看，在<em class="+ topic/ph hi-d/i ph i">oracle_ddb_datacompare/logs/</em> 目录下。</p></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title23" id="6-附录"><h2 class="- topic/title title topictitle2" id="ariaid-title23">6. 附录</h2><div class="- topic/body body"><p class="- topic/p p"><a class="- topic/xref xref" href="script/debezium_kafka_real_time_synchronization_of_oracle_11g_data/kafka-tools.tar">运维工具包 kafka-tools</a></p><p class="- topic/p p"><a class="- topic/xref xref" href="script/debezium_kafka_real_time_synchronization_of_oracle_11g_data/oracle_ddb_datacompare.zip">数据校验工具包</a></p></div></article></article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" aria-label="On this page" class="col-lg-2 d-none d-lg-block navbar d-print-none"> 
                            <div id="wh_topic_toc_content">
		                        
	                            <div class=" wh_topic_toc "><div class="wh_topic_label">在本页上</div><ul><li class="topic-item"><a href="#1-%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E8%BF%90%E7%BB%B4%E5%B7%A5%E5%85%B7%E5%8C%85%E5%87%86%E5%A4%87" data-tocid="1-数据同步运维工具包准备">1. 数据同步运维工具包准备</a><ul><li class="topic-item"><a href="#11-%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE" data-tocid="11-安装和配置">1.1 安装和配置</a></li></ul></li><li class="topic-item"><a href="#2-%E5%90%8C%E6%AD%A5%E7%A8%8B%E5%BA%8F%E5%92%8C%E5%90%8C%E6%AD%A5%E4%BB%BB%E5%8A%A1%E7%9A%84%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C" data-tocid="2-同步程序和同步任务的基础操作">2. 同步程序和同步任务的基础操作</a><ul><li class="topic-item"><a href="#21-%E5%90%8C%E6%AD%A5%E7%A8%8B%E5%BA%8F%E7%BB%84%E4%BB%B6%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E5%81%9C%E6%AD%A2" data-tocid="21-同步程序组件的启动和停止">2.1 同步程序组件的启动和停止</a></li><li class="topic-item"><a href="#22-%E5%90%8C%E6%AD%A5%E4%BB%BB%E5%8A%A1%E9%83%A8%E7%BD%B2%E6%93%8D%E4%BD%9C" data-tocid="22-同步任务部署操作">2.2 同步任务部署操作</a></li></ul></li><li class="topic-item"><a href="#3-%E8%BF%90%E7%BB%B4%E6%A3%80%E6%9F%A5" data-tocid="3-运维检查">3. 运维检查</a><ul><li class="topic-item"><a href="#31-%E6%A3%80%E6%9F%A5%E5%90%8C%E6%AD%A5%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E7%8A%B6%E6%80%81" data-tocid="31-检查同步程序运行状态">3.1 检查同步程序运行状态</a></li><li class="topic-item"><a href="#32-%E5%90%8C%E6%AD%A5%E4%BB%BB%E5%8A%A1%E6%A3%80%E6%9F%A5%E5%8F%8A%E6%93%8D%E4%BD%9C" data-tocid="32-同步任务检查及操作">3.2 同步任务检查及操作</a></li><li class="topic-item"><a href="#33-%E6%A3%80%E6%9F%A5%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E6%83%85%E5%86%B5" data-tocid="33-检查数据同步情况">3.3 检查数据同步情况</a></li></ul></li><li class="topic-item"><a href="#4-%E8%A1%A8%E7%BB%93%E6%9E%84%E5%90%8C%E6%AD%A5%E8%B0%83%E6%95%B4%E7%9B%B8%E5%85%B3%E6%93%8D%E4%BD%9C" data-tocid="4-表结构同步调整相关操作">4. 表结构同步调整相关操作</a><ul><li class="topic-item"><a href="#41-%E5%8D%95%E8%A1%A8%E6%95%B0%E6%8D%AE%E4%BF%AE%E5%A4%8D" data-tocid="41-单表数据修复">4.1 单表数据修复</a></li><li class="topic-item"><a href="#42-%E8%A1%A8%E7%BB%93%E6%9E%84%E5%8F%98%E6%9B%B4" data-tocid="42-表结构变更">4.2 表结构变更</a></li><li class="topic-item"><a href="#43-%E5%8D%95%E7%8B%AC%E5%AF%B9%E8%A1%A8%E6%B7%BB%E5%8A%A0%E5%AD%97%E6%AE%B5" data-tocid="43-单独对表添加字段">4.3 单独对表添加字段</a></li><li class="topic-item"><a href="#44-%E5%A2%9E%E5%8A%A0%E4%B8%80%E5%BC%A0%E5%90%8C%E6%AD%A5%E8%A1%A8" data-tocid="44-增加一张同步表">4.4 增加一张同步表</a></li><li class="topic-item"><a href="#45-%E9%87%8D%E6%96%B0%E6%B6%88%E8%B4%B9-kafka-%E4%B8%AD%E6%95%B0%E6%8D%AE" data-tocid="45-重新消费-kafka-中数据">4.5 重新消费 Kafka 中数据</a></li><li class="topic-item"><a href="#46-%E4%B8%8D%E4%BA%A7%E7%94%9F%E6%95%B0%E6%8D%AE%E5%8F%98%E6%9B%B4%E6%97%A5%E5%BF%97%E7%9A%84%E7%89%B9%E6%AE%8A%E6%83%85%E5%86%B5" data-tocid="46-不产生数据变更日志的特殊情况">4.6 不产生数据变更日志的特殊情况</a></li></ul></li><li class="topic-item"><a href="#5-oracle-%E5%92%8C-dolphindb-%E7%9A%84%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C" data-tocid="5-oracle-和-dolphindb-的数据校验">5. Oracle 和 DolphinDB 的数据校验</a><ul><li class="topic-item"><a href="#51-%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E8%BD%AC%E6%8D%A2" data-tocid="51-数据校验中的数据转换">5.1 数据校验中的数据转换</a></li><li class="topic-item"><a href="#52-%E6%95%B4%E8%A1%A8%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C" data-tocid="52-整表数据校验"><strong class="+ topic/ph hi-d/b ph b">5.2 整表数据校验</strong></a></li><li class="topic-item"><a href="#53-%E9%94%99%E8%AF%AF%E5%AE%9A%E4%BD%8D" data-tocid="53-错误定位"><strong class="+ topic/ph hi-d/b ph b">5.3 错误定位</strong></a></li><li class="topic-item"><a href="#54-%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C%E7%A4%BA%E4%BE%8B" data-tocid="54-数据校验示例">5.4 数据校验示例</a></li></ul></li><li class="topic-item"><a href="#6-%E9%99%84%E5%BD%95" data-tocid="6-附录">6. 附录</a></li></ul></div>
	                        	
                        	</div>
                        </nav>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
<title>Copyright</title><p><b> ©2025 浙江智臾科技有限公司 浙ICP备18048711号-3</b></p>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
    </body>
</html>