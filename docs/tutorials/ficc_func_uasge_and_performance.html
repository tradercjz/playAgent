<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" data-whc_version="26.0">
    <head><link rel="shortcut icon" href="../favicon.ico"/><link rel="icon" href="../favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="FICC 业务是金融行业中一个重要的业务板块，通常涉及以下几个核心领域： 固定收益业务 （Fixed Income）：包括债券的发行和交易，如企业债、公司债、金融债等，以及相关的衍生品交易。 外汇业务 （Currency）：涉及货币的交易和对冲，包括即期和远期外汇交易、外汇掉期等。 大宗商品业务 （Commodities）：涉及能源、金属、农产品等大宗商品的交易和风险管理。 FICC ..."/><meta name="DC.rights.owner" content="(C) 版权 2025"/><meta name="copyright" content="(C) 版权 2025"/><meta name="generator" content="DITA-OT"/><meta name="DC.type" content="topic"/><meta name="DC.coverage" content=""/><meta name="DC.relation" content="../tutorials/about_tutorials.html"/><meta name="prodname" content="DolphinDB"/><meta name="brand" content="DolphinDB"/><meta name="DC.creator" content="DolphinDB"/><meta name="DC.publisher" content="DDB N/A DDB 200"/><meta name="DC.format" content="HTML5"/><meta name="DC.identifier" content="ficc_func_uasge_and_performance"/><title>FICC 固收系列函数使用示例及性能</title><!--  Generated with Oxygen version 26.0, build number 2024012323.  --><meta name="wh-path2root" content="../"/><meta name="wh-toc-id" content="ficc_func_uasge_and_performance-d9713e104550"/><meta name="wh-source-relpath" content="tutorials/ficc_func_uasge_and_performance.dita"/><meta name="wh-out-relpath" content="tutorials/ficc_func_uasge_and_performance.html"/>

    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/commons.css?buildId=2024012323"/>
    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic.css?buildId=2024012323"/>

    <script src="../oxygen-webhelp/app/options/properties.js?buildId=20250305183303"></script>
    <script src="../oxygen-webhelp/app/localization/strings.js?buildId=2024012323"></script>
    <script src="../oxygen-webhelp/app/search/index/keywords.js?buildId=20250305183303"></script>
    <script defer="defer" src="../oxygen-webhelp/app/commons.js?buildId=2024012323"></script>
    <script defer="defer" src="../oxygen-webhelp/app/topic.js?buildId=2024012323"></script>
<link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/styles.css?buildId=2024012323"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script></head>

    <body id="ficc_func_uasge_and_performance" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            跳转到主要内容
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div xmlns:whc="http://www.oxygenxml.com/webhelp/components" class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="https://docs.dolphindb.cn/zh/index.html" class=" wh_logo d-none d-sm-block "><img src="../logo.png" alt="  DolphinDB 文档中心  "/></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="booktitle">  <span class="ph mainbooktitle">DolphinDB 文档中心</span>  </span></a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="搜索 " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="搜索查询" required="required"/><button type="submit" class="wh_search_button" aria-label="搜索"><span class="search_input_text">搜索</span></button></div></form>
            
            <script src="/vendors/react/umd/react.production.min.js" defer="defer"></script>
<script src="/vendors/react-dom/umd/react-dom.production.min.js" defer="defer"></script>
<script src="/vendors/dayjs/dayjs.min.js" defer="defer"></script>
<script src="/vendors/antd/dist/antd.min.js" defer="defer"></script>
<script src="/vendors/@ant-design/icons/dist/index.umd.min.js" defer="defer"></script>
<script src="/zh/index.js" type="module"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" defer="defer"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer="defer"><!--


--></script>
<script defer="defer"><!--

// 从主页重定向
const currentUrl = window.location.href;

// 判断当前URL是否包含index.html并且路径最后部分是index.html
if (currentUrl.endsWith('index.html')) {
    // 处理根目录下的index.html跳转
    const baseUrl = currentUrl.split('/index.html')[0]; // 获取index.html之前的部分
    const redirectUrl = `${baseUrl}/about/ddb_intro.html`; // 构建跳转路径
    window.location.href = redirectUrl; // 执行跳转
}

--></script>
            
        </div></div>
    </div>
</header>
        
        
         
        
        
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="../index.html"><span>主页</span></a></span></li><li><div class="topicref" data-id="about_tutorials"><div class="title"><a href="../tutorials/about_tutorials.html"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div></li><li><div class="topicref"><div class="title"><a href="../tutorials/OHLC_2.html">金融场景案例</a></div></div></li><li class="active"><div class="topicref" data-id="ficc_func_uasge_and_performance"><div class="title"><a href="../tutorials/ficc_func_uasge_and_performance.html">FICC 固收系列函数使用示例及性能</a></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="切换搜索突出显示" title="切换搜索突出显示"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="折叠截面" title="折叠截面"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="打印此页" aria-label="打印此页"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem"><div data-tocid="ddb_intro-d9713e87" class="topicref" data-id="ddb_intro" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../about/ddb_intro.html" id="ddb_intro-d9713e87-link">关于DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="chap1_getstarted-d9713e136" class="topicref" data-id="chap1_getstarted" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../getstarted/chap1_getstarted.html" id="chap1_getstarted-d9713e136-link">快速上手</a><div class="wh-tooltip"><p class="shortdesc">如何快速部署 DolphinDB、建库建表、写入和查询数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="sectionddb_deployment-d9713e189" class="topicref" data-id="sectionddb_deployment" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action sectionddb_deployment-d9713e189-link" class="wh-expand-btn"></span><div class="title"><a href="../deploy/deploy_intro.html" id="sectionddb_deployment-d9713e189-link"><span class="keyword label">部署</span></a><div class="wh-tooltip"><p class="shortdesc">如何在不同的场景中部署 DolphinDB</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259" class="topicref" data-id="new_chap_database_manage_new_chap_dbmanage_landing_page" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/cfg/db_intro.html" id="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link"><span class="keyword label">数据库</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 数据库的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_streaming-d9713e3760" class="topicref" data-id="chap7_tutorials_streaming" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_streaming-d9713e3760-link" class="wh-expand-btn"></span><div class="title"><a href="../stream/str_intro.html" id="chap7_tutorials_streaming-d9713e3760-link"><span class="keyword label">流数据</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 流数据引擎及流数据计算的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e7513" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e7513-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/db_oper/import_data.html" id="tocId-d9713e7513-link">数据迁移</a><div class="wh-tooltip"><p class="shortdesc">如何从不同数据源向 DolphinDB 迁移数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_system_management-d9713e7940" class="topicref" data-id="chap7_tutorials_system_management" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_system_management-d9713e7940-link" class="wh-expand-btn"></span><div class="title"><a href="../sys_man/om_intro.html" id="chap7_tutorials_system_management-d9713e7940-link"><span class="keyword label">系统运维</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 的系统运维功能及方法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="troubleshooting-d9713e8780" class="topicref" data-id="troubleshooting" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action troubleshooting-d9713e8780-link" class="wh-expand-btn"></span><div class="title"><a href="../error_codes/troubleshooting.html" id="troubleshooting-d9713e8780-link">故障排查</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="about_language_resources-d9713e20911" class="topicref" data-id="about_language_resources" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action about_language_resources-d9713e20911-link" class="wh-expand-btn"></span><div class="title"><a href="../progr/progr_intro.html" id="about_language_resources-d9713e20911-link"><span class="keyword label">编程语言</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 编程基本概念与方法、SQL 在 DolphinDB 的应用</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="functions_references-d9713e30925" class="topicref" data-id="functions_references" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action functions_references-d9713e30925-link" class="wh-expand-btn"></span><div class="title"><a href="../funcs/funcs_intro.html" id="functions_references-d9713e30925-link"><span class="keyword label">函数参考</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 函数分类、语法、详解及示例</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="api_protocol-d9713e94064" class="topicref" data-id="api_protocol" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action api_protocol-d9713e94064-link" class="wh-expand-btn"></span><div class="title"><a href="../api/connapi_intro.html" id="api_protocol-d9713e94064-link"><span class="keyword label">连接器 &amp; API</span></a><div class="wh-tooltip"><p class="shortdesc">面向不同编程语言的 DolphinDB API 及连接器，相关协议和用法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap6_plugin-d9713e94210" class="topicref" data-id="chap6_plugin" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap6_plugin-d9713e94210-link" class="wh-expand-btn"></span><div class="title"><a href="../plugins/plg_intro.html" id="chap6_plugin-d9713e94210-link"><span class="keyword label">插件</span></a><div class="wh-tooltip"><p class="shortdesc">多个应用场景的插件使用说明和插件开发指导</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="third_party-d9713e97904" class="topicref" data-id="third_party" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action third_party-d9713e97904-link" class="wh-expand-btn"></span><div class="title"><a href="../third_party.html" id="third_party-d9713e97904-link">第三方工具</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="about_tutorials-d9713e98227" class="topicref" data-id="about_tutorials" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action about_tutorials-d9713e98227-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/about_tutorials.html" id="about_tutorials-d9713e98227-link"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98280" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98280-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/new_users_finance.html" id="tocId-d9713e98280-link">新用户入门</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98327" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98327-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/database.html" id="tocId-d9713e98327-link">数据库</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e99111" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e99111-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/std_sql_ddb.html" id="tocId-d9713e99111-link">编程</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100448" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100448-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming-real-time-correlation-processing_2.html" id="tocId-d9713e100448-link">流数据</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100955" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100955-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/scheduledJob_2.html" id="tocId-d9713e100955-link">系统运维</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="模块概述-d9713e101923" class="topicref" data-id="模块概述" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action 模块概述-d9713e101923-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/tu_modules.html" id="模块概述-d9713e101923-link">模块</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="tocId-d9713e102568" class="topicref" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action tocId-d9713e102568-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/OHLC_2.html" id="tocId-d9713e102568-link">金融场景案例</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="k-线计算-d9713e102569" class="topicref" data-id="k-线计算" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/OHLC_2.html" id="k-线计算-d9713e102569-link">K 线计算</a></div></div></li><li role="treeitem"><div data-tocid="使用-klinechart-展示-dolphindb-k-线-d9713e102615" class="topicref" data-id="使用-klinechart-展示-dolphindb-k-线" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/displaying_the_dolphindb_k-line_with_klinechart.html" id="使用-klinechart-展示-dolphindb-k-线-d9713e102615-link">使用 KLineChart 展示 DolphinDB K 线</a></div></div></li><li role="treeitem"><div data-tocid="python--hdf5-因子计算与-dolphindb-一体化因子计算方案对比-d9713e102661" class="topicref" data-id="python--hdf5-因子计算与-dolphindb-一体化因子计算方案对比" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Python_HDF5_vs_DolphinDB.html" id="python--hdf5-因子计算与-dolphindb-一体化因子计算方案对比-d9713e102661-link">Python + HDF5 因子计算与 DolphinDB 一体化因子计算方案对比</a></div></div></li><li role="treeitem"><div data-tocid="python--文件存储与-dolphindb-因子计算性能比较-d9713e102707" class="topicref" data-id="python--文件存储与-dolphindb-因子计算性能比较" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/DolphinDB_VS_PythonFile_Storage.html" id="python--文件存储与-dolphindb-因子计算性能比较-d9713e102707-link">Python + 文件存储与 DolphinDB 因子计算性能比较</a></div></div></li><li role="treeitem"><div data-tocid="python-parser-在金融量化分析场景的应用入门-d9713e102753" class="topicref" data-id="python-parser-在金融量化分析场景的应用入门" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/py_parser__quant_fin.html" id="python-parser-在金融量化分析场景的应用入门-d9713e102753-link">Python Parser 在金融量化分析场景的应用入门</a></div></div></li><li role="treeitem"><div data-tocid="处理-level-2-行情数据实例-d9713e102799" class="topicref" data-id="处理-level-2-行情数据实例" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/l2_stk_data_proc_2.html" id="处理-level-2-行情数据实例-d9713e102799-link">处理 Level-2 行情数据实例</a></div></div></li><li role="treeitem"><div data-tocid="存储金融数据的分区方案最佳实践-d9713e102845" class="topicref" data-id="存储金融数据的分区方案最佳实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/best_practices_for_partitioned_storage.html" id="存储金融数据的分区方案最佳实践-d9713e102845-link">存储金融数据的分区方案最佳实践</a></div></div></li><li role="treeitem"><div data-tocid="公募基金历史数据基础分析教程-d9713e102891" class="topicref" data-id="公募基金历史数据基础分析教程" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/public_fund_basic_analysis.html" id="公募基金历史数据基础分析教程-d9713e102891-link">公募基金历史数据基础分析教程</a></div></div></li><li role="treeitem"><div data-tocid="股票行情回放-d9713e102937" class="topicref" data-id="股票行情回放" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/stock_market_replay_2.html" id="股票行情回放-d9713e102937-link">股票行情回放</a></div></div></li><li role="treeitem"><div data-tocid="搭建行情回放服务的最佳实践-d9713e102983" class="topicref" data-id="搭建行情回放服务的最佳实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/appendices_market_replay_bp.html" id="搭建行情回放服务的最佳实践-d9713e102983-link">搭建行情回放服务的最佳实践</a></div></div></li><li role="treeitem"><div data-tocid="国内股票行情数据导入实例-d9713e103029" class="topicref" data-id="国内股票行情数据导入实例" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/stockdata_csv_import_demo.html" id="国内股票行情数据导入实例-d9713e103029-link">国内股票行情数据导入实例</a></div></div></li><li role="treeitem"><div data-tocid="基金份额参考价值-iopv-计算-d9713e103076" class="topicref" data-id="基金份额参考价值-iopv-计算" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_IOPV_2.html" id="基金份额参考价值-iopv-计算-d9713e103076-link">基金份额参考价值 IOPV 计算</a></div></div></li><li role="treeitem"><div data-tocid="基于快照行情的股票和基金-k-线合成-d9713e103122" class="topicref" data-id="基于快照行情的股票和基金-k-线合成" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/k.html" id="基于快照行情的股票和基金-k-线合成-d9713e103122-link">基于快照行情的股票和基金 K 线合成</a></div></div></li><li role="treeitem"><div data-tocid="计算基金日频因子-d9713e103168" class="topicref" data-id="计算基金日频因子" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/fund_factor_contrasted_by_py.html" id="计算基金日频因子-d9713e103168-link">计算基金日频因子</a></div></div></li><li role="treeitem"><div data-tocid="基于逐笔数据合成高频-orderbookdolphindb-orderbook-引擎-d9713e103214" class="topicref" data-id="基于逐笔数据合成高频-orderbookdolphindb-orderbook-引擎" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/orderBookSnapshotEngine.html" id="基于逐笔数据合成高频-orderbookdolphindb-orderbook-引擎-d9713e103214-link">基于逐笔数据合成高频 Orderbook：DolphinDB Orderbook 引擎</a></div></div></li><li role="treeitem"><div data-tocid="金融-poc-用户历史数据导入指导手册之股票-level-2-逐笔篇-d9713e103260" class="topicref" data-id="金融-poc-用户历史数据导入指导手册之股票-level-2-逐笔篇" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/LoadDataForPoc.html" id="金融-poc-用户历史数据导入指导手册之股票-level-2-逐笔篇-d9713e103260-link">金融 PoC 用户历史数据导入指导手册之股票 Level-2 逐笔篇</a></div></div></li><li role="treeitem"><div data-tocid="金融实时实际波动率预测-d9713e103306" class="topicref" data-id="金融实时实际波动率预测" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/ml_volatility_2.html" id="金融实时实际波动率预测-d9713e103306-link">金融实时实际波动率预测</a></div></div></li><li role="treeitem"><div data-tocid="金融因子流式实现-d9713e103352" class="topicref" data-id="金融因子流式实现" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/str_comp_fin_quant_2.html" id="金融因子流式实现-d9713e103352-link">金融因子流式实现</a></div></div></li><li role="treeitem"><div data-tocid="开发股票波动率预测模型的-676-个输入特征-d9713e103398" class="topicref" data-id="开发股票波动率预测模型的-676-个输入特征" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/metacode_derived_features_2.html" id="开发股票波动率预测模型的-676-个输入特征-d9713e103398-link">开发股票波动率预测模型的 676 个输入特征</a></div></div></li><li role="treeitem"><div data-tocid="快速搭建-level-2-快照数据流批一体因子计算平台最佳实践-d9713e103444" class="topicref" data-id="快速搭建-level-2-快照数据流批一体因子计算平台最佳实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/l2_snapshot_factor_calc_2.html" id="快速搭建-level-2-快照数据流批一体因子计算平台最佳实践-d9713e103444-link">快速搭建 Level-2 快照数据流批一体因子计算平台最佳实践</a></div></div></li><li role="treeitem"><div data-tocid="量化金融范例-d9713e103490" class="topicref" data-id="量化金融范例" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/quant_finance_examples.html" id="量化金融范例-d9713e103490-link">量化金融范例</a></div></div></li><li role="treeitem"><div data-tocid="流式计算中证-1000-指数主买主卖交易量-d9713e103536" class="topicref" data-id="流式计算中证-1000-指数主买主卖交易量" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/CSI_1000_2.html" id="流式计算中证-1000-指数主买主卖交易量-d9713e103536-link">流式计算中证 1000 指数主买/主卖交易量</a></div></div></li><li role="treeitem"><div data-tocid="深度不平衡买卖压力指标波动率计算-d9713e103583" class="topicref" data-id="深度不平衡买卖压力指标波动率计算" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/sql_performance_optimization_wap_di_rv.html" id="深度不平衡买卖压力指标波动率计算-d9713e103583-link">深度不平衡、买卖压力指标、波动率计算</a></div></div></li><li role="treeitem"><div data-tocid="实时合成自定义频订单簿快照dolphindb-insight-行情插件与订单簿引擎应用-d9713e103629" class="topicref" data-id="实时合成自定义频订单簿快照dolphindb-insight-行情插件与订单簿引擎应用" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/insight_plugin_orderbook_engine_application.html" id="实时合成自定义频订单簿快照dolphindb-insight-行情插件与订单簿引擎应用-d9713e103629-link">实时合成自定义频订单簿快照：DolphinDB INSIGHT 行情插件与订单簿引擎应用</a></div></div></li><li role="treeitem"><div data-tocid="实时计算分钟资金流-d9713e103675" class="topicref" data-id="实时计算分钟资金流" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_capital_flow_order_by_order_2.html" id="实时计算分钟资金流-d9713e103675-link">实时计算分钟资金流</a></div></div></li><li role="treeitem"><div data-tocid="实时计算高频因子-d9713e103721" class="topicref" data-id="实时计算高频因子" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/hf_factor_streaming_2.html" id="实时计算高频因子-d9713e103721-link">实时计算高频因子</a></div></div></li><li role="treeitem"><div data-tocid="实时计算日累计逐单资金流-d9713e103767" class="topicref" data-id="实时计算日累计逐单资金流" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_capital_flow_daily_2.html" id="实时计算日累计逐单资金流-d9713e103767-link">实时计算日累计逐单资金流</a></div></div></li><li role="treeitem"><div data-tocid="实时计算涨幅榜-d9713e103813" class="topicref" data-id="实时计算涨幅榜" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/rt_stk_price_inc_calc_2.html" id="实时计算涨幅榜-d9713e103813-link">实时计算涨幅榜</a></div></div></li><li role="treeitem"><div data-tocid="实时选取外汇行情多价源最优价-d9713e103859" class="topicref" data-id="实时选取外汇行情多价源最优价" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/best_price_selection.html" id="实时选取外汇行情多价源最优价-d9713e103859-link">实时选取外汇行情多价源最优价</a></div></div></li><li role="treeitem"><div data-tocid="外汇掉期估值计算-d9713e103905" class="topicref" data-id="外汇掉期估值计算" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/FxSwapValuation.html" id="外汇掉期估值计算-d9713e103905-link">外汇掉期估值计算</a></div></div></li><li role="treeitem"><div data-tocid="因子计算平台构建-d9713e103951" class="topicref" data-id="因子计算平台构建" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Python_Celery.html" id="因子计算平台构建-d9713e103951-link">因子计算平台构建</a></div></div></li><li role="treeitem"><div data-tocid="因子计算最佳实践-d9713e103997" class="topicref" data-id="因子计算最佳实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/best_practice_for_factor_calculation.html" id="因子计算最佳实践-d9713e103997-link">因子计算最佳实践</a></div></div></li><li role="treeitem"><div data-tocid="mvo_tutorial-d9713e104043" class="topicref" data-id="mvo_tutorial" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/MVO.html" id="mvo_tutorial-d9713e104043-link">优化投资组合：DolphinDB 最优化求解系列函数应用指南</a></div></div></li><li role="treeitem"><div data-tocid="中高频多因子库存储最佳实践-d9713e104090" class="topicref" data-id="中高频多因子库存储最佳实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/best_practices_for_multi_factor.html" id="中高频多因子库存储最佳实践-d9713e104090-link">中高频多因子库存储最佳实践</a></div></div></li><li role="treeitem"><div data-tocid="alphalens-在-dolphindb-中的应用因子分析建模实践-d9713e104136" class="topicref" data-id="alphalens-在-dolphindb-中的应用因子分析建模实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Practical_Factor_Analysis_Modeling.html" id="alphalens-在-dolphindb-中的应用因子分析建模实践-d9713e104136-link">Alphalens 在 DolphinDB 中的应用：因子分析建模实践</a></div></div></li><li role="treeitem"><div data-tocid="dolphindb-与-dolphinscheduler-的集成-d9713e104182" class="topicref" data-id="dolphindb-与-dolphinscheduler-的集成" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/dolphinscheduler_integration.html" id="dolphindb-与-dolphinscheduler-的集成-d9713e104182-link">DolphinDB 与 DolphinScheduler 的集成</a></div></div></li><li role="treeitem"><div data-tocid="dolphindb-与-python-airflow-最佳实践-d9713e104228" class="topicref" data-id="dolphindb-与-python-airflow-最佳实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/ddb_airflow.html" id="dolphindb-与-python-airflow-最佳实践-d9713e104228-link">DolphinDB 与 Python AirFlow 最佳实践</a></div></div></li><li role="treeitem"><div data-tocid="gplearn-d9713e104274" class="topicref" data-id="gplearn" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/gplearn.html" id="gplearn-d9713e104274-link">Shark GPLearn 快速上手</a></div></div></li><li role="treeitem"><div data-tocid="利用jit加速计算-etf-期权隐含波动率和希腊值-d9713e104320" class="topicref" data-id="利用jit加速计算-etf-期权隐含波动率和希腊值" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/IV_Greeks_Calculation_for_ETF_Options_Using_JIT.html" id="利用jit加速计算-etf-期权隐含波动率和希腊值-d9713e104320-link">利用JIT加速计算 ETF 期权隐含波动率和希腊值</a></div></div></li><li role="treeitem"><div data-tocid="基于-dolphindb-的-brinson-绩效归因模型实践-d9713e104366" class="topicref" data-id="基于-dolphindb-的-brinson-绩效归因模型实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/brinson.html" id="基于-dolphindb-的-brinson-绩效归因模型实践-d9713e104366-link">基于 DolphinDB 的 Brinson 绩效归因模型实践</a></div></div></li><li role="treeitem"><div data-tocid="基于-dolphindb-的-campisi-绩效归因模型实践-d9713e104412" class="topicref" data-id="基于-dolphindb-的-campisi-绩效归因模型实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/campisi.html" id="基于-dolphindb-的-campisi-绩效归因模型实践-d9713e104412-link">基于 DolphinDB 的 Campisi 绩效归因模型实践</a></div></div></li><li role="treeitem"><div data-tocid="期货分钟频cta策略回测案例-d9713e104458" class="topicref" data-id="期货分钟频cta策略回测案例" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/futures_minute_frequency_cta_strategy_backtest_example.html" id="期货分钟频cta策略回测案例-d9713e104458-link">期货分钟频CTA策略回测案例</a></div></div></li><li role="treeitem"><div data-tocid="exchdata-交易所历史股票数据自动化导入功能模块使用教程-d9713e104504" class="topicref" data-id="exchdata-交易所历史股票数据自动化导入功能模块使用教程" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/exchdata_exchange_historical_stock_data_auto_import_module_tutorial.html" id="exchdata-交易所历史股票数据自动化导入功能模块使用教程-d9713e104504-link">ExchData 交易所历史股票数据自动化导入功能模块使用教程</a></div></div></li><li role="treeitem" class="active"><div data-tocid="ficc_func_uasge_and_performance-d9713e104550" class="topicref" data-id="ficc_func_uasge_and_performance" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/ficc_func_uasge_and_performance.html" id="ficc_func_uasge_and_performance-d9713e104550-link">FICC 固收系列函数使用示例及性能</a></div></div></li><li role="treeitem"><div data-tocid="title1-d9713e104597" class="topicref" data-id="title1" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/ficc_funcs_application.html" id="title1-d9713e104597-link">FICC 固收系列函数应用场景</a></div></div></li><li role="treeitem"><div data-tocid="最优化函数_socp_的使用及转化案例-d9713e104643" class="topicref" data-id="最优化函数_socp_的使用及转化案例" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/socp_usage_case.html" id="最优化函数_socp_的使用及转化案例-d9713e104643-link">最优化函数 socp 的使用及转化案例</a></div></div></li><li role="treeitem"><div data-tocid="k_line_calculation-d9713e104689" class="topicref" data-id="k_line_calculation" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/k_line_calculation%20.html" id="k_line_calculation-d9713e104689-link">基于期货快照行情数据计算合约 K 线以及主连行情</a></div></div></li><li role="treeitem"><div data-tocid="backtest_introduction_usage-d9713e104735" class="topicref" data-id="backtest_introduction_usage" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/backtest_introduction_usage.html" id="backtest_introduction_usage-d9713e104735-link">融资融券策略回测使用说明及回测案例</a></div></div></li><li role="treeitem"><div data-tocid="stock_backtest-d9713e104781" class="topicref" data-id="stock_backtest" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/stock_backtest.html" id="stock_backtest-d9713e104781-link">股票中低频投资组合回测案例实现</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e104827" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e104827-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_engine_anomaly_alerts_2.html" id="tocId-d9713e104827-link">物联网场景案例</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105795" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105795-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/dolphindb_tensor_libtorch_tutorial.html" id="tocId-d9713e105795-link">机器学习</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105842" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105842-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/api_performance.html" id="tocId-d9713e105842-link">测试报告</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105982" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105982-link" class="wh-expand-btn"></span><div class="title"><a href="../rn/server/3_00_2.html" id="tocId-d9713e105982-link">版本说明</a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 版本发布历史</p></div></div></div></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-7 col-md-9 col-sm-12" id="wh_topic_body">
                        <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        <button id="wh_close_topic_toc_button" class="close-toc-button d-none" aria-label="Toggle topic table of content" aria-controls="wh_topic_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        <div class=" wh_topic_content body "><main role="main"><article class="- topic/topic topic" role="article" aria-labelledby="ariaid-title1">
    <h1 class="- topic/title title topictitle1" id="ariaid-title1">FICC 固收系列函数使用示例及性能</h1>
    <div class="- topic/body body">
        <p class="- topic/p p">FICC 业务是金融行业中一个重要的业务板块，通常涉及以下几个核心领域：</p>
        <ul class="- topic/ul ul" id="ficc_func_uasge_and_performance__ul_obh_1b4_kdc" data-ofbid="ficc_func_uasge_and_performance__ul_obh_1b4_kdc">
            <li class="- topic/li li">
                <p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">固定收益业务</strong>（Fixed Income）：包括债券的发行和交易，如企业债、公司债、金融债等，以及相关的衍生品交易。</p>
            </li>
            <li class="- topic/li li">
                <p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">外汇业务</strong>（Currency）：涉及货币的交易和对冲，包括即期和远期外汇交易、外汇掉期等。</p>
            </li>
            <li class="- topic/li li">
                <p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">大宗商品业务</strong>（Commodities）：涉及能源、金属、农产品等大宗商品的交易和风险管理。</p>
            </li>
        </ul>
        <p class="- topic/p p">FICC
            业务在金融市场中的作用至关重要，它为各类金融机构提供了一个相互连接、高效交易的渠道。在市场波谲云诡的当下，如何快速、精准地处理这些海量多样化的数据，同时快速计算出各类指标，成了各类金融机构投资盈利的关键一步。</p>
        <p class="- topic/p p">DolphinDB 为此开发了 FICC 系列函数，方便用户快速地计算各类指标，涵盖了债券、外汇、期货期权等多种类型。同时 DolphinDB
            还基于实时流技术拓展了流计算引擎，满足客户在交易中对资产实时估值定价的需求。</p>
        <p class="- topic/p p">本教程将详细介绍这些函数的业务背景、算法、使用案例等，并对部分函数做了性能测试。</p>
    </div>
    <article class="- topic/topic topic nested1" aria-labelledby="ariaid-title2" id="FICC业务背景及函数介绍">
        <h2 class="- topic/title title topictitle2" id="ariaid-title2">1. FICC 业务背景及函数介绍</h2>
        <div class="- topic/body body">
            <p class="- topic/p p">本章将不同的函数分为估值定价、风险管理、曲线拟合三大类。每一子章节将详细介绍 DolphinDB
                已经实现指标的概念、业务场景、具体使用的算法等，同时给出对应的函数说明和使用范例，方便读者快速理解与使用。</p>
            <p class="- topic/p p">自 2.00.14 和 3.00.2 版本起，DolphinDB 开始提供 FICC 固收系列函数，赋能机构 FICC 业务。</p>
            <p class="- topic/p p">本教程全部代码需要运行在 2.00.14 和 3.00.2 或者更高版本的 DolphinDB server 上，本教程测试环境配置的 DolphinDB Server
                模式为单节点模式，默认端口 8848。安装教程如下：</p>
            <div class="table-container"><table class="- topic/table table frame-all" id="FICC业务背景及函数介绍__table_pbh_1b4_kdc" data-ofbid="FICC业务背景及函数介绍__table_pbh_1b4_kdc" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead">
                        <tr class="- topic/row">
                            <th class="- topic/entry entry colsep-1 rowsep-1" id="FICC业务背景及函数介绍__table_pbh_1b4_kdc__entry__1"> 软件名称 </th>
                            <th class="- topic/entry entry colsep-1 rowsep-1" id="FICC业务背景及函数介绍__table_pbh_1b4_kdc__entry__2"> 版本信息 </th>
                            <th class="- topic/entry entry colsep-0 rowsep-1" id="FICC业务背景及函数介绍__table_pbh_1b4_kdc__entry__3"> 教程&amp;下载链接 </th>
                        </tr>
                    </thead><tbody class="- topic/tbody tbody">
                        <tr class="- topic/row">
                            <td class="- topic/entry entry colsep-1 rowsep-1" headers="FICC业务背景及函数介绍__table_pbh_1b4_kdc__entry__1" rowspan="2">DolphinDB</td>
                            <td class="- topic/entry entry colsep-1 rowsep-1" headers="FICC业务背景及函数介绍__table_pbh_1b4_kdc__entry__2" rowspan="2">3.00.2</td>
                            <td class="- topic/entry entry colsep-0 rowsep-1" headers="FICC业务背景及函数介绍__table_pbh_1b4_kdc__entry__3"><a class="- topic/xref xref" href="standalone_server.html">DolphinDB单节点部署教程</a></td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry colsep-0 rowsep-1" headers="FICC业务背景及函数介绍__table_pbh_1b4_kdc__entry__3"><a class="- topic/xref xref" href="https://dolphindb.cn/" target="_blank" rel="external noopener">DolphinDB下载链接</a></td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry colsep-1 rowsep-1" headers="FICC业务背景及函数介绍__table_pbh_1b4_kdc__entry__1">DolphinDB GUI</td>
                            <td class="- topic/entry entry colsep-1 rowsep-1" headers="FICC业务背景及函数介绍__table_pbh_1b4_kdc__entry__2">3.00.2.0</td>
                            <td class="- topic/entry entry colsep-0 rowsep-1" headers="FICC业务背景及函数介绍__table_pbh_1b4_kdc__entry__3">
                                <a class="- topic/xref xref" href="https://dolphindb.cn/product#client" target="_blank" rel="external noopener">DolphinDB GUI下载链接</a>
                            </td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry colsep-1 rowsep-0" headers="FICC业务背景及函数介绍__table_pbh_1b4_kdc__entry__1">DolphinDB VS Code 插件</td>
                            <td class="- topic/entry entry colsep-1 rowsep-0" headers="FICC业务背景及函数介绍__table_pbh_1b4_kdc__entry__2">3.0.200</td>
                            <td class="- topic/entry entry colsep-0 rowsep-0" headers="FICC业务背景及函数介绍__table_pbh_1b4_kdc__entry__3">
                                <a class="- topic/xref xref" href="https://dolphindb.cn/product#client" target="_blank" rel="external noopener">DolphinDB VS Code插件下载</a>
                            </td>
                        </tr>
                    </tbody></table></div>
        </div>
        <article class="- topic/topic topic nested2" aria-labelledby="ariaid-title3" id="估值定价">
            <h3 class="- topic/title title topictitle3" id="ariaid-title3">1.1 估值定价</h3>
            <div class="- topic/body body">
                <p class="- topic/p p">
                    <strong class="+ topic/ph hi-d/b ph b">应付利息（Accrued Interest）</strong>
                </p>
                <ul class="- topic/ul ul" id="估值定价__ul_qbh_1b4_kdc" data-ofbid="估值定价__ul_qbh_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p"> 业务含义：应付利息（Accrued Interest），是指自上次票息支付（last coupon
                            payment）以来到交易日（settlement）所赚取的利息，主要用于和全价联动计算净价。此外，业务上可能会需要用应付利息等相关字段进行因子计算或者进一步的展示。但是某些数据源的债券行情数据里只有收益率字段，没有应付利息等相关价格字段，所以需要根据收益率字段计算出应付利息。</p>
                    </li>
                    <li class="- topic/li li">
                        <p class="- topic/p p">计算公式：</p>
                        <img class="- topic/image image" id="估值定价__image_rbh_1b4_kdc" src="images/ficc_func_usage_and_performance/1-1.png" width="434"/>
                    </li>
                </ul>
                <p class="- topic/p p">变量说明：</p>
                <p class="- topic/p p"> 计息天数，上一利息支付日至买卖结算日的天数</p>
                <p class="- topic/p p"> 计息周期，当前付息周期的实际天数</p>
                <ul class="- topic/ul ul" id="估值定价__ul_sbh_1b4_kdc" data-ofbid="估值定价__ul_sbh_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p">DolphinDB 函数实现：<a class="- topic/xref xref" href="../funcs/b/bondaccrint.html">bondAccrInt</a></p>
                    </li>
                </ul>
                <p class="- topic/p p">举例说明：</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>//标量实现
sd = 2022.09.28; md = 2027.07.25;rate = 0.025; fre = 1; yld = 0.0255; redemption = 100; bas = 1; btype = 0

AI = bondAccrInt(settlement=sd, maturity=md, coupon=rate, frequency=fre, par=redemption, basis = bas)
AI

//向量化实现
n = 1000
input = table(take(2022.09.28,n) as sd, take(2027.07.25,n) as md, take(0.025,n) as rate, take(0.0255,n) as yld, take(1,n) as fre, take(100,n) as redemption, take(1,n) as basis, take(0,n) as btype)
sd = input.sd; md = input.md; rate = input.rate; yld = input.yld; fre = input.fre; redemption = input.redemption; bas = input.basis; btype = input.btype

AI = bondAccrInt(settlement=sd, maturity=md, coupon=rate, frequency=fre, par=redemption, basis = bas)
AI</code></pre>
                <p class="- topic/p p">
                    <strong class="+ topic/ph hi-d/b ph b">债券全价（Dirty Price）与净价（Clean Price）：</strong>
                </p>
                <ul class="- topic/ul ul" id="估值定价__ul_ubh_1b4_kdc" data-ofbid="估值定价__ul_ubh_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p">
                            业务含义：全价交易是指买卖债券时以含有应计利息的价格申报并成交，也按该全价价格进行清算交割。净价交易是指在现券买卖时，以不含有自然增长应计利息的价格报价并成交的交易方式。在净价交易条件下，由于交易价格不含有应计利息，其价格形成及变动能够更加准确地体现债券的内在价值、供求关系及市场利率的变动趋势。两者都是债券价值的表示。全价的作用是便于国债交易的税务处理，净价的作用是使销售者节省了在交易所销售所必需花费的佣金，能保证销售者有一个较好的净利润。业务上可能会需要用全价或净价等相关字段进行因子计算或者对冲策略构建。但是某些数据源的债券行情数据里只有收益率字段，没有全价或者净价等相关价格字段，所以需要根据收益率字段计算出全价和净价。</p>
                    </li>
                    <li class="- topic/li li">
                        <p class="- topic/p p">计算公式：</p>
                    </li>
                </ul>
                <img class="- topic/image image" id="估值定价__image_vbh_1b4_kdc" src="images/ficc_func_usage_and_performance/1-2.png" width="586"/>
                <img class="- topic/image image" id="估值定价__image_wbh_1b4_kdc" src="images/ficc_func_usage_and_performance/1-3.png" width="276"/>
                <p class="- topic/p p">变量说明：</p>
                <p class="- topic/p p"> i，付息周期</p>
                <p class="- topic/p p"> n，债券到期日对应的付息次数</p>
                <ul class="- topic/ul ul" id="估值定价__ul_xbh_1b4_kdc" data-ofbid="估值定价__ul_xbh_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p">DolphinDB 函数实现：<code class="+ topic/ph pr-d/codeph ph codeph">bondDirtyPrice</code>
                                是用于计算全价的函数。<code class="+ topic/ph pr-d/codeph ph codeph">bondAccrInt </code>是用于计算应付利息的函数，两者相减即是净价。</p>
                    </li>
                </ul>
                <p class="- topic/p p">
                    <a class="- topic/xref xref" href="../funcs/b/bondDirtyPrice.html">bondDirtyPrice</a> 用于计算面值为 100
                    的债券的含息价格（全价） 。当前函数支持固息债券、零息债券和贴现债券价格计算。</p>
                <p class="- topic/p p">举例说明：</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="估值定价__pre_ybh_1b4_kdc" data-ofbid="估值定价__pre_ybh_1b4_kdc"><code>//标量实现，全价
sd = 2022.09.28; md = 2027.07.25;rate = 0.025; fre = 1; yld = 0.0255; redemption = 100; bas = 1; btype = 0
DP = bondDirtyPrice(settlement=sd, maturity=md, coupon=rate, yield=yld, frequency=fre, basis=bas, bondtype=btype)
DP

//向量化实现，全价
n = 1000
input = table(take(2022.09.28,n) as sd, take(2027.07.25,n) as md, take(0.025,n) as rate, take(0.0255,n) as yld, take(1,n) as fre, take(100,n) as redemption, take(1,n) as basis, take(0,n) as btype)
sd = input.sd; md = input.md; rate = input.rate; yld = input.yld; fre = input.fre; redemption = input.redemption; bas = input.basis; btype = input.btype

DP = bondDirtyPrice(settlement=sd, maturity=md, coupon=rate, yield=yld, frequency=fre, basis=bas, bondtype=btype)
DP

//净价
CP = DP -AI</code></pre>
                <p class="- topic/p p">
                    <strong class="+ topic/ph hi-d/b ph b">IRS 利率互换定价函数：</strong>
                </p>
                <ul class="- topic/ul ul" id="估值定价__ul_zbh_1b4_kdc" data-ofbid="估值定价__ul_zbh_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p"> 业务含义：利率互换（interest rate swap）是一种利率类衍生品，
                            其特点为互换参与的双方，按照合约约定的未来固定时间，进行某种资产或资产现金流的交换。双方交换的现金流，以合约中约定的利率进行。利率互换的本质为两个现金流，
                            一个固定端现金流（fixed leg），一个浮动端现金流（floating
                            leg），因此利率互换的定价方式，就是将这两个现金流折现，获得固定端现值与浮动端现值。利率互换的价值就等于两者的轧差。
                            按照定义，利率互换的固定端支付方为利率互换合约的买方，浮动端支付方为利率互换合约的卖方。</p>
                    </li>
                    <li class="- topic/li li">
                        <p class="- topic/p p">计算公式： 利率互换合约价值 = 固定端现值 - 浮动端现值</p>
                    </li>
                </ul>
                <ul class="- topic/ul ul" id="估值定价__ul_ach_1b4_kdc" data-ofbid="估值定价__ul_ach_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p">DolphinDB 函数实现：<a class="- topic/xref xref" href="../funcs/i/irs.html">irs</a>
                            函数返回对于浮动利率支付方的利率互换估值，该估值是一个 DOUBLE 类型的标量或向量。</p>
                    </li>
                </ul>
                <p class="- topic/p p">
                    <strong class="+ topic/ph hi-d/b ph b">其他估值函数：</strong>
                </p>
                <p class="- topic/p p"> 除上面常见的估值定价函数外，DolphinDB 还实现了其他类似的指标。详细内容可参见具体函数的使用手册，这里不再赘述。</p>
                <div class="table-container"><table class="- topic/table table frame-all" id="估值定价__table_bch_1b4_kdc" data-ofbid="估值定价__table_bch_1b4_kdc" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead">
                            <tr class="- topic/row">
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="估值定价__table_bch_1b4_kdc__entry__1"> 指标名称 </th>
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="估值定价__table_bch_1b4_kdc__entry__2"> 内容概述 </th>
                                <th class="- topic/entry entry colsep-0 rowsep-1" id="估值定价__table_bch_1b4_kdc__entry__3"> 使用手册链接 </th>
                            </tr>
                        </thead><tbody class="- topic/tbody tbody">
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="估值定价__table_bch_1b4_kdc__entry__1">债券收益率计算</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="估值定价__table_bch_1b4_kdc__entry__2">
                                    债券收益率，这里指的是到期收益率（yield-to-maturity）。债券收益率的计算，是根据债券的净价和未来现金流，反算债券净价计算公式中的到期收益率。目前
                                        <code class="+ topic/ph pr-d/codeph ph codeph">bondYield</code>函数支持多种常见的规划求解器，包括牛顿法（Newton）,
                                    brent， Nelder-Mead，BFGS等。</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="估值定价__table_bch_1b4_kdc__entry__3">
                                    <a class="- topic/xref xref" href="../funcs/b/bondyield.html">bondYield</a>
                                </td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="估值定价__table_bch_1b4_kdc__entry__1"> 香草期权定价函数</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="估值定价__table_bch_1b4_kdc__entry__2">使用 Black-Scholes-Merton 模型对欧式期权进行定价。</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="估值定价__table_bch_1b4_kdc__entry__3">
                                    <a class="- topic/xref xref" href="../funcs/v/vanillaoption.html">vanillaOption</a>
                                </td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="估值定价__table_bch_1b4_kdc__entry__1">CDS 信用违约互换估值函数</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="估值定价__table_bch_1b4_kdc__entry__2">信用违约互换（Credit Default
                                        Swap，CDS）是一种金融衍生品，它是一种可供投资人规避信用风险的契约。具体实现方式参考：<a class="- topic/xref xref" href="https://data.bloomberglp.com/professional/sites/10/WhitePaper_Wen.pdf" target="_blank" rel="external noopener">https://data.bloomberglp.com/professional/sites/10/WhitePaper_Wen.pdf</a></td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="估值定价__table_bch_1b4_kdc__entry__3">
                                    <a class="- topic/xref xref" href="../funcs/c/cds.html">cds</a>
                                </td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="估值定价__table_bch_1b4_kdc__entry__1">CRMW 信用风险缓释凭证定价函数</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="估值定价__table_bch_1b4_kdc__entry__2">
                                    <p class="- topic/p p"> 信用风险缓释凭证（Credit Risk Mitigation
                                        Warrant，CRMW）是指由标的实体以外的机构创设的，为凭证持有人就标的债务提供信用风险保护的、可交易流通的有价凭证。</p>
                                    <p class="- topic/p p">本函数使用<a class="- topic/xref xref" href="https://pdf.dfcfw.com/pdf/H3_AP201811151246405013_1.pdf" target="_blank" rel="external noopener">中债估值</a>方法，对标的债务为到期一次还本付息的短期债券的信用风险缓释凭证进行估值。短期债券指在一年或更短的时间内到期的债券。</p>
                                </td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="估值定价__table_bch_1b4_kdc__entry__3">
                                    <a class="- topic/xref xref" href="../funcs/c/crmwcbond.html">crmwCBond</a>
                                </td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="估值定价__table_bch_1b4_kdc__entry__1">treasuryFutures 国债期货转换因子函数</td>
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="估值定价__table_bch_1b4_kdc__entry__2">
                                    <p class="- topic/p p">
                                        国债期货实行一篮子可交割国债的多券种交割方式。由于可交割债券的剩余期限、票面利率、付息频率、付息时间等各不相同，各交割券价值会有一定区别。因此交割时就要通过转换因子将可交割国债转换成名义标准券，使所有可交割券在交割时的价值基本相当。</p>
                                    <p class="- topic/p p">本函数使用<a class="- topic/xref xref" href="http://www.cffex.com.cn/5tf/" target="_blank" rel="external noopener">中金所的方法</a>对转换因子进行计算。</p>
                                </td>
                                <td class="- topic/entry entry colsep-0 rowsep-0" headers="估值定价__table_bch_1b4_kdc__entry__3">
                                    <a class="- topic/xref xref" href="../funcs/t/treasuryconversionfactor.html">treasuryBonversionFactor</a>
                                </td>
                            </tr>
                        </tbody></table></div>
            </div>
        </article>
        <article class="- topic/topic topic nested2" aria-labelledby="ariaid-title4" id="风险管理">
            <h3 class="- topic/title title topictitle3" id="ariaid-title4">1.2 风险管理</h3>
            <div class="- topic/body body">
                <p class="- topic/p p">
                    <strong class="+ topic/ph hi-d/b ph b">债券的久期（Duration）和凸性（Convexity）：</strong>
                </p>
                <ul class="- topic/ul ul" id="风险管理__ul_cch_1b4_kdc" data-ofbid="风险管理__ul_cch_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p">
                            业务含义：久期，是衡量债券利率风险的重要指标。久期越大（债券暴露在市场的有效期限越长），代表债券价格对利率变化越敏感。凸性，是债券利率变化率对债券价格变化率的二阶导，是为了弥补久期本身也会随着利率变化而变化的不足，提升估价精确度。久期和凸性有着广泛的使用场景，比如：</p>
                        <ul class="- topic/ul ul" id="风险管理__ul_dch_1b4_kdc" data-ofbid="风险管理__ul_dch_1b4_kdc">
                            <li class="- topic/li li">
                                <p class="- topic/p p">
                                    免疫策略：通过久期和凸度匹配，构建利率变化对债券价格的影响可以互相抵消的投资组合。这样的组合使附息债券精确地近似于零息债券。久期和凸度免疫是一种消极投资策略，组合管理者并非通过利率预测追求超额收益，而是回避利率波动风险的条件下实现既定的收益率目标。</p>
                            </li>
                            <li class="- topic/li li">
                                <p class="- topic/p p">Campisi 业绩归因：在 Campisi
                                    模型中，债基收益被拆分为票息收益、国债效应收益和利差效应收益三大板块。针对债券业绩归因，在构造因子时，需要考虑到久期、凸度因子的构建。由于两者都是债券价格对收益率的敏感度指标，可以构建久期、凸度管理类的因子，以刻画利率波动下债券的收益表现。</p>
                            </li>
                        </ul>
                    </li>
                    <li class="- topic/li li">
                        <p class="- topic/p p">计算公式：</p>
                    </li>
                </ul>
                <img class="- topic/image image" id="风险管理__image_ech_1b4_kdc" src="images/ficc_func_usage_and_performance/1-4.png" width="365"/>
                <img class="- topic/image image" id="风险管理__image_fch_1b4_kdc" src="images/ficc_func_usage_and_performance/1-5.png" width="338"/>
                <p class="- topic/p p">变量说明：</p>
                <p class="- topic/p p"> n，债券到期日对应的付息次数</p>
                <p class="- topic/p p"> 注意，函数实现的久期是麦考利久期，如果需要计算修正久期，可以根据上面的公式自行调整。</p>
                <img class="- topic/image image" id="风险管理__image_gch_1b4_kdc" src="images/ficc_func_usage_and_performance/1-6.png" width="618"/>
                <p class="- topic/p p">变量说明：</p>
                <p class="- topic/p p"> n，债券到期日对应的付息次数</p>
                <ul class="- topic/ul ul" id="风险管理__ul_hch_1b4_kdc" data-ofbid="风险管理__ul_hch_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p">DolphinDB 函数实现：</p>
                    </li>
                </ul>
                <p class="- topic/p p"><a class="- topic/xref xref" href="../funcs/b/bondDuration.html">bondDuration</a>，<a class="- topic/xref xref" href="../funcs/b/bondconvexity.html">bondConvexity</a>
                    函数分别计算面值为100的债券的麦考利久期和凸性 。当前函数支持计算固息债券、零息债券和贴现债券价格。 </p>
                <p class="- topic/p p">举例说明：</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="风险管理__pre_ich_1b4_kdc" data-ofbid="风险管理__pre_ich_1b4_kdc"><code>//标量实现
sd = 2022.09.28; md = 2027.07.25;rate = 0.025; fre = 1; yld = 0.0255; redemption = 100; bas = 1; btype = 0

D = bondDuration(settlement=sd, maturity=md, coupon=rate, yield=yld, frequency=fre, basis=bas, bondtype=btype)  //久期
C = bondConvexity(settlement=sd, maturity=md, coupon=rate, yield=yld, frequency=fre, basis=bas, bondtype=btype)   //凸度

//向量化实现
n = 1000
input = table(take(2022.09.28,n) as sd, take(2027.07.25,n) as md, take(0.025,n) as rate, take(0.0255,n) as yld, take(1,n) as fre, take(100,n) as redemption, take(1,n) as basis, take(0,n) as btype)
sd = input.sd; md = input.md; rate = input.rate; yld = input.yld; fre = input.fre; redemption = input.redemption; bas = input.basis; btype = input.btype

D = bondDuration(settlement=sd, maturity=md, coupon=rate, yield=yld, frequency=fre, basis=bas, bondtype=btype)
C = bondConvexity(settlement=sd, maturity=md, coupon=rate, yield=yld, frequency=fre, basis=bas, bondtype=btype)</code></pre>
                <p class="- topic/p p">
                    <strong class="+ topic/ph hi-d/b ph b">在险价值（valueAtRisk ）：</strong>
                </p>
                <ul class="- topic/ul ul" id="风险管理__ul_jch_1b4_kdc" data-ofbid="风险管理__ul_jch_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p"> 业务含义：风控指标 Value at
                            Risk，指在市场正常波动情况下，在一定置信度下，某一证券或资产组合在未来特定时间区间内可能出现的最大价值损失。</p>
                        <ul class="- topic/ul ul" id="风险管理__ul_kch_1b4_kdc" data-ofbid="风险管理__ul_kch_1b4_kdc">
                            <li class="- topic/li li">
                                <p class="- topic/p p"> 例如银行、保险公司、投资基金、养老金基金及非金融公司采用 VaR 方法作为金融衍生工具风险管理的手段。VaR
                                    方法可以使每个交易员或交易单位都能量化地认识到正在进行有多大风险的金融交易，并可以为每个交易员或交易单位设置 VaR
                                    限额，以防过度投机行为出现，这能避免一些金融交易的重大亏损。此外，在量化交易中，部分风险因子的生成或需要使用到 VaR
                                    指标。</p>
                            </li>
                            <li class="- topic/li li">
                                <p class="- topic/p p"> 具体到期货交易，若 VaR
                                    值比历史均值等参照指标大，则表示当日进场所承担机会成本将会较大，反之，则表示当日进场所承担机会成本将会较小。而对己拥有期货头寸的期货投资者来说，VaR
                                    可以告诉投资者目前所承担的风险是否己超过可忍受的限度。</p>
                            </li>
                        </ul>
                    </li>
                    <li class="- topic/li li">
                        <p class="- topic/p p">计算公式：</p>
                    </li>
                </ul>
                <img class="- topic/image image" id="风险管理__image_lch_1b4_kdc" src="images/ficc_func_usage_and_performance/1-7.png" width="568"/>
                <p class="- topic/p p">变量说明：</p>
                <p class="- topic/p p">P，资产价值损失小于可能损失上限的概率。</p>
                <p class="- topic/p p">ΔX，某一金融资产在一定持有期损失额。</p>
                <p class="- topic/p p">Δt，一定阶段的持有期</p>
                <p class="- topic/p p">VaR，在险价值，根据价值分布确定和设定的置信区间。</p>
                <p class="- topic/p p">α，给定的置信水平</p>
                <ul class="- topic/ul ul" id="风险管理__ul_mch_1b4_kdc" data-ofbid="风险管理__ul_mch_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p">DolphinDB 函数实现：</p>
                    </li>
                </ul>
                <p class="- topic/p p"><a class="- topic/xref xref" href="../funcs/v/var_0.html">valueAtRisk</a>
                    函数用于量化在给定的置信水平（例如95%或99%）和特定时间范围内，金融资产可能遭受的最大损失，即最低收益率水平。返回值为绝对值。 </p>
                <p class="- topic/p p">举例说明：</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="风险管理__pre_nch_1b4_kdc" data-ofbid="风险管理__pre_nch_1b4_kdc"><code>ret = [0.0, -0.0023816107391389394, -0.0028351258634076834, 0.00789570628538656, 0.0022056267475062397, -0.004515475812603498, 0.0031189325339843646, 0.010774648811452205, 0.0030816164453268957, 0.02172541561228001, 0.011106185767699728, -0.005369098699244845, -0.0096490689793588, 0.0025152212699484314, 0.017822140037111668, -0.02837536728283525, 0.018373545076599204, -0.0026401111537113003, 0.019524374522517898, -0.010800546314337627, 0.014073362622486131, -0.00398277532382243, 0.008398647051501285, 0.0024056749358184904, 0.007093080335863512, -0.005332549248384733, -0.008471915938733665, -0.0038788486165083342, -0.01308504169086584, 0.00350496242864784, 0.009036118926745962, 0.0013358223875250545, 0.0036426642608267563, 0.003974568474545581, -0.003944066366522669, -0.011969668605022311, 0.015116930499066374, 0.006931427295653037, -0.0032650627551519267, 0.003407880132851648]
valueAtRisk(returns=ret, method = 'historical', confidenceLevel=0.9);   //method共有四种：'normal','lognormal','historical','monteCarlo'</code></pre>
                <p class="- topic/p p">
                    <strong class="+ topic/ph hi-d/b ph b">一致性风险度量（condValueAtRisk ）：</strong>
                </p>
                <ul class="- topic/ul ul" id="风险管理__ul_och_1b4_kdc" data-ofbid="风险管理__ul_och_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p"> 业务含义：一致性风险度量指满足次可加性、正齐次性、平移不变性和单调性的风险度量。常用的方差不满足平移不变性和单调性，而 VaR
                            不满足次可加性，所以它们都不是一致性风险度量。条件风险价值 CVaR（Conditional Value at Risk）和期望短缺
                            ES（Expected Shortfall）两种度量方法是等价的，并且满足一致性度量的定义。常用的业务场景有：</p>
                        <ul class="- topic/ul ul" id="风险管理__ul_pch_1b4_kdc" data-ofbid="风险管理__ul_pch_1b4_kdc">
                            <li class="- topic/li li">
                                <p class="- topic/p p">风险控制：CVaR 用以确定金融机构为抵御市场风险所需求的内部风险资本，并为交易员或业务部门设置风险限额，以防止过度投机行为，这与
                                    VaR 的作用类似。而 CVaR 设置头寸限额具有更多优点，CVaR
                                    限额考虑了组合的风险分散的效果，并且更易设置层次性风险限额结构。</p>
                            </li>
                            <li class="- topic/li li">
                                <p class="- topic/p p"> 资本配置：经典投资组合模型是以最小方差为基准目标的，在此基础上加入 CVaR 代替方差，对投资组合进行约束，寻找最小
                                    CVaR，即构成最优均值——CVaR 模型。这在均值-方差空间上表现为一条与 Markowitz 有效边界相交的斜线。CVaR
                                    模型的优点在于与机构的 CVaR 风险测量及 CVaR
                                    风险限额保持一致性，因此做到优化投资组合，降低投资风险。固定收益水平下，通过调整头寸使 CVaR 最小；固定 CVaR
                                    水平下，通过调整头寸使收益最大化。</p>
                            </li>
                        </ul>
                    </li>
                    <li class="- topic/li li">
                        <p class="- topic/p p">计算公式：</p>
                    </li>
                </ul>
                <img class="- topic/image image" id="风险管理__image_qch_1b4_kdc" src="images/ficc_func_usage_and_performance/1-8.png" width="256"/>
                <p class="- topic/p p">变量说明：</p>
                <p class="- topic/p p"> c，所选取的 VaR 对应的置信水平</p>
                <p class="- topic/p p">VaR，为选取的在险价值</p>
                <p class="- topic/p p">x，为损益值</p>
                <p class="- topic/p p">p(x)，为该损益值发生的概率。</p>
                <ul class="- topic/ul ul" id="风险管理__ul_rch_1b4_kdc" data-ofbid="风险管理__ul_rch_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p">DolphinDB 函数实现：</p>
                    </li>
                </ul>
                <p class="- topic/p p"><a class="- topic/xref xref" href="../funcs/c/cvar.html">condValueAtRisk</a> 函数（Conditional Value at
                    Risk，简称 CVaR；也可称 Expected Shortfall，简称 ES），用于计算超过VaR 的损失的平均值，即收益率低于 VaR
                    的情况的平均值。</p>
                <p class="- topic/p p">举例说明：</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="风险管理__pre_sch_1b4_kdc" data-ofbid="风险管理__pre_sch_1b4_kdc"><code>ret = [0.0, -0.0023816107391389394, -0.0028351258634076834, 0.00789570628538656, 0.0022056267475062397, -0.004515475812603498, 0.0031189325339843646, 0.010774648811452205, 0.0030816164453268957, 0.02172541561228001, 0.011106185767699728, -0.005369098699244845, -0.0096490689793588, 0.0025152212699484314, 0.017822140037111668, -0.02837536728283525, 0.018373545076599204, -0.0026401111537113003, 0.019524374522517898, -0.010800546314337627, 0.014073362622486131, -0.00398277532382243, 0.008398647051501285, 0.0024056749358184904, 0.007093080335863512, -0.005332549248384733, -0.008471915938733665, -0.0038788486165083342, -0.01308504169086584, 0.00350496242864784, 0.009036118926745962, 0.0013358223875250545, 0.0036426642608267563, 0.003974568474545581, -0.003944066366522669, -0.011969668605022311, 0.015116930499066374, 0.006931427295653037, -0.0032650627551519267, 0.003407880132851648]
condValueAtRisk(returns=ret, method='historical', confidenceLevel=0.9);    //method共有四种：'normal','lognormal','historical','monteCarlo'</code></pre>
            </div>
        </article>
        <article class="- topic/topic topic nested2" aria-labelledby="ariaid-title5" id="曲线拟合与插值">
            <h3 class="- topic/title title topictitle3" id="ariaid-title5">1.3 曲线拟合与插值</h3>
            <div class="- topic/body body">
                <p class="- topic/p p">
                    <strong class="+ topic/ph hi-d/b ph b">分段线性回归</strong>
                </p>
                <ul class="- topic/ul ul" id="曲线拟合与插值__ul_tch_1b4_kdc" data-ofbid="曲线拟合与插值__ul_tch_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p">
                            业务含义：对冲基金在股票交易中经常使用金融信号处理技术，但金融时间序列具有高度非平稳的特性。为此，给定一个金融时间序列数据，学习信号模式的初始处理步骤通常是将时间序列表示为线段，以减轻数据的不确定性和噪声。对于金融交易策略，线段断点数量
                            K 是市场趋势变化次数的度量，也是在获得合理交易利润的同时，在市场中交易次数的指标。因此，从最小化给定 K 的全局平方误差开始，并派生出 K
                            个段的每个段的最优表示，成为了量化交易中判断交易时机、获得超额收益的一个重要方法。</p>
                    </li>
                    <li class="- topic/li li"> 计算公式： <img class="- topic/image image" id="曲线拟合与插值__image_uch_1b4_kdc" src="images/ficc_func_usage_and_performance/1-9.png" width="703"/>
                    </li>
                </ul>
                <p class="- topic/p p">变量说明：</p>
                <p class="- topic/p p">t，代表回归所在的时点</p>
                <p class="- topic/p p">Y<sub class="+ topic/ph hi-d/sub ph sub">t</sub>，时点 t 因变量 Y 的时间序列值</p>
                <p class="- topic/p p">X<sub class="+ topic/ph hi-d/sub ph sub">t</sub>，时点 t 解释变量 X 的时间序列值</p>
                <p class="- topic/p p">β，脚标 0 代表线性回归截距，脚标 1,2... 代表不同线性分段斜率系数</p>
                <p class="- topic/p p">X<sub class="+ topic/ph hi-d/sub ph sub">t0</sub>，代表解释变量的分段点，示例中仅有一个分段点 X<sub class="+ topic/ph hi-d/sub ph sub">t0</sub>，若有多个分段点可以表示为
                        X<sub class="+ topic/ph hi-d/sub ph sub">t1</sub>，X<sub class="+ topic/ph hi-d/sub ph sub">t2</sub>….</p>
                <p class="- topic/p p">D<sub class="+ topic/ph hi-d/sub ph sub">t0</sub>，代表哑变量的分段点，示例中仅有一个分段点 D<sub class="+ topic/ph hi-d/sub ph sub">t0</sub>，若有多个分段点可以表示为
                        D<sub class="+ topic/ph hi-d/sub ph sub">t1</sub>，D<sub class="+ topic/ph hi-d/sub ph sub">t2</sub>….</p>
                <p class="- topic/p p">u<sub class="+ topic/ph hi-d/sub ph sub">t</sub>，随机变量时间序列，代表误差</p>
                <ul class="- topic/ul ul" id="曲线拟合与插值__ul_xch_1b4_kdc" data-ofbid="曲线拟合与插值__ul_xch_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p">DolphinDB 函数实现：</p>
                    </li>
                </ul>
                <p class="- topic/p p">
                    <a class="- topic/xref xref" href="../funcs/p/piecewiselinfit.html">piecewiseLinFit</a>
                    函数为给定数据点集和给定线段数拟合一个连续的分段线性回归（MSLR）函数，使用差分进化算法，通过最小化平方误差之和，来找到给定数量的线段断点的最优位置。</p>
                <p class="- topic/p p">举例说明：</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="曲线拟合与插值__pre_ych_1b4_kdc" data-ofbid="曲线拟合与插值__pre_ych_1b4_kdc"><code>X = 1..20
Y = rand(50.0,20)
model = piecewiseLinFit(X, Y, 5)
model</code></pre>
                <p class="- topic/p p">
                    <strong class="+ topic/ph hi-d/b ph b">分段线性回归模型预测</strong>
                </p>
                <ul class="- topic/ul ul" id="曲线拟合与插值__ul_zch_1b4_kdc" data-ofbid="曲线拟合与插值__ul_zch_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p">
                            业务含义：在分段回归（<code class="+ topic/ph pr-d/codeph ph codeph">piecewiseLinFit</code>）函数运行后，对资产价格等金融时间序列的未来值进行预测。</p>
                    </li>
                    <li class="- topic/li li">
                        <p class="- topic/p p"> 计算公式：使用拟合后的连续分段线性回归模型来对输入的数据点进行预测。可以用在利率曲线预测上，分段回归出其他的点。</p>
                    </li>
                    <li class="- topic/li li">
                        <p class="- topic/p p">DolphinDB 函数实现： <a class="- topic/xref xref" href="../funcs/p/pwlfpredict.html">pwlfPredict</a></p>
                    </li>
                </ul>
                <p class="- topic/p p">举例说明：</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="曲线拟合与插值__pre_adh_1b4_kdc" data-ofbid="曲线拟合与插值__pre_adh_1b4_kdc"><code>X = 1..20
Y = rand(50.0,20)
model = piecewiseLinFit(X, Y, 5)
xHat = sort(rand(20.0,10))
pwlfPredict(model, xHat)
//model.predict(xHat) 语句得到的预测结果与pwlfPredict(model, xHat)结果相同</code></pre>
                <p class="- topic/p p">
                    <strong class="+ topic/ph hi-d/b ph b">中债收益率曲线构建-赫尔米特模型</strong>
                </p>
                <ul class="- topic/ul ul" id="曲线拟合与插值__ul_bdh_1b4_kdc" data-ofbid="曲线拟合与插值__ul_bdh_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p">
                            业务含义：收益率曲线是反映一组货币和信用风险均相同，但期限不同的债券收益率值的连线。自1999年发布首条人民币国债收益率曲线以来，中央国债登记结算有限责任公司（简称“中央结算公司”）形成了一系列债券收益率曲线和估值基本原则。中债收益率曲线由中央结算公司的全资子公司，中债金融估值中心有限公司（简称“中债估值中心”）负责设计、管理、发布。在2019年发布的中债债券收益率曲线原则中，
                            中债估值中心选取了赫尔米特模型作为中债收益率曲线的构建模型，该模型更加贴合中国境内债券市场实际情况。</p>
                    </li>
                    <li class="- topic/li li">
                        <p class="- topic/p p">计算公式：</p>
                    </li>
                </ul>
                <img class="- topic/image image" id="曲线拟合与插值__image_cdh_1b4_kdc" src="images/ficc_func_usage_and_performance/1-10.png" width="743"/>
                <img class="- topic/image image" id="曲线拟合与插值__image_ddh_1b4_kdc" src="images/ficc_func_usage_and_performance/1-11.png" width="311"/>
                <p class="- topic/p p">变量说明：</p>
                <p class="- topic/p p"> x<sub class="+ topic/ph hi-d/sub ph sub">i</sub>，期限；</p>
                <p class="- topic/p p"> y<sub class="+ topic/ph hi-d/sub ph sub">i</sub>，收益率。</p>
                <ul class="- topic/ul ul" id="曲线拟合与插值__ul_edh_1b4_kdc" data-ofbid="曲线拟合与插值__ul_edh_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p">DolphinDB 函数实现：</p>
                    </li>
                </ul>
                <p class="- topic/p p"><a class="- topic/xref xref" href="../funcs/k/kroghinterpolate.html">kroghInterpolate</a>
                    函数为一组点集进行多项式插值。该多项式通过点集中所有的点对 ( x<sub class="+ topic/ph hi-d/sub ph sub">i</sub>, y<sub class="+ topic/ph hi-d/sub ph sub">i</sub>)。可以额外指定在每个点
                        x<sub class="+ topic/ph hi-d/sub ph sub">i</sub> 处的多个导数值，用户通过重复 x<sub class="+ topic/ph hi-d/sub ph sub">i</sub> 值并将导数值指定为连续的 y<sub class="+ topic/ph hi-d/sub ph sub">i</sub>
                    值来实现。</p>
                <p class="- topic/p p">举例说明：</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="曲线拟合与插值__pre_fdh_1b4_kdc" data-ofbid="曲线拟合与插值__pre_fdh_1b4_kdc"><code>def linspace(start, end, num, endpoint=true){
        if(endpoint) return end$DOUBLE\(num-1), start + end$DOUBLE\(num-1)*0..(num-1)
        else return start + end$DOUBLE\(num-1)*0..(num-1)       
}

x = 0 1 2 3 4 5
y = sin(x)
xx = linspace(0.0, 5.0, 10)[1]
yy=kroghInterpolate(x,y,xx)
yy;

yy1=kroghInterpolate(x,y,xx,1)
yy1;</code></pre>
                <p class="- topic/p p">
                    <strong class="+ topic/ph hi-d/b ph b">利率期限结构参数化拟合</strong>
                </p>
                <ul class="- topic/ul ul" id="曲线拟合与插值__ul_gdh_1b4_kdc" data-ofbid="曲线拟合与插值__ul_gdh_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p">
                            业务含义：利率期限结构是指某个时点不同期限的即期利率与到期期限的关系及变化规律。不同期限的债券会有不同的收益率，会形成特定的利率期限结构，它体现了收益率和期限之间的关系。债券的收益曲线是其它债务工具，例如抵押贷款利率和银行贷款利率的基准，而且这些曲线形状的变动可以用来预测经济产出及其增长的变动。收益率曲线一般具有以下三个特征：不同期限的债券收益率有同向运动的趋势；收益率曲线通常倾向于向上倾斜；短期债券收益率的波动通常要比长期债券收益率的波动大。参数化拟合模型则采用整段曲线拟合技术对收益率曲线进行拟合，其优点在于模型参数经济意义明确，需要估计的参数较少。其中
                            Nelson-Siegel 模型及其扩展模型是许多国家的央行进行利率期限结构静态估计的主要方法之一。</p>
                    </li>
                    <li class="- topic/li li">
                        <p class="- topic/p p">计算公式：</p>
                    </li>
                </ul>
                <p class="- topic/p p">Nelson-Siegel(NS) 模型公式：</p>
                <img class="- topic/image image" id="曲线拟合与插值__image_hdh_1b4_kdc" src="images/ficc_func_usage_and_performance/1-12.png" width="720"/>
                <p class="- topic/p p">Nelson-Siegel-Svensson(NSS) 模型公式：</p>
                <img class="- topic/image image" id="曲线拟合与插值__image_idh_1b4_kdc" src="images/ficc_func_usage_and_performance/1-13.png" width="720"/>
                <p class="- topic/p p">变量说明：</p>
                <p class="- topic/p p">λ，衰减速率因子</p>
                <p class="- topic/p p">T，为到期期限。</p>
                <ul class="- topic/ul ul" id="曲线拟合与插值__ul_kdh_1b4_kdc" data-ofbid="曲线拟合与插值__ul_kdh_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p">DolphinDB 函数实现：</p>
                    </li>
                </ul>
                <p class="- topic/p p"><a class="- topic/xref xref" href="../funcs/n/nss.html">nss</a> 函数使用 Nelson-Siegel(NS) 模型/
                    Nelson-Siegel-Svensson(NSS) 模型和 nelder-mead 优化方法来拟合债券的收益率曲线。NS
                    模型将收益率曲线表示为三个参数：水平、斜率和曲率的函数，并假设一种公式形式，反映债券收益率的历史模式。Nelson-Siegel-Svensson(NSS)
                    模型通过增加一个额外的因素来捕捉收益曲线随时间变化的斜率从而对 Nelson-Siegel 模型进行了扩展。</p>
                <p class="- topic/p p">举例说明：</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="曲线拟合与插值__pre_ldh_1b4_kdc" data-ofbid="曲线拟合与插值__pre_ldh_1b4_kdc"><code>maturity = [1,2,3,4,5,8,10,15,20,25,30]
yield = [0.0039,0.0061,NULL,NULL,0.0166,NULL,0.0258,NULL,NULL,0.0332,NULL]
model = nss(maturity, yield)

model.modelName 
//output: nss

model.params 
//output：[0.038184469794996,-0.048575389082029,-0.022287414169806,0.047523360012739,1.873046195772644,0.161159907274023]

model.fminResult
/* Output:
xopt-&gt;[0.038184469794996,-0.048575389082029,-0.022287414169806,0.047523360012739,1.873046195772644,0.161159907274023]
fopt-&gt;5.456415848001168E-9
iterations-&gt;541
fcalls-&gt;860
warnFlag-&gt;0
*/
</code></pre>
                <p class="- topic/p p"> 当需要使用上述计算出来的模型对数据进行预测时，可以使用函数 <code class="+ topic/ph pr-d/codeph ph codeph">predict</code> 也可以直接调用 NS 模型及 NSS
                    模型专用预测函数 <a class="- topic/xref xref" href="../funcs/n/nsspredict.html">nsspredict</a>
                    ，预测结果是一样的。</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="曲线拟合与插值__pre_mdh_1b4_kdc" data-ofbid="曲线拟合与插值__pre_mdh_1b4_kdc"><code>// 调用预测函数进行预测
model.predict([3,1])
// 两者结果一致
nssPredict(model, [3,1])</code></pre>
                <p class="- topic/p p">
                    <strong class="+ topic/ph hi-d/b ph b">其他相关函数：</strong>
                </p>
                <p class="- topic/p p">下表列举了 DolphinDB 其他相关的曲线拟合与插值函数，详细内容可参考具体函数的使用手册，这里不再赘述。</p>
                <div class="table-container"><table class="- topic/table table frame-all" id="曲线拟合与插值__table_ndh_1b4_kdc" data-ofbid="曲线拟合与插值__table_ndh_1b4_kdc" data-cols="3"><caption></caption><colgroup><col style="width:19.193857965451052%"/><col style="width:58.73320537428022%"/><col style="width:22.07293666026871%"/></colgroup><thead class="- topic/thead thead">
                            <tr class="- topic/row">
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="曲线拟合与插值__table_ndh_1b4_kdc__entry__1"> 插值方法 </th>
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="曲线拟合与插值__table_ndh_1b4_kdc__entry__2"> 内容概述 </th>
                                <th class="- topic/entry entry colsep-0 rowsep-1" id="曲线拟合与插值__table_ndh_1b4_kdc__entry__3"> 使用手册链接 </th>
                            </tr>
                        </thead><tbody class="- topic/tbody tbody">
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="曲线拟合与插值__table_ndh_1b4_kdc__entry__1">线性插值法</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="曲线拟合与插值__table_ndh_1b4_kdc__entry__2"> 线性插值通过已知的两个数据点 [x0, y0] 和 [x1, y1] ，求解在[x0, x1] 区间内某一个位置的 xi
                                    所对应的 yi 值。</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="曲线拟合与插值__table_ndh_1b4_kdc__entry__3">
                                    <a class="- topic/xref xref" href="../funcs/l/linearinterpolatefit.html">linearInterpolateFit</a>
                                </td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="曲线拟合与插值__table_ndh_1b4_kdc__entry__1">三次样条插值法</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="曲线拟合与插值__table_ndh_1b4_kdc__entry__2">
                                    三次样条插值法是一种常用的数值分析方法，可以通过给定的一组散点数据来拟合出一条光滑的连续函数曲线。其基本思想是用低次多项式逼近一段小区间内的数据，并利用这些多项式的连接处衔接条件来保证整个曲线的光滑性。</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="曲线拟合与插值__table_ndh_1b4_kdc__entry__3">
                                    <a class="- topic/xref xref" href="../funcs/c/cubicspline.html">cubicSpline</a>
                                </td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="曲线拟合与插值__table_ndh_1b4_kdc__entry__1">多项式拟合</td>
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="曲线拟合与插值__table_ndh_1b4_kdc__entry__2"> 根据给定的数据点集 (xi, yi)，通过一个多项式函数，使拟合曲线尽可能接近已知的数据点。</td>
                                <td class="- topic/entry entry colsep-0 rowsep-0" headers="曲线拟合与插值__table_ndh_1b4_kdc__entry__3">
                                    <a class="- topic/xref xref" href="../funcs/p/polyfit.html">polyFit</a></td>
                            </tr>
                        </tbody></table></div>
            </div>
        </article>
        <article class="- topic/topic topic nested2" aria-labelledby="ariaid-title6" id="实时计算引擎">
            <h3 class="- topic/title title topictitle3" id="ariaid-title6">1.4 实时计算引擎</h3>
            <div class="- topic/body body">
                <p class="- topic/p p">
                    在实际业务场景中，往往需要根据市场上的最新行情和信息实时拟合价格曲线，计算和更新金融资产的估值和价格。为了能够帮助客户更准确地判断市场动态，做出更优的投资决策，以及更有效地管理市场风险，DolphinDB
                    结合实时流技术和 FICC 系列函数实现了实时曲线拟合引擎和估值定价引擎。</p>
                <p class="- topic/p p">用户可以很方便地使用这两个引擎对最新价格利率数据进行拟合预测，并根据拟合预测的数据计算金融资产的估值数据，从而得以判断当前市场的报价与预估价格的差异，从而做出更准确的决策。同时快速的实时风险计算可以及时帮助客户规避市场风险。</p>
                <p class="- topic/p p">
                    <strong class="+ topic/ph hi-d/b ph b">曲线拟合引擎</strong>
                </p>
                <ul class="- topic/ul ul" id="实时计算引擎__ul_odh_1b4_kdc" data-ofbid="实时计算引擎__ul_odh_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p">业务场景：</p>
                    </li>
                </ul>
                <img class="- topic/image image" id="实时计算引擎__image_pdh_1b4_kdc" src="images/ficc_func_usage_and_performance/1-14.png" width="728"/>
                <p class="- topic/p p"> 引擎接入到实时行情数据时，根据用户自定义的曲线拟合指标，对不同组别的资产进行实时利率曲线拟合，也可以根据拟合结果进行进一步结果的预测。</p>
                <ul class="- topic/ul ul" id="实时计算引擎__ul_qdh_1b4_kdc" data-ofbid="实时计算引擎__ul_qdh_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p">DolphinDB 函数实现：</p>
                    </li>
                </ul>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="实时计算引擎__pre_rdh_1b4_kdc" data-ofbid="实时计算引擎__pre_rdh_1b4_kdc"><code>createYieldCurveEngine(name, dummyTable, assetType, fitMethod, keyColumn, modelOutput, frequency, [timeColumn], [predictDummyTable],[predictInputColumn], [predictKeyColumn],[predictTimeColumn], [predictOutput], [extraMetrics],[fitAfterPredict=false])</code></pre>
                <p class="- topic/p p">其中，<em class="+ topic/ph hi-d/i ph i">fitMethod</em>
                        是用户需要指定的具体利率拟合使用的算法。引擎支持对不同类型的资产，采用不同的拟合算法，目前支持的曲线拟合函数有：<code class="+ topic/ph pr-d/codeph ph codeph">piecewiseLinFit</code>
                    , <code class="+ topic/ph pr-d/codeph ph codeph">nss</code> , <code class="+ topic/ph pr-d/codeph ph codeph">cubicSpline</code>,
                        <code class="+ topic/ph pr-d/codeph ph codeph">linearInterpFit</code>, <code class="+ topic/ph pr-d/codeph ph codeph">polyFit</code>,
                        <code class="+ topic/ph pr-d/codeph ph codeph">kroghInterpFit</code> 。关于函数参数使用说明，请参考 <a class="- topic/xref xref" href="../funcs/c/createyieldcurveengine.html">createYieldCurveEngine</a>。</p>
                <p class="- topic/p p">
                    <strong class="+ topic/ph hi-d/b ph b">估值定价引擎</strong>
                </p>
                <ul class="- topic/ul ul" id="实时计算引擎__ul_sdh_1b4_kdc" data-ofbid="实时计算引擎__ul_sdh_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p">业务场景：</p>
                    </li>
                </ul>
                <img class="- topic/image image" id="实时计算引擎__image_tdh_1b4_kdc" src="images/ficc_func_usage_and_performance/1-15.png" width="728"/>
                <p class="- topic/p p"> 与曲线拟合引擎相似，估值定价引擎接入到实时行情数据后，可以实时根据用户自定义的计算指标，进行指标计算。</p>
                <p class="- topic/p p">
                    估值定价引擎也可以结合曲线拟合引擎一起使用，曲线拟合引擎将最新的行情数据，拟合的利率数据，预测的利率数据等发布给估值定价引擎，估值定价引擎可以根据不同的利率数据进行估值定价指标计算，以此对市场行情做出更精准的判断。</p>
                <ul class="- topic/ul ul" id="实时计算引擎__ul_udh_1b4_kdc" data-ofbid="实时计算引擎__ul_udh_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p">DolphinDB 函数实现：</p>
                    </li>
                </ul>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="实时计算引擎__pre_vdh_1b4_kdc" data-ofbid="实时计算引擎__pre_vdh_1b4_kdc"><code>createPricingEngine(name, dummyTable, timeColumn, typeColumn, securityType, method, outputTable, [securityReference], [keyColumn], [extraMetrics])</code></pre>
                <p class="- topic/p p">其中，<em class="+ topic/ph hi-d/i ph i">method</em>
                        是用户需要指定的具体估值使用的算法，也支持用户根据需要传入自定义函数或表达式。目前支持的估值计算函数有：<code class="+ topic/ph pr-d/codeph ph codeph">bondDirtyPrice</code>,
                        <code class="+ topic/ph pr-d/codeph ph codeph">bondAccrInt</code>, <code class="+ topic/ph pr-d/codeph ph codeph">bondDuration</code>,
                        <code class="+ topic/ph pr-d/codeph ph codeph">irs</code>, <code class="+ topic/ph pr-d/codeph ph codeph">vanillaOption</code>等等。关于函数参数使用说明，请参考 <a class="- topic/xref xref" href="../funcs/c/createpricingengine.html">createPricingEngine</a>。</p>
            </div>
        </article>
        <article class="- topic/topic topic nested2" aria-labelledby="ariaid-title7" id="其他相关">
            <h3 class="- topic/title title topictitle3" id="ariaid-title7">1.5 其他相关函数</h3>
            <div class="- topic/body body">
                <p class="- topic/p p"> 在实现上述函数过程中，需要用到一些数学统计类的函数，DolphinDB 专门为此开发了相关的函数并进行了一定的优化。以下是在 FICC
                    场景中常用的一些数学统计函数，这里不再对每个函数做过多的赘述，如有需要，可以自行查看开发手册查看详细信息。如果读者需要更多的函数，欢迎联系我们进行完善。</p>
                <div class="table-container"><table class="- topic/table table frame-all" id="其他相关__table_wdh_1b4_kdc" data-ofbid="其他相关__table_wdh_1b4_kdc" data-cols="2"><caption></caption><colgroup><col/><col/></colgroup><thead class="- topic/thead thead">
                            <tr class="- topic/row">
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="其他相关__table_wdh_1b4_kdc__entry__1"> 函数链接 </th>
                                <th class="- topic/entry entry colsep-0 rowsep-1" id="其他相关__table_wdh_1b4_kdc__entry__2"> 功能描述 </th>
                            </tr>
                        </thead><tbody class="- topic/tbody tbody">
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="其他相关__table_wdh_1b4_kdc__entry__1">
                                    <a class="- topic/xref xref" href="../funcs/b/brute.html">brute</a></td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="其他相关__table_wdh_1b4_kdc__entry__2">通过穷举法在给定范围内最小化一个函数</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="其他相关__table_wdh_1b4_kdc__entry__1">
                                    <a class="- topic/xref xref" href="../funcs/f/fmin.html">fmin</a>
                                </td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="其他相关__table_wdh_1b4_kdc__entry__2">使用 Nelder-Mead 单纯形算法找到目标函数的最小值。</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="其他相关__table_wdh_1b4_kdc__entry__1">
                                    <a class="- topic/xref xref" href="../funcs/f/fminbfgs.html">fminBFGS</a>
                                </td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="其他相关__table_wdh_1b4_kdc__entry__2">使用 BFGS 算法找到目标函数的最小值。</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="其他相关__table_wdh_1b4_kdc__entry__1">
                                    <a class="- topic/xref xref" href="../funcs/f/fminlbfgsb.html">fminLBFGSB</a>
                                </td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="其他相关__table_wdh_1b4_kdc__entry__2">使用 L-BFGS-B 算法找到目标函数的最小值。</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="其他相关__table_wdh_1b4_kdc__entry__1">
                                    <a class="- topic/xref xref" href="../funcs/f/fminslsqp.html">fminSLSQP</a>
                                </td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="其他相关__table_wdh_1b4_kdc__entry__2">使用顺序最小二乘编程方法（Sequential Least Squares Programming,
                                    SLSQP）找到目标函数的最小值。</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="其他相关__table_wdh_1b4_kdc__entry__1">
                                    <a class="- topic/xref xref" href="../funcs/f/fminncg.html">fminNCG</a>
                                </td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="其他相关__table_wdh_1b4_kdc__entry__2">使用牛顿共轭梯度法（Newton conjugate gradient；也称为截断牛顿法，Truncated Newton
                                    method）对目标函数进行无约束最小化。本方法适用于解决大型非线性优化问题。</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="其他相关__table_wdh_1b4_kdc__entry__1">
                                    <p class="- topic/p p">
                                        <a class="- topic/xref xref" href="../funcs/g/gaussiankde.html">gaussianKde</a>
                                    </p>
                                    <p class="- topic/p p">
                                        <a class="- topic/xref xref" href="../funcs/g/gaussiankdepredict.html">gaussianKdePredict</a>
                                    </p>
                                </td>
                                <td class="- topic/entry entry colsep-0 rowsep-0" headers="其他相关__table_wdh_1b4_kdc__entry__2">
                                    <p class="- topic/p p">使用核密度估计方法中的高斯核来估计随机变量的概率密度。</p>
                                    <p class="- topic/p p"> 生成的模型可以作为 <code class="+ topic/ph pr-d/codeph ph codeph">gaussianKdePredict</code> 函数的输入进行预测。</p>
                                </td>
                            </tr>
                        </tbody></table></div>
            </div>
        </article>
    </article>
    <article class="- topic/topic topic nested1" aria-labelledby="ariaid-title8" id="函数性能测试">
        <h2 class="- topic/title title topictitle2" id="ariaid-title8">2. 函数性能测试</h2>
        <div class="- topic/body body">
            <p class="- topic/p p">本教程对于性能测试使用的硬件环境如下：</p>
            <div class="table-container"><table class="- topic/table table frame-all" id="函数性能测试__table_xdh_1b4_kdc" data-ofbid="函数性能测试__table_xdh_1b4_kdc" data-cols="2"><caption></caption><colgroup><col/><col/></colgroup><thead class="- topic/thead thead">
                        <tr class="- topic/row">
                            <th class="- topic/entry entry colsep-1 rowsep-1" id="函数性能测试__table_xdh_1b4_kdc__entry__1"> 硬件名称 </th>
                            <th class="- topic/entry entry colsep-0 rowsep-1" id="函数性能测试__table_xdh_1b4_kdc__entry__2"> 配置信息 </th>
                        </tr>
                    </thead><tbody class="- topic/tbody tbody">
                        <tr class="- topic/row">
                            <td class="- topic/entry entry colsep-1 rowsep-1" headers="函数性能测试__table_xdh_1b4_kdc__entry__1">操作系统</td>
                            <td class="- topic/entry entry colsep-0 rowsep-1" headers="函数性能测试__table_xdh_1b4_kdc__entry__2">64位 CentOS Linux 7 (Core)</td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry colsep-1 rowsep-1" headers="函数性能测试__table_xdh_1b4_kdc__entry__1">内存</td>
                            <td class="- topic/entry entry colsep-0 rowsep-1" headers="函数性能测试__table_xdh_1b4_kdc__entry__2">256 GB</td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry colsep-1 rowsep-1" headers="函数性能测试__table_xdh_1b4_kdc__entry__1">CPU 类型</td>
                            <td class="- topic/entry entry colsep-0 rowsep-1" headers="函数性能测试__table_xdh_1b4_kdc__entry__2">Intel(R) Xeon(R) Silver 4216 CPU @ 2.10GHz</td>
                        </tr>
                        <tr class="- topic/row">
                            <td class="- topic/entry entry colsep-1 rowsep-0" headers="函数性能测试__table_xdh_1b4_kdc__entry__1">License 核数限制</td>
                            <td class="- topic/entry entry colsep-0 rowsep-0" headers="函数性能测试__table_xdh_1b4_kdc__entry__2">12核</td>
                        </tr>
                    </tbody></table></div>
        </div>
        <article class="- topic/topic topic nested2" aria-labelledby="ariaid-title9" id="数据构造及概览">
            <h3 class="- topic/title title topictitle3" id="ariaid-title9">2.1 数据构造及概览</h3>
            <div class="- topic/body body">
                <ul class="- topic/ul ul" id="数据构造及概览__ul_ydh_1b4_kdc" data-ofbid="数据构造及概览__ul_ydh_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p">数据结构</p>
                    </li>
                </ul>
                <p class="- topic/p p"> 为方便进行性能测试，本教程在保证关键字段不缺失情况下，简化了数据结构后，同时进行数据模拟构造。</p>
                <p class="- topic/p p">债券表结构：</p>
                <div class="table-container"><table class="- topic/table table frame-all" id="数据构造及概览__table_zdh_1b4_kdc" data-ofbid="数据构造及概览__table_zdh_1b4_kdc" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead">
                            <tr class="- topic/row">
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="数据构造及概览__table_zdh_1b4_kdc__entry__1"> 字段名 </th>
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="数据构造及概览__table_zdh_1b4_kdc__entry__2"> 字段含义 </th>
                                <th class="- topic/entry entry colsep-0 rowsep-1" id="数据构造及概览__table_zdh_1b4_kdc__entry__3"> 数据类型（DolphinDB） </th>
                            </tr>
                        </thead><tbody class="- topic/tbody tbody">
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__1">id</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__2">有价证券代码</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__3">SYMBOL</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__1">sd</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__2"> 有价证券的结算日</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__3">DATE</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__1">md</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__2"> 有价证券的到期日</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__3">DATE</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__1">coupon</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__2">年票息率</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__3">DOUBLE</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__1">yld</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__2">年贴现率</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__3">DOUBLE</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__1">fre</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__2">
                                    <p class="- topic/p p"> 付息频率，可选值为</p>
                                    <ul class="- topic/ul ul" id="数据构造及概览__ul_a2h_1b4_kdc" data-ofbid="数据构造及概览__ul_a2h_1b4_kdc">
                                        <li class="- topic/li li">
                                            <p class="- topic/p p">1：按年支付；</p>
                                        </li>
                                        <li class="- topic/li li">
                                            <p class="- topic/p p"> 2：按半年期支付；</p>
                                        </li>
                                        <li class="- topic/li li">
                                            <p class="- topic/p p">4：按季支付；</p>
                                        </li>
                                        <li class="- topic/li li">
                                            <p class="- topic/p p">12：按月支付。</p>
                                        </li>
                                    </ul>
                                </td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__3">INT</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__1">redemption</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__2"> 到期赎回价值，即面额</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__3">INT</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__1">basis</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__2">
                                    <p class="- topic/p p"> 日期基数基准类型</p>
                                    <ul class="- topic/ul ul" id="数据构造及概览__ul_b2h_1b4_kdc" data-ofbid="数据构造及概览__ul_b2h_1b4_kdc">
                                        <li class="- topic/li li">
                                            <p class="- topic/p p">0：US(NASD) 30/360；</p>
                                        </li>
                                        <li class="- topic/li li">
                                            <p class="- topic/p p">1：实际/实际；</p>
                                        </li>
                                        <li class="- topic/li li">
                                            <p class="- topic/p p">2：实际/360；</p>
                                        </li>
                                        <li class="- topic/li li">
                                            <p class="- topic/p p">3：实际/365；</p>
                                        </li>
                                        <li class="- topic/li li">
                                            <p class="- topic/p p">4：欧洲 30/365。</p>
                                        </li>
                                    </ul>
                                </td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__3">INT</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__1">btype</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__2">
                                    <p class="- topic/p p">债券类型</p>
                                    <ul class="- topic/ul ul" id="数据构造及概览__ul_c2h_1b4_kdc" data-ofbid="数据构造及概览__ul_c2h_1b4_kdc">
                                        <li class="- topic/li li">
                                            <p class="- topic/p p"> 0：固息债券：定期（季度、半年或一年）按息票利率支付利息；</p>
                                        </li>
                                        <li class="- topic/li li">
                                            <p class="- topic/p p"> 1：贴现债券：没有利息支付，以贴现方式发行的债券，期末 FV=面值；</p>
                                        </li>
                                        <li class="- topic/li li">
                                            <p class="- topic/p p"> 2：零息债券：期末一次性支付利息和面值，期末FV=面值+利息。</p>
                                        </li>
                                    </ul>
                                </td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="数据构造及概览__table_zdh_1b4_kdc__entry__3">INT</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="数据构造及概览__table_zdh_1b4_kdc__entry__1">ret</td>
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="数据构造及概览__table_zdh_1b4_kdc__entry__2">日收益率</td>
                                <td class="- topic/entry entry colsep-0 rowsep-0" headers="数据构造及概览__table_zdh_1b4_kdc__entry__3">DOUBLE</td>
                            </tr>
                        </tbody></table></div>
                <p class="- topic/p p"> 利率曲线数据表结构：</p>
                <div class="table-container"><table class="- topic/table table frame-all" id="数据构造及概览__table_d2h_1b4_kdc" data-ofbid="数据构造及概览__table_d2h_1b4_kdc" data-cols="3"><caption></caption><colgroup><col style="width:41.98198198198198%"/><col style="width:18.018018018018015%"/><col style="width:40%"/></colgroup><thead class="- topic/thead thead">
                            <tr class="- topic/row">
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="数据构造及概览__table_d2h_1b4_kdc__entry__1"> 字段名 </th>
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="数据构造及概览__table_d2h_1b4_kdc__entry__2"> 字段含义 </th>
                                <th class="- topic/entry entry colsep-0 rowsep-1" id="数据构造及概览__table_d2h_1b4_kdc__entry__3"> 数据类型（DolphinDB）</th>
                            </tr>
                        </thead><tbody class="- topic/tbody tbody">
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_d2h_1b4_kdc__entry__1">TRADE_DT</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_d2h_1b4_kdc__entry__2">日期</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="数据构造及概览__table_d2h_1b4_kdc__entry__3">DATE</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_d2h_1b4_kdc__entry__1">B_ANAL_CURVENUMBER</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_d2h_1b4_kdc__entry__2">曲线编号</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="数据构造及概览__table_d2h_1b4_kdc__entry__3">INT</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_d2h_1b4_kdc__entry__1">B_ANAL_CURVETERM</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="数据构造及概览__table_d2h_1b4_kdc__entry__2">到期年限</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="数据构造及概览__table_d2h_1b4_kdc__entry__3">DOUBLE</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="数据构造及概览__table_d2h_1b4_kdc__entry__1">B_ANAL_YIELD</td>
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="数据构造及概览__table_d2h_1b4_kdc__entry__2">收益率</td>
                                <td class="- topic/entry entry colsep-0 rowsep-0" headers="数据构造及概览__table_d2h_1b4_kdc__entry__3">DOUBLE</td>
                            </tr>
                        </tbody></table></div>
                <ul class="- topic/ul ul" id="数据构造及概览__ul_e2h_1b4_kdc" data-ofbid="数据构造及概览__ul_e2h_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p">数据构造</p>
                    </li>
                </ul>
                <p class="- topic/p p">本教程使用 DolphinDB
                    自带的随机数种子、随机数等函数，按上述表结构模拟生成债券的样本数据。构造的债券数据量共100万条，其中共有1万支债券，每只债券100条数据，脚本如下：</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="数据构造及概览__pre_f2h_1b4_kdc" data-ofbid="数据构造及概览__pre_f2h_1b4_kdc"><code>//FICC测试表构造
n = 10000
days = 100
startday = 2022.06.01
maturity = 2027.07.01
fretype = 1 2 4 12
basistype = 0 1 2 3 4
bondtype = 0 1 2
setRandomSeed(321)

ficc = table(
string(take(1..n,take(days,n))).symbol() as id,
take(startday..(startday+(days-1)),n*days) as sd,
take(maturity,n*days) as md,
take(rand(1..15,n)\100,take(days,n)) as coupon,
take(rand(0.1,n),take(days,n)) as yld,
take(rand(fretype,n),take(days,n)) as fre,
take(100,n*days) as redemption,
take(rand(basistype,n),take(days,n)) as basis,
take(rand(bondtype,n),take(days,n)) as btype,
randNormal(0,0.1,n*days) as ret
)</code></pre>
                <p class="- topic/p p"> 利率曲线数据可以直接从 csv 中导入，csv 数据文件见附件：</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="数据构造及概览__pre_g2h_1b4_kdc" data-ofbid="数据构造及概览__pre_g2h_1b4_kdc"><code>curveOneday = loadText("&lt;YourDir&gt;/curveOneDay.csv")</code></pre>
                <p class="- topic/p p"> </p>
                <ul class="- topic/ul ul" id="数据构造及概览__ul_h2h_1b4_kdc" data-ofbid="数据构造及概览__ul_h2h_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p">数据概览</p>
                    </li>
                </ul>
                <p class="- topic/p p"> 数据构造成功后，执行代码查看前十条 ficc 数据：</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="数据构造及概览__pre_i2h_1b4_kdc" data-ofbid="数据构造及概览__pre_i2h_1b4_kdc"><code>select top 10 * from ficc</code></pre>
                <img class="- topic/image image" id="数据构造及概览__image_j2h_1b4_kdc" src="images/ficc_func_usage_and_performance/2-1.png" width="633"/>
                <p class="- topic/p p"> 执行代码查看前十条利率曲线分段回归测试数据：</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="数据构造及概览__pre_k2h_1b4_kdc" data-ofbid="数据构造及概览__pre_k2h_1b4_kdc"><code>select top 10 * from curveOneday</code></pre>
                <img class="- topic/image image" id="数据构造及概览__image_l2h_1b4_kdc" src="images/ficc_func_usage_and_performance/2-2.png" width="564"/>
            </div>
        </article>
        <article class="- topic/topic topic nested2" aria-labelledby="ariaid-title10" id="估值定价与风控计算性能测试">
            <h3 class="- topic/title title topictitle3" id="ariaid-title10">2.2 估值定价与风控计算性能测试</h3>
            <div class="- topic/body body">
                <p class="- topic/p p">本小节测试 DolphinDB 估值定价与风控类函数，在实际大数据量业务场景下的计算效率：</p>
                <ul class="- topic/ul ul" id="估值定价与风控计算性能测试__ul_m2h_1b4_kdc" data-ofbid="估值定价与风控计算性能测试__ul_m2h_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p"> 业务场景：给定债券
                            ID，结算日，到期日，票息率，贴现率，付息频率，债券类型和收益率等数据，计算全价，应付利息，久期，凸度，在险价值（VaR）和条件在险价值（CVaR）等量价指标。</p>
                    </li>
                    <li class="- topic/li li">
                        <p class="- topic/p p">CPU 核数：估值定价与风控类函数使用内存表进行测试，只分配了一个线程运行。</p>
                    </li>
                </ul>
                <p class="- topic/p p">测试脚本如下：</p>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="估值定价与风控计算性能测试__pre_n2h_1b4_kdc" data-ofbid="估值定价与风控计算性能测试__pre_n2h_1b4_kdc"><code>defg getvar(data){
        return valueAtRisk(returns=data, method='normal', confidenceLevel=0.95)
}

defg getcvar(data){
        return condValueAtRisk(returns=data, method='normal', confidenceLevel=0.95)
}

//耗时测试
def testtime(data){
        timer{select bondDirtyPrice(settlement=sd, maturity=md, coupon=coupon, yield=yld, frequency=fre, basis=basis, bondtype=btype) from data}
        timer{select bondAccrInt(settlement=sd, maturity=md, coupon=coupon, frequency=fre, par=redemption, basis=basis) from data}
        timer{select bondDuration(settlement=sd, maturity=md, coupon=coupon, yield=yld, frequency=fre, basis=basis, bondtype=btype) from data}
        timer{select bondConvexity(settlement=sd, maturity=md, coupon=coupon, yield=yld, frequency=fre, basis=basis, bondtype=btype) from data}
        timer{select getvar(ret) from data group by id}
        timer{select getcvar(ret) from data group by id}
}
testtime(ficc)

//结果生成
def getResult(data){
        res = select id,sd,
        bondDirtyPrice(settlement=sd, maturity=md, coupon=coupon, yield=yld, frequency=fre, basis=basis, bondtype=btype) as DirtyPrice,
        bondAccrInt(settlement=sd, maturity=md, coupon=coupon, frequency=fre, par=redemption, basis=basis) as AccuredInterest,
        bondDuration(settlement=sd, maturity=md, coupon=coupon, yield=yld, frequency=fre, basis=basis, bondtype=btype) as Duration,
        bondConvexity(settlement=sd, maturity=md, coupon=coupon, yield=yld, frequency=fre, basis=basis, bondtype=btype) as Convexity from data
        update res set CleanPrice = Dirtyprice - AccuredInterest
    res1 = select getvar(ret) as VaR, getcvar(ret) as CVaR from data group by id
        return res, res1
}

res, res1 = getResult(ficc) 
res
res1</code></pre>
                <p class="- topic/p p">耗时如下：</p>
                <div class="table-container"><table class="- topic/table table frame-all" id="估值定价与风控计算性能测试__table_o2h_1b4_kdc" data-ofbid="估值定价与风控计算性能测试__table_o2h_1b4_kdc" data-cols="4"><caption></caption><colgroup><col style="width:36.74418604651162%"/><col style="width:15.503875968992245%"/><col style="width:24.806201550387595%"/><col style="width:22.945736434108525%"/></colgroup><thead class="- topic/thead thead">
                            <tr class="- topic/row">
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__1"> 估值定价与风控函数函数 </th>
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__2"> 标的个数 </th>
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__3"> 总数据量（行） </th>
                                <th class="- topic/entry entry colsep-0 rowsep-1" id="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__4"> 测试耗时（ms) </th>
                            </tr>
                        </thead><tbody class="- topic/tbody tbody">
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__1">bondDirtyPrice</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__2">10,000</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__3">100万</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__4">240</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__1">bondAccrInt</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__2">10,000</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__3">100万</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__4">104</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__1">bondDuration</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__2">10,000</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__3">100万</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__4">219</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__1">bondConvexity</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__2">10,000</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__3">100万</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__4">224</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__1">valueAtRisk</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__2">10,000</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__3">100万</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__4">225</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__1">condValueAtRisk</td>
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__2">10,000</td>
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__3">100万</td>
                                <td class="- topic/entry entry colsep-0 rowsep-0" headers="估值定价与风控计算性能测试__table_o2h_1b4_kdc__entry__4">207</td>
                            </tr>
                        </tbody></table></div>
                <p class="- topic/p p">结果展示：</p>
                <img class="- topic/image image" id="估值定价与风控计算性能测试__image_p2h_1b4_kdc" src="images/ficc_func_usage_and_performance/2-3.png" width="593"/>
            </div>
        </article>
        <article class="- topic/topic topic nested2" aria-labelledby="ariaid-title11" id="分段回归性能测试">
            <h3 class="- topic/title title topictitle3" id="ariaid-title11">2.3 分段回归性能测试</h3>
            <div class="- topic/body body">
                <p class="- topic/p p"> 本小节使用分段回归函数对不同曲线，进行不同分段数的回归计算性能测试，并观察计算效率：</p>
                <ul class="- topic/ul ul" id="分段回归性能测试__ul_q2h_1b4_kdc" data-ofbid="分段回归性能测试__ul_q2h_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p">业务场景：使用 <code class="+ topic/ph pr-d/codeph ph codeph">piecewiseLinFit</code> 函数对一天共400+标的的利率曲线数据进行测试。</p>
                        <ul class="- topic/ul ul" id="分段回归性能测试__ul_r2h_1b4_kdc" data-ofbid="分段回归性能测试__ul_r2h_1b4_kdc">
                            <li class="- topic/li li">
                                <p class="- topic/p p">分别测试了 3段、4段、5段、10段回归的性能</p>
                            </li>
                            <li class="- topic/li li">
                                <p class="- topic/p p"> 每一种情况，都测试了1只标的和多只标的下的性能</p>
                            </li>
                        </ul>
                    </li>
                    <li class="- topic/li li">
                        <p class="- topic/p p">CPU 核数：多个标的计算，使用单线程进行计算。</p>
                    </li>
                    <li class="- topic/li li">
                        <p class="- topic/p p"> 注意点：对比分段回归拟合函数和预测函数，耗时集中在模型拟合上，预测耗时可以忽略不计。因此，测试仅展示回归拟合的耗时结果。python 中有
                            pwlf 包，效果类似于 DolphinDB 中的 <code class="+ topic/ph pr-d/codeph ph codeph">picewiseLinFit</code> 函数，因此加入 python
                            耗时作为对比。python 测试代码附于文章附录。该函数由于受 openblas
                            的线程数影响较大，所以将这个线程数统一设置为1，观察两边的性能对比。</p>
                    </li>
                </ul>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="分段回归性能测试__pre_s2h_1b4_kdc" data-ofbid="分段回归性能测试__pre_s2h_1b4_kdc"><code>curveOneday = loadText("&lt;YourDir&gt;/curveOneDay.csv")
curverno = exec distinct(curveOneday.B_ANAL_CURVENUMBER) as curverno from curveOneday
def getPiecewiseLinFit(data, numSegments, symcode){
    res = select piecewiseLinFit(B_ANAL_CURVETERM,B_ANAL_YIELD,numSegments) from data where B_ANAL_CURVENUMBER = symcode
    return res
}

// 3段回归
timer{getPiecewiseLinFit(curveOneday, 3, 4242)}
timer{loop(getPiecewiseLinFit{curveOneday, 3}, curverno) }
// 4段回归
timer{getPiecewiseLinFit(curveOneday, 4, 4242)}
timer{loop(getPiecewiseLinFit{curveOneday, 4}, curverno) }
// 5段回归
timer{getPiecewiseLinFit(curveOneday, 5, 4242)}
timer{loop(getPiecewiseLinFit{curveOneday, 5}, curverno) }</code></pre>
                <p class="- topic/p p">测试性能结果如下：</p>
                <div class="table-container"><table class="- topic/table table frame-all" id="分段回归性能测试__table_t2h_1b4_kdc" data-ofbid="分段回归性能测试__table_t2h_1b4_kdc" data-cols="5"><caption></caption><colgroup><col style="width:15.868263473053892%"/><col style="width:14.970059880239523%"/><col style="width:19.46107784431138%"/><col style="width:23.80239520958084%"/><col style="width:25.898203592814372%"/></colgroup><thead class="- topic/thead thead">
                            <tr class="- topic/row">
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="分段回归性能测试__table_t2h_1b4_kdc__entry__1"> 线段数量 </th>
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="分段回归性能测试__table_t2h_1b4_kdc__entry__2"> 标的个数 </th>
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="分段回归性能测试__table_t2h_1b4_kdc__entry__3"> 数据量（行） </th>
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="分段回归性能测试__table_t2h_1b4_kdc__entry__4"> DDB测试耗时（s) </th>
                                <th class="- topic/entry entry colsep-0 rowsep-1" id="分段回归性能测试__table_t2h_1b4_kdc__entry__5"> python测试耗时（s） </th>
                            </tr>
                        </thead><tbody class="- topic/tbody tbody">
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__1" rowspan="2">
                                    <p class="- topic/p p">3</p>
                                    <p class="- topic/p p"> </p>
                                </td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__2">1</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__3">15</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__4">0.05</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__5">0.39</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__2">437</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__3">52,978</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__4">23.35</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__5">165.90</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__1" rowspan="2">
                                    <p class="- topic/p p">4</p>
                                    <p class="- topic/p p"> </p>
                                </td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__2">1</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__3">15</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__4">0.13</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__5">0.95</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__2">437</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__3">52,978</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__4">80.97</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__5">516.50</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__1" rowspan="2">
                                    <p class="- topic/p p">5</p>
                                    <p class="- topic/p p"> </p>
                                </td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__2">1</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__3">15</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__4">0.26</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__5">2.46</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__2">437</td>
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__3">52,978</td>
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__4">206.61</td>
                                <td class="- topic/entry entry colsep-0 rowsep-0" headers="分段回归性能测试__table_t2h_1b4_kdc__entry__5">1,226.80</td>
                            </tr>
                        </tbody></table></div>
                <p class="- topic/p p">执行结果如下：</p>
                <img class="- topic/image image" id="分段回归性能测试__image_u2h_1b4_kdc" src="images/ficc_func_usage_and_performance/2-4.png" width="702"/>
            </div>
        </article>
        <article class="- topic/topic topic nested2" aria-labelledby="ariaid-title12" id="赫尔米特模型">
            <h3 class="- topic/title title topictitle3" id="ariaid-title12">2.4 赫尔米特模型</h3>
            <div class="- topic/body body">
                <p class="- topic/p p">本小节测试 DolphinDB 赫尔米特函数在实际可能业务场景下的性能表现，业务场景如下：</p>
                <ul class="- topic/ul ul" id="赫尔米特模型__ul_v2h_1b4_kdc" data-ofbid="赫尔米特模型__ul_v2h_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p"> 使用了一天共400+标的的利率曲线数据进行测试。增大数据量以测试不同数据量下的性能差异。</p>
                    </li>
                    <li class="- topic/li li">
                        <p class="- topic/p p">DolphinDB 使用函数 <code class="+ topic/ph pr-d/codeph ph codeph">kroghInterpolate</code>；python 使用
                                <code class="+ topic/ph pr-d/codeph ph codeph">scipy.interpolate.KroghInterpolator</code> 函数实现。</p>
                    </li>
                    <li class="- topic/li li">
                        <p class="- topic/p p">CPU 核数：多个标的计算，但只用到了单个核，DolphinDB 可以使用向量化处理，结合 SQL 使用。</p>
                    </li>
                    <li class="- topic/li li">
                        <p class="- topic/p p">DolphinDB 代码如下，python 代码请参考附录</p>
                    </li>
                </ul>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="赫尔米特模型__pre_w2h_1b4_kdc" data-ofbid="赫尔米特模型__pre_w2h_1b4_kdc"><code>// 基础数据，性能测试
curveOneday = loadText("&lt;YourDir&gt;/curveOneDay.csv")
timer select kroghInterpolate(B_ANAL_CURVETERM,B_ANAL_YIELD,[1.3]) from curveOneday group by TRADE_DT,B_ANAL_CURVENUMBER
// 扩展成1月数据的性能测试
dateStart = 2022.01.01
dateEnd = 2022.01.31
curveOneday = select B_ANAL_CURVENUMBER, B_ANAL_CURVETERM, B_ANAL_YIELD from curveOneday
allDates = table((dateStart..dateEnd) as TRADE_DT)
curveFullMth = cj(allDates, curveOneday)
timer select kroghInterpolate(B_ANAL_CURVETERM,B_ANAL_YIELD,[1.3]) from curveFullMth group by TRADE_DT,B_ANAL_CURVENUMBER
// 扩展成1年数据的性能测试
dateStart = 2022.01.01
dateEnd = 2022.12.31
curveOneday = select B_ANAL_CURVENUMBER, B_ANAL_CURVETERM, B_ANAL_YIELD from curveOneday
allDates = table((dateStart..dateEnd) as TRADE_DT)
curveFullYear = cj(allDates, curveOneday)
timer select kroghInterpolate(B_ANAL_CURVETERM,B_ANAL_YIELD,[1.3]) from curveFullYear group by TRADE_DT,B_ANAL_CURVENUMBER
</code></pre>
                <p class="- topic/p p">测试的性能结果如下：</p>
                <div class="table-container"><table class="- topic/table table frame-all" id="赫尔米特模型__table_x2h_1b4_kdc" data-ofbid="赫尔米特模型__table_x2h_1b4_kdc" data-cols="5"><caption></caption><colgroup><col style="width:9.009009009009011%"/><col style="width:14.774774774774777%"/><col style="width:23.243243243243246%"/><col style="width:25.58558558558559%"/><col style="width:27.387387387387392%"/></colgroup><thead class="- topic/thead thead">
                            <tr class="- topic/row">
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="赫尔米特模型__table_x2h_1b4_kdc__entry__1"> 天数 </th>
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="赫尔米特模型__table_x2h_1b4_kdc__entry__2"> 标的个数 </th>
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="赫尔米特模型__table_x2h_1b4_kdc__entry__3"> 总数据量（行） </th>
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="赫尔米特模型__table_x2h_1b4_kdc__entry__4"> DDB测试耗时（s) </th>
                                <th class="- topic/entry entry colsep-0 rowsep-1" id="赫尔米特模型__table_x2h_1b4_kdc__entry__5"> python测试耗时（s) </th>
                            </tr>
                        </thead><tbody class="- topic/tbody tbody">
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="赫尔米特模型__table_x2h_1b4_kdc__entry__1">1</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="赫尔米特模型__table_x2h_1b4_kdc__entry__2">437</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="赫尔米特模型__table_x2h_1b4_kdc__entry__3">52,978</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="赫尔米特模型__table_x2h_1b4_kdc__entry__4">0.09</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="赫尔米特模型__table_x2h_1b4_kdc__entry__5">16.49</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="赫尔米特模型__table_x2h_1b4_kdc__entry__1">31</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="赫尔米特模型__table_x2h_1b4_kdc__entry__2">437</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="赫尔米特模型__table_x2h_1b4_kdc__entry__3">1,642,318</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="赫尔米特模型__table_x2h_1b4_kdc__entry__4">2.63</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="赫尔米特模型__table_x2h_1b4_kdc__entry__5">515.95</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="赫尔米特模型__table_x2h_1b4_kdc__entry__1"> 365</td>
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="赫尔米特模型__table_x2h_1b4_kdc__entry__2">437</td>
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="赫尔米特模型__table_x2h_1b4_kdc__entry__3">19,336,970</td>
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="赫尔米特模型__table_x2h_1b4_kdc__entry__4">31.01</td>
                                <td class="- topic/entry entry colsep-0 rowsep-0" headers="赫尔米特模型__table_x2h_1b4_kdc__entry__5">6038.68</td>
                            </tr>
                        </tbody></table></div>
                <p class="- topic/p p">部分计算结果展示：</p>
                <img class="- topic/image image" id="赫尔米特模型__image_y2h_1b4_kdc" src="images/ficc_func_usage_and_performance/2-5.png" width="571"/>
            </div>
        </article>
        <article class="- topic/topic topic nested2" aria-labelledby="ariaid-title13" id="Nelson-Siegel-Svensson_NSS_模型">
            <h3 class="- topic/title title topictitle3" id="ariaid-title13">2.5 Nelson-Siegel-Svensson(NSS) 模型</h3>
            <div class="- topic/body body">
                <p class="- topic/p p">本小节测试 DolphinDB <code class="+ topic/ph pr-d/codeph ph codeph">nss</code> 函数在实际可能业务场景下的性能表现，业务场景如下：</p>
                <ul class="- topic/ul ul" id="Nelson-Siegel-Svensson_NSS_模型__ul_z2h_1b4_kdc" data-ofbid="Nelson-Siegel-Svensson_NSS_模型__ul_z2h_1b4_kdc">
                    <li class="- topic/li li">
                        <p class="- topic/p p"> 使用了一天共400+标的的利率曲线数据进行测试。增大数据量以测试不同数据量下的性能差异。</p>
                    </li>
                    <li class="- topic/li li">
                        <p class="- topic/p p">DolphinDB 使用函数 <code class="+ topic/ph pr-d/codeph ph codeph">nss</code>；python 由于没有可以直接使用的函数，参照模型的公式，使用
                                <code class="+ topic/ph pr-d/codeph ph codeph">fmin</code> 和 numpy 相关函数实现。注意：python
                                代码运行可能会出现报错，这是因为<code class="+ topic/ph pr-d/codeph ph codeph"> numpy.exp</code> 函数无法处理较大数值，这与
                                <code class="+ topic/ph pr-d/codeph ph codeph">fmin</code> 迭代求解有关，但是该报错不影响代码运行，可以忽略。</p>
                    </li>
                    <li class="- topic/li li">
                        <p class="- topic/p p">CPU 核数：多个标的计算，但都只用到了单个核计算。</p>
                    </li>
                    <li class="- topic/li li">
                        <p class="- topic/p p">DolphinDB 代码如下，python 代码请参考附录：</p>
                    </li>
                </ul>
                <pre class="+ topic/pre pr-d/codeblock pre codeblock" id="Nelson-Siegel-Svensson_NSS_模型__pre_afh_1b4_kdc" data-ofbid="Nelson-Siegel-Svensson_NSS_模型__pre_afh_1b4_kdc"><code>curveOneday = loadText("&lt;YourDir&gt;/curveOneDay.csv")

// nss模型 性能对比测试
curveOneday = select * from curveOneday where B_ANAL_CURVETERM &gt; 0
def getNss(data,dt,curverno){
    return exec nss(B_ANAL_CURVETERM, B_ANAL_YIELD) from data where TRADE_DT = dt , B_ANAL_CURVENUMBER = curverno
}
dt = select distinct(curveOneday.TRADE_DT) as dt from curveOneday
curverno = select distinct(curveOneday.B_ANAL_CURVENUMBER) as curverno from curveOneday
params = cj(dt, curverno)
timer{loop(getNss{curveOneday} ,params.dt, params.curverno)}


// 扩展到1周
dateStart = 2022.01.01
dateEnd = 2022.01.07
curveOneday = select B_ANAL_CURVENUMBER, B_ANAL_CURVETERM, B_ANAL_YIELD from curveOneday
allDates = table((dateStart..dateEnd) as TRADE_DT)
curveOneWeek = cj(allDates, curveOneday)
curveOneWeek = select * from curveOneWeek where B_ANAL_CURVETERM &gt; 0
dt = select distinct(curveOneWeek.TRADE_DT) as dt from curveOneWeek
curverno = select distinct(curveOneWeek.B_ANAL_CURVENUMBER) as curverno from curveOneWeek
params = cj(dt, curverno)
timer{loop(getNss{curveOneWeek} ,params.dt, params.curverno)}

// 扩展到1月
dateStart = 2022.01.01
dateEnd = 2022.01.31
curveOneday = select B_ANAL_CURVENUMBER, B_ANAL_CURVETERM, B_ANAL_YIELD from curveOneday
allDates = table((dateStart..dateEnd) as TRADE_DT)
curveOneMonth = cj(allDates, curveOneday)
curveOneMonth = select * from curveOneMonth where B_ANAL_CURVETERM &gt; 0
dt = select distinct(curveOneMonth.TRADE_DT) as dt from curveOneMonth
curverno = select distinct(curveOneMonth.B_ANAL_CURVENUMBER) as curverno from curveOneMonth
params = cj(dt, curverno)
timer{loop(getNss{curveOneMonth} ,params.dt, params.curverno)}
</code></pre>
                <p class="- topic/p p">测试的性能结果如下：</p>
                <div class="table-container"><table class="- topic/table table frame-all" id="Nelson-Siegel-Svensson_NSS_模型__table_bfh_1b4_kdc" data-ofbid="Nelson-Siegel-Svensson_NSS_模型__table_bfh_1b4_kdc" data-cols="5"><caption></caption><colgroup><col style="width:9.009009009009011%"/><col style="width:14.774774774774777%"/><col style="width:23.243243243243246%"/><col style="width:25.58558558558559%"/><col style="width:27.387387387387392%"/></colgroup><thead class="- topic/thead thead">
                            <tr class="- topic/row">
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="Nelson-Siegel-Svensson_NSS_模型__table_bfh_1b4_kdc__entry__1"> 天数 </th>
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="Nelson-Siegel-Svensson_NSS_模型__table_bfh_1b4_kdc__entry__2"> 标的个数 </th>
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="Nelson-Siegel-Svensson_NSS_模型__table_bfh_1b4_kdc__entry__3"> 总数据量（行） </th>
                                <th class="- topic/entry entry colsep-1 rowsep-1" id="Nelson-Siegel-Svensson_NSS_模型__table_bfh_1b4_kdc__entry__4"> DDB测试耗时（s) </th>
                                <th class="- topic/entry entry colsep-0 rowsep-1" id="Nelson-Siegel-Svensson_NSS_模型__table_bfh_1b4_kdc__entry__5"> python测试耗时（s) </th>
                            </tr>
                        </thead><tbody class="- topic/tbody tbody">
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="Nelson-Siegel-Svensson_NSS_模型__table_bfh_1b4_kdc__entry__1">1</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="Nelson-Siegel-Svensson_NSS_模型__table_bfh_1b4_kdc__entry__2">437</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="Nelson-Siegel-Svensson_NSS_模型__table_bfh_1b4_kdc__entry__3">52,628</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="Nelson-Siegel-Svensson_NSS_模型__table_bfh_1b4_kdc__entry__4">4.25</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="Nelson-Siegel-Svensson_NSS_模型__table_bfh_1b4_kdc__entry__5">1,374.81</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="Nelson-Siegel-Svensson_NSS_模型__table_bfh_1b4_kdc__entry__1">7</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="Nelson-Siegel-Svensson_NSS_模型__table_bfh_1b4_kdc__entry__2">437</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="Nelson-Siegel-Svensson_NSS_模型__table_bfh_1b4_kdc__entry__3">368,396</td>
                                <td class="- topic/entry entry colsep-1 rowsep-1" headers="Nelson-Siegel-Svensson_NSS_模型__table_bfh_1b4_kdc__entry__4">31.63</td>
                                <td class="- topic/entry entry colsep-0 rowsep-1" headers="Nelson-Siegel-Svensson_NSS_模型__table_bfh_1b4_kdc__entry__5">11,503.09</td>
                            </tr>
                            <tr class="- topic/row">
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="Nelson-Siegel-Svensson_NSS_模型__table_bfh_1b4_kdc__entry__1">31</td>
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="Nelson-Siegel-Svensson_NSS_模型__table_bfh_1b4_kdc__entry__2">437</td>
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="Nelson-Siegel-Svensson_NSS_模型__table_bfh_1b4_kdc__entry__3">1,631,468</td>
                                <td class="- topic/entry entry colsep-1 rowsep-0" headers="Nelson-Siegel-Svensson_NSS_模型__table_bfh_1b4_kdc__entry__4">162.55</td>
                                <td class="- topic/entry entry colsep-0 rowsep-0" headers="Nelson-Siegel-Svensson_NSS_模型__table_bfh_1b4_kdc__entry__5">43,559.79</td>
                            </tr>
                        </tbody></table></div>
                <p class="- topic/p p">计算结果展示：</p>
                <img class="- topic/image image" id="Nelson-Siegel-Svensson_NSS_模型__image_cfh_1b4_kdc" src="images/ficc_func_usage_and_performance/2-6.png" width="760"/>
            </div>
        </article>
    </article>
    <article class="- topic/topic topic nested1" aria-labelledby="ariaid-title14" id="总结">
        <h2 class="- topic/title title topictitle2" id="ariaid-title14">3. 总结</h2>
        <div class="- topic/body body">
            <p class="- topic/p p">本教程详细介绍了 DolphinDB 在 FICC 固收领域开发的一些函数以及适用的业务场景范围，函数覆盖了估值定价、曲线拟合、风险指标计算等多种不同类型的业务场景。此外
                DolphinDB 尽可能将函数设计的更加方便，以便用户在相关的业务场景中可以快速地使用。</p>
            <p class="- topic/p p"> 本教程基于债券构造的数据和利率曲线数据，分别测试了各个函数在不同业务场景下的性能，同时与 python 的实现进行比对。可以看到，DolphinDB
                具有强大的向量化计算能力，大部分大数据量计算只需要毫秒级即可完成计算，计算性能比 python 要快一个数量级以上。</p>
            <p class="- topic/p p"> 未来随着版本更新，DolphinDB 也会推出更多更丰富的 FICC 固收系列内置函数。</p>
        </div>
    </article>
    <article class="- topic/topic topic nested1" aria-labelledby="ariaid-title15" id="FAQ">
        <h2 class="- topic/title title topictitle2" id="ariaid-title15">4. 常见问题解答（FAQ）</h2>
        <div class="- topic/body body">
            <ul class="- topic/ul ul" id="FAQ__ul_dfh_1b4_kdc" data-ofbid="FAQ__ul_dfh_1b4_kdc">
                <li class="- topic/li li">
                    <p class="- topic/p p">
                        <strong class="+ topic/ph hi-d/b ph b">函数目前主要支持哪些品种</strong>
                    </p>
                </li>
            </ul>
            <p class="- topic/p p">2.00.14 和 3.00.2 版本的 FICC
                系列函数，各类品种都有一定的支持，不过具体子品种上并不是所有都已经支持，比如信用债，可转债的估值定价正在开发中。具体支持的品种可以查阅函数详细手册来确定。</p>
            <ul class="- topic/ul ul" id="FAQ__ul_efh_1b4_kdc" data-ofbid="FAQ__ul_efh_1b4_kdc">
                <li class="- topic/li li">
                    <p class="- topic/p p">
                        <strong class="+ topic/ph hi-d/b ph b">函数的源码是否可以开放出来，是否可以直接在我们的函数的基础上进行修改</strong>
                    </p>
                </li>
            </ul>
            <p class="- topic/p p"> 函数的源码暂时不对外开放。如确实有需要，可以发邮件，电话或直接联系我司的销售市场等负责人。也欢迎对 FICC
                系列函数提出意见和建议，我们会在需求整理评估后决定是否开发支持。</p>
        </div>
    </article>
    <article class="- topic/topic topic nested1" aria-labelledby="ariaid-title16" id="appedix">
        <h2 class="- topic/title title topictitle2" id="ariaid-title16">5. 附件</h2>
        <div class="- topic/body body">
            <ul class="- topic/ul ul" id="appedix__ul_qm2_1t4_kdc" data-ofbid="appedix__ul_qm2_1t4_kdc">
                <li class="- topic/li li">性能测试使用的数据：<a class="- topic/xref xref" href="data/ficc_func_usage_and_performance/curveOneDay.csv">data/ficc_func_usage_and_performance/curveOneDay.csv</a></li>
                <li class="- topic/li li">分段回归性能测试 python 对比代码：<a class="- topic/xref xref" href="script/ficc_func_usage_and_performance/piecewiseLinFit.py">script/ficc_func_usage_and_performance/piecewiseLinFit.py</a></li>
                <li class="- topic/li li"> 赫尔米特模型性能测试 python 对比代码：<a class="- topic/xref xref" href="script/ficc_func_usage_and_performance/kroghInterpolate.py">script/ficc_func_usage_and_performance/kroghInterpolate.py</a></li>
                <li class="- topic/li li">Nelson-Siegel-Svensson(NSS) 模型性能测试 python 对比代码：<a class="- topic/xref xref" href="script/ficc_func_usage_and_performance/nss.py">script/ficc_func_usage_and_performance/nss.py</a></li>
            </ul>
        </div>
    </article>
</article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" aria-label="On this page" class="col-lg-2 d-none d-lg-block navbar d-print-none"> 
                            <div id="wh_topic_toc_content">
		                        
	                            <div class=" wh_topic_toc "><div class="wh_topic_label">在本页上</div><ul><li class="topic-item"><a href="#FICC%E4%B8%9A%E5%8A%A1%E8%83%8C%E6%99%AF%E5%8F%8A%E5%87%BD%E6%95%B0%E4%BB%8B%E7%BB%8D" data-tocid="FICC业务背景及函数介绍">1. FICC 业务背景及函数介绍</a><ul><li class="topic-item"><a href="#%E4%BC%B0%E5%80%BC%E5%AE%9A%E4%BB%B7" data-tocid="估值定价">1.1 估值定价</a></li><li class="topic-item"><a href="#%E9%A3%8E%E9%99%A9%E7%AE%A1%E7%90%86" data-tocid="风险管理">1.2 风险管理</a></li><li class="topic-item"><a href="#%E6%9B%B2%E7%BA%BF%E6%8B%9F%E5%90%88%E4%B8%8E%E6%8F%92%E5%80%BC" data-tocid="曲线拟合与插值">1.3 曲线拟合与插值</a></li><li class="topic-item"><a href="#%E5%AE%9E%E6%97%B6%E8%AE%A1%E7%AE%97%E5%BC%95%E6%93%8E" data-tocid="实时计算引擎">1.4 实时计算引擎</a></li><li class="topic-item"><a href="#%E5%85%B6%E4%BB%96%E7%9B%B8%E5%85%B3" data-tocid="其他相关">1.5 其他相关函数</a></li></ul></li><li class="topic-item"><a href="#%E5%87%BD%E6%95%B0%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95" data-tocid="函数性能测试">2. 函数性能测试</a><ul><li class="topic-item"><a href="#%E6%95%B0%E6%8D%AE%E6%9E%84%E9%80%A0%E5%8F%8A%E6%A6%82%E8%A7%88" data-tocid="数据构造及概览">2.1 数据构造及概览</a></li><li class="topic-item"><a href="#%E4%BC%B0%E5%80%BC%E5%AE%9A%E4%BB%B7%E4%B8%8E%E9%A3%8E%E6%8E%A7%E8%AE%A1%E7%AE%97%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95" data-tocid="估值定价与风控计算性能测试">2.2 估值定价与风控计算性能测试</a></li><li class="topic-item"><a href="#%E5%88%86%E6%AE%B5%E5%9B%9E%E5%BD%92%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95" data-tocid="分段回归性能测试">2.3 分段回归性能测试</a></li><li class="topic-item"><a href="#%E8%B5%AB%E5%B0%94%E7%B1%B3%E7%89%B9%E6%A8%A1%E5%9E%8B" data-tocid="赫尔米特模型">2.4 赫尔米特模型</a></li><li class="topic-item"><a href="#Nelson-Siegel-Svensson_NSS_%E6%A8%A1%E5%9E%8B" data-tocid="Nelson-Siegel-Svensson_NSS_模型">2.5 Nelson-Siegel-Svensson(NSS) 模型</a></li></ul></li><li class="topic-item"><a href="#%E6%80%BB%E7%BB%93" data-tocid="总结">3. 总结</a></li><li class="topic-item"><a href="#FAQ" data-tocid="FAQ">4. 常见问题解答（FAQ）</a></li><li class="topic-item"><a href="#appedix" data-tocid="appedix">5. 附件</a></li></ul></div>
	                        	
                        	</div>
                        </nav>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
<title>Copyright</title><p><b> ©2025 浙江智臾科技有限公司 浙ICP备18048711号-3</b></p>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
    </body>
</html>