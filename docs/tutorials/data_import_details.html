<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" data-whc_version="26.0">
    <head><link rel="shortcut icon" href="../favicon.ico"/><link rel="icon" href="../favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="数据导入是使用 DolphinDB 的重要一环。无论是从磁盘文件（如 csv 文件、txt 文件等）导入数据，还是使用插件从其他来源导入，如果忽略了一些操作细节，会导致导入失败或导入结果不符合预期。 本文将介绍使用 DolphinDB 进行数据导入时，最容易忽略的 10 个细节，涉及了数据格式、数据类型、导入速率、数据预处理、连接失败、分区冲突等方面，并给出了正确的解决方案，一起来看看吧。 ..."/><meta name="DC.rights.owner" content="(C) 版权 2025"/><meta name="copyright" content="(C) 版权 2025"/><meta name="generator" content="DITA-OT"/><meta name="DC.type" content="topic"/><meta name="DC.coverage" content=""/><meta name="DC.relation" content="../tutorials/about_tutorials.html"/><meta name="prodname" content="DolphinDB"/><meta name="brand" content="DolphinDB"/><meta name="DC.creator" content="DolphinDB"/><meta name="DC.publisher" content="DDB N/A DDB 200"/><meta name="DC.format" content="HTML5"/><meta name="DC.identifier" content="数据导入最容易忽略的十个细节"/><title>数据导入最容易忽略的十个细节</title><!--  Generated with Oxygen version 26.0, build number 2024012323.  --><meta name="wh-path2root" content="../"/><meta name="wh-toc-id" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;?workdir /tmp/temp20250305183303418/tutorials?&gt;&lt;?workdir-uri file:/tmp/temp20250305183303418/tutorials/?&gt;&lt;?path2project ../?&gt;&lt;?path2project-uri ../?&gt;&lt;?path2rootmap-uri ../?&gt;&lt;topic xmlns:dita-ot=&#34;http://dita-ot.sourceforge.net/ns/201007/dita-ot&#34; xmlns:ditaarch=&#34;http://dita.oasis-open.org/architecture/2005/&#34; class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;数据导入最容易忽略的十个细节&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;数据导入最容易忽略的十个细节&lt;/title&gt;&lt;prolog class=&#34;- topic/prolog &#34;&gt;&lt;author class=&#34;- topic/author &#34; xtrc=&#34;author:1;12:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/author&gt;&lt;publisherinformation class=&#34;- topic/publisher bookmap/publisherinformation &#34; xtrc=&#34;publisherinformation:1;14:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:1;15:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;printlocation class=&#34;- topic/data bookmap/printlocation &#34; xtrc=&#34;printlocation:1;16:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;N/A&lt;/printlocation&gt; &lt;published class=&#34;- topic/data bookmap/published &#34; xtrc=&#34;published:1;17:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:2;18:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;publishtype class=&#34;- topic/data bookmap/publishtype &#34; value=&#34;HTML&#34; xtrc=&#34;publishtype:1;19:44&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;revisionid class=&#34;- topic/ph bookmap/revisionid &#34; xtrc=&#34;revisionid:1;20:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;200&lt;/revisionid&gt; &lt;summary class=&#34;- topic/ph bookmap/summary &#34; xtrc=&#34;summary:1;22:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:1;23:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/published&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:2;25:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/publisherinformation&gt;&lt;metadata class=&#34;- topic/metadata &#34;&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:2;39:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:1;28:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;category class=&#34;- topic/category &#34; xtrc=&#34;category:1;29:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;prodinfo class=&#34;- topic/prodinfo &#34; xtrc=&#34;prodinfo:1;34:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;prodname class=&#34;- topic/prodname &#34; xtrc=&#34;prodname:1;35:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/prodname&gt; &lt;brand class=&#34;- topic/brand &#34; xtrc=&#34;brand:1;36:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/brand&gt; &lt;/prodinfo&gt;&lt;/metadata&gt;&lt;/prolog&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:1;3:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;数据导入是使用 DolphinDB 的重要一环。无论是从磁盘文件（如 csv 文件、txt 文件等）导入数据，还是使用插件从其他来源导入，如果忽略了一些操作细节，会导致导入失败或导入结果不符合预期。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:2;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;本文将介绍使用 DolphinDB 进行数据导入时，最容易忽略的 10 个细节，涉及了数据格式、数据类型、导入速率、数据预处理、连接失败、分区冲突等方面，并给出了正确的解决方案，一起来看看吧。&lt;/p&gt;&lt;/body&gt;&lt;related-links class=&#34;- topic/related-links &#34;&gt;&lt;linkpool class=&#34;- topic/linkpool &#34; xtrc=&#34;topicref:68;96:82&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;../tutorials/about_tutorials.dita&#34; mapclass=&#34;- map/topicref bookmap/chapter &#34; role=&#34;parent&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:1;5:53&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot usertext?&gt;教程&lt;/linktext&gt;&lt;?ditaot usershortdesc?&gt;&lt;desc class=&#34;- topic/desc &#34;&gt;DolphinDB 产品使用教程&lt;/desc&gt;&lt;/link&gt;&lt;/linkpool&gt;&lt;/related-links&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1-表头包含数字时的文件导入技巧&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:2;7:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:2;7:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;1. 表头包含数字时的文件导入技巧&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:2;7:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:3;9:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:1;9:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadText&lt;/codeph&gt; 和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:2;9:14&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;ploadText&lt;/codeph&gt; 是使用 DolphinDB 导入文本文件时最常使用的函数。但由于 DolphinDB 中列名必须以中文或英文字母开头，对于以数字开头的表头，&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:3;9:96&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadText&lt;/codeph&gt; 和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:4;9:109&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;ploadText&lt;/codeph&gt; 函数的处理规则如下：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:1;11:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:1;11:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;不指定 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:1;11:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;containHeader&lt;/i&gt; 时，导入文本文件时将以字符串格式读取第一行数据，并根据该数据解析列名。但如果文件第一行记录中某列记录以数字开头，那么加载文件时系统会使用 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:2;11:92&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;col0&lt;/i&gt;, &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:3;11:100&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;col1&lt;/i&gt;, … 等作为列名。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:2;12:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;指定 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:4;12:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;containHeader&lt;/i&gt; = true 时，系统将第一行数据视为标题行，并解析出列名。如果文件第一行记录中某列记录以数字开头，那么加载文件时系统会使用 “c” 加列名作为列名。&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:4;14:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;如果忽略该细节，可能导致导入结果的列名不符合预期。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:5;16:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;如导入下面的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:5;16:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;colName.csv&lt;/i&gt;，有列名以数字开头，原始结构如下：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:1;18:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;6&#34; xtrc=&#34;tgroup:1;18:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:1;18:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:2;18:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:3;18:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col4&#34; colnum=&#34;4&#34; xtrc=&#34;colspec:4;18:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col5&#34; colnum=&#34;5&#34; xtrc=&#34;colspec:5;18:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col6&#34; colnum=&#34;6&#34; xtrc=&#34;colspec:6;18:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:1;18:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:1;18:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:1;18:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:1;18:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;id&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:2;18:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:2;18:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;name&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:3;18:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:3;18:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;totalSale&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:4;18:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:4;18:39&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;2023Q1&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:5;18:51&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:5;18:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;2023Q2&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:6;18:64&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:6;18:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;2023Q3&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:1;20:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:2;20:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:7;20:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;1&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:8;20:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;shirt&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:9;20:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;8000&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:10;20:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;2000&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:11;20:51&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;3000&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:12;20:64&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;3000&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:3;21:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:13;21:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;2&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:14;21:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;skirt&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:15;21:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;10000&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:16;21:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;2000&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:17;21:51&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;5000&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:18;21:64&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;3000&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:4;22:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:19;22:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;3&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:20;22:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;hat&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:21;22:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;2000&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:22;22:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;1000&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:23;22:51&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;300&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:24;22:64&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;700&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;11-错误操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:3;24:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:3;24:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;1.1. 错误操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:3;24:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:6;26:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;不指定 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:6;26:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;containHeader&lt;/i&gt; 时，系统将会使用 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:7;26:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;col0&lt;/i&gt;, &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:8;26:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;col1&lt;/i&gt;, … 等作为列名。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:7;28:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;执行 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:5;28:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadText(&#34;/xxx/colName.csv&#34;)&lt;/codeph&gt;，导入结果如下：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/data_import_details/01.png&#34; placement=&#34;break&#34; xtrc=&#34;image:1;30:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34; dita-ot:image-width=&#34;342&#34; dita-ot:image-height=&#34;137&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:1;30:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;01&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:8;32:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;需要注意的是，由于 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:9;32:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;col0&lt;/i&gt; 和 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:10;32:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;col1&lt;/i&gt; 可以被视作一组具有离散值的变量，符合枚举类型的特征，被默认解析为 SYMBOL 类型；而 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:11;32:72&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;col2&lt;/i&gt; - &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:12;32:81&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;col5&lt;/i&gt; 这几列数据都是整数形式，被默认解析为 INT 类型，因此 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:13;32:117&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;col2&lt;/i&gt; 原本的列名 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:14;32:130&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;totalSale&lt;/i&gt; 无法写入该列，为空；&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:15;32:152&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;col3&lt;/i&gt; - &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:16;32:161&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;col5&lt;/i&gt; 原本的列名只保留了开头可以解析为数字的 2023 部分。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;12-正确操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:4;34:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:4;34:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;1.2. 正确操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:4;34:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:9;36:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;指定 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:17;36:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;containHeader&lt;/i&gt; = true 时，系统会使用 “c” 加列名作为数字开头列的列名。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:10;38:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;执行 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:6;38:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadText(&#34;/xxx/colName.csv&#34;, containHeader = true)&lt;/codeph&gt;，导入结果如下：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/data_import_details/02.png&#34; placement=&#34;break&#34; xtrc=&#34;image:2;40:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34; dita-ot:image-width=&#34;416&#34; dita-ot:image-height=&#34;112&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:2;40:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;02&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:11;42:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;对于数字开头的列名，指定 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:18;42:14&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;containHeader&lt;/i&gt; = true，可以保证数据完整性，仅在列名前添加字符 “c”，是目前最佳的解决方案。因此，当使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:7;42:79&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadText&lt;/codeph&gt; 函数导入的文本文件表头有列名以数字开头时，应该指定 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:19;42:116&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;containHeader&lt;/i&gt; = true。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;2-自动解析数据类型的导入技巧&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:5;44:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:5;44:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;2. 自动解析数据类型的导入技巧&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:5;44:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:12;46:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:8;46:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadText&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:9;46:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;ploadText&lt;/codeph&gt; 和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:10;46:26&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadTextEx&lt;/codeph&gt; 函数都提供了 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:20;46:46&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;schema&lt;/i&gt; 参数，用于传入一个表对象，以指定各字段的数据类型，并照此类型来加载数据。使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:11;46:94&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadText&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:12;46:105&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;ploadText&lt;/codeph&gt; 和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:13;46:119&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadTextEx&lt;/codeph&gt; 函数时，如果用户不指定 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:21;46:144&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;schema&lt;/i&gt; 参数，会对数据文件进行随机抽样，并基于样本决定每列的数据类型。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:13;48:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;由于自动解析数据类型的方法是对数据文件进行随机抽样，因此不一定每次都能准确决定各列的数据类型。为此，DolphinDB 提供了 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:14;48:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;extractTextSchema&lt;/codeph&gt; 函数，能够查看 DolphinDB 对数据文件进行自动解析数据类型的结果。在导入数据前，建议使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:15;48:134&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;extractTextSchema&lt;/codeph&gt; 确认对数据类型的自动解析结果；如果自动解析结果不符合预期，可以修改对应类型，并将修改后的表作为 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:16;48:202&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadText&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:17;48:213&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;ploadText&lt;/codeph&gt; 和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:18;48:227&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadTextEx&lt;/codeph&gt; 的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:22;48:242&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;schema&lt;/i&gt; 参数，再进行数据导入。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:14;50:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;如导入下面的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:23;50:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;type.csv&lt;/i&gt;，原始结构如下：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:2;52:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:2;52:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:7;52:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:8;52:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:9;52:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:2;52:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:5;52:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:25;52:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:7;52:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;id&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:26;52:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:8;52:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;ticker&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:27;52:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:9;52:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;price&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:2;54:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:6;54:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:28;54:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;1&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:29;54:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;300001&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:30;54:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;25.80&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:7;55:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:31;55:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;2&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:32;55:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;300002&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:33;55:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;6.85&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:8;56:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:34;56:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;3&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:35;56:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;300003&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:36;56:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;7.19&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;21-错误操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:6;58:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:6;58:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;2.1. 错误操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:6;58:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:15;60:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;执行 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:19;60:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadText(&#34;/xxx/type.csv&#34;)&lt;/codeph&gt;，导入结果如下：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/data_import_details/03.png&#34; placement=&#34;break&#34; xtrc=&#34;image:3;62:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34; dita-ot:image-width=&#34;176&#34; dita-ot:image-height=&#34;110&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:3;62:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;03&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:16;64:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;执行 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:20;64:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;extractTextSchema(&#34;/xxx/type.csv&#34;)&lt;/codeph&gt;，可以看到，&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:24;64:46&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;ticker&lt;/i&gt; 列被默认解析为 INT 类型，不符合预期：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/data_import_details/04.png&#34; placement=&#34;break&#34; xtrc=&#34;image:4;66:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34; dita-ot:image-width=&#34;152&#34; dita-ot:image-height=&#34;111&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:4;66:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;04&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;22-正确操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:7;68:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:7;68:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;2.2. 正确操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:7;68:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:17;70:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;可以使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:21;70:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;extractTextSchema&lt;/codeph&gt; 函数先得到自动解析结果，再将 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:25;70:41&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;ticker&lt;/i&gt; 列的类型指定为 SYMBOL 类型，并用修改后的结果作为 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:22;70:79&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadText&lt;/codeph&gt; 函数的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:26;70:94&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;schema&lt;/i&gt; 参数值进行导入，即可得到预期结果：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:1;72:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;schema = extractTextSchema(&#34;/xxx/type.csv&#34;) update schema set type =`SYMBOL where name = &#34;ticker&#34; loadText(&#34;/xxx/type.csv&#34;, schema=schema)&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/data_import_details/05.png&#34; placement=&#34;break&#34; xtrc=&#34;image:5;78:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34; dita-ot:image-width=&#34;174&#34; dita-ot:image-height=&#34;110&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:5;78:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;05&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;3-日期与时间格式数据的手动导入方法&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:8;80:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:8;80:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;3. 日期与时间格式数据的手动导入方法&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:8;80:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:18;82:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:23;82:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadText&lt;/codeph&gt; 函数导入符合日期、时间格式的数据时，如果用户不指定 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:27;82:41&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;schema&lt;/i&gt; 参数，会将符合日期、时间格式的数据优先解析为对应类型。规则如下：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:2;84:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:3;84:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;当加载的数据文件中包含了表达日期、时间的数据时，满足分隔符要求的这部分数据（日期数据分隔符包含 ”-”、”/” 和 ”.”，时间数据分隔符为 ”:”）会解析为相应的类型。例如，”12:34:56” 解析为 SECOND 类型；”23.04.10” 解析为 DATE 类型。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:4;85:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;对于不包含分隔符的数据，形如 ”yyMMdd” 的数据同时满足 0&amp;lt;=yy&amp;lt;=99，0&amp;lt;=MM&amp;lt;=12，1&amp;lt;=dd&amp;lt;=31 的条件时，会被优先解析成 DATE 类型；形如 ”yyyyMMdd” 的数据同时满足 1900&amp;lt;=yyyy&amp;lt;=2100，0&amp;lt;=MM&amp;lt;=12，1&amp;lt;=dd&amp;lt;=31 的条件时，会被优先解析成 DATE 类型。&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:19;87:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;如导入下面的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:28;87:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;notdate.csv&lt;/i&gt;，原始结构如下：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:3;89:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:3;89:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:10;89:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:11;89:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:12;89:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:3;89:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:9;89:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:37;89:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:10;89:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;id&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:38;89:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:11;89:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;ticker&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:39;89:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:12;89:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;price&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:3;91:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:10;91:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:40;91:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;1&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:41;91:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;111011&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:42;91:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;133.950&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:11;92:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:43;92:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;2&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:44;92:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;111012&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:45;92:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;125.145&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:12;93:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:46;93:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;3&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:47;93:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;111013&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:48;93:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;113.240&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;31-错误操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:9;95:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:9;95:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;3.1. 错误操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:9;95:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:20;97:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;直接使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:24;97:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadText&lt;/codeph&gt; 函数导入 DolphinDB，由于 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:29;97:35&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;ticker&lt;/i&gt; 列是形如 &#34;yyMMdd&#34; 的数据，且同时满足 0&amp;lt;=yy&amp;lt;=99，0&amp;lt;=MM&amp;lt;=12，1&amp;lt;=dd&amp;lt;=31 的条件，会被优先解析成 DATE 类型。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:21;99:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;执行 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:25;99:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadText(&#34;/xxx/notdate.csv&#34;)&lt;/codeph&gt;，导入结果如下：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/data_import_details/06.png&#34; placement=&#34;break&#34; xtrc=&#34;image:6;101:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34; dita-ot:image-width=&#34;207&#34; dita-ot:image-height=&#34;111&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:6;101:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;06&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;32-正确操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:10;103:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:10;103:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;3.2. 正确操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:10;103:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:22;105:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;导入此类符合日期、时间格式的数据时，无需使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:26;105:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;extractTextSchema&lt;/codeph&gt; 函数查看自动解析结果，可提前在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:30;105:60&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;schema&lt;/i&gt; 参数中将 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:31;105:74&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;ticker&lt;/i&gt; 列指定解析为 SYMBOL 类型，再进行导入，即可得到预期结果。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:23;107:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;执行如下代码：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:2;109:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;schema = table(`id`ticker`price as name, `INT`SYMBOL`DOUBLE as type) loadText(&#34;/xxx/notdate.csv&#34;, schema = schema)&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/data_import_details/07.png&#34; placement=&#34;break&#34; xtrc=&#34;image:7;114:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34; dita-ot:image-width=&#34;187&#34; dita-ot:image-height=&#34;112&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:7;114:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;07&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;4-提升数据导入效率的-loadtextex-函数使用建议&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:11;116:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:11;116:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;4. 提升数据导入效率的 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:27;116:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadTextEx&lt;/codeph&gt; 函数使用建议&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:11;116:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:24;118:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;在一些实际应用场景中，用户导入数据文件的下一步，都是将其写入分布式数据库进行存储，而不需要在内存中进行额外操作。DolphinDB 为此提供了 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:28;118:73&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadTextEx&lt;/codeph&gt; 函数，能够直接把数据文件入库，不需要把数据加载到内存表，既简化了步骤，又节省了时间。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:25;120:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;如导入下面的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:32;120:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;data.csv&lt;/i&gt;，原始结构如下：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:4;122:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:4;122:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:13;122:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:14;122:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:15;122:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:4;122:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:13;122:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:49;122:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:13;122:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;ID&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:50;122:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:14;122:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;date&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:51;122:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:15;122:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;vol&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:4;124:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:14;124:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:52;124:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;23&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:53;124:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;2023.08.08&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:54;124:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;34.461863990873098&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:15;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:55;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;27&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:56;125:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;2023.08.08&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:57;125:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;4.043174418620766&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:16;126:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:58;126:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;36&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:59;126:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;2023.08.08&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:60;126:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;5.356599518563599&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:17;127:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:61;127:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;98&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:62;127:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;2023.08.09&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:63;127:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;5.630887264851481&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:18;128:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:64;128:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;…&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:65;128:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;…&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:66;128:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;…&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;41-初级操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:12;130:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:12;130:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;4.1. 初级操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:12;130:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:26;132:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;如果先使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:29;132:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadText&lt;/codeph&gt; 函数把该文件加载到内存，再写入数据库，耗时 771.618ms。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:3;134:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;timer{ t = loadText(&#34;/xxx/data.csv&#34;) loadTable(&#34;dfs://test_load&#34;,&#34;data&#34;).append!(t) } &amp;gt;&amp;gt; Time elapsed: 771.618ms&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;42-进阶操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:13;143:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:13;143:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;4.2. 进阶操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:13;143:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:27;145:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;直接使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:30;145:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadTextEx&lt;/codeph&gt; 函数将该文件入库，耗时 384.097ms。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:4;147:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;timer{ loadTextEx(database(&#34;dfs://test_load&#34;), &#34;data&#34;, &#34;date&#34;, &#34;/xxx/data.csv&#34;, sortColumns=`id) } &amp;gt;&amp;gt; Time elapsed: 384.097ms&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:28;155:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;数据量越大，两种方式的耗时差异越明显。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;5-在-loadtextex-中使用-transform-参数预处理数据&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:14;157:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:14;157:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;5. 在 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:31;157:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadTextEx&lt;/codeph&gt; 中使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:32;157:26&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;transform&lt;/codeph&gt; 参数预处理数据&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:14;157:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:29;159:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;在一些实际应用场景中，用户既希望能够使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:33;159:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadTextEx&lt;/codeph&gt; 函数直接把数据入库，又希望能够对数据做一些简单处理。针对这种需求，可以在 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:34;159:72&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadTextEx&lt;/codeph&gt; 中使用 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:33;159:89&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;transform&lt;/i&gt; 参数，对数据进行处理后再入库。这种做法无需把数据加载到内存来处理，简化了操作步骤。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:30;161:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;例如，导入下面的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:34;161:10&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;dataWithNULL.csv&lt;/i&gt; 时， &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:35;161:32&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;vol&lt;/i&gt; 列有空值，需要先将 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:36;161:48&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;vol&lt;/i&gt; 列的空值填充为 0，再入库：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:5;163:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:5;163:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:16;163:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:17;163:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:18;163:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:5;163:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:19;163:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:67;163:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:16;163:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;ID&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:68;163:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:17;163:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;date&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:69;163:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:18;163:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;vol&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:5;165:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:20;165:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:70;165:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;52&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:71;165:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;2023.08.08&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:72;165:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;5.08143&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:21;166:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:73;166:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;77&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:74;166:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;2023.08.09&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:75;166:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt; &lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:22;167:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:76;167:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;35&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:77;167:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;2023.08.08&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:78;167:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;0.22431&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:23;168:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:79;168:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;99&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:80;168:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;2023.08.09&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:81;168:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt; &lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:24;169:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:82;169:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;…&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:83;169:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;…&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:84;169:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;…&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;51-初级操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:15;171:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:15;171:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;5.1. 初级操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:15;171:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:31;173:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;如果先使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:35;173:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadText&lt;/codeph&gt; 函数把该文件加载到内存，使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:36;173:33&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;nullFill!&lt;/codeph&gt; 去除空值，再写入数据库，耗时 802.23ms。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:5;175:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;timer{ t = loadText(&#34;/xxx/dataWithNULL.csv&#34;) t.nullFill!(0.0) loadTable(&#34;dfs://test_load&#34;,&#34;data&#34;).append!(t) } &amp;gt;&amp;gt; Time elapsed: 802.23ms&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;52-进阶操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:16;185:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:16;185:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;5.2. 进阶操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:16;185:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:32;187:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:37;187:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadTextEx&lt;/codeph&gt; 函数配合 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:37;187:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;transform&lt;/i&gt; 参数将该文件入库，耗时 385.086ms。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:6;189:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;timer{ loadTextEx(database(&#34;dfs://test_load&#34;), &#34;data&#34;, &#34;date&#34;, &#34;/xxx/dataWithNULL.csv&#34;, transform = nullFill!{, 0.0}, sortColumns=`id) } &amp;gt;&amp;gt; Time elapsed: 385.086 ms&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:33;197:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;可以看到，&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:38;197:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;transform&lt;/i&gt; 参数使数据预处理变得非常便捷，无需在内存中额外处理数据，可以一步入库。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;6-避免将长整型时间戳数据以-timestamp-类型导入&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:17;199:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:17;199:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;6. 避免将长整型时间戳数据以 TIMESTAMP 类型导入&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:17;199:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:34;201:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;在许多数据中，常常用长整型（LONG 类型）来表示 Unix 毫秒时间戳，即从 1970 年 1 月 1 日（UTC/GMT 的午夜）开始所经过的毫秒数。在导入这样的数据时，如果不预先指定导入类型，将会把这种形式的时间戳直接作为长整型导入，显示的是长整型数据；而如果指定这种形式的时间戳为 TIMESTAMP 类型，将其导入后并不会自动转换为对应的 TIMESTAMP，而会返回空值。因此，这两种做法的结果都不符合预期。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:35;203:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;正确的做法是，先把原始数据以 LONG 类型导入，再使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:38;203:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;timestamp&lt;/codeph&gt; 函数手动转换为对应的 TIMESTAMP。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:36;205:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;如导入下面的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:39;205:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;time.csv&lt;/i&gt;，原始结构如下：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:6;207:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:6;207:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:19;207:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:20;207:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:21;207:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:6;207:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:25;207:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:85;207:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:19;207:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;timestamp&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:86;207:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:20;207:19&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;ticker&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:87;207:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:21;207:32&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;price&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:6;209:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:26;209:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:88;209:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;1701199585108&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:89;209:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;SH2575&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:90;209:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;9.05991137959063&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:27;210:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:91;210:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;1701101960267&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:92;210:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;SH1869&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:93;210:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;9.667245978489518&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:28;211:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:94;211:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;1701292328832&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:95;211:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;SH1228&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:96;211:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;19.817104414105415&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:29;212:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:97;212:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;1701186220641&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:98;212:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;SH2471&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:99;212:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;3.389011020772159&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;61-错误操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:18;214:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:18;214:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;6.1. 错误操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:18;214:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:37;216:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;如果指定把 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:40;216:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;timestamp&lt;/i&gt; 列作为 TIMESTAMP 类型导入，该列导入结果将会全为空值：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:7;218:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;schema = extractTextSchema(&#34;/xxx/time.csv&#34;) update schema set type = &#34;TIMESTAMP&#34; where name = &#34;timestamp&#34; loadText(&#34;/xxx/time.csv&#34;, schema=schema)&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/data_import_details/08.png&#34; placement=&#34;break&#34; xtrc=&#34;image:8;224:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34; dita-ot:image-width=&#34;335&#34; dita-ot:image-height=&#34;132&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:8;224:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;08&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;62-正确操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:19;226:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:19;226:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;6.2. 正确操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:19;226:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:38;228:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;正确做法应该是把 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:41;228:10&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;timestamp&lt;/i&gt; 列以 LONG 类型直接导入，然后使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:39;228:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;replaceColumn!&lt;/codeph&gt; 和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:40;228:61&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;timestamp&lt;/codeph&gt; 函数，将其手动转换为 TIMESTAMP 类型，即可得到预期结果：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:8;230:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;t = loadText(&#34;/xxx/time.csv&#34;) replaceColumn!(t, `timestamp, timestamp(exec timestamp from t)) t&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/data_import_details/09.png&#34; placement=&#34;break&#34; xtrc=&#34;image:9;236:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34; dita-ot:image-width=&#34;416&#34; dita-ot:image-height=&#34;136&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:9;236:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;09&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;7-长整型转换为-timestamp-类型时的时区注意事项&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:20;238:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:20;238:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;7. 长整型转换为 TIMESTAMP 类型时的时区注意事项&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:20;238:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:39;240:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;有的数据库在存储时间数据时，会将其转换为全球统一的 Unix 时间戳，并单独存储时区信息（即 UTC 偏移量）。 而 DolphinDB 将时间转换为本地时间戳直接存储，不会单独存储时区信息，具体可参考：&lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/tutorials/timezone.html&#34; scope=&#34;external&#34; xtrc=&#34;xref:1;240:103&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;?ditaot usertext?&gt;时区处理&lt;/xref&gt;。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:40;242:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;因此，如果原始数据文件中的长整型是带时区信息的长整型，即已经加减了 UTC 偏移量的数据，导入 DolphinDB 进行转换时会被视为零时区数据处理，可能导致结果与预期不符。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:41;244:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;如导入下面的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:42;244:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;localtime.csv&lt;/i&gt;，原始结构如下：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:7;246:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:7;246:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:22;246:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:23;246:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:24;246:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:7;246:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:30;246:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:100;246:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:22;246:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;timestamp&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:101;246:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:23;246:19&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;ticker&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:102;246:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:24;246:32&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;price&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:7;248:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:31;248:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:103;248:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;1701331200000&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:104;248:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;SH3149&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:105;248:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;8.676103590987622&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:32;249:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:106;249:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;1701331200000&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:107;249:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;SH0803&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:108;249:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;12.16052254475653&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:33;250:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:109;250:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;1701331200000&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:110;250:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;SH2533&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:111;250:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;12.076009283773601&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:34;251:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:112;251:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;1701331200000&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:113;251:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;SH3419&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:114;251:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;0.239130933769047&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:42;253:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;其中，&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:43;253:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;timestamp&lt;/i&gt; 列应为由北京时间 2023.11.30T16:00:00.000 转换的长整型：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/data_import_details/10.png&#34; placement=&#34;break&#34; xtrc=&#34;image:10;255:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34; dita-ot:image-width=&#34;695&#34; dita-ot:image-height=&#34;56&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:10;255:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;10&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;71-错误操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:21;257:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:21;257:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;7.1. 错误操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:21;257:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:43;259:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;直接把 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:44;259:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;timestamp&lt;/i&gt; 列以 LONG 类型直接导入，然后将其手动转换为 TIMESTAMP 类型后，得到的是零时区时间，和北京时间相差 8 个小时：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:9;261:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;t = loadText(&#34;/xxx/localtime.csv&#34;) replaceColumn!(t, `timestamp, timestamp(exec timestamp from t)) t&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/data_import_details/11.png&#34; placement=&#34;break&#34; xtrc=&#34;image:11;267:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34; dita-ot:image-width=&#34;418&#34; dita-ot:image-height=&#34;135&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:11;267:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;11&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;72-正确操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:22;269:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:22;269:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;7.2. 正确操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:22;269:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:44;271:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;对于长整型转换为 TIMESTAMP 默认为零时区的现象，可以在转换类型时，利用 DolphinDB 内置的时区转换函数 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:41;271:62&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;localtime&lt;/codeph&gt;，把零时区时间转换成本地时间（本文测试的本地时间为东八区时间）：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:10;273:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;t = loadText(&#34;/xxx/localtime.csv&#34;) replaceColumn!(t, `timestamp, localtime(timestamp(exec timestamp from t))) t&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/data_import_details/12.png&#34; placement=&#34;break&#34; xtrc=&#34;image:12;279:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34; dita-ot:image-width=&#34;415&#34; dita-ot:image-height=&#34;136&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:12;279:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;12&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:45;281:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;也可以利用 DolphinDB 内置时区转换函数 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:42;281:26&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;convertTZ&lt;/codeph&gt;，完成两个指定时区之间的转换：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:11;283:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;t = loadText(&#34;/xxx/localtime.csv&#34;) replaceColumn!(t, `timestamp, convertTZ(timestamp(exec timestamp from t), &#34;UTC&#34;, &#34;Asia/Shanghai&#34;)) t&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/data_import_details/13.png&#34; placement=&#34;break&#34; xtrc=&#34;image:13;289:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34; dita-ot:image-width=&#34;408&#34; dita-ot:image-height=&#34;133&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:13;289:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;13&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;8-使用标准格式的连接字符串连接-odbc&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:23;291:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:23;291:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;8. 使用标准格式的连接字符串连接 ODBC&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:23;291:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:46;293:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;通过 ODBC 插件可以连接其它数据源，将其他数据源的数据导入到 DolphinDB。在连接其他数据源时，有可能遇到报错：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:43;293:62&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;FATAL: password authentication failed for user &#34;xxx&#34;&lt;/codeph&gt;，但用户名和密码均正确，导致排查问题来源时没有头绪。许多情况下，这是因为使用的 ODBC 连接字符串有问题。有关连接字符串的标准格式，请参阅 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://www.connectionstrings.com/&#34; scope=&#34;external&#34; xtrc=&#34;xref:2;293:187&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;?ditaot usertext?&gt;连接字符串参考&lt;/xref&gt;。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;81-错误操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:24;295:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:24;295:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;8.1. 错误操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:24;295:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:47;297:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;如下面的场景，使用 DSN 连接字符串连接 PostgreSQL，运行后出现报错：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:12;299:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;odbcConfig = &#34;DSN=PIE_PGSQL;Server=&#34;+ip+&#34;;port=&#34;+port+&#34;;DATABASE=&#34;+db+&#34;;Uid=&#34;+userName+&#34;;Password=&#34;+password+&#34;;&#34; conn = odbc::connect(odbcConfig) &amp;gt;&amp;gt; FATAL: password authentication failed for user &#34;pie_dev&#34;&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:48;306:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;Linux 版本的 ODBC 插件基于 unixODBC 开发，isql 是 unixODBC 提供的基本工具，能够快速排查 ODBC 相关问题。使用相同的 DSN 连接字符串运行 isql，出现了相同的报错：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:13;308:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;[28P01][unixODBC]FATAL: password authentication failed for user &#34;pie_dev&#34; [ISQL]ERROR: Could not SQLDriverConnect&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:49;313:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;说明该问题与 DolphinDB 的 ODBC 插件无关，可能是连接字符串有问题。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;82-正确操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:25;315:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:25;315:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;8.2. 正确操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:25;315:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:50;317:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;查阅 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://www.connectionstrings.com/&#34; scope=&#34;external&#34; xtrc=&#34;xref:3;317:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;?ditaot usertext?&gt;连接字符串参考&lt;/xref&gt;，发现 PostgreSQL 的 ODBC 标准连接字符串如下：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/data_import_details/14.png&#34; placement=&#34;break&#34; xtrc=&#34;image:14;319:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34; dita-ot:image-width=&#34;1004&#34; dita-ot:image-height=&#34;193&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:14;319:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;14&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:51;321:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;按照标准连接字符串形式，参考如下方式修改连接字符串：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:14;323:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;odbcConfig = &#34;Driver={PostgreSQL};Server=&#34;+ip+&#34;;port=&#34;+port+&#34;;DATABASE=&#34;+db+&#34;;Uid=&#34;+userName+&#34;;Password=&#34;+password+&#34;;&#34; conn = odbc::connect(odbcConfig)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:52;328:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;运行后，连接成功。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;9-同磁盘下数据解压和导入的并行处理注意事项&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:26;330:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:26;330:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;9. 同磁盘下数据解压和导入的并行处理注意事项&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:26;330:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:53;332:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;许多时候，用户的原始数据文件是压缩包形式的，需要先解压再进行导入。如果用户采取的是一边解压一边导入的方式，且原始数据所在磁盘与解压后存储 DolphinDB 数据库的磁盘是同一块时，会降低导入的速率。如果忽略这个细节，可能导致数据导入的耗时额外增加。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:54;334:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;如导入下面的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:45;334:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;mdl_6_28_0.csv&lt;/i&gt;，大小为 4.3 GB：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/data_import_details/15.png&#34; placement=&#34;break&#34; xtrc=&#34;image:15;336:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34; dita-ot:image-width=&#34;548&#34; dita-ot:image-height=&#34;197&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:15;336:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;15&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;91-错误操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:27;338:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:27;338:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;9.1. 错误操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:27;338:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:55;340:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;在该 DolphinDB 数据存储的磁盘上进行一个 .zip 文件的解压任务，同时使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:44;340:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadTextEx&lt;/codeph&gt; 函数将另一个已解压的 csv 文件入库，耗时约 1m41s：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:15;342:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;timer loadText(database(&#34;dfs://test_load&#34;), &#34;data&#34;, &#34;SecurityID&#34;, &#34;/xxx/mdl_6_28_0.csv&#34;, sortColumns=`SecurityID`UpdateTime) &amp;gt;&amp;gt; Time elapsed: 101156.78ms&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:56;348:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;在导入过程中，观察磁盘读写速率如下：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/data_import_details/16.png&#34; placement=&#34;break&#34; xtrc=&#34;image:16;350:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34; dita-ot:image-width=&#34;460&#34; dita-ot:image-height=&#34;139&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:16;350:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;16&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:57;352:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;可以看到，当在同一块磁盘同时解压数据和导入数据时，数据导入的速率降低了许多。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;92-正确操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:28;354:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:28;354:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;9.2. 正确操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:28;354:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:58;356:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;磁盘空闲，没有解压任务在执行时，直接使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:45;356:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;loadTextEx&lt;/codeph&gt; 函数入库相同的文件，耗时约 46s：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:16;358:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;timer loadText(database(&#34;dfs://test_load&#34;), &#34;data&#34;, &#34;SecurityID&#34;, &#34;/xxx/mdl_6_28_0.csv&#34;, sortColumns=`SecurityID`UpdateTime) &amp;gt;&amp;gt; Time elapsed: 46203.117ms&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:59;364:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;在导入过程中，观察 DolphinDB 磁盘读写速率如下：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/data_import_details/17.png&#34; placement=&#34;break&#34; xtrc=&#34;image:17;366:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34; dita-ot:image-width=&#34;470&#34; dita-ot:image-height=&#34;147&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:17;366:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;17&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;10-避免并行写入同一分区时的冲突解决方案&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:29;368:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:29;368:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;10. 避免并行写入同一分区时的冲突解决方案&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:29;368:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:60;370:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;在导入数据并写入分布式数据库时，有可能会存在并行写入同一分区的情况。在这种场景下，根据创建数据库时设置的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:46;370:54&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;atomic&lt;/i&gt; 参数的不同，可能出现以下不同的情况：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:3;372:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:5;372:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:47;372:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;atomic&lt;/i&gt; 参数设置为 ’TRANS’，写入事务的原子性层级为事务，即一个事务写入多个分区时，若某个分区被其他写入事务锁定而出现写入冲突，则该事务的写入全部失败。因此，该设置下，不允许并发写入同一个分区。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:6;373:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:48;373:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;atomic&lt;/i&gt; 参数设置为 ’CHUNK’，写入事务的原子性层级为分区。若一个事务写入多个分区时，某分区被其它写入事务锁定而出现冲突，系统会完成其他分区的写入，同时对之前发生冲突的分区不断尝试写入，尝试数分钟后仍冲突才放弃。此设置下，允许并发写入同一个分区，但由于不能完全保证事务的原子性，可能出现部分分区写入成功而部分分区写入失败的情况。同时由于采用了重试机制，写入速度可能较慢。&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:61;375:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;当发生分区冲突导致写入失败时，将会抛出错误代码 S00002，错误信息为：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:46;375:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&amp;lt;ChunkInTransaction&amp;gt;filepath has been owned by transaction&lt;/codeph&gt;，表示某个分区已经被一个事务锁定，新的事务无法再次锁定相同分区。如果忽略此细节，可能导致数据导入任务失败。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:62;377:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;下面的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:49;377:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;dfs://test_month&lt;/i&gt; 数据库，按月分区，且 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:50;377:35&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;atomic&lt;/i&gt; 参数为 ’TRANS’：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/data_import_details/18.png&#34; placement=&#34;break&#34; xtrc=&#34;image:18;379:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34; dita-ot:image-width=&#34;421&#34; dita-ot:image-height=&#34;398&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:18;379:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;18&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;101-错误操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:30;381:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:30;381:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;10.1. 错误操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:30;381:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:63;383:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;并行导入下面的 csv 文件入库，他们入库的目标分区都为 2023.08M：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/data_import_details/19.png&#34; placement=&#34;break&#34; xtrc=&#34;image:19;385:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34; dita-ot:image-width=&#34;480&#34; dita-ot:image-height=&#34;184&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:19;385:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;19&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:64;387:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:47;387:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;submitJob&lt;/codeph&gt; 提交导入任务：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:17;389:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;filePath = &#34;/xxx/dailyData&#34; for (i in files(filePath).filename){ submitJob(&#34;loadCSVTest&#34;, &#34;load daily files to monthly db&#34;, loadTextEx, database(&#34;dfs://test_month&#34;), &#34;data&#34;, &#34;date&#34;, filePath+i) }&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:65;396:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;查看任务完成情况，可以看到，只有一个任务导入成功，别的任务都因为分区冲突而失败，抛出错误代码 S00002：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/data_import_details/20.png&#34; placement=&#34;break&#34; xtrc=&#34;image:20;398:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34; dita-ot:image-width=&#34;1674&#34; dita-ot:image-height=&#34;207&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:20;398:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;20&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;102-正确操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:31;400:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:31;400:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;10.2. 正确操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:31;400:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:66;402:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;对于这种情况，我们可以串行导入文本文件，避免并行写入同一分区时的冲突：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:18;404:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;def loadDaily(filePath){ for (i in files(filePath).filename){ loadTextEx(database(&#34;dfs://test_month&#34;), &#34;data&#34;,`date,filePath+i,sortColumns=`ID) } } path = &#34;/xxx/dailyData/&#34; submitJob(&#34;loadCSVTest&#34;,&#34;load daily files to monthly db&#34;,loadDaily, path)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:67;415:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;查看任务完成情况，可以看到，数据能够导入成功，没有报错：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/data_import_details/21.png&#34; placement=&#34;break&#34; xtrc=&#34;image:21;417:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34; dita-ot:image-width=&#34;1168&#34; dita-ot:image-height=&#34;52&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:21;417:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;21&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;11-总结&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:32;419:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:32;419:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;11. 总结&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:32;419:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:68;421:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/data_import_details.md&#34;&gt;本文介绍了使用 DolphinDB 进行数据导入时，最容易忽略的 10 个细节，涵盖了数据格式、数据类型、导入速率、数据预处理、连接失败、分区冲突等多个方面。忽略了这些细节，可能导致数据导入失败或导入结果不符合预期。用户了解了这些细节，并合理进行数据导入，可以极大提升数据导入的速度和质量。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;"/><meta name="wh-source-relpath" content="tutorials/data_import_details.md"/><meta name="wh-out-relpath" content="tutorials/data_import_details.html"/>

    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/commons.css?buildId=2024012323"/>
    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic.css?buildId=2024012323"/>

    <script src="../oxygen-webhelp/app/options/properties.js?buildId=20250305183303"></script>
    <script src="../oxygen-webhelp/app/localization/strings.js?buildId=2024012323"></script>
    <script src="../oxygen-webhelp/app/search/index/keywords.js?buildId=20250305183303"></script>
    <script defer="defer" src="../oxygen-webhelp/app/commons.js?buildId=2024012323"></script>
    <script defer="defer" src="../oxygen-webhelp/app/topic.js?buildId=2024012323"></script>
<link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/styles.css?buildId=2024012323"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script></head>

    <body id="数据导入最容易忽略的十个细节" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            跳转到主要内容
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div xmlns:whc="http://www.oxygenxml.com/webhelp/components" class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="https://docs.dolphindb.cn/zh/index.html" class=" wh_logo d-none d-sm-block "><img src="../logo.png" alt="  DolphinDB 文档中心  "/></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="booktitle">  <span class="ph mainbooktitle">DolphinDB 文档中心</span>  </span></a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="搜索 " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="搜索查询" required="required"/><button type="submit" class="wh_search_button" aria-label="搜索"><span class="search_input_text">搜索</span></button></div></form>
            
            <script src="/vendors/react/umd/react.production.min.js" defer="defer"></script>
<script src="/vendors/react-dom/umd/react-dom.production.min.js" defer="defer"></script>
<script src="/vendors/dayjs/dayjs.min.js" defer="defer"></script>
<script src="/vendors/antd/dist/antd.min.js" defer="defer"></script>
<script src="/vendors/@ant-design/icons/dist/index.umd.min.js" defer="defer"></script>
<script src="/zh/index.js" type="module"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" defer="defer"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer="defer"><!--


--></script>
<script defer="defer"><!--

// 从主页重定向
const currentUrl = window.location.href;

// 判断当前URL是否包含index.html并且路径最后部分是index.html
if (currentUrl.endsWith('index.html')) {
    // 处理根目录下的index.html跳转
    const baseUrl = currentUrl.split('/index.html')[0]; // 获取index.html之前的部分
    const redirectUrl = `${baseUrl}/about/ddb_intro.html`; // 构建跳转路径
    window.location.href = redirectUrl; // 执行跳转
}

--></script>
            
        </div></div>
    </div>
</header>
        
        
         
        
        
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="../index.html"><span>主页</span></a></span></li><li><div class="topicref" data-id="about_tutorials"><div class="title"><a href="../tutorials/about_tutorials.html"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div></li><li><div class="topicref"><div class="title"><a href="../tutorials/scheduledJob_2.html">系统运维</a></div></div></li><li class="active"><div class="topicref" data-id="数据导入最容易忽略的十个细节"><div class="title"><a href="../tutorials/data_import_details.html">数据导入最容易忽略的十个细节</a></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="切换搜索突出显示" title="切换搜索突出显示"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="折叠截面" title="折叠截面"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="打印此页" aria-label="打印此页"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem"><div data-tocid="ddb_intro-d9713e87" class="topicref" data-id="ddb_intro" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../about/ddb_intro.html" id="ddb_intro-d9713e87-link">关于DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="chap1_getstarted-d9713e136" class="topicref" data-id="chap1_getstarted" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../getstarted/chap1_getstarted.html" id="chap1_getstarted-d9713e136-link">快速上手</a><div class="wh-tooltip"><p class="shortdesc">如何快速部署 DolphinDB、建库建表、写入和查询数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="sectionddb_deployment-d9713e189" class="topicref" data-id="sectionddb_deployment" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action sectionddb_deployment-d9713e189-link" class="wh-expand-btn"></span><div class="title"><a href="../deploy/deploy_intro.html" id="sectionddb_deployment-d9713e189-link"><span class="keyword label">部署</span></a><div class="wh-tooltip"><p class="shortdesc">如何在不同的场景中部署 DolphinDB</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259" class="topicref" data-id="new_chap_database_manage_new_chap_dbmanage_landing_page" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/cfg/db_intro.html" id="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link"><span class="keyword label">数据库</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 数据库的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_streaming-d9713e3760" class="topicref" data-id="chap7_tutorials_streaming" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_streaming-d9713e3760-link" class="wh-expand-btn"></span><div class="title"><a href="../stream/str_intro.html" id="chap7_tutorials_streaming-d9713e3760-link"><span class="keyword label">流数据</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 流数据引擎及流数据计算的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e7513" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e7513-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/db_oper/import_data.html" id="tocId-d9713e7513-link">数据迁移</a><div class="wh-tooltip"><p class="shortdesc">如何从不同数据源向 DolphinDB 迁移数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_system_management-d9713e7940" class="topicref" data-id="chap7_tutorials_system_management" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_system_management-d9713e7940-link" class="wh-expand-btn"></span><div class="title"><a href="../sys_man/om_intro.html" id="chap7_tutorials_system_management-d9713e7940-link"><span class="keyword label">系统运维</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 的系统运维功能及方法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="troubleshooting-d9713e8780" class="topicref" data-id="troubleshooting" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action troubleshooting-d9713e8780-link" class="wh-expand-btn"></span><div class="title"><a href="../error_codes/troubleshooting.html" id="troubleshooting-d9713e8780-link">故障排查</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="about_language_resources-d9713e20911" class="topicref" data-id="about_language_resources" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action about_language_resources-d9713e20911-link" class="wh-expand-btn"></span><div class="title"><a href="../progr/progr_intro.html" id="about_language_resources-d9713e20911-link"><span class="keyword label">编程语言</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 编程基本概念与方法、SQL 在 DolphinDB 的应用</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="functions_references-d9713e30925" class="topicref" data-id="functions_references" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action functions_references-d9713e30925-link" class="wh-expand-btn"></span><div class="title"><a href="../funcs/funcs_intro.html" id="functions_references-d9713e30925-link"><span class="keyword label">函数参考</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 函数分类、语法、详解及示例</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="api_protocol-d9713e94064" class="topicref" data-id="api_protocol" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action api_protocol-d9713e94064-link" class="wh-expand-btn"></span><div class="title"><a href="../api/connapi_intro.html" id="api_protocol-d9713e94064-link"><span class="keyword label">连接器 &amp; API</span></a><div class="wh-tooltip"><p class="shortdesc">面向不同编程语言的 DolphinDB API 及连接器，相关协议和用法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap6_plugin-d9713e94210" class="topicref" data-id="chap6_plugin" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap6_plugin-d9713e94210-link" class="wh-expand-btn"></span><div class="title"><a href="../plugins/plg_intro.html" id="chap6_plugin-d9713e94210-link"><span class="keyword label">插件</span></a><div class="wh-tooltip"><p class="shortdesc">多个应用场景的插件使用说明和插件开发指导</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="third_party-d9713e97904" class="topicref" data-id="third_party" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action third_party-d9713e97904-link" class="wh-expand-btn"></span><div class="title"><a href="../third_party.html" id="third_party-d9713e97904-link">第三方工具</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="about_tutorials-d9713e98227" class="topicref" data-id="about_tutorials" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action about_tutorials-d9713e98227-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/about_tutorials.html" id="about_tutorials-d9713e98227-link"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98280" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98280-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/new_users_finance.html" id="tocId-d9713e98280-link">新用户入门</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98327" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98327-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/database.html" id="tocId-d9713e98327-link">数据库</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e99111" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e99111-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/std_sql_ddb.html" id="tocId-d9713e99111-link">编程</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100448" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100448-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming-real-time-correlation-processing_2.html" id="tocId-d9713e100448-link">流数据</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="tocId-d9713e100955" class="topicref" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action tocId-d9713e100955-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/scheduledJob_2.html" id="tocId-d9713e100955-link">系统运维</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="定时作业-d9713e100956" class="topicref" data-id="定时作业" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/scheduledJob_2.html" id="定时作业-d9713e100956-link">定时作业</a></div></div></li><li role="treeitem"><div data-tocid="作业管理-d9713e101002" class="topicref" data-id="作业管理" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/job_management_tutorial_2.html" id="作业管理-d9713e101002-link">作业管理</a></div></div></li><li role="treeitem"><div data-tocid="用户权限管理-d9713e101048" class="topicref" data-id="用户权限管理" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/ACL_and_Security_2.html" id="用户权限管理-d9713e101048-link">用户权限管理</a></div></div></li><li role="treeitem"><div data-tocid="数据备份以及恢复-130202008及之后版本-d9713e101094" class="topicref" data-id="数据备份以及恢复-130202008及之后版本" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/backup-restore-new.html" id="数据备份以及恢复-130202008及之后版本-d9713e101094-link">数据备份以及恢复 （1.30.20/2.00.8及之后版本）</a></div></div></li><li role="treeitem"><div data-tocid="数据备份以及恢复-130202008以前版本-d9713e101140" class="topicref" data-id="数据备份以及恢复-130202008以前版本" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/backup_restore_before_208.html" id="数据备份以及恢复-130202008以前版本-d9713e101140-link">数据备份以及恢复 （1.30.20/2.00.8以前版本）</a></div></div></li><li role="treeitem"><div data-tocid="数据再平衡-d9713e101186" class="topicref" data-id="数据再平衡" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Data_Move_Rebalance.html" id="数据再平衡-d9713e101186-link">数据再平衡</a></div></div></li><li role="treeitem"><div data-tocid="集群间数据库同步-d9713e101232" class="topicref" data-id="集群间数据库同步" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/data_sync_among_clusters.html" id="集群间数据库同步-d9713e101232-link">集群间数据库同步</a></div></div></li><li role="treeitem"><div data-tocid="集群间异步复制-d9713e101278" class="topicref" data-id="集群间异步复制" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/async_replication.html" id="集群间异步复制-d9713e101278-link">集群间异步复制</a></div></div></li><li role="treeitem" class="active"><div data-tocid="数据导入最容易忽略的十个细节-d9713e101324" class="topicref" data-id="数据导入最容易忽略的十个细节" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/data_import_details.html" id="数据导入最容易忽略的十个细节-d9713e101324-link">数据导入最容易忽略的十个细节</a></div></div></li><li role="treeitem"><div data-tocid="线程模型-d9713e101370" class="topicref" data-id="线程模型" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/threading_model.html" id="线程模型-d9713e101370-link">线程模型</a></div></div></li><li role="treeitem"><div data-tocid="线程简介-d9713e101416" class="topicref" data-id="线程简介" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/thread_intro_2.html" id="线程简介-d9713e101416-link">线程简介</a></div></div></li><li role="treeitem"><div data-tocid="内存管理-d9713e101463" class="topicref" data-id="内存管理" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/memory_management.html" id="内存管理-d9713e101463-link">内存管理</a></div></div></li><li role="treeitem"><div data-tocid="out-of-memory-d9713e101509" class="topicref" data-id="out-of-memory" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/oom_settlement_2.html" id="out-of-memory-d9713e101509-link">Out of Memory</a></div></div></li><li role="treeitem"><div data-tocid="非标权限管理-d9713e101555" class="topicref" data-id="非标权限管理" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/non-standard_permission_management.html" id="非标权限管理-d9713e101555-link">非标权限管理</a></div></div></li><li role="treeitem"><div data-tocid="节点启动流程简析与常见问题-d9713e101601" class="topicref" data-id="节点启动流程简析与常见问题" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/node_startup_process_and_questions.html" id="节点启动流程简析与常见问题-d9713e101601-link">节点启动流程简析与常见问题</a></div></div></li><li role="treeitem"><div data-tocid="用户级别的资源跟踪详解-d9713e101647" class="topicref" data-id="用户级别的资源跟踪详解" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/user_level_resource_tracking.html" id="用户级别的资源跟踪详解-d9713e101647-link">用户级别的资源跟踪详解</a></div></div></li><li role="treeitem"><div data-tocid="使用-prometheus-监控告警-d9713e101693" class="topicref" data-id="使用-prometheus-监控告警" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/promethues2.html" id="使用-prometheus-监控告警-d9713e101693-link">使用 Prometheus 监控告警</a></div></div></li><li role="treeitem"><div data-tocid="redash-连接-dolphindb-数据源-d9713e101739" class="topicref" data-id="redash-连接-dolphindb-数据源" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/data_interface_for_redash.html" id="redash-连接-dolphindb-数据源-d9713e101739-link">Redash 连接 DolphinDB 数据源</a></div></div></li><li role="treeitem"><div data-tocid="使用-chart-组件展示数据-d9713e101785" class="topicref" data-id="使用-chart-组件展示数据" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/web_chart_integration.html" id="使用-chart-组件展示数据-d9713e101785-link">使用 chart 组件展示数据</a></div></div></li><li role="treeitem"><div data-tocid="debezium--kafka-实时同步-oracle-11g-数据到-dolphindb-运维手册-d9713e101831" class="topicref" data-id="debezium--kafka-实时同步-oracle-11g-数据到-dolphindb-运维手册" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/debezium_kafka_real_time_synchronization_of_oracle_11g_data.html" id="debezium--kafka-实时同步-oracle-11g-数据到-dolphindb-运维手册-d9713e101831-link">Debezium + Kafka 实时同步 Oracle 11g 数据到 DolphinDB 运维手册</a></div></div></li><li role="treeitem"><div data-tocid="基于_zabbix_的_dolphindb_集群运维监控-d9713e101877" class="topicref" data-id="基于_zabbix_的_dolphindb_集群运维监控" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/zabbix_cluster_monitoring.html" id="基于_zabbix_的_dolphindb_集群运维监控-d9713e101877-link">基于 Zabbix 的 DolphinDB 集群运维监控</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="模块概述-d9713e101923" class="topicref" data-id="模块概述" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action 模块概述-d9713e101923-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/tu_modules.html" id="模块概述-d9713e101923-link">模块</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e102568" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e102568-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/OHLC_2.html" id="tocId-d9713e102568-link">金融场景案例</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e104827" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e104827-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_engine_anomaly_alerts_2.html" id="tocId-d9713e104827-link">物联网场景案例</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105795" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105795-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/dolphindb_tensor_libtorch_tutorial.html" id="tocId-d9713e105795-link">机器学习</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105842" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105842-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/api_performance.html" id="tocId-d9713e105842-link">测试报告</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105982" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105982-link" class="wh-expand-btn"></span><div class="title"><a href="../rn/server/3_00_2.html" id="tocId-d9713e105982-link">版本说明</a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 版本发布历史</p></div></div></div></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-7 col-md-9 col-sm-12" id="wh_topic_body">
                        <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        <button id="wh_close_topic_toc_button" class="close-toc-button d-none" aria-label="Toggle topic table of content" aria-controls="wh_topic_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        <div class=" wh_topic_content body "><main role="main"><article class="- topic/topic topic" role="article" aria-labelledby="ariaid-title1"><h1 class="- topic/title title topictitle1" id="ariaid-title1">数据导入最容易忽略的十个细节</h1><div class="- topic/body body"><p class="- topic/p p">数据导入是使用 DolphinDB 的重要一环。无论是从磁盘文件（如 csv 文件、txt 文件等）导入数据，还是使用插件从其他来源导入，如果忽略了一些操作细节，会导致导入失败或导入结果不符合预期。</p><p class="- topic/p p">本文将介绍使用 DolphinDB 进行数据导入时，最容易忽略的 10 个细节，涉及了数据格式、数据类型、导入速率、数据预处理、连接失败、分区冲突等方面，并给出了正确的解决方案，一起来看看吧。</p></div><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title2" id="1-表头包含数字时的文件导入技巧"><h2 class="- topic/title title topictitle2" id="ariaid-title2">1. 表头包含数字时的文件导入技巧</h2><div class="- topic/body body"><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">loadText</code> 和 <code class="+ topic/ph pr-d/codeph ph codeph">ploadText</code> 是使用 DolphinDB 导入文本文件时最常使用的函数。但由于 DolphinDB 中列名必须以中文或英文字母开头，对于以数字开头的表头，<code class="+ topic/ph pr-d/codeph ph codeph">loadText</code> 和 <code class="+ topic/ph pr-d/codeph ph codeph">ploadText</code> 函数的处理规则如下：</p><ul class="- topic/ul ul"><li class="- topic/li li">不指定 <em class="+ topic/ph hi-d/i ph i">containHeader</em> 时，导入文本文件时将以字符串格式读取第一行数据，并根据该数据解析列名。但如果文件第一行记录中某列记录以数字开头，那么加载文件时系统会使用 <em class="+ topic/ph hi-d/i ph i">col0</em>, <em class="+ topic/ph hi-d/i ph i">col1</em>, … 等作为列名。</li><li class="- topic/li li">指定 <em class="+ topic/ph hi-d/i ph i">containHeader</em> = true 时，系统将第一行数据视为标题行，并解析出列名。如果文件第一行记录中某列记录以数字开头，那么加载文件时系统会使用 “c” 加列名作为列名。</li></ul><p class="- topic/p p">如果忽略该细节，可能导致导入结果的列名不符合预期。</p><p class="- topic/p p">如导入下面的 <em class="+ topic/ph hi-d/i ph i">colName.csv</em>，有列名以数字开头，原始结构如下：</p><div class="table-container"><table class="- topic/table table" data-cols="6"><caption></caption><colgroup><col/><col/><col/><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="1-表头包含数字时的文件导入技巧__entry__1"><strong class="+ topic/ph hi-d/b ph b">id</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="1-表头包含数字时的文件导入技巧__entry__2"><strong class="+ topic/ph hi-d/b ph b">name</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="1-表头包含数字时的文件导入技巧__entry__3"><strong class="+ topic/ph hi-d/b ph b">totalSale</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="1-表头包含数字时的文件导入技巧__entry__4"><strong class="+ topic/ph hi-d/b ph b">2023Q1</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="1-表头包含数字时的文件导入技巧__entry__5"><strong class="+ topic/ph hi-d/b ph b">2023Q2</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="1-表头包含数字时的文件导入技巧__entry__6"><strong class="+ topic/ph hi-d/b ph b">2023Q3</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-表头包含数字时的文件导入技巧__entry__1">1</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-表头包含数字时的文件导入技巧__entry__2">shirt</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-表头包含数字时的文件导入技巧__entry__3">8000</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-表头包含数字时的文件导入技巧__entry__4">2000</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-表头包含数字时的文件导入技巧__entry__5">3000</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-表头包含数字时的文件导入技巧__entry__6">3000</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-表头包含数字时的文件导入技巧__entry__1">2</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-表头包含数字时的文件导入技巧__entry__2">skirt</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-表头包含数字时的文件导入技巧__entry__3">10000</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-表头包含数字时的文件导入技巧__entry__4">2000</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-表头包含数字时的文件导入技巧__entry__5">5000</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-表头包含数字时的文件导入技巧__entry__6">3000</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-表头包含数字时的文件导入技巧__entry__1">3</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-表头包含数字时的文件导入技巧__entry__2">hat</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-表头包含数字时的文件导入技巧__entry__3">2000</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-表头包含数字时的文件导入技巧__entry__4">1000</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-表头包含数字时的文件导入技巧__entry__5">300</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1-表头包含数字时的文件导入技巧__entry__6">700</td></tr></tbody></table></div></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title3" id="11-错误操作"><h3 class="- topic/title title topictitle3" id="ariaid-title3">1.1. 错误操作</h3><div class="- topic/body body"><p class="- topic/p p">不指定 <em class="+ topic/ph hi-d/i ph i">containHeader</em> 时，系统将会使用 <em class="+ topic/ph hi-d/i ph i">col0</em>, <em class="+ topic/ph hi-d/i ph i">col1</em>, … 等作为列名。</p><p class="- topic/p p">执行 <code class="+ topic/ph pr-d/codeph ph codeph">loadText("/xxx/colName.csv")</code>，导入结果如下：</p><br/><img class="- topic/image image" src="images/data_import_details/01.png" alt="01"/><br/><p class="- topic/p p">需要注意的是，由于 <em class="+ topic/ph hi-d/i ph i">col0</em> 和 <em class="+ topic/ph hi-d/i ph i">col1</em> 可以被视作一组具有离散值的变量，符合枚举类型的特征，被默认解析为 SYMBOL 类型；而 <em class="+ topic/ph hi-d/i ph i">col2</em> - <em class="+ topic/ph hi-d/i ph i">col5</em> 这几列数据都是整数形式，被默认解析为 INT 类型，因此 <em class="+ topic/ph hi-d/i ph i">col2</em> 原本的列名 <em class="+ topic/ph hi-d/i ph i">totalSale</em> 无法写入该列，为空；<em class="+ topic/ph hi-d/i ph i">col3</em> - <em class="+ topic/ph hi-d/i ph i">col5</em> 原本的列名只保留了开头可以解析为数字的 2023 部分。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title4" id="12-正确操作"><h3 class="- topic/title title topictitle3" id="ariaid-title4">1.2. 正确操作</h3><div class="- topic/body body"><p class="- topic/p p">指定 <em class="+ topic/ph hi-d/i ph i">containHeader</em> = true 时，系统会使用 “c” 加列名作为数字开头列的列名。</p><p class="- topic/p p">执行 <code class="+ topic/ph pr-d/codeph ph codeph">loadText("/xxx/colName.csv", containHeader = true)</code>，导入结果如下：</p><br/><img class="- topic/image image" src="images/data_import_details/02.png" alt="02"/><br/><p class="- topic/p p">对于数字开头的列名，指定 <em class="+ topic/ph hi-d/i ph i">containHeader</em> = true，可以保证数据完整性，仅在列名前添加字符 “c”，是目前最佳的解决方案。因此，当使用 <code class="+ topic/ph pr-d/codeph ph codeph">loadText</code> 函数导入的文本文件表头有列名以数字开头时，应该指定 <em class="+ topic/ph hi-d/i ph i">containHeader</em> = true。</p></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title5" id="2-自动解析数据类型的导入技巧"><h2 class="- topic/title title topictitle2" id="ariaid-title5">2. 自动解析数据类型的导入技巧</h2><div class="- topic/body body"><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">loadText</code>、<code class="+ topic/ph pr-d/codeph ph codeph">ploadText</code> 和 <code class="+ topic/ph pr-d/codeph ph codeph">loadTextEx</code> 函数都提供了 <em class="+ topic/ph hi-d/i ph i">schema</em> 参数，用于传入一个表对象，以指定各字段的数据类型，并照此类型来加载数据。使用 <code class="+ topic/ph pr-d/codeph ph codeph">loadText</code>、<code class="+ topic/ph pr-d/codeph ph codeph">ploadText</code> 和 <code class="+ topic/ph pr-d/codeph ph codeph">loadTextEx</code> 函数时，如果用户不指定 <em class="+ topic/ph hi-d/i ph i">schema</em> 参数，会对数据文件进行随机抽样，并基于样本决定每列的数据类型。</p><p class="- topic/p p">由于自动解析数据类型的方法是对数据文件进行随机抽样，因此不一定每次都能准确决定各列的数据类型。为此，DolphinDB 提供了 <code class="+ topic/ph pr-d/codeph ph codeph">extractTextSchema</code> 函数，能够查看 DolphinDB 对数据文件进行自动解析数据类型的结果。在导入数据前，建议使用 <code class="+ topic/ph pr-d/codeph ph codeph">extractTextSchema</code> 确认对数据类型的自动解析结果；如果自动解析结果不符合预期，可以修改对应类型，并将修改后的表作为 <code class="+ topic/ph pr-d/codeph ph codeph">loadText</code>、<code class="+ topic/ph pr-d/codeph ph codeph">ploadText</code> 和 <code class="+ topic/ph pr-d/codeph ph codeph">loadTextEx</code> 的 <em class="+ topic/ph hi-d/i ph i">schema</em> 参数，再进行数据导入。</p><p class="- topic/p p">如导入下面的 <em class="+ topic/ph hi-d/i ph i">type.csv</em>，原始结构如下：</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="2-自动解析数据类型的导入技巧__entry__1"><strong class="+ topic/ph hi-d/b ph b">id</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="2-自动解析数据类型的导入技巧__entry__2"><strong class="+ topic/ph hi-d/b ph b">ticker</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="2-自动解析数据类型的导入技巧__entry__3"><strong class="+ topic/ph hi-d/b ph b">price</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="2-自动解析数据类型的导入技巧__entry__1">1</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="2-自动解析数据类型的导入技巧__entry__2">300001</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="2-自动解析数据类型的导入技巧__entry__3">25.80</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="2-自动解析数据类型的导入技巧__entry__1">2</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="2-自动解析数据类型的导入技巧__entry__2">300002</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="2-自动解析数据类型的导入技巧__entry__3">6.85</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="2-自动解析数据类型的导入技巧__entry__1">3</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="2-自动解析数据类型的导入技巧__entry__2">300003</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="2-自动解析数据类型的导入技巧__entry__3">7.19</td></tr></tbody></table></div></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title6" id="21-错误操作"><h3 class="- topic/title title topictitle3" id="ariaid-title6">2.1. 错误操作</h3><div class="- topic/body body"><p class="- topic/p p">执行 <code class="+ topic/ph pr-d/codeph ph codeph">loadText("/xxx/type.csv")</code>，导入结果如下：</p><br/><img class="- topic/image image" src="images/data_import_details/03.png" alt="03"/><br/><p class="- topic/p p">执行 <code class="+ topic/ph pr-d/codeph ph codeph">extractTextSchema("/xxx/type.csv")</code>，可以看到，<em class="+ topic/ph hi-d/i ph i">ticker</em> 列被默认解析为 INT 类型，不符合预期：</p><br/><img class="- topic/image image" src="images/data_import_details/04.png" alt="04"/><br/></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title7" id="22-正确操作"><h3 class="- topic/title title topictitle3" id="ariaid-title7">2.2. 正确操作</h3><div class="- topic/body body"><p class="- topic/p p">可以使用 <code class="+ topic/ph pr-d/codeph ph codeph">extractTextSchema</code> 函数先得到自动解析结果，再将 <em class="+ topic/ph hi-d/i ph i">ticker</em> 列的类型指定为 SYMBOL 类型，并用修改后的结果作为 <code class="+ topic/ph pr-d/codeph ph codeph">loadText</code> 函数的 <em class="+ topic/ph hi-d/i ph i">schema</em> 参数值进行导入，即可得到预期结果：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>schema = extractTextSchema("/xxx/type.csv")
update schema set type =`SYMBOL where name = "ticker"
loadText("/xxx/type.csv", schema=schema)</code></pre><br/><img class="- topic/image image" src="images/data_import_details/05.png" alt="05"/><br/></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title8" id="3-日期与时间格式数据的手动导入方法"><h2 class="- topic/title title topictitle2" id="ariaid-title8">3. 日期与时间格式数据的手动导入方法</h2><div class="- topic/body body"><p class="- topic/p p">使用 <code class="+ topic/ph pr-d/codeph ph codeph">loadText</code> 函数导入符合日期、时间格式的数据时，如果用户不指定 <em class="+ topic/ph hi-d/i ph i">schema</em> 参数，会将符合日期、时间格式的数据优先解析为对应类型。规则如下：</p><ul class="- topic/ul ul"><li class="- topic/li li">当加载的数据文件中包含了表达日期、时间的数据时，满足分隔符要求的这部分数据（日期数据分隔符包含 ”-”、”/” 和 ”.”，时间数据分隔符为 ”:”）会解析为相应的类型。例如，”12:34:56” 解析为 SECOND 类型；”23.04.10” 解析为 DATE 类型。</li><li class="- topic/li li">对于不包含分隔符的数据，形如 ”yyMMdd” 的数据同时满足 0&lt;=yy&lt;=99，0&lt;=MM&lt;=12，1&lt;=dd&lt;=31 的条件时，会被优先解析成 DATE 类型；形如 ”yyyyMMdd” 的数据同时满足 1900&lt;=yyyy&lt;=2100，0&lt;=MM&lt;=12，1&lt;=dd&lt;=31 的条件时，会被优先解析成 DATE 类型。</li></ul><p class="- topic/p p">如导入下面的 <em class="+ topic/ph hi-d/i ph i">notdate.csv</em>，原始结构如下：</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="3-日期与时间格式数据的手动导入方法__entry__1"><strong class="+ topic/ph hi-d/b ph b">id</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="3-日期与时间格式数据的手动导入方法__entry__2"><strong class="+ topic/ph hi-d/b ph b">ticker</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="3-日期与时间格式数据的手动导入方法__entry__3"><strong class="+ topic/ph hi-d/b ph b">price</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-日期与时间格式数据的手动导入方法__entry__1">1</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-日期与时间格式数据的手动导入方法__entry__2">111011</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-日期与时间格式数据的手动导入方法__entry__3">133.950</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-日期与时间格式数据的手动导入方法__entry__1">2</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-日期与时间格式数据的手动导入方法__entry__2">111012</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-日期与时间格式数据的手动导入方法__entry__3">125.145</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-日期与时间格式数据的手动导入方法__entry__1">3</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-日期与时间格式数据的手动导入方法__entry__2">111013</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-日期与时间格式数据的手动导入方法__entry__3">113.240</td></tr></tbody></table></div></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title9" id="31-错误操作"><h3 class="- topic/title title topictitle3" id="ariaid-title9">3.1. 错误操作</h3><div class="- topic/body body"><p class="- topic/p p">直接使用 <code class="+ topic/ph pr-d/codeph ph codeph">loadText</code> 函数导入 DolphinDB，由于 <em class="+ topic/ph hi-d/i ph i">ticker</em> 列是形如 "yyMMdd" 的数据，且同时满足 0&lt;=yy&lt;=99，0&lt;=MM&lt;=12，1&lt;=dd&lt;=31 的条件，会被优先解析成 DATE 类型。</p><p class="- topic/p p">执行 <code class="+ topic/ph pr-d/codeph ph codeph">loadText("/xxx/notdate.csv")</code>，导入结果如下：</p><br/><img class="- topic/image image" src="images/data_import_details/06.png" alt="06"/><br/></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title10" id="32-正确操作"><h3 class="- topic/title title topictitle3" id="ariaid-title10">3.2. 正确操作</h3><div class="- topic/body body"><p class="- topic/p p">导入此类符合日期、时间格式的数据时，无需使用 <code class="+ topic/ph pr-d/codeph ph codeph">extractTextSchema</code> 函数查看自动解析结果，可提前在 <em class="+ topic/ph hi-d/i ph i">schema</em> 参数中将 <em class="+ topic/ph hi-d/i ph i">ticker</em> 列指定解析为 SYMBOL 类型，再进行导入，即可得到预期结果。</p><p class="- topic/p p">执行如下代码：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>schema = table(`id`ticker`price as name, `INT`SYMBOL`DOUBLE as type)
loadText("/xxx/notdate.csv", schema = schema)</code></pre><br/><img class="- topic/image image" src="images/data_import_details/07.png" alt="07"/><br/></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title11" id="4-提升数据导入效率的-loadtextex-函数使用建议"><h2 class="- topic/title title topictitle2" id="ariaid-title11">4. 提升数据导入效率的 <code class="+ topic/ph pr-d/codeph ph codeph">loadTextEx</code> 函数使用建议</h2><div class="- topic/body body"><p class="- topic/p p">在一些实际应用场景中，用户导入数据文件的下一步，都是将其写入分布式数据库进行存储，而不需要在内存中进行额外操作。DolphinDB 为此提供了 <code class="+ topic/ph pr-d/codeph ph codeph">loadTextEx</code> 函数，能够直接把数据文件入库，不需要把数据加载到内存表，既简化了步骤，又节省了时间。</p><p class="- topic/p p">如导入下面的 <em class="+ topic/ph hi-d/i ph i">data.csv</em>，原始结构如下：</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="4-提升数据导入效率的-loadtextex-函数使用建议__entry__1"><strong class="+ topic/ph hi-d/b ph b">ID</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="4-提升数据导入效率的-loadtextex-函数使用建议__entry__2"><strong class="+ topic/ph hi-d/b ph b">date</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="4-提升数据导入效率的-loadtextex-函数使用建议__entry__3"><strong class="+ topic/ph hi-d/b ph b">vol</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="4-提升数据导入效率的-loadtextex-函数使用建议__entry__1">23</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="4-提升数据导入效率的-loadtextex-函数使用建议__entry__2">2023.08.08</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="4-提升数据导入效率的-loadtextex-函数使用建议__entry__3">34.461863990873098</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="4-提升数据导入效率的-loadtextex-函数使用建议__entry__1">27</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="4-提升数据导入效率的-loadtextex-函数使用建议__entry__2">2023.08.08</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="4-提升数据导入效率的-loadtextex-函数使用建议__entry__3">4.043174418620766</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="4-提升数据导入效率的-loadtextex-函数使用建议__entry__1">36</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="4-提升数据导入效率的-loadtextex-函数使用建议__entry__2">2023.08.08</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="4-提升数据导入效率的-loadtextex-函数使用建议__entry__3">5.356599518563599</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="4-提升数据导入效率的-loadtextex-函数使用建议__entry__1">98</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="4-提升数据导入效率的-loadtextex-函数使用建议__entry__2">2023.08.09</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="4-提升数据导入效率的-loadtextex-函数使用建议__entry__3">5.630887264851481</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="4-提升数据导入效率的-loadtextex-函数使用建议__entry__1">…</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="4-提升数据导入效率的-loadtextex-函数使用建议__entry__2">…</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="4-提升数据导入效率的-loadtextex-函数使用建议__entry__3">…</td></tr></tbody></table></div></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title12" id="41-初级操作"><h3 class="- topic/title title topictitle3" id="ariaid-title12">4.1. 初级操作</h3><div class="- topic/body body"><p class="- topic/p p">如果先使用 <code class="+ topic/ph pr-d/codeph ph codeph">loadText</code> 函数把该文件加载到内存，再写入数据库，耗时 771.618ms。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>timer{
    t = loadText("/xxx/data.csv")
    loadTable("dfs://test_load","data").append!(t)
}

&gt;&gt; Time elapsed: 771.618ms</code></pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title13" id="42-进阶操作"><h3 class="- topic/title title topictitle3" id="ariaid-title13">4.2. 进阶操作</h3><div class="- topic/body body"><p class="- topic/p p">直接使用 <code class="+ topic/ph pr-d/codeph ph codeph">loadTextEx</code> 函数将该文件入库，耗时 384.097ms。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>timer{
    loadTextEx(database("dfs://test_load"), "data", "date", "/xxx/data.csv", sortColumns=`id)
}

&gt;&gt; Time elapsed: 384.097ms</code></pre><p class="- topic/p p">数据量越大，两种方式的耗时差异越明显。</p></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title14" id="5-在-loadtextex-中使用-transform-参数预处理数据"><h2 class="- topic/title title topictitle2" id="ariaid-title14">5. 在 <code class="+ topic/ph pr-d/codeph ph codeph">loadTextEx</code> 中使用 <code class="+ topic/ph pr-d/codeph ph codeph">transform</code> 参数预处理数据</h2><div class="- topic/body body"><p class="- topic/p p">在一些实际应用场景中，用户既希望能够使用 <code class="+ topic/ph pr-d/codeph ph codeph">loadTextEx</code> 函数直接把数据入库，又希望能够对数据做一些简单处理。针对这种需求，可以在 <code class="+ topic/ph pr-d/codeph ph codeph">loadTextEx</code> 中使用 <em class="+ topic/ph hi-d/i ph i">transform</em> 参数，对数据进行处理后再入库。这种做法无需把数据加载到内存来处理，简化了操作步骤。</p><p class="- topic/p p">例如，导入下面的 <em class="+ topic/ph hi-d/i ph i">dataWithNULL.csv</em> 时， <em class="+ topic/ph hi-d/i ph i">vol</em> 列有空值，需要先将 <em class="+ topic/ph hi-d/i ph i">vol</em> 列的空值填充为 0，再入库：</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="5-在-loadtextex-中使用-transform-参数预处理数据__entry__1"><strong class="+ topic/ph hi-d/b ph b">ID</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="5-在-loadtextex-中使用-transform-参数预处理数据__entry__2"><strong class="+ topic/ph hi-d/b ph b">date</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="5-在-loadtextex-中使用-transform-参数预处理数据__entry__3"><strong class="+ topic/ph hi-d/b ph b">vol</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-在-loadtextex-中使用-transform-参数预处理数据__entry__1">52</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-在-loadtextex-中使用-transform-参数预处理数据__entry__2">2023.08.08</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-在-loadtextex-中使用-transform-参数预处理数据__entry__3">5.08143</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-在-loadtextex-中使用-transform-参数预处理数据__entry__1">77</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-在-loadtextex-中使用-transform-参数预处理数据__entry__2">2023.08.09</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-在-loadtextex-中使用-transform-参数预处理数据__entry__3"> </td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-在-loadtextex-中使用-transform-参数预处理数据__entry__1">35</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-在-loadtextex-中使用-transform-参数预处理数据__entry__2">2023.08.08</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-在-loadtextex-中使用-transform-参数预处理数据__entry__3">0.22431</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-在-loadtextex-中使用-transform-参数预处理数据__entry__1">99</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-在-loadtextex-中使用-transform-参数预处理数据__entry__2">2023.08.09</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-在-loadtextex-中使用-transform-参数预处理数据__entry__3"> </td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-在-loadtextex-中使用-transform-参数预处理数据__entry__1">…</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-在-loadtextex-中使用-transform-参数预处理数据__entry__2">…</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="5-在-loadtextex-中使用-transform-参数预处理数据__entry__3">…</td></tr></tbody></table></div></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title15" id="51-初级操作"><h3 class="- topic/title title topictitle3" id="ariaid-title15">5.1. 初级操作</h3><div class="- topic/body body"><p class="- topic/p p">如果先使用 <code class="+ topic/ph pr-d/codeph ph codeph">loadText</code> 函数把该文件加载到内存，使用 <code class="+ topic/ph pr-d/codeph ph codeph">nullFill!</code> 去除空值，再写入数据库，耗时 802.23ms。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>timer{
    t = loadText("/xxx/dataWithNULL.csv")
    t.nullFill!(0.0)
    loadTable("dfs://test_load","data").append!(t)
}

&gt;&gt; Time elapsed: 802.23ms</code></pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title16" id="52-进阶操作"><h3 class="- topic/title title topictitle3" id="ariaid-title16">5.2. 进阶操作</h3><div class="- topic/body body"><p class="- topic/p p">使用 <code class="+ topic/ph pr-d/codeph ph codeph">loadTextEx</code> 函数配合 <em class="+ topic/ph hi-d/i ph i">transform</em> 参数将该文件入库，耗时 385.086ms。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>timer{
    loadTextEx(database("dfs://test_load"), "data", "date", "/xxx/dataWithNULL.csv", transform = nullFill!{, 0.0}, sortColumns=`id)
}

&gt;&gt; Time elapsed: 385.086 ms</code></pre><p class="- topic/p p">可以看到，<em class="+ topic/ph hi-d/i ph i">transform</em> 参数使数据预处理变得非常便捷，无需在内存中额外处理数据，可以一步入库。</p></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title17" id="6-避免将长整型时间戳数据以-timestamp-类型导入"><h2 class="- topic/title title topictitle2" id="ariaid-title17">6. 避免将长整型时间戳数据以 TIMESTAMP 类型导入</h2><div class="- topic/body body"><p class="- topic/p p">在许多数据中，常常用长整型（LONG 类型）来表示 Unix 毫秒时间戳，即从 1970 年 1 月 1 日（UTC/GMT 的午夜）开始所经过的毫秒数。在导入这样的数据时，如果不预先指定导入类型，将会把这种形式的时间戳直接作为长整型导入，显示的是长整型数据；而如果指定这种形式的时间戳为 TIMESTAMP 类型，将其导入后并不会自动转换为对应的 TIMESTAMP，而会返回空值。因此，这两种做法的结果都不符合预期。</p><p class="- topic/p p">正确的做法是，先把原始数据以 LONG 类型导入，再使用 <code class="+ topic/ph pr-d/codeph ph codeph">timestamp</code> 函数手动转换为对应的 TIMESTAMP。</p><p class="- topic/p p">如导入下面的 <em class="+ topic/ph hi-d/i ph i">time.csv</em>，原始结构如下：</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="6-避免将长整型时间戳数据以-timestamp-类型导入__entry__1"><strong class="+ topic/ph hi-d/b ph b">timestamp</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="6-避免将长整型时间戳数据以-timestamp-类型导入__entry__2"><strong class="+ topic/ph hi-d/b ph b">ticker</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="6-避免将长整型时间戳数据以-timestamp-类型导入__entry__3"><strong class="+ topic/ph hi-d/b ph b">price</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="6-避免将长整型时间戳数据以-timestamp-类型导入__entry__1">1701199585108</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="6-避免将长整型时间戳数据以-timestamp-类型导入__entry__2">SH2575</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="6-避免将长整型时间戳数据以-timestamp-类型导入__entry__3">9.05991137959063</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="6-避免将长整型时间戳数据以-timestamp-类型导入__entry__1">1701101960267</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="6-避免将长整型时间戳数据以-timestamp-类型导入__entry__2">SH1869</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="6-避免将长整型时间戳数据以-timestamp-类型导入__entry__3">9.667245978489518</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="6-避免将长整型时间戳数据以-timestamp-类型导入__entry__1">1701292328832</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="6-避免将长整型时间戳数据以-timestamp-类型导入__entry__2">SH1228</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="6-避免将长整型时间戳数据以-timestamp-类型导入__entry__3">19.817104414105415</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="6-避免将长整型时间戳数据以-timestamp-类型导入__entry__1">1701186220641</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="6-避免将长整型时间戳数据以-timestamp-类型导入__entry__2">SH2471</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="6-避免将长整型时间戳数据以-timestamp-类型导入__entry__3">3.389011020772159</td></tr></tbody></table></div></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title18" id="61-错误操作"><h3 class="- topic/title title topictitle3" id="ariaid-title18">6.1. 错误操作</h3><div class="- topic/body body"><p class="- topic/p p">如果指定把 <em class="+ topic/ph hi-d/i ph i">timestamp</em> 列作为 TIMESTAMP 类型导入，该列导入结果将会全为空值：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>schema = extractTextSchema("/xxx/time.csv")
update schema set type = "TIMESTAMP" where name = "timestamp"
loadText("/xxx/time.csv", schema=schema)</code></pre><br/><img class="- topic/image image" src="images/data_import_details/08.png" alt="08"/><br/></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title19" id="62-正确操作"><h3 class="- topic/title title topictitle3" id="ariaid-title19">6.2. 正确操作</h3><div class="- topic/body body"><p class="- topic/p p">正确做法应该是把 <em class="+ topic/ph hi-d/i ph i">timestamp</em> 列以 LONG 类型直接导入，然后使用 <code class="+ topic/ph pr-d/codeph ph codeph">replaceColumn!</code> 和 <code class="+ topic/ph pr-d/codeph ph codeph">timestamp</code> 函数，将其手动转换为 TIMESTAMP 类型，即可得到预期结果：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>t = loadText("/xxx/time.csv")
replaceColumn!(t, `timestamp, timestamp(exec timestamp from t))
t</code></pre><br/><img class="- topic/image image" src="images/data_import_details/09.png" alt="09"/><br/></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title20" id="7-长整型转换为-timestamp-类型时的时区注意事项"><h2 class="- topic/title title topictitle2" id="ariaid-title20">7. 长整型转换为 TIMESTAMP 类型时的时区注意事项</h2><div class="- topic/body body"><p class="- topic/p p">有的数据库在存储时间数据时，会将其转换为全球统一的 Unix 时间戳，并单独存储时区信息（即 UTC 偏移量）。 而 DolphinDB 将时间转换为本地时间戳直接存储，不会单独存储时区信息，具体可参考：<a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/tutorials/timezone.html" target="_blank" rel="external noopener">时区处理</a>。</p><p class="- topic/p p">因此，如果原始数据文件中的长整型是带时区信息的长整型，即已经加减了 UTC 偏移量的数据，导入 DolphinDB 进行转换时会被视为零时区数据处理，可能导致结果与预期不符。</p><p class="- topic/p p">如导入下面的 <em class="+ topic/ph hi-d/i ph i">localtime.csv</em>，原始结构如下：</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="7-长整型转换为-timestamp-类型时的时区注意事项__entry__1"><strong class="+ topic/ph hi-d/b ph b">timestamp</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="7-长整型转换为-timestamp-类型时的时区注意事项__entry__2"><strong class="+ topic/ph hi-d/b ph b">ticker</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="7-长整型转换为-timestamp-类型时的时区注意事项__entry__3"><strong class="+ topic/ph hi-d/b ph b">price</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="7-长整型转换为-timestamp-类型时的时区注意事项__entry__1">1701331200000</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="7-长整型转换为-timestamp-类型时的时区注意事项__entry__2">SH3149</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="7-长整型转换为-timestamp-类型时的时区注意事项__entry__3">8.676103590987622</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="7-长整型转换为-timestamp-类型时的时区注意事项__entry__1">1701331200000</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="7-长整型转换为-timestamp-类型时的时区注意事项__entry__2">SH0803</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="7-长整型转换为-timestamp-类型时的时区注意事项__entry__3">12.16052254475653</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="7-长整型转换为-timestamp-类型时的时区注意事项__entry__1">1701331200000</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="7-长整型转换为-timestamp-类型时的时区注意事项__entry__2">SH2533</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="7-长整型转换为-timestamp-类型时的时区注意事项__entry__3">12.076009283773601</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="7-长整型转换为-timestamp-类型时的时区注意事项__entry__1">1701331200000</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="7-长整型转换为-timestamp-类型时的时区注意事项__entry__2">SH3419</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="7-长整型转换为-timestamp-类型时的时区注意事项__entry__3">0.239130933769047</td></tr></tbody></table></div><p class="- topic/p p">其中，<em class="+ topic/ph hi-d/i ph i">timestamp</em> 列应为由北京时间 2023.11.30T16:00:00.000 转换的长整型：</p><br/><img class="- topic/image image" src="images/data_import_details/10.png" alt="10"/><br/></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title21" id="71-错误操作"><h3 class="- topic/title title topictitle3" id="ariaid-title21">7.1. 错误操作</h3><div class="- topic/body body"><p class="- topic/p p">直接把 <em class="+ topic/ph hi-d/i ph i">timestamp</em> 列以 LONG 类型直接导入，然后将其手动转换为 TIMESTAMP 类型后，得到的是零时区时间，和北京时间相差 8 个小时：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>t = loadText("/xxx/localtime.csv")
replaceColumn!(t, `timestamp, timestamp(exec timestamp from t))
t</code></pre><br/><img class="- topic/image image" src="images/data_import_details/11.png" alt="11"/><br/></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title22" id="72-正确操作"><h3 class="- topic/title title topictitle3" id="ariaid-title22">7.2. 正确操作</h3><div class="- topic/body body"><p class="- topic/p p">对于长整型转换为 TIMESTAMP 默认为零时区的现象，可以在转换类型时，利用 DolphinDB 内置的时区转换函数 <code class="+ topic/ph pr-d/codeph ph codeph">localtime</code>，把零时区时间转换成本地时间（本文测试的本地时间为东八区时间）：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>t = loadText("/xxx/localtime.csv")
replaceColumn!(t, `timestamp, localtime(timestamp(exec timestamp from t)))
t</code></pre><br/><img class="- topic/image image" src="images/data_import_details/12.png" alt="12"/><br/><p class="- topic/p p">也可以利用 DolphinDB 内置时区转换函数 <code class="+ topic/ph pr-d/codeph ph codeph">convertTZ</code>，完成两个指定时区之间的转换：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>t = loadText("/xxx/localtime.csv")
replaceColumn!(t, `timestamp, convertTZ(timestamp(exec timestamp from t), "UTC", "Asia/Shanghai"))
t</code></pre><br/><img class="- topic/image image" src="images/data_import_details/13.png" alt="13"/><br/></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title23" id="8-使用标准格式的连接字符串连接-odbc"><h2 class="- topic/title title topictitle2" id="ariaid-title23">8. 使用标准格式的连接字符串连接 ODBC</h2><div class="- topic/body body"><p class="- topic/p p">通过 ODBC 插件可以连接其它数据源，将其他数据源的数据导入到 DolphinDB。在连接其他数据源时，有可能遇到报错：<code class="+ topic/ph pr-d/codeph ph codeph">FATAL: password authentication failed for user "xxx"</code>，但用户名和密码均正确，导致排查问题来源时没有头绪。许多情况下，这是因为使用的 ODBC 连接字符串有问题。有关连接字符串的标准格式，请参阅 <a class="- topic/xref xref" href="https://www.connectionstrings.com/" target="_blank" rel="external noopener">连接字符串参考</a>。</p></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title24" id="81-错误操作"><h3 class="- topic/title title topictitle3" id="ariaid-title24">8.1. 错误操作</h3><div class="- topic/body body"><p class="- topic/p p">如下面的场景，使用 DSN 连接字符串连接 PostgreSQL，运行后出现报错：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>odbcConfig = "DSN=PIE_PGSQL;Server="+ip+";port="+port+";DATABASE="+db+";Uid="+userName+";Password="+password+";"
conn = odbc::connect(odbcConfig)

&gt;&gt; FATAL: password authentication failed for user "pie_dev"</code></pre><p class="- topic/p p">Linux 版本的 ODBC 插件基于 unixODBC 开发，isql 是 unixODBC 提供的基本工具，能够快速排查 ODBC 相关问题。使用相同的 DSN 连接字符串运行 isql，出现了相同的报错：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>[28P01][unixODBC]FATAL: password authentication failed for user "pie_dev"
[ISQL]ERROR: Could not SQLDriverConnect</code></pre><p class="- topic/p p">说明该问题与 DolphinDB 的 ODBC 插件无关，可能是连接字符串有问题。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title25" id="82-正确操作"><h3 class="- topic/title title topictitle3" id="ariaid-title25">8.2. 正确操作</h3><div class="- topic/body body"><p class="- topic/p p">查阅 <a class="- topic/xref xref" href="https://www.connectionstrings.com/" target="_blank" rel="external noopener">连接字符串参考</a>，发现 PostgreSQL 的 ODBC 标准连接字符串如下：</p><br/><img class="- topic/image image" src="images/data_import_details/14.png" alt="14"/><br/><p class="- topic/p p">按照标准连接字符串形式，参考如下方式修改连接字符串：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>odbcConfig = "Driver={PostgreSQL};Server="+ip+";port="+port+";DATABASE="+db+";Uid="+userName+";Password="+password+";"
conn = odbc::connect(odbcConfig)</code></pre><p class="- topic/p p">运行后，连接成功。</p></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title26" id="9-同磁盘下数据解压和导入的并行处理注意事项"><h2 class="- topic/title title topictitle2" id="ariaid-title26">9. 同磁盘下数据解压和导入的并行处理注意事项</h2><div class="- topic/body body"><p class="- topic/p p">许多时候，用户的原始数据文件是压缩包形式的，需要先解压再进行导入。如果用户采取的是一边解压一边导入的方式，且原始数据所在磁盘与解压后存储 DolphinDB 数据库的磁盘是同一块时，会降低导入的速率。如果忽略这个细节，可能导致数据导入的耗时额外增加。</p><p class="- topic/p p">如导入下面的 <em class="+ topic/ph hi-d/i ph i">mdl_6_28_0.csv</em>，大小为 4.3 GB：</p><br/><img class="- topic/image image" src="images/data_import_details/15.png" alt="15"/><br/></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title27" id="91-错误操作"><h3 class="- topic/title title topictitle3" id="ariaid-title27">9.1. 错误操作</h3><div class="- topic/body body"><p class="- topic/p p">在该 DolphinDB 数据存储的磁盘上进行一个 .zip 文件的解压任务，同时使用 <code class="+ topic/ph pr-d/codeph ph codeph">loadTextEx</code> 函数将另一个已解压的 csv 文件入库，耗时约 1m41s：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>timer loadText(database("dfs://test_load"), "data", "SecurityID", "/xxx/mdl_6_28_0.csv", sortColumns=`SecurityID`UpdateTime)

&gt;&gt; Time elapsed: 101156.78ms</code></pre><p class="- topic/p p">在导入过程中，观察磁盘读写速率如下：</p><br/><img class="- topic/image image" src="images/data_import_details/16.png" alt="16"/><br/><p class="- topic/p p">可以看到，当在同一块磁盘同时解压数据和导入数据时，数据导入的速率降低了许多。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title28" id="92-正确操作"><h3 class="- topic/title title topictitle3" id="ariaid-title28">9.2. 正确操作</h3><div class="- topic/body body"><p class="- topic/p p">磁盘空闲，没有解压任务在执行时，直接使用 <code class="+ topic/ph pr-d/codeph ph codeph">loadTextEx</code> 函数入库相同的文件，耗时约 46s：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>timer loadText(database("dfs://test_load"), "data", "SecurityID", "/xxx/mdl_6_28_0.csv", sortColumns=`SecurityID`UpdateTime)

&gt;&gt; Time elapsed: 46203.117ms</code></pre><p class="- topic/p p">在导入过程中，观察 DolphinDB 磁盘读写速率如下：</p><br/><img class="- topic/image image" src="images/data_import_details/17.png" alt="17"/><br/></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title29" id="10-避免并行写入同一分区时的冲突解决方案"><h2 class="- topic/title title topictitle2" id="ariaid-title29">10. 避免并行写入同一分区时的冲突解决方案</h2><div class="- topic/body body"><p class="- topic/p p">在导入数据并写入分布式数据库时，有可能会存在并行写入同一分区的情况。在这种场景下，根据创建数据库时设置的 <em class="+ topic/ph hi-d/i ph i">atomic</em> 参数的不同，可能出现以下不同的情况：</p><ul class="- topic/ul ul"><li class="- topic/li li"><em class="+ topic/ph hi-d/i ph i">atomic</em> 参数设置为 ’TRANS’，写入事务的原子性层级为事务，即一个事务写入多个分区时，若某个分区被其他写入事务锁定而出现写入冲突，则该事务的写入全部失败。因此，该设置下，不允许并发写入同一个分区。</li><li class="- topic/li li"><em class="+ topic/ph hi-d/i ph i">atomic</em> 参数设置为 ’CHUNK’，写入事务的原子性层级为分区。若一个事务写入多个分区时，某分区被其它写入事务锁定而出现冲突，系统会完成其他分区的写入，同时对之前发生冲突的分区不断尝试写入，尝试数分钟后仍冲突才放弃。此设置下，允许并发写入同一个分区，但由于不能完全保证事务的原子性，可能出现部分分区写入成功而部分分区写入失败的情况。同时由于采用了重试机制，写入速度可能较慢。</li></ul><p class="- topic/p p">当发生分区冲突导致写入失败时，将会抛出错误代码 S00002，错误信息为：<code class="+ topic/ph pr-d/codeph ph codeph">&lt;ChunkInTransaction&gt;filepath has been owned by transaction</code>，表示某个分区已经被一个事务锁定，新的事务无法再次锁定相同分区。如果忽略此细节，可能导致数据导入任务失败。</p><p class="- topic/p p">下面的 <em class="+ topic/ph hi-d/i ph i">dfs://test_month</em> 数据库，按月分区，且 <em class="+ topic/ph hi-d/i ph i">atomic</em> 参数为 ’TRANS’：</p><br/><img class="- topic/image image" src="images/data_import_details/18.png" alt="18"/><br/></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title30" id="101-错误操作"><h3 class="- topic/title title topictitle3" id="ariaid-title30">10.1. 错误操作</h3><div class="- topic/body body"><p class="- topic/p p">并行导入下面的 csv 文件入库，他们入库的目标分区都为 2023.08M：</p><br/><img class="- topic/image image" src="images/data_import_details/19.png" alt="19"/><br/><p class="- topic/p p">使用 <code class="+ topic/ph pr-d/codeph ph codeph">submitJob</code> 提交导入任务：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>filePath = "/xxx/dailyData"
for (i in files(filePath).filename){
    submitJob("loadCSVTest", "load daily files to monthly db", loadTextEx, database("dfs://test_month"), "data", "date", filePath+i)
}</code></pre><p class="- topic/p p">查看任务完成情况，可以看到，只有一个任务导入成功，别的任务都因为分区冲突而失败，抛出错误代码 S00002：</p><br/><img class="- topic/image image" src="images/data_import_details/20.png" alt="20"/><br/></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title31" id="102-正确操作"><h3 class="- topic/title title topictitle3" id="ariaid-title31">10.2. 正确操作</h3><div class="- topic/body body"><p class="- topic/p p">对于这种情况，我们可以串行导入文本文件，避免并行写入同一分区时的冲突：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>def loadDaily(filePath){
	for (i in files(filePath).filename){
		loadTextEx(database("dfs://test_month"), "data",`date,filePath+i,sortColumns=`ID)
	}
}

path = "/xxx/dailyData/"
submitJob("loadCSVTest","load daily files to monthly db",loadDaily, path)</code></pre><p class="- topic/p p">查看任务完成情况，可以看到，数据能够导入成功，没有报错：</p><br/><img class="- topic/image image" src="images/data_import_details/21.png" alt="21"/><br/></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title32" id="11-总结"><h2 class="- topic/title title topictitle2" id="ariaid-title32">11. 总结</h2><div class="- topic/body body"><p class="- topic/p p">本文介绍了使用 DolphinDB 进行数据导入时，最容易忽略的 10 个细节，涵盖了数据格式、数据类型、导入速率、数据预处理、连接失败、分区冲突等多个方面。忽略了这些细节，可能导致数据导入失败或导入结果不符合预期。用户了解了这些细节，并合理进行数据导入，可以极大提升数据导入的速度和质量。</p></div></article></article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" aria-label="On this page" class="col-lg-2 d-none d-lg-block navbar d-print-none"> 
                            <div id="wh_topic_toc_content">
		                        
	                            <div class=" wh_topic_toc "><div class="wh_topic_label">在本页上</div><ul><li class="topic-item"><a href="#1-%E8%A1%A8%E5%A4%B4%E5%8C%85%E5%90%AB%E6%95%B0%E5%AD%97%E6%97%B6%E7%9A%84%E6%96%87%E4%BB%B6%E5%AF%BC%E5%85%A5%E6%8A%80%E5%B7%A7" data-tocid="1-表头包含数字时的文件导入技巧">1. 表头包含数字时的文件导入技巧</a><ul><li class="topic-item"><a href="#11-%E9%94%99%E8%AF%AF%E6%93%8D%E4%BD%9C" data-tocid="11-错误操作">1.1. 错误操作</a></li><li class="topic-item"><a href="#12-%E6%AD%A3%E7%A1%AE%E6%93%8D%E4%BD%9C" data-tocid="12-正确操作">1.2. 正确操作</a></li></ul></li><li class="topic-item"><a href="#2-%E8%87%AA%E5%8A%A8%E8%A7%A3%E6%9E%90%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%AF%BC%E5%85%A5%E6%8A%80%E5%B7%A7" data-tocid="2-自动解析数据类型的导入技巧">2. 自动解析数据类型的导入技巧</a><ul><li class="topic-item"><a href="#21-%E9%94%99%E8%AF%AF%E6%93%8D%E4%BD%9C" data-tocid="21-错误操作">2.1. 错误操作</a></li><li class="topic-item"><a href="#22-%E6%AD%A3%E7%A1%AE%E6%93%8D%E4%BD%9C" data-tocid="22-正确操作">2.2. 正确操作</a></li></ul></li><li class="topic-item"><a href="#3-%E6%97%A5%E6%9C%9F%E4%B8%8E%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E6%95%B0%E6%8D%AE%E7%9A%84%E6%89%8B%E5%8A%A8%E5%AF%BC%E5%85%A5%E6%96%B9%E6%B3%95" data-tocid="3-日期与时间格式数据的手动导入方法">3. 日期与时间格式数据的手动导入方法</a><ul><li class="topic-item"><a href="#31-%E9%94%99%E8%AF%AF%E6%93%8D%E4%BD%9C" data-tocid="31-错误操作">3.1. 错误操作</a></li><li class="topic-item"><a href="#32-%E6%AD%A3%E7%A1%AE%E6%93%8D%E4%BD%9C" data-tocid="32-正确操作">3.2. 正确操作</a></li></ul></li><li class="topic-item"><a href="#4-%E6%8F%90%E5%8D%87%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5%E6%95%88%E7%8E%87%E7%9A%84-loadtextex-%E5%87%BD%E6%95%B0%E4%BD%BF%E7%94%A8%E5%BB%BA%E8%AE%AE" data-tocid="4-提升数据导入效率的-loadtextex-函数使用建议">4. 提升数据导入效率的 <code class="+ topic/ph pr-d/codeph ph codeph">loadTextEx</code> 函数使用建议</a><ul><li class="topic-item"><a href="#41-%E5%88%9D%E7%BA%A7%E6%93%8D%E4%BD%9C" data-tocid="41-初级操作">4.1. 初级操作</a></li><li class="topic-item"><a href="#42-%E8%BF%9B%E9%98%B6%E6%93%8D%E4%BD%9C" data-tocid="42-进阶操作">4.2. 进阶操作</a></li></ul></li><li class="topic-item"><a href="#5-%E5%9C%A8-loadtextex-%E4%B8%AD%E4%BD%BF%E7%94%A8-transform-%E5%8F%82%E6%95%B0%E9%A2%84%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE" data-tocid="5-在-loadtextex-中使用-transform-参数预处理数据">5. 在 <code class="+ topic/ph pr-d/codeph ph codeph">loadTextEx</code> 中使用 <code class="+ topic/ph pr-d/codeph ph codeph">transform</code> 参数预处理数据</a><ul><li class="topic-item"><a href="#51-%E5%88%9D%E7%BA%A7%E6%93%8D%E4%BD%9C" data-tocid="51-初级操作">5.1. 初级操作</a></li><li class="topic-item"><a href="#52-%E8%BF%9B%E9%98%B6%E6%93%8D%E4%BD%9C" data-tocid="52-进阶操作">5.2. 进阶操作</a></li></ul></li><li class="topic-item"><a href="#6-%E9%81%BF%E5%85%8D%E5%B0%86%E9%95%BF%E6%95%B4%E5%9E%8B%E6%97%B6%E9%97%B4%E6%88%B3%E6%95%B0%E6%8D%AE%E4%BB%A5-timestamp-%E7%B1%BB%E5%9E%8B%E5%AF%BC%E5%85%A5" data-tocid="6-避免将长整型时间戳数据以-timestamp-类型导入">6. 避免将长整型时间戳数据以 TIMESTAMP 类型导入</a><ul><li class="topic-item"><a href="#61-%E9%94%99%E8%AF%AF%E6%93%8D%E4%BD%9C" data-tocid="61-错误操作">6.1. 错误操作</a></li><li class="topic-item"><a href="#62-%E6%AD%A3%E7%A1%AE%E6%93%8D%E4%BD%9C" data-tocid="62-正确操作">6.2. 正确操作</a></li></ul></li><li class="topic-item"><a href="#7-%E9%95%BF%E6%95%B4%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%BA-timestamp-%E7%B1%BB%E5%9E%8B%E6%97%B6%E7%9A%84%E6%97%B6%E5%8C%BA%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9" data-tocid="7-长整型转换为-timestamp-类型时的时区注意事项">7. 长整型转换为 TIMESTAMP 类型时的时区注意事项</a><ul><li class="topic-item"><a href="#71-%E9%94%99%E8%AF%AF%E6%93%8D%E4%BD%9C" data-tocid="71-错误操作">7.1. 错误操作</a></li><li class="topic-item"><a href="#72-%E6%AD%A3%E7%A1%AE%E6%93%8D%E4%BD%9C" data-tocid="72-正确操作">7.2. 正确操作</a></li></ul></li><li class="topic-item"><a href="#8-%E4%BD%BF%E7%94%A8%E6%A0%87%E5%87%86%E6%A0%BC%E5%BC%8F%E7%9A%84%E8%BF%9E%E6%8E%A5%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%9E%E6%8E%A5-odbc" data-tocid="8-使用标准格式的连接字符串连接-odbc">8. 使用标准格式的连接字符串连接 ODBC</a><ul><li class="topic-item"><a href="#81-%E9%94%99%E8%AF%AF%E6%93%8D%E4%BD%9C" data-tocid="81-错误操作">8.1. 错误操作</a></li><li class="topic-item"><a href="#82-%E6%AD%A3%E7%A1%AE%E6%93%8D%E4%BD%9C" data-tocid="82-正确操作">8.2. 正确操作</a></li></ul></li><li class="topic-item"><a href="#9-%E5%90%8C%E7%A3%81%E7%9B%98%E4%B8%8B%E6%95%B0%E6%8D%AE%E8%A7%A3%E5%8E%8B%E5%92%8C%E5%AF%BC%E5%85%A5%E7%9A%84%E5%B9%B6%E8%A1%8C%E5%A4%84%E7%90%86%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9" data-tocid="9-同磁盘下数据解压和导入的并行处理注意事项">9. 同磁盘下数据解压和导入的并行处理注意事项</a><ul><li class="topic-item"><a href="#91-%E9%94%99%E8%AF%AF%E6%93%8D%E4%BD%9C" data-tocid="91-错误操作">9.1. 错误操作</a></li><li class="topic-item"><a href="#92-%E6%AD%A3%E7%A1%AE%E6%93%8D%E4%BD%9C" data-tocid="92-正确操作">9.2. 正确操作</a></li></ul></li><li class="topic-item"><a href="#10-%E9%81%BF%E5%85%8D%E5%B9%B6%E8%A1%8C%E5%86%99%E5%85%A5%E5%90%8C%E4%B8%80%E5%88%86%E5%8C%BA%E6%97%B6%E7%9A%84%E5%86%B2%E7%AA%81%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88" data-tocid="10-避免并行写入同一分区时的冲突解决方案">10. 避免并行写入同一分区时的冲突解决方案</a><ul><li class="topic-item"><a href="#101-%E9%94%99%E8%AF%AF%E6%93%8D%E4%BD%9C" data-tocid="101-错误操作">10.1. 错误操作</a></li><li class="topic-item"><a href="#102-%E6%AD%A3%E7%A1%AE%E6%93%8D%E4%BD%9C" data-tocid="102-正确操作">10.2. 正确操作</a></li></ul></li><li class="topic-item"><a href="#11-%E6%80%BB%E7%BB%93" data-tocid="11-总结">11. 总结</a></li></ul></div>
	                        	
                        	</div>
                        </nav>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
<title>Copyright</title><p><b> ©2025 浙江智臾科技有限公司 浙ICP备18048711号-3</b></p>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
    </body>
</html>