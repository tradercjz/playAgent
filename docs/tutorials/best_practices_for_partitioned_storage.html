<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" data-whc_version="26.0">
    <head><link rel="shortcut icon" href="../favicon.ico"/><link rel="icon" href="../favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="对数据库进行合理的分区可以显著降低系统响应延迟，提高数据吞吐量。合理的分区设计需要综合考虑数据分布的特征、查询和计算的典型场景、数据更新的频率等方方面面。 本文为入门级教程，针对几种常见的金融数据给出了较为通用的分区方案和示例脚本，以帮助初次体验 DolphinDB 的用户快速完成建库建表。 本文全部代码适用于 2.00.10 及以上版本。 存储方案包括金融数据存储方案和因子库存储方案两大部分。 ..."/><meta name="DC.rights.owner" content="(C) 版权 2025"/><meta name="copyright" content="(C) 版权 2025"/><meta name="generator" content="DITA-OT"/><meta name="DC.type" content="topic"/><meta name="DC.coverage" content=""/><meta name="DC.relation" content="../tutorials/about_tutorials.html"/><meta name="prodname" content="DolphinDB"/><meta name="brand" content="DolphinDB"/><meta name="DC.creator" content="DolphinDB"/><meta name="DC.publisher" content="DDB N/A DDB 200"/><meta name="DC.format" content="HTML5"/><meta name="DC.identifier" content="存储金融数据的分区方案最佳实践"/><title>存储金融数据的分区方案最佳实践</title><!--  Generated with Oxygen version 26.0, build number 2024012323.  --><meta name="wh-path2root" content="../"/><meta name="wh-toc-id" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;?workdir /tmp/temp20250305183303418/tutorials?&gt;&lt;?workdir-uri file:/tmp/temp20250305183303418/tutorials/?&gt;&lt;?path2project ../?&gt;&lt;?path2project-uri ../?&gt;&lt;?path2rootmap-uri ../?&gt;&lt;topic xmlns:dita-ot=&#34;http://dita-ot.sourceforge.net/ns/201007/dita-ot&#34; xmlns:ditaarch=&#34;http://dita.oasis-open.org/architecture/2005/&#34; class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;存储金融数据的分区方案最佳实践&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;存储金融数据的分区方案最佳实践&lt;/title&gt;&lt;prolog class=&#34;- topic/prolog &#34;&gt;&lt;author class=&#34;- topic/author &#34; xtrc=&#34;author:1;12:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/author&gt;&lt;publisherinformation class=&#34;- topic/publisher bookmap/publisherinformation &#34; xtrc=&#34;publisherinformation:1;14:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:1;15:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;printlocation class=&#34;- topic/data bookmap/printlocation &#34; xtrc=&#34;printlocation:1;16:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;N/A&lt;/printlocation&gt; &lt;published class=&#34;- topic/data bookmap/published &#34; xtrc=&#34;published:1;17:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:2;18:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;publishtype class=&#34;- topic/data bookmap/publishtype &#34; value=&#34;HTML&#34; xtrc=&#34;publishtype:1;19:44&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;revisionid class=&#34;- topic/ph bookmap/revisionid &#34; xtrc=&#34;revisionid:1;20:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;200&lt;/revisionid&gt; &lt;summary class=&#34;- topic/ph bookmap/summary &#34; xtrc=&#34;summary:1;22:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:1;23:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/published&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:2;25:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/publisherinformation&gt;&lt;metadata class=&#34;- topic/metadata &#34;&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:2;39:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:1;28:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;category class=&#34;- topic/category &#34; xtrc=&#34;category:1;29:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;prodinfo class=&#34;- topic/prodinfo &#34; xtrc=&#34;prodinfo:1;34:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;prodname class=&#34;- topic/prodname &#34; xtrc=&#34;prodname:1;35:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/prodname&gt; &lt;brand class=&#34;- topic/brand &#34; xtrc=&#34;brand:1;36:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/brand&gt; &lt;/prodinfo&gt;&lt;/metadata&gt;&lt;/prolog&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;/&gt;&lt;related-links class=&#34;- topic/related-links &#34;&gt;&lt;linkpool class=&#34;- topic/linkpool &#34; xtrc=&#34;topicref:101;136:101&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;../tutorials/about_tutorials.dita&#34; mapclass=&#34;- map/topicref bookmap/chapter &#34; role=&#34;parent&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:1;5:53&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot usertext?&gt;教程&lt;/linktext&gt;&lt;?ditaot usershortdesc?&gt;&lt;desc class=&#34;- topic/desc &#34;&gt;DolphinDB 产品使用教程&lt;/desc&gt;&lt;/link&gt;&lt;/linkpool&gt;&lt;/related-links&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1-概述&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:2;3:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:2;3:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;1. 概述&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:2;3:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:1;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;对数据库进行合理的分区可以显著降低系统响应延迟，提高数据吞吐量。合理的分区设计需要综合考虑数据分布的特征、查询和计算的典型场景、数据更新的频率等方方面面。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:2;7:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;本文为入门级教程，针对几种常见的金融数据给出了较为通用的分区方案和示例脚本，以帮助初次体验 DolphinDB 的用户快速完成建库建表。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:3;9:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;本文全部代码适用于 2.00.10 及以上版本。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;2-数据存储方案总览&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:3;11:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:3;11:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;2. 数据存储方案总览&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:3;11:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:4;13:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;存储方案包括金融数据存储方案和因子库存储方案两大部分。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;21-金融数据存储方案&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:4;15:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:4;15:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;2.1. 金融数据存储方案&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:4;15:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:5;17:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;针对不同金融数据，给出以下的分区存储方案：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:1;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;6&#34; xtrc=&#34;tgroup:1;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:1;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:2;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:3;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col4&#34; colnum=&#34;4&#34; xtrc=&#34;colspec:4;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col5&#34; colnum=&#34;5&#34; xtrc=&#34;colspec:5;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col6&#34; colnum=&#34;6&#34; xtrc=&#34;colspec:6;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:1;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:1;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:1;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:1;19:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;产品大类&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:2;19:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:2;19:14&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;数据集&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:3;19:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:3;19:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;存储引擎&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:4;19:48&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:4;19:49&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;分区方案&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:5;19:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:5;19:81&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;分区列&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:6;19:99&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:6;19:100&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;排序列&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:1;21:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:2;21:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:7;21:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:8;21:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;Level-2 快照（沪深分表）&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:9;21:34&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:10;21:49&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按天分区 + 按股票代码 HASH25 分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:11;21:74&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易日期 + 股票代码&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:12;21:88&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票代码 + 交易时间&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:3;22:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:13;22:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:14;22:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;Level-1 快照（沪深分表）&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:15;22:34&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:16;22:49&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按天分区 + 按股票代码 HASH25 分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:17;22:74&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易日期 + 股票代码&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:18;22:88&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票代码 + 交易时间&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:4;23:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:19;23:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:20;23:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;逐笔委托（沪深分表）&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:21;23:32&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:22;23:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按天分区 + 按股票代码 HASH25 分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:23;23:72&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易日期 + 股票代码&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:24;23:86&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票代码 + 交易时间&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:5;24:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:25;24:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:26;24:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;逐笔成交（沪深分表）&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:27;24:32&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:28;24:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按天分区 + 按股票代码 HASH25 分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:29;24:72&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易日期 + 股票代码&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:30;24:86&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票代码 + 交易时间&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:6;25:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:31;25:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:32;25:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;Level-2 快照（沪深合并）&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:33;25:34&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:34;25:49&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按天分区 + 按股票代码 HASH50 分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:35;25:74&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易日期 + 股票代码&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:36;25:88&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易所类型 + 股票代码 + 交易时间&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:7;26:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:37;26:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:38;26:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;Level-1 快照（沪深合并）&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:39;26:34&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:40;26:49&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按天分区 + 按股票代码 HASH50 分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:41;26:74&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易日期 + 股票代码&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:42;26:88&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易所类型 + 股票代码 + 交易时间&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:8;27:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:43;27:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:44;27:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;逐笔委托（沪深合并）&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:45;27:32&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:46;27:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按天分区 + 按股票代码 HASH50 分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:47;27:72&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易日期 + 股票代码&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:48;27:86&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易所类型 + 股票代码 + 交易时间&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:9;28:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:49;28:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:50;28:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;逐笔成交（沪深合并）&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:51;28:32&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:52;28:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按天分区 + 按股票代码 HASH50 分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:53;28:72&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易日期 + 股票代码&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:54;28:86&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易所类型 + 股票代码 + 交易时间&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:10;29:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:55;29:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:56;29:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;日 K 线&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:57;29:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;OLAP&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:58;29:55&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按年分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:59;29:87&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易时间&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:60;29:105&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;无&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:11;30:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:61;30:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:62;30:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;分钟 K 线&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:63;30:39&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;OLAP&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:64;30:54&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按天分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:65;30:86&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易时间&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:66;30:104&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;无&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:12;31:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:67;31:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;期权&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:68;31:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;快照&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:69;31:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:70;31:55&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按天分区 + 按期权代码 HASH20 分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:71;31:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易日期 + 期权代码&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:72;31:94&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;期权代码 + 接收时间&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:13;32:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:73;32:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;期货&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:74;32:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;快照&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:75;32:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:76;32:55&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按天分区 + 按期货代码 HASH10 分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:77;32:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易日期 + 期货代码&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:78;32:94&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;期货代码 + 接收时间&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:14;33:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:79;33:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;期货&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:80;33:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;日 K 线&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:81;33:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;OLAP&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:82;33:55&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按年分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:83;33:87&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易时间&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:84;33:105&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;无&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:15;34:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:85;34:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;期货&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:86;34:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;分钟 K 线&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:87;34:39&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;OLAP&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:88;34:54&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按天分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:89;34:86&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易时间&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:90;34:104&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;无&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:16;35:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:91;35:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;银行间债券&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:92;35:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;X-Bond 报价&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:93;35:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:94;35:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按天分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:95;35:84&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;创建日期&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:96;35:102&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;债券代码 + 创建时间&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:17;36:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:97;36:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;银行间债券&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:98;36:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;X-Bond 成交&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:99;36:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:100;36:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按天分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:101;36:84&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;创建日期&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:102;36:102&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;债券代码 + 创建时间&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:18;37:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;18&#34; xtrc=&#34;entry:103;37:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;银行间债券&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;18&#34; xtrc=&#34;entry:104;37:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;ESP 报价&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;18&#34; xtrc=&#34;entry:105;37:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;18&#34; xtrc=&#34;entry:106;37:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按天分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;18&#34; xtrc=&#34;entry:107;37:84&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;创建日期&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;18&#34; xtrc=&#34;entry:108;37:102&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;债券代码 + 创建时间&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:19;38:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;19&#34; xtrc=&#34;entry:109;38:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;银行间债券&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;19&#34; xtrc=&#34;entry:110;38:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;ESP 成交&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;19&#34; xtrc=&#34;entry:111;38:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;19&#34; xtrc=&#34;entry:112;38:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按天分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;19&#34; xtrc=&#34;entry:113;38:84&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;创建日期&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;19&#34; xtrc=&#34;entry:114;38:102&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;债券代码 + 创建时间&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:20;39:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;20&#34; xtrc=&#34;entry:115;39:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;银行间债券&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;20&#34; xtrc=&#34;entry:116;39:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;QB 报价&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;20&#34; xtrc=&#34;entry:117;39:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;20&#34; xtrc=&#34;entry:118;39:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按天分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;20&#34; xtrc=&#34;entry:119;39:84&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;市场时间&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;20&#34; xtrc=&#34;entry:120;39:102&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;债券代码 + 市场时间&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:21;40:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;21&#34; xtrc=&#34;entry:121;40:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;银行间债券&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;21&#34; xtrc=&#34;entry:122;40:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;QB 成交&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;21&#34; xtrc=&#34;entry:123;40:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;21&#34; xtrc=&#34;entry:124;40:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按天分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;21&#34; xtrc=&#34;entry:125;40:84&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;市场时间&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;21&#34; xtrc=&#34;entry:126;40:102&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;债券代码 + 市场时间&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;22-因子库窄表存储方案&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:5;43:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:5;43:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;2.2. 因子库窄表存储方案&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:5;43:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:6;45:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;因子挖掘是量化交易的必备环节之一。随着量化交易和 AI 模型训练规模的发展，量化投资团队在投研环节势必需要处理大量因子数据。因子的存储也是一个关键问题，本文推荐使用窄表存储因子库。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/best_practices_for_partitioned_storage/01.png&#34; xtrc=&#34;image:1;47:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34; dita-ot:image-width=&#34;273&#34; dita-ot:image-height=&#34;264&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:7;49:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;窄表存储模型&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/best_practices_for_partitioned_storage/02.png&#34; xtrc=&#34;image:2;51:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34; dita-ot:image-width=&#34;642&#34; dita-ot:image-height=&#34;78&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:8;53:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;宽表存储模型&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:9;55:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;相较于宽表，窄表存储有以下优势：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:1;57:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:1;57:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;更加高效地删除过期失效因子&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:2;58:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:2;58:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;宽表的方案是删除全表的某一列，相比窄表方案效率低下&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:3;59:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;更加高效地添加新因子&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:3;60:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:4;60:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;宽表的方案是先增加列，然后更新新增列的值，相比窄表方案效率低下&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:5;61:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;更加高效地按照因子名更新指定因子的值&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:4;62:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:6;62:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;宽表的方案是 update 全表的某一列，相比窄表效率低下&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:7;63:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;单次多因子面板数据的查询效率和宽表近似&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:5;64:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:8;64:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;DolphinDB 通过对 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:1;64:19&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;pivot by&lt;/codeph&gt; 方法的并行优化，保证了窄表存储方案的多因子数据查询效率&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:10;66:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;针对不同频率的因子数据，给出以下的分区存储方案，均采用 TSDB 存储引擎：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:2;68:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;6&#34; xtrc=&#34;tgroup:2;68:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:7;68:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:8;68:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:9;68:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col4&#34; colnum=&#34;4&#34; xtrc=&#34;colspec:10;68:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col5&#34; colnum=&#34;5&#34; xtrc=&#34;colspec:11;68:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col6&#34; colnum=&#34;6&#34; xtrc=&#34;colspec:12;68:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:2;68:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:22;68:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:127;68:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:7;68:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;产品大类&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:128;68:32&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:8;68:33&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;因子频率&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:129;68:81&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:9;68:82&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;分区方案&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:130;68:108&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:10;68:109&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;分区列&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:131;68:127&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:11;68:128&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;排序列&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:132;68:146&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:12;68:147&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;sortKey 降维&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:2;70:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:23;70:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:133;70:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票（假设共 5000 支标的）&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:134;70:26&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;日频因子&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:135;70:58&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按年分区 + 按因子名分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:136;70:101&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易时间 + 因子名&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:137;70:125&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票代码 + 交易时间&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:138;70:139&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;500&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:24;71:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:139;71:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票（假设共 5000 支标的）&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:140;71:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;30 分钟因子&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:141;71:53&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按年分区 + 按因子名分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:142;71:96&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易时间 + 因子名&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:143;71:120&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票代码 + 交易时间&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:144;71:134&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;500&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:25;72:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:145;72:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票（假设共 5000 支标的）&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:146;72:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;10 分钟因子&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:147;72:53&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按月分区 + 按因子名分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:148;72:96&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易时间 + 因子名&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:149;72:120&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票代码 + 交易时间&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:150;72:134&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;500&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:26;73:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:151;73:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票（假设共 5000 支标的）&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:152;73:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;1 分钟频因子&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:153;73:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按日分区 + 按因子名分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:154;73:95&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易时间 + 因子名&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:155;73:119&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票代码 + 交易时间&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:156;73:133&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;500&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:27;74:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:157;74:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票（假设共 5000 支标的）&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:158;74:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;1 秒钟频因子&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:159;74:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按小时分区 + 按因子名分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:160;74:94&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易时间 + 因子名&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:161;74:118&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票代码 + 交易时间&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:162;74:132&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;500&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:28;75:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:163;75:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票（假设共 5000 支标的）&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:164;75:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;Level-2 快照频率因子（3 秒~5 秒）&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:165;75:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按日分区 + 按因子名分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:166;75:90&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易时间 + 因子名&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:167;75:114&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票代码 + 交易时间&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:168;75:128&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;500&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:29;76:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:169;76:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票（假设共 5000 支标的）&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:170;76:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;Level-2 逐笔频因子&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:171;76:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按小时分区 + 按因子名分区 + 按股票代码 HASH10 分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:172;76:87&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易时间 + 因子名 + 股票代码&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:173;76:107&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票代码 + 交易时间&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:174;76:121&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;不降维&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:30;77:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:175;77:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;期货（假设共 200 支标的）&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:176;77:26&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;500ms 频因子&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:177;77:76&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;按日分区 + 按因子名分区&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:178;77:97&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易时间 + 因子名&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:179;77:112&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;期货代码 + 交易时间&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:180;77:126&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;500&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;3-金融数据存储方案实践&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:6;79:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:6;79:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3. 金融数据存储方案实践&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:6;79:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:11;81:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;基于上一章的分区方案，本章将提供对应的 DolphinDB 脚本。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;31-股票数据&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:7;83:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:7;83:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3.1. 股票数据&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:7;83:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;311-level-2-行情数据&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:8;85:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:8;85:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3.1.1. Level-2 行情数据&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:8;85:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:12;87:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票 Level-2 行情数据包含 Level-2 快照数据、逐笔委托数据、逐笔成交数据，在分布式数据库中，如果要连接（join）多个分区的数据表，通常会非常耗时，因为涉及到的分区可能位于不同的节点上，需要在不同节点之间复制数据。为解决这个问题，DolphinDB 推出了共存储位置（co-location）的分区机制，确保同一个分布式数据库里所有表在相同分区的数据存储在相同的节点上。这样的安排，保证了这些表在连接的时候非常高效。因此在本方案中，把 Level-2 快照数据、逐笔委托数据、逐笔成交数据这些分区方案一致的数据表存入同一个数据库中。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:13;89:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;上交所和深交所两个交易所的数据在字段结构上略有不同，用户在建立库表时可以考虑是否将两个交易所的数据进行合并，如果选择存为一张表，则表中的字段是两个交易所数据字段的并集，并新增字段 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:1;89:91&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;Market&lt;/i&gt; 用于标识数据来自哪个交易所。Level-1 的分区方案采用 Level-2 的即可。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:14;91:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;如果您希望将通联数据导入 DolphinDB 数据库，可以参考如下教程，使用封装好的模块即可完成建库建表和 Level-2 行情数据导入：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:6;93:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:9;93:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;md&#34; href=&#34;https://gitee.com/dolphindb/DolphinDBModules/blob/master/easyTLDataImport/README.md&#34; scope=&#34;external&#34; xtrc=&#34;xref:1;93:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;?ditaot usertext?&gt;DolphinDBModules::easyTLDataImport 通联历史数据自动化导入功能模块使用教程&lt;/xref&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:15;95:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;下面将根据是否将沪深交易所分开存储介绍不同建库建表的分区规则。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;3111-level-2-快照沪深分表&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:9;97:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:9;97:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3.1.1.1. Level-2 快照（沪深分表）&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:9;97:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:16;99:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:13;99:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;深交所&lt;/b&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:1;101:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://split_SZ_TB&#34; partitioned by VALUE(2020.01.01..2021.01.01), HASH([SYMBOL, 25]) engine='TSDB' create table &#34;dfs://split_SZ_TB&#34;.&#34;split_SZ_snapshotTB&#34;(     TradeDate DATE[comment=&#34;交易日期&#34;, compress=&#34;delta&#34;] TradeTime TIME[comment=&#34;交易时间&#34;, compress=&#34;delta&#34;]     MDStreamID SYMBOL     SecurityID SYMBOL     SecurityIDSource SYMBOL     TradingPhaseCode SYMBOL     PreCloPrice DOUBLE     NumTrades LONG     TotalVolumeTrade LONG     TotalValueTrade DOUBLE     LastPrice DOUBLE     OpenPrice DOUBLE     HighPrice DOUBLE     LowPrice DOUBLE     DifPrice1 DOUBLE     DifPrice2 DOUBLE     PE1 DOUBLE     PE2 DOUBLE     PreCloseIOPV DOUBLE     IOPV DOUBLE     TotalBidQty LONG     WeightedAvgBidPx DOUBLE     TotalOfferQty LONG     WeightedAvgOfferPx DOUBLE     UpLimitPx DOUBLE     DownLimitPx DOUBLE     OpenInt INT     OptPremiumRatio DOUBLE     OfferPrice DOUBLE[]     BidPrice DOUBLE[]     OfferOrderQty LONG[]     BidOrderQty LONG[]     BidNumOrders INT[]     OfferNumOrders INT[]     LocalTime TIME     SeqNo INT     OfferOrders LONG[]     BidOrders LONG[] ) partitioned by TradeDate, SecurityID, sortColumns=[`SecurityID,`TradeTime], keepDuplicates=ALL&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:17;151:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;Level-2 行情数据使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:14;151:16&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按天 + 股票维度 HASH25&lt;/b&gt;”的分区规则，使用存储引擎 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:15;151:54&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/b&gt;，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:16;151:66&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票代码 + 交易时间&lt;/b&gt;”作为排序列。下面对上述脚本进行说明：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:7;153:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:10;153:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB 引擎只支持创建分布式数据库，库名前必须添加”dfs://”；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:11;154:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;在此处建立分区表时对某些列使用了指定压缩算法，对 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:2;154:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TradeTime&lt;/i&gt; 列使用了“delta”压缩算法，其余列则默认使用“lz4”压缩算法；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:12;155:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;建表时指定 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:3;155:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;OfferPrice&lt;/i&gt; 为 DOUBLE[] 类型，表示将 10 档卖价数据存 储在一个字段中，该字段类型为 DOUBLE 类型的数组向量（arrray vector），更详细的 array vector 介绍见：&lt;xref class=&#34;- topic/xref &#34; format=&#34;md&#34; href=&#34;https://gitee.com/dolphindb/Tutorials_CN/blob/master/Array_Vector.md&#34; scope=&#34;external&#34; xtrc=&#34;xref:2;155:118&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;?ditaot usertext?&gt;DolphinDB 中有关 array vector 的最佳实践指南&lt;/xref&gt; ；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:13;156:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:4;156:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;sortColumns&lt;/i&gt; 参数用于将写入的数据按照指定字段进行排序，系统默认 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:5;156:43&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;sortColumns&lt;/i&gt;（指定多列时）最后一列为时间列，其余列字段作为排序的索引列，称作 sort key。频繁查询的字段适合设置为 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:6;156:111&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;sortColumns&lt;/i&gt;，且建议优先把查询频率高的字段作为 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:7;156:142&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;sortColumns&lt;/i&gt; 中位置靠前的列；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:14;157:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:8;157:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;keepDuplicates&lt;/i&gt; 参数表示在每个分区内如何处理所有 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:9;157:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;sortColumns&lt;/i&gt; 之值皆相同的数据，在两个函数中该参数的值均为“ALL”表示保留所有数据。&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:18;159:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:17;159:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;上交所&lt;/b&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:2;161:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://split_SH_TB&#34; partitioned by VALUE(2020.01.01..2021.01.01), HASH([SYMBOL, 25]) engine='TSDB' create table &#34;dfs://split_SH_TB&#34;.&#34;split_SH_snapshotTB&#34;( TradeDate DATE[comment=&#34;交易日期&#34;, compress=&#34;delta&#34;] TradeTime TIME[comment=&#34;交易时间&#34;, compress=&#34;delta&#34;] SecurityID SYMBOL ImageStatus INT PreCloPrice DOUBLE OpenPrice DOUBLE HighPrice DOUBLE LowPrice DOUBLE LastPrice DOUBLE ClosePrice DOUBLE TradingPhaseCode SYMBOL NumTrades LONG TotalVolumeTrade LONG TotalValueTrade DOUBLE TotalBidQty LONG WeightedAvgBidPx DOUBLE AltWAvgBidPri DOUBLE TotalOfferQty LONG WeightedAvgOfferPx DOUBLE AltWAvgAskPri DOUBLE ETFBuyNumber INT ETFBuyAmount LONG ETFBuyMoney DOUBLE ETFSellNumber INT ETFSellAmount LONG ETFSellMoney DOUBLE YieldToMatu DOUBLE TotWarExNum DOUBLE UpLimitPx DOUBLE DownLimitPx DOUBLE WithdrawBuyNumber INT WithdrawBuyAmount LONG WithdrawBuyMoney DOUBLE WithdrawSellNumber INT WithdrawSellAmount LONG WithdrawSellMoney DOUBLE TotalBidNumber INT TotalOfferNumber INT MaxBidDur INT MaxSellDur INT BidNum INT SellNum INT IOPV DOUBLE OfferPrice DOUBLE[] BidPrice DOUBLE[] OfferOrderQty LONG[] BidOrderQty LONG[] BidNumOrders INT[] OfferNumOrders INT[] LocalTime TIME SeqNo INT OfferOrders LONG[] BidOrders LONG[] ) partitioned by TradeDate, SecurityID, sortColumns=[`SecurityID,`TradeTime], keepDuplicates=ALL&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:19;226:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;上交所的数据格式与深交所略有不同，但分区方案一致。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;3112-逐笔委托沪深分表&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:10;228:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:10;228:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3.1.1.2. 逐笔委托（沪深分表）&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:10;228:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:20;230:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:18;230:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;深交所&lt;/b&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:3;232:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://split_SZ_TB&#34; partitioned by VALUE(2020.01.01..2021.01.01), HASH([SYMBOL, 25]) engine='TSDB' create table &#34;dfs://split_SZ_TB&#34;.&#34;split_SZ_entrustTB&#34;( ChannelNo INT ApplSeqNum LONG MDStreamID SYMBOL SecurityID SYMBOL SecurityIDSource SYMBOL Price DOUBLE OrderQty LONG Side SYMBOL TradeDate DATE[comment=&#34;交易日期&#34;, compress=&#34;delta&#34;] TradeTime TIME[comment=&#34;交易时间&#34;, compress=&#34;delta&#34;] OrderType SYMBOL LocalTime TIME SeqNo INT ) partitioned by TradeDate, SecurityID, sortColumns=[`SecurityID,`TradeTime], keepDuplicates=ALL&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:21;257:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码以创建存储深交所逐笔委托数据的数据库表，分区规则采用了“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:19;257:39&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按日 + 股票代码 HASH25&lt;/b&gt;”的组合分区方式存储，使用存储引擎 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:20;257:81&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/b&gt;，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:21;257:93&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票代码 + 交易时间&lt;/b&gt;”作为排序列。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:22;259:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:22;259:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;上交所&lt;/b&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:4;261:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://split_SH_TB&#34; partitioned by VALUE(2020.01.01..2021.01.01), HASH([SYMBOL, 25]) engine='TSDB' create table &#34;dfs://split_SH_TB&#34;.&#34;split_SH_entrustTB&#34;( DataStatus INT ApplSeqNum LONG ChannelNo INT SecurityID SYMBOL TradeDate DATE[comment=&#34;交易日期&#34;, compress=&#34;delta&#34;] TradeTime TIME[comment=&#34;交易时间&#34;, compress=&#34;delta&#34;] OrderType SYMBOL OrderNO INT Price DOUBLE OrderQty LONG Side SYMBOL BizIndex INT LocalTime TIME SeqNo INT ) partitioned by TradeDate, SecurityID, sortColumns=[`SecurityID,`TradeTime], keepDuplicates=ALL&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:23;287:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;上交所的数据格式与深交所略有不同，但分区方案一致。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;3113-逐笔成交沪深分表&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:11;289:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:11;289:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3.1.1.3. 逐笔成交（沪深分表）&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:11;289:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:24;291:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:23;291:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;深交所&lt;/b&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:5;293:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://split_SZ_TB&#34; partitioned by VALUE(2020.01.01..2021.01.01), HASH([SYMBOL, 25]) engine='TSDB' create table &#34;dfs://split_SZ_TB&#34;.&#34;split_SZ_tradeTB&#34;( ChannelNo INT ApplSeqNum LONG MDStreamID SYMBOL BidApplSeqNum LONG OfferApplSeqNum LONG SecurityID SYMBOL SecurityIDSource SYMBOL TradePrice DOUBLE TradeQty INT ExecType SYMBOL TradeDate DATE[comment=&#34;交易日期&#34;, compress=&#34;delta&#34;] TradeTime TIME[comment=&#34;交易时间&#34;, compress=&#34;delta&#34;] LocalTime TIME SeqNo INT OrderKind SYMBOL ) partitioned by TradeDate, SecurityID, sortColumns=[`SecurityID,`TradeTime], keepDuplicates=ALL&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:25;320:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码以创建存储深交所逐笔委托数据的数据库表，分区规则采用了“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:24;320:39&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按日 + 股票代码 HASH25&lt;/b&gt;”的组合分区方式存储，使用存储引擎 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:25;320:81&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/b&gt;，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:26;320:93&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票代码 + 交易时间&lt;/b&gt;”作为排序列。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:26;322:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:27;322:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;上交所&lt;/b&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:6;324:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://split_SH_TB&#34; partitioned by VALUE(2020.01.01..2021.01.01), HASH([SYMBOL, 25]) engine='TSDB' create table &#34;dfs://split_SH_TB&#34;.&#34;split_SH_tradeTB&#34;( DataStatus INT ApplSeqNum INT ChannelNo INT SecurityID SYMBOL TradeDate DATE[comment=&#34;交易日期&#34;, compress=&#34;delta&#34;] TradeTime TIME[comment=&#34;交易时间&#34;, compress=&#34;delta&#34;] TradePrice DOUBLE TradeQty LONG TradeMoney DOUBLE BidApplSeqNum LONG OfferApplSeqNum LONG TradeBSFlag SYMBOL BizIndex LONG LocalTime TIME SeqNo INT ) partitioned by TradeDate, SecurityID, sortColumns=[`SecurityID,`TradeTime], keepDuplicates=ALL&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:27;351:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;上交所的数据格式与深交所略有不同，但分区方案一致。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;3114-level-2-快照沪深合并&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:12;353:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:12;353:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3.1.1.4. Level-2 快照（沪深合并）&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:12;353:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:7;355:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://merge_TB&#34; partitioned by VALUE(2020.01.01..2021.01.01), HASH([SYMBOL, 50]) engine='TSDB' create table &#34;dfs://merge_TB&#34;.&#34;merge_snapshotTB&#34;( Market SYMBOL TradeDate DATE[comment=&#34;交易日期&#34;, compress=&#34;delta&#34;] TradeTime TIME[comment=&#34;交易时间&#34;, compress=&#34;delta&#34;] MDStreamID SYMBOL SecurityID SYMBOL SecurityIDSource SYMBOL TradingPhaseCode SYMBOL ImageStatus INT PreCloPrice DOUBLE NumTrades LONG TotalVolumeTrade LONG TotalValueTrade DOUBLE LastPrice DOUBLE OpenPrice DOUBLE HighPrice DOUBLE LowPrice DOUBLE ClosePrice DOUBLE DifPrice1 DOUBLE DifPrice2 DOUBLE PE1 DOUBLE PE2 DOUBLE PreCloseIOPV DOUBLE IOPV DOUBLE TotalBidQty LONG WeightedAvgBidPx DOUBLE AltWAvgBidPri DOUBLE TotalOfferQty LONG WeightedAvgOfferPx DOUBLE AltWAvgAskPri DOUBLE UpLimitPx DOUBLE DownLimitPx DOUBLE OpenInt INT OptPremiumRatio DOUBLE OfferPrice DOUBLE[] BidPrice DOUBLE[] OfferOrderQty LONG[] BidOrderQty LONG[] BidNumOrders INT[] OfferNumOrders INT[] ETFBuyNumber INT ETFBuyAmount LONG ETFBuyMoney DOUBLE ETFSellNumber INT ETFSellAmount LONG ETFSellMoney DOUBLE YieldToMatu DOUBLE TotWarExNum DOUBLE WithdrawBuyNumber INT WithdrawBuyAmount LONG WithdrawBuyMoney DOUBLE WithdrawSellNumber INT WithdrawSellAmount LONG WithdrawSellMoney DOUBLE TotalBidNumber INT TotalOfferNumber INT MaxBidDur INT MaxSellDur INT BidNum INT SellNum INT LocalTime TIME SeqNo INT OfferOrders LONG[] BidOrders LONG[] ) partitioned by TradeDate, SecurityID, sortColumns=[`Market,`SecurityID,`TradeTime], keepDuplicates=ALL&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:28;430:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码建立同时存储沪深 Level-2 行情数据的数据库表，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:28;430:41&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按天 + 股票维度 HASH50&lt;/b&gt;”的分区规则，使用存储引擎 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:29;430:79&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/b&gt;，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:30;430:91&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易所类型 + 股票代码 + 交易时间&lt;/b&gt;”作为排序列。与沪深分开存储的建库建表的分区规则类似，仅在 HASH 数量和排序列方面有所区别。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;3115-逐笔委托沪深合并&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:13;432:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:13;432:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3.1.1.5. 逐笔委托（沪深合并）&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:13;432:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:8;434:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://merge_TB&#34; partitioned by VALUE(2020.01.01..2021.01.01), HASH([SYMBOL, 50]) engine='TSDB' create table &#34;dfs://merge_TB&#34;.&#34;merge_entrustTB&#34;( ChannelNo INT ApplSeqNum LONG MDStreamID SYMBOL SecurityID SYMBOL SecurityIDSource SYMBOL Price DOUBLE OrderQty LONG Side SYMBOL TradeDate DATE[comment=&#34;交易日期&#34;, compress=&#34;delta&#34;] TradeTime TIME[comment=&#34;交易时间&#34;, compress=&#34;delta&#34;] OrderType SYMBOL LocalTime TIME SeqNo LONG OrderNO LONG DataStatus INT BizIndex LONG Market SYMBOL ) partitioned by TradeDate, SecurityID, sortColumns=[`Market,`SecurityID,`TradeTime], keepDuplicates=ALL&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:29;463:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码建立同时存储沪深 Level-2 行情数据的数据库表，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:31;463:41&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按天 + 股票维度 HASH50&lt;/b&gt;”的分区规则，使用存储引擎 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:32;463:79&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/b&gt;，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:33;463:91&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易所类型 + 股票代码 + 交易时间&lt;/b&gt;”作为排序列。与沪深分开存储的建库建表的分区规则类似，仅在 HASH 数量和排序列方面有所区别。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;3116-逐笔成交沪深合并&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:14;465:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:14;465:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3.1.1.6. 逐笔成交（沪深合并）&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:14;465:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:9;467:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://merge_TB&#34; partitioned by VALUE(2020.01.01..2021.01.01), HASH([SYMBOL, 50]) engine='TSDB' create table &#34;dfs://merge_TB&#34;.&#34;merge_tradeTB&#34;( ChannelNo INT ApplSeqNum LONG MDStreamID SYMBOL BidApplSeqNum LONG OfferApplSeqNum LONG SecurityID SYMBOL SecurityIDSource SYMBOL TradePrice DOUBLE TradeQty LONG ExecType SYMBOL TradeDate DATE[comment=&#34;交易日期&#34;, compress=&#34;delta&#34;] TradeTime TIME[comment=&#34;交易时间&#34;, compress=&#34;delta&#34;] LocalTime TIME SeqNo LONG DataStatus INT TradeMoney DOUBLE TradeBSFlag SYMBOL BizIndex LONG OrderKind SYMBOL Market SYMBOL ) partitioned by TradeDate, SecurityID, sortColumns=[`Market,`SecurityID,`TradeTime], keepDuplicates=ALL&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:30;499:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码建立同时存储沪深 Level-2 行情数据的数据库表，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:34;499:41&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按天 + 股票维度 HASH50&lt;/b&gt;”的分区规则，使用存储引擎 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:35;499:79&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/b&gt;，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:36;499:91&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;交易所类型 + 股票代码 + 交易时间&lt;/b&gt;”作为排序列。与沪深分开存储的建库建表的分区规则类似，仅在 HASH 数量和排序列方面有所区别。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;312-股票日-k-线&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:15;501:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:15;501:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3.1.2. 股票日 K 线&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:15;501:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:10;503:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://k_day_level&#34; partitioned by RANGE(2000.01M + (0..30)*12) engine='OLAP' create table &#34;dfs://k_day_level&#34;.&#34;k_day&#34;( securityid SYMBOL tradetime TIMESTAMP open DOUBLE close DOUBLE high DOUBLE low DOUBLE vol INT val DOUBLE vwap DOUBLE ) partitioned by tradetime&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:31;522:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码建立同时存储日 K 的数据库表，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:37;522:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按年&lt;/b&gt;”的分区规则，使用存储引擎 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:38;522:54&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;OLAP&lt;/b&gt;。每个分区内都包含了这一年所有股票的日 K 数据。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;313-股票分钟-k-线&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:16;524:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:16;524:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3.1.3. 股票分钟 K 线&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:16;524:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:11;526:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://k_minute_level&#34; partitioned by VALUE(2020.01.01..2021.01.01) engine='OLAP' create table &#34;dfs://k_minute_level&#34;.&#34;k_minute&#34;( securityid SYMBOL tradetime TIMESTAMP open DOUBLE close DOUBLE high DOUBLE low DOUBLE vol INT val DOUBLE vwap DOUBLE ) partitioned by tradetime&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:32;545:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码建立同时存储日 K 的数据库表，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:39;545:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按天&lt;/b&gt;”的分区规则，存储引擎使用 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:40;545:54&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;OLAP&lt;/b&gt;。每个分区内都包含了当天所有股票的分钟 K 数据。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;32-期权数据&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:17;547:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:17;547:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3.2. 期权数据&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:17;547:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;321-期权快照&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:18;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:18;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3.2.1. 期权快照&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:18;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:12;551:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://ctp_options&#34; partitioned by VALUE(2020.01.01..2021.01.01), HASH([SYMBOL, 20]) engine='TSDB' create table &#34;dfs://ctp_options&#34;.&#34;options&#34;( TradingDay DATE[comment=&#34;交易日期&#34;, compress=&#34;delta&#34;] ExchangeID SYMBOL LastPrice DOUBLE PreSettlementPrice DOUBLE PreClosePrice DOUBLE PreOpenInterest DOUBLE OpenPrice DOUBLE HighestPrice DOUBLE LowestPrice DOUBLE Volume INT Turnover DOUBLE OpenInterest DOUBLE ClosePrice DOUBLE SettlementPrice DOUBLE UpperLimitPrice DOUBLE LowerLimitPrice DOUBLE PreDelta DOUBLE CurrDelta DOUBLE UpdateTime SECOND UpdateMillisec INT BidPrice DOUBLE[] BidVolume INT[] AskPrice DOUBLE[] AskVolume INT[] AveragePrice DOUBLE ActionDay DATE InstrumentID SYMBOL ExchangeInstID STRING BandingUpperPrice DOUBLE BandingLowerPrice DOUBLE tradeTime TIME receivedTime NANOTIMESTAMP perPenetrationTime LONG ) partitioned by TradingDay, InstrumentID, sortColumns=[`InstrumentID,`ReceivedTime], keepDuplicates=ALL&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:33;596:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码以创建存储期权快照数据的数据库表，分区规则采用了“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:41;596:36&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按天 + 期权代码维度 HASH20&lt;/b&gt;”的组合分区方式存储，使用存储引擎 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:42;596:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/b&gt;，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:43;596:92&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;期权代码 + 接收时间&lt;/b&gt;”作为排序列。经测试期货快照数据采用这种方式分区存储，综合性能最佳。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;33-期货数据&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:19;598:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:19;598:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3.3. 期货数据&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:19;598:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;331-期货快照&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:20;600:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:20;600:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3.3.1. 期货快照&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:20;600:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:13;602:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://ctp_futures&#34; partitioned by VALUE(2020.01.01..2021.01.01), HASH([SYMBOL, 10]) engine='TSDB' create table &#34;dfs://ctp_futures&#34;.&#34;futures&#34;( TradingDay DATE[comment=&#34;交易日期&#34;, compress=&#34;delta&#34;] ExchangeID SYMBOL LastPrice DOUBLE PreSettlementPrice DOUBLE PreClosePrice DOUBLE PreOpenInterest DOUBLE OpenPrice DOUBLE HighestPrice DOUBLE LowestPrice DOUBLE Volume INT Turnover DOUBLE OpenInterest DOUBLE ClosePrice DOUBLE SettlementPrice DOUBLE UpperLimitPrice DOUBLE LowerLimitPrice DOUBLE PreDelta DOUBLE CurrDelta DOUBLE UpdateTime SECOND UpdateMillisec INT BidPrice DOUBLE[] BidVolume INT[] AskPrice DOUBLE[] AskVolume INT[] AveragePrice DOUBLE ActionDay DATE InstrumentID SYMBOL ExchangeInstID STRING BandingUpperPrice DOUBLE BandingLowerPrice DOUBLE tradeTime TIME receivedTime NANOTIMESTAMP perPenetrationTime LONG ) partitioned by TradingDay, InstrumentID, sortColumns=[`InstrumentID,`ReceivedTime], keepDuplicates=ALL&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:34;647:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码以创建存储期货快照数据的数据库表，分区规则采用了“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:44;647:36&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按天 + 期货代码维度 HASH10&lt;/b&gt;”的组合分区方式存储，使用存储引擎 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:45;647:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/b&gt;，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:46;647:92&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;期货代码 + 接收时间&lt;/b&gt;”作为排序列。经测试期货快照数据采用这种方式分区存储，综合性能最佳。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;332-期货日-k-线&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:21;649:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:21;649:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3.3.2. 期货日 K 线&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:21;649:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:35;651:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;由于期货 K 数据与股票 K 数据类似，因此可以使用股票 K 数据的表格结构作为期货 K 数据的表格结构&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:14;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://ctp_k_day_level&#34; partitioned by RANGE(2000.01M + (0..30)*12) engine='OLAP' create table &#34;dfs://ctp_k_day_level&#34;.&#34;ctp_k_day&#34;( securityid SYMBOL tradetime TIMESTAMP open DOUBLE close DOUBLE high DOUBLE low DOUBLE vol INT val DOUBLE vwap DOUBLE ) partitioned by tradetime&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:36;672:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码以创建存储期货日 K 数据的数据库表，与股票日 K 数据的分区规则相同，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:47;672:50&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按年&lt;/b&gt;”的分区规则，存储引擎使用 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:48;672:74&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;OLAP&lt;/b&gt;。在一个分区中包含了这一年所有期货的日 K 数据。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;333-期货分钟-k-线&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:22;674:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:22;674:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3.3.3. 期货分钟 K 线&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:22;674:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:15;676:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://ctp_k_day_level&#34; partitioned by RANGE(2000.01M + (0..30)*12) engine='OLAP' create table &#34;dfs://ctp_k_day_level&#34;.&#34;ctp_k_day&#34;( securityid SYMBOL tradetime TIMESTAMP open DOUBLE close DOUBLE high DOUBLE low DOUBLE vol INT val DOUBLE vwap DOUBLE ) partitioned by tradetime&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:37;695:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码以创建存储期货分钟 K 数据的数据库表，与股票分钟 K 数据的分区规则相同，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:49;695:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按天&lt;/b&gt;”的分区规则，存储引擎使用 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:50;695:76&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;OLAP&lt;/b&gt;。每个分区内都包含了当天所有期货的分钟 K 数据。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;34-银行间债券&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:23;697:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:23;697:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3.4. 银行间债券&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:23;697:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;341-x-bond-报价&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:24;699:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:24;699:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3.4.1. X-Bond 报价&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:24;699:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:16;701:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://XBond&#34; partitioned by VALUE(2023.01.01..2023.12.31) engine='TSDB' create table &#34;dfs://XBond&#34;.&#34;XBondDepthTable&#34;( bondCodeVal SYMBOL createDate DATE[comment=&#34;创建日期&#34;, compress=&#34;delta&#34;] createTime TIME[comment=&#34;创建时间&#34;, compress=&#34;delta&#34;] marketDepth LONG mdBookType LONG messageId LONG messageSource STRING msgSeqNum LONG msgType STRING bidmdEntryPrice DOUBLE[] offermdEntryPrice DOUBLE[] bidmdEntrySize LONG[] offermdEntrySize LONG[] bidsettlType LONG[] offersettlType LONG[] bidyield DOUBLE[] offeryield DOUBLE[] bid1yieldType STRING offer1yieldType STRING bid2yieldType STRING offer2yieldType STRING bid3yieldType STRING offer3yieldType STRING bid4yieldType STRING offer4yieldType STRING bid5yieldType STRING offer5yieldType STRING bid6yieldType STRING offer6yieldType STRING securityID SYMBOL senderCompID STRING senderSubID STRING sendingTime TIMESTAMP ) partitioned by createDate, sortColumns=[`securityID, `createTime]&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:38;745:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码以创建存储 X-Bond 报价数据的数据库表，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:51;745:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按天&lt;/b&gt;”的分区规则，使用存储引擎 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:52;745:61&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/b&gt;，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:53;745:73&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;债券代码 + 创建时间&lt;/b&gt;”作为排序列。每个分区内都包含了当天所有 X-Bond 报价数据。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;342-x-bond-成交&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:25;747:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:25;747:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3.4.2. X-Bond 成交&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:25;747:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:17;749:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://XBond&#34; partitioned by VALUE(2023.01.01..2023.12.31) engine='TSDB' create table &#34;dfs://XBond&#34;.&#34;XBondTradetable&#34;( createDate DATE[comment=&#34;创建日期&#34;, compress=&#34;delta&#34;] createTime TIME[comment=&#34;创建时间&#34;, compress=&#34;delta&#34;] securityID SYMBOL beforeClosingPrice DOUBLE beforeClosingYield DOUBLE beforeWeightedAveragePrice DOUBLE beforeWeightedAverageYield DOUBLE fillSide LONG highestPrice DOUBLE highestYield DOUBLE lowestPrice DOUBLE lowestYield DOUBLE marketIndicator LONG mdSubType LONG mdType LONG messageId LONG messageSource STRING msgSeqNum LONG msgType STRING openingValence DOUBLE openingYield DOUBLE priceRiseFallAmplitude DOUBLE senderCompID STRING sendingTime TIMESTAMP settlType LONG symbol STRING tradeMethod LONG transactTime TIMESTAMP transactionNumber LONG uniqueOutputKey LONG upToDatePrice DOUBLE upToDateYield DOUBLE weightedAveragePrice DOUBLE weightedAverageYield DOUBLE yieldRiseFall DOUBLE ) partitioned by createDate, sortColumns=[`securityID, `createTime]&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:39;795:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码以创建存储 X-Bond 成交数据的数据库表，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:54;795:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按天&lt;/b&gt;”的分区规则，使用存储引擎 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:55;795:61&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/b&gt;，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:56;795:73&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;债券代码 + 创建时间&lt;/b&gt;”作为排序列。每个分区内都包含了当天所有 X-Bond 成交数据。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;343-esp-报价&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:26;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:26;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3.4.3. ESP 报价&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:26;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:18;799:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://ESP&#34; partitioned by VALUE(2023.01.01..2023.12.31) engine='TSDB' create table &#34;dfs://ESP&#34;.&#34;ESPDepthtable&#34;( createDate DATE[comment=&#34;创建日期&#34;, compress=&#34;delta&#34;] createTime TIME[comment=&#34;创建时间&#34;, compress=&#34;delta&#34;] bondCodeVal SYMBOL marketDepth LONG marketIndicator LONG mdBookType LONG mdSubBookType LONG messageId LONG messageSource STRING msgSeqNum LONG msgType STRING askclearingMethod LONG[] bidclearingMethod LONG[] askdeliveryType LONG[] biddeliveryType LONG[] askinitAccountNumSixCode LONG[] bidinitAccountNumSixCode LONG[] asklastPx DOUBLE[] bidlastPx DOUBLE[] askmdEntryDate DATE[] bidmdEntryDate DATE[] askmdEntrySize LONG[] bidmdEntrySize LONG[] askmdEntryTime TIME[] bidmdEntryTime TIME[] askmdQuoteType LONG[] bidmdQuoteType LONG[] askquoteEntryID LONG[] bidquoteEntryID LONG[] asksettlType LONG[] bidsettlType LONG[] askyield DOUBLE[] bidyield DOUBLE[] ask1initPartyTradeCode STRING bid1initPartyTradeCode STRING ask2initPartyTradeCode STRING bid2initPartyTradeCode STRING ask3initPartyTradeCode STRING bid3initPartyTradeCode STRING ask4initPartyTradeCode STRING bid4initPartyTradeCode STRING ask5initPartyTradeCode STRING bid5initPartyTradeCode STRING ask6initPartyTradeCode STRING bid6initPartyTradeCode STRING ask7initPartyTradeCode STRING bid7initPartyTradeCode STRING ask8initPartyTradeCode STRING bid8initPartyTradeCode STRING ask9initPartyTradeCode STRING bid9initPartyTradeCode STRING ask10initPartyTradeCode STRING bid10initPartyTradeCode STRING securityID SYMBOL securityType STRING senderCompID STRING senderSubID STRING sendingTime TIMESTAMP symbol STRING ) partitioned by createDate, sortColumns=[`securityID, `createTime]&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:40;869:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码以创建存储 ESP 报价数据的数据库表，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:57;869:34&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按天&lt;/b&gt;”的分区规则，使用存储引擎 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:58;869:58&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/b&gt;，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:59;869:70&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;债券代码 + 创建时间&lt;/b&gt;”作为排序列。每个分区内都包含了当天所有 ESP 报价数据。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;344-esp-成交&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:27;871:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:27;871:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3.4.4. ESP 成交&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:27;871:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:19;873:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://ESP&#34; partitioned by VALUE(2023.01.01..2023.12.31) engine='TSDB' create table &#34;dfs://ESP&#34;.&#34;ESPTradetable&#34;( createDate DATE[comment=&#34;创建日期&#34;, compress=&#34;delta&#34;] createTime TIME[comment=&#34;创建时间&#34;, compress=&#34;delta&#34;] securityID SYMBOL execId STRING execType STRING lastQty LONG marketIndicator LONG messageSource STRING msgSeqNum LONG msgType STRING price DOUBLE senderCompID STRING stipulationType STRING stipulationValue DOUBLE symbol STRING tradeDate DATE tradeMethod LONG tradeTime TIME tradeType LONG transactTime TIMESTAMP ) partitioned by createDate, sortColumns=[`securityID, `createTime]&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:41;904:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码以创建存储 ESP 成交数据的数据库表，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:60;904:34&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按天&lt;/b&gt;”的分区规则，使用存储引擎 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:61;904:58&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/b&gt;，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:62;904:70&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;债券代码 + 创建时间&lt;/b&gt;”作为排序列。每个分区内都包含了当天所有 ESP 成交数据。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;345-qb-报价&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:28;906:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:28;906:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3.4.5. QB 报价&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:28;906:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:20;908:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://QB_QUOTE&#34; partitioned by VALUE(2023.10.01..2023.10.31) engine='TSDB' create table &#34;dfs://QB_QUOTE&#34;.&#34;qbTable&#34;( SENDINGTIME TIMESTAMP CONTRIBUTORID SYMBOL MARKETDATATIME TIMESTAMP SECURITYID SYMBOL BONDNAME SYMBOL DISPLAYLISTEDMARKET SYMBOL BIDQUOTESTATUS INT BIDYIELD DOUBLE BIDPX DOUBLE BIDPRICETYPE INT BIDPRICE DOUBLE BIDDIRTYPRICE DOUBLE BIDVOLUME INT BIDPRICEDESC STRING ASKQUOTESTATUS INT ASKYIELD DOUBLE OFFERPX DOUBLE ASKPRICETYPE INT ASKPRICE DOUBLE ASKDIRTYPRICE DOUBLE ASKVOLUME INT ASKPRICEDESC STRING ) partitioned by MARKETDATATIME, sortColumns=[`SECURITYID,`MARKETDATATIME]&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:42;941:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码以创建存储 QB 报价数据的数据库表，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:63;941:33&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按天&lt;/b&gt;”的分区规则，使用存储引擎 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:64;941:57&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/b&gt;，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:65;941:69&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;债券代码 + 市场时间&lt;/b&gt;”作为排序列。每个分区内都包含了当天所有 QB 报价数据。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;346-qb-成交&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:29;943:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:29;943:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;3.4.6. QB 成交&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:29;943:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:21;945:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://QB_TRADE&#34; partitioned by VALUE(2023.10.01..2023.10.31) engine='TSDB' create table &#34;dfs://QB_TRADE&#34;.&#34;lastTradeTable&#34;( SECURITYID SYMBOL BONDNAME SYMBOL SENDINGTIME TIMESTAMP CONTRIBUTORID SYMBOL MARKETDATATIME TIMESTAMP MODIFYTIME SECOND DISPLAYLISTEDMARKET SYMBOL EXECID STRING DEALSTATUS INT TRADEMETHOD INT YIELD DOUBLE TRADEPX DOUBLE PRICETYPE INT TRADEPRICE DOUBLE DIRTYPRICE DOUBLE SETTLSPEED STRING ) partitioned by MARKETDATATIME, sortColumns=[`SECURITYID,`MARKETDATATIME]&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:43;972:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码以创建存储 QB 交易数据的数据库表，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:66;972:33&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按天&lt;/b&gt;”的分区规则，使用存储引擎 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:67;972:57&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/b&gt;，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:68;972:69&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;债券代码 + 市场时间&lt;/b&gt;”作为排序列。每个分区内都包含了当天所有 QB 交易数据。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;4-因子库窄表存储方案实践&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:30;974:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:30;974:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;4. 因子库窄表存储方案实践&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:30;974:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;41-日频因子库&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:31;976:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:31;976:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;4.1. 日频因子库&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:31;976:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:22;978:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://dayFactorDB&#34; partitioned by RANGE(date(datetimeAdd(1980.01M,0..80*12,'M'))), VALUE(`f1`f2), engine='TSDB' create table &#34;dfs://dayFactorDB&#34;.&#34;dayFactorTB&#34;( tradetime DATE[comment=&#34;时间列&#34;, compress=&#34;delta&#34;], securityid SYMBOL, value DOUBLE, factorname SYMBOL ) partitioned by tradetime, factorname, sortColumns=[`securityid, `tradetime], keepDuplicates=ALL, sortKeyMappingFunction=[hashBucket{, 500}]&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:44;995:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码以创建存储日频因子库的数据库表，分区规则采用了“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:69;995:35&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按年 + 因子名&lt;/b&gt;”的组合分区方式存储，使用存储引擎&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:70;995:68&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/b&gt;，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:71;995:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票代码 + 交易时间&lt;/b&gt;”作为排序列。经测试日频因子数据采用这种方式分区存储，综合性能最佳。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:45;997:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;对于分区内的分组排序存储来说，DolphinDB 中的 TSDB 存储引擎提供排序键设置，每一个分区的数据写在一个或多个 level file 中。每一个 level file 内部的数据按照指定的列进行排序且创建块索引。在排序列中，除了最后一列之外的其他列通常用作点查中的过滤条件。这些列的唯一值组合被称为 SortKeys（排序键）。为保证性能最优，每个分区的 SortKeys 建议不超过 1000 个。如 SortKeys 较多可通过设置 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:10;997:225&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;sortKeyMappingFunction&lt;/i&gt; 对 SortKeys 降维。经测试日频因子数据采用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:72;997:276&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;securityid + tradetime&lt;/b&gt;”的方式进行排序，&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:73;997:311&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;sortKeyMapping&lt;/b&gt; 设置为 500 时，综合性能最佳。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;42-半小时频因子库&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:32;999:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:32;999:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;4.2. 半小时频因子库&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:32;999:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:23;1001:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://halfhourFactorDB&#34; partitioned by RANGE(date(datetimeAdd(1980.01M,0..80*12,'M'))), VALUE(`f1`f2), engine='TSDB' create table &#34;dfs://halfhourFactorDB&#34;.&#34;halfhourFactorTB&#34;( tradetime TIMESTAMP[comment=&#34;时间列&#34;, compress=&#34;delta&#34;], securityid SYMBOL, value DOUBLE, factorname SYMBOL, ) partitioned by tradetime, factorname, sortColumns=[`securityid, `tradetime], keepDuplicates=ALL, sortKeyMappingFunction=[hashBucket{, 500}]&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:46;1018:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码以创建存储半小时频因子库的数据库表，分区规则采用了“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:74;1018:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按年 + 因子名&lt;/b&gt;”的组合分区方式存储，使用存储引擎 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:75;1018:71&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/b&gt;，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:76;1018:83&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票代码 + 交易时间&lt;/b&gt;”作为排序列。经测试半小时频因子数据采用这种方式分区存储，综合性能最佳。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;43-十分钟频因子库&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:33;1020:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:33;1020:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;4.3. 十分钟频因子库&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:33;1020:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:24;1022:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://tenMinutesFactorDB&#34; partitioned by VALUE(2023.01M..2023.06M), VALUE(`f1`f2), engine='TSDB' create table &#34;dfs://tenMinutesFactorDB&#34;.&#34;tenMinutesFactorTB&#34;( tradetime TIMESTAMP[comment=&#34;时间列&#34;, compress=&#34;delta&#34;], securityid SYMBOL, value DOUBLE, factorname SYMBOL ) partitioned by tradetime, factorname, sortColumns=[`securityid, `tradetime], keepDuplicates=ALL, sortKeyMappingFunction=[hashBucket{, 500}]&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:47;1040:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码以创建存储十分钟频因子库的数据库表，分区规则采用了“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:77;1040:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按月 + 因子名&lt;/b&gt;”的组合分区方式存储，使用存储引擎 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:78;1040:71&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/b&gt;，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:79;1040:83&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票代码 + 交易时间&lt;/b&gt;”作为排序列。经测试十分钟频因子数据采用这种方式分区存储，综合性能最佳。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;44-分钟频因子库&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:34;1042:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:34;1042:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;4.4. 分钟频因子库&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:34;1042:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:25;1044:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://minuteFactorDB&#34; partitioned by VALUE(2012.01.01..2021.12.31), VALUE(`f1`f2), engine='TSDB' create table &#34;dfs://minuteFactorDB&#34;.&#34;minuteFactorTB&#34;( tradetime TIMESTAMP[comment=&#34;时间列&#34;, compress=&#34;delta&#34;], securityid SYMBOL, value DOUBLE, factorname SYMBOL ) partitioned by tradetime, factorname, sortColumns=[`securityid, `tradetime], keepDuplicates=ALL, sortKeyMappingFunction=[hashBucket{, 500}]&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:48;1061:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码以创建存储分钟频因子库的数据库表，分区规则采用了“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:80;1061:36&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按日 + 因子名&lt;/b&gt;”的组合分区方式存储，使用存储引擎 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:81;1061:70&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/b&gt;，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:82;1061:82&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票代码 + 交易时间&lt;/b&gt;”作为排序列。经测试分钟频因子数据采用这种方式分区存储，综合性能最佳。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;45-秒钟频因子库&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:35;1063:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:35;1063:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;4.5. 秒钟频因子库&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:35;1063:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:26;1065:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://secondFactorDB&#34; partitioned by VALUE(datehour(2022.01.01T00:00:00)..datehour(2022.01.31T00:00:00)), VALUE(`f1`f2), engine='TSDB' create table &#34;dfs://secondFactorDB&#34;.&#34;secondFactorTB&#34;( tradetime TIMESTAMP[comment=&#34;时间列&#34;, compress=&#34;delta&#34;], securityid SYMBOL, value DOUBLE, factorname SYMBOL ) partitioned by tradetime, factorname, sortColumns=[`securityid, `tradetime], keepDuplicates=ALL, sortKeyMappingFunction=[hashBucket{, 500}]&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:49;1082:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码以创建存储秒钟频因子库的数据库表，分区规则采用了“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:83;1082:36&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按小时 + 因子名&lt;/b&gt;”的组合分区方式存储，使用存储引擎 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:84;1082:71&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/b&gt;，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:85;1082:83&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票代码 + 交易时间&lt;/b&gt;”作为排序列。经测试秒钟频因子数据采用这种方式分区存储，综合性能最佳。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;46-level-2-快照频因子库&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:36;1084:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:36;1084:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;4.6. Level-2 快照频因子库&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:36;1084:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:27;1086:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://level2FactorDB&#34; partitioned by VALUE(2022.01.01..2022.12.31), VALUE([&#34;f1&#34;, &#34;f2&#34;]), engine='TSDB' create table &#34;dfs://level2FactorDB&#34;.&#34;level2FactorTB&#34;( tradetime TIMESTAMP[comment=&#34;时间列&#34;, compress=&#34;delta&#34;], securityid SYMBOL, value DOUBLE, factorname SYMBOL ) partitioned by tradetime, factorname, sortColumns=[`securityid, `tradetime], keepDuplicates=ALL, sortKeyMappingFunction=[hashBucket{, 500}]&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:50;1102:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码以创建存储 Level-2 快照频因子库的数据库表，分区规则采用了“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:86;1102:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按日 + 因子名&lt;/b&gt;”的组合分区方式存储，使用存储引擎 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:87;1102:79&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/b&gt;，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:88;1102:91&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票代码 + 交易时间&lt;/b&gt;”作为排序列。根据测试结果，Level-2 快照频因子数据采用这种方式进行分区存储，可以实现最佳的综合性能。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;47-逐笔频因子库&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:37;1104:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:37;1104:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;4.7. 逐笔频因子库&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:37;1104:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:28;1106:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://tickFactorDB&#34; partitioned by VALUE(2022.01.01..2022.12.31), VALUE([&#34;f1&#34;, &#34;f2&#34;]), HASH([SYMBOL,10]) engine='TSDB' create table &#34;dfs://tickFactorDB&#34;.&#34;tickFactorTB&#34;( tradetime TIMESTAMP[comment=&#34;时间列&#34;, compress=&#34;delta&#34;], securityid SYMBOL, value DOUBLE, factorname SYMBOL ) partitioned by tradetime, factorname,securityid, sortColumns=[`securityid, `tradetime], keepDuplicates=ALL&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:51;1121:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码创建存储逐笔频因子库的数据库表，分区规则采用了“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:89;1121:35&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按日 + 因子名维度 + 股票维度 HASH10&lt;/b&gt;”的组合分区方式存储，使用存储引擎 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:90;1121:85&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/b&gt;，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:91;1121:97&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;股票代码 + 交易时间&lt;/b&gt;”作为排序列。根据测试结果，逐笔频因子数据采用了这种分区存储方式，可以获得最佳的综合性能。与之前提到的因子存储方案不同之处在于，这里没有对排序键（sortKey）进行降维处理。原因是每天的数据按照股票代码维度进行了 10 个哈希分区，而每个最小分区内包含 500 个股票，因此无需再进行降维处理。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;48-期货-500ms-频因子库&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:38;1123:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:38;1123:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;4.8. 期货 500ms 频因子库&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:38;1123:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:29;1125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database &#34;dfs://futuresFactorDB&#34; partitioned by VALUE(2022.01.01..2023.01.01), VALUE([&#34;f1&#34;, &#34;f2&#34;]), engine='TSDB' create table &#34;dfs://futuresFactorDB&#34;.&#34;futuresFactorTB&#34;( tradetime TIMESTAMP[comment=&#34;时间列&#34;, compress=&#34;delta&#34;], securityid SYMBOL, value DOUBLE, factorname SYMBOL ) partitioned by tradetime, factorname, sortColumns=[`securityid, `tradetime], keepDuplicates=ALL, sortKeyMappingFunction=[hashBucket{, 500}]&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:52;1142:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;用户可以使用上述代码以创建存储 L 期货 500ms 频因子库的数据库表，分区规则采用了“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:92;1142:46&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;时间维度按日 + 因子名&lt;/b&gt;”的组合分区方式存储，使用存储引擎 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:93;1142:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;TSDB&lt;/b&gt;，使用“&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:94;1142:92&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;期货代码 + 交易时间&lt;/b&gt;”作为排序列。根据测试结果，采用这种分区存储方式可以实现期货 500 毫秒频率因子数据的最佳综合性能。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;5-结语&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:39;1144:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:39;1144:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;5. 结语&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:39;1144:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:53;1146:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;针对常见的金融数据，我们通过最佳实践，给出上述建库建表的推荐方案，用户可以根据实际业务场景，进行适当调整和修改。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:54;1148:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;本文扩展阅读：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:8;1150:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:15;1150:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;md&#34; href=&#34;https://gitee.com/dolphindb/Tutorials_CN/blob/master/database.md&#34; scope=&#34;external&#34; xtrc=&#34;xref:3;1150:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;?ditaot usertext?&gt;DolphinDB 教程：分区数据库&lt;/xref&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:16;1151:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;md&#34; href=&#34;https://gitee.com/dolphindb/Tutorials_CN/blob/master/tsdb_explained.md&#34; scope=&#34;external&#34; xtrc=&#34;xref:4;1151:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;?ditaot usertext?&gt;TSDB 存储引擎详解&lt;/xref&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;6-常见问题与解答faq&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:40;1153:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:40;1153:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;6. 常见问题与解答（FAQ）&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:40;1153:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;61-创建数据库表时报错已经存在重名库表&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:41;1155:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:41;1155:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;6.1. 创建数据库表时报错：已经存在重名库表&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:41;1155:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:55;1157:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;执行创建数据库表的代码后，报出如下错误：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:30;1159:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;create database partitioned by VALUE([&#34;f1&#34;,&#34;f2&#34;]), engine=TSDB =&amp;gt; It is not allowed to overwrite an existing database.&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:56;1163:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:95;1163:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;解决方法&lt;/b&gt;：建议使用其他名字或者删掉该数据库。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:57;1165:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;删除指定数据库的代码如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:31;1167:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;dropDatabase(&#34;dfs://dayFactorDB&#34;)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:58;1171:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;检查指定数据库是否存在的代码如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:32;1173:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/best_practices_for_partitioned_storage.md&#34;&gt;existsDatabase(&#34;dfs://dayFactorDB&#34;)&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;/topic&gt;"/><meta name="wh-source-relpath" content="tutorials/best_practices_for_partitioned_storage.md"/><meta name="wh-out-relpath" content="tutorials/best_practices_for_partitioned_storage.html"/>

    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/commons.css?buildId=2024012323"/>
    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic.css?buildId=2024012323"/>

    <script src="../oxygen-webhelp/app/options/properties.js?buildId=20250305183303"></script>
    <script src="../oxygen-webhelp/app/localization/strings.js?buildId=2024012323"></script>
    <script src="../oxygen-webhelp/app/search/index/keywords.js?buildId=20250305183303"></script>
    <script defer="defer" src="../oxygen-webhelp/app/commons.js?buildId=2024012323"></script>
    <script defer="defer" src="../oxygen-webhelp/app/topic.js?buildId=2024012323"></script>
<link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/styles.css?buildId=2024012323"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script></head>

    <body id="存储金融数据的分区方案最佳实践" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            跳转到主要内容
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div xmlns:whc="http://www.oxygenxml.com/webhelp/components" class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="https://docs.dolphindb.cn/zh/index.html" class=" wh_logo d-none d-sm-block "><img src="../logo.png" alt="  DolphinDB 文档中心  "/></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="booktitle">  <span class="ph mainbooktitle">DolphinDB 文档中心</span>  </span></a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="搜索 " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="搜索查询" required="required"/><button type="submit" class="wh_search_button" aria-label="搜索"><span class="search_input_text">搜索</span></button></div></form>
            
            <script src="/vendors/react/umd/react.production.min.js" defer="defer"></script>
<script src="/vendors/react-dom/umd/react-dom.production.min.js" defer="defer"></script>
<script src="/vendors/dayjs/dayjs.min.js" defer="defer"></script>
<script src="/vendors/antd/dist/antd.min.js" defer="defer"></script>
<script src="/vendors/@ant-design/icons/dist/index.umd.min.js" defer="defer"></script>
<script src="/zh/index.js" type="module"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" defer="defer"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer="defer"><!--


--></script>
<script defer="defer"><!--

// 从主页重定向
const currentUrl = window.location.href;

// 判断当前URL是否包含index.html并且路径最后部分是index.html
if (currentUrl.endsWith('index.html')) {
    // 处理根目录下的index.html跳转
    const baseUrl = currentUrl.split('/index.html')[0]; // 获取index.html之前的部分
    const redirectUrl = `${baseUrl}/about/ddb_intro.html`; // 构建跳转路径
    window.location.href = redirectUrl; // 执行跳转
}

--></script>
            
        </div></div>
    </div>
</header>
        
        
         
        
        
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="../index.html"><span>主页</span></a></span></li><li><div class="topicref" data-id="about_tutorials"><div class="title"><a href="../tutorials/about_tutorials.html"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div></li><li><div class="topicref"><div class="title"><a href="../tutorials/OHLC_2.html">金融场景案例</a></div></div></li><li class="active"><div class="topicref" data-id="存储金融数据的分区方案最佳实践"><div class="title"><a href="../tutorials/best_practices_for_partitioned_storage.html">存储金融数据的分区方案最佳实践</a></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="切换搜索突出显示" title="切换搜索突出显示"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="折叠截面" title="折叠截面"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="打印此页" aria-label="打印此页"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem"><div data-tocid="ddb_intro-d9713e87" class="topicref" data-id="ddb_intro" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../about/ddb_intro.html" id="ddb_intro-d9713e87-link">关于DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="chap1_getstarted-d9713e136" class="topicref" data-id="chap1_getstarted" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../getstarted/chap1_getstarted.html" id="chap1_getstarted-d9713e136-link">快速上手</a><div class="wh-tooltip"><p class="shortdesc">如何快速部署 DolphinDB、建库建表、写入和查询数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="sectionddb_deployment-d9713e189" class="topicref" data-id="sectionddb_deployment" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action sectionddb_deployment-d9713e189-link" class="wh-expand-btn"></span><div class="title"><a href="../deploy/deploy_intro.html" id="sectionddb_deployment-d9713e189-link"><span class="keyword label">部署</span></a><div class="wh-tooltip"><p class="shortdesc">如何在不同的场景中部署 DolphinDB</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259" class="topicref" data-id="new_chap_database_manage_new_chap_dbmanage_landing_page" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/cfg/db_intro.html" id="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link"><span class="keyword label">数据库</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 数据库的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_streaming-d9713e3760" class="topicref" data-id="chap7_tutorials_streaming" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_streaming-d9713e3760-link" class="wh-expand-btn"></span><div class="title"><a href="../stream/str_intro.html" id="chap7_tutorials_streaming-d9713e3760-link"><span class="keyword label">流数据</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 流数据引擎及流数据计算的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e7513" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e7513-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/db_oper/import_data.html" id="tocId-d9713e7513-link">数据迁移</a><div class="wh-tooltip"><p class="shortdesc">如何从不同数据源向 DolphinDB 迁移数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_system_management-d9713e7940" class="topicref" data-id="chap7_tutorials_system_management" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_system_management-d9713e7940-link" class="wh-expand-btn"></span><div class="title"><a href="../sys_man/om_intro.html" id="chap7_tutorials_system_management-d9713e7940-link"><span class="keyword label">系统运维</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 的系统运维功能及方法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="troubleshooting-d9713e8780" class="topicref" data-id="troubleshooting" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action troubleshooting-d9713e8780-link" class="wh-expand-btn"></span><div class="title"><a href="../error_codes/troubleshooting.html" id="troubleshooting-d9713e8780-link">故障排查</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="about_language_resources-d9713e20911" class="topicref" data-id="about_language_resources" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action about_language_resources-d9713e20911-link" class="wh-expand-btn"></span><div class="title"><a href="../progr/progr_intro.html" id="about_language_resources-d9713e20911-link"><span class="keyword label">编程语言</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 编程基本概念与方法、SQL 在 DolphinDB 的应用</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="functions_references-d9713e30925" class="topicref" data-id="functions_references" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action functions_references-d9713e30925-link" class="wh-expand-btn"></span><div class="title"><a href="../funcs/funcs_intro.html" id="functions_references-d9713e30925-link"><span class="keyword label">函数参考</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 函数分类、语法、详解及示例</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="api_protocol-d9713e94064" class="topicref" data-id="api_protocol" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action api_protocol-d9713e94064-link" class="wh-expand-btn"></span><div class="title"><a href="../api/connapi_intro.html" id="api_protocol-d9713e94064-link"><span class="keyword label">连接器 &amp; API</span></a><div class="wh-tooltip"><p class="shortdesc">面向不同编程语言的 DolphinDB API 及连接器，相关协议和用法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap6_plugin-d9713e94210" class="topicref" data-id="chap6_plugin" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap6_plugin-d9713e94210-link" class="wh-expand-btn"></span><div class="title"><a href="../plugins/plg_intro.html" id="chap6_plugin-d9713e94210-link"><span class="keyword label">插件</span></a><div class="wh-tooltip"><p class="shortdesc">多个应用场景的插件使用说明和插件开发指导</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="third_party-d9713e97904" class="topicref" data-id="third_party" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action third_party-d9713e97904-link" class="wh-expand-btn"></span><div class="title"><a href="../third_party.html" id="third_party-d9713e97904-link">第三方工具</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="about_tutorials-d9713e98227" class="topicref" data-id="about_tutorials" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action about_tutorials-d9713e98227-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/about_tutorials.html" id="about_tutorials-d9713e98227-link"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98280" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98280-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/new_users_finance.html" id="tocId-d9713e98280-link">新用户入门</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98327" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98327-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/database.html" id="tocId-d9713e98327-link">数据库</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e99111" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e99111-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/std_sql_ddb.html" id="tocId-d9713e99111-link">编程</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100448" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100448-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming-real-time-correlation-processing_2.html" id="tocId-d9713e100448-link">流数据</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100955" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100955-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/scheduledJob_2.html" id="tocId-d9713e100955-link">系统运维</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="模块概述-d9713e101923" class="topicref" data-id="模块概述" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action 模块概述-d9713e101923-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/tu_modules.html" id="模块概述-d9713e101923-link">模块</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="tocId-d9713e102568" class="topicref" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action tocId-d9713e102568-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/OHLC_2.html" id="tocId-d9713e102568-link">金融场景案例</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="k-线计算-d9713e102569" class="topicref" data-id="k-线计算" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/OHLC_2.html" id="k-线计算-d9713e102569-link">K 线计算</a></div></div></li><li role="treeitem"><div data-tocid="使用-klinechart-展示-dolphindb-k-线-d9713e102615" class="topicref" data-id="使用-klinechart-展示-dolphindb-k-线" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/displaying_the_dolphindb_k-line_with_klinechart.html" id="使用-klinechart-展示-dolphindb-k-线-d9713e102615-link">使用 KLineChart 展示 DolphinDB K 线</a></div></div></li><li role="treeitem"><div data-tocid="python--hdf5-因子计算与-dolphindb-一体化因子计算方案对比-d9713e102661" class="topicref" data-id="python--hdf5-因子计算与-dolphindb-一体化因子计算方案对比" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Python_HDF5_vs_DolphinDB.html" id="python--hdf5-因子计算与-dolphindb-一体化因子计算方案对比-d9713e102661-link">Python + HDF5 因子计算与 DolphinDB 一体化因子计算方案对比</a></div></div></li><li role="treeitem"><div data-tocid="python--文件存储与-dolphindb-因子计算性能比较-d9713e102707" class="topicref" data-id="python--文件存储与-dolphindb-因子计算性能比较" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/DolphinDB_VS_PythonFile_Storage.html" id="python--文件存储与-dolphindb-因子计算性能比较-d9713e102707-link">Python + 文件存储与 DolphinDB 因子计算性能比较</a></div></div></li><li role="treeitem"><div data-tocid="python-parser-在金融量化分析场景的应用入门-d9713e102753" class="topicref" data-id="python-parser-在金融量化分析场景的应用入门" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/py_parser__quant_fin.html" id="python-parser-在金融量化分析场景的应用入门-d9713e102753-link">Python Parser 在金融量化分析场景的应用入门</a></div></div></li><li role="treeitem"><div data-tocid="处理-level-2-行情数据实例-d9713e102799" class="topicref" data-id="处理-level-2-行情数据实例" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/l2_stk_data_proc_2.html" id="处理-level-2-行情数据实例-d9713e102799-link">处理 Level-2 行情数据实例</a></div></div></li><li role="treeitem" class="active"><div data-tocid="存储金融数据的分区方案最佳实践-d9713e102845" class="topicref" data-id="存储金融数据的分区方案最佳实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/best_practices_for_partitioned_storage.html" id="存储金融数据的分区方案最佳实践-d9713e102845-link">存储金融数据的分区方案最佳实践</a></div></div></li><li role="treeitem"><div data-tocid="公募基金历史数据基础分析教程-d9713e102891" class="topicref" data-id="公募基金历史数据基础分析教程" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/public_fund_basic_analysis.html" id="公募基金历史数据基础分析教程-d9713e102891-link">公募基金历史数据基础分析教程</a></div></div></li><li role="treeitem"><div data-tocid="股票行情回放-d9713e102937" class="topicref" data-id="股票行情回放" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/stock_market_replay_2.html" id="股票行情回放-d9713e102937-link">股票行情回放</a></div></div></li><li role="treeitem"><div data-tocid="搭建行情回放服务的最佳实践-d9713e102983" class="topicref" data-id="搭建行情回放服务的最佳实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/appendices_market_replay_bp.html" id="搭建行情回放服务的最佳实践-d9713e102983-link">搭建行情回放服务的最佳实践</a></div></div></li><li role="treeitem"><div data-tocid="国内股票行情数据导入实例-d9713e103029" class="topicref" data-id="国内股票行情数据导入实例" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/stockdata_csv_import_demo.html" id="国内股票行情数据导入实例-d9713e103029-link">国内股票行情数据导入实例</a></div></div></li><li role="treeitem"><div data-tocid="基金份额参考价值-iopv-计算-d9713e103076" class="topicref" data-id="基金份额参考价值-iopv-计算" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_IOPV_2.html" id="基金份额参考价值-iopv-计算-d9713e103076-link">基金份额参考价值 IOPV 计算</a></div></div></li><li role="treeitem"><div data-tocid="基于快照行情的股票和基金-k-线合成-d9713e103122" class="topicref" data-id="基于快照行情的股票和基金-k-线合成" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/k.html" id="基于快照行情的股票和基金-k-线合成-d9713e103122-link">基于快照行情的股票和基金 K 线合成</a></div></div></li><li role="treeitem"><div data-tocid="计算基金日频因子-d9713e103168" class="topicref" data-id="计算基金日频因子" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/fund_factor_contrasted_by_py.html" id="计算基金日频因子-d9713e103168-link">计算基金日频因子</a></div></div></li><li role="treeitem"><div data-tocid="基于逐笔数据合成高频-orderbookdolphindb-orderbook-引擎-d9713e103214" class="topicref" data-id="基于逐笔数据合成高频-orderbookdolphindb-orderbook-引擎" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/orderBookSnapshotEngine.html" id="基于逐笔数据合成高频-orderbookdolphindb-orderbook-引擎-d9713e103214-link">基于逐笔数据合成高频 Orderbook：DolphinDB Orderbook 引擎</a></div></div></li><li role="treeitem"><div data-tocid="金融-poc-用户历史数据导入指导手册之股票-level-2-逐笔篇-d9713e103260" class="topicref" data-id="金融-poc-用户历史数据导入指导手册之股票-level-2-逐笔篇" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/LoadDataForPoc.html" id="金融-poc-用户历史数据导入指导手册之股票-level-2-逐笔篇-d9713e103260-link">金融 PoC 用户历史数据导入指导手册之股票 Level-2 逐笔篇</a></div></div></li><li role="treeitem"><div data-tocid="金融实时实际波动率预测-d9713e103306" class="topicref" data-id="金融实时实际波动率预测" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/ml_volatility_2.html" id="金融实时实际波动率预测-d9713e103306-link">金融实时实际波动率预测</a></div></div></li><li role="treeitem"><div data-tocid="金融因子流式实现-d9713e103352" class="topicref" data-id="金融因子流式实现" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/str_comp_fin_quant_2.html" id="金融因子流式实现-d9713e103352-link">金融因子流式实现</a></div></div></li><li role="treeitem"><div data-tocid="开发股票波动率预测模型的-676-个输入特征-d9713e103398" class="topicref" data-id="开发股票波动率预测模型的-676-个输入特征" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/metacode_derived_features_2.html" id="开发股票波动率预测模型的-676-个输入特征-d9713e103398-link">开发股票波动率预测模型的 676 个输入特征</a></div></div></li><li role="treeitem"><div data-tocid="快速搭建-level-2-快照数据流批一体因子计算平台最佳实践-d9713e103444" class="topicref" data-id="快速搭建-level-2-快照数据流批一体因子计算平台最佳实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/l2_snapshot_factor_calc_2.html" id="快速搭建-level-2-快照数据流批一体因子计算平台最佳实践-d9713e103444-link">快速搭建 Level-2 快照数据流批一体因子计算平台最佳实践</a></div></div></li><li role="treeitem"><div data-tocid="量化金融范例-d9713e103490" class="topicref" data-id="量化金融范例" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/quant_finance_examples.html" id="量化金融范例-d9713e103490-link">量化金融范例</a></div></div></li><li role="treeitem"><div data-tocid="流式计算中证-1000-指数主买主卖交易量-d9713e103536" class="topicref" data-id="流式计算中证-1000-指数主买主卖交易量" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/CSI_1000_2.html" id="流式计算中证-1000-指数主买主卖交易量-d9713e103536-link">流式计算中证 1000 指数主买/主卖交易量</a></div></div></li><li role="treeitem"><div data-tocid="深度不平衡买卖压力指标波动率计算-d9713e103583" class="topicref" data-id="深度不平衡买卖压力指标波动率计算" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/sql_performance_optimization_wap_di_rv.html" id="深度不平衡买卖压力指标波动率计算-d9713e103583-link">深度不平衡、买卖压力指标、波动率计算</a></div></div></li><li role="treeitem"><div data-tocid="实时合成自定义频订单簿快照dolphindb-insight-行情插件与订单簿引擎应用-d9713e103629" class="topicref" data-id="实时合成自定义频订单簿快照dolphindb-insight-行情插件与订单簿引擎应用" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/insight_plugin_orderbook_engine_application.html" id="实时合成自定义频订单簿快照dolphindb-insight-行情插件与订单簿引擎应用-d9713e103629-link">实时合成自定义频订单簿快照：DolphinDB INSIGHT 行情插件与订单簿引擎应用</a></div></div></li><li role="treeitem"><div data-tocid="实时计算分钟资金流-d9713e103675" class="topicref" data-id="实时计算分钟资金流" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_capital_flow_order_by_order_2.html" id="实时计算分钟资金流-d9713e103675-link">实时计算分钟资金流</a></div></div></li><li role="treeitem"><div data-tocid="实时计算高频因子-d9713e103721" class="topicref" data-id="实时计算高频因子" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/hf_factor_streaming_2.html" id="实时计算高频因子-d9713e103721-link">实时计算高频因子</a></div></div></li><li role="treeitem"><div data-tocid="实时计算日累计逐单资金流-d9713e103767" class="topicref" data-id="实时计算日累计逐单资金流" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_capital_flow_daily_2.html" id="实时计算日累计逐单资金流-d9713e103767-link">实时计算日累计逐单资金流</a></div></div></li><li role="treeitem"><div data-tocid="实时计算涨幅榜-d9713e103813" class="topicref" data-id="实时计算涨幅榜" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/rt_stk_price_inc_calc_2.html" id="实时计算涨幅榜-d9713e103813-link">实时计算涨幅榜</a></div></div></li><li role="treeitem"><div data-tocid="实时选取外汇行情多价源最优价-d9713e103859" class="topicref" data-id="实时选取外汇行情多价源最优价" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/best_price_selection.html" id="实时选取外汇行情多价源最优价-d9713e103859-link">实时选取外汇行情多价源最优价</a></div></div></li><li role="treeitem"><div data-tocid="外汇掉期估值计算-d9713e103905" class="topicref" data-id="外汇掉期估值计算" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/FxSwapValuation.html" id="外汇掉期估值计算-d9713e103905-link">外汇掉期估值计算</a></div></div></li><li role="treeitem"><div data-tocid="因子计算平台构建-d9713e103951" class="topicref" data-id="因子计算平台构建" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Python_Celery.html" id="因子计算平台构建-d9713e103951-link">因子计算平台构建</a></div></div></li><li role="treeitem"><div data-tocid="因子计算最佳实践-d9713e103997" class="topicref" data-id="因子计算最佳实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/best_practice_for_factor_calculation.html" id="因子计算最佳实践-d9713e103997-link">因子计算最佳实践</a></div></div></li><li role="treeitem"><div data-tocid="mvo_tutorial-d9713e104043" class="topicref" data-id="mvo_tutorial" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/MVO.html" id="mvo_tutorial-d9713e104043-link">优化投资组合：DolphinDB 最优化求解系列函数应用指南</a></div></div></li><li role="treeitem"><div data-tocid="中高频多因子库存储最佳实践-d9713e104090" class="topicref" data-id="中高频多因子库存储最佳实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/best_practices_for_multi_factor.html" id="中高频多因子库存储最佳实践-d9713e104090-link">中高频多因子库存储最佳实践</a></div></div></li><li role="treeitem"><div data-tocid="alphalens-在-dolphindb-中的应用因子分析建模实践-d9713e104136" class="topicref" data-id="alphalens-在-dolphindb-中的应用因子分析建模实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Practical_Factor_Analysis_Modeling.html" id="alphalens-在-dolphindb-中的应用因子分析建模实践-d9713e104136-link">Alphalens 在 DolphinDB 中的应用：因子分析建模实践</a></div></div></li><li role="treeitem"><div data-tocid="dolphindb-与-dolphinscheduler-的集成-d9713e104182" class="topicref" data-id="dolphindb-与-dolphinscheduler-的集成" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/dolphinscheduler_integration.html" id="dolphindb-与-dolphinscheduler-的集成-d9713e104182-link">DolphinDB 与 DolphinScheduler 的集成</a></div></div></li><li role="treeitem"><div data-tocid="dolphindb-与-python-airflow-最佳实践-d9713e104228" class="topicref" data-id="dolphindb-与-python-airflow-最佳实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/ddb_airflow.html" id="dolphindb-与-python-airflow-最佳实践-d9713e104228-link">DolphinDB 与 Python AirFlow 最佳实践</a></div></div></li><li role="treeitem"><div data-tocid="gplearn-d9713e104274" class="topicref" data-id="gplearn" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/gplearn.html" id="gplearn-d9713e104274-link">Shark GPLearn 快速上手</a></div></div></li><li role="treeitem"><div data-tocid="利用jit加速计算-etf-期权隐含波动率和希腊值-d9713e104320" class="topicref" data-id="利用jit加速计算-etf-期权隐含波动率和希腊值" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/IV_Greeks_Calculation_for_ETF_Options_Using_JIT.html" id="利用jit加速计算-etf-期权隐含波动率和希腊值-d9713e104320-link">利用JIT加速计算 ETF 期权隐含波动率和希腊值</a></div></div></li><li role="treeitem"><div data-tocid="基于-dolphindb-的-brinson-绩效归因模型实践-d9713e104366" class="topicref" data-id="基于-dolphindb-的-brinson-绩效归因模型实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/brinson.html" id="基于-dolphindb-的-brinson-绩效归因模型实践-d9713e104366-link">基于 DolphinDB 的 Brinson 绩效归因模型实践</a></div></div></li><li role="treeitem"><div data-tocid="基于-dolphindb-的-campisi-绩效归因模型实践-d9713e104412" class="topicref" data-id="基于-dolphindb-的-campisi-绩效归因模型实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/campisi.html" id="基于-dolphindb-的-campisi-绩效归因模型实践-d9713e104412-link">基于 DolphinDB 的 Campisi 绩效归因模型实践</a></div></div></li><li role="treeitem"><div data-tocid="期货分钟频cta策略回测案例-d9713e104458" class="topicref" data-id="期货分钟频cta策略回测案例" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/futures_minute_frequency_cta_strategy_backtest_example.html" id="期货分钟频cta策略回测案例-d9713e104458-link">期货分钟频CTA策略回测案例</a></div></div></li><li role="treeitem"><div data-tocid="exchdata-交易所历史股票数据自动化导入功能模块使用教程-d9713e104504" class="topicref" data-id="exchdata-交易所历史股票数据自动化导入功能模块使用教程" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/exchdata_exchange_historical_stock_data_auto_import_module_tutorial.html" id="exchdata-交易所历史股票数据自动化导入功能模块使用教程-d9713e104504-link">ExchData 交易所历史股票数据自动化导入功能模块使用教程</a></div></div></li><li role="treeitem"><div data-tocid="ficc_func_uasge_and_performance-d9713e104550" class="topicref" data-id="ficc_func_uasge_and_performance" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/ficc_func_uasge_and_performance.html" id="ficc_func_uasge_and_performance-d9713e104550-link">FICC 固收系列函数使用示例及性能</a></div></div></li><li role="treeitem"><div data-tocid="title1-d9713e104597" class="topicref" data-id="title1" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/ficc_funcs_application.html" id="title1-d9713e104597-link">FICC 固收系列函数应用场景</a></div></div></li><li role="treeitem"><div data-tocid="最优化函数_socp_的使用及转化案例-d9713e104643" class="topicref" data-id="最优化函数_socp_的使用及转化案例" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/socp_usage_case.html" id="最优化函数_socp_的使用及转化案例-d9713e104643-link">最优化函数 socp 的使用及转化案例</a></div></div></li><li role="treeitem"><div data-tocid="k_line_calculation-d9713e104689" class="topicref" data-id="k_line_calculation" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/k_line_calculation%20.html" id="k_line_calculation-d9713e104689-link">基于期货快照行情数据计算合约 K 线以及主连行情</a></div></div></li><li role="treeitem"><div data-tocid="backtest_introduction_usage-d9713e104735" class="topicref" data-id="backtest_introduction_usage" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/backtest_introduction_usage.html" id="backtest_introduction_usage-d9713e104735-link">融资融券策略回测使用说明及回测案例</a></div></div></li><li role="treeitem"><div data-tocid="stock_backtest-d9713e104781" class="topicref" data-id="stock_backtest" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/stock_backtest.html" id="stock_backtest-d9713e104781-link">股票中低频投资组合回测案例实现</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e104827" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e104827-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_engine_anomaly_alerts_2.html" id="tocId-d9713e104827-link">物联网场景案例</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105795" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105795-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/dolphindb_tensor_libtorch_tutorial.html" id="tocId-d9713e105795-link">机器学习</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105842" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105842-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/api_performance.html" id="tocId-d9713e105842-link">测试报告</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105982" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105982-link" class="wh-expand-btn"></span><div class="title"><a href="../rn/server/3_00_2.html" id="tocId-d9713e105982-link">版本说明</a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 版本发布历史</p></div></div></div></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-7 col-md-9 col-sm-12" id="wh_topic_body">
                        <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        <button id="wh_close_topic_toc_button" class="close-toc-button d-none" aria-label="Toggle topic table of content" aria-controls="wh_topic_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        <div class=" wh_topic_content body "><main role="main"><article class="- topic/topic topic" role="article" aria-labelledby="ariaid-title1"><h1 class="- topic/title title topictitle1" id="ariaid-title1">存储金融数据的分区方案最佳实践</h1><div class="- topic/body body"></div><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title2" id="1-概述"><h2 class="- topic/title title topictitle2" id="ariaid-title2">1. 概述</h2><div class="- topic/body body"><p class="- topic/p p">对数据库进行合理的分区可以显著降低系统响应延迟，提高数据吞吐量。合理的分区设计需要综合考虑数据分布的特征、查询和计算的典型场景、数据更新的频率等方方面面。</p><p class="- topic/p p">本文为入门级教程，针对几种常见的金融数据给出了较为通用的分区方案和示例脚本，以帮助初次体验 DolphinDB 的用户快速完成建库建表。</p><p class="- topic/p p">本文全部代码适用于 2.00.10 及以上版本。</p></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title3" id="2-数据存储方案总览"><h2 class="- topic/title title topictitle2" id="ariaid-title3">2. 数据存储方案总览</h2><div class="- topic/body body"><p class="- topic/p p">存储方案包括金融数据存储方案和因子库存储方案两大部分。</p></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title4" id="21-金融数据存储方案"><h3 class="- topic/title title topictitle3" id="ariaid-title4">2.1. 金融数据存储方案</h3><div class="- topic/body body"><p class="- topic/p p">针对不同金融数据，给出以下的分区存储方案：</p><div class="table-container"><table class="- topic/table table" data-cols="6"><caption></caption><colgroup><col/><col/><col/><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="21-金融数据存储方案__entry__1"><strong class="+ topic/ph hi-d/b ph b">产品大类</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="21-金融数据存储方案__entry__2"><strong class="+ topic/ph hi-d/b ph b">数据集</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="21-金融数据存储方案__entry__3"><strong class="+ topic/ph hi-d/b ph b">存储引擎</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="21-金融数据存储方案__entry__4"><strong class="+ topic/ph hi-d/b ph b">分区方案</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="21-金融数据存储方案__entry__5"><strong class="+ topic/ph hi-d/b ph b">分区列</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="21-金融数据存储方案__entry__6"><strong class="+ topic/ph hi-d/b ph b">排序列</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__1">股票</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__2">Level-2 快照（沪深分表）</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__3">TSDB</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__4">按天分区 + 按股票代码 HASH25 分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__5">交易日期 + 股票代码</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__6">股票代码 + 交易时间</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__1">股票</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__2">Level-1 快照（沪深分表）</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__3">TSDB</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__4">按天分区 + 按股票代码 HASH25 分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__5">交易日期 + 股票代码</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__6">股票代码 + 交易时间</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__1">股票</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__2">逐笔委托（沪深分表）</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__3">TSDB</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__4">按天分区 + 按股票代码 HASH25 分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__5">交易日期 + 股票代码</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__6">股票代码 + 交易时间</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__1">股票</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__2">逐笔成交（沪深分表）</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__3">TSDB</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__4">按天分区 + 按股票代码 HASH25 分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__5">交易日期 + 股票代码</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__6">股票代码 + 交易时间</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__1">股票</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__2">Level-2 快照（沪深合并）</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__3">TSDB</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__4">按天分区 + 按股票代码 HASH50 分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__5">交易日期 + 股票代码</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__6">交易所类型 + 股票代码 + 交易时间</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__1">股票</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__2">Level-1 快照（沪深合并）</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__3">TSDB</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__4">按天分区 + 按股票代码 HASH50 分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__5">交易日期 + 股票代码</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__6">交易所类型 + 股票代码 + 交易时间</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__1">股票</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__2">逐笔委托（沪深合并）</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__3">TSDB</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__4">按天分区 + 按股票代码 HASH50 分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__5">交易日期 + 股票代码</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__6">交易所类型 + 股票代码 + 交易时间</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__1">股票</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__2">逐笔成交（沪深合并）</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__3">TSDB</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__4">按天分区 + 按股票代码 HASH50 分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__5">交易日期 + 股票代码</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__6">交易所类型 + 股票代码 + 交易时间</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__1">股票</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__2">日 K 线</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__3">OLAP</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__4">按年分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__5">交易时间</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__6">无</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__1">股票</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__2">分钟 K 线</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__3">OLAP</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__4">按天分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__5">交易时间</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__6">无</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__1">期权</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__2">快照</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__3">TSDB</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__4">按天分区 + 按期权代码 HASH20 分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__5">交易日期 + 期权代码</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__6">期权代码 + 接收时间</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__1">期货</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__2">快照</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__3">TSDB</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__4">按天分区 + 按期货代码 HASH10 分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__5">交易日期 + 期货代码</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__6">期货代码 + 接收时间</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__1">期货</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__2">日 K 线</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__3">OLAP</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__4">按年分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__5">交易时间</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__6">无</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__1">期货</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__2">分钟 K 线</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__3">OLAP</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__4">按天分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__5">交易时间</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__6">无</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__1">银行间债券</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__2">X-Bond 报价</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__3">TSDB</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__4">按天分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__5">创建日期</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__6">债券代码 + 创建时间</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__1">银行间债券</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__2">X-Bond 成交</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__3">TSDB</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__4">按天分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__5">创建日期</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__6">债券代码 + 创建时间</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__1">银行间债券</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__2">ESP 报价</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__3">TSDB</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__4">按天分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__5">创建日期</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__6">债券代码 + 创建时间</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__1">银行间债券</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__2">ESP 成交</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__3">TSDB</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__4">按天分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__5">创建日期</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__6">债券代码 + 创建时间</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__1">银行间债券</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__2">QB 报价</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__3">TSDB</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__4">按天分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__5">市场时间</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__6">债券代码 + 市场时间</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__1">银行间债券</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__2">QB 成交</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__3">TSDB</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__4">按天分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__5">市场时间</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="21-金融数据存储方案__entry__6">债券代码 + 市场时间</td></tr></tbody></table></div></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title5" id="22-因子库窄表存储方案"><h3 class="- topic/title title topictitle3" id="ariaid-title5">2.2. 因子库窄表存储方案</h3><div class="- topic/body body"><p class="- topic/p p">因子挖掘是量化交易的必备环节之一。随着量化交易和 AI 模型训练规模的发展，量化投资团队在投研环节势必需要处理大量因子数据。因子的存储也是一个关键问题，本文推荐使用窄表存储因子库。</p><img class="- topic/image image" src="images/best_practices_for_partitioned_storage/01.png"/><br/><p class="- topic/p p">窄表存储模型</p><img class="- topic/image image" src="images/best_practices_for_partitioned_storage/02.png"/><br/><p class="- topic/p p">宽表存储模型</p><p class="- topic/p p">相较于宽表，窄表存储有以下优势：</p><ul class="- topic/ul ul"><li class="- topic/li li">更加高效地删除过期失效因子<ul class="- topic/ul ul"><li class="- topic/li li">宽表的方案是删除全表的某一列，相比窄表方案效率低下</li></ul></li><li class="- topic/li li">更加高效地添加新因子<ul class="- topic/ul ul"><li class="- topic/li li">宽表的方案是先增加列，然后更新新增列的值，相比窄表方案效率低下</li></ul></li><li class="- topic/li li">更加高效地按照因子名更新指定因子的值<ul class="- topic/ul ul"><li class="- topic/li li">宽表的方案是 update 全表的某一列，相比窄表效率低下</li></ul></li><li class="- topic/li li">单次多因子面板数据的查询效率和宽表近似<ul class="- topic/ul ul"><li class="- topic/li li">DolphinDB 通过对 <code class="+ topic/ph pr-d/codeph ph codeph">pivot by</code> 方法的并行优化，保证了窄表存储方案的多因子数据查询效率</li></ul></li></ul><p class="- topic/p p">针对不同频率的因子数据，给出以下的分区存储方案，均采用 TSDB 存储引擎：</p><div class="table-container"><table class="- topic/table table" data-cols="6"><caption></caption><colgroup><col/><col/><col/><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="22-因子库窄表存储方案__entry__1"><strong class="+ topic/ph hi-d/b ph b">产品大类</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="22-因子库窄表存储方案__entry__2"><strong class="+ topic/ph hi-d/b ph b">因子频率</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="22-因子库窄表存储方案__entry__3"><strong class="+ topic/ph hi-d/b ph b">分区方案</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="22-因子库窄表存储方案__entry__4"><strong class="+ topic/ph hi-d/b ph b">分区列</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="22-因子库窄表存储方案__entry__5"><strong class="+ topic/ph hi-d/b ph b">排序列</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="22-因子库窄表存储方案__entry__6"><strong class="+ topic/ph hi-d/b ph b">sortKey 降维</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__1">股票（假设共 5000 支标的）</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__2">日频因子</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__3">按年分区 + 按因子名分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__4">交易时间 + 因子名</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__5">股票代码 + 交易时间</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__6">500</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__1">股票（假设共 5000 支标的）</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__2">30 分钟因子</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__3">按年分区 + 按因子名分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__4">交易时间 + 因子名</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__5">股票代码 + 交易时间</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__6">500</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__1">股票（假设共 5000 支标的）</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__2">10 分钟因子</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__3">按月分区 + 按因子名分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__4">交易时间 + 因子名</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__5">股票代码 + 交易时间</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__6">500</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__1">股票（假设共 5000 支标的）</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__2">1 分钟频因子</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__3">按日分区 + 按因子名分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__4">交易时间 + 因子名</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__5">股票代码 + 交易时间</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__6">500</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__1">股票（假设共 5000 支标的）</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__2">1 秒钟频因子</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__3">按小时分区 + 按因子名分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__4">交易时间 + 因子名</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__5">股票代码 + 交易时间</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__6">500</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__1">股票（假设共 5000 支标的）</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__2">Level-2 快照频率因子（3 秒~5 秒）</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__3">按日分区 + 按因子名分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__4">交易时间 + 因子名</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__5">股票代码 + 交易时间</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__6">500</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__1">股票（假设共 5000 支标的）</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__2">Level-2 逐笔频因子</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__3">按小时分区 + 按因子名分区 + 按股票代码 HASH10 分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__4">交易时间 + 因子名 + 股票代码</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__5">股票代码 + 交易时间</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__6">不降维</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__1">期货（假设共 200 支标的）</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__2">500ms 频因子</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__3">按日分区  + 按因子名分区</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__4">交易时间  + 因子名</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__5">期货代码 + 交易时间</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-因子库窄表存储方案__entry__6">500</td></tr></tbody></table></div></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title6" id="3-金融数据存储方案实践"><h2 class="- topic/title title topictitle2" id="ariaid-title6">3. 金融数据存储方案实践</h2><div class="- topic/body body"><p class="- topic/p p">基于上一章的分区方案，本章将提供对应的 DolphinDB 脚本。</p></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title7" id="31-股票数据"><h3 class="- topic/title title topictitle3" id="ariaid-title7">3.1. 股票数据</h3><div class="- topic/body body"></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title8" id="311-level-2-行情数据"><h4 class="- topic/title title topictitle4" id="ariaid-title8">3.1.1. Level-2 行情数据</h4><div class="- topic/body body"><p class="- topic/p p">股票 Level-2 行情数据包含 Level-2 快照数据、逐笔委托数据、逐笔成交数据，在分布式数据库中，如果要连接（join）多个分区的数据表，通常会非常耗时，因为涉及到的分区可能位于不同的节点上，需要在不同节点之间复制数据。为解决这个问题，DolphinDB 推出了共存储位置（co-location）的分区机制，确保同一个分布式数据库里所有表在相同分区的数据存储在相同的节点上。这样的安排，保证了这些表在连接的时候非常高效。因此在本方案中，把 Level-2 快照数据、逐笔委托数据、逐笔成交数据这些分区方案一致的数据表存入同一个数据库中。</p><p class="- topic/p p">上交所和深交所两个交易所的数据在字段结构上略有不同，用户在建立库表时可以考虑是否将两个交易所的数据进行合并，如果选择存为一张表，则表中的字段是两个交易所数据字段的并集，并新增字段 <em class="+ topic/ph hi-d/i ph i">Market</em> 用于标识数据来自哪个交易所。Level-1 的分区方案采用 Level-2 的即可。</p><p class="- topic/p p">如果您希望将通联数据导入 DolphinDB 数据库，可以参考如下教程，使用封装好的模块即可完成建库建表和 Level-2 行情数据导入：</p><ul class="- topic/ul ul"><li class="- topic/li li"><a class="- topic/xref xref" href="https://gitee.com/dolphindb/DolphinDBModules/blob/master/easyTLDataImport/README.md" target="_blank" rel="external noopener">DolphinDBModules::easyTLDataImport 通联历史数据自动化导入功能模块使用教程</a></li></ul><p class="- topic/p p">下面将根据是否将沪深交易所分开存储介绍不同建库建表的分区规则。</p></div><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title9" id="3111-level-2-快照沪深分表"><h5 class="- topic/title title topictitle5" id="ariaid-title9">3.1.1.1. Level-2 快照（沪深分表）</h5><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">深交所</strong></p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://split_SZ_TB"
partitioned by VALUE(2020.01.01..2021.01.01), HASH([SYMBOL, 25])
engine='TSDB'

create table "dfs://split_SZ_TB"."split_SZ_snapshotTB"(
    TradeDate DATE[comment="交易日期", compress="delta"]   
    TradeTime TIME[comment="交易时间", compress="delta"]
    MDStreamID SYMBOL
    SecurityID SYMBOL
    SecurityIDSource SYMBOL
    TradingPhaseCode SYMBOL
    PreCloPrice DOUBLE
    NumTrades LONG
    TotalVolumeTrade LONG
    TotalValueTrade DOUBLE
    LastPrice DOUBLE
    OpenPrice DOUBLE
    HighPrice DOUBLE
    LowPrice DOUBLE
    DifPrice1 DOUBLE
    DifPrice2 DOUBLE
    PE1 DOUBLE
    PE2 DOUBLE
    PreCloseIOPV DOUBLE
    IOPV DOUBLE
    TotalBidQty LONG
    WeightedAvgBidPx DOUBLE
    TotalOfferQty LONG
    WeightedAvgOfferPx DOUBLE
    UpLimitPx DOUBLE
    DownLimitPx DOUBLE
    OpenInt INT
    OptPremiumRatio DOUBLE
    OfferPrice DOUBLE[]
    BidPrice DOUBLE[]
    OfferOrderQty LONG[]
    BidOrderQty LONG[]
    BidNumOrders INT[]
    OfferNumOrders INT[]
    LocalTime TIME
    SeqNo INT
    OfferOrders LONG[]
    BidOrders LONG[]
)
partitioned by TradeDate, SecurityID,
sortColumns=[`SecurityID,`TradeTime],
keepDuplicates=ALL</code></pre><p class="- topic/p p">Level-2 行情数据使用“<strong class="+ topic/ph hi-d/b ph b">时间维度按天 + 股票维度 HASH25</strong>”的分区规则，使用存储引擎 <strong class="+ topic/ph hi-d/b ph b">TSDB</strong>，使用“<strong class="+ topic/ph hi-d/b ph b">股票代码 + 交易时间</strong>”作为排序列。下面对上述脚本进行说明：</p><ul class="- topic/ul ul"><li class="- topic/li li">TSDB 引擎只支持创建分布式数据库，库名前必须添加”dfs://”；</li><li class="- topic/li li">在此处建立分区表时对某些列使用了指定压缩算法，对 <em class="+ topic/ph hi-d/i ph i">TradeTime</em> 列使用了“delta”压缩算法，其余列则默认使用“lz4”压缩算法；</li><li class="- topic/li li">建表时指定 <em class="+ topic/ph hi-d/i ph i">OfferPrice</em> 为 DOUBLE[] 类型，表示将 10 档卖价数据存 储在一个字段中，该字段类型为 DOUBLE 类型的数组向量（arrray vector），更详细的 array vector 介绍见：<a class="- topic/xref xref" href="https://gitee.com/dolphindb/Tutorials_CN/blob/master/Array_Vector.md" target="_blank" rel="external noopener">DolphinDB 中有关 array vector 的最佳实践指南</a> ；</li><li class="- topic/li li"><em class="+ topic/ph hi-d/i ph i">sortColumns</em> 参数用于将写入的数据按照指定字段进行排序，系统默认 <em class="+ topic/ph hi-d/i ph i">sortColumns</em>（指定多列时）最后一列为时间列，其余列字段作为排序的索引列，称作 sort key。频繁查询的字段适合设置为 <em class="+ topic/ph hi-d/i ph i">sortColumns</em>，且建议优先把查询频率高的字段作为 <em class="+ topic/ph hi-d/i ph i">sortColumns</em> 中位置靠前的列；</li><li class="- topic/li li"><em class="+ topic/ph hi-d/i ph i">keepDuplicates</em> 参数表示在每个分区内如何处理所有 <em class="+ topic/ph hi-d/i ph i">sortColumns</em> 之值皆相同的数据，在两个函数中该参数的值均为“ALL”表示保留所有数据。</li></ul><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">上交所</strong></p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://split_SH_TB"
partitioned by VALUE(2020.01.01..2021.01.01), HASH([SYMBOL, 25])
engine='TSDB'

create table "dfs://split_SH_TB"."split_SH_snapshotTB"(
    TradeDate DATE[comment="交易日期", compress="delta"]   
    TradeTime TIME[comment="交易时间", compress="delta"]
    SecurityID SYMBOL
    ImageStatus INT
    PreCloPrice DOUBLE
    OpenPrice DOUBLE
    HighPrice DOUBLE
    LowPrice DOUBLE
    LastPrice DOUBLE
    ClosePrice DOUBLE
    TradingPhaseCode SYMBOL
    NumTrades LONG
    TotalVolumeTrade LONG
    TotalValueTrade DOUBLE
    TotalBidQty LONG
    WeightedAvgBidPx DOUBLE
    AltWAvgBidPri DOUBLE
    TotalOfferQty LONG
    WeightedAvgOfferPx DOUBLE
    AltWAvgAskPri DOUBLE
    ETFBuyNumber INT
    ETFBuyAmount LONG
    ETFBuyMoney DOUBLE
    ETFSellNumber INT
    ETFSellAmount LONG
    ETFSellMoney DOUBLE
    YieldToMatu DOUBLE
    TotWarExNum DOUBLE
    UpLimitPx DOUBLE
    DownLimitPx DOUBLE
    WithdrawBuyNumber INT
    WithdrawBuyAmount LONG
    WithdrawBuyMoney DOUBLE
    WithdrawSellNumber INT
    WithdrawSellAmount LONG
    WithdrawSellMoney DOUBLE
    TotalBidNumber INT
    TotalOfferNumber INT
    MaxBidDur INT
    MaxSellDur INT
    BidNum INT
    SellNum INT
    IOPV DOUBLE
    OfferPrice DOUBLE[]
    BidPrice DOUBLE[]
    OfferOrderQty LONG[]
    BidOrderQty LONG[]
    BidNumOrders INT[]
    OfferNumOrders INT[]
    LocalTime TIME
    SeqNo INT
    OfferOrders LONG[]
    BidOrders LONG[]
)
partitioned by TradeDate, SecurityID,
sortColumns=[`SecurityID,`TradeTime],
keepDuplicates=ALL</code></pre><p class="- topic/p p">上交所的数据格式与深交所略有不同，但分区方案一致。</p></div></article><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title10" id="3112-逐笔委托沪深分表"><h5 class="- topic/title title topictitle5" id="ariaid-title10">3.1.1.2. 逐笔委托（沪深分表）</h5><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">深交所</strong></p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://split_SZ_TB"
partitioned by VALUE(2020.01.01..2021.01.01), HASH([SYMBOL, 25])
engine='TSDB'

create table "dfs://split_SZ_TB"."split_SZ_entrustTB"(
    ChannelNo INT
    ApplSeqNum LONG
    MDStreamID SYMBOL
    SecurityID SYMBOL
    SecurityIDSource SYMBOL
    Price DOUBLE
    OrderQty LONG
    Side SYMBOL
    TradeDate DATE[comment="交易日期", compress="delta"]   
    TradeTime TIME[comment="交易时间", compress="delta"]
    OrderType SYMBOL
    LocalTime TIME
    SeqNo INT
)
partitioned by TradeDate, SecurityID,
sortColumns=[`SecurityID,`TradeTime],
keepDuplicates=ALL</code></pre><p class="- topic/p p">用户可以使用上述代码以创建存储深交所逐笔委托数据的数据库表，分区规则采用了“<strong class="+ topic/ph hi-d/b ph b">时间维度按日 + 股票代码 HASH25</strong>”的组合分区方式存储，使用存储引擎 <strong class="+ topic/ph hi-d/b ph b">TSDB</strong>，使用“<strong class="+ topic/ph hi-d/b ph b">股票代码 + 交易时间</strong>”作为排序列。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">上交所</strong></p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://split_SH_TB"
partitioned by VALUE(2020.01.01..2021.01.01), HASH([SYMBOL, 25])
engine='TSDB'

create table "dfs://split_SH_TB"."split_SH_entrustTB"(
    DataStatus INT
    ApplSeqNum LONG
    ChannelNo INT
    SecurityID SYMBOL
    TradeDate DATE[comment="交易日期", compress="delta"]   
    TradeTime TIME[comment="交易时间", compress="delta"]
    OrderType SYMBOL
    OrderNO INT
    Price DOUBLE
    OrderQty LONG
    Side SYMBOL
    BizIndex INT
    LocalTime TIME
    SeqNo INT
)
partitioned by TradeDate, SecurityID,
sortColumns=[`SecurityID,`TradeTime],
keepDuplicates=ALL</code></pre><p class="- topic/p p">上交所的数据格式与深交所略有不同，但分区方案一致。</p></div></article><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title11" id="3113-逐笔成交沪深分表"><h5 class="- topic/title title topictitle5" id="ariaid-title11">3.1.1.3. 逐笔成交（沪深分表）</h5><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">深交所</strong></p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://split_SZ_TB"
partitioned by VALUE(2020.01.01..2021.01.01), HASH([SYMBOL, 25])
engine='TSDB'

create table "dfs://split_SZ_TB"."split_SZ_tradeTB"(
    ChannelNo INT
    ApplSeqNum LONG
    MDStreamID SYMBOL
    BidApplSeqNum LONG
    OfferApplSeqNum LONG
    SecurityID SYMBOL
    SecurityIDSource SYMBOL
    TradePrice DOUBLE
    TradeQty INT
    ExecType SYMBOL
    TradeDate DATE[comment="交易日期", compress="delta"]   
    TradeTime TIME[comment="交易时间", compress="delta"]
    LocalTime TIME
    SeqNo INT
    OrderKind SYMBOL
)
partitioned by TradeDate, SecurityID,
sortColumns=[`SecurityID,`TradeTime],
keepDuplicates=ALL</code></pre><p class="- topic/p p">用户可以使用上述代码以创建存储深交所逐笔委托数据的数据库表，分区规则采用了“<strong class="+ topic/ph hi-d/b ph b">时间维度按日 + 股票代码 HASH25</strong>”的组合分区方式存储，使用存储引擎 <strong class="+ topic/ph hi-d/b ph b">TSDB</strong>，使用“<strong class="+ topic/ph hi-d/b ph b">股票代码 + 交易时间</strong>”作为排序列。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">上交所</strong></p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://split_SH_TB"
partitioned by VALUE(2020.01.01..2021.01.01), HASH([SYMBOL, 25])
engine='TSDB'

create table "dfs://split_SH_TB"."split_SH_tradeTB"(
    DataStatus INT
    ApplSeqNum INT
    ChannelNo INT
    SecurityID SYMBOL
    TradeDate DATE[comment="交易日期", compress="delta"]   
    TradeTime TIME[comment="交易时间", compress="delta"]
    TradePrice DOUBLE
    TradeQty LONG
    TradeMoney DOUBLE
    BidApplSeqNum LONG
    OfferApplSeqNum LONG
    TradeBSFlag SYMBOL
    BizIndex LONG
    LocalTime TIME
    SeqNo INT
)
partitioned by TradeDate, SecurityID,
sortColumns=[`SecurityID,`TradeTime],
keepDuplicates=ALL</code></pre><p class="- topic/p p">上交所的数据格式与深交所略有不同，但分区方案一致。</p></div></article><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title12" id="3114-level-2-快照沪深合并"><h5 class="- topic/title title topictitle5" id="ariaid-title12">3.1.1.4. Level-2 快照（沪深合并）</h5><div class="- topic/body body"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://merge_TB"
partitioned by VALUE(2020.01.01..2021.01.01), HASH([SYMBOL, 50])
engine='TSDB'

create table "dfs://merge_TB"."merge_snapshotTB"(
	Market SYMBOL
    TradeDate DATE[comment="交易日期", compress="delta"]   
    TradeTime TIME[comment="交易时间", compress="delta"]
    MDStreamID SYMBOL
    SecurityID SYMBOL
    SecurityIDSource SYMBOL
    TradingPhaseCode SYMBOL
    ImageStatus INT
    PreCloPrice DOUBLE
    NumTrades LONG
    TotalVolumeTrade LONG
    TotalValueTrade DOUBLE
    LastPrice DOUBLE
    OpenPrice DOUBLE
    HighPrice DOUBLE
    LowPrice DOUBLE
    ClosePrice DOUBLE
    DifPrice1 DOUBLE
    DifPrice2 DOUBLE
    PE1 DOUBLE
    PE2 DOUBLE
    PreCloseIOPV DOUBLE
    IOPV DOUBLE
    TotalBidQty LONG
    WeightedAvgBidPx DOUBLE
    AltWAvgBidPri DOUBLE
    TotalOfferQty LONG
    WeightedAvgOfferPx DOUBLE
    AltWAvgAskPri DOUBLE
    UpLimitPx DOUBLE
    DownLimitPx DOUBLE
    OpenInt INT
    OptPremiumRatio DOUBLE
    OfferPrice DOUBLE[]
    BidPrice DOUBLE[]
    OfferOrderQty LONG[]
    BidOrderQty LONG[]
    BidNumOrders INT[]
    OfferNumOrders INT[]
    ETFBuyNumber INT
    ETFBuyAmount LONG
    ETFBuyMoney DOUBLE
    ETFSellNumber INT
    ETFSellAmount LONG
    ETFSellMoney DOUBLE
    YieldToMatu DOUBLE
    TotWarExNum DOUBLE
    WithdrawBuyNumber INT
    WithdrawBuyAmount LONG
    WithdrawBuyMoney DOUBLE
    WithdrawSellNumber INT
    WithdrawSellAmount LONG
    WithdrawSellMoney DOUBLE
    TotalBidNumber INT
    TotalOfferNumber INT
    MaxBidDur INT
    MaxSellDur INT
    BidNum INT
    SellNum INT
    LocalTime TIME
    SeqNo INT
    OfferOrders LONG[]
    BidOrders LONG[]
)
partitioned by TradeDate, SecurityID,
sortColumns=[`Market,`SecurityID,`TradeTime],
keepDuplicates=ALL</code></pre><p class="- topic/p p">用户可以使用上述代码建立同时存储沪深 Level-2 行情数据的数据库表，使用“<strong class="+ topic/ph hi-d/b ph b">时间维度按天 + 股票维度 HASH50</strong>”的分区规则，使用存储引擎 <strong class="+ topic/ph hi-d/b ph b">TSDB</strong>，使用“<strong class="+ topic/ph hi-d/b ph b">交易所类型 + 股票代码 + 交易时间</strong>”作为排序列。与沪深分开存储的建库建表的分区规则类似，仅在 HASH 数量和排序列方面有所区别。</p></div></article><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title13" id="3115-逐笔委托沪深合并"><h5 class="- topic/title title topictitle5" id="ariaid-title13">3.1.1.5. 逐笔委托（沪深合并）</h5><div class="- topic/body body"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://merge_TB"
partitioned by VALUE(2020.01.01..2021.01.01), HASH([SYMBOL, 50])
engine='TSDB'

create table "dfs://merge_TB"."merge_entrustTB"(
    ChannelNo INT
    ApplSeqNum LONG
    MDStreamID SYMBOL
    SecurityID SYMBOL
    SecurityIDSource SYMBOL
    Price DOUBLE
    OrderQty LONG
    Side SYMBOL
    TradeDate DATE[comment="交易日期", compress="delta"]   
    TradeTime TIME[comment="交易时间", compress="delta"]
    OrderType SYMBOL
    LocalTime TIME
    SeqNo LONG
    OrderNO LONG
    DataStatus INT
    BizIndex LONG
    Market SYMBOL
)
partitioned by TradeDate, SecurityID,
sortColumns=[`Market,`SecurityID,`TradeTime],
keepDuplicates=ALL</code></pre><p class="- topic/p p">用户可以使用上述代码建立同时存储沪深 Level-2 行情数据的数据库表，使用“<strong class="+ topic/ph hi-d/b ph b">时间维度按天 + 股票维度 HASH50</strong>”的分区规则，使用存储引擎 <strong class="+ topic/ph hi-d/b ph b">TSDB</strong>，使用“<strong class="+ topic/ph hi-d/b ph b">交易所类型 + 股票代码 + 交易时间</strong>”作为排序列。与沪深分开存储的建库建表的分区规则类似，仅在 HASH 数量和排序列方面有所区别。</p></div></article><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title14" id="3116-逐笔成交沪深合并"><h5 class="- topic/title title topictitle5" id="ariaid-title14">3.1.1.6. 逐笔成交（沪深合并）</h5><div class="- topic/body body"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://merge_TB"
partitioned by VALUE(2020.01.01..2021.01.01), HASH([SYMBOL, 50])
engine='TSDB'

create table "dfs://merge_TB"."merge_tradeTB"(
    ChannelNo INT
    ApplSeqNum LONG
    MDStreamID SYMBOL
    BidApplSeqNum LONG
    OfferApplSeqNum LONG
    SecurityID SYMBOL
    SecurityIDSource SYMBOL
    TradePrice DOUBLE
    TradeQty LONG
    ExecType SYMBOL
    TradeDate DATE[comment="交易日期", compress="delta"]   
    TradeTime TIME[comment="交易时间", compress="delta"]
    LocalTime TIME
    SeqNo LONG
    DataStatus INT
    TradeMoney DOUBLE
    TradeBSFlag SYMBOL
    BizIndex LONG
    OrderKind SYMBOL
    Market SYMBOL
)
partitioned by TradeDate, SecurityID,
sortColumns=[`Market,`SecurityID,`TradeTime],
keepDuplicates=ALL</code></pre><p class="- topic/p p">用户可以使用上述代码建立同时存储沪深 Level-2 行情数据的数据库表，使用“<strong class="+ topic/ph hi-d/b ph b">时间维度按天 + 股票维度 HASH50</strong>”的分区规则，使用存储引擎 <strong class="+ topic/ph hi-d/b ph b">TSDB</strong>，使用“<strong class="+ topic/ph hi-d/b ph b">交易所类型 + 股票代码 + 交易时间</strong>”作为排序列。与沪深分开存储的建库建表的分区规则类似，仅在 HASH 数量和排序列方面有所区别。</p></div></article></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title15" id="312-股票日-k-线"><h4 class="- topic/title title topictitle4" id="ariaid-title15">3.1.2. 股票日 K 线</h4><div class="- topic/body body"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://k_day_level"
partitioned by RANGE(2000.01M + (0..30)*12)
engine='OLAP'

create table "dfs://k_day_level"."k_day"(
	securityid SYMBOL  
	tradetime TIMESTAMP
	open DOUBLE        
	close DOUBLE       
	high DOUBLE        
	low DOUBLE
	vol INT
	val DOUBLE
	vwap DOUBLE
)
partitioned by tradetime</code></pre><p class="- topic/p p">用户可以使用上述代码建立同时存储日 K 的数据库表，使用“<strong class="+ topic/ph hi-d/b ph b">时间维度按年</strong>”的分区规则，使用存储引擎 <strong class="+ topic/ph hi-d/b ph b">OLAP</strong>。每个分区内都包含了这一年所有股票的日 K 数据。</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title16" id="313-股票分钟-k-线"><h4 class="- topic/title title topictitle4" id="ariaid-title16">3.1.3. 股票分钟 K 线</h4><div class="- topic/body body"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://k_minute_level"
partitioned by VALUE(2020.01.01..2021.01.01)
engine='OLAP'

create table "dfs://k_minute_level"."k_minute"(
	securityid SYMBOL  
	tradetime TIMESTAMP
	open DOUBLE        
	close DOUBLE       
	high DOUBLE        
	low DOUBLE
	vol INT
	val DOUBLE
	vwap DOUBLE
)
partitioned by tradetime</code></pre><p class="- topic/p p">用户可以使用上述代码建立同时存储日 K 的数据库表，使用“<strong class="+ topic/ph hi-d/b ph b">时间维度按天</strong>”的分区规则，存储引擎使用 <strong class="+ topic/ph hi-d/b ph b">OLAP</strong>。每个分区内都包含了当天所有股票的分钟 K 数据。</p></div></article></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title17" id="32-期权数据"><h3 class="- topic/title title topictitle3" id="ariaid-title17">3.2. 期权数据</h3><div class="- topic/body body"></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title18" id="321-期权快照"><h4 class="- topic/title title topictitle4" id="ariaid-title18">3.2.1. 期权快照</h4><div class="- topic/body body"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://ctp_options"
partitioned by VALUE(2020.01.01..2021.01.01), HASH([SYMBOL, 20])
engine='TSDB'

create table "dfs://ctp_options"."options"(
    TradingDay DATE[comment="交易日期", compress="delta"]
    ExchangeID SYMBOL
    LastPrice DOUBLE
    PreSettlementPrice DOUBLE
    PreClosePrice DOUBLE
    PreOpenInterest DOUBLE
    OpenPrice DOUBLE
    HighestPrice DOUBLE
    LowestPrice DOUBLE
    Volume INT
    Turnover DOUBLE
    OpenInterest DOUBLE
    ClosePrice DOUBLE
    SettlementPrice DOUBLE
    UpperLimitPrice DOUBLE
    LowerLimitPrice DOUBLE
    PreDelta DOUBLE
    CurrDelta DOUBLE
    UpdateTime SECOND
    UpdateMillisec INT
    BidPrice DOUBLE[]
    BidVolume INT[]
    AskPrice DOUBLE[]
    AskVolume INT[]
    AveragePrice DOUBLE
    ActionDay DATE
    InstrumentID SYMBOL
    ExchangeInstID STRING
    BandingUpperPrice DOUBLE
    BandingLowerPrice DOUBLE
    tradeTime TIME
    receivedTime NANOTIMESTAMP
    perPenetrationTime LONG
)
partitioned by TradingDay, InstrumentID,
sortColumns=[`InstrumentID,`ReceivedTime],
keepDuplicates=ALL</code></pre><p class="- topic/p p">用户可以使用上述代码以创建存储期权快照数据的数据库表，分区规则采用了“<strong class="+ topic/ph hi-d/b ph b">时间维度按天 + 期权代码维度 HASH20</strong>”的组合分区方式存储，使用存储引擎 <strong class="+ topic/ph hi-d/b ph b">TSDB</strong>，使用“<strong class="+ topic/ph hi-d/b ph b">期权代码 + 接收时间</strong>”作为排序列。经测试期货快照数据采用这种方式分区存储，综合性能最佳。</p></div></article></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title19" id="33-期货数据"><h3 class="- topic/title title topictitle3" id="ariaid-title19">3.3. 期货数据</h3><div class="- topic/body body"></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title20" id="331-期货快照"><h4 class="- topic/title title topictitle4" id="ariaid-title20">3.3.1. 期货快照</h4><div class="- topic/body body"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://ctp_futures"
partitioned by VALUE(2020.01.01..2021.01.01), HASH([SYMBOL, 10])
engine='TSDB'

create table "dfs://ctp_futures"."futures"(
    TradingDay DATE[comment="交易日期", compress="delta"]
    ExchangeID SYMBOL
    LastPrice DOUBLE
    PreSettlementPrice DOUBLE
    PreClosePrice DOUBLE
    PreOpenInterest DOUBLE
    OpenPrice DOUBLE
    HighestPrice DOUBLE
    LowestPrice DOUBLE
    Volume INT
    Turnover DOUBLE
    OpenInterest DOUBLE
    ClosePrice DOUBLE
    SettlementPrice DOUBLE
    UpperLimitPrice DOUBLE
    LowerLimitPrice DOUBLE
    PreDelta DOUBLE
    CurrDelta DOUBLE
    UpdateTime SECOND
    UpdateMillisec INT
    BidPrice DOUBLE[]
    BidVolume INT[]
    AskPrice DOUBLE[]
    AskVolume INT[]
    AveragePrice DOUBLE
    ActionDay DATE
    InstrumentID SYMBOL
    ExchangeInstID STRING
    BandingUpperPrice DOUBLE
    BandingLowerPrice DOUBLE
    tradeTime TIME
    receivedTime NANOTIMESTAMP
    perPenetrationTime LONG
)
partitioned by TradingDay, InstrumentID,
sortColumns=[`InstrumentID,`ReceivedTime],
keepDuplicates=ALL</code></pre><p class="- topic/p p">用户可以使用上述代码以创建存储期货快照数据的数据库表，分区规则采用了“<strong class="+ topic/ph hi-d/b ph b">时间维度按天 + 期货代码维度 HASH10</strong>”的组合分区方式存储，使用存储引擎 <strong class="+ topic/ph hi-d/b ph b">TSDB</strong>，使用“<strong class="+ topic/ph hi-d/b ph b">期货代码 + 接收时间</strong>”作为排序列。经测试期货快照数据采用这种方式分区存储，综合性能最佳。</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title21" id="332-期货日-k-线"><h4 class="- topic/title title topictitle4" id="ariaid-title21">3.3.2. 期货日 K 线</h4><div class="- topic/body body"><p class="- topic/p p">由于期货 K 数据与股票 K 数据类似，因此可以使用股票 K 数据的表格结构作为期货 K 数据的表格结构</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://ctp_k_day_level"
partitioned by RANGE(2000.01M + (0..30)*12)
engine='OLAP'

create table "dfs://ctp_k_day_level"."ctp_k_day"(
	securityid SYMBOL  
	tradetime TIMESTAMP
	open DOUBLE        
	close DOUBLE       
	high DOUBLE        
	low DOUBLE
	vol INT
	val DOUBLE
	vwap DOUBLE
)
partitioned by tradetime</code></pre><p class="- topic/p p">用户可以使用上述代码以创建存储期货日 K 数据的数据库表，与股票日 K 数据的分区规则相同，使用“<strong class="+ topic/ph hi-d/b ph b">时间维度按年</strong>”的分区规则，存储引擎使用 <strong class="+ topic/ph hi-d/b ph b">OLAP</strong>。在一个分区中包含了这一年所有期货的日 K 数据。</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title22" id="333-期货分钟-k-线"><h4 class="- topic/title title topictitle4" id="ariaid-title22">3.3.3. 期货分钟 K 线</h4><div class="- topic/body body"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://ctp_k_day_level"
partitioned by RANGE(2000.01M + (0..30)*12)
engine='OLAP'

create table "dfs://ctp_k_day_level"."ctp_k_day"(
	securityid SYMBOL  
	tradetime TIMESTAMP
	open DOUBLE        
	close DOUBLE       
	high DOUBLE        
	low DOUBLE
	vol INT
	val DOUBLE
	vwap DOUBLE
)
partitioned by tradetime</code></pre><p class="- topic/p p">用户可以使用上述代码以创建存储期货分钟 K 数据的数据库表，与股票分钟 K 数据的分区规则相同，使用“<strong class="+ topic/ph hi-d/b ph b">时间维度按天</strong>”的分区规则，存储引擎使用 <strong class="+ topic/ph hi-d/b ph b">OLAP</strong>。每个分区内都包含了当天所有期货的分钟 K 数据。</p></div></article></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title23" id="34-银行间债券"><h3 class="- topic/title title topictitle3" id="ariaid-title23">3.4. 银行间债券</h3><div class="- topic/body body"></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title24" id="341-x-bond-报价"><h4 class="- topic/title title topictitle4" id="ariaid-title24">3.4.1. X-Bond 报价</h4><div class="- topic/body body"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://XBond"
partitioned by VALUE(2023.01.01..2023.12.31)
engine='TSDB'

create table "dfs://XBond"."XBondDepthTable"(
    bondCodeVal SYMBOL
    createDate DATE[comment="创建日期", compress="delta"]  
    createTime TIME[comment="创建时间", compress="delta"]
    marketDepth LONG
    mdBookType LONG
    messageId LONG
    messageSource STRING
    msgSeqNum LONG
    msgType STRING
    bidmdEntryPrice DOUBLE[]
    offermdEntryPrice DOUBLE[]
    bidmdEntrySize LONG[]
    offermdEntrySize LONG[]
    bidsettlType LONG[]
    offersettlType LONG[]
    bidyield DOUBLE[]
    offeryield DOUBLE[]
    bid1yieldType STRING
    offer1yieldType STRING
    bid2yieldType STRING
    offer2yieldType STRING
    bid3yieldType STRING
    offer3yieldType STRING
    bid4yieldType STRING
    offer4yieldType STRING
    bid5yieldType STRING
    offer5yieldType STRING
    bid6yieldType STRING
    offer6yieldType STRING
    securityID SYMBOL
    senderCompID STRING
    senderSubID STRING
    sendingTime TIMESTAMP
)
partitioned by createDate,
sortColumns=[`securityID, `createTime]</code></pre><p class="- topic/p p">用户可以使用上述代码以创建存储 X-Bond 报价数据的数据库表，使用“<strong class="+ topic/ph hi-d/b ph b">时间维度按天</strong>”的分区规则，使用存储引擎 <strong class="+ topic/ph hi-d/b ph b">TSDB</strong>，使用“<strong class="+ topic/ph hi-d/b ph b">债券代码 + 创建时间</strong>”作为排序列。每个分区内都包含了当天所有 X-Bond 报价数据。</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title25" id="342-x-bond-成交"><h4 class="- topic/title title topictitle4" id="ariaid-title25">3.4.2. X-Bond 成交</h4><div class="- topic/body body"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://XBond"
partitioned by VALUE(2023.01.01..2023.12.31)
engine='TSDB'

create table "dfs://XBond"."XBondTradetable"(
    createDate DATE[comment="创建日期", compress="delta"]  
    createTime TIME[comment="创建时间", compress="delta"]
    securityID SYMBOL
    beforeClosingPrice DOUBLE
    beforeClosingYield DOUBLE
    beforeWeightedAveragePrice DOUBLE
    beforeWeightedAverageYield DOUBLE
    fillSide LONG
    highestPrice DOUBLE
    highestYield DOUBLE
    lowestPrice DOUBLE
    lowestYield DOUBLE
    marketIndicator LONG
    mdSubType LONG
    mdType LONG
    messageId LONG
    messageSource STRING
    msgSeqNum LONG
    msgType STRING
    openingValence DOUBLE
    openingYield DOUBLE
    priceRiseFallAmplitude DOUBLE
    senderCompID STRING
    sendingTime TIMESTAMP
    settlType LONG
    symbol STRING
    tradeMethod LONG
    transactTime TIMESTAMP
    transactionNumber LONG
    uniqueOutputKey LONG
    upToDatePrice DOUBLE
    upToDateYield DOUBLE
    weightedAveragePrice DOUBLE
    weightedAverageYield DOUBLE
    yieldRiseFall DOUBLE
)
partitioned by createDate,
sortColumns=[`securityID, `createTime]</code></pre><p class="- topic/p p">用户可以使用上述代码以创建存储 X-Bond 成交数据的数据库表，使用“<strong class="+ topic/ph hi-d/b ph b">时间维度按天</strong>”的分区规则，使用存储引擎 <strong class="+ topic/ph hi-d/b ph b">TSDB</strong>，使用“<strong class="+ topic/ph hi-d/b ph b">债券代码 + 创建时间</strong>”作为排序列。每个分区内都包含了当天所有 X-Bond 成交数据。</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title26" id="343-esp-报价"><h4 class="- topic/title title topictitle4" id="ariaid-title26">3.4.3. ESP 报价</h4><div class="- topic/body body"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://ESP"
partitioned by VALUE(2023.01.01..2023.12.31)
engine='TSDB'

create table "dfs://ESP"."ESPDepthtable"(
    createDate DATE[comment="创建日期", compress="delta"]  
    createTime TIME[comment="创建时间", compress="delta"]
    bondCodeVal SYMBOL
    marketDepth LONG
    marketIndicator LONG
    mdBookType LONG
    mdSubBookType LONG
    messageId LONG
    messageSource STRING
    msgSeqNum LONG
    msgType STRING
    askclearingMethod LONG[]
    bidclearingMethod LONG[]
    askdeliveryType LONG[]
    biddeliveryType LONG[]
    askinitAccountNumSixCode LONG[]
    bidinitAccountNumSixCode LONG[]
    asklastPx DOUBLE[]
    bidlastPx DOUBLE[]
    askmdEntryDate DATE[]
    bidmdEntryDate DATE[]
    askmdEntrySize LONG[]
    bidmdEntrySize LONG[]
    askmdEntryTime TIME[]
    bidmdEntryTime TIME[]
    askmdQuoteType LONG[]
    bidmdQuoteType LONG[]
    askquoteEntryID LONG[]
    bidquoteEntryID LONG[]
    asksettlType LONG[]
    bidsettlType LONG[]
    askyield DOUBLE[]
    bidyield DOUBLE[]
    ask1initPartyTradeCode STRING
    bid1initPartyTradeCode STRING
    ask2initPartyTradeCode STRING
    bid2initPartyTradeCode STRING
    ask3initPartyTradeCode STRING
    bid3initPartyTradeCode STRING
    ask4initPartyTradeCode STRING
    bid4initPartyTradeCode STRING
    ask5initPartyTradeCode STRING
    bid5initPartyTradeCode STRING
    ask6initPartyTradeCode STRING
    bid6initPartyTradeCode STRING
    ask7initPartyTradeCode STRING
    bid7initPartyTradeCode STRING
    ask8initPartyTradeCode STRING
    bid8initPartyTradeCode STRING
    ask9initPartyTradeCode STRING
    bid9initPartyTradeCode STRING
    ask10initPartyTradeCode STRING
    bid10initPartyTradeCode STRING
    securityID SYMBOL
    securityType STRING
    senderCompID STRING
    senderSubID STRING
    sendingTime TIMESTAMP
    symbol STRING
)
partitioned by createDate,
sortColumns=[`securityID, `createTime]</code></pre><p class="- topic/p p">用户可以使用上述代码以创建存储 ESP 报价数据的数据库表，使用“<strong class="+ topic/ph hi-d/b ph b">时间维度按天</strong>”的分区规则，使用存储引擎 <strong class="+ topic/ph hi-d/b ph b">TSDB</strong>，使用“<strong class="+ topic/ph hi-d/b ph b">债券代码 + 创建时间</strong>”作为排序列。每个分区内都包含了当天所有 ESP 报价数据。</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title27" id="344-esp-成交"><h4 class="- topic/title title topictitle4" id="ariaid-title27">3.4.4. ESP 成交</h4><div class="- topic/body body"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://ESP"
partitioned by VALUE(2023.01.01..2023.12.31)
engine='TSDB'

create table "dfs://ESP"."ESPTradetable"(
    createDate DATE[comment="创建日期", compress="delta"]  
    createTime TIME[comment="创建时间", compress="delta"]
    securityID SYMBOL
    execId STRING
    execType STRING
    lastQty LONG
    marketIndicator LONG
    messageSource STRING
    msgSeqNum LONG
    msgType STRING
    price DOUBLE
    senderCompID STRING
    stipulationType STRING
    stipulationValue DOUBLE
    symbol STRING
    tradeDate DATE
    tradeMethod LONG
    tradeTime TIME
    tradeType LONG
    transactTime TIMESTAMP
)
partitioned by createDate,
sortColumns=[`securityID, `createTime]</code></pre><p class="- topic/p p">用户可以使用上述代码以创建存储 ESP 成交数据的数据库表，使用“<strong class="+ topic/ph hi-d/b ph b">时间维度按天</strong>”的分区规则，使用存储引擎 <strong class="+ topic/ph hi-d/b ph b">TSDB</strong>，使用“<strong class="+ topic/ph hi-d/b ph b">债券代码 + 创建时间</strong>”作为排序列。每个分区内都包含了当天所有 ESP 成交数据。</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title28" id="345-qb-报价"><h4 class="- topic/title title topictitle4" id="ariaid-title28">3.4.5. QB 报价</h4><div class="- topic/body body"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://QB_QUOTE"
partitioned by VALUE(2023.10.01..2023.10.31)
engine='TSDB'

create table "dfs://QB_QUOTE"."qbTable"(
	SENDINGTIME TIMESTAMP
	CONTRIBUTORID SYMBOL
	MARKETDATATIME TIMESTAMP
	SECURITYID SYMBOL
	BONDNAME SYMBOL
	DISPLAYLISTEDMARKET SYMBOL
	BIDQUOTESTATUS INT
	BIDYIELD DOUBLE
	BIDPX DOUBLE
	BIDPRICETYPE INT
	BIDPRICE DOUBLE
	BIDDIRTYPRICE DOUBLE
	BIDVOLUME INT
	BIDPRICEDESC STRING
	ASKQUOTESTATUS INT
	ASKYIELD DOUBLE
	OFFERPX DOUBLE
	ASKPRICETYPE INT
	ASKPRICE DOUBLE
	ASKDIRTYPRICE DOUBLE
	ASKVOLUME INT
	ASKPRICEDESC STRING
)
partitioned by MARKETDATATIME,
sortColumns=[`SECURITYID,`MARKETDATATIME]</code></pre><p class="- topic/p p">用户可以使用上述代码以创建存储 QB 报价数据的数据库表，使用“<strong class="+ topic/ph hi-d/b ph b">时间维度按天</strong>”的分区规则，使用存储引擎 <strong class="+ topic/ph hi-d/b ph b">TSDB</strong>，使用“<strong class="+ topic/ph hi-d/b ph b">债券代码 + 市场时间</strong>”作为排序列。每个分区内都包含了当天所有 QB 报价数据。</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title29" id="346-qb-成交"><h4 class="- topic/title title topictitle4" id="ariaid-title29">3.4.6. QB 成交</h4><div class="- topic/body body"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://QB_TRADE"
partitioned by VALUE(2023.10.01..2023.10.31)
engine='TSDB'

create table "dfs://QB_TRADE"."lastTradeTable"(
	SECURITYID SYMBOL
	BONDNAME SYMBOL
	SENDINGTIME TIMESTAMP
	CONTRIBUTORID SYMBOL
	MARKETDATATIME TIMESTAMP
	MODIFYTIME SECOND
	DISPLAYLISTEDMARKET SYMBOL
	EXECID STRING
	DEALSTATUS INT
	TRADEMETHOD INT
	YIELD DOUBLE
	TRADEPX DOUBLE
	PRICETYPE INT
	TRADEPRICE DOUBLE
	DIRTYPRICE DOUBLE
	SETTLSPEED STRING
)
partitioned by MARKETDATATIME,
sortColumns=[`SECURITYID,`MARKETDATATIME]</code></pre><p class="- topic/p p">用户可以使用上述代码以创建存储 QB 交易数据的数据库表，使用“<strong class="+ topic/ph hi-d/b ph b">时间维度按天</strong>”的分区规则，使用存储引擎 <strong class="+ topic/ph hi-d/b ph b">TSDB</strong>，使用“<strong class="+ topic/ph hi-d/b ph b">债券代码 + 市场时间</strong>”作为排序列。每个分区内都包含了当天所有 QB 交易数据。</p></div></article></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title30" id="4-因子库窄表存储方案实践"><h2 class="- topic/title title topictitle2" id="ariaid-title30">4. 因子库窄表存储方案实践</h2><div class="- topic/body body"></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title31" id="41-日频因子库"><h3 class="- topic/title title topictitle3" id="ariaid-title31">4.1. 日频因子库</h3><div class="- topic/body body"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://dayFactorDB" 
partitioned by RANGE(date(datetimeAdd(1980.01M,0..80*12,'M'))), VALUE(`f1`f2), 
engine='TSDB'

create table "dfs://dayFactorDB"."dayFactorTB"(
    tradetime DATE[comment="时间列", compress="delta"], 
    securityid SYMBOL, 
    value DOUBLE, 
    factorname SYMBOL
)
partitioned by tradetime, factorname,
sortColumns=[`securityid, `tradetime], 
keepDuplicates=ALL, 
sortKeyMappingFunction=[hashBucket{, 500}]</code></pre><p class="- topic/p p">用户可以使用上述代码以创建存储日频因子库的数据库表，分区规则采用了“<strong class="+ topic/ph hi-d/b ph b">时间维度按年 + 因子名</strong>”的组合分区方式存储，使用存储引擎<strong class="+ topic/ph hi-d/b ph b">TSDB</strong>，使用“<strong class="+ topic/ph hi-d/b ph b">股票代码 + 交易时间</strong>”作为排序列。经测试日频因子数据采用这种方式分区存储，综合性能最佳。</p><p class="- topic/p p">对于分区内的分组排序存储来说，DolphinDB 中的 TSDB 存储引擎提供排序键设置，每一个分区的数据写在一个或多个 level file 中。每一个 level file 内部的数据按照指定的列进行排序且创建块索引。在排序列中，除了最后一列之外的其他列通常用作点查中的过滤条件。这些列的唯一值组合被称为 SortKeys（排序键）。为保证性能最优，每个分区的 SortKeys 建议不超过 1000 个。如 SortKeys 较多可通过设置 <em class="+ topic/ph hi-d/i ph i">sortKeyMappingFunction</em> 对 SortKeys 降维。经测试日频因子数据采用“<strong class="+ topic/ph hi-d/b ph b">securityid + tradetime</strong>”的方式进行排序，<strong class="+ topic/ph hi-d/b ph b">sortKeyMapping</strong> 设置为 500 时，综合性能最佳。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title32" id="42-半小时频因子库"><h3 class="- topic/title title topictitle3" id="ariaid-title32">4.2. 半小时频因子库</h3><div class="- topic/body body"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://halfhourFactorDB"
partitioned by RANGE(date(datetimeAdd(1980.01M,0..80*12,'M'))), VALUE(`f1`f2),
engine='TSDB'

create table "dfs://halfhourFactorDB"."halfhourFactorTB"(
    tradetime TIMESTAMP[comment="时间列", compress="delta"],
    securityid SYMBOL,
    value DOUBLE,
    factorname SYMBOL,
)
partitioned by tradetime, factorname,
sortColumns=[`securityid, `tradetime],
keepDuplicates=ALL,
sortKeyMappingFunction=[hashBucket{, 500}]</code></pre><p class="- topic/p p">用户可以使用上述代码以创建存储半小时频因子库的数据库表，分区规则采用了“<strong class="+ topic/ph hi-d/b ph b">时间维度按年 + 因子名</strong>”的组合分区方式存储，使用存储引擎 <strong class="+ topic/ph hi-d/b ph b">TSDB</strong>，使用“<strong class="+ topic/ph hi-d/b ph b">股票代码 + 交易时间</strong>”作为排序列。经测试半小时频因子数据采用这种方式分区存储，综合性能最佳。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title33" id="43-十分钟频因子库"><h3 class="- topic/title title topictitle3" id="ariaid-title33">4.3. 十分钟频因子库</h3><div class="- topic/body body"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://tenMinutesFactorDB" 
partitioned by VALUE(2023.01M..2023.06M), 
VALUE(`f1`f2), 
engine='TSDB'

create table "dfs://tenMinutesFactorDB"."tenMinutesFactorTB"(
    tradetime TIMESTAMP[comment="时间列", compress="delta"], 
    securityid SYMBOL, 
    value DOUBLE, 
    factorname SYMBOL
)
partitioned by tradetime, factorname,
sortColumns=[`securityid, `tradetime], 
keepDuplicates=ALL, 
sortKeyMappingFunction=[hashBucket{, 500}]</code></pre><p class="- topic/p p">用户可以使用上述代码以创建存储十分钟频因子库的数据库表，分区规则采用了“<strong class="+ topic/ph hi-d/b ph b">时间维度按月 + 因子名</strong>”的组合分区方式存储，使用存储引擎 <strong class="+ topic/ph hi-d/b ph b">TSDB</strong>，使用“<strong class="+ topic/ph hi-d/b ph b">股票代码 + 交易时间</strong>”作为排序列。经测试十分钟频因子数据采用这种方式分区存储，综合性能最佳。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title34" id="44-分钟频因子库"><h3 class="- topic/title title topictitle3" id="ariaid-title34">4.4. 分钟频因子库</h3><div class="- topic/body body"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://minuteFactorDB" 
partitioned by VALUE(2012.01.01..2021.12.31), VALUE(`f1`f2), 
engine='TSDB'

create table "dfs://minuteFactorDB"."minuteFactorTB"(
    tradetime TIMESTAMP[comment="时间列", compress="delta"], 
    securityid SYMBOL, 
    value DOUBLE, 
    factorname SYMBOL
)
partitioned by tradetime, factorname,
sortColumns=[`securityid, `tradetime], 
keepDuplicates=ALL, 
sortKeyMappingFunction=[hashBucket{, 500}]</code></pre><p class="- topic/p p">用户可以使用上述代码以创建存储分钟频因子库的数据库表，分区规则采用了“<strong class="+ topic/ph hi-d/b ph b">时间维度按日 + 因子名</strong>”的组合分区方式存储，使用存储引擎 <strong class="+ topic/ph hi-d/b ph b">TSDB</strong>，使用“<strong class="+ topic/ph hi-d/b ph b">股票代码 + 交易时间</strong>”作为排序列。经测试分钟频因子数据采用这种方式分区存储，综合性能最佳。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title35" id="45-秒钟频因子库"><h3 class="- topic/title title topictitle3" id="ariaid-title35">4.5. 秒钟频因子库</h3><div class="- topic/body body"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://secondFactorDB" 
partitioned by VALUE(datehour(2022.01.01T00:00:00)..datehour(2022.01.31T00:00:00)), VALUE(`f1`f2), 
engine='TSDB'

create table "dfs://secondFactorDB"."secondFactorTB"(
    tradetime TIMESTAMP[comment="时间列", compress="delta"], 
    securityid SYMBOL, 
    value DOUBLE, 
    factorname SYMBOL
)
partitioned by tradetime, factorname,
sortColumns=[`securityid, `tradetime], 
keepDuplicates=ALL, 
sortKeyMappingFunction=[hashBucket{, 500}]</code></pre><p class="- topic/p p">用户可以使用上述代码以创建存储秒钟频因子库的数据库表，分区规则采用了“<strong class="+ topic/ph hi-d/b ph b">时间维度按小时 + 因子名</strong>”的组合分区方式存储，使用存储引擎 <strong class="+ topic/ph hi-d/b ph b">TSDB</strong>，使用“<strong class="+ topic/ph hi-d/b ph b">股票代码 + 交易时间</strong>”作为排序列。经测试秒钟频因子数据采用这种方式分区存储，综合性能最佳。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title36" id="46-level-2-快照频因子库"><h3 class="- topic/title title topictitle3" id="ariaid-title36">4.6. Level-2 快照频因子库</h3><div class="- topic/body body"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://level2FactorDB" partitioned by VALUE(2022.01.01..2022.12.31), VALUE(["f1", "f2"]), 
engine='TSDB'

create table "dfs://level2FactorDB"."level2FactorTB"(
    tradetime TIMESTAMP[comment="时间列", compress="delta"], 
    securityid SYMBOL, 
    value DOUBLE, 
    factorname SYMBOL
)
partitioned by tradetime, factorname,
sortColumns=[`securityid, `tradetime], 
keepDuplicates=ALL, 
sortKeyMappingFunction=[hashBucket{, 500}]</code></pre><p class="- topic/p p">用户可以使用上述代码以创建存储 Level-2 快照频因子库的数据库表，分区规则采用了“<strong class="+ topic/ph hi-d/b ph b">时间维度按日 + 因子名</strong>”的组合分区方式存储，使用存储引擎 <strong class="+ topic/ph hi-d/b ph b">TSDB</strong>，使用“<strong class="+ topic/ph hi-d/b ph b">股票代码 + 交易时间</strong>”作为排序列。根据测试结果，Level-2 快照频因子数据采用这种方式进行分区存储，可以实现最佳的综合性能。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title37" id="47-逐笔频因子库"><h3 class="- topic/title title topictitle3" id="ariaid-title37">4.7. 逐笔频因子库</h3><div class="- topic/body body"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://tickFactorDB" partitioned by VALUE(2022.01.01..2022.12.31), VALUE(["f1", "f2"]), HASH([SYMBOL,10])
engine='TSDB'

create table "dfs://tickFactorDB"."tickFactorTB"(
    tradetime TIMESTAMP[comment="时间列", compress="delta"], 
    securityid SYMBOL, 
    value DOUBLE, 
    factorname SYMBOL
)
partitioned by tradetime, factorname,securityid,
sortColumns=[`securityid, `tradetime], 
keepDuplicates=ALL</code></pre><p class="- topic/p p">用户可以使用上述代码创建存储逐笔频因子库的数据库表，分区规则采用了“<strong class="+ topic/ph hi-d/b ph b">时间维度按日 + 因子名维度 + 股票维度 HASH10</strong>”的组合分区方式存储，使用存储引擎 <strong class="+ topic/ph hi-d/b ph b">TSDB</strong>，使用“<strong class="+ topic/ph hi-d/b ph b">股票代码 + 交易时间</strong>”作为排序列。根据测试结果，逐笔频因子数据采用了这种分区存储方式，可以获得最佳的综合性能。与之前提到的因子存储方案不同之处在于，这里没有对排序键（sortKey）进行降维处理。原因是每天的数据按照股票代码维度进行了 10 个哈希分区，而每个最小分区内包含 500 个股票，因此无需再进行降维处理。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title38" id="48-期货-500ms-频因子库"><h3 class="- topic/title title topictitle3" id="ariaid-title38">4.8. 期货 500ms 频因子库</h3><div class="- topic/body body"><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database "dfs://futuresFactorDB" 
partitioned by VALUE(2022.01.01..2023.01.01), VALUE(["f1", "f2"]), 
engine='TSDB' 

create table "dfs://futuresFactorDB"."futuresFactorTB"(
    tradetime TIMESTAMP[comment="时间列", compress="delta"], 
    securityid SYMBOL, 
    value DOUBLE, 
    factorname SYMBOL
)
partitioned by tradetime, factorname,
sortColumns=[`securityid, `tradetime], 
keepDuplicates=ALL, 
sortKeyMappingFunction=[hashBucket{, 500}]</code></pre><p class="- topic/p p">用户可以使用上述代码以创建存储 L 期货 500ms 频因子库的数据库表，分区规则采用了“<strong class="+ topic/ph hi-d/b ph b">时间维度按日 + 因子名</strong>”的组合分区方式存储，使用存储引擎 <strong class="+ topic/ph hi-d/b ph b">TSDB</strong>，使用“<strong class="+ topic/ph hi-d/b ph b">期货代码 + 交易时间</strong>”作为排序列。根据测试结果，采用这种分区存储方式可以实现期货 500 毫秒频率因子数据的最佳综合性能。</p></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title39" id="5-结语"><h2 class="- topic/title title topictitle2" id="ariaid-title39">5. 结语</h2><div class="- topic/body body"><p class="- topic/p p">针对常见的金融数据，我们通过最佳实践，给出上述建库建表的推荐方案，用户可以根据实际业务场景，进行适当调整和修改。</p><p class="- topic/p p">本文扩展阅读：</p><ul class="- topic/ul ul"><li class="- topic/li li"><a class="- topic/xref xref" href="https://gitee.com/dolphindb/Tutorials_CN/blob/master/database.md" target="_blank" rel="external noopener">DolphinDB 教程：分区数据库</a></li><li class="- topic/li li"><a class="- topic/xref xref" href="https://gitee.com/dolphindb/Tutorials_CN/blob/master/tsdb_explained.md" target="_blank" rel="external noopener">TSDB 存储引擎详解</a></li></ul></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title40" id="6-常见问题与解答faq"><h2 class="- topic/title title topictitle2" id="ariaid-title40">6. 常见问题与解答（FAQ）</h2><div class="- topic/body body"></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title41" id="61-创建数据库表时报错已经存在重名库表"><h3 class="- topic/title title topictitle3" id="ariaid-title41">6.1. 创建数据库表时报错：已经存在重名库表</h3><div class="- topic/body body"><p class="- topic/p p">执行创建数据库表的代码后，报出如下错误：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database partitioned by VALUE(["f1","f2"]), engine=TSDB =&gt; It is not allowed to overwrite an existing database.</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">解决方法</strong>：建议使用其他名字或者删掉该数据库。</p><p class="- topic/p p">删除指定数据库的代码如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>dropDatabase("dfs://dayFactorDB")</code></pre><p class="- topic/p p">检查指定数据库是否存在的代码如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>existsDatabase("dfs://dayFactorDB")</code></pre></div></article></article></article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" aria-label="On this page" class="col-lg-2 d-none d-lg-block navbar d-print-none"> 
                            <div id="wh_topic_toc_content">
		                        
	                            <div class=" wh_topic_toc "><div class="wh_topic_label">在本页上</div><ul><li class="topic-item"><a href="#1-%E6%A6%82%E8%BF%B0" data-tocid="1-概述">1. 概述</a></li><li class="topic-item"><a href="#2-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E6%96%B9%E6%A1%88%E6%80%BB%E8%A7%88" data-tocid="2-数据存储方案总览">2. 数据存储方案总览</a><ul><li class="topic-item"><a href="#21-%E9%87%91%E8%9E%8D%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E6%96%B9%E6%A1%88" data-tocid="21-金融数据存储方案">2.1. 金融数据存储方案</a></li><li class="topic-item"><a href="#22-%E5%9B%A0%E5%AD%90%E5%BA%93%E7%AA%84%E8%A1%A8%E5%AD%98%E5%82%A8%E6%96%B9%E6%A1%88" data-tocid="22-因子库窄表存储方案">2.2. 因子库窄表存储方案</a></li></ul></li><li class="topic-item"><a href="#3-%E9%87%91%E8%9E%8D%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5" data-tocid="3-金融数据存储方案实践">3. 金融数据存储方案实践</a><ul><li class="topic-item"><a href="#31-%E8%82%A1%E7%A5%A8%E6%95%B0%E6%8D%AE" data-tocid="31-股票数据">3.1. 股票数据</a><ul><li class="topic-item"><a href="#311-level-2-%E8%A1%8C%E6%83%85%E6%95%B0%E6%8D%AE" data-tocid="311-level-2-行情数据">3.1.1. Level-2 行情数据</a><ul><li class="topic-item"><a href="#3111-level-2-%E5%BF%AB%E7%85%A7%E6%B2%AA%E6%B7%B1%E5%88%86%E8%A1%A8" data-tocid="3111-level-2-快照沪深分表">3.1.1.1. Level-2 快照（沪深分表）</a></li><li class="topic-item"><a href="#3112-%E9%80%90%E7%AC%94%E5%A7%94%E6%89%98%E6%B2%AA%E6%B7%B1%E5%88%86%E8%A1%A8" data-tocid="3112-逐笔委托沪深分表">3.1.1.2. 逐笔委托（沪深分表）</a></li><li class="topic-item"><a href="#3113-%E9%80%90%E7%AC%94%E6%88%90%E4%BA%A4%E6%B2%AA%E6%B7%B1%E5%88%86%E8%A1%A8" data-tocid="3113-逐笔成交沪深分表">3.1.1.3. 逐笔成交（沪深分表）</a></li><li class="topic-item"><a href="#3114-level-2-%E5%BF%AB%E7%85%A7%E6%B2%AA%E6%B7%B1%E5%90%88%E5%B9%B6" data-tocid="3114-level-2-快照沪深合并">3.1.1.4. Level-2 快照（沪深合并）</a></li><li class="topic-item"><a href="#3115-%E9%80%90%E7%AC%94%E5%A7%94%E6%89%98%E6%B2%AA%E6%B7%B1%E5%90%88%E5%B9%B6" data-tocid="3115-逐笔委托沪深合并">3.1.1.5. 逐笔委托（沪深合并）</a></li><li class="topic-item"><a href="#3116-%E9%80%90%E7%AC%94%E6%88%90%E4%BA%A4%E6%B2%AA%E6%B7%B1%E5%90%88%E5%B9%B6" data-tocid="3116-逐笔成交沪深合并">3.1.1.6. 逐笔成交（沪深合并）</a></li></ul></li><li class="topic-item"><a href="#312-%E8%82%A1%E7%A5%A8%E6%97%A5-k-%E7%BA%BF" data-tocid="312-股票日-k-线">3.1.2. 股票日 K 线</a></li><li class="topic-item"><a href="#313-%E8%82%A1%E7%A5%A8%E5%88%86%E9%92%9F-k-%E7%BA%BF" data-tocid="313-股票分钟-k-线">3.1.3. 股票分钟 K 线</a></li></ul></li><li class="topic-item"><a href="#32-%E6%9C%9F%E6%9D%83%E6%95%B0%E6%8D%AE" data-tocid="32-期权数据">3.2. 期权数据</a><ul><li class="topic-item"><a href="#321-%E6%9C%9F%E6%9D%83%E5%BF%AB%E7%85%A7" data-tocid="321-期权快照">3.2.1. 期权快照</a></li></ul></li><li class="topic-item"><a href="#33-%E6%9C%9F%E8%B4%A7%E6%95%B0%E6%8D%AE" data-tocid="33-期货数据">3.3. 期货数据</a><ul><li class="topic-item"><a href="#331-%E6%9C%9F%E8%B4%A7%E5%BF%AB%E7%85%A7" data-tocid="331-期货快照">3.3.1. 期货快照</a></li><li class="topic-item"><a href="#332-%E6%9C%9F%E8%B4%A7%E6%97%A5-k-%E7%BA%BF" data-tocid="332-期货日-k-线">3.3.2. 期货日 K 线</a></li><li class="topic-item"><a href="#333-%E6%9C%9F%E8%B4%A7%E5%88%86%E9%92%9F-k-%E7%BA%BF" data-tocid="333-期货分钟-k-线">3.3.3. 期货分钟 K 线</a></li></ul></li><li class="topic-item"><a href="#34-%E9%93%B6%E8%A1%8C%E9%97%B4%E5%80%BA%E5%88%B8" data-tocid="34-银行间债券">3.4. 银行间债券</a><ul><li class="topic-item"><a href="#341-x-bond-%E6%8A%A5%E4%BB%B7" data-tocid="341-x-bond-报价">3.4.1. X-Bond 报价</a></li><li class="topic-item"><a href="#342-x-bond-%E6%88%90%E4%BA%A4" data-tocid="342-x-bond-成交">3.4.2. X-Bond 成交</a></li><li class="topic-item"><a href="#343-esp-%E6%8A%A5%E4%BB%B7" data-tocid="343-esp-报价">3.4.3. ESP 报价</a></li><li class="topic-item"><a href="#344-esp-%E6%88%90%E4%BA%A4" data-tocid="344-esp-成交">3.4.4. ESP 成交</a></li><li class="topic-item"><a href="#345-qb-%E6%8A%A5%E4%BB%B7" data-tocid="345-qb-报价">3.4.5. QB 报价</a></li><li class="topic-item"><a href="#346-qb-%E6%88%90%E4%BA%A4" data-tocid="346-qb-成交">3.4.6. QB 成交</a></li></ul></li></ul></li><li class="topic-item"><a href="#4-%E5%9B%A0%E5%AD%90%E5%BA%93%E7%AA%84%E8%A1%A8%E5%AD%98%E5%82%A8%E6%96%B9%E6%A1%88%E5%AE%9E%E8%B7%B5" data-tocid="4-因子库窄表存储方案实践">4. 因子库窄表存储方案实践</a><ul><li class="topic-item"><a href="#41-%E6%97%A5%E9%A2%91%E5%9B%A0%E5%AD%90%E5%BA%93" data-tocid="41-日频因子库">4.1. 日频因子库</a></li><li class="topic-item"><a href="#42-%E5%8D%8A%E5%B0%8F%E6%97%B6%E9%A2%91%E5%9B%A0%E5%AD%90%E5%BA%93" data-tocid="42-半小时频因子库">4.2. 半小时频因子库</a></li><li class="topic-item"><a href="#43-%E5%8D%81%E5%88%86%E9%92%9F%E9%A2%91%E5%9B%A0%E5%AD%90%E5%BA%93" data-tocid="43-十分钟频因子库">4.3. 十分钟频因子库</a></li><li class="topic-item"><a href="#44-%E5%88%86%E9%92%9F%E9%A2%91%E5%9B%A0%E5%AD%90%E5%BA%93" data-tocid="44-分钟频因子库">4.4. 分钟频因子库</a></li><li class="topic-item"><a href="#45-%E7%A7%92%E9%92%9F%E9%A2%91%E5%9B%A0%E5%AD%90%E5%BA%93" data-tocid="45-秒钟频因子库">4.5. 秒钟频因子库</a></li><li class="topic-item"><a href="#46-level-2-%E5%BF%AB%E7%85%A7%E9%A2%91%E5%9B%A0%E5%AD%90%E5%BA%93" data-tocid="46-level-2-快照频因子库">4.6. Level-2 快照频因子库</a></li><li class="topic-item"><a href="#47-%E9%80%90%E7%AC%94%E9%A2%91%E5%9B%A0%E5%AD%90%E5%BA%93" data-tocid="47-逐笔频因子库">4.7. 逐笔频因子库</a></li><li class="topic-item"><a href="#48-%E6%9C%9F%E8%B4%A7-500ms-%E9%A2%91%E5%9B%A0%E5%AD%90%E5%BA%93" data-tocid="48-期货-500ms-频因子库">4.8. 期货 500ms 频因子库</a></li></ul></li><li class="topic-item"><a href="#5-%E7%BB%93%E8%AF%AD" data-tocid="5-结语">5. 结语</a></li><li class="topic-item"><a href="#6-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E4%B8%8E%E8%A7%A3%E7%AD%94faq" data-tocid="6-常见问题与解答faq">6. 常见问题与解答（FAQ）</a><ul><li class="topic-item"><a href="#61-%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E6%97%B6%E6%8A%A5%E9%94%99%E5%B7%B2%E7%BB%8F%E5%AD%98%E5%9C%A8%E9%87%8D%E5%90%8D%E5%BA%93%E8%A1%A8" data-tocid="61-创建数据库表时报错已经存在重名库表">6.1. 创建数据库表时报错：已经存在重名库表</a></li></ul></li></ul></div>
	                        	
                        	</div>
                        </nav>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
<title>Copyright</title><p><b> ©2025 浙江智臾科技有限公司 浙ICP备18048711号-3</b></p>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
    </body>
</html>