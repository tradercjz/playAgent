<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" data-whc_version="26.0">
    <head><link rel="shortcut icon" href="../favicon.ico"/><link rel="icon" href="../favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="本教程将介绍如何通过 Terraform 快速地在 AWS 部署 DolphinDB 单节点和高可用集群。 HashiCorp Terraform 是一款基础架构即代码工具，旨在实现 &#34;Write, Plan, and Create Infrastructure as Code&#34;。它通过配置文件来描述云资源的拓扑结构，包括虚拟机、存储账户和网络接口。Terraform ..."/><meta name="DC.rights.owner" content="(C) 版权 2025"/><meta name="copyright" content="(C) 版权 2025"/><meta name="generator" content="DITA-OT"/><meta name="DC.type" content="topic"/><meta name="DC.coverage" content=""/><meta name="DC.relation" content="../deploy/deploy_intro.html"/><meta name="prodname" content="DolphinDB"/><meta name="brand" content="DolphinDB"/><meta name="DC.creator" content="DolphinDB"/><meta name="DC.publisher" content="DDB N/A DDB 200"/><meta name="DC.format" content="HTML5"/><meta name="DC.identifier" content="使用-terraform-在云上部署-dolphindb"/><title>使用 Terraform 在云上部署 DolphinDB</title><!--  Generated with Oxygen version 26.0, build number 2024012323.  --><meta name="wh-path2root" content="../"/><meta name="wh-toc-id" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;?workdir /tmp/temp20250305183303418/tutorials?&gt;&lt;?workdir-uri file:/tmp/temp20250305183303418/tutorials/?&gt;&lt;?path2project ../?&gt;&lt;?path2project-uri ../?&gt;&lt;?path2rootmap-uri ../?&gt;&lt;topic xmlns:dita-ot=&#34;http://dita-ot.sourceforge.net/ns/201007/dita-ot&#34; xmlns:ditaarch=&#34;http://dita.oasis-open.org/architecture/2005/&#34; class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;使用-terraform-在云上部署-dolphindb&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;使用 Terraform 在云上部署 DolphinDB&lt;/title&gt;&lt;prolog class=&#34;- topic/prolog &#34;&gt;&lt;author class=&#34;- topic/author &#34; xtrc=&#34;author:1;12:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/author&gt;&lt;publisherinformation class=&#34;- topic/publisher bookmap/publisherinformation &#34; xtrc=&#34;publisherinformation:1;14:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:1;15:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;printlocation class=&#34;- topic/data bookmap/printlocation &#34; xtrc=&#34;printlocation:1;16:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;N/A&lt;/printlocation&gt; &lt;published class=&#34;- topic/data bookmap/published &#34; xtrc=&#34;published:1;17:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:2;18:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;publishtype class=&#34;- topic/data bookmap/publishtype &#34; value=&#34;HTML&#34; xtrc=&#34;publishtype:1;19:44&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;revisionid class=&#34;- topic/ph bookmap/revisionid &#34; xtrc=&#34;revisionid:1;20:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;200&lt;/revisionid&gt; &lt;summary class=&#34;- topic/ph bookmap/summary &#34; xtrc=&#34;summary:1;22:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:1;23:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/published&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:2;25:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/publisherinformation&gt;&lt;metadata class=&#34;- topic/metadata &#34;&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:2;39:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:1;28:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;category class=&#34;- topic/category &#34; xtrc=&#34;category:1;29:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;prodinfo class=&#34;- topic/prodinfo &#34; xtrc=&#34;prodinfo:1;34:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;prodname class=&#34;- topic/prodname &#34; xtrc=&#34;prodname:1;35:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/prodname&gt; &lt;brand class=&#34;- topic/brand &#34; xtrc=&#34;brand:1;36:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/brand&gt; &lt;/prodinfo&gt;&lt;/metadata&gt;&lt;/prolog&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:1;3:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;本教程将介绍如何通过 Terraform 快速地在 AWS 部署 DolphinDB 单节点和高可用集群。&lt;/p&gt;&lt;/body&gt;&lt;related-links class=&#34;- topic/related-links &#34;&gt;&lt;linkpool class=&#34;- topic/linkpool &#34; xtrc=&#34;topicref:13;34:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_deploy.ditamap&#34;&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;../deploy/deploy_intro.dita&#34; mapclass=&#34;- map/topicref bookmap/chapter &#34; role=&#34;parent&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:1;5:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_deploy.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot usertext?&gt;安装部署&lt;/linktext&gt;&lt;?ditaot usershortdesc?&gt;&lt;desc class=&#34;- topic/desc &#34;&gt;如何在不同的场景中部署 DolphinDB&lt;/desc&gt;&lt;/link&gt;&lt;/linkpool&gt;&lt;/related-links&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;terraform-概述&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:2;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:2;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;Terraform 概述&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:2;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:2;7:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://www.terraform.io/&#34; scope=&#34;external&#34; xtrc=&#34;xref:1;7:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;?ditaot usertext?&gt;HashiCorp Terraform&lt;/xref&gt; 是一款基础架构即代码工具，旨在实现 &#34;Write, Plan, and Create Infrastructure as Code&#34;。它通过配置文件来描述云资源的拓扑结构，包括虚拟机、存储账户和网络接口。Terraform 几乎支持市面上所有的云服务，能够通过代码管理 IT 资源，并自动化部署资源，从而避免手动部署可能引发的错误。此外，Terraform 的命令行接口（CLI）简化了将配置文件部署到 AWS 或其他云平台的过程。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:3;9:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;Terraform 包含以下功能：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:1;11:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:1;11:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;基础设施即代码：Terraform 使用特定的配置语言 HCL(Hashicorp Configuration Language) 来描述基础设施资源。这使得 Terraform 能够以代码的形式描述解决方案或基础架构，并实现对它们的版本控制和管理。同时，通用的解决方案和基础架构可以以模板的形式便捷地进行共享和复用。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:2;12:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;执行计划：在执行 Terraform 代码之前，可以通过 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:1;12:32&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;terraform plan&lt;/codeph&gt; 命令解析 Terraform 模板，并生成一个可执行的计划。这个计划包含了当前模板需要创建或变更的资源及其属性。用户预览执行计划以确认模板的内容是否正确。在确认无误后，通过 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:2;12:136&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;terraform apply&lt;/codeph&gt; 命令来执行计划，以完成所定义资源的创建或变更。这个过程允许在实际操作之前对变更内容进行审核和验证。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:3;13:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;资源拓扑：Terraform 根据模板中的定义来构建资源拓扑图。Terraform 并行创建无依赖关系的资源，以提高执行效率。而对于存在依赖关系的资源，Terraform 则优先执行被依赖的资源，以确保创建或修改资源的顺序正确。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:4;14:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;自动化变更：Terraform 拥有强大的自动化变更功能。通过 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:3;14:35&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;terraform apply&lt;/codeph&gt; 命令，可以实现复杂资源的无缝变更。Terraform 不仅简化了创建、修改和删除等变更操作，还保持了计划的一致性。此外，Terraform 还提供了回滚和恢复机制，能够有效地减少人为错误，提高系统的可靠性和稳定性。&lt;/li&gt;&lt;/ul&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/cloud_deployment_with_terraform/01.png&#34; width=&#34;600&#34; xtrc=&#34;image:1;16:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34; dita-ot:image-width=&#34;2038&#34; dita-ot:image-height=&#34;1773&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;使用前提&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:3;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:3;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;使用前提&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:3;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;准备环境&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:4;21:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:4;21:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;准备环境&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:4;21:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:4;23:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;在进行 Terraform 相关操作之前，请确保完成以下准备工作：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:2;25:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:5;25:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;安装 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://developer.hashicorp.com/terraform/tutorials/aws-get-started/install-cli&#34; scope=&#34;external&#34; xtrc=&#34;xref:2;25:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;?ditaot usertext?&gt;Terraform CLI&lt;/xref&gt;（版本 1.2.0 及以上）&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:6;26:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;安装 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html&#34; scope=&#34;external&#34; xtrc=&#34;xref:3;26:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;?ditaot usertext?&gt;AWS CLI&lt;/xref&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:7;27:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;拥有 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://aws.amazon.com/free&#34; scope=&#34;external&#34; xtrc=&#34;xref:4;27:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;?ditaot usertext?&gt;AWS account&lt;/xref&gt; 和 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html&#34; scope=&#34;external&#34; xtrc=&#34;xref:5;27:51&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;?ditaot usertext?&gt;associated credentials&lt;/xref&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:5;29:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;完成上述步骤后，执行以下命令，验证环境配置的正确性：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:1;31:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;$ terraform -help Usage：terraform [-version] [-help] &amp;lt;command&amp;gt; [args] The available commands for execution are listed below. The most common, useful commands are shown first, followed by less common or more advanced commands. If you're just getting started with Terraform, stick with the common commands. For the other commands, please read the help and docs before usage. #... $ aws --version aws-cli/2.10.0 Python/3.11.2 Linux/4.14.133-113.105.amzn2.x86_64 botocore/2.4.5&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;设置-aws-凭据&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:5;46:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:5;46:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;设置 AWS 凭据&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:5;46:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:6;48:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;在使用 Terraform 前，AWS 会对 Terraform 进行身份验证，需要设置 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:4;48:46&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;AWS_ACCESS_KEY_ID&lt;/codeph&gt; 和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:5;48:68&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;AWS_SECRET_ACCESS_KEY&lt;/codeph&gt; 两个环境变量。其中 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:6;48:102&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;AWS_ACCESS_KEY_ID&lt;/codeph&gt; 用来设置 Access Key；&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:7;48:138&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;AWS_SECRET_ACCESS_KEY&lt;/codeph&gt; 用来设置 Secret Key。在 Linux 或 macOS 环境下，通过 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:8;48:201&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;export &lt;/codeph&gt; 命令进行设置：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:2;50:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;export AWS_ACCESS_KEY_ID=YourAccessKeyId export AWS_SECRET_ACCESS_KEY=YourSecretAccessKey&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:7;55:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;在 Windows 环境下，通过 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:9;55:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;set&lt;/codeph&gt; 命令进行设置：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:3;57:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;set AWS_ACCESS_KEY_ID=YourAccessKeyId set AWS_SECRET_ACCESS_KEY=YourSecretAccessKey&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;部署-dolphindb-单节点&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:6;62:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:6;62:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;部署 DolphinDB 单节点&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:6;62:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;创建-terraform-项目&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:7;64:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:7;64:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;创建 Terraform 项目&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:7;64:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:8;66:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;创建一个 Terraform 项目文件夹，以下是项目文件夹的结构：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:4;68:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;project_directory |-- main.tf |-- variables.tf |-- files.tfvars&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:9;75:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;其中，每个文件的作用为：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:3;77:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:8;77:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:1;77:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;main.tf&lt;/b&gt;： Terraform 项目的入口文件，其中定义了基础设施资源的配置和参数。用户通过编写 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:1;77:59&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;main.tf&lt;/i&gt; 文件来定义要创建的云资源、网络设置以及它们之间的关系等。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:9;78:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:2;78:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;variables.tf&lt;/b&gt;：用于定义和声明 Terraform 配置中使用的变量。变量是可以在 Terraform 代码中引用的参数，有助于提高代码的复用性和灵活性。变量可以有不同的类型，如字符串、数字、布尔值、列表和字典等。用户可以通过 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:2;78:126&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;variables.tf&lt;/i&gt; 来定义项目中需要的各种参数，如区域、实例类型、密钥等。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:10;79:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:3;79:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvars&lt;/b&gt;：用于存储 Terraform 配置中所使用的变量的值，例如指定区域、实例类型、密钥等。这些变量可以在 Terraform 模块中定义，并且在部署时可以通过 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:3;79:98&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvars&lt;/i&gt; 文件来指定它们的具体取值。这种做法使得在不同环境中使用相同的 Terraform 配置变得更加灵活，因为可以通过不同的 .tfvars 文件来为不同环境提供不同的变量值，而无需修改实际的 Terraform 配置文件。&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;配置-maintf-文件&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:8;81:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:8;81:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;配置 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:4;81:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;main.tf&lt;/i&gt; 文件&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:8;81:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:10;83:2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;以下展示了 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:5;83:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;main.tf&lt;/i&gt; 文件的部分内容，完整代码请参考本教程结尾附件部分：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:5;85:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;# 声明 Terraform 提供者及其版本 terraform { ...... } # 配置 AWS 提供者 provider &#34;aws&#34; { ...... } # 创建 AWS 实例资源（dolphindb_server） resource &#34;aws_instance&#34; &#34;dolphindb_server&#34; { ...... } # 创建 AWS EBS 卷资源（data） resource &#34;aws_ebs_volume&#34; &#34;data&#34; { ...... } # 创建 AWS EBS 卷附加资源（data_attachment） resource &#34;aws_volume_attachment&#34; &#34;data_attachment&#34; { ...... } # 创建 null_resource（mount_data_volume），用于在实例上挂载数据卷 resource &#34;null_resource&#34; &#34;mount_data_volume&#34; { ...... } &lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:11;118:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;以上代码实现的具体内容为：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:1;120:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:11;120:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;在已有的 VPC 和子网中生成 1 个 EC2 和 1 个 EBS 卷&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:12;121:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;将 EBS 挂载到 EC2 上&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:13;122:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;下载 DolphinDB&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:14;123:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;修改 DolphinDB 的配置文件和证书，并启动单节点&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;配置-variablestf-文件&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:9;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:9;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;配置 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:6;125:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;variables.tf&lt;/i&gt; 文件&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:9;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:12;127:2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;以下展示了 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:7;127:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;variables.tf&lt;/i&gt; 文件的部分内容，完整代码请参考本教程结尾附件部分：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:6;129:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;variable &#34;region&#34; { type = string } variable &#34;instance_name&#34; { description = &#34;name of EC2&#34; type = string default = &#34;TestDolphinDBServerInstance&#34; } # EC2 实例的其他参数内容已省略... variable &#34;ddbversion&#34; { description = &#34;version of DolphinDB to install&#34; type = string } variable &#34;dolphindb_cfg_content&#34; { # 替换为您的dolphindb.cfg内容 type=string } variable &#34;replace_dolphindb_lic&#34; { description = &#34;whether to replace dolphindb.lic&#34; type = bool default = true } variable &#34;dolphindb_lic_content&#34; { type=string } &lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:13;164:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;该文件记录配置 DolphinDB 单节点所需要的参数定义说明如下：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:2;166:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:15;166:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;region：必填项，string 类型，要创建的 EC2 所在的 region，比如 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:10;166:48&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;us-west-2&lt;/codeph&gt;。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:16;167:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;instance_name：选填项，string 类型，创建的 EC2 的名字，默认为 TestDolphinDBServerInstance。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:17;168:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;ami_id：选填项，string 类型，EC2 使用的 AMI 的 ID。默认为 ami-0fd48c6031f8700df （AWS 上的 centOS 7 镜像），该镜像包含了启动实例所需的操作系统和应用程序。可以在 AWS 公共 AMI 页面查找需要的 AMI ID。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:18;169:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;instance_type：选填项，string 类型，EC2 的机器类型，默认为 t2.micro。可以根据需求，在 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://aws.amazon.com/ec2/instance-types/&#34; scope=&#34;external&#34; xtrc=&#34;xref:6;169:64&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;?ditaot usertext?&gt;EC2 实例类型&lt;/xref&gt; 页面选择其他实例类型。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:19;170:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;subnet_id：必选项，string 类型，EC2 将处于的子网 ID。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:20;171:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;key_name：必选项，string 类型，用来登录 EC2 的密钥对。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:21;172:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;volume_size：选填项，number 类型，root volume 的大小，默认为 10（单位为 GB）。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:22;173:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;volume_type：选填项，string 类型，root volume 的类型，默认为 gp3，其他可选项包括 gp2, io1, st1, sc1 等。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:23;174:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;az：必填项，string 类型，新建 EBS 所处的可用区。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:24;175:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;datavolume_type：选填项，string 类型，新建 EBS 的类型，默认为 gp3，其他可选项包括 gp2, io1, st1, sc1 等。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:25;176:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;datavolume_size：选填项，number 类型，新建 EBS 的大小，默认为 100 (单位为 GB)。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:26;177:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;destination：选填项，string 类型，新建 EBS 在 EC2 上的挂载点的绝对路径，默认为 /data。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:27;178:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;attachment_device_name：选填项，string 类型，新建 EBS 挂载在 EC2 上的设备名称，默认为 /dev/xvdb。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:28;179:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;key_location：必填项，string 类型，密钥对文件的绝对路径。为了将 EBS 挂载到指定挂载点，需要通过 SSH 连接到 EC2，所以需要提供登录 EC2 的密钥对文件的绝对路径。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:29;180:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;ddb_username：选填项，string 类型，EC2 的用户名称。默认为 centos。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:30;181:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;package_manager_name：选填项，string 类型，包管理器的名称。例如，RHEL 系列的包管理器名为 yum， DEBIAN 系列的包管理器名为 apt-get。默认为 yum。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:31;182:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;security_group_ids：必填项，list(string) 类型，安全组 id。值在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:8;182:55&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvar&lt;/i&gt; 中定义。注意，DolphinDB 单节点默认使用 8848 作为端口，所以 EC2 所使用的安全组的 inbound rules 里必须允许外界访问 8848 端口。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:32;183:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;ddbversion：必填项，string 类型，DolphinDB 的版本。可在 DolphinDB 官网查看最新版本。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:33;184:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;dolphindb_cfg_content：选填项，string 类型，DolphinDB 配置文件。值在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:9;184:59&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvar&lt;/i&gt; 中定义。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:34;185:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;replace_dolphindb_lic：选填项，bool 类型，是否替换证书。默认为 true，表示替换证书。若设置为 false，则不替换，使用社区版证书。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:35;186:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;dolphindb_lic_content：必填项，bool 类型，证书内容。值在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:10;186:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvar&lt;/i&gt; 中定义。&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;配置-filestfvars-文件&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:10;188:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:10;188:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;配置 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:11;188:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvars&lt;/i&gt; 文件&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:10;188:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:14;190:2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;以下展示了 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:12;190:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvars&lt;/i&gt; 文件的部分内容，完整代码请参考本教程结尾附件部分：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:7;192:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;dolphindb_cfg_content= &amp;lt;&amp;lt;EOF localSite=localhost:8848:local8848 mode=single maxMemSize=16 maxConnections=512 workerNum=4 localExecutors=3 maxBatchJobWorker=4 dataSync=1 OLAPCacheEngineSize=2 TSDBCacheEngineSize=1 newValuePartitionPolicy=add maxPubConnections=64 subExecutors=4 perfMonitoring=true lanCluster=0 EOF dolphindb_lic_content= &amp;lt;&amp;lt;EOF ...... EOF security_group_ids=[&amp;lt;your security group ids&amp;gt;]&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:15;218:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:13;218:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvars&lt;/i&gt; 文件是记录 Terraform 变量的文件，其中包含了一些关键配置项。以下是对每个变量的简要说明：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:3;220:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:36;220:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;dolphindb_cfg_content：DolphinDB 配置文件内容，包含了 DolphinDB 服务器的配置参数。如果需要详细的配置参数信息，可以参考 DolphinDB 官方配置说明：&lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.dolphindb.cn/zh/db_distr_comp/cfg/para_cfg.html&#34; scope=&#34;external&#34; xtrc=&#34;xref:7;220:102&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;?ditaot usertext?&gt;参数配置&lt;/xref&gt;。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:37;221:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;dolphindb_lic_content：DolphinDB 的证书内容，用于许可验证。可在这里配置社区或企业版 license。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:38;222:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;security_group_ids：安全组 ID，用于定义 EC2 实例的入站和出站流量规则。&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;执行-terraform-命令&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:11;224:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:11;224:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;执行 Terraform 命令&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:11;224:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:16;226:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;通过终端进入 Terraform 项目文件夹：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:8;228:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;cd /path/to/Dolphindb-Terraform&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:17;232:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;初始化目录：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:9;234:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;terraform init&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:18;238:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;部署实例，可以根据实际的资源和需求来填写 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:14;238:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;variables.tf&lt;/i&gt; 文件中定义的变量：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:10;240:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;terraform apply -var &#34;region=&amp;lt;your_region&amp;gt;&#34; -var &#34;subnet_id=&amp;lt;your_subnet_id&amp;gt;&#34; -var &#34;key_name=&amp;lt;your_key_pair_name&amp;gt;&#34; -var &#34;ddbversion=2.00.10.8&#34; -var &#34;az=&amp;lt;your_az&amp;gt;&#34; -var &#34;key_location=&amp;lt;absolute_path_of_your_key_pair&amp;gt;&#34; -var-file=&#34;files.tfvars&#34;&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:19;246:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;按照提示输入 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:11;246:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;yes&lt;/codeph&gt; 确认创建资源。等待 Terraform 完成部署。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;登录-web-管理界面验证节点正确运行&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:12;248:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:12;248:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;登录 Web 管理界面验证节点正确运行&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:12;248:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:20;250:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;在浏览器中输入部署服务器 IP 地址和部署端口号（默认是 8848）。若可以打开 Web 管理界面，则表示 DolphinDB 单节点运行正常。打开后的 Web 管理界面如下，以管理员身份（默认账号：admin，默认密码：123456）进行登录。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/cloud_deployment_with_terraform/02.png&#34; placement=&#34;break&#34; xtrc=&#34;image:2;252:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34; dita-ot:image-width=&#34;1415&#34; dita-ot:image-height=&#34;772&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:1;252:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;02&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;dolphindb-高可用集群部署&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:13;254:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:13;254:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;DolphinDB 高可用集群部署&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:13;254:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:21;256:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;本教程示例集群的部署架构图如下：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/cloud_deployment_with_terraform/03.png&#34; width=&#34;600&#34; xtrc=&#34;image:3;258:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34; dita-ot:image-width=&#34;1504&#34; dita-ot:image-height=&#34;1184&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:22;260:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;请注意该 IP 仅用于示例，实际 IP 由设置的 subnet 以及部署 EC2 实例时自动生成。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:23;262:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;部署高可用集群前的要求和准备：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:4;264:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:39;264:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://dolphindb.cn/product#downloads&#34; scope=&#34;external&#34; xtrc=&#34;xref:8;264:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;?ditaot usertext?&gt;申请企业版 license&lt;/xref&gt;：因为集群超过了社区版试用授权许可节点数的限制，所以必须申请企业版 license。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:40;265:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;部署了数据节点或者计算节点的服务器必须同时部署 1 个代理节点，以便用于启动和关闭该服务器上的数据节点或计算节点。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:41;266:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;在 AWS 中创建 1 个 VPC，其中至少包含 3 个子网。接下来将在 1 个 VPC 的不同子网下分别部署 DolphinDB 集群，以构建 DolphinDB 高可用集群。&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;创建-terraform-项目-1&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:14;268:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:14;268:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;创建 Terraform 项目&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:14;268:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:24;270:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;创建一个 Terraform 项目文件夹，以下是项目文件夹的结构：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:11;272:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;project_directory |-- main.tf |-- variables.tf |-- files.tfvars |-- output.tf&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:25;280:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;其中，每个文件的作用为：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:5;282:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:42;282:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:4;282:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;main.tf&lt;/b&gt;：Terraform 项目的入口文件，其中定义了基础设施资源的配置和参数。用户通过编写 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:15;282:58&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;main.tf&lt;/i&gt; 文件来定义要创建的云资源、网络设置等，以及它们之间的关系。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:43;283:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:5;283:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;variables.tf&lt;/b&gt;：用于定义和声明 Terraform 配置中使用的变量。变量是可以在 Terraform 代码中引用的参数，有助于提高代码的复用性和灵活性。变量可以有不同的类型，如字符串、数字、布尔值、列表和字典等。用户可以通过 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:16;283:126&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;variables.tf&lt;/i&gt; 来定义项目中需要的各种参数，如区域、实例类型、密钥等。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:44;284:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:6;284:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvars&lt;/b&gt;：用于存储 Terraform 配置中所使用的变量的值，例如指定区域、实例类型、密钥等。这些变量可以在 Terraform 模块中定义，并且在部署时可以通过 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:17;284:98&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvars&lt;/i&gt; 文件来指定它们的具体取值。这种做法使得在不同环境中使用相同的 Terraform 配置变得更加灵活，因为可以通过不同的 .tfvars 文件来为不同环境提供不同的变量值，而无需修改实际的 Terraform 配置文件。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:45;285:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:7;285:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;output.tf&lt;/b&gt;：用于定义 Terraform 部署完成后需要输出的信息。在这个文件中，你可以指定需要输出的资源属性，比如 IP 地址、域名等，这样在部署完成后，你就可以方便地获取这些信息以便后续的操作或者其他系统使用。&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;配置-maintf-文件-1&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:15;287:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:15;287:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;配置 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:18;287:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;main.tf&lt;/i&gt; 文件&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:15;287:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:26;289:2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;以下展示了 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:19;289:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;main.tf&lt;/i&gt; 文件的部分内容，完整代码请参考本教程结尾附件部分：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:12;291:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;# 声明 Terraform 提供者及其版本 terraform { ...... } # 配置 AWS 提供者 provider &#34;aws&#34; { ...... } # 创建 AWS 实例资源（ddb_p1） resource &#34;aws_instance&#34; &#34;ddb_p1&#34; { ...... } # 创建其他两个 AWS 实例资源（ddb_p2、ddb_p3），与 ddb_p1 的配置类似 # ...... # 创建 AWS EBS 卷资源（data_p1） resource &#34;aws_ebs_volume&#34; &#34;data_p1&#34; { ...... } # 创建其他两个 AWS EBS 卷资源（data_p2、data_p3），与 data_p1 的配置类似 # ...... # 创建 AWS EBS 卷附加资源（data_attachment_p1） resource &#34;aws_volume_attachment&#34; &#34;data_attachment_p1&#34; { ...... } # 创建其他两个 AWS EBS 卷附加资源，与 data_attachment_p1 配置类似 # ...... # 创建 null_resource（mount_data_volume_p1），用于在实例上挂载数据卷 resource &#34;null_resource&#34; &#34;mount_data_volume_p1&#34; { ...... } # 创建其他两个 null_resource，用于在 ddb_p2 和 ddb_p3 上挂载数据卷，配置 DolphinDB 等，与 mount_data_volume_p1 的配置类似 # ......&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:27;335:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;以上代码实现的具体内容为：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:4;337:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:46;337:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;在已有的 VPC 和子网中生成 3 个 EC2 和 3 个 EBS 卷&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:47;338:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;分别将 EBS 挂载到 EC2 上&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:48;339:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;分别下载 DolphinDB&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:49;340:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;修改 DolphinDB 的配置文件和证书，并启动高可用集群&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;配置-variablestf-文件-1&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:16;342:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:16;342:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;配置 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:20;342:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;variables.tf&lt;/i&gt; 文件&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:16;342:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:28;344:2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;以下展示了 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:21;344:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;variables.tf&lt;/i&gt; 文件的部分内容，完整代码请参考本教程结尾附件部分：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:13;346:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;# EC2 实例的其他参数内容已省略... variable &#34;ddbversion&#34; { description = &#34;version of DolphinDB to install&#34; type = string } variable &#34;replace_dolphindb_lic&#34; { description = &#34;whether to replace dolphindb.lic&#34; type = bool default = true } variable &#34;dolphindb_lic_content&#34; { type = string } variable &#34;cluster_nodes&#34; { type = string } variable &#34;cluster_cfg&#34; { type = string } variable &#34;controller_cfg_p1&#34; { type = string } variable &#34;agent_cfg_p1&#34; { type = string } # P2 P3 相关内容已省略...&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:29;383:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;该文件用于存放 DolphinDB 高可用集群配置所需要的参数定义，其中一部分参数与部署 DolphinDB 单节点时的参数含义相同，这里不再赘述，仅说明不同配置参数：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:5;385:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:50;385:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;subnet_id_p1：必选项，string 类型，P1 所在的 EC2 将处于的子网 ID。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:51;386:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;subnet_id_p2：必选项，string 类型，P2 所在的 EC2 将处于的子网 ID。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:52;387:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;subnet_id_p3：必选项，string 类型，P3 所在的 EC2 将处于的子网 ID。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:53;388:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;az_p1：必填项，string 类型，P1 新建 EBS 所处的可用区。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:54;389:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;az_p2：必填项，string 类型，P2 新建 EBS 所处的可用区。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:55;390:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;az_p3：必填项，string 类型，P3 新建 EBS 所处的可用区。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:56;391:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;ddbversion：必填项，string 类型，DolphinDB 的版本。可在 DolphinDB 官网查看最新版本。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:57;392:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;replace_dolphindb_lic：选填项，bool 类型，是否替换证书。默认为 true，表示替换证书。若设置为 false，则不替换，使用社区版证书。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:58;393:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;dolphindb_lic_content：必填项，bool 类型，证书内容。值在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:22;393:46&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvar&lt;/i&gt; 中定义。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:59;394:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;security_group_ids：必填项，list(string) 类型，安全组 id。值在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:23;394:54&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvar&lt;/i&gt; 中定义。注意，DolphinDB 使用 8800、8801、8802端口，所以 EC2 所使用的安全组的 inbound rules 里必须允许外界访问这些端口。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:60;395:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;cluster_nodes：选填项，string 类型，集群成员配置参数。值在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:24;395:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvar&lt;/i&gt; 中定义。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:61;396:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;cluster_cfg：选填项，string 类型，数据节点和计算节点配置变量。值在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:25;396:48&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvar&lt;/i&gt; 中定义。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:62;397:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;controller_cfg_p1：选填项，string 类型，P1 控制节点配置变量。值在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:26;397:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvar&lt;/i&gt; 中定义。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:63;398:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;agent_cfg_p1：选填项，string 类型，P1 代理节点配置变量。值在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:27;398:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvar&lt;/i&gt; 中定义。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:64;399:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;controller_cfg_p2：选填项，string 类型，P2 控制节点配置变量。值在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:28;399:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvar&lt;/i&gt; 中定义。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:65;400:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;agent_cfg_p2：选填项，string 类型，P2 代理节点配置变量。值在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:29;400:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvar&lt;/i&gt; 中定义。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:66;401:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;controller_cfg_p3：选填项，string 类型，P3 控制节点配置变量。值在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:30;401:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvar&lt;/i&gt; 中定义。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:67;402:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;agent_cfg_p3：选填项，string 类型，P3 代理节点配置变量数。值在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:31;402:48&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvar&lt;/i&gt; 中定义。&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;配置-filestfvars-文件-1&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:17;404:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:17;404:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;配置 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:32;404:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvars&lt;/i&gt; 文件&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:17;404:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:30;406:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:33;406:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvars&lt;/i&gt; 文件中添加以下内容：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:14;408:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;# 企业版 license dolphindb_lic_content = &amp;lt;&amp;lt;EOF EOF security_group_ids = [] cluster_nodes = &amp;lt;&amp;lt;EOF localSite,mode P1_PRI_IP:8800:controller1,controller P2_PRI_IP:8800:controller2,controller P3_PRI_IP:8800:controller3,controller P1_PRI_IP:8801:agent1,agent P1_PRI_IP:8802:datanode1,datanode P1_PRI_IP:8803:computenode1,computenode P2_PRI_IP:8801:agent2,agent P2_PRI_IP:8802:datanode2,datanode P2_PRI_IP:8803:computenode2,computenode P3_PRI_IP:8801:agent3,agent P3_PRI_IP:8802:datanode3,datanode P3_PRI_IP:8803:computenode3,computenode EOF cluster_cfg = &amp;lt;&amp;lt;EOF maxMemSize=32 maxConnections=512 workerNum=4 maxBatchJobWorker=4 OLAPCacheEngineSize=2 TSDBCacheEngineSize=2 newValuePartitionPolicy=add maxPubConnections=64 subExecutors=4 lanCluster=0 enableChunkGranularityConfig=true datanode1.publicName=P1_PUB_IP computenode1.publicName=P1_PUB_IP datanode2.publicName=P2_PUB_IP computenode2.publicName=P2_PUB_IP datanode3.publicName=P3_PUB_IP computenode3.publicName=P3_PUB_IP EOF controller_cfg_p1 = &amp;lt;&amp;lt;EOF mode=controller localSite=P1_PRI_IP:8800:controller1 dfsReplicationFactor=2 dfsReplicaReliabilityLevel=1 dataSync=1 workerNum=4 maxConnections=512 maxMemSize=8 dfsHAMode=Raft lanCluster=0 publicName=P1_PUB_IP EOF agent_cfg_p1 = &amp;lt;&amp;lt;EOF mode=agent localSite=P1_PRI_IP:8801:agent1 controllerSite=P1_PRI_IP:8800:controller1 sites=P1_PRI_IP:8801:agent1:agent,P1_PRI_IP:8800:controller1:controller,P2_PRI_IP:8800:controller2:controller,P3_PRI_IP:8800:controller3:controller workerNum=4 maxMemSize=4 lanCluster=0 EOF # P2 P3 相关内容已省略...&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:31;478:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:34;478:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvars&lt;/i&gt; 文件记录了 Terraform 的变量，其中包含了一些关键配置项。以下是对每个配置项的简要说明：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:6;480:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:68;480:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;dolphindb_lic_content：证书内容。这是 DolphinDB 的证书内容，用于许可验证。可在这里配置企业版license。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:69;481:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;security_group_ids：安全组 ID，用于定义 EC2 实例的入站和出站流量规则。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:70;482:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;cluster_nodes：集群成员配置参数。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:71;483:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;cluster_cfg：数据节点和计算节点配置参数。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:72;484:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;controller_cfg_p1：P1 控制节点配置参数。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:73;485:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;agent_cfg_p1：P1 代理节点配置参数。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:74;486:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;controller_cfg_p2：P2 控制节点配置参数。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:75;487:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;agent_cfg_p2：P2 代理节点配置参数。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:76;488:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;controller_cfg_p3：P3 控制节点配置参数。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:77;489:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;agent_cfg_p3：P3 代理节点配置参数。&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;配置-outputtf-文件&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:18;491:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:18;491:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;配置 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:35;491:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;output.tf&lt;/i&gt; 文件&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:18;491:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:32;493:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:36;493:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;output.tf&lt;/i&gt; 文件中添加以下内容：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:15;495:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;output &#34;public_ip_p1&#34; {   value = aws_instance.ddb_p1.public_ip } output &#34;private_ip_p1&#34; {   value = aws_instance.ddb_p1.private_ip } output &#34;public_ip_p2&#34; {   value = aws_instance.ddb_p2.public_ip } output &#34;private_ip_p2&#34; {   value = aws_instance.ddb_p2.private_ip } output &#34;public_ip_p3&#34; {   value = aws_instance.ddb_p3.public_ip } output &#34;private_ip_p3&#34; {   value = aws_instance.ddb_p3.private_ip }&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:33;521:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;这些参数会在集群部署完成后输出，下面是参数解释：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:7;523:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:78;523:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;public_ip_p1：p1 的公网 IP&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:79;524:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;private_ip_p1：p1 的私网 IP&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:80;525:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;public_ip_p2：p2 的公网 IP&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:81;526:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;private_ip_p2：p2 的私网 IP&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:82;527:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;public_ip_p3：p3 的公网 IP&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:83;528:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;private_ip_p3：p3 的私网 IP&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;执行-terraform-命令-1&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:19;530:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:19;530:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;执行 Terraform 命令&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:19;530:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:34;532:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;通过终端进入 Terraform 项目文件夹：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:16;534:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;cd /path/to/Dolphindb-Terraform&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:35;538:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;初始化目录：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:17;540:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;terraform init&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:36;544:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;部署实例，可以根据实际的资源和需求来填写 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:37;544:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;variables.tf&lt;/i&gt; 文件中定义的变量：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:18;546:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;terraform apply -var &#34;region=&amp;lt;your_region&amp;gt;&#34; -var &#34;subnet_id_p1=&amp;lt;your_subnet_id_p1&amp;gt;&#34; -var &#34;subnet_id_p2=&amp;lt;your_subnet_id_p2&amp;gt;&#34; -var &#34;subnet_id_p3=&amp;lt;your_subnet_id_p3&amp;gt;&#34; -var &#34;key_name=&amp;lt;your_key_pair_name&amp;gt;&#34; -var &#34;ddbversion=2.00.10.8&#34; -var &#34;az_p1=&amp;lt;your_az_p1&amp;gt;&#34; -var &#34;az_p2=&amp;lt;your_az_p2&amp;gt;&#34; -var &#34;az_p3=&amp;lt;your_az_p3&amp;gt;&#34; -var &#34;key_location=&amp;lt;absolute_path_of_your_key_pair&amp;gt;&#34; -var-file=&#34;files.tfvars&#34;&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:37;550:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;按照提示输入 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:12;550:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;yes&lt;/codeph&gt; 确认创建资源。等待 Terraform 完成部署。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;通过-web-管理界面检查-dolphindb-节点运行&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:20;552:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:20;552:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;通过 Web 管理界面检查 DolphinDB 节点运行&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:20;552:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:38;554:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;可以通过 Web 管理界面启动或关闭数据节点和计算节点，以及修改集群的配置。在浏览器中输入任一控制节点的 IP 地址和端口号即可进入 Web 管理界面，例如，P2 上控制节点的 IP 为 10.0.0.81，端口号为 8800，所以访问地址为 10.0.0.81:8800。访问后若出现如下提示，表明当前控制节点不是 Leader 节点，点击确定即可自动跳转至 Leader 节点：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/cloud_deployment_with_terraform/04.png&#34; placement=&#34;break&#34; xtrc=&#34;image:4;556:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34; dita-ot:image-width=&#34;458&#34; dita-ot:image-height=&#34;173&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:2;556:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;04&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:39;560:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;打开后的 Web 管理界面如下。以管理员身份（默认账号：admin，默认密码：123456）登录后，勾选数据节点和计算节点，再点击启动（关闭）按键即可启动（关闭）相应的数据节点和计算节点：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/cloud_deployment_with_terraform/05.png&#34; placement=&#34;break&#34; xtrc=&#34;image:5;562:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34; dita-ot:image-width=&#34;1265&#34; dita-ot:image-height=&#34;312&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:3;562:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;05&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:40;566:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;刷新页面后可看到对应的数据节点和计算节点已启动，如下图所示：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/cloud_deployment_with_terraform/06.png&#34; placement=&#34;break&#34; xtrc=&#34;image:6;568:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34; dita-ot:image-width=&#34;1265&#34; dita-ot:image-height=&#34;297&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:4;568:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;06&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;常见问题解答faq&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:21;570:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:21;570:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;常见问题解答(FAQ)&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:21;570:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;如何为创建的实例配置-ssh-登录&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:22;572:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:22;572:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;如何为创建的实例配置 SSH 登录？&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:22;572:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:41;574:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;在 AWS EC2 中，&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:13;574:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;key_name&lt;/codeph&gt; 参数用于指定启动实例时要使用的密钥对的名称。密钥对用于对实例进行身份验证，从而允许用户通过 SSH 登录到实例。以下是详细的步骤：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:8;576:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:84;576:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:42;576:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;创建密钥对：&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:43;578:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;a. 在 AWS 控制台中导航到 EC2。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:44;580:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;b. 在左侧导航栏中，选择 &#34;Key Pairs&#34;（密钥对）。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:45;582:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;c. 单击 &#34;Create Key Pair&#34;（创建密钥对）。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:46;584:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;d. 输入密钥对的名称，然后选择 &#34;Create&#34;（创建）。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:47;586:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;e. 保存生成的私钥文件（通常以 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:14;586:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;.pem&lt;/codeph&gt; 结尾）。&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:85;588:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:48;588:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;将私钥文件添加到 SSH 代理：&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:49;590:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;在本地计算机上，使用以下命令将私钥添加到 SSH 代理。请将 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:15;590:35&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;/path/to/your-key.pem&lt;/codeph&gt; 替换为第一步中保存的私钥文件的实际路径。&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:19;592:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;ssh-add /path/to/your-key.pem&lt;/codeblock&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:9;596:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:86;596:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;设置密钥对名称和文件位置&lt;/li&gt;&lt;/ol&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:20;598:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;terraform apply // 其他变量... -var &#34;key_name=&amp;lt;your_key_pair_name&amp;gt;&#34; -var &#34;key_location=&amp;lt;absolute_path_of_your_key_pair&amp;gt;&#34;&lt;/codeblock&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:10;602:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:87;602:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;SSH 登录到实例：&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:50;604:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;使用以下命令通过 SSH 登录到 EC2 实例。请将 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:16;604:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;your-instance-ip&lt;/codeph&gt; 替换为实际的 IP 地址。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:21;606:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;ssh -i /path/to/your-key.pem ec2-user@your-instance-ip&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:51;610:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;注意：ec2-user 是 Amazon Linux AMI 的默认用户名。请根据实际使用的 AMI 修改用户名，例如，若 AMI 是Ubuntu，则用户名填 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:17;610:81&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;ubuntu&lt;/codeph&gt;。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;如何更新软件授权许可&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:23;612:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:23;612:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;如何更新软件授权许可&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:23;612:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:52;614:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:38;614:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;files.tfvars&lt;/i&gt; 文件中，将 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:18;614:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;dolphindb_lic_content&lt;/codeph&gt; 变量的内容替换为企业版授权许可内容。同时，确保 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:39;614:72&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;variables.tf&lt;/i&gt; 文件中 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:40;614:91&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;replace_dolphindb_lic&lt;/i&gt; 的值设为 true（默认为 true）。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:22;616:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;dolphindb_lic_content= &amp;lt;&amp;lt;EOF // 替换后的 dolphindb.lic 文件内容 EOF&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;附录&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:24;622:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:24;622:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;附录&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:24;622:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:6;624:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:88;624:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;部署 DolphinDB 单节点完整项目代码代码：&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:7;625:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:89;625:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;tfvars&#34; href=&#34;script/cloud_deployment_with_terraform/standalone/files.tfvars&#34; xtrc=&#34;xref:9;625:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;?ditaot usertext?&gt;files.tfvars&lt;/xref&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:90;626:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;tf&#34; href=&#34;script/cloud_deployment_with_terraform/standalone/main.tf&#34; xtrc=&#34;xref:10;626:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;?ditaot usertext?&gt;main.tf&lt;/xref&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:91;627:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;tf&#34; href=&#34;script/cloud_deployment_with_terraform/standalone/variables.tf&#34; xtrc=&#34;xref:11;627:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;?ditaot usertext?&gt;variables.tf&lt;/xref&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:92;628:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;部署 DolphinDB 高可用集群完整代码：&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:8;629:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:93;629:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;tfvars&#34; href=&#34;script/cloud_deployment_with_terraform/cluster/files.tfvars&#34; xtrc=&#34;xref:12;629:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;?ditaot usertext?&gt;files.tfvars&lt;/xref&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:94;630:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;tf&#34; href=&#34;script/cloud_deployment_with_terraform/cluster/main.tf&#34; xtrc=&#34;xref:13;630:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;?ditaot usertext?&gt;main.tf&lt;/xref&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:95;631:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;tf&#34; href=&#34;script/cloud_deployment_with_terraform/cluster/variables.tf&#34; xtrc=&#34;xref:14;631:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;?ditaot usertext?&gt;variables.tf&lt;/xref&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:96;632:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;tf&#34; href=&#34;script/cloud_deployment_with_terraform/cluster/output.tf&#34; xtrc=&#34;xref:15;632:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/cloud_deployment_with_terraform.md&#34;&gt;&lt;?ditaot usertext?&gt;output.tf&lt;/xref&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;"/><meta name="wh-source-relpath" content="tutorials/cloud_deployment_with_terraform.md"/><meta name="wh-out-relpath" content="tutorials/cloud_deployment_with_terraform.html"/>

    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/commons.css?buildId=2024012323"/>
    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic.css?buildId=2024012323"/>

    <script src="../oxygen-webhelp/app/options/properties.js?buildId=20250305183303"></script>
    <script src="../oxygen-webhelp/app/localization/strings.js?buildId=2024012323"></script>
    <script src="../oxygen-webhelp/app/search/index/keywords.js?buildId=20250305183303"></script>
    <script defer="defer" src="../oxygen-webhelp/app/commons.js?buildId=2024012323"></script>
    <script defer="defer" src="../oxygen-webhelp/app/topic.js?buildId=2024012323"></script>
<link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/styles.css?buildId=2024012323"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script></head>

    <body id="使用-terraform-在云上部署-dolphindb" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            跳转到主要内容
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div xmlns:whc="http://www.oxygenxml.com/webhelp/components" class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="https://docs.dolphindb.cn/zh/index.html" class=" wh_logo d-none d-sm-block "><img src="../logo.png" alt="  DolphinDB 文档中心  "/></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="booktitle">  <span class="ph mainbooktitle">DolphinDB 文档中心</span>  </span></a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="搜索 " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="搜索查询" required="required"/><button type="submit" class="wh_search_button" aria-label="搜索"><span class="search_input_text">搜索</span></button></div></form>
            
            <script src="/vendors/react/umd/react.production.min.js" defer="defer"></script>
<script src="/vendors/react-dom/umd/react-dom.production.min.js" defer="defer"></script>
<script src="/vendors/dayjs/dayjs.min.js" defer="defer"></script>
<script src="/vendors/antd/dist/antd.min.js" defer="defer"></script>
<script src="/vendors/@ant-design/icons/dist/index.umd.min.js" defer="defer"></script>
<script src="/zh/index.js" type="module"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" defer="defer"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer="defer"><!--


--></script>
<script defer="defer"><!--

// 从主页重定向
const currentUrl = window.location.href;

// 判断当前URL是否包含index.html并且路径最后部分是index.html
if (currentUrl.endsWith('index.html')) {
    // 处理根目录下的index.html跳转
    const baseUrl = currentUrl.split('/index.html')[0]; // 获取index.html之前的部分
    const redirectUrl = `${baseUrl}/about/ddb_intro.html`; // 构建跳转路径
    window.location.href = redirectUrl; // 执行跳转
}

--></script>
            
        </div></div>
    </div>
</header>
        
        
         
        
        
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="../index.html"><span>主页</span></a></span></li><li><div class="topicref" data-id="sectionddb_deployment"><div class="title"><a href="../deploy/deploy_intro.html"><span class="keyword label">部署</span></a><div class="wh-tooltip"><p class="shortdesc">如何在不同的场景中部署 DolphinDB</p></div></div></div></li><li><div class="topicref"><div class="title"><a href="../tutorials/docker_single_deployment.html">云环境部署</a></div></div></li><li class="active"><div class="topicref" data-id="使用-terraform-在云上部署-dolphindb"><div class="title"><a href="../tutorials/cloud_deployment_with_terraform.html">使用 Terraform 在云上部署 DolphinDB</a></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="切换搜索突出显示" title="切换搜索突出显示"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="折叠截面" title="折叠截面"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="打印此页" aria-label="打印此页"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem"><div data-tocid="ddb_intro-d9713e87" class="topicref" data-id="ddb_intro" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../about/ddb_intro.html" id="ddb_intro-d9713e87-link">关于DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="chap1_getstarted-d9713e136" class="topicref" data-id="chap1_getstarted" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../getstarted/chap1_getstarted.html" id="chap1_getstarted-d9713e136-link">快速上手</a><div class="wh-tooltip"><p class="shortdesc">如何快速部署 DolphinDB、建库建表、写入和查询数据</p></div></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="sectionddb_deployment-d9713e189" class="topicref" data-id="sectionddb_deployment" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action sectionddb_deployment-d9713e189-link" class="wh-expand-btn"></span><div class="title"><a href="../deploy/deploy_intro.html" id="sectionddb_deployment-d9713e189-link"><span class="keyword label">部署</span></a><div class="wh-tooltip"><p class="shortdesc">如何在不同的场景中部署 DolphinDB</p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e242" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e242-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/standalone_server.html" id="tocId-d9713e242-link">单节点部署与升级</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e335" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e335-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/single_machine_cluster_deploy.html" id="tocId-d9713e335-link">集群部署与升级</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="tocId-d9713e520" class="topicref" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action tocId-d9713e520-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/docker_single_deployment.html" id="tocId-d9713e520-link">云环境部署</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="基于-docker-部署-dolphindb-d9713e521" class="topicref" data-id="基于-docker-部署-dolphindb" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/docker_single_deployment.html" id="基于-docker-部署-dolphindb-d9713e521-link">基于 Docker 部署 DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="基于-docker-compose-部署-dolphindb-d9713e567" class="topicref" data-id="基于-docker-compose-部署-dolphindb" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/docker-compose_high_cluster.html" id="基于-docker-compose-部署-dolphindb-d9713e567-link">基于 Docker-Compose 部署 DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="基于-k8s-部署-dolphindb-d9713e613" class="topicref" data-id="基于-k8s-部署-dolphindb" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/k8s_deployment.html" id="基于-k8s-部署-dolphindb-d9713e613-link">基于 K8S 部署 DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="基于阿里云-k8s-部署-dolphindb-d9713e659" class="topicref" data-id="基于阿里云-k8s-部署-dolphindb" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/k8s_deployment_in_Aliyun.html" id="基于阿里云-k8s-部署-dolphindb-d9713e659-link">基于阿里云 K8S 部署 DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="基于-aws-部署-dolphindb-d9713e705" class="topicref" data-id="基于-aws-部署-dolphindb" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/k8s_deployment_in_AWS.html" id="基于-aws-部署-dolphindb-d9713e705-link">基于 AWS 部署 DolphinDB</a></div></div></li><li role="treeitem" class="active"><div data-tocid="使用-terraform-在云上部署-dolphindb-d9713e751" class="topicref" data-id="使用-terraform-在云上部署-dolphindb" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/cloud_deployment_with_terraform.html" id="使用-terraform-在云上部署-dolphindb-d9713e751-link">使用 Terraform 在云上部署 DolphinDB</a></div></div></li></ul></li><li role="treeitem"><div data-tocid="linux-系统部署准备-d9713e797" class="topicref" data-id="linux-系统部署准备" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/prep_linux_for_deploy.html" id="linux-系统部署准备-d9713e797-link">Linux 系统部署准备</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap1_sect_using_clients-d9713e843" class="topicref" data-id="chap1_sect_using_clients" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap1_sect_using_clients-d9713e843-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/clients.html" id="chap1_sect_using_clients-d9713e843-link">操作手册</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="parameters_configuration-d9713e2022" class="topicref" data-id="parameters_configuration" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action parameters_configuration-d9713e2022-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/cfg/para_cfg.html" id="parameters_configuration-d9713e2022-link"><span class="keyword label">参数配置</span></a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259" class="topicref" data-id="new_chap_database_manage_new_chap_dbmanage_landing_page" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/cfg/db_intro.html" id="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link"><span class="keyword label">数据库</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 数据库的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_streaming-d9713e3760" class="topicref" data-id="chap7_tutorials_streaming" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_streaming-d9713e3760-link" class="wh-expand-btn"></span><div class="title"><a href="../stream/str_intro.html" id="chap7_tutorials_streaming-d9713e3760-link"><span class="keyword label">流数据</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 流数据引擎及流数据计算的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e7513" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e7513-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/db_oper/import_data.html" id="tocId-d9713e7513-link">数据迁移</a><div class="wh-tooltip"><p class="shortdesc">如何从不同数据源向 DolphinDB 迁移数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_system_management-d9713e7940" class="topicref" data-id="chap7_tutorials_system_management" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_system_management-d9713e7940-link" class="wh-expand-btn"></span><div class="title"><a href="../sys_man/om_intro.html" id="chap7_tutorials_system_management-d9713e7940-link"><span class="keyword label">系统运维</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 的系统运维功能及方法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="troubleshooting-d9713e8780" class="topicref" data-id="troubleshooting" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action troubleshooting-d9713e8780-link" class="wh-expand-btn"></span><div class="title"><a href="../error_codes/troubleshooting.html" id="troubleshooting-d9713e8780-link">故障排查</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="about_language_resources-d9713e20911" class="topicref" data-id="about_language_resources" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action about_language_resources-d9713e20911-link" class="wh-expand-btn"></span><div class="title"><a href="../progr/progr_intro.html" id="about_language_resources-d9713e20911-link"><span class="keyword label">编程语言</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 编程基本概念与方法、SQL 在 DolphinDB 的应用</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="functions_references-d9713e30925" class="topicref" data-id="functions_references" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action functions_references-d9713e30925-link" class="wh-expand-btn"></span><div class="title"><a href="../funcs/funcs_intro.html" id="functions_references-d9713e30925-link"><span class="keyword label">函数参考</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 函数分类、语法、详解及示例</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="api_protocol-d9713e94064" class="topicref" data-id="api_protocol" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action api_protocol-d9713e94064-link" class="wh-expand-btn"></span><div class="title"><a href="../api/connapi_intro.html" id="api_protocol-d9713e94064-link"><span class="keyword label">连接器 &amp; API</span></a><div class="wh-tooltip"><p class="shortdesc">面向不同编程语言的 DolphinDB API 及连接器，相关协议和用法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap6_plugin-d9713e94210" class="topicref" data-id="chap6_plugin" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap6_plugin-d9713e94210-link" class="wh-expand-btn"></span><div class="title"><a href="../plugins/plg_intro.html" id="chap6_plugin-d9713e94210-link"><span class="keyword label">插件</span></a><div class="wh-tooltip"><p class="shortdesc">多个应用场景的插件使用说明和插件开发指导</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="third_party-d9713e97904" class="topicref" data-id="third_party" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action third_party-d9713e97904-link" class="wh-expand-btn"></span><div class="title"><a href="../third_party.html" id="third_party-d9713e97904-link">第三方工具</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="about_tutorials-d9713e98227" class="topicref" data-id="about_tutorials" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action about_tutorials-d9713e98227-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/about_tutorials.html" id="about_tutorials-d9713e98227-link"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105982" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105982-link" class="wh-expand-btn"></span><div class="title"><a href="../rn/server/3_00_2.html" id="tocId-d9713e105982-link">版本说明</a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 版本发布历史</p></div></div></div></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-7 col-md-9 col-sm-12" id="wh_topic_body">
                        <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        <button id="wh_close_topic_toc_button" class="close-toc-button d-none" aria-label="Toggle topic table of content" aria-controls="wh_topic_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        <div class=" wh_topic_content body "><main role="main"><article class="- topic/topic topic" role="article" aria-labelledby="ariaid-title1"><h1 class="- topic/title title topictitle1" id="ariaid-title1">使用 Terraform 在云上部署 DolphinDB</h1><div class="- topic/body body"><p class="- topic/p p">本教程将介绍如何通过 Terraform 快速地在 AWS 部署 DolphinDB 单节点和高可用集群。</p></div><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title2" id="terraform-概述"><h2 class="- topic/title title topictitle2" id="ariaid-title2">Terraform 概述</h2><div class="- topic/body body"><p class="- topic/p p"><a class="- topic/xref xref" href="https://www.terraform.io/" target="_blank" rel="external noopener">HashiCorp Terraform</a> 是一款基础架构即代码工具，旨在实现 "Write, Plan, and Create Infrastructure as Code"。它通过配置文件来描述云资源的拓扑结构，包括虚拟机、存储账户和网络接口。Terraform 几乎支持市面上所有的云服务，能够通过代码管理 IT 资源，并自动化部署资源，从而避免手动部署可能引发的错误。此外，Terraform 的命令行接口（CLI）简化了将配置文件部署到 AWS 或其他云平台的过程。</p><p class="- topic/p p">Terraform 包含以下功能：</p><ul class="- topic/ul ul"><li class="- topic/li li">基础设施即代码：Terraform 使用特定的配置语言 HCL(Hashicorp Configuration Language) 来描述基础设施资源。这使得 Terraform 能够以代码的形式描述解决方案或基础架构，并实现对它们的版本控制和管理。同时，通用的解决方案和基础架构可以以模板的形式便捷地进行共享和复用。</li><li class="- topic/li li">执行计划：在执行 Terraform 代码之前，可以通过 <code class="+ topic/ph pr-d/codeph ph codeph">terraform plan</code> 命令解析 Terraform 模板，并生成一个可执行的计划。这个计划包含了当前模板需要创建或变更的资源及其属性。用户预览执行计划以确认模板的内容是否正确。在确认无误后，通过 <code class="+ topic/ph pr-d/codeph ph codeph">terraform apply</code> 命令来执行计划，以完成所定义资源的创建或变更。这个过程允许在实际操作之前对变更内容进行审核和验证。</li><li class="- topic/li li">资源拓扑：Terraform 根据模板中的定义来构建资源拓扑图。Terraform 并行创建无依赖关系的资源，以提高执行效率。而对于存在依赖关系的资源，Terraform 则优先执行被依赖的资源，以确保创建或修改资源的顺序正确。</li><li class="- topic/li li">自动化变更：Terraform 拥有强大的自动化变更功能。通过 <code class="+ topic/ph pr-d/codeph ph codeph">terraform apply</code> 命令，可以实现复杂资源的无缝变更。Terraform 不仅简化了创建、修改和删除等变更操作，还保持了计划的一致性。此外，Terraform 还提供了回滚和恢复机制，能够有效地减少人为错误，提高系统的可靠性和稳定性。</li></ul><img class="- topic/image image" src="images/cloud_deployment_with_terraform/01.png" width="600"/><br/></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title3" id="使用前提"><h2 class="- topic/title title topictitle2" id="ariaid-title3">使用前提</h2><div class="- topic/body body"></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title4" id="准备环境"><h3 class="- topic/title title topictitle3" id="ariaid-title4">准备环境</h3><div class="- topic/body body"><p class="- topic/p p">在进行 Terraform 相关操作之前，请确保完成以下准备工作：</p><ul class="- topic/ul ul"><li class="- topic/li li">安装 <a class="- topic/xref xref" href="https://developer.hashicorp.com/terraform/tutorials/aws-get-started/install-cli" target="_blank" rel="external noopener">Terraform CLI</a>（版本 1.2.0 及以上）</li><li class="- topic/li li">安装 <a class="- topic/xref xref" href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html" target="_blank" rel="external noopener">AWS CLI</a></li><li class="- topic/li li">拥有 <a class="- topic/xref xref" href="https://aws.amazon.com/free" target="_blank" rel="external noopener">AWS account</a> 和 <a class="- topic/xref xref" href="https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html" target="_blank" rel="external noopener">associated credentials</a></li></ul><p class="- topic/p p">完成上述步骤后，执行以下命令，验证环境配置的正确性：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>$ terraform -help
Usage：terraform [-version] [-help] &lt;command&gt; [args]

The available commands for execution are listed below.
The most common, useful commands are shown first, followed by
less common or more advanced commands. If you're just getting
started with Terraform, stick with the common commands. For the
other commands, please read the help and docs before usage.
#...

$ aws --version
aws-cli/2.10.0 Python/3.11.2 Linux/4.14.133-113.105.amzn2.x86_64 botocore/2.4.5</code></pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title5" id="设置-aws-凭据"><h3 class="- topic/title title topictitle3" id="ariaid-title5">设置 AWS 凭据</h3><div class="- topic/body body"><p class="- topic/p p">在使用 Terraform 前，AWS 会对 Terraform 进行身份验证，需要设置 <code class="+ topic/ph pr-d/codeph ph codeph">AWS_ACCESS_KEY_ID</code> 和 <code class="+ topic/ph pr-d/codeph ph codeph">AWS_SECRET_ACCESS_KEY</code> 两个环境变量。其中 <code class="+ topic/ph pr-d/codeph ph codeph">AWS_ACCESS_KEY_ID</code> 用来设置 Access Key；<code class="+ topic/ph pr-d/codeph ph codeph">AWS_SECRET_ACCESS_KEY</code> 用来设置 Secret Key。在 Linux 或 macOS 环境下，通过 <code class="+ topic/ph pr-d/codeph ph codeph">export </code> 命令进行设置：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>export AWS_ACCESS_KEY_ID=YourAccessKeyId
export AWS_SECRET_ACCESS_KEY=YourSecretAccessKey</code></pre><p class="- topic/p p">在 Windows 环境下，通过 <code class="+ topic/ph pr-d/codeph ph codeph">set</code> 命令进行设置：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>set AWS_ACCESS_KEY_ID=YourAccessKeyId
set AWS_SECRET_ACCESS_KEY=YourSecretAccessKey</code></pre></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title6" id="部署-dolphindb-单节点"><h2 class="- topic/title title topictitle2" id="ariaid-title6">部署 DolphinDB 单节点</h2><div class="- topic/body body"></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title7" id="创建-terraform-项目"><h3 class="- topic/title title topictitle3" id="ariaid-title7">创建 Terraform 项目</h3><div class="- topic/body body"><p class="- topic/p p">创建一个 Terraform 项目文件夹，以下是项目文件夹的结构：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>project_directory
|-- main.tf
|-- variables.tf
|-- files.tfvars</code></pre><p class="- topic/p p">其中，每个文件的作用为：</p><ul class="- topic/ul ul"><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">main.tf</strong>： Terraform 项目的入口文件，其中定义了基础设施资源的配置和参数。用户通过编写 <em class="+ topic/ph hi-d/i ph i">main.tf</em> 文件来定义要创建的云资源、网络设置以及它们之间的关系等。</li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">variables.tf</strong>：用于定义和声明 Terraform 配置中使用的变量。变量是可以在 Terraform 代码中引用的参数，有助于提高代码的复用性和灵活性。变量可以有不同的类型，如字符串、数字、布尔值、列表和字典等。用户可以通过 <em class="+ topic/ph hi-d/i ph i">variables.tf</em> 来定义项目中需要的各种参数，如区域、实例类型、密钥等。</li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">files.tfvars</strong>：用于存储 Terraform 配置中所使用的变量的值，例如指定区域、实例类型、密钥等。这些变量可以在 Terraform 模块中定义，并且在部署时可以通过 <em class="+ topic/ph hi-d/i ph i">files.tfvars</em> 文件来指定它们的具体取值。这种做法使得在不同环境中使用相同的 Terraform 配置变得更加灵活，因为可以通过不同的 .tfvars 文件来为不同环境提供不同的变量值，而无需修改实际的 Terraform 配置文件。</li></ul></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title8" id="配置-maintf-文件"><h3 class="- topic/title title topictitle3" id="ariaid-title8">配置 <em class="+ topic/ph hi-d/i ph i">main.tf</em> 文件</h3><div class="- topic/body body"><p class="- topic/p p">以下展示了 <em class="+ topic/ph hi-d/i ph i">main.tf</em> 文件的部分内容，完整代码请参考本教程结尾附件部分：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code># 声明 Terraform 提供者及其版本
terraform {
  ......
}

# 配置 AWS 提供者
provider "aws" {
  ......
}

# 创建 AWS 实例资源（dolphindb_server）
resource "aws_instance" "dolphindb_server" {
  ......
}

# 创建 AWS EBS 卷资源（data）
resource "aws_ebs_volume" "data" {
  ......
}

# 创建 AWS EBS 卷附加资源（data_attachment）
resource "aws_volume_attachment" "data_attachment" {
  ......
}

# 创建 null_resource（mount_data_volume），用于在实例上挂载数据卷
resource "null_resource" "mount_data_volume" {
  ......
}
</code></pre><p class="- topic/p p">以上代码实现的具体内容为：</p><ol class="- topic/ol ol"><li class="- topic/li li">在已有的 VPC 和子网中生成 1 个 EC2 和 1 个 EBS 卷</li><li class="- topic/li li">将 EBS 挂载到 EC2 上</li><li class="- topic/li li">下载 DolphinDB</li><li class="- topic/li li">修改 DolphinDB 的配置文件和证书，并启动单节点</li></ol></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title9" id="配置-variablestf-文件"><h3 class="- topic/title title topictitle3" id="ariaid-title9">配置 <em class="+ topic/ph hi-d/i ph i">variables.tf</em> 文件</h3><div class="- topic/body body"><p class="- topic/p p">以下展示了 <em class="+ topic/ph hi-d/i ph i">variables.tf</em> 文件的部分内容，完整代码请参考本教程结尾附件部分：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>variable "region" {
  type        = string
}

variable "instance_name" {
  description = "name of EC2"
  type        = string
  default     = "TestDolphinDBServerInstance"
}

# EC2 实例的其他参数内容已省略...

variable "ddbversion" {
  description = "version of DolphinDB to install"
  type        = string
}

variable "dolphindb_cfg_content" {
  # 替换为您的dolphindb.cfg内容
  type=string
}

variable "replace_dolphindb_lic" {
  description = "whether to replace dolphindb.lic"
  type        = bool
  default     = true
}

variable "dolphindb_lic_content" {
  type=string 
}
</code></pre><p class="- topic/p p">该文件记录配置 DolphinDB 单节点所需要的参数定义说明如下：</p><ol class="- topic/ol ol"><li class="- topic/li li">region：必填项，string 类型，要创建的 EC2 所在的 region，比如 <code class="+ topic/ph pr-d/codeph ph codeph">us-west-2</code>。</li><li class="- topic/li li">instance_name：选填项，string 类型，创建的 EC2 的名字，默认为 TestDolphinDBServerInstance。</li><li class="- topic/li li">ami_id：选填项，string 类型，EC2 使用的 AMI 的 ID。默认为 ami-0fd48c6031f8700df （AWS 上的 centOS 7 镜像），该镜像包含了启动实例所需的操作系统和应用程序。可以在 AWS 公共 AMI 页面查找需要的 AMI ID。</li><li class="- topic/li li">instance_type：选填项，string 类型，EC2 的机器类型，默认为 t2.micro。可以根据需求，在 <a class="- topic/xref xref" href="https://aws.amazon.com/ec2/instance-types/" target="_blank" rel="external noopener">EC2 实例类型</a> 页面选择其他实例类型。</li><li class="- topic/li li">subnet_id：必选项，string 类型，EC2 将处于的子网 ID。</li><li class="- topic/li li">key_name：必选项，string 类型，用来登录 EC2 的密钥对。</li><li class="- topic/li li">volume_size：选填项，number 类型，root volume 的大小，默认为 10（单位为 GB）。</li><li class="- topic/li li">volume_type：选填项，string 类型，root volume 的类型，默认为 gp3，其他可选项包括 gp2, io1, st1, sc1 等。</li><li class="- topic/li li">az：必填项，string 类型，新建 EBS 所处的可用区。</li><li class="- topic/li li">datavolume_type：选填项，string 类型，新建 EBS 的类型，默认为 gp3，其他可选项包括 gp2, io1, st1, sc1 等。</li><li class="- topic/li li">datavolume_size：选填项，number 类型，新建 EBS 的大小，默认为 100 (单位为 GB)。</li><li class="- topic/li li">destination：选填项，string 类型，新建 EBS 在 EC2 上的挂载点的绝对路径，默认为 /data。</li><li class="- topic/li li">attachment_device_name：选填项，string 类型，新建 EBS 挂载在 EC2 上的设备名称，默认为 /dev/xvdb。</li><li class="- topic/li li">key_location：必填项，string 类型，密钥对文件的绝对路径。为了将 EBS 挂载到指定挂载点，需要通过 SSH 连接到 EC2，所以需要提供登录 EC2 的密钥对文件的绝对路径。</li><li class="- topic/li li">ddb_username：选填项，string 类型，EC2 的用户名称。默认为 centos。</li><li class="- topic/li li">package_manager_name：选填项，string 类型，包管理器的名称。例如，RHEL 系列的包管理器名为 yum， DEBIAN 系列的包管理器名为 apt-get。默认为 yum。</li><li class="- topic/li li">security_group_ids：必填项，list(string)  类型，安全组 id。值在 <em class="+ topic/ph hi-d/i ph i">files.tfvar</em> 中定义。注意，DolphinDB 单节点默认使用 8848 作为端口，所以 EC2 所使用的安全组的 inbound rules 里必须允许外界访问 8848 端口。</li><li class="- topic/li li">ddbversion：必填项，string 类型，DolphinDB 的版本。可在 DolphinDB 官网查看最新版本。</li><li class="- topic/li li">dolphindb_cfg_content：选填项，string 类型，DolphinDB 配置文件。值在 <em class="+ topic/ph hi-d/i ph i">files.tfvar</em> 中定义。</li><li class="- topic/li li">replace_dolphindb_lic：选填项，bool 类型，是否替换证书。默认为 true，表示替换证书。若设置为 false，则不替换，使用社区版证书。</li><li class="- topic/li li">dolphindb_lic_content：必填项，bool 类型，证书内容。值在 <em class="+ topic/ph hi-d/i ph i">files.tfvar</em> 中定义。</li></ol></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title10" id="配置-filestfvars-文件"><h3 class="- topic/title title topictitle3" id="ariaid-title10">配置 <em class="+ topic/ph hi-d/i ph i">files.tfvars</em> 文件</h3><div class="- topic/body body"><p class="- topic/p p">以下展示了 <em class="+ topic/ph hi-d/i ph i">files.tfvars</em> 文件的部分内容，完整代码请参考本教程结尾附件部分：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>dolphindb_cfg_content= &lt;&lt;EOF
localSite=localhost:8848:local8848
mode=single
maxMemSize=16
maxConnections=512
workerNum=4
localExecutors=3
maxBatchJobWorker=4
dataSync=1
OLAPCacheEngineSize=2
TSDBCacheEngineSize=1
newValuePartitionPolicy=add
maxPubConnections=64
subExecutors=4
perfMonitoring=true
lanCluster=0
EOF

dolphindb_lic_content= &lt;&lt;EOF
......
EOF

security_group_ids=[&lt;your security group ids&gt;]</code></pre><p class="- topic/p p"><em class="+ topic/ph hi-d/i ph i">files.tfvars</em> 文件是记录 Terraform 变量的文件，其中包含了一些关键配置项。以下是对每个变量的简要说明：</p><ol class="- topic/ol ol"><li class="- topic/li li">dolphindb_cfg_content：DolphinDB 配置文件内容，包含了 DolphinDB 服务器的配置参数。如果需要详细的配置参数信息，可以参考 DolphinDB 官方配置说明：<a class="- topic/xref xref" href="https://docs.dolphindb.cn/zh/db_distr_comp/cfg/para_cfg.html" target="_blank" rel="external noopener">参数配置</a>。</li><li class="- topic/li li">dolphindb_lic_content：DolphinDB 的证书内容，用于许可验证。可在这里配置社区或企业版 license。</li><li class="- topic/li li">security_group_ids：安全组 ID，用于定义 EC2 实例的入站和出站流量规则。</li></ol></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title11" id="执行-terraform-命令"><h3 class="- topic/title title topictitle3" id="ariaid-title11">执行 Terraform 命令</h3><div class="- topic/body body"><p class="- topic/p p">通过终端进入 Terraform 项目文件夹：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /path/to/Dolphindb-Terraform</code></pre><p class="- topic/p p">初始化目录：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>terraform init</code></pre><p class="- topic/p p">部署实例，可以根据实际的资源和需求来填写 <em class="+ topic/ph hi-d/i ph i">variables.tf</em> 文件中定义的变量：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>terraform apply -var "region=&lt;your_region&gt;" -var "subnet_id=&lt;your_subnet_id&gt;" 
-var "key_name=&lt;your_key_pair_name&gt;" -var "ddbversion=2.00.10.8" -var "az=&lt;your_az&gt;"  
-var "key_location=&lt;absolute_path_of_your_key_pair&gt;" -var-file="files.tfvars"</code></pre><p class="- topic/p p">按照提示输入 <code class="+ topic/ph pr-d/codeph ph codeph">yes</code> 确认创建资源。等待 Terraform 完成部署。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title12" id="登录-web-管理界面验证节点正确运行"><h3 class="- topic/title title topictitle3" id="ariaid-title12">登录 Web 管理界面验证节点正确运行</h3><div class="- topic/body body"><p class="- topic/p p">在浏览器中输入部署服务器 IP 地址和部署端口号（默认是 8848）。若可以打开 Web 管理界面，则表示 DolphinDB 单节点运行正常。打开后的 Web 管理界面如下，以管理员身份（默认账号：admin，默认密码：123456）进行登录。</p><br/><img class="- topic/image image" src="images/cloud_deployment_with_terraform/02.png" alt="02"/><br/></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title13" id="dolphindb-高可用集群部署"><h2 class="- topic/title title topictitle2" id="ariaid-title13">DolphinDB 高可用集群部署</h2><div class="- topic/body body"><p class="- topic/p p">本教程示例集群的部署架构图如下：</p><img class="- topic/image image" src="images/cloud_deployment_with_terraform/03.png" width="600"/><br/><p class="- topic/p p">请注意该 IP 仅用于示例，实际 IP 由设置的 subnet 以及部署 EC2 实例时自动生成。</p><p class="- topic/p p">部署高可用集群前的要求和准备：</p><ul class="- topic/ul ul"><li class="- topic/li li"><a class="- topic/xref xref" href="https://dolphindb.cn/product#downloads" target="_blank" rel="external noopener">申请企业版 license</a>：因为集群超过了社区版试用授权许可节点数的限制，所以必须申请企业版 license。</li><li class="- topic/li li">部署了数据节点或者计算节点的服务器必须同时部署 1 个代理节点，以便用于启动和关闭该服务器上的数据节点或计算节点。</li><li class="- topic/li li">在 AWS 中创建 1 个 VPC，其中至少包含 3 个子网。接下来将在 1 个 VPC 的不同子网下分别部署 DolphinDB 集群，以构建 DolphinDB 高可用集群。</li></ul></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title14" id="创建-terraform-项目-1"><h3 class="- topic/title title topictitle3" id="ariaid-title14">创建 Terraform 项目</h3><div class="- topic/body body"><p class="- topic/p p">创建一个 Terraform 项目文件夹，以下是项目文件夹的结构：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>project_directory
|-- main.tf
|-- variables.tf
|-- files.tfvars
|-- output.tf</code></pre><p class="- topic/p p">其中，每个文件的作用为：</p><ul class="- topic/ul ul"><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">main.tf</strong>：Terraform 项目的入口文件，其中定义了基础设施资源的配置和参数。用户通过编写 <em class="+ topic/ph hi-d/i ph i">main.tf</em> 文件来定义要创建的云资源、网络设置等，以及它们之间的关系。</li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">variables.tf</strong>：用于定义和声明 Terraform 配置中使用的变量。变量是可以在 Terraform 代码中引用的参数，有助于提高代码的复用性和灵活性。变量可以有不同的类型，如字符串、数字、布尔值、列表和字典等。用户可以通过 <em class="+ topic/ph hi-d/i ph i">variables.tf</em> 来定义项目中需要的各种参数，如区域、实例类型、密钥等。</li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">files.tfvars</strong>：用于存储 Terraform 配置中所使用的变量的值，例如指定区域、实例类型、密钥等。这些变量可以在 Terraform 模块中定义，并且在部署时可以通过 <em class="+ topic/ph hi-d/i ph i">files.tfvars</em> 文件来指定它们的具体取值。这种做法使得在不同环境中使用相同的 Terraform 配置变得更加灵活，因为可以通过不同的 .tfvars 文件来为不同环境提供不同的变量值，而无需修改实际的 Terraform 配置文件。</li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">output.tf</strong>：用于定义 Terraform 部署完成后需要输出的信息。在这个文件中，你可以指定需要输出的资源属性，比如 IP 地址、域名等，这样在部署完成后，你就可以方便地获取这些信息以便后续的操作或者其他系统使用。</li></ul></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title15" id="配置-maintf-文件-1"><h3 class="- topic/title title topictitle3" id="ariaid-title15">配置 <em class="+ topic/ph hi-d/i ph i">main.tf</em> 文件</h3><div class="- topic/body body"><p class="- topic/p p">以下展示了 <em class="+ topic/ph hi-d/i ph i">main.tf</em> 文件的部分内容，完整代码请参考本教程结尾附件部分：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code># 声明 Terraform 提供者及其版本
terraform {
 ......
}

# 配置 AWS 提供者
provider "aws" {
  ......
}

# 创建 AWS 实例资源（ddb_p1）
resource "aws_instance" "ddb_p1" {
  ......
}

# 创建其他两个 AWS 实例资源（ddb_p2、ddb_p3），与 ddb_p1 的配置类似
# ......

# 创建 AWS EBS 卷资源（data_p1）
resource "aws_ebs_volume" "data_p1" {
 ......
}

# 创建其他两个 AWS EBS 卷资源（data_p2、data_p3），与 data_p1 的配置类似
# ......

# 创建 AWS EBS 卷附加资源（data_attachment_p1）
resource "aws_volume_attachment" "data_attachment_p1" {
  ......
}

# 创建其他两个 AWS EBS 卷附加资源，与 data_attachment_p1 配置类似
# ......

# 创建 null_resource（mount_data_volume_p1），用于在实例上挂载数据卷
resource "null_resource" "mount_data_volume_p1" {
  ......
}

# 创建其他两个 null_resource，用于在 ddb_p2 和 ddb_p3 上挂载数据卷，配置 DolphinDB 等，与 mount_data_volume_p1 的配置类似
# ......</code></pre><p class="- topic/p p">以上代码实现的具体内容为：</p><ol class="- topic/ol ol"><li class="- topic/li li">在已有的 VPC 和子网中生成 3 个 EC2 和 3 个 EBS 卷</li><li class="- topic/li li">分别将 EBS 挂载到 EC2 上</li><li class="- topic/li li">分别下载 DolphinDB</li><li class="- topic/li li">修改 DolphinDB 的配置文件和证书，并启动高可用集群</li></ol></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title16" id="配置-variablestf-文件-1"><h3 class="- topic/title title topictitle3" id="ariaid-title16">配置 <em class="+ topic/ph hi-d/i ph i">variables.tf</em> 文件</h3><div class="- topic/body body"><p class="- topic/p p">以下展示了 <em class="+ topic/ph hi-d/i ph i">variables.tf</em> 文件的部分内容，完整代码请参考本教程结尾附件部分：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code># EC2 实例的其他参数内容已省略...

variable "ddbversion" {
  description = "version of DolphinDB to install"
  type        = string
}

variable "replace_dolphindb_lic" {
  description = "whether to replace dolphindb.lic"
  type        = bool
  default     = true
}

variable "dolphindb_lic_content" {
  type = string
}

variable "cluster_nodes" {
  type = string
}

variable "cluster_cfg" {
  type = string
}

variable "controller_cfg_p1" {
  type = string
}

variable "agent_cfg_p1" {
  type = string
}

# P2 P3 相关内容已省略...</code></pre><p class="- topic/p p">该文件用于存放 DolphinDB 高可用集群配置所需要的参数定义，其中一部分参数与部署 DolphinDB 单节点时的参数含义相同，这里不再赘述，仅说明不同配置参数：</p><ol class="- topic/ol ol"><li class="- topic/li li">subnet_id_p1：必选项，string 类型，P1 所在的 EC2 将处于的子网 ID。</li><li class="- topic/li li">subnet_id_p2：必选项，string 类型，P2 所在的 EC2 将处于的子网 ID。</li><li class="- topic/li li">subnet_id_p3：必选项，string 类型，P3 所在的 EC2 将处于的子网 ID。</li><li class="- topic/li li">az_p1：必填项，string 类型，P1 新建 EBS 所处的可用区。</li><li class="- topic/li li">az_p2：必填项，string 类型，P2 新建 EBS 所处的可用区。</li><li class="- topic/li li">az_p3：必填项，string 类型，P3 新建 EBS 所处的可用区。</li><li class="- topic/li li">ddbversion：必填项，string 类型，DolphinDB 的版本。可在 DolphinDB 官网查看最新版本。</li><li class="- topic/li li">replace_dolphindb_lic：选填项，bool 类型，是否替换证书。默认为 true，表示替换证书。若设置为 false，则不替换，使用社区版证书。</li><li class="- topic/li li">dolphindb_lic_content：必填项，bool 类型，证书内容。值在 <em class="+ topic/ph hi-d/i ph i">files.tfvar</em> 中定义。</li><li class="- topic/li li">security_group_ids：必填项，list(string) 类型，安全组 id。值在 <em class="+ topic/ph hi-d/i ph i">files.tfvar</em> 中定义。注意，DolphinDB 使用 8800、8801、8802端口，所以 EC2 所使用的安全组的 inbound rules 里必须允许外界访问这些端口。</li><li class="- topic/li li">cluster_nodes：选填项，string 类型，集群成员配置参数。值在 <em class="+ topic/ph hi-d/i ph i">files.tfvar</em> 中定义。</li><li class="- topic/li li">cluster_cfg：选填项，string 类型，数据节点和计算节点配置变量。值在 <em class="+ topic/ph hi-d/i ph i">files.tfvar</em> 中定义。</li><li class="- topic/li li">controller_cfg_p1：选填项，string 类型，P1 控制节点配置变量。值在 <em class="+ topic/ph hi-d/i ph i">files.tfvar</em> 中定义。</li><li class="- topic/li li">agent_cfg_p1：选填项，string 类型，P1 代理节点配置变量。值在 <em class="+ topic/ph hi-d/i ph i">files.tfvar</em> 中定义。</li><li class="- topic/li li">controller_cfg_p2：选填项，string 类型，P2 控制节点配置变量。值在 <em class="+ topic/ph hi-d/i ph i">files.tfvar</em> 中定义。</li><li class="- topic/li li">agent_cfg_p2：选填项，string 类型，P2 代理节点配置变量。值在 <em class="+ topic/ph hi-d/i ph i">files.tfvar</em> 中定义。</li><li class="- topic/li li">controller_cfg_p3：选填项，string 类型，P3 控制节点配置变量。值在 <em class="+ topic/ph hi-d/i ph i">files.tfvar</em> 中定义。</li><li class="- topic/li li">agent_cfg_p3：选填项，string 类型，P3 代理节点配置变量数。值在 <em class="+ topic/ph hi-d/i ph i">files.tfvar</em> 中定义。</li></ol></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title17" id="配置-filestfvars-文件-1"><h3 class="- topic/title title topictitle3" id="ariaid-title17">配置 <em class="+ topic/ph hi-d/i ph i">files.tfvars</em> 文件</h3><div class="- topic/body body"><p class="- topic/p p">在 <em class="+ topic/ph hi-d/i ph i">files.tfvars</em> 文件中添加以下内容：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code># 企业版 license
dolphindb_lic_content = &lt;&lt;EOF
EOF

security_group_ids = []

cluster_nodes = &lt;&lt;EOF
localSite,mode
P1_PRI_IP:8800:controller1,controller
P2_PRI_IP:8800:controller2,controller
P3_PRI_IP:8800:controller3,controller
P1_PRI_IP:8801:agent1,agent
P1_PRI_IP:8802:datanode1,datanode
P1_PRI_IP:8803:computenode1,computenode
P2_PRI_IP:8801:agent2,agent
P2_PRI_IP:8802:datanode2,datanode
P2_PRI_IP:8803:computenode2,computenode
P3_PRI_IP:8801:agent3,agent
P3_PRI_IP:8802:datanode3,datanode
P3_PRI_IP:8803:computenode3,computenode
EOF

cluster_cfg = &lt;&lt;EOF
maxMemSize=32
maxConnections=512
workerNum=4
maxBatchJobWorker=4
OLAPCacheEngineSize=2
TSDBCacheEngineSize=2
newValuePartitionPolicy=add
maxPubConnections=64
subExecutors=4
lanCluster=0
enableChunkGranularityConfig=true
datanode1.publicName=P1_PUB_IP
computenode1.publicName=P1_PUB_IP
datanode2.publicName=P2_PUB_IP
computenode2.publicName=P2_PUB_IP
datanode3.publicName=P3_PUB_IP
computenode3.publicName=P3_PUB_IP
EOF

controller_cfg_p1 = &lt;&lt;EOF
mode=controller
localSite=P1_PRI_IP:8800:controller1
dfsReplicationFactor=2
dfsReplicaReliabilityLevel=1
dataSync=1
workerNum=4
maxConnections=512
maxMemSize=8
dfsHAMode=Raft
lanCluster=0
publicName=P1_PUB_IP
EOF

agent_cfg_p1 = &lt;&lt;EOF
mode=agent
localSite=P1_PRI_IP:8801:agent1
controllerSite=P1_PRI_IP:8800:controller1
sites=P1_PRI_IP:8801:agent1:agent,P1_PRI_IP:8800:controller1:controller,P2_PRI_IP:8800:controller2:controller,P3_PRI_IP:8800:controller3:controller
workerNum=4
maxMemSize=4
lanCluster=0
EOF

# P2 P3 相关内容已省略...</code></pre><p class="- topic/p p"><em class="+ topic/ph hi-d/i ph i">files.tfvars</em> 文件记录了 Terraform 的变量，其中包含了一些关键配置项。以下是对每个配置项的简要说明：</p><ol class="- topic/ol ol"><li class="- topic/li li">dolphindb_lic_content：证书内容。这是 DolphinDB 的证书内容，用于许可验证。可在这里配置企业版license。</li><li class="- topic/li li">security_group_ids：安全组 ID，用于定义 EC2 实例的入站和出站流量规则。</li><li class="- topic/li li">cluster_nodes：集群成员配置参数。</li><li class="- topic/li li">cluster_cfg：数据节点和计算节点配置参数。</li><li class="- topic/li li">controller_cfg_p1：P1 控制节点配置参数。</li><li class="- topic/li li">agent_cfg_p1：P1 代理节点配置参数。</li><li class="- topic/li li">controller_cfg_p2：P2 控制节点配置参数。</li><li class="- topic/li li">agent_cfg_p2：P2 代理节点配置参数。</li><li class="- topic/li li">controller_cfg_p3：P3 控制节点配置参数。</li><li class="- topic/li li">agent_cfg_p3：P3 代理节点配置参数。</li></ol></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title18" id="配置-outputtf-文件"><h3 class="- topic/title title topictitle3" id="ariaid-title18">配置 <em class="+ topic/ph hi-d/i ph i">output.tf</em> 文件</h3><div class="- topic/body body"><p class="- topic/p p">在 <em class="+ topic/ph hi-d/i ph i">output.tf</em> 文件中添加以下内容：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>output "public_ip_p1" {
  value = aws_instance.ddb_p1.public_ip
}

output "private_ip_p1" {
  value = aws_instance.ddb_p1.private_ip
}

output "public_ip_p2" {
  value = aws_instance.ddb_p2.public_ip
}

output "private_ip_p2" {
  value = aws_instance.ddb_p2.private_ip
}

output "public_ip_p3" {
  value = aws_instance.ddb_p3.public_ip
}

output "private_ip_p3" {
  value = aws_instance.ddb_p3.private_ip
}</code></pre><p class="- topic/p p">这些参数会在集群部署完成后输出，下面是参数解释：</p><ol class="- topic/ol ol"><li class="- topic/li li">public_ip_p1：p1 的公网 IP</li><li class="- topic/li li">private_ip_p1：p1 的私网 IP</li><li class="- topic/li li">public_ip_p2：p2 的公网 IP</li><li class="- topic/li li">private_ip_p2：p2 的私网 IP</li><li class="- topic/li li">public_ip_p3：p3 的公网 IP</li><li class="- topic/li li">private_ip_p3：p3 的私网 IP</li></ol></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title19" id="执行-terraform-命令-1"><h3 class="- topic/title title topictitle3" id="ariaid-title19">执行 Terraform 命令</h3><div class="- topic/body body"><p class="- topic/p p">通过终端进入 Terraform 项目文件夹：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /path/to/Dolphindb-Terraform</code></pre><p class="- topic/p p">初始化目录：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>terraform init</code></pre><p class="- topic/p p">部署实例，可以根据实际的资源和需求来填写 <em class="+ topic/ph hi-d/i ph i">variables.tf</em> 文件中定义的变量：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>terraform apply -var "region=&lt;your_region&gt;" -var "subnet_id_p1=&lt;your_subnet_id_p1&gt;" -var "subnet_id_p2=&lt;your_subnet_id_p2&gt;" -var "subnet_id_p3=&lt;your_subnet_id_p3&gt;"  -var "key_name=&lt;your_key_pair_name&gt;" -var "ddbversion=2.00.10.8" -var "az_p1=&lt;your_az_p1&gt;" -var "az_p2=&lt;your_az_p2&gt;" -var "az_p3=&lt;your_az_p3&gt;"  -var "key_location=&lt;absolute_path_of_your_key_pair&gt;" -var-file="files.tfvars"</code></pre><p class="- topic/p p">按照提示输入 <code class="+ topic/ph pr-d/codeph ph codeph">yes</code> 确认创建资源。等待 Terraform 完成部署。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title20" id="通过-web-管理界面检查-dolphindb-节点运行"><h3 class="- topic/title title topictitle3" id="ariaid-title20">通过 Web 管理界面检查 DolphinDB 节点运行</h3><div class="- topic/body body"><p class="- topic/p p">可以通过 Web 管理界面启动或关闭数据节点和计算节点，以及修改集群的配置。在浏览器中输入任一控制节点的 IP 地址和端口号即可进入 Web 管理界面，例如，P2 上控制节点的 IP 为 10.0.0.81，端口号为 8800，所以访问地址为 10.0.0.81:8800。访问后若出现如下提示，表明当前控制节点不是 Leader 节点，点击确定即可自动跳转至 Leader 节点：</p><br/><img class="- topic/image image" src="images/cloud_deployment_with_terraform/04.png" alt="04"/><br/><p class="- topic/p p">打开后的 Web 管理界面如下。以管理员身份（默认账号：admin，默认密码：123456）登录后，勾选数据节点和计算节点，再点击启动（关闭）按键即可启动（关闭）相应的数据节点和计算节点：</p><br/><img class="- topic/image image" src="images/cloud_deployment_with_terraform/05.png" alt="05"/><br/><p class="- topic/p p">刷新页面后可看到对应的数据节点和计算节点已启动，如下图所示：</p><br/><img class="- topic/image image" src="images/cloud_deployment_with_terraform/06.png" alt="06"/><br/></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title21" id="常见问题解答faq"><h2 class="- topic/title title topictitle2" id="ariaid-title21">常见问题解答(FAQ)</h2><div class="- topic/body body"></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title22" id="如何为创建的实例配置-ssh-登录"><h3 class="- topic/title title topictitle3" id="ariaid-title22">如何为创建的实例配置 SSH 登录？</h3><div class="- topic/body body"><p class="- topic/p p">在 AWS EC2 中，<code class="+ topic/ph pr-d/codeph ph codeph">key_name</code> 参数用于指定启动实例时要使用的密钥对的名称。密钥对用于对实例进行身份验证，从而允许用户通过 SSH 登录到实例。以下是详细的步骤：</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">创建密钥对：</p><p class="- topic/p p">a. 在 AWS 控制台中导航到 EC2。</p><p class="- topic/p p">b. 在左侧导航栏中，选择 "Key Pairs"（密钥对）。</p><p class="- topic/p p">c. 单击 "Create Key Pair"（创建密钥对）。</p><p class="- topic/p p">d. 输入密钥对的名称，然后选择 "Create"（创建）。</p><p class="- topic/p p">e. 保存生成的私钥文件（通常以 <code class="+ topic/ph pr-d/codeph ph codeph">.pem</code> 结尾）。</p></li><li class="- topic/li li"><p class="- topic/p p">将私钥文件添加到 SSH 代理：</p><p class="- topic/p p">在本地计算机上，使用以下命令将私钥添加到 SSH 代理。请将 <code class="+ topic/ph pr-d/codeph ph codeph">/path/to/your-key.pem</code> 替换为第一步中保存的私钥文件的实际路径。</p></li></ol><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>ssh-add /path/to/your-key.pem</code></pre><ol class="- topic/ol ol"><li class="- topic/li li">设置密钥对名称和文件位置</li></ol><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>terraform apply // 其他变量... -var "key_name=&lt;your_key_pair_name&gt;" -var "key_location=&lt;absolute_path_of_your_key_pair&gt;"</code></pre><ol class="- topic/ol ol"><li class="- topic/li li">SSH 登录到实例：</li></ol><p class="- topic/p p">使用以下命令通过 SSH 登录到 EC2 实例。请将 <code class="+ topic/ph pr-d/codeph ph codeph">your-instance-ip</code> 替换为实际的 IP 地址。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>ssh -i /path/to/your-key.pem ec2-user@your-instance-ip</code></pre><p class="- topic/p p">注意：ec2-user 是 Amazon Linux AMI 的默认用户名。请根据实际使用的 AMI 修改用户名，例如，若 AMI 是Ubuntu，则用户名填 <code class="+ topic/ph pr-d/codeph ph codeph">ubuntu</code>。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title23" id="如何更新软件授权许可"><h3 class="- topic/title title topictitle3" id="ariaid-title23">如何更新软件授权许可</h3><div class="- topic/body body"><p class="- topic/p p">在 <em class="+ topic/ph hi-d/i ph i">files.tfvars</em> 文件中，将 <code class="+ topic/ph pr-d/codeph ph codeph">dolphindb_lic_content</code> 变量的内容替换为企业版授权许可内容。同时，确保 <em class="+ topic/ph hi-d/i ph i">variables.tf</em> 文件中 <em class="+ topic/ph hi-d/i ph i">replace_dolphindb_lic</em> 的值设为 true（默认为 true）。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>dolphindb_lic_content= &lt;&lt;EOF
// 替换后的 dolphindb.lic 文件内容
EOF</code></pre></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title24" id="附录"><h2 class="- topic/title title topictitle2" id="ariaid-title24">附录</h2><div class="- topic/body body"><ul class="- topic/ul ul"><li class="- topic/li li">部署 DolphinDB 单节点完整项目代码代码：<ul class="- topic/ul ul"><li class="- topic/li li"><a class="- topic/xref xref" href="script/cloud_deployment_with_terraform/standalone/files.tfvars">files.tfvars</a></li><li class="- topic/li li"><a class="- topic/xref xref" href="script/cloud_deployment_with_terraform/standalone/main.tf">main.tf</a></li><li class="- topic/li li"><a class="- topic/xref xref" href="script/cloud_deployment_with_terraform/standalone/variables.tf">variables.tf</a></li></ul></li><li class="- topic/li li">部署 DolphinDB 高可用集群完整代码：<ul class="- topic/ul ul"><li class="- topic/li li"><a class="- topic/xref xref" href="script/cloud_deployment_with_terraform/cluster/files.tfvars">files.tfvars</a></li><li class="- topic/li li"><a class="- topic/xref xref" href="script/cloud_deployment_with_terraform/cluster/main.tf">main.tf</a></li><li class="- topic/li li"><a class="- topic/xref xref" href="script/cloud_deployment_with_terraform/cluster/variables.tf">variables.tf</a></li><li class="- topic/li li"><a class="- topic/xref xref" href="script/cloud_deployment_with_terraform/cluster/output.tf">output.tf</a></li></ul></li></ul></div></article></article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" aria-label="On this page" class="col-lg-2 d-none d-lg-block navbar d-print-none"> 
                            <div id="wh_topic_toc_content">
		                        
	                            <div class=" wh_topic_toc "><div class="wh_topic_label">在本页上</div><ul><li class="topic-item"><a href="#terraform-%E6%A6%82%E8%BF%B0" data-tocid="terraform-概述">Terraform 概述</a></li><li class="topic-item"><a href="#%E4%BD%BF%E7%94%A8%E5%89%8D%E6%8F%90" data-tocid="使用前提">使用前提</a><ul><li class="topic-item"><a href="#%E5%87%86%E5%A4%87%E7%8E%AF%E5%A2%83" data-tocid="准备环境">准备环境</a></li><li class="topic-item"><a href="#%E8%AE%BE%E7%BD%AE-aws-%E5%87%AD%E6%8D%AE" data-tocid="设置-aws-凭据">设置 AWS 凭据</a></li></ul></li><li class="topic-item"><a href="#%E9%83%A8%E7%BD%B2-dolphindb-%E5%8D%95%E8%8A%82%E7%82%B9" data-tocid="部署-dolphindb-单节点">部署 DolphinDB 单节点</a><ul><li class="topic-item"><a href="#%E5%88%9B%E5%BB%BA-terraform-%E9%A1%B9%E7%9B%AE" data-tocid="创建-terraform-项目">创建 Terraform 项目</a></li><li class="topic-item"><a href="#%E9%85%8D%E7%BD%AE-maintf-%E6%96%87%E4%BB%B6" data-tocid="配置-maintf-文件">配置 <em class="+ topic/ph hi-d/i ph i">main.tf</em> 文件</a></li><li class="topic-item"><a href="#%E9%85%8D%E7%BD%AE-variablestf-%E6%96%87%E4%BB%B6" data-tocid="配置-variablestf-文件">配置 <em class="+ topic/ph hi-d/i ph i">variables.tf</em> 文件</a></li><li class="topic-item"><a href="#%E9%85%8D%E7%BD%AE-filestfvars-%E6%96%87%E4%BB%B6" data-tocid="配置-filestfvars-文件">配置 <em class="+ topic/ph hi-d/i ph i">files.tfvars</em> 文件</a></li><li class="topic-item"><a href="#%E6%89%A7%E8%A1%8C-terraform-%E5%91%BD%E4%BB%A4" data-tocid="执行-terraform-命令">执行 Terraform 命令</a></li><li class="topic-item"><a href="#%E7%99%BB%E5%BD%95-web-%E7%AE%A1%E7%90%86%E7%95%8C%E9%9D%A2%E9%AA%8C%E8%AF%81%E8%8A%82%E7%82%B9%E6%AD%A3%E7%A1%AE%E8%BF%90%E8%A1%8C" data-tocid="登录-web-管理界面验证节点正确运行">登录 Web 管理界面验证节点正确运行</a></li></ul></li><li class="topic-item"><a href="#dolphindb-%E9%AB%98%E5%8F%AF%E7%94%A8%E9%9B%86%E7%BE%A4%E9%83%A8%E7%BD%B2" data-tocid="dolphindb-高可用集群部署">DolphinDB 高可用集群部署</a><ul><li class="topic-item"><a href="#%E5%88%9B%E5%BB%BA-terraform-%E9%A1%B9%E7%9B%AE-1" data-tocid="创建-terraform-项目-1">创建 Terraform 项目</a></li><li class="topic-item"><a href="#%E9%85%8D%E7%BD%AE-maintf-%E6%96%87%E4%BB%B6-1" data-tocid="配置-maintf-文件-1">配置 <em class="+ topic/ph hi-d/i ph i">main.tf</em> 文件</a></li><li class="topic-item"><a href="#%E9%85%8D%E7%BD%AE-variablestf-%E6%96%87%E4%BB%B6-1" data-tocid="配置-variablestf-文件-1">配置 <em class="+ topic/ph hi-d/i ph i">variables.tf</em> 文件</a></li><li class="topic-item"><a href="#%E9%85%8D%E7%BD%AE-filestfvars-%E6%96%87%E4%BB%B6-1" data-tocid="配置-filestfvars-文件-1">配置 <em class="+ topic/ph hi-d/i ph i">files.tfvars</em> 文件</a></li><li class="topic-item"><a href="#%E9%85%8D%E7%BD%AE-outputtf-%E6%96%87%E4%BB%B6" data-tocid="配置-outputtf-文件">配置 <em class="+ topic/ph hi-d/i ph i">output.tf</em> 文件</a></li><li class="topic-item"><a href="#%E6%89%A7%E8%A1%8C-terraform-%E5%91%BD%E4%BB%A4-1" data-tocid="执行-terraform-命令-1">执行 Terraform 命令</a></li><li class="topic-item"><a href="#%E9%80%9A%E8%BF%87-web-%E7%AE%A1%E7%90%86%E7%95%8C%E9%9D%A2%E6%A3%80%E6%9F%A5-dolphindb-%E8%8A%82%E7%82%B9%E8%BF%90%E8%A1%8C" data-tocid="通过-web-管理界面检查-dolphindb-节点运行">通过 Web 管理界面检查 DolphinDB 节点运行</a></li></ul></li><li class="topic-item"><a href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%A7%A3%E7%AD%94faq" data-tocid="常见问题解答faq">常见问题解答(FAQ)</a><ul><li class="topic-item"><a href="#%E5%A6%82%E4%BD%95%E4%B8%BA%E5%88%9B%E5%BB%BA%E7%9A%84%E5%AE%9E%E4%BE%8B%E9%85%8D%E7%BD%AE-ssh-%E7%99%BB%E5%BD%95" data-tocid="如何为创建的实例配置-ssh-登录">如何为创建的实例配置 SSH 登录？</a></li><li class="topic-item"><a href="#%E5%A6%82%E4%BD%95%E6%9B%B4%E6%96%B0%E8%BD%AF%E4%BB%B6%E6%8E%88%E6%9D%83%E8%AE%B8%E5%8F%AF" data-tocid="如何更新软件授权许可">如何更新软件授权许可</a></li></ul></li><li class="topic-item"><a href="#%E9%99%84%E5%BD%95" data-tocid="附录">附录</a></li></ul></div>
	                        	
                        	</div>
                        </nav>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
<title>Copyright</title><p><b> ©2025 浙江智臾科技有限公司 浙ICP备18048711号-3</b></p>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
    </body>
</html>