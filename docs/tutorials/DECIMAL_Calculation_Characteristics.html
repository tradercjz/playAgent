<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" data-whc_version="26.0">
    <head><link rel="shortcut icon" href="../favicon.ico"/><link rel="icon" href="../favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="DECIMAL 的存储分为两部分，即存储整型数据的 raw data 和存储小数位数的 scale。例如，对于DECIMAL32(2) 类型的 1.23, 它存储了两个数据：(1) raw data：即整型 123，(2) scale：即 2。这样存储的好处是，在计算时可以直接使用整型的 raw data 进行计算，从而避免精度损失。 ..."/><meta name="DC.rights.owner" content="(C) 版权 2025"/><meta name="copyright" content="(C) 版权 2025"/><meta name="generator" content="DITA-OT"/><meta name="DC.type" content="topic"/><meta name="DC.coverage" content=""/><meta name="DC.relation" content="../tutorials/about_tutorials.html"/><meta name="prodname" content="DolphinDB"/><meta name="brand" content="DolphinDB"/><meta name="DC.creator" content="DolphinDB"/><meta name="DC.publisher" content="DDB N/A DDB 200"/><meta name="DC.format" content="HTML5"/><meta name="DC.identifier" content="计算精度问题与-decimal-类型"/><title>计算精度问题与 DECIMAL 类型</title><!--  Generated with Oxygen version 26.0, build number 2024012323.  --><meta name="wh-path2root" content="../"/><meta name="wh-toc-id" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;?workdir /tmp/temp20250305183303418/tutorials?&gt;&lt;?workdir-uri file:/tmp/temp20250305183303418/tutorials/?&gt;&lt;?path2project ../?&gt;&lt;?path2project-uri ../?&gt;&lt;?path2rootmap-uri ../?&gt;&lt;topic xmlns:dita-ot=&#34;http://dita-ot.sourceforge.net/ns/201007/dita-ot&#34; xmlns:ditaarch=&#34;http://dita.oasis-open.org/architecture/2005/&#34; class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;计算精度问题与-decimal-类型&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;计算精度问题与 DECIMAL 类型&lt;/title&gt;&lt;prolog class=&#34;- topic/prolog &#34;&gt;&lt;author class=&#34;- topic/author &#34; xtrc=&#34;author:1;12:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/author&gt;&lt;publisherinformation class=&#34;- topic/publisher bookmap/publisherinformation &#34; xtrc=&#34;publisherinformation:1;14:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:1;15:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;printlocation class=&#34;- topic/data bookmap/printlocation &#34; xtrc=&#34;printlocation:1;16:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;N/A&lt;/printlocation&gt; &lt;published class=&#34;- topic/data bookmap/published &#34; xtrc=&#34;published:1;17:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:2;18:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;publishtype class=&#34;- topic/data bookmap/publishtype &#34; value=&#34;HTML&#34; xtrc=&#34;publishtype:1;19:44&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;revisionid class=&#34;- topic/ph bookmap/revisionid &#34; xtrc=&#34;revisionid:1;20:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;200&lt;/revisionid&gt; &lt;summary class=&#34;- topic/ph bookmap/summary &#34; xtrc=&#34;summary:1;22:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:1;23:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/published&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:2;25:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/publisherinformation&gt;&lt;metadata class=&#34;- topic/metadata &#34;&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:2;39:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:1;28:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;category class=&#34;- topic/category &#34; xtrc=&#34;category:1;29:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;prodinfo class=&#34;- topic/prodinfo &#34; xtrc=&#34;prodinfo:1;34:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;prodname class=&#34;- topic/prodname &#34; xtrc=&#34;prodname:1;35:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/prodname&gt; &lt;brand class=&#34;- topic/brand &#34; xtrc=&#34;brand:1;36:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/brand&gt; &lt;/prodinfo&gt;&lt;/metadata&gt;&lt;/prolog&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;/&gt;&lt;related-links class=&#34;- topic/related-links &#34;&gt;&lt;linkpool class=&#34;- topic/linkpool &#34; xtrc=&#34;topicref:24;42:98&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;../tutorials/about_tutorials.dita&#34; mapclass=&#34;- map/topicref bookmap/chapter &#34; role=&#34;parent&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:1;5:53&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot usertext?&gt;教程&lt;/linktext&gt;&lt;?ditaot usershortdesc?&gt;&lt;desc class=&#34;- topic/desc &#34;&gt;DolphinDB 产品使用教程&lt;/desc&gt;&lt;/link&gt;&lt;/linkpool&gt;&lt;/related-links&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1-decimal-的计算特性&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:2;4:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:2;4:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;1. DECIMAL 的计算特性&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:2;4:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;11-decimal-的计算方式&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:3;6:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:3;6:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;1.1. DECIMAL 的计算方式&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:3;6:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:1;8:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL 的存储分为两部分，即存储整型数据的 raw data 和存储小数位数的 scale。例如，对于DECIMAL32(2) 类型的 1.23, 它存储了两个数据：(1) raw data：即整型 123，(2) scale：即 2。这样存储的好处是，在计算时可以直接使用整型的 raw data 进行计算，从而避免精度损失。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:2;10:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;对于大多数计算函数，如果最后返回的结果是浮点数类型，DECIMAL 在进行计算时， 会使用 raw data 参与计算，尽量延迟转换成浮点数的时机，从而确保得到精确结果。比如计算 avg 时，假设数据为 DECIMAL32(2) 类型：[1.11, 2.22, 3.33]，其 raw data 为：[111, 222, 333]。在计算时，先算出 raw data 的 sum：111 + 222 + 333 = 666，然后转换成浮点数：double(666) / 102 / 3 = 2.22。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:3;12:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;对于DECIMAL算术运算的规则，可参照：&lt;xref class=&#34;- topic/xref &#34; dita-ot:orig-format=&#34;md&#34; format=&#34;dita&#34; href=&#34;DECIMAL.md#算术计算的溢出检查&#34; xtrc=&#34;xref:1;12:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;?ditaot usertext?&gt;DECIMAL.md&lt;/xref&gt;。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;12-decimal-的计算输出&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:4;14:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:4;14:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;1.2. DECIMAL 的计算输出&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:4;14:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:4;16:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;本节主要讲述DECIMAL作为计算函数输入的输出结果。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:5;18:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;在 DolphinDB 计算函数中，以 DECIMAL 类型作为输入，输出结果仍为 DECIMAL 类型的函数较少，仅有：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:1;18:62&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;sum&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:2;18:68&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;max&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:3;18:74&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;min&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:4;18:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;first&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:5;18:88&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;last&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:6;18:95&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;firstNot&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:7;18:106&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;lastNot&lt;/codeph&gt; 及其 cum、m、tm、TopN 系列函数，如 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:8;18:140&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;cummax&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:9;18:149&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;mmin&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:10;18:156&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;tmsum&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:11;18:164&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;msumTopN&lt;/codeph&gt;，&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:12;18:175&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;cumsumTopN&lt;/codeph&gt;，&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:13;18:188&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;tmsumTopN&lt;/codeph&gt; 等；以及 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:14;18:205&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;cumPositiveStreak&lt;/codeph&gt;。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:1;20:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;a = decimal64(rand(10,100),4) typestr(sum(a)) &amp;gt;&amp;gt; DECIMAL128 typestr(cummax(a)) &amp;gt;&amp;gt; FAST DECIMAL64 VECTOR typestr(mmin(a,5)) &amp;gt;&amp;gt; FAST DECIMAL64 VECTOR T = 2023.03.23..2023.06.30 typestr(tmsum(T, a, 3)) &amp;gt;&amp;gt; FAST DECIMAL128 VECTOR typestr(cumPositiveStreak(a)) &amp;gt;&amp;gt; FAST DECIMAL128 VECTOR&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:6;40:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;需要注意的是，在引入 DECIMAL128 类型后，自 2.00.10 版本起，sum 系列函数和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:15;40:51&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;cumPositiveStreak&lt;/codeph&gt; 的输入输出类型对应规则如下：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:1;42:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:1;42:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:1;42:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:2;42:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:3;42:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:1;42:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:1;42:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:1;42:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:1;42:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;计算函数&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:2;42:61&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:2;42:62&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;输入类型&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:3;42:72&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:3;42:73&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;输出类型&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:1;44:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:2;44:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:4;44:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;sum/cumsum/msum/tmsum/msumTopN/cumsumTopN/tmsumTopN/cumPositiveStreak&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:5;44:74&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL32&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:6;44:89&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:3;45:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:7;45:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt; &lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:8;45:56&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:9;45:70&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL128&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:4;46:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:10;46:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt; &lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:11;46:55&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL128&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:12;46:70&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL128&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:7;48:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;除了上述函数外，cum、m、tm、TopN 系列的函数，包括它们对应的原始的函数，比如 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:16;48:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;avg&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:17;48:51&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;std&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:18;48:57&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;var&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:19;48:63&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;skew&lt;/codeph&gt; 等，以 DECIMAL 类型作为输入，都将返回 DOUBLE 类型的输出结果。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:2;50:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;a = decimal64(rand(10,100),4) typestr(avg(a)) &amp;gt;&amp;gt; DOUBLE typestr(cumstd(a)) &amp;gt;&amp;gt; FAST DOUBLE VECTOR typestr(mvar(a,5)) &amp;gt;&amp;gt; FAST DOUBLE VECTOR T = 2023.03.23..2023.06.30 typestr(tmskew(T, a, 3)) &amp;gt;&amp;gt; FAST DOUBLE VECTOR&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:8;67:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;下面将以 DECIMAL64 作为输入为例，列出常见计算函数的输出结果类型。&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:2;69:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:2;69:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:4;69:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:5;69:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:6;69:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:2;69:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:5;69:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:13;69:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:4;69:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;计算函数&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:14;69:61&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:5;69:62&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;输入类型&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:15;69:72&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:6;69:73&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;输出类型&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:2;71:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:6;71:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:16;71:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;sum/cumsum/msum/tmsum&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:17;71:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:18;71:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL128&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:7;72:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:19;72:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;msumTopN/cumsumTopN/tmsumTopN&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:20;72:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:21;72:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL128&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:8;73:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:22;73:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;max/cummax/mmax/tmmax&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:23;73:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:24;73:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:9;74:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:25;74:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;min/cummin/mmin/tmmin&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:26;74:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:27;74:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:10;75:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:28;75:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;first/mfirst/tmfirst&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:29;75:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:30;75:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:11;76:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:31;76:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;last/mlast/tmlast&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:32;76:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:33;76:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:12;77:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:34;77:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;firstNot/cumfirstNot&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:35;77:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:36;77:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:13;78:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:37;78:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;lastNot/cumlastNot&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:38;78:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:39;78:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:14;79:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:40;79:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;cumPositiveStreak&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:41;79:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:42;79:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL128&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:15;80:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:43;80:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;avg/cumavg/mavg/tmavg/mavgTopN/cumavgTopN/tmavgTopN&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:44;80:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:45;80:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:16;81:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:46;81:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;sum2/cumsum2/msum2/tmsum2&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:47;81:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:48;81:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:17;82:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:49;82:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;prod/cumprod/mprod/tmprod&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:50;82:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:51;82:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:18;83:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:52;83:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;med/cummed/mmed/tmmed&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:53;83:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:54;83:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:19;84:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:55;84:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;std/cumstd/mstd/tmstd/mstdTopN/cumstdTopN/tmstdTopN&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:56;84:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:57;84:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:20;85:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:58;85:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;skew/mskew/tmskew/mskewTopN/cumskewTopN/tmskewTopN&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:59;85:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:60;85:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:21;86:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:61;86:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;kurtosis/mkurtosis/tmkurtosis/mkurtosisTopN/cumkurtosisTopN/tmkurtosisTopN&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:62;86:79&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:63;86:94&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:22;87:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;18&#34; xtrc=&#34;entry:64;87:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;corr/cumcorr/mcorr/tmcorr/mcorrTopN/cumcorrTopN/tmcorrTopN&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;18&#34; xtrc=&#34;entry:65;87:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;18&#34; xtrc=&#34;entry:66;87:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:23;88:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;19&#34; xtrc=&#34;entry:67;88:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;covar/cumcovar/mcovar/tmcovar/mcovarTopN/cumcovarTopN/tmcovarTopN&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;19&#34; xtrc=&#34;entry:68;88:70&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;19&#34; xtrc=&#34;entry:69;88:85&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:24;89:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;20&#34; xtrc=&#34;entry:70;89:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;beta/cumbeta/mbeta/tmbeta/mbetaTopN/cumbetaTopN/tmbetaTopN&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;20&#34; xtrc=&#34;entry:71;89:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;20&#34; xtrc=&#34;entry:72;89:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;2-decimal-的优缺点&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:5;91:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:5;91:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;2. DECIMAL 的优缺点&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:5;91:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;21-decimal-的优点&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:6;93:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:6;93:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;2.1. DECIMAL 的优点&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:6;93:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:9;95:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;实数在计算机内部无法被精确地表示为浮点数的原因主要有两个：第一个原因是类似于 0.1 这样的数字，具有有限的十进制表示，但是在二进制中能表示为无穷重复的数据，等于 0.1 的近似值，无法被精确表示；第二个原因是数值超出了数据类型能表示的数值范围，系统将对数据做一定处理。与浮点数相比，DECIMAL 类型最大的优点，就在于它能够精确地表示和计算数据。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:10;97:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;例如，在表示123.0001时：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:3;99:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;a =123.0001 print(a) &amp;gt;&amp;gt; 123.000100000000003 b = decimal64(`123.0001,15) print(b) &amp;gt;&amp;gt; 123.000100000000000&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:11;109:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;可见，浮点数无法精确表示123.0001，而 DECIMAL 可以。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:12;111:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;在计算 avg 时：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:4;113:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;a = array(DOUBLE,0) for (i in 1..100){ a.append!(123.0000+0.0003*i) } avg(a) &amp;gt;&amp;gt; 123.015149999999 avg(a) == 123.01515 &amp;gt;&amp;gt; false eqFloat(avg(a),123.01515) &amp;gt;&amp;gt; true b= array(DECIMAL64(4),0) for (i in 1..100){ b.append!(123.0000+0.0003*i) } avg(b) &amp;gt;&amp;gt; 123.015150000000 typestr(avg(b)) &amp;gt;&amp;gt; DOUBLE avg(b) == 123.01515 &amp;gt;&amp;gt; true&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:13;137:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;可见，在进行 avg 计算时，浮点数没有返回精确结果，而 DECIMAL 虽然返回结果也是 DOUBLE 类型，但返回了精确结果。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;22-decimal-的缺点&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:7;139:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:7;139:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;2.2. DECIMAL 的缺点&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:7;139:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;221-容易溢出&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:8;141:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:8;141:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;2.2.1. 容易溢出&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:8;141:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:14;143:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL32/DECIMAL64/DECIMAL128 类型的数值范围如下表所示，其中，DECIMAL32(S)、DECIMAL64(S) 和 DECIMAL128(S) 中的 S 表示保留的小数位数。&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:3;145:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;6&#34; xtrc=&#34;tgroup:3;145:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:7;145:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:8;145:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:9;145:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col4&#34; colnum=&#34;4&#34; xtrc=&#34;colspec:10;145:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col5&#34; colnum=&#34;5&#34; xtrc=&#34;colspec:11;145:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col6&#34; colnum=&#34;6&#34; xtrc=&#34;colspec:12;145:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:3;145:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:25;145:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:73;145:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt; &lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:74;145:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:7;145:16&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;底层存储数据类型&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:75;145:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:8;145:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;字节占用&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:76;145:41&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:9;145:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;Scale有效范围&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:77;145:57&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:10;145:58&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;有效数值范围&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:78;145:93&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:11;145:94&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;最大表示位数&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:3;147:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:26;147:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:79;147:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL32&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:80;147:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;int32_t&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:81;147:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;占用4个字节&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:82;147:48&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;[0,9]&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:83;147:69&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;(-1 * 10&lt;sup class=&#34;+ topic/ph hi-d/sup &#34; xtrc=&#34;sup:1;147:78&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;(9 - S)&lt;/sup&gt;, 1 * 10&lt;sup class=&#34;+ topic/ph hi-d/sup &#34; xtrc=&#34;sup:2;147:104&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;(9 - S)&lt;/sup&gt;))&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:84;147:130&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;9位&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:27;148:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:85;148:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:86;148:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;int64_t&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:87;148:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;占用8个字节&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:88;148:48&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;[0,18]&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:89;148:69&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;(-1 * 10 &lt;sup class=&#34;+ topic/ph hi-d/sup &#34; xtrc=&#34;sup:3;148:79&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt; (18 - S)&lt;/sup&gt;, 1 * 10 &lt;sup class=&#34;+ topic/ph hi-d/sup &#34; xtrc=&#34;sup:4;148:108&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt; (18 - S)&lt;/sup&gt;)&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:90;148:131&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;18位&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:28;149:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:91;149:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL128&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:92;149:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;int128_t&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:93;149:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;占用16个字节&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:94;149:48&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;[0,38]&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:95;149:69&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;(-1 * 10 &lt;sup class=&#34;+ topic/ph hi-d/sup &#34; xtrc=&#34;sup:5;149:79&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt; (38 - S)&lt;/sup&gt;, 1 * 10 &lt;sup class=&#34;+ topic/ph hi-d/sup &#34; xtrc=&#34;sup:6;149:108&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt; (38 - S)&lt;/sup&gt;)&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:96;149:131&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;38位&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:15;151:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;在有效数值范围和最大表示位数的限制下，DECIMAL 类型很容易溢出。自 2.00.10 版本起，我们支持算术运算溢出后，若存在更高精度的类型，则将自动拓展结果的数据类型，从而降低溢出风险：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:5;153:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;version 2.00.9.6： a = decimal32(4.0000,4) b = decimal32(8.0000,4) c = a*b &amp;gt;&amp;gt; Server response: 'c = a * b =&amp;gt; Decimal math overflow' version 2.00.10： a = decimal32(4.0000,4) b = decimal32(8.0000,4) c = a*b print(c) &amp;gt;&amp;gt; 32.00000000 typestr(c) &amp;gt;&amp;gt; DECIMAL64&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:16;171:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;但即使如此，DECIMAL128 仍存在溢出风险：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:6;173:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;a = decimal128(36.00000000,8) b = a*a*a*a &amp;gt;&amp;gt; Server response: 'b = a * a * a * a =&amp;gt; Decimal math overflow'&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:17;179:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;如上所示，由于 DolphinDB 中 DECIMAL 类型的数据乘法运算结果的 scale 是逐个累加的，b 的预期结果将会是 1679616.00000000000000000000000000000000，将会有39位数字，超出了 DECIMAL128 的最大表示位数38位，导致了溢出。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:18;181:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;2.00.10版本新增支持了 DECIMAL 类型的乘法函数 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:20;181:32&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;decimalMultiply&lt;/codeph&gt;，与 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:21;181:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;multiply&lt;/codeph&gt; 函数 (&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:22;181:67&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;*&lt;/codeph&gt; 运算符) 相比，该函数可以指定计算结果的精度。当 DEICMAL 类型的乘法运算导致 scale 累加存在溢出风险时，可以按需使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:23;181:137&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;decimalMultiply&lt;/codeph&gt; 函数，指定计算结果精度。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:7;183:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;a = decimal64(36.00000000,8) decimalMultiply(a, a, 8) &amp;gt;&amp;gt; 1296.00000000&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;222-转换误差&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:9;189:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:9;189:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;2.2.2. 转换误差&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:9;189:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:19;191:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;当我们直接使用常量生成 DECIMAL 类型时，可能会因为浮点数的转换产生误差：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:8;193:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;a = 0.5599 decimal64(a,4) &amp;gt;&amp;gt; 0.5598&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:20;199:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;为了避免这种误差，可以使用字符串来生成 DECIMAL：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:9;201:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;a = &#34;0.5599&#34; decimal64(a,4) &amp;gt;&amp;gt; 0.5599&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;223-内存占用&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:10;207:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:10;207:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;2.2.3. 内存占用&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:10;207:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:21;209:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL32、DECIMAL64 和 DECIMAL128 类型在内存中分别占用4个字节、8个字节和16个字节，而 FLOAT 和 DOUBLE 类型在内存中占用4个字节和8个字节。因此，在数据量相同的情况下，DECIMAL128 占用的内存是 DOUBLE 的两倍。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:22;211:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;且由于算术运算溢出后，将自动拓展结果的数据类型，每次拓展后等量数据占用的内存将翻倍，存在一定的内存风险。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;224-性能差异&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:11;213:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:11;213:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;2.2.4. 性能差异&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:11;213:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:23;215:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;与 FLOAT 和 DOUBLE 类型相比，DECIMAL 类型的计算速度更慢，我们将在第三节中进行详细比较。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;225-局限性&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:12;217:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:12;217:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;2.2.5. 局限性&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:12;217:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:24;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;在 DolphinDB 中，DECIMAL 类型与 FLOAT/DOUBLE 类型相比，目前所支持的功能和结构较少。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:1;221:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:1;221:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;在函数支持方面，尚有少部分计算函数不支持 DECIMAL 类型。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:2;222:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;计算结果方面，cum, tm, m, TopN 系列的函数，包括它们对应的原始的函数（&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:24;222:46&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;sum&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:25;222:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;max&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:26;222:58&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;min&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:27;222:64&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;firstNot&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:28;222:75&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;lastNot&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:29;222:85&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;cumPositiveStreak&lt;/codeph&gt; 除外），即使原始数据是 DECIMAL 类型，返回结果还是浮点数类型。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:3;223:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;数据结构方面，DolphinDB 系统目前暂未支持 DECIMAL 类型在 matrix 和 set 中使用。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:4;224:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;数据类型转换方面，DolphinDB 系统暂不支持 BOOL/CHAR/SYMBOL/UUID/IPADDR/INT128 等类型和 temporal 集合下的时间相关类型与 DECIMAL 类型相互转换，其中 STRING/BLOB 类型的数据如需转换成 DECIMAL 类型，必须满足 STRING/BLOB 类型的数据可以转换成数值类型的前提。&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;3-浮点数与-decimal-计算性能差异比较&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:13;226:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:13;226:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;3. 浮点数与 DECIMAL 计算性能差异比较&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:13;226:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:25;228:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;为了比较浮点数类型与 DECIMAL 类型的计算性能差异，我们选取了一些常用的计算函数，比较相同数据情况下，各个数据类型的计算耗时。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:26;230:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;首先，模拟数据脚本如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:10;232:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;n = 1000000 data1 = rand(float(100.0),n) data2 = double(data1) data3 = decimal32(data1,4) data4 = decimal64(data1,4) data5 = decimal128(data1,4)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:27;241:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;随后，使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:30;241:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;timer&lt;/codeph&gt; 语句统计常用计算函数对于各个类型数据的计算耗时：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:11;243:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;timer(100){sum(data1)} //执行100次，避免单次计算误差，并放大不同类型间的耗时差异 timer(100){sum(data2)} timer(100){sum(data3)} timer(100){sum(data4)} timer(100){sum(data5)} ... ...&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:28;252:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;得到的计算耗时统计结果如下（单位：ms）：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:4;254:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;6&#34; xtrc=&#34;tgroup:4;254:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:13;254:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:14;254:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:15;254:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col4&#34; colnum=&#34;4&#34; xtrc=&#34;colspec:16;254:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col5&#34; colnum=&#34;5&#34; xtrc=&#34;colspec:17;254:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col6&#34; colnum=&#34;6&#34; xtrc=&#34;colspec:18;254:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:4;254:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:29;254:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:97;254:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt; &lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:98;254:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:12;254:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;FLOAT&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:99;254:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:13;254:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DOUBLE&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:100;254:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:14;254:43&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL32&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:101;254:58&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:15;254:59&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL64&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:102;254:74&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:16;254:75&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;DECIMAL128&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:4;256:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:30;256:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:103;256:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:17;256:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;sum&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:104;256:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;52.985&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:105;256:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;64.331&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:106;256:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;28.721&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:107;256:58&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;57.234&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:108;256:74&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;107.126&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:31;257:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:109;257:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:18;257:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;sum2&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:110;257:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;173.278&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:111;257:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;211.772&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:112;257:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;176.261&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:113;257:58&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;180.051&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:114;257:74&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;603.422&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:32;258:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:115;258:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:19;258:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;prod&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:116;258:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;63.650&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:117;258:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;55.641&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:118;258:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;171.718&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:119;258:58&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;174.389&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:120;258:74&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;18850.009&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:33;259:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:121;259:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:20;259:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;avg&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:122;259:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;178.086&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:123;259:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;210.495&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:124;259:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;26.094&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:125;259:58&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;106.869&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:126;259:74&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;258.508&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:34;260:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:127;260:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:21;260:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;std&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:128;260:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;362.388&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:129;260:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;345.758&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:130;260:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;278.933&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:131;260:58&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;319.177&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:132;260:74&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;968.276&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:35;261:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:133;261:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:22;261:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;kurtosis&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:134;261:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;547.751&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:135;261:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;407.561&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:136;261:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;585.859&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:137;261:58&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;769.879&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:138;261:74&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;1013.591&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:36;262:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:139;262:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:23;262:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;skew&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:140;262:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;546.705&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:141;262:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;439.348&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:142;262:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;622.758&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:143;262:58&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;842.994&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:144;262:74&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;1074.128&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:29;264:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;根据上述统计结果，可以得知：&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:30;266:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;（1）对于大部分计算函数，DECIMAL 的性能都比 FLOAT/DOUBLE 差；&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:31;268:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;（2）DECIMAL128 在计算时，会转换成 LONG DOUBLE（DECIMAL32/DECIMAL64 会转换成 DOUBLE），而 LONG DOUBLE 的实现取决于编译器和 CPU，可能是 12 字节或者 16 字节，LONG DOUBLE 的乘法在数据很大时非常耗时。在本节的测试样例中，vector 里的元素的取值范围较大，所以其乘积非常大，计算非常耗时。而如果把取值范围取小一些，比如 [0.5, 1.0]，则 DECIMAL128 的计算和 DECIMAL32/DECIMAL64 相差不大；&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:32;270:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;（3）对于 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:31;270:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;sum&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:32;270:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;avg&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:33;270:19&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;std&lt;/codeph&gt; 这样的函数，DECIMAL 类型在计算时都没有做循环展开，而浮点数类型对 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:34;270:62&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;sum&lt;/codeph&gt; 做了循环展开，&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:35;270:75&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;avg&lt;/codeph&gt; 则没有。此外，由于 DECIMAL 计算时会使用 raw data 先参与计算，再直接返回 DECIMAL 类型或转化为浮点数，本质是整型计算，实际过程比浮点数运算更高效。因此，它们的性能相差不大，甚至 DECIMAL32/DECIMAL64 的性能比 FLOAT/DOUBLE 更好。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;4-decimal-最佳实践避免-mavg-计算精度损失&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:14;272:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:14;272:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;4. DECIMAL 最佳实践：避免 mavg 计算精度损失&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:14;272:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:33;274:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;本节将以具体场景，比较 DECIMAL 类型和浮点数类型在实际计算中的精度差异。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:34;277:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:36;277:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;mavg&lt;/codeph&gt; 和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:37;277:10&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;moving(avg,…)&lt;/codeph&gt; 虽然在含义上完全相同，但两者的实现方式并不一致。&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:38;277:50&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;mavg&lt;/codeph&gt; 的算法是：随着窗口的移动，总和加上进入窗口的数，减去离开窗口的数，再计算 avg，所以在这个加减的过程中，会产生浮点数精度问题。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:35;279:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;首先，我们导入样例数据 &lt;xref class=&#34;- topic/xref &#34; format=&#34;csv&#34; href=&#34;data/DECIMAL_Calculation_Characteristics/tick.csv&#34; xtrc=&#34;xref:2;279:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;?ditaot usertext?&gt;tick.csv&lt;/xref&gt;，原始数据类型均为 DOUBLE 类型，并计算 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:39;279:98&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;mavg&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:40;279:105&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;moving(avg,…)&lt;/codeph&gt;：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:12;281:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;data = loadText(&#34;&amp;lt;yourDirectory&amp;gt;/tick.csv&#34;) t = select MDTime, ((LastPx - prev(LastPx)) / (prev(LastPx) + 1E-10) * 1000) as val, mavg(((LastPx - prev(LastPx)) / (prev(LastPx) + 1E-10) * 1000), 20, 1), moving(avg, ((LastPx - prev(LastPx)) / (prev(LastPx) + 1E-10) * 1000), 20, 1) from data&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:36;292:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;得到的结果如下图所示：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/DECIMAL_Calculation_Characteristics/4_1.png&#34; width=&#34;55%&#34; xtrc=&#34;image:1;294:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34; dita-ot:image-width=&#34;763&#34; dita-ot:image-height=&#34;745&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:37;296:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;可以看到，计算结果从09:31:53.000开始产生误差。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:38;298:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;为了避免这种计算误差，我们先将中间计算结果转换为 DECIMAL128 类型，再计算 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:41;298:44&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;mavg&lt;/codeph&gt; 和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:42;298:53&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;moving(avg,…)&lt;/codeph&gt;：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:13;300:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;t = select MDTime, ((LastPx - prev(LastPx)) / (prev(LastPx) + 1E-10) * 1000) as val, mavg(decimal128(((LastPx - prev(LastPx)) / (prev(LastPx) + 1E-10) * 1000),12), 20, 1), moving(avg, decimal128(((LastPx - prev(LastPx)) / (prev(LastPx) + 1E-10) * 1000),12), 20, 1) from data&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:39;309:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;得到的结果如下图所示：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/DECIMAL_Calculation_Characteristics/4_2.png&#34; width=&#34;55%&#34; xtrc=&#34;image:2;311:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34; dita-ot:image-width=&#34;738&#34; dita-ot:image-height=&#34;749&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:40;313:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;可以看到，&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:43;313:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;mavg&lt;/codeph&gt; 和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:44;313:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;moving(avg,…)&lt;/codeph&gt; 的计算结果完全一致。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:41;315:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;由于浮点数的精度问题，cum, tm, m, TopN 系列的函数，包括它们对应的原始的函数，比如 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:45;315:51&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;avg&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:46;315:57&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;std&lt;/codeph&gt; 等，都有可能导致计算的精度误差。在对精度极为关注的场景下，我们推荐使用 DECIMAL 进行计算。需要注意的是，除了 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:47;315:122&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;sum&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:48;315:128&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;max&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:49;315:134&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;min&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:50;315:140&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;firstNot&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:51;315:151&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;lastNot&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:52;315:161&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;cumPositiveStreak&lt;/codeph&gt; 及其对应的系列函数，在入参是 DECIMAL 类型时能够返回 DECIMAL 类型的计算结果，其他函数都将返回浮点数类型。虽然存在一定的 DECIMAL 类型转换为浮点数类型的精度误差风险，但避免了计算过程中的精度损失，也可以对计算结果使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:53;315:302&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;round&lt;/codeph&gt; 函数或再次转换为 DECIMAL 类型，得到相对精确的结果。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;5-总结&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:15;317:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:15;317:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;5. 总结&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:15;317:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:42;319:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;浮点数由于其实现方式，在计算机内部无法精确地表示某些数值，因而容易出现精度误差，导致存储或计算结果与预期不符。DECIMAL 可以精确表示数值，但存在容易溢出、内存占用大、性能较劣、有一定局限性等缺点。尽管如此，在某些场景中，选用 DECIMAL 类型依旧能够很好地避免存储或计算结果与预期不符的情况出现。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:43;321:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/DECIMAL_Calculation_Characteristics.md&#34;&gt;综上所述，在实际应用时，需要考虑具体需要，选用合适的数据类型，对数据进行相应的精度管理。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;"/><meta name="wh-source-relpath" content="tutorials/DECIMAL_Calculation_Characteristics.md"/><meta name="wh-out-relpath" content="tutorials/DECIMAL_Calculation_Characteristics.html"/>

    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/commons.css?buildId=2024012323"/>
    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic.css?buildId=2024012323"/>

    <script src="../oxygen-webhelp/app/options/properties.js?buildId=20250305183303"></script>
    <script src="../oxygen-webhelp/app/localization/strings.js?buildId=2024012323"></script>
    <script src="../oxygen-webhelp/app/search/index/keywords.js?buildId=20250305183303"></script>
    <script defer="defer" src="../oxygen-webhelp/app/commons.js?buildId=2024012323"></script>
    <script defer="defer" src="../oxygen-webhelp/app/topic.js?buildId=2024012323"></script>
<link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/styles.css?buildId=2024012323"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script></head>

    <body id="计算精度问题与-decimal-类型" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            跳转到主要内容
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div xmlns:whc="http://www.oxygenxml.com/webhelp/components" class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="https://docs.dolphindb.cn/zh/index.html" class=" wh_logo d-none d-sm-block "><img src="../logo.png" alt="  DolphinDB 文档中心  "/></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="booktitle">  <span class="ph mainbooktitle">DolphinDB 文档中心</span>  </span></a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="搜索 " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="搜索查询" required="required"/><button type="submit" class="wh_search_button" aria-label="搜索"><span class="search_input_text">搜索</span></button></div></form>
            
            <script src="/vendors/react/umd/react.production.min.js" defer="defer"></script>
<script src="/vendors/react-dom/umd/react-dom.production.min.js" defer="defer"></script>
<script src="/vendors/dayjs/dayjs.min.js" defer="defer"></script>
<script src="/vendors/antd/dist/antd.min.js" defer="defer"></script>
<script src="/vendors/@ant-design/icons/dist/index.umd.min.js" defer="defer"></script>
<script src="/zh/index.js" type="module"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" defer="defer"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer="defer"><!--


--></script>
<script defer="defer"><!--

// 从主页重定向
const currentUrl = window.location.href;

// 判断当前URL是否包含index.html并且路径最后部分是index.html
if (currentUrl.endsWith('index.html')) {
    // 处理根目录下的index.html跳转
    const baseUrl = currentUrl.split('/index.html')[0]; // 获取index.html之前的部分
    const redirectUrl = `${baseUrl}/about/ddb_intro.html`; // 构建跳转路径
    window.location.href = redirectUrl; // 执行跳转
}

--></script>
            
        </div></div>
    </div>
</header>
        
        
         
        
        
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="../index.html"><span>主页</span></a></span></li><li><div class="topicref" data-id="about_tutorials"><div class="title"><a href="../tutorials/about_tutorials.html"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div></li><li><div class="topicref"><div class="title"><a href="../tutorials/std_sql_ddb.html">编程</a></div></div></li><li class="active"><div class="topicref" data-id="计算精度问题与-decimal-类型"><div class="title"><a href="../tutorials/DECIMAL_Calculation_Characteristics.html">计算精度问题与 DECIMAL 类型</a></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="切换搜索突出显示" title="切换搜索突出显示"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="折叠截面" title="折叠截面"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="打印此页" aria-label="打印此页"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem"><div data-tocid="ddb_intro-d9713e87" class="topicref" data-id="ddb_intro" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../about/ddb_intro.html" id="ddb_intro-d9713e87-link">关于DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="chap1_getstarted-d9713e136" class="topicref" data-id="chap1_getstarted" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../getstarted/chap1_getstarted.html" id="chap1_getstarted-d9713e136-link">快速上手</a><div class="wh-tooltip"><p class="shortdesc">如何快速部署 DolphinDB、建库建表、写入和查询数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="sectionddb_deployment-d9713e189" class="topicref" data-id="sectionddb_deployment" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action sectionddb_deployment-d9713e189-link" class="wh-expand-btn"></span><div class="title"><a href="../deploy/deploy_intro.html" id="sectionddb_deployment-d9713e189-link"><span class="keyword label">部署</span></a><div class="wh-tooltip"><p class="shortdesc">如何在不同的场景中部署 DolphinDB</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259" class="topicref" data-id="new_chap_database_manage_new_chap_dbmanage_landing_page" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/cfg/db_intro.html" id="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link"><span class="keyword label">数据库</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 数据库的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_streaming-d9713e3760" class="topicref" data-id="chap7_tutorials_streaming" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_streaming-d9713e3760-link" class="wh-expand-btn"></span><div class="title"><a href="../stream/str_intro.html" id="chap7_tutorials_streaming-d9713e3760-link"><span class="keyword label">流数据</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 流数据引擎及流数据计算的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e7513" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e7513-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/db_oper/import_data.html" id="tocId-d9713e7513-link">数据迁移</a><div class="wh-tooltip"><p class="shortdesc">如何从不同数据源向 DolphinDB 迁移数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_system_management-d9713e7940" class="topicref" data-id="chap7_tutorials_system_management" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_system_management-d9713e7940-link" class="wh-expand-btn"></span><div class="title"><a href="../sys_man/om_intro.html" id="chap7_tutorials_system_management-d9713e7940-link"><span class="keyword label">系统运维</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 的系统运维功能及方法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="troubleshooting-d9713e8780" class="topicref" data-id="troubleshooting" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action troubleshooting-d9713e8780-link" class="wh-expand-btn"></span><div class="title"><a href="../error_codes/troubleshooting.html" id="troubleshooting-d9713e8780-link">故障排查</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="about_language_resources-d9713e20911" class="topicref" data-id="about_language_resources" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action about_language_resources-d9713e20911-link" class="wh-expand-btn"></span><div class="title"><a href="../progr/progr_intro.html" id="about_language_resources-d9713e20911-link"><span class="keyword label">编程语言</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 编程基本概念与方法、SQL 在 DolphinDB 的应用</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="functions_references-d9713e30925" class="topicref" data-id="functions_references" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action functions_references-d9713e30925-link" class="wh-expand-btn"></span><div class="title"><a href="../funcs/funcs_intro.html" id="functions_references-d9713e30925-link"><span class="keyword label">函数参考</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 函数分类、语法、详解及示例</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="api_protocol-d9713e94064" class="topicref" data-id="api_protocol" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action api_protocol-d9713e94064-link" class="wh-expand-btn"></span><div class="title"><a href="../api/connapi_intro.html" id="api_protocol-d9713e94064-link"><span class="keyword label">连接器 &amp; API</span></a><div class="wh-tooltip"><p class="shortdesc">面向不同编程语言的 DolphinDB API 及连接器，相关协议和用法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap6_plugin-d9713e94210" class="topicref" data-id="chap6_plugin" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap6_plugin-d9713e94210-link" class="wh-expand-btn"></span><div class="title"><a href="../plugins/plg_intro.html" id="chap6_plugin-d9713e94210-link"><span class="keyword label">插件</span></a><div class="wh-tooltip"><p class="shortdesc">多个应用场景的插件使用说明和插件开发指导</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="third_party-d9713e97904" class="topicref" data-id="third_party" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action third_party-d9713e97904-link" class="wh-expand-btn"></span><div class="title"><a href="../third_party.html" id="third_party-d9713e97904-link">第三方工具</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="about_tutorials-d9713e98227" class="topicref" data-id="about_tutorials" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action about_tutorials-d9713e98227-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/about_tutorials.html" id="about_tutorials-d9713e98227-link"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98280" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98280-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/new_users_finance.html" id="tocId-d9713e98280-link">新用户入门</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98327" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98327-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/database.html" id="tocId-d9713e98327-link">数据库</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="tocId-d9713e99111" class="topicref" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action tocId-d9713e99111-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/std_sql_ddb.html" id="tocId-d9713e99111-link">编程</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="sql-标准化-d9713e99112" class="topicref" data-id="sql-标准化" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/std_sql_ddb.html" id="sql-标准化-d9713e99112-link">SQL 标准化</a></div></div></li><li role="treeitem"><div data-tocid="topn-系列函数-d9713e99158" class="topicref" data-id="topn-系列函数" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/DolphinDB_TopN.html" id="topn-系列函数-d9713e99158-link">TopN 系列函数</a></div></div></li><li role="treeitem"><div data-tocid="使用-summary-函数生成大规模数据统计信息-d9713e99204" class="topicref" data-id="使用-summary-函数生成大规模数据统计信息" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/generate_large_scale_statistics_with_summary.html" id="使用-summary-函数生成大规模数据统计信息-d9713e99204-link">使用 summary 函数生成大规模数据统计信息</a></div></div></li><li role="treeitem"><div data-tocid="decimal-类型之于-dolphindb-d9713e99250" class="topicref" data-id="decimal-类型之于-dolphindb" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/DECIMAL.html" id="decimal-类型之于-dolphindb-d9713e99250-link">DECIMAL 类型之于 DolphinDB</a></div></div></li><li role="treeitem" class="active"><div data-tocid="计算精度问题与-decimal-类型-d9713e99296" class="topicref" data-id="计算精度问题与-decimal-类型" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/DECIMAL_Calculation_Characteristics.html" id="计算精度问题与-decimal-类型-d9713e99296-link">计算精度问题与 DECIMAL 类型</a></div></div></li><li role="treeitem"><div data-tocid="机器学习-d9713e99342" class="topicref" data-id="机器学习" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/machine_learning.html" id="机器学习-d9713e99342-link">机器学习</a></div></div></li><li role="treeitem"><div data-tocid="面板数据处理-d9713e99388" class="topicref" data-id="面板数据处理" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/panel_data.html" id="面板数据处理-d9713e99388-link">面板数据处理</a></div></div></li><li role="treeitem"><div data-tocid="时区处理-d9713e99434" class="topicref" data-id="时区处理" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/timezone.html" id="时区处理-d9713e99434-link">时区处理</a></div></div></li><li role="treeitem"><div data-tocid="pip-降采样算法-d9713e99480" class="topicref" data-id="pip-降采样算法" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/pip_ddb.html" id="pip-降采样算法-d9713e99480-link">PIP 降采样算法</a></div></div></li><li role="treeitem"><div data-tocid="动态增加字段和计算指标-d9713e99526" class="topicref" data-id="动态增加字段和计算指标" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/add_Column.html" id="动态增加字段和计算指标-d9713e99526-link">动态增加字段和计算指标</a></div></div></li><li role="treeitem"><div data-tocid="利用-dolphindb-高效清洗数据-d9713e99572" class="topicref" data-id="利用-dolphindb-高效清洗数据" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/data_ETL.html" id="利用-dolphindb-高效清洗数据-d9713e99572-link">利用 DolphinDB 高效清洗数据</a></div></div></li><li role="treeitem"><div data-tocid="array-vector-的最佳实践指南-d9713e99619" class="topicref" data-id="array-vector-的最佳实践指南" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Array_Vector.html" id="array-vector-的最佳实践指南-d9713e99619-link">Array Vector 的最佳实践指南</a></div></div></li><li role="treeitem"><div data-tocid="python-到-dolphindb-的函数映射-d9713e99665" class="topicref" data-id="python-到-dolphindb-的函数映射" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/function_mapping_py.html" id="python-到-dolphindb-的函数映射-d9713e99665-link">Python 到 DolphinDB 的函数映射</a></div></div></li><li role="treeitem"><div data-tocid="sql-编写案例-d9713e99711" class="topicref" data-id="sql-编写案例" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/ddb_sql_cases.html" id="sql-编写案例-d9713e99711-link">SQL 编写案例</a></div></div></li><li role="treeitem"><div data-tocid="sql-执行计划-d9713e99757" class="topicref" data-id="sql-执行计划" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/DolphinDB_Explain.html" id="sql-执行计划-d9713e99757-link">SQL 执行计划</a></div></div></li><li role="treeitem"><div data-tocid="启动脚本-d9713e99803" class="topicref" data-id="启动脚本" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Startup.html" id="启动脚本-d9713e99803-link">启动脚本</a></div></div></li><li role="treeitem"><div data-tocid="窗口计算-d9713e99849" class="topicref" data-id="窗口计算" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/window_cal.html" id="窗口计算-d9713e99849-link">窗口计算</a></div></div></li><li role="treeitem"><div data-tocid="多范式编程-d9713e99895" class="topicref" data-id="多范式编程" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/hybrid_programming_paradigms.html" id="多范式编程-d9713e99895-link">多范式编程</a></div></div></li><li role="treeitem"><div data-tocid="函数化编程案例-d9713e99941" class="topicref" data-id="函数化编程案例" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/func_progr_cases.html" id="函数化编程案例-d9713e99941-link">函数化编程案例</a></div></div></li><li role="treeitem"><div data-tocid="基于函数的元编程应用-d9713e99987" class="topicref" data-id="基于函数的元编程应用" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/meta_programming.html" id="基于函数的元编程应用-d9713e99987-link">基于函数的元编程应用</a></div></div></li><li role="treeitem"><div data-tocid="基于-sql-的元编程-d9713e100033" class="topicref" data-id="基于-sql-的元编程" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/macro_var_based_metaprogramming.html" id="基于-sql-的元编程-d9713e100033-link">基于 SQL 的元编程</a></div></div></li><li role="treeitem"><div data-tocid="即时编译jit-d9713e100079" class="topicref" data-id="即时编译jit" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/jit.html" id="即时编译jit-d9713e100079-link">即时编译（JIT）</a></div></div></li><li role="treeitem"><div data-tocid="矩阵运算-d9713e100126" class="topicref" data-id="矩阵运算" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/matrix.html" id="矩阵运算-d9713e100126-link">矩阵运算</a></div></div></li><li role="treeitem"><div data-tocid="通用计算-d9713e100172" class="topicref" data-id="通用计算" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/general_computing.html" id="通用计算-d9713e100172-link">通用计算</a></div></div></li><li role="treeitem"><div data-tocid="自定义聚合函数-d9713e100218" class="topicref" data-id="自定义聚合函数" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/udaf.html" id="自定义聚合函数-d9713e100218-link">自定义聚合函数</a></div></div></li><li role="treeitem"><div data-tocid="dolphindb-时间类型比较规则-d9713e100264" class="topicref" data-id="dolphindb-时间类型比较规则" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/ddb_comparison_rules_of_time_types.html" id="dolphindb-时间类型比较规则-d9713e100264-link">DolphinDB 时间类型比较规则</a></div></div></li><li role="treeitem"><div data-tocid="dolphindb-教程概率统计分析-d9713e100310" class="topicref" data-id="dolphindb-教程概率统计分析" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/probabilistic_and_statistical_analysis.html" id="dolphindb-教程概率统计分析-d9713e100310-link">DolphinDB 教程：概率统计分析</a></div></div></li><li role="treeitem"><div data-tocid="编程最容易忽略的十个细节-d9713e100356" class="topicref" data-id="编程最容易忽略的十个细节" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/the_ten_most_overlooked_details_of_programming.html" id="编程最容易忽略的十个细节-d9713e100356-link">编程最容易忽略的十个细节</a></div></div></li><li role="treeitem"><div data-tocid="dolphindb-数据访问接口开发教程-d9713e100402" class="topicref" data-id="dolphindb-数据访问接口开发教程" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/interface_development.html" id="dolphindb-数据访问接口开发教程-d9713e100402-link">DolphinDB 数据访问接口开发教程</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100448" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100448-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming-real-time-correlation-processing_2.html" id="tocId-d9713e100448-link">流数据</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100955" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100955-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/scheduledJob_2.html" id="tocId-d9713e100955-link">系统运维</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="模块概述-d9713e101923" class="topicref" data-id="模块概述" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action 模块概述-d9713e101923-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/tu_modules.html" id="模块概述-d9713e101923-link">模块</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e102568" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e102568-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/OHLC_2.html" id="tocId-d9713e102568-link">金融场景案例</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e104827" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e104827-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_engine_anomaly_alerts_2.html" id="tocId-d9713e104827-link">物联网场景案例</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105795" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105795-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/dolphindb_tensor_libtorch_tutorial.html" id="tocId-d9713e105795-link">机器学习</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105842" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105842-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/api_performance.html" id="tocId-d9713e105842-link">测试报告</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105982" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105982-link" class="wh-expand-btn"></span><div class="title"><a href="../rn/server/3_00_2.html" id="tocId-d9713e105982-link">版本说明</a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 版本发布历史</p></div></div></div></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-7 col-md-9 col-sm-12" id="wh_topic_body">
                        <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        <button id="wh_close_topic_toc_button" class="close-toc-button d-none" aria-label="Toggle topic table of content" aria-controls="wh_topic_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        <div class=" wh_topic_content body "><main role="main"><article class="- topic/topic topic" role="article" aria-labelledby="ariaid-title1"><h1 class="- topic/title title topictitle1" id="ariaid-title1">计算精度问题与 DECIMAL 类型</h1><div class="- topic/body body"></div><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title2" id="1-decimal-的计算特性"><h2 class="- topic/title title topictitle2" id="ariaid-title2">1. DECIMAL 的计算特性</h2><div class="- topic/body body"></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title3" id="11-decimal-的计算方式"><h3 class="- topic/title title topictitle3" id="ariaid-title3">1.1. DECIMAL 的计算方式</h3><div class="- topic/body body"><p class="- topic/p p">DECIMAL 的存储分为两部分，即存储整型数据的 raw data 和存储小数位数的 scale。例如，对于DECIMAL32(2) 类型的 1.23, 它存储了两个数据：(1) raw data：即整型 123，(2) scale：即 2。这样存储的好处是，在计算时可以直接使用整型的 raw data 进行计算，从而避免精度损失。</p><p class="- topic/p p">对于大多数计算函数，如果最后返回的结果是浮点数类型，DECIMAL 在进行计算时， 会使用 raw data 参与计算，尽量延迟转换成浮点数的时机，从而确保得到精确结果。比如计算 avg 时，假设数据为 DECIMAL32(2) 类型：[1.11, 2.22, 3.33]，其 raw data 为：[111, 222, 333]。在计算时，先算出 raw data 的 sum：111 + 222 + 333 = 666，然后转换成浮点数：double(666) / 102 / 3 = 2.22。</p><p class="- topic/p p">对于DECIMAL算术运算的规则，可参照：<a class="- topic/xref xref" href="DECIMAL.html#%E7%AE%97%E6%9C%AF%E8%AE%A1%E7%AE%97%E7%9A%84%E6%BA%A2%E5%87%BA%E6%A3%80%E6%9F%A5">DECIMAL.md</a>。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title4" id="12-decimal-的计算输出"><h3 class="- topic/title title topictitle3" id="ariaid-title4">1.2. DECIMAL 的计算输出</h3><div class="- topic/body body"><p class="- topic/p p">本节主要讲述DECIMAL作为计算函数输入的输出结果。</p><p class="- topic/p p">在 DolphinDB 计算函数中，以 DECIMAL 类型作为输入，输出结果仍为 DECIMAL 类型的函数较少，仅有：<code class="+ topic/ph pr-d/codeph ph codeph">sum</code>、<code class="+ topic/ph pr-d/codeph ph codeph">max</code>、<code class="+ topic/ph pr-d/codeph ph codeph">min</code>、<code class="+ topic/ph pr-d/codeph ph codeph">first</code>、<code class="+ topic/ph pr-d/codeph ph codeph">last</code>、<code class="+ topic/ph pr-d/codeph ph codeph">firstNot</code>、<code class="+ topic/ph pr-d/codeph ph codeph">lastNot</code> 及其 cum、m、tm、TopN 系列函数，如 <code class="+ topic/ph pr-d/codeph ph codeph">cummax</code>、<code class="+ topic/ph pr-d/codeph ph codeph">mmin</code>、<code class="+ topic/ph pr-d/codeph ph codeph">tmsum</code>、<code class="+ topic/ph pr-d/codeph ph codeph">msumTopN</code>，<code class="+ topic/ph pr-d/codeph ph codeph">cumsumTopN</code>，<code class="+ topic/ph pr-d/codeph ph codeph">tmsumTopN</code> 等；以及 <code class="+ topic/ph pr-d/codeph ph codeph">cumPositiveStreak</code>。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>a = decimal64(rand(10,100),4)

typestr(sum(a))
&gt;&gt; DECIMAL128

typestr(cummax(a))
&gt;&gt; FAST DECIMAL64 VECTOR

typestr(mmin(a,5))
&gt;&gt; FAST DECIMAL64 VECTOR

T = 2023.03.23..2023.06.30
typestr(tmsum(T, a, 3))
&gt;&gt; FAST DECIMAL128 VECTOR

typestr(cumPositiveStreak(a))
&gt;&gt; FAST DECIMAL128 VECTOR</code></pre><p class="- topic/p p">需要注意的是，在引入 DECIMAL128 类型后，自 2.00.10 版本起，sum 系列函数和 <code class="+ topic/ph pr-d/codeph ph codeph">cumPositiveStreak</code> 的输入输出类型对应规则如下：</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="12-decimal-的计算输出__entry__1"><strong class="+ topic/ph hi-d/b ph b">计算函数</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="12-decimal-的计算输出__entry__2"><strong class="+ topic/ph hi-d/b ph b">输入类型</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="12-decimal-的计算输出__entry__3"><strong class="+ topic/ph hi-d/b ph b">输出类型</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__1">sum/cumsum/msum/tmsum/msumTopN/cumsumTopN/tmsumTopN/cumPositiveStreak</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__2">DECIMAL32</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__3">DECIMAL64</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__1"> </td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__2">DECIMAL64</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__3">DECIMAL128</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__1"> </td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__2">DECIMAL128</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__3">DECIMAL128</td></tr></tbody></table></div><p class="- topic/p p">除了上述函数外，cum、m、tm、TopN 系列的函数，包括它们对应的原始的函数，比如 <code class="+ topic/ph pr-d/codeph ph codeph">avg</code>、<code class="+ topic/ph pr-d/codeph ph codeph">std</code>、<code class="+ topic/ph pr-d/codeph ph codeph">var</code>、<code class="+ topic/ph pr-d/codeph ph codeph">skew</code> 等，以 DECIMAL 类型作为输入，都将返回 DOUBLE 类型的输出结果。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>a = decimal64(rand(10,100),4)

typestr(avg(a))
&gt;&gt; DOUBLE

typestr(cumstd(a))
&gt;&gt; FAST DOUBLE VECTOR

typestr(mvar(a,5))
&gt;&gt; FAST DOUBLE VECTOR

T = 2023.03.23..2023.06.30
typestr(tmskew(T, a, 3))
&gt;&gt; FAST DOUBLE VECTOR</code></pre><p class="- topic/p p">下面将以 DECIMAL64 作为输入为例，列出常见计算函数的输出结果类型。</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="12-decimal-的计算输出__entry__13"><strong class="+ topic/ph hi-d/b ph b">计算函数</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="12-decimal-的计算输出__entry__14"><strong class="+ topic/ph hi-d/b ph b">输入类型</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="12-decimal-的计算输出__entry__15"><strong class="+ topic/ph hi-d/b ph b">输出类型</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__13">sum/cumsum/msum/tmsum</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__14">DECIMAL64</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__15">DECIMAL128</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__13">msumTopN/cumsumTopN/tmsumTopN</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__14">DECIMAL64</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__15">DECIMAL128</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__13">max/cummax/mmax/tmmax</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__14">DECIMAL64</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__15">DECIMAL64</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__13">min/cummin/mmin/tmmin</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__14">DECIMAL64</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__15">DECIMAL64</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__13">first/mfirst/tmfirst</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__14">DECIMAL64</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__15">DECIMAL64</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__13">last/mlast/tmlast</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__14">DECIMAL64</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__15">DECIMAL64</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__13">firstNot/cumfirstNot</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__14">DECIMAL64</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__15">DECIMAL64</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__13">lastNot/cumlastNot</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__14">DECIMAL64</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__15">DECIMAL64</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__13">cumPositiveStreak</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__14">DECIMAL64</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__15">DECIMAL128</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__13">avg/cumavg/mavg/tmavg/mavgTopN/cumavgTopN/tmavgTopN</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__14">DECIMAL64</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__15">DOUBLE</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__13">sum2/cumsum2/msum2/tmsum2</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__14">DECIMAL64</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__15">DOUBLE</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__13">prod/cumprod/mprod/tmprod</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__14">DECIMAL64</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__15">DOUBLE</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__13">med/cummed/mmed/tmmed</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__14">DECIMAL64</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__15">DOUBLE</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__13">std/cumstd/mstd/tmstd/mstdTopN/cumstdTopN/tmstdTopN</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__14">DECIMAL64</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__15">DOUBLE</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__13">skew/mskew/tmskew/mskewTopN/cumskewTopN/tmskewTopN</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__14">DECIMAL64</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__15">DOUBLE</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__13">kurtosis/mkurtosis/tmkurtosis/mkurtosisTopN/cumkurtosisTopN/tmkurtosisTopN</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__14">DECIMAL64</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__15">DOUBLE</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__13">corr/cumcorr/mcorr/tmcorr/mcorrTopN/cumcorrTopN/tmcorrTopN</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__14">DECIMAL64</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__15">DOUBLE</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__13">covar/cumcovar/mcovar/tmcovar/mcovarTopN/cumcovarTopN/tmcovarTopN</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__14">DECIMAL64</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__15">DOUBLE</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__13">beta/cumbeta/mbeta/tmbeta/mbetaTopN/cumbetaTopN/tmbetaTopN</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__14">DECIMAL64</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="12-decimal-的计算输出__entry__15">DOUBLE</td></tr></tbody></table></div></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title5" id="2-decimal-的优缺点"><h2 class="- topic/title title topictitle2" id="ariaid-title5">2. DECIMAL 的优缺点</h2><div class="- topic/body body"></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title6" id="21-decimal-的优点"><h3 class="- topic/title title topictitle3" id="ariaid-title6">2.1. DECIMAL 的优点</h3><div class="- topic/body body"><p class="- topic/p p">实数在计算机内部无法被精确地表示为浮点数的原因主要有两个：第一个原因是类似于 0.1 这样的数字，具有有限的十进制表示，但是在二进制中能表示为无穷重复的数据，等于 0.1 的近似值，无法被精确表示；第二个原因是数值超出了数据类型能表示的数值范围，系统将对数据做一定处理。与浮点数相比，DECIMAL 类型最大的优点，就在于它能够精确地表示和计算数据。</p><p class="- topic/p p">例如，在表示123.0001时：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>a =123.0001
print(a)
&gt;&gt; 123.000100000000003

b = decimal64(`123.0001,15)
print(b)
&gt;&gt; 123.000100000000000</code></pre><p class="- topic/p p">可见，浮点数无法精确表示123.0001，而 DECIMAL 可以。</p><p class="- topic/p p">在计算 avg 时：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>a = array(DOUBLE,0)
for (i in 1..100){
	a.append!(123.0000+0.0003*i)
}
avg(a)
&gt;&gt; 123.015149999999
avg(a) == 123.01515
&gt;&gt; false
eqFloat(avg(a),123.01515)
&gt;&gt; true

b= array(DECIMAL64(4),0)
for (i in 1..100){
	b.append!(123.0000+0.0003*i)
}
avg(b)
&gt;&gt; 123.015150000000
typestr(avg(b))
&gt;&gt; DOUBLE
avg(b) == 123.01515
&gt;&gt; true</code></pre><p class="- topic/p p">可见，在进行 avg 计算时，浮点数没有返回精确结果，而 DECIMAL 虽然返回结果也是 DOUBLE 类型，但返回了精确结果。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title7" id="22-decimal-的缺点"><h3 class="- topic/title title topictitle3" id="ariaid-title7">2.2. DECIMAL 的缺点</h3><div class="- topic/body body"></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title8" id="221-容易溢出"><h4 class="- topic/title title topictitle4" id="ariaid-title8">2.2.1. 容易溢出</h4><div class="- topic/body body"><p class="- topic/p p">DECIMAL32/DECIMAL64/DECIMAL128 类型的数值范围如下表所示，其中，DECIMAL32(S)、DECIMAL64(S) 和 DECIMAL128(S) 中的 S 表示保留的小数位数。</p><div class="table-container"><table class="- topic/table table" data-cols="6"><caption></caption><colgroup><col/><col/><col/><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="221-容易溢出__entry__1"> </th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="221-容易溢出__entry__2"><strong class="+ topic/ph hi-d/b ph b">底层存储数据类型</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="221-容易溢出__entry__3"><strong class="+ topic/ph hi-d/b ph b">字节占用</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="221-容易溢出__entry__4"><strong class="+ topic/ph hi-d/b ph b">Scale有效范围</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="221-容易溢出__entry__5"><strong class="+ topic/ph hi-d/b ph b">有效数值范围</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="221-容易溢出__entry__6"><strong class="+ topic/ph hi-d/b ph b">最大表示位数</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="221-容易溢出__entry__1">DECIMAL32</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="221-容易溢出__entry__2">int32_t</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="221-容易溢出__entry__3">占用4个字节</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="221-容易溢出__entry__4">[0,9]</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="221-容易溢出__entry__5">(-1 * 10<sup class="+ topic/ph hi-d/sup ph sup">(9 - S)</sup>, 1 * 10<sup class="+ topic/ph hi-d/sup ph sup">(9 - S)</sup>))</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="221-容易溢出__entry__6">9位</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="221-容易溢出__entry__1">DECIMAL64</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="221-容易溢出__entry__2">int64_t</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="221-容易溢出__entry__3">占用8个字节</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="221-容易溢出__entry__4">[0,18]</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="221-容易溢出__entry__5">(-1 * 10 <sup class="+ topic/ph hi-d/sup ph sup"> (18 - S)</sup>, 1 * 10 <sup class="+ topic/ph hi-d/sup ph sup"> (18 - S)</sup>)</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="221-容易溢出__entry__6">18位</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="221-容易溢出__entry__1">DECIMAL128</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="221-容易溢出__entry__2">int128_t</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="221-容易溢出__entry__3">占用16个字节</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="221-容易溢出__entry__4">[0,38]</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="221-容易溢出__entry__5">(-1 * 10 <sup class="+ topic/ph hi-d/sup ph sup"> (38 - S)</sup>, 1 * 10 <sup class="+ topic/ph hi-d/sup ph sup"> (38 - S)</sup>)</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="221-容易溢出__entry__6">38位</td></tr></tbody></table></div><p class="- topic/p p">在有效数值范围和最大表示位数的限制下，DECIMAL 类型很容易溢出。自 2.00.10 版本起，我们支持算术运算溢出后，若存在更高精度的类型，则将自动拓展结果的数据类型，从而降低溢出风险：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>version 2.00.9.6：

a = decimal32(4.0000,4)
b = decimal32(8.0000,4)
c = a*b
&gt;&gt; Server response: 'c = a * b =&gt; Decimal math overflow'

version 2.00.10：
a = decimal32(4.0000,4)
b = decimal32(8.0000,4)
c = a*b
print(c)
&gt;&gt; 32.00000000
typestr(c)
&gt;&gt; DECIMAL64</code></pre><p class="- topic/p p">但即使如此，DECIMAL128 仍存在溢出风险：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>a = decimal128(36.00000000,8)
b = a*a*a*a
&gt;&gt; Server response: 'b = a * a * a * a =&gt; Decimal math overflow'</code></pre><p class="- topic/p p">如上所示，由于 DolphinDB 中 DECIMAL 类型的数据乘法运算结果的 scale 是逐个累加的，b 的预期结果将会是 1679616.00000000000000000000000000000000，将会有39位数字，超出了 DECIMAL128 的最大表示位数38位，导致了溢出。</p><p class="- topic/p p">2.00.10版本新增支持了 DECIMAL 类型的乘法函数 <code class="+ topic/ph pr-d/codeph ph codeph">decimalMultiply</code>，与 <code class="+ topic/ph pr-d/codeph ph codeph">multiply</code> 函数 (<code class="+ topic/ph pr-d/codeph ph codeph">*</code> 运算符) 相比，该函数可以指定计算结果的精度。当 DEICMAL 类型的乘法运算导致 scale 累加存在溢出风险时，可以按需使用 <code class="+ topic/ph pr-d/codeph ph codeph">decimalMultiply</code> 函数，指定计算结果精度。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>a = decimal64(36.00000000,8)
decimalMultiply(a, a, 8)
&gt;&gt; 1296.00000000</code></pre></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title9" id="222-转换误差"><h4 class="- topic/title title topictitle4" id="ariaid-title9">2.2.2. 转换误差</h4><div class="- topic/body body"><p class="- topic/p p">当我们直接使用常量生成 DECIMAL 类型时，可能会因为浮点数的转换产生误差：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>a = 0.5599
decimal64(a,4)
&gt;&gt; 0.5598</code></pre><p class="- topic/p p">为了避免这种误差，可以使用字符串来生成 DECIMAL：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>a = "0.5599"
decimal64(a,4)
&gt;&gt; 0.5599</code></pre></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title10" id="223-内存占用"><h4 class="- topic/title title topictitle4" id="ariaid-title10">2.2.3. 内存占用</h4><div class="- topic/body body"><p class="- topic/p p">DECIMAL32、DECIMAL64 和 DECIMAL128 类型在内存中分别占用4个字节、8个字节和16个字节，而 FLOAT 和 DOUBLE 类型在内存中占用4个字节和8个字节。因此，在数据量相同的情况下，DECIMAL128 占用的内存是 DOUBLE 的两倍。</p><p class="- topic/p p">且由于算术运算溢出后，将自动拓展结果的数据类型，每次拓展后等量数据占用的内存将翻倍，存在一定的内存风险。</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title11" id="224-性能差异"><h4 class="- topic/title title topictitle4" id="ariaid-title11">2.2.4. 性能差异</h4><div class="- topic/body body"><p class="- topic/p p">与 FLOAT 和 DOUBLE 类型相比，DECIMAL 类型的计算速度更慢，我们将在第三节中进行详细比较。</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title12" id="225-局限性"><h4 class="- topic/title title topictitle4" id="ariaid-title12">2.2.5. 局限性</h4><div class="- topic/body body"><p class="- topic/p p">在 DolphinDB 中，DECIMAL 类型与 FLOAT/DOUBLE 类型相比，目前所支持的功能和结构较少。</p><ul class="- topic/ul ul"><li class="- topic/li li">在函数支持方面，尚有少部分计算函数不支持 DECIMAL 类型。</li><li class="- topic/li li">计算结果方面，cum, tm, m, TopN 系列的函数，包括它们对应的原始的函数（<code class="+ topic/ph pr-d/codeph ph codeph">sum</code>、<code class="+ topic/ph pr-d/codeph ph codeph">max</code>、<code class="+ topic/ph pr-d/codeph ph codeph">min</code>、<code class="+ topic/ph pr-d/codeph ph codeph">firstNot</code>、<code class="+ topic/ph pr-d/codeph ph codeph">lastNot</code>、<code class="+ topic/ph pr-d/codeph ph codeph">cumPositiveStreak</code> 除外），即使原始数据是 DECIMAL 类型，返回结果还是浮点数类型。</li><li class="- topic/li li">数据结构方面，DolphinDB 系统目前暂未支持 DECIMAL 类型在 matrix 和 set 中使用。</li><li class="- topic/li li">数据类型转换方面，DolphinDB 系统暂不支持 BOOL/CHAR/SYMBOL/UUID/IPADDR/INT128 等类型和 temporal 集合下的时间相关类型与 DECIMAL 类型相互转换，其中 STRING/BLOB 类型的数据如需转换成 DECIMAL 类型，必须满足 STRING/BLOB 类型的数据可以转换成数值类型的前提。</li></ul></div></article></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title13" id="3-浮点数与-decimal-计算性能差异比较"><h2 class="- topic/title title topictitle2" id="ariaid-title13">3. 浮点数与 DECIMAL 计算性能差异比较</h2><div class="- topic/body body"><p class="- topic/p p">为了比较浮点数类型与 DECIMAL 类型的计算性能差异，我们选取了一些常用的计算函数，比较相同数据情况下，各个数据类型的计算耗时。</p><p class="- topic/p p">首先，模拟数据脚本如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>n = 1000000
data1 = rand(float(100.0),n)
data2 = double(data1)
data3 = decimal32(data1,4)
data4 = decimal64(data1,4)
data5 = decimal128(data1,4)</code></pre><p class="- topic/p p">随后，使用 <code class="+ topic/ph pr-d/codeph ph codeph">timer</code> 语句统计常用计算函数对于各个类型数据的计算耗时：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>timer(100){sum(data1)}  //执行100次，避免单次计算误差，并放大不同类型间的耗时差异
timer(100){sum(data2)}
timer(100){sum(data3)}
timer(100){sum(data4)}
timer(100){sum(data5)}
... ...</code></pre><p class="- topic/p p">得到的计算耗时统计结果如下（单位：ms）：</p><div class="table-container"><table class="- topic/table table" data-cols="6"><caption></caption><colgroup><col/><col/><col/><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="3-浮点数与-decimal-计算性能差异比较__entry__1"> </th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="3-浮点数与-decimal-计算性能差异比较__entry__2"><strong class="+ topic/ph hi-d/b ph b">FLOAT</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="3-浮点数与-decimal-计算性能差异比较__entry__3"><strong class="+ topic/ph hi-d/b ph b">DOUBLE</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="3-浮点数与-decimal-计算性能差异比较__entry__4"><strong class="+ topic/ph hi-d/b ph b">DECIMAL32</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="3-浮点数与-decimal-计算性能差异比较__entry__5"><strong class="+ topic/ph hi-d/b ph b">DECIMAL64</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="3-浮点数与-decimal-计算性能差异比较__entry__6"><strong class="+ topic/ph hi-d/b ph b">DECIMAL128</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__1"><strong class="+ topic/ph hi-d/b ph b">sum</strong></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__2">52.985</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__3">64.331</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__4">28.721</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__5">57.234</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__6">107.126</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__1"><strong class="+ topic/ph hi-d/b ph b">sum2</strong></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__2">173.278</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__3">211.772</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__4">176.261</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__5">180.051</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__6">603.422</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__1"><strong class="+ topic/ph hi-d/b ph b">prod</strong></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__2">63.650</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__3">55.641</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__4">171.718</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__5">174.389</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__6">18850.009</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__1"><strong class="+ topic/ph hi-d/b ph b">avg</strong></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__2">178.086</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__3">210.495</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__4">26.094</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__5">106.869</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__6">258.508</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__1"><strong class="+ topic/ph hi-d/b ph b">std</strong></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__2">362.388</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__3">345.758</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__4">278.933</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__5">319.177</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__6">968.276</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__1"><strong class="+ topic/ph hi-d/b ph b">kurtosis</strong></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__2">547.751</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__3">407.561</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__4">585.859</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__5">769.879</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__6">1013.591</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__1"><strong class="+ topic/ph hi-d/b ph b">skew</strong></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__2">546.705</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__3">439.348</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__4">622.758</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__5">842.994</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-浮点数与-decimal-计算性能差异比较__entry__6">1074.128</td></tr></tbody></table></div><p class="- topic/p p">根据上述统计结果，可以得知：</p><p class="- topic/p p">（1）对于大部分计算函数，DECIMAL 的性能都比 FLOAT/DOUBLE 差；</p><p class="- topic/p p">（2）DECIMAL128 在计算时，会转换成 LONG DOUBLE（DECIMAL32/DECIMAL64 会转换成 DOUBLE），而 LONG DOUBLE 的实现取决于编译器和 CPU，可能是 12 字节或者 16 字节，LONG DOUBLE 的乘法在数据很大时非常耗时。在本节的测试样例中，vector 里的元素的取值范围较大，所以其乘积非常大，计算非常耗时。而如果把取值范围取小一些，比如 [0.5, 1.0]，则 DECIMAL128 的计算和 DECIMAL32/DECIMAL64 相差不大；</p><p class="- topic/p p">（3）对于 <code class="+ topic/ph pr-d/codeph ph codeph">sum</code>、<code class="+ topic/ph pr-d/codeph ph codeph">avg</code>、<code class="+ topic/ph pr-d/codeph ph codeph">std</code> 这样的函数，DECIMAL 类型在计算时都没有做循环展开，而浮点数类型对 <code class="+ topic/ph pr-d/codeph ph codeph">sum</code> 做了循环展开，<code class="+ topic/ph pr-d/codeph ph codeph">avg</code> 则没有。此外，由于 DECIMAL 计算时会使用 raw data 先参与计算，再直接返回 DECIMAL 类型或转化为浮点数，本质是整型计算，实际过程比浮点数运算更高效。因此，它们的性能相差不大，甚至 DECIMAL32/DECIMAL64 的性能比 FLOAT/DOUBLE 更好。</p></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title14" id="4-decimal-最佳实践避免-mavg-计算精度损失"><h2 class="- topic/title title topictitle2" id="ariaid-title14">4. DECIMAL 最佳实践：避免 mavg 计算精度损失</h2><div class="- topic/body body"><p class="- topic/p p">本节将以具体场景，比较 DECIMAL 类型和浮点数类型在实际计算中的精度差异。</p><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">mavg</code> 和 <code class="+ topic/ph pr-d/codeph ph codeph">moving(avg,…)</code> 虽然在含义上完全相同，但两者的实现方式并不一致。<code class="+ topic/ph pr-d/codeph ph codeph">mavg</code> 的算法是：随着窗口的移动，总和加上进入窗口的数，减去离开窗口的数，再计算 avg，所以在这个加减的过程中，会产生浮点数精度问题。</p><p class="- topic/p p">首先，我们导入样例数据 <a class="- topic/xref xref" href="data/DECIMAL_Calculation_Characteristics/tick.csv">tick.csv</a>，原始数据类型均为 DOUBLE 类型，并计算 <code class="+ topic/ph pr-d/codeph ph codeph">mavg</code>、<code class="+ topic/ph pr-d/codeph ph codeph">moving(avg,…)</code>：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>data = loadText("&lt;yourDirectory&gt;/tick.csv")

t = select
	MDTime,
	((LastPx - prev(LastPx)) / (prev(LastPx) + 1E-10) * 1000) as val,
	mavg(((LastPx - prev(LastPx)) / (prev(LastPx) + 1E-10) * 1000), 20, 1),
	moving(avg, ((LastPx - prev(LastPx)) / (prev(LastPx) + 1E-10) * 1000), 20, 1)
from data</code></pre><p class="- topic/p p">得到的结果如下图所示：</p><img class="- topic/image image" src="images/DECIMAL_Calculation_Characteristics/4_1.png"/><br/><p class="- topic/p p">可以看到，计算结果从09:31:53.000开始产生误差。</p><p class="- topic/p p">为了避免这种计算误差，我们先将中间计算结果转换为 DECIMAL128 类型，再计算 <code class="+ topic/ph pr-d/codeph ph codeph">mavg</code> 和 <code class="+ topic/ph pr-d/codeph ph codeph">moving(avg,…)</code>：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>t = select
	MDTime,
	((LastPx - prev(LastPx)) / (prev(LastPx) + 1E-10) * 1000) as val,
	mavg(decimal128(((LastPx - prev(LastPx)) / (prev(LastPx) + 1E-10) * 1000),12), 20, 1),
	moving(avg, decimal128(((LastPx - prev(LastPx)) / (prev(LastPx) + 1E-10) * 1000),12), 20, 1)
from data</code></pre><p class="- topic/p p">得到的结果如下图所示：</p><img class="- topic/image image" src="images/DECIMAL_Calculation_Characteristics/4_2.png"/><br/><p class="- topic/p p">可以看到，<code class="+ topic/ph pr-d/codeph ph codeph">mavg</code> 和 <code class="+ topic/ph pr-d/codeph ph codeph">moving(avg,…)</code> 的计算结果完全一致。</p><p class="- topic/p p">由于浮点数的精度问题，cum, tm, m, TopN 系列的函数，包括它们对应的原始的函数，比如 <code class="+ topic/ph pr-d/codeph ph codeph">avg</code>、<code class="+ topic/ph pr-d/codeph ph codeph">std</code> 等，都有可能导致计算的精度误差。在对精度极为关注的场景下，我们推荐使用 DECIMAL 进行计算。需要注意的是，除了 <code class="+ topic/ph pr-d/codeph ph codeph">sum</code>、<code class="+ topic/ph pr-d/codeph ph codeph">max</code>、<code class="+ topic/ph pr-d/codeph ph codeph">min</code>、<code class="+ topic/ph pr-d/codeph ph codeph">firstNot</code>、<code class="+ topic/ph pr-d/codeph ph codeph">lastNot</code>、<code class="+ topic/ph pr-d/codeph ph codeph">cumPositiveStreak</code> 及其对应的系列函数，在入参是 DECIMAL 类型时能够返回 DECIMAL 类型的计算结果，其他函数都将返回浮点数类型。虽然存在一定的 DECIMAL 类型转换为浮点数类型的精度误差风险，但避免了计算过程中的精度损失，也可以对计算结果使用 <code class="+ topic/ph pr-d/codeph ph codeph">round</code> 函数或再次转换为 DECIMAL 类型，得到相对精确的结果。</p></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title15" id="5-总结"><h2 class="- topic/title title topictitle2" id="ariaid-title15">5. 总结</h2><div class="- topic/body body"><p class="- topic/p p">浮点数由于其实现方式，在计算机内部无法精确地表示某些数值，因而容易出现精度误差，导致存储或计算结果与预期不符。DECIMAL 可以精确表示数值，但存在容易溢出、内存占用大、性能较劣、有一定局限性等缺点。尽管如此，在某些场景中，选用 DECIMAL 类型依旧能够很好地避免存储或计算结果与预期不符的情况出现。</p><p class="- topic/p p">综上所述，在实际应用时，需要考虑具体需要，选用合适的数据类型，对数据进行相应的精度管理。</p></div></article></article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" aria-label="On this page" class="col-lg-2 d-none d-lg-block navbar d-print-none"> 
                            <div id="wh_topic_toc_content">
		                        
	                            <div class=" wh_topic_toc "><div class="wh_topic_label">在本页上</div><ul><li class="topic-item"><a href="#1-decimal-%E7%9A%84%E8%AE%A1%E7%AE%97%E7%89%B9%E6%80%A7" data-tocid="1-decimal-的计算特性">1. DECIMAL 的计算特性</a><ul><li class="topic-item"><a href="#11-decimal-%E7%9A%84%E8%AE%A1%E7%AE%97%E6%96%B9%E5%BC%8F" data-tocid="11-decimal-的计算方式">1.1. DECIMAL 的计算方式</a></li><li class="topic-item"><a href="#12-decimal-%E7%9A%84%E8%AE%A1%E7%AE%97%E8%BE%93%E5%87%BA" data-tocid="12-decimal-的计算输出">1.2. DECIMAL 的计算输出</a></li></ul></li><li class="topic-item"><a href="#2-decimal-%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9" data-tocid="2-decimal-的优缺点">2. DECIMAL 的优缺点</a><ul><li class="topic-item"><a href="#21-decimal-%E7%9A%84%E4%BC%98%E7%82%B9" data-tocid="21-decimal-的优点">2.1. DECIMAL 的优点</a></li><li class="topic-item"><a href="#22-decimal-%E7%9A%84%E7%BC%BA%E7%82%B9" data-tocid="22-decimal-的缺点">2.2. DECIMAL 的缺点</a><ul><li class="topic-item"><a href="#221-%E5%AE%B9%E6%98%93%E6%BA%A2%E5%87%BA" data-tocid="221-容易溢出">2.2.1. 容易溢出</a></li><li class="topic-item"><a href="#222-%E8%BD%AC%E6%8D%A2%E8%AF%AF%E5%B7%AE" data-tocid="222-转换误差">2.2.2. 转换误差</a></li><li class="topic-item"><a href="#223-%E5%86%85%E5%AD%98%E5%8D%A0%E7%94%A8" data-tocid="223-内存占用">2.2.3. 内存占用</a></li><li class="topic-item"><a href="#224-%E6%80%A7%E8%83%BD%E5%B7%AE%E5%BC%82" data-tocid="224-性能差异">2.2.4. 性能差异</a></li><li class="topic-item"><a href="#225-%E5%B1%80%E9%99%90%E6%80%A7" data-tocid="225-局限性">2.2.5. 局限性</a></li></ul></li></ul></li><li class="topic-item"><a href="#3-%E6%B5%AE%E7%82%B9%E6%95%B0%E4%B8%8E-decimal-%E8%AE%A1%E7%AE%97%E6%80%A7%E8%83%BD%E5%B7%AE%E5%BC%82%E6%AF%94%E8%BE%83" data-tocid="3-浮点数与-decimal-计算性能差异比较">3. 浮点数与 DECIMAL 计算性能差异比较</a></li><li class="topic-item"><a href="#4-decimal-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E9%81%BF%E5%85%8D-mavg-%E8%AE%A1%E7%AE%97%E7%B2%BE%E5%BA%A6%E6%8D%9F%E5%A4%B1" data-tocid="4-decimal-最佳实践避免-mavg-计算精度损失">4. DECIMAL 最佳实践：避免 mavg 计算精度损失</a></li><li class="topic-item"><a href="#5-%E6%80%BB%E7%BB%93" data-tocid="5-总结">5. 总结</a></li></ul></div>
	                        	
                        	</div>
                        </nav>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
<title>Copyright</title><p><b> ©2025 浙江智臾科技有限公司 浙ICP备18048711号-3</b></p>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
    </body>
</html>