<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" data-whc_version="26.0">
    <head><link rel="shortcut icon" href="../favicon.ico"/><link rel="icon" href="../favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="内存表不仅可以直接用于存储数据，实现高速数据读写，而且可以缓存计算引擎的中间结果，加速计算过程。本教程主要介绍DolphinDB 内存表的分类、使用场景以及在数据操作与表结构(schema)操作上的异同。 根据不同的使用场景以及功能特点，DolphinDB 内存表可以分为以下5种： 常规内存表 键值内存表 索引内存表 流数据表 MVCC内存表 常规内存表是 DolphinDB ..."/><meta name="DC.rights.owner" content="(C) 版权 2025"/><meta name="copyright" content="(C) 版权 2025"/><meta name="generator" content="DITA-OT"/><meta name="DC.type" content="topic"/><meta name="DC.coverage" content=""/><meta name="DC.relation" content="../tutorials/about_tutorials.html"/><meta name="prodname" content="DolphinDB"/><meta name="brand" content="DolphinDB"/><meta name="DC.creator" content="DolphinDB"/><meta name="DC.publisher" content="DDB N/A DDB 200"/><meta name="DC.format" content="HTML5"/><meta name="DC.identifier" content="dolphindb-内存表详解"/><title>DolphinDB 内存表详解</title><!--  Generated with Oxygen version 26.0, build number 2024012323.  --><meta name="wh-path2root" content="../"/><meta name="wh-toc-id" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;?workdir /tmp/temp20250305183303418/tutorials?&gt;&lt;?workdir-uri file:/tmp/temp20250305183303418/tutorials/?&gt;&lt;?path2project ../?&gt;&lt;?path2project-uri ../?&gt;&lt;?path2rootmap-uri ../?&gt;&lt;topic xmlns:dita-ot=&#34;http://dita-ot.sourceforge.net/ns/201007/dita-ot&#34; xmlns:ditaarch=&#34;http://dita.oasis-open.org/architecture/2005/&#34; class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;dolphindb-内存表详解&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;DolphinDB 内存表详解&lt;/title&gt;&lt;prolog class=&#34;- topic/prolog &#34;&gt;&lt;author class=&#34;- topic/author &#34; xtrc=&#34;author:1;12:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/author&gt;&lt;publisherinformation class=&#34;- topic/publisher bookmap/publisherinformation &#34; xtrc=&#34;publisherinformation:1;14:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:1;15:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;printlocation class=&#34;- topic/data bookmap/printlocation &#34; xtrc=&#34;printlocation:1;16:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;N/A&lt;/printlocation&gt; &lt;published class=&#34;- topic/data bookmap/published &#34; xtrc=&#34;published:1;17:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:2;18:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;publishtype class=&#34;- topic/data bookmap/publishtype &#34; value=&#34;HTML&#34; xtrc=&#34;publishtype:1;19:44&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;revisionid class=&#34;- topic/ph bookmap/revisionid &#34; xtrc=&#34;revisionid:1;20:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;200&lt;/revisionid&gt; &lt;summary class=&#34;- topic/ph bookmap/summary &#34; xtrc=&#34;summary:1;22:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:1;23:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/published&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:2;25:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/publisherinformation&gt;&lt;metadata class=&#34;- topic/metadata &#34;&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:2;39:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:1;28:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;category class=&#34;- topic/category &#34; xtrc=&#34;category:1;29:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;prodinfo class=&#34;- topic/prodinfo &#34; xtrc=&#34;prodinfo:1;34:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;prodname class=&#34;- topic/prodname &#34; xtrc=&#34;prodname:1;35:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/prodname&gt; &lt;brand class=&#34;- topic/brand &#34; xtrc=&#34;brand:1;36:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/brand&gt; &lt;/prodinfo&gt;&lt;/metadata&gt;&lt;/prolog&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:1;3:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;内存表不仅可以直接用于存储数据，实现高速数据读写，而且可以缓存计算引擎的中间结果，加速计算过程。本教程主要介绍DolphinDB 内存表的分类、使用场景以及在数据操作与表结构(schema)操作上的异同。&lt;/p&gt;&lt;/body&gt;&lt;related-links class=&#34;- topic/related-links &#34;&gt;&lt;linkpool class=&#34;- topic/linkpool &#34; xtrc=&#34;topicref:4;17:78&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;../tutorials/about_tutorials.dita&#34; mapclass=&#34;- map/topicref bookmap/chapter &#34; role=&#34;parent&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:1;5:53&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot usertext?&gt;教程&lt;/linktext&gt;&lt;?ditaot usershortdesc?&gt;&lt;desc class=&#34;- topic/desc &#34;&gt;DolphinDB 产品使用教程&lt;/desc&gt;&lt;/link&gt;&lt;/linkpool&gt;&lt;/related-links&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;内存表类别&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:2;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:2;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;内存表类别&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:2;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:2;7:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;根据不同的使用场景以及功能特点，DolphinDB 内存表可以分为以下5种：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:1;9:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:1;9:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;常规内存表&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:2;10:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;键值内存表&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:3;11:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;索引内存表&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:4;12:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;流数据表&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:5;13:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;MVCC内存表&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;常规内存表&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:3;15:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:3;15:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;常规内存表&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:3;15:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:3;17:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;常规内存表是 DolphinDB 中最基础的表结构，支持增删改查等操作。SQL 查询返回的结果通常存储在常规内存表中，等待进一步处理。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:2;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:6;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;创建&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:4;21:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:1;21:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;table&lt;/codeph&gt; 函数可创建常规内存表。可根据指定的 schema（字段类型和字段名称）以及表容量（capacity）和初始行数（size）来生成内存表，亦可通过已有数据（矩阵，表，数组和元组）来生成内存表。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:5;23:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;使用第一种生成方法的好处是可以预先为表分配内存。当表中的记录数超过容量（capacity）时，系统会自动扩充表的容量。扩充时系统首先会分配更大的内存空间（增加20%到100%不等），然后复制旧表到新的表，最后释放原来的内存。对于规模较大的表，扩容的成本会比较高。因此，如果我们可以事先大概估计表的行数，可以在创建内存表时预先为之分配一个合理的容量。如果表的初始行数为0，系统会生成空表。如果初始行数不为0，系统会生成一个指定行数的表，表中各列的值都为默认值。例如：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:1;25:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;//创建一个空的常规内存表 t=table(100:0,`sym`id`val,[SYMBOL,INT,INT]) //创建一个10行的常规内存表 t=table(100:10,`sym`id`val,[SYMBOL,INT,INT]) select * from t sym id val --- -- --- 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 &lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:6;47:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:2;47:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;table&lt;/codeph&gt; 函数也允许通过已有的数据来创建一个常规内存表。下例是通过多个数组来创建。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:2;49:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;sym=`A`B`C`D`E id=5 4 3 2 1 val=52 64 25 48 71 t=table(sym,id,val);&lt;/codeblock&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:3;55:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:7;55:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;应用&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:7;57:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;常规内存表是 DolphinDB 中应用最频繁的数据结构之一，仅次于数组。SQL 语句的查询结果，分布式查询的中间结果都存储在常规内存表中。当系统内存不足时，该表并不会自动将数据溢出到磁盘，而是 Out Of Memory 异常。因此我们进行各种查询和计算时，要注意中间结果和最终结果的 size。当某些中间结果不再需要时，请及时释放。关于常规内存表增删改查的各种用法，可以参考另一份教程&lt;xref class=&#34;- topic/xref &#34; dita-ot:orig-format=&#34;md&#34; format=&#34;dita&#34; href=&#34;partitioned_in_memory_table.md&#34; xtrc=&#34;xref:1;57:195&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;内存分区表加载和操作&lt;/xref&gt;：内存表的数据处理。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;键值内存表&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:4;59:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:4;59:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;键值内存表&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:4;59:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:8;61:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;键值内存表是 DolphinDB 中支持主键的内存表。指定主键（可为表中一个或多个列）的值，可以快速返回表中的对应记录。键值内存表支持增删改查等操作，但是主键值不允许更新。键值内存表通过哈希表来记录每一个键值对应的行号，因此对于基于键值的查找和更新具有非常高的效率。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:4;63:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:8;63:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;创建&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:9;65:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:3;65:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;keyedTable&lt;/codeph&gt; 函数可创建键值内存表。该函数与 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:4;65:33&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;table&lt;/codeph&gt; 函数非常类似，唯一不同之处是增加了一个参数指定键值列的名称。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:3;67:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;//创建空的键值内存表，主键由sym和id字段组成 t=keyedTable(`sym`id, 1:0, `sym`id`val, [SYMBOL,INT,INT]) //注意：此种方式创建键值内存表时，初始行数（size）必须为0。 //使用向量创建键值内存表，主键由sym和id字段组成 sym=`A`B`C`D`E id=5 4 3 2 1 val=52 64 25 48 71 t=keyedTable(`sym`id,sym,id,val)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:10;79:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;也可通过 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:5;79:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;keyedTable&lt;/codeph&gt; 函数将常规内存表转换为键值内存表。例如：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:4;81:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;sym=`A`B`C`D`E id=5 4 3 2 1 val=52 64 25 48 71 tmp=table(sym, id, val) t=keyedTable(`sym`id, tmp)&lt;/codeblock&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:5;89:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:9;89:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;数据插入和更新&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:11;91:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;向键值内存表中添加新记录时，系统会自动检查新记录的主键值。如果新记录的主键值在表中不存在，则向表中添加新的记录；如果新记录的主键值与已有记录的主键值重复，会更新表中该主键值对应的记录。请看下面的例子。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:12;93:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;首先，向空的键值内存表中插入新记录，新记录中的主键值为 AAPL, IBM 和 GOOG。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:5;95:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;t=keyedTable(`sym,1:0,`sym`datetime`price`qty,[SYMBOL,DATETIME,DOUBLE,DOUBLE]); insert into t values(`APPL`IBM`GOOG,2018.06.08T12:30:00 2018.06.08T12:30:00 2018.06.08T12:30:00,50.3 45.6 58.0,5200 4800 7800); t; sym datetime price qty ---- ------------------- ----- ---- APPL 2018.06.08T12:30:00 50.3 5200 IBM 2018.06.08T12:30:00 45.6 4800 GOOG 2018.06.08T12:30:00 58 7800&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:13;107:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;再次向表中插入一批主键值为 AAPL, IBM 和 GOOG 的新记录。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:6;109:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;insert into t values(`APPL`IBM`GOOG,2018.06.08T12:30:01 2018.06.08T12:30:01 2018.06.08T12:30:01,65.8 45.2 78.6,5800 8700 4600); t; sym datetime price qty ---- ------------------- ----- ---- APPL 2018.06.08T12:30:01 65.8 5800 IBM 2018.06.08T12:30:01 45.2 8700 GOOG 2018.06.08T12:30:01 78.6 4600&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:14;120:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;可以看到，表中记录条数没有增加，但是主键对应的记录已经更新。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:15;122:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;继续往表中插入一批新记录，新记录本身包含了重复的主键值 MSFT。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:7;123:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;insert into t values(`MSFT`MSFT,2018.06.08T12:30:01 2018.06.08T12:30:01,45.7 56.9,3600 4500); t; sym datetime price qty ---- ------------------- ----- ---- APPL 2018.06.08T12:30:01 65.8 5800 IBM 2018.06.08T12:30:01 45.2 8700 GOOG 2018.06.08T12:30:01 78.6 4600 MSFT 2018.06.08T12:30:01 56.9 4500&lt;/codeblock&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:6;135:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:10;135:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;查询数据&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:16;137:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;使用函数 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:6;137:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;sliceByKey&lt;/codeph&gt; 可以获取键值内存表中一行或多行含有参数指定内容的数据。示例如下：&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:17;139:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;首先，创建键值内存表 t，其中主键值为 sym 与 side。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:8;140:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;t = keyedTable(`sym`side, 10000:0, `sym`side`price`qty, [SYMBOL,CHAR,DOUBLE,INT]) insert into t values(`IBM`MSFT`GOOG, ['B','S','B'], 10.01 10.02 10.03, 10 10 20)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:18;145:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;随后，使用函数 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:7;145:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;sliceByKey&lt;/codeph&gt;，其中参数指定的内容为 sym, side 与 price。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:9;146:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;sliceByKey(t, [[&#34;IBM&#34;, &#34;GOOG&#34;], ['B', 'S']],`sym`side`price) sym side price --- ---- ----- IBM B 10.01&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:19;154:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;注意：本例中，因为键值内存表 t 的主键为 sym 与 side，所以函数 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:8;154:39&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;sliceByKey&lt;/codeph&gt; 中必须含有 sym 与 side 的信息，即[&#34;IBM&#34;, &#34;GOOG&#34;], ['B', 'S']，若缺少任何一项都会导致 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:9;154:118&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;sliceByKey&lt;/codeph&gt; 函数无法获取数据。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:7;156:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:11;156:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;应用场景&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:20;158:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;(1) 键值表对单行的更新和查询有非常高的效率，是数据缓存的理想选择。与 Redis 相比，DolphinDB 中的键值内存表兼容 SQL 的所有操作，可以完成根据键值更新和查询以外的更为复杂的计算。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:21;160:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;(2) 键值表可作为时间序列聚合引擎的输出表，实时更新输出表的结果。具体请参考教程&lt;xref class=&#34;- topic/xref &#34; dita-ot:orig-format=&#34;md&#34; format=&#34;dita&#34; href=&#34;OHLC.md&#34; xtrc=&#34;xref:2;160:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;在DolphinDB中计算K线&lt;/xref&gt;。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;索引内存表&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:5;163:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:5;163:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;索引内存表&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:5;163:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:22;165:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;索引内存表是 DolphinDB 中支持键值字段的内存表，通过指定表中的一个或多个字段作为键值字段。与键值内存表类似，索引内存表也支持增删改查等操作，键值字段也不允许更新。与键值内存表的不同之处在于，在查询时，只需指定第一个键值字段，无需指定全部的键值字段即可快速返回结果。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:8;167:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:12;167:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;创建&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:23;169:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:10;169:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;indexedTable&lt;/codeph&gt; 函数创建索引内存表。该函数与 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:11;169:34&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;keyedTable&lt;/codeph&gt; 非常类似。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:10;171:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;//创建空的索引内存表，键值字段包括sym和id t=indexedTable(`sym`id,1:0,`sym`id`val,[SYMBOL,INT,INT]) //注意：此种方式创建索引内存表时，初始行数（size）必须为0。 //使用向量创建索引内存表，键值字段包括sym和id sym=`A`B`C`D`E id=5 4 3 2 1 val=52 64 25 48 71 t=indexedTable(`sym`id,sym,id,val)&lt;/codeblock&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:9;183:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:13;183:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;数据插入和更新&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:24;185:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;向索引内存表中添加新记录时，操作方法和系统检查方式与键值内存表一致。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:10;187:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:14;187:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;查询数据&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:25;189:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;与键值内存表相似，索引内存表也可以通过使用函数 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:12;189:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;sliceByKey&lt;/codeph&gt; 来获取一行或多行含有参数指定内容的数据，不同的是索引内存表只需指定前 n 个键值字段的信息即可，示例如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:11;191:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;t = indexedTable(`sym`side, 10000:0, `sym`side`price`qty, [SYMBOL,CHAR,DOUBLE,INT]) insert into t values(`IBM`MSFT`GOOG, ['B','S','B'], 10.01 10.02 10.03, 10 10 20)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:26;196:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;本次 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:13;196:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;sliceByKey&lt;/codeph&gt; 函数中仅包含了键值字段 sym 的信息：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:12;197:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;sliceByKey(t, [&#34;IBM&#34;, &#34;GOOG&#34;],`sym`side`price) sym side price --- ---- ----- IBM B 10.01 GOOG B 10.03&lt;/codeblock&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:11;206:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:15;206:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;应用场景&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:27;208:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;键值内存表在指定所有主键的情况下才能达到查询的最佳性能。在实际应用中，不一定每次都需要查询所有键值字段的信息。若有时只需要指定部分键值字段信息，可使用索引内存表。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:28;210:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;首先分别生成键值内存表 t1 与索引内存表 t2：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:13;211:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;id1=shuffle(1..1000000) id2=shuffle(1000001..2000000) val=rand(100.0, 1000000) t1=keyedTable(`id1`id2, id1, id2, val) t2=indexedTable(`id1`id2, id1, id2, val);&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:29;219:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;测试键值内存表与索引内存表在查询是否包含所有键值的情况下的耗时：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:14;220:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;timer(100) select * from t1 where id1=100 and id2=1000001; Time elapsed: 1 ms timer(100) select * from t1 where id1=100; Time elapsed: 1034.265 ms timer(100) select * from t2 where id1=100 and id2=1000001; Time elapsed: 0.999 ms timer(100) select * from t2 where id1=100; Time elapsed: 0.998 ms&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;流数据表&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:6;234:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:6;234:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;流数据表&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:6;234:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:30;236:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;流数据表顾名思义是为流数据设计的内存表，是流数据发布和订阅的媒介。流数据表具有天然的流表对偶性(stream-table duality)：发布一条消息等价于往流数据表中插入一条记录，订阅消息等价于将流数据表中新到达的数据推向客户端应用。对流数据的查询和计算都可以通过 SQL 语句来完成。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:12;238:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:16;238:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;创建&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:31;240:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:14;240:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;streamTable&lt;/codeph&gt; 函数可创建流数据表。&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:15;240:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;streamTable&lt;/codeph&gt; 的用法和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:16;240:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;table&lt;/codeph&gt; 函数完全相同。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:15;242:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;//创建空的流数据表 t=streamTable(1:0,`sym`id`val,[SYMBOL,INT,INT]) //使用向量创建流数据表 sym=`A`B`C`D`E id=5 4 3 2 1 val=52 64 25 48 71 t=streamTable(sym,id,val)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:32;253:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;也可使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:17;253:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;streamTable&lt;/codeph&gt; 函数将常规内存表转换为流数据表。例如：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:16;254:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;sym=`A`B`C`D`E id=5 4 3 2 1 val=52 64 25 48 71 tmp=table(sym, id, val) t=streamTable(tmp)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:33;262:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;流数据表也支持创建键值列，可以通过函数 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:18;262:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;keyedStreamTable&lt;/codeph&gt; 来创建键值流表。但与键值表的设计目的不同，键值流表的目的是为了在高可用场景（多个发布端同时写入）下，避免重复消息。通常 key 就是消息的 ID。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:13;264:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:17;264:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;数据操作特点&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:34;266:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;由于流数据具有一旦生成就不会发生变化的特点，因此流数据表不支持更新和删除记录，只支持查询和添加记录。流数据会不断增加，而内存是有限的。为解决这个矛盾，流数据表引入了持久化机制，在内存中保留最新的一部分数据，将之前的数据持久化在磁盘上。若用户订阅的数据不在内存时，直接从磁盘上读取。可使用函数 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:19;266:147&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;enableTableShareAndPersistence&lt;/codeph&gt; 启用持久化，细节请参考&lt;xref class=&#34;- topic/xref &#34; dita-ot:orig-format=&#34;md&#34; format=&#34;dita&#34; href=&#34;streaming_tutorial.md&#34; xtrc=&#34;xref:3;266:191&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;流数据教程&lt;/xref&gt;。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:14;268:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:18;268:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;应用场景&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:35;270:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享的流数据表在流计算中发布数据。订阅端通过 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:20;270:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;subscribeTable&lt;/codeph&gt; 函数来订阅和消费流数据。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;mvcc内存表&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:7;272:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:7;272:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;MVCC内存表&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:7;272:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:36;274:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;MVCC内存表存储了多个版本的数据，当多个用户同时对MVCC内存表进行读写操作时，互不阻塞。MVCC 内存表的数据隔离采用了快照隔离模型，用户读取到的是读操作之前已经存在的版本，即使这些数据在读取的过程中被修改或删除了，也不会影响正在进行的读操作。这种多版本的方式能够支持用户对内存表的并发访问。需要说明的是，当前的MVCC内存表实现比较简单，更新和删除数据时锁定整个表，并使用 copy-on-write 技术复制一份数据，因此对数据删除和更新操作的效率不高。在后续的版本中，我们将实现行级的 MVCC 内存表。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:15;276:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:19;276:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;创建&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:37;278:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:21;278:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;mvccTable&lt;/codeph&gt; 函数创建 MVCC 内存表。例如：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:17;279:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;//创建空的MVCC内存表 t=mvccTable(1:0,`sym`id`val,[SYMBOL,INT,INT]) //使用向量创建MVCC内存表 sym=`A`B`C`D`E id=5 4 3 2 1 val=52 64 25 48 71 t=mvccTable(sym,id,val)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:38;290:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;若要将 MVCC 内存表的数据持久化到磁盘，只需创建时指定持久化的目录和表名即可。例如，&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:18;291:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;t=mvccTable(1:0,`sym`id`val,[SYMBOL,INT,INT],&#34;/home/user1/DolphinDB/mvcc&#34;,&#34;test&#34;)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:39;295:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;系统重启后，可使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:22;295:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;loadMvccTable&lt;/codeph&gt; 函数将磁盘中的数据加载到内存中：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:19;296:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;loadMvccTable(&#34;/home/user1/DolphinDB/mvcc&#34;,&#34;test&#34;)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:40;300:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;可使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:23;300:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;mvccTable&lt;/codeph&gt; 函数将常规内存表转换为 MVCC 内存表：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:20;301:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;sym=`A`B`C`D`E id=5 4 3 2 1 val=52 64 25 48 71 tmp=table(sym, id, val) t=mvccTable(tmp)&lt;/codeblock&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:16;309:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:20;309:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;应用场景&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:41;311:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;当前的 MVCC 内存表适用于读多写少，并有持久化需要的场景。譬如动态的配置系统，需要持久化配置项，配置项的改动不频繁，以新增和查询操作为主，非常适合 MVCC 表。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;共享内存表&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:8;313:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:8;313:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享内存表&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:8;313:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:42;315:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;DolphinDB 中的内存表默认只在创建内存表的会话中使用，不支持多用户多会话的并发操作，对其它会话也不可见。如果希望内存表能被其他用户使用，保证多用户并发操作的安全，必须共享内存表。所有类型的内存表均可共享。在 DolphinDB 中，使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:24;315:124&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;share&lt;/codeph&gt; 命令将内存表共享。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:21;317:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;t=table(1..10 as id,rand(100,10) as val) share t as st //或者share(t,`st)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:43;323:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;以上代码将表t共享为表 st。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:44;325:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:25;325:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;undef&lt;/codeph&gt; 函数可以删除共享表：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:22;326:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;undef(`st,SHARED)&lt;/codeblock&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;保证对所有会话可见&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:9;330:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:9;330:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;保证对所有会话可见&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:9;330:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:45;332:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;内存表仅在当前会话可见，在其它会话中不可见。共享之后，其它会话可以通过访问共享变量来访问内存表。例如，在当前会话中把表 t 共享为表 st：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:23;333:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;t=table(1..10 as id,rand(100,10) as val) share t as st&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:46;338:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;可以在其它会话中访问变量 st。例如，在另外一个会话中向共享表 st 插入一条数据：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:24;339:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;insert into st values(11,200) select * from st id val -- --- 1 1 2 53 3 13 4 40 5 61 6 92 7 36 8 33 9 46 10 26 11 200 &lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:47;359:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;切换到原来的会话，可以发现，表 t 中也增加了一条记录。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:25;360:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;select * from t id val -- --- 1 1 2 53 3 13 4 40 5 61 6 92 7 36 8 33 9 46 10 26 11 200&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;保证线程安全&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:10;378:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:10;378:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;保证线程安全&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:10;378:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:48;380:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;在多线程的情况下，内存表中的数据很容易被破坏。共享则提供了一种保护机制，能够保证数据安全，但同时也会影响系统的性能。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:49;382:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;常规内存表、流数据表和 MVCC 内存表都支持多版本模型，常规内存表和流数据表允许一写多读， MVCC 内存表允许多读多写。读写互不阻塞，写的时候可以读，读的时候可以写。读数据时不上锁，允许多个线程同时读取数据，读数据时采用快照隔离(snapshot isolation)。常规内存表和流数据表写数据时必须加锁，同时只允许一个线程修改内存表；MVCC 内存表同时允许多个线程修改内存表。写操作包括添加、删除或更新。添加记录一律在内存表的末尾追加，无论内存使用还是CPU使用均非常高效。常规内存表和 MVCC 内存表支持更新和删除，且采用了 copy-on-write 技术，也就是先复制一份数据（构成一个新的版本），然后在新版本上进行删除和修改。由此可见删除和更新操作无论内存和CPU消耗都比较高。当删除和更新操作很频繁，读操作又比较耗时（不能快速释放旧的版本），容易导致 OOM 异常。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:50;384:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;键值内存表与索引内存表写入时需维护内部索引，读取时也需要根据索引获取数据。因此这两种内存表的共享采用了不同的方法，无论读写都必须加锁。写线程和读线程，多个写线程之间，多个读线程之间都是互斥的。并发使用时，对键值内存表与索引内存表应尽量避免耗时的查询或计算，否则会使其它线程长时间处于等待状态。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;分区内存表&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:11;386:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:11;386:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区内存表&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:11;386:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:51;388:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;当内存表数据量较大时，可对内存表进行分区，以充分利用多核进行并行计算。分区后一个内存表由多个子表（tablet）构成，内存表不使用全局锁，锁由每个子表独立管理，这样可以显著增加读写并发能力。DolphinDB 支持对内存表进行值分区、范围分区、哈希分区和列表分区，但不支持组合分区。使用函数 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:26;388:147&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;createPartitionedTable&lt;/codeph&gt; 创建内存分区表。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:17;390:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:21;390:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;创建分区常规内存表&lt;/li&gt;&lt;/ul&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:26;391:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;t=table(1:0,`id`val,[INT,INT]) db=database(&#34;&#34;,RANGE,0 101 201 301) pt=db.createPartitionedTable(t,`pt,`id)&lt;/codeblock&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:18;397:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:22;397:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;创建分区键值内存表&lt;/li&gt;&lt;/ul&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:27;398:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;kt=keyedTable(1:0,`id`val,[INT,INT]) db=database(&#34;&#34;,RANGE,0 101 201 301) pkt=db.createPartitionedTable(kt,`pkt,`id)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:52;403:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;类似的，可创建分区索引内存表。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:19;405:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:23;405:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;创建分区流数据表&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:53;407:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;创建分区流数据表时，需要传入多个流数据表作为模板，每个流数据表对应一个分区。写入数据时，直接往这些流表中写入；而查询数据时，需要查询分区表。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:28;408:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;st1=streamTable(1:0,`id`val,[INT,INT]) st2=streamTable(1:0,`id`val,[INT,INT]) st3=streamTable(1:0,`id`val,[INT,INT]) db=database(&#34;&#34;,RANGE,1 101 201 301) pst=db.createPartitionedTable([st1,st2,st3],`pst,`id) st1.append!(table(1..100 as id,rand(100,100) as val)) st2.append!(table(101..200 as id,rand(100,100) as val)) st3.append!(table(201..300 as id,rand(100,100) as val)) select * from pst&lt;/codeblock&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:20;422:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:24;422:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;创建分区 MVCC 内存表&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:54;424:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;与创建分区流数据表一样，创建分区 MVCC 内存表，需要传入多个MVCC内存表作为模板。每个表对应一个分区。写入数据时，直接往这些表中写入；而查询数据时，需要查询分区表。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:29;426:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;mt1=mvccTable(1:0,`id`val,[INT,INT]) mt2=mvccTable(1:0,`id`val,[INT,INT]) mt3=mvccTable(1:0,`id`val,[INT,INT]) db=database(&#34;&#34;,RANGE,1 101 201 301) pmt=db.createPartitionedTable([mt1,mt2,mt3],`pst,`id) mt1.append!(table(1..100 as id,rand(100,100) as val)) mt2.append!(table(101..200 as id,rand(100,100) as val)) mt3.append!(table(201..300 as id,rand(100,100) as val)) select * from pmt&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:55;440:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;由于分区内存表不使用全局锁，创建以后不能再动态增删子表。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;增加查询的并发性&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:12;442:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:12;442:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;增加查询的并发性&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:12;442:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:56;444:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区表增加查询的并发性有三层含义：（1）键值表在查询时也需要加锁，分区表由子表独立管理锁，相当于把锁的粒度变细了，因此可以增加读的并发性；（2）批量计算时分区表可以并行处理每个子表；（3）如果SQL查询的过滤指定了分区字段，那么可以缩小分区范围，避免全表扫描。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:57;446:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;以键值内存表为例，下例对比在分区和不分区的情况下，并发查询的性能。首先，创建包含500万行数据的模拟数据集。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:30;447:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;n=5000000 id=shuffle(1..n) qty=rand(1000,n) price=rand(1000.0,n) kt=keyedTable(`id,id,qty,price) share kt as skt id_range=cutPoints(1..n,20) db=database(&#34;&#34;,RANGE,id_range) pkt=db.createPartitionedTable(kt,`pkt,`id).append!(kt) share pkt as spkt&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:58;461:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;在另外一台服务器上模拟10个客户端同时查询键值内存表。每个客户端查询10万次，每次查询一条数据，统计每个客户端查询10万次的总耗时。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:31;462:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;def queryKeyedTable(tableName,id){ for(i in id){ select * from objByName(tableName) where id=i } } conn=xdb(&#34;192.168.1.135&#34;,18102,&#34;admin&#34;,&#34;123456&#34;) n=5000000 jobid1=array(STRING,0) for(i in 1..10){ rid=rand(1..n,100000) s=conn(submitJob,&#34;evalQueryUnPartitionTimer&#34;+string(i),&#34;&#34;,evalTimer,queryKeyedTable{`skt,rid}) jobid1.append!(s) } time1=array(DOUBLE,0) for(j in jobid1){ time1.append!(conn(getJobReturn,j,true)) } jobid2=array(STRING,0) for(i in 1..10){ rid=rand(1..n,100000) s=conn(submitJob,&#34;evalQueryPartitionTimer&#34;+string(i),&#34;&#34;,evalTimer,queryKeyedTable{`spkt,rid}) jobid2.append!(s) } time2=array(DOUBLE,0) for(j in jobid2){ time2.append!(conn(getJobReturn,j,true)) } &lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:59;495:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;time1 是10个客户端查询未分区键值内存表的耗时，time2 是10个客户端查询分区键值内存表的耗时，单位是毫秒。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:32;496:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;time1 [6719.266848,7160.349678,7271.465094,7346.452625,7371.821485,7363.87979,7357.024299,7332.747157,7298.920972,7255.876976] time2 [2382.154581,2456.586709,2560.380315,2577.602019,2599.724927,2611.944367,2590.131679,2587.706832,2564.305815,2498.027042]&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:60;504:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;可以看到，每个客户端查询分区键值内存表的耗时要低于查询未分区内存表的耗时。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:61;506:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;查询未分区的内存表，可以保证快照隔离。但查询一个分区内存表，不再保证快照隔离。如前面所说分区内存表的读写不使用全局锁，一个线程在查询时，可能另一个线程正在写入而且涉及多个子表，从而可能读到一部分写入的数据。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;增加写入的并发性&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:13;508:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:13;508:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;增加写入的并发性&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:13;508:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:62;510:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;以分区的常规内存表为例，我们可以同时向不同的分区写入数据。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:33;511:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;t=table(1:0,`id`val,[INT,INT]) db=database(&#34;&#34;,RANGE,1 101 201 301) pt=db.createPartitionedTable(t,`pt,`id) def writeData(mutable t,id,batchSize,n){ for(i in 1..n){ idv=take(id,batchSize) valv=rand(100,batchSize) tmp=table(idv,valv) t.append!(tmp) } } job1=submitJob(&#34;write1&#34;,&#34;&#34;,writeData,pt,1..100,1000,1000) job2=submitJob(&#34;write2&#34;,&#34;&#34;,writeData,pt,101..200,1000,1000) job3=submitJob(&#34;write3&#34;,&#34;&#34;,writeData,pt,201..300,1000,1000)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:63;530:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;上面的代码中，同时有3个线程对 pt 的3个不同的分区进行写入。需要注意的是，要避免同时对相同分区进行写入。例如，下面的代码可能会导致系统异常退出。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:34;531:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;job1=submitJob(&#34;write1&#34;,&#34;&#34;,writeData,pt,1..300,1000,1000) job2=submitJob(&#34;write2&#34;,&#34;&#34;,writeData,pt,1..300,1000,1000)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:64;536:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;上面的代码定义了两个写入线程，并且写入的分区相同，这样会造成线程不安全，可能会导致系统崩溃、数据错误等后果。为了保证每个分区数据的安全性和一致性，可将分区内存表共享，这样即可定义多个线程同时对相同分区写入。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:35;537:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;share pt as spt job1=submitJob(&#34;write1&#34;,&#34;&#34;,writeData,spt,1..300,1000,1000) job2=submitJob(&#34;write2&#34;,&#34;&#34;,writeData,spt,1..300,1000,1000)&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;数据操作比较&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:14;543:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:14;543:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;数据操作比较&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:14;543:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;增删改查&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:15;545:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:15;545:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;增删改查&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:15;545:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:65;547:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;下表总结了不同类型内存表在共享/分区的情况下支持的增删改查操作。&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:1;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;6&#34; xtrc=&#34;tgroup:1;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:1;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:2;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:3;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col4&#34; colnum=&#34;4&#34; xtrc=&#34;colspec:4;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col5&#34; colnum=&#34;5&#34; xtrc=&#34;colspec:5;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col6&#34; colnum=&#34;6&#34; xtrc=&#34;colspec:6;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;/&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:1;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:1;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:1;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:2;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:3;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;增加&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:4;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;删除&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:5;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;更新&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:6;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;查询&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:2;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; morerows=&#34;3&#34; xtrc=&#34;entry:7;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;常规内存表&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:8;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;未共享未分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; morerows=&#34;3&#34; xtrc=&#34;entry:9;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;2&#34; morerows=&#34;3&#34; xtrc=&#34;entry:10;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;2&#34; morerows=&#34;3&#34; xtrc=&#34;entry:11;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:12;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;全表扫描&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:3;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:13;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:14;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;全表扫描&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:4;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:15;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:16;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区内扫描&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:5;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:17;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:18;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区内扫描&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:6;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; morerows=&#34;3&#34; xtrc=&#34;entry:19;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;键值/索引内存表&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:20;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;未共享未分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; morerows=&#34;3&#34; xtrc=&#34;entry:21;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;6&#34; morerows=&#34;3&#34; xtrc=&#34;entry:22;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;6&#34; morerows=&#34;3&#34; xtrc=&#34;entry:23;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:24;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;哈希/排序树&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:7;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:25;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:26;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;哈希/排序树&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:8;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:27;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:28;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区内哈希&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:9;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:29;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:30;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区内哈希&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:10;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;10&#34; morerows=&#34;3&#34; xtrc=&#34;entry:31;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;流数据表&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:32;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;未共享未分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;10&#34; morerows=&#34;3&#34; xtrc=&#34;entry:33;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;10&#34; morerows=&#34;3&#34; xtrc=&#34;entry:34;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;10&#34; morerows=&#34;3&#34; xtrc=&#34;entry:35;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:36;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;全表扫描&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:11;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:37;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:38;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;全表扫描&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:12;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:39;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:40;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区内扫描&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:13;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:41;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:42;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区内扫描&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:14;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;14&#34; morerows=&#34;3&#34; xtrc=&#34;entry:43;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;MVCC内存表&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:44;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;未共享未分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;14&#34; morerows=&#34;3&#34; xtrc=&#34;entry:45;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;14&#34; morerows=&#34;3&#34; xtrc=&#34;entry:46;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;14&#34; morerows=&#34;3&#34; xtrc=&#34;entry:47;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:48;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;全表扫描&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:15;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:49;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:50;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;全表扫描&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:16;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:51;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:52;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区内扫描&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:17;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:53;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:54;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区内扫描&lt;/entry&gt; &lt;/row&gt; &lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:66;640:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;说明：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:21;642:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:25;642:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:67;642:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;常规内存表、键值内存表、索引内存表、MVCC内存表都支持增删改查操作。流数据表仅支持增加数据和查询，不支持删除和更新操作。&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:26;644:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:68;644:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;对于键值内存表与索引内存表，如果查询的过滤条件中包含主键或键值字段，查询的性能会得到明显提升。&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:27;646:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:69;646:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;对于分区内存表，如果查询的过滤条件中包含分区列，系统能够缩小需要扫描的分区范围，从而提升查询的性能。&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;并发性&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:16;649:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:16;649:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;并发性&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:16;649:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:70;651:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;在没有写入的情况下，所有内存表都允许多个线程同时查询。在有写入的情况下，各类内存表的并发性有所差异。下表总结了各类内存表在共享/分区的情况下支持的并发读写情况。&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:2;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;5&#34; xtrc=&#34;tgroup:2;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:7;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:8;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:9;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col4&#34; colnum=&#34;4&#34; xtrc=&#34;colspec:10;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col5&#34; colnum=&#34;5&#34; xtrc=&#34;colspec:11;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;/&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:2;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:18;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:55;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:56;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:57;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;一写一读或一写多读&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:58;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;多写多读（写入相同分区）&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:59;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;多写多读（写入不同分区）&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:19;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; morerows=&#34;3&#34; xtrc=&#34;entry:60;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;常规内存表&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:61;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;未共享未分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:62;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:63;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;2&#34; morerows=&#34;1&#34; xtrc=&#34;entry:64;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;/&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:20;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:65;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:66;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:67;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:21;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:68;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:69;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:70;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:71;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:22;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:72;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:73;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:74;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:75;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:23;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; morerows=&#34;3&#34; xtrc=&#34;entry:76;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;键值/索引内存表&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:77;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;未共享未分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:78;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:79;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;6&#34; morerows=&#34;1&#34; xtrc=&#34;entry:80;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;/&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:24;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:81;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:82;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:83;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:25;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:84;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:85;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:86;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:87;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:26;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:88;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:89;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:90;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:91;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:27;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;10&#34; morerows=&#34;3&#34; xtrc=&#34;entry:92;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;流数据表&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:93;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;未共享未分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:94;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:95;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;10&#34; morerows=&#34;1&#34; xtrc=&#34;entry:96;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;/&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:28;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:97;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:98;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:99;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:29;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:100;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:101;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:102;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:103;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:30;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:104;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:105;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:106;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:107;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:31;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;14&#34; morerows=&#34;3&#34; xtrc=&#34;entry:108;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;MVCC内存表&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:109;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;未共享未分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:110;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:111;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;14&#34; morerows=&#34;1&#34; xtrc=&#34;entry:112;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;/&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:32;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:113;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:114;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:115;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:33;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:116;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:117;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:118;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:119;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:34;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:120;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:121;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:122;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:123;653:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;/row&gt; &lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:71;759:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;说明：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:22;761:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:28;761:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享表允许并发读写。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:29;762:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;对于没有共享的分区表，不允许多线程对相同分区同时写入。&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;持久化&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:17;765:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:17;765:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;持久化&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:17;765:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:23;767:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:30;767:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:72;767:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;常规内存表、键值内存表以及索引内存表均不支持数据持久化。一旦节点重启，内存中的数据将全部丢失。&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:31;769:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:73;769:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;MVCC内存表支持持久化。在创建 MVCC 内存表时，可以指定持久化的路径。例如：&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:36;770:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;t=mvccTable(1:0,`id`val,[INT,INT],&#34;/home/user/DolphinDB/mvccTable&#34;) t.append!(table(1..10 as id,rand(100,10) as val))&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:74;775:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;系统重启后，可使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:27;775:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;loadMvccTable&lt;/codeph&gt; 函数将磁盘中的数据加载到内存中。例如：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:37;776:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;t=loadMvccTable(&#34;/home/user/DolphinDB/mvccTable&#34;,&#34;t&#34;)&lt;/codeblock&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:24;780:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:32;780:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;要对流数据表进行持久化，首先要配置流数据持久化的目录 persistenceDir，再使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:28;780:49&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;enableTableShareAndPersistence&lt;/codeph&gt; 函数将流数据表共享，并持久化到磁盘上。请注意，该函数只能用于空的流数据表。例如，将流数据表t共享并持久化到磁盘上：&lt;/li&gt;&lt;/ul&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:38;781:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;t=streamTable(1:0,`id`val,[INT,DOUBLE]) enableTableShareAndPersistence(t,`st)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:75;786:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;流数据表启用了持久化后，内存中仍然会保留流数据表中部分最新的记录。默认情况下，内存会保留最新的10万条记录。可以根据需要调整这个值。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:76;788:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;流数据表持久化可以设定采用异步/同步、压缩/不压缩的方式。通常情况下，异步模式能够实现更高的吞吐量。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:77;790:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;系统重启后，执行 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:29;790:10&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;enableTableShareAndPersistence&lt;/codeph&gt; 函数，会将持久化的数据加载到内存。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;表结构操作比较&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:18;793:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:18;793:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;表结构操作比较&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:18;793:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:78;795:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;内存表的结构操作包括新增列、删除列、修改列（内容和数据类型）以及调整列的顺序。下表总结了5种类型内存表在共享/分区的情况下支持的结构操作。&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:3;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;7&#34; xtrc=&#34;tgroup:3;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:12;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:13;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:14;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col4&#34; colnum=&#34;4&#34; xtrc=&#34;colspec:15;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col5&#34; colnum=&#34;5&#34; xtrc=&#34;colspec:16;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col6&#34; colnum=&#34;6&#34; xtrc=&#34;colspec:17;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col7&#34; colnum=&#34;7&#34; xtrc=&#34;colspec:18;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;/&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:3;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:35;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:124;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:125;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:126;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;通过addColumn函数新增列&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:127;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;通过update语句新增列&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:128;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;删除列&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:129;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;修改列(内容和数据类型)&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col7&#34; dita-ot:x=&#34;7&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:130;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;调整列的顺序&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:36;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; morerows=&#34;3&#34; xtrc=&#34;entry:131;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;常规内存表&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:132;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;未共享未分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:133;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:134;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:135;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:136;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col7&#34; dita-ot:x=&#34;7&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:137;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:37;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:138;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:139;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:140;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:141;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:142;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col7&#34; dita-ot:x=&#34;7&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:143;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:38;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:144;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:145;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:146;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:147;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:148;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col7&#34; dita-ot:x=&#34;7&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:149;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:39;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:150;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:151;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:152;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:153;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:154;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col7&#34; dita-ot:x=&#34;7&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:155;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:40;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; morerows=&#34;3&#34; xtrc=&#34;entry:156;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;键值/索引内存表&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:157;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;未共享未分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:158;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:159;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:160;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:161;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col7&#34; dita-ot:x=&#34;7&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:162;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:41;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:163;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:164;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:165;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:166;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:167;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col7&#34; dita-ot:x=&#34;7&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:168;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:42;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:169;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:170;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:171;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:172;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:173;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col7&#34; dita-ot:x=&#34;7&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:174;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:43;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:175;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:176;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:177;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:178;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:179;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col7&#34; dita-ot:x=&#34;7&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:180;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:44;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;10&#34; morerows=&#34;3&#34; xtrc=&#34;entry:181;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;流数据表&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:182;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;未共享未分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;10&#34; morerows=&#34;1&#34; xtrc=&#34;entry:183;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;10&#34; morerows=&#34;3&#34; xtrc=&#34;entry:184;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;10&#34; morerows=&#34;3&#34; xtrc=&#34;entry:185;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;10&#34; morerows=&#34;3&#34; xtrc=&#34;entry:186;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col7&#34; dita-ot:x=&#34;7&#34; dita-ot:y=&#34;10&#34; morerows=&#34;3&#34; xtrc=&#34;entry:187;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:45;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:188;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:46;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:189;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;12&#34; morerows=&#34;1&#34; xtrc=&#34;entry:190;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:47;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:191;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享分区&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:48;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;14&#34; morerows=&#34;3&#34; xtrc=&#34;entry:192;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;MVCC 内存表&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:193;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;未分区未共享&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;14&#34; morerows=&#34;3&#34; xtrc=&#34;entry:194;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:195;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col5&#34; dita-ot:x=&#34;5&#34; dita-ot:y=&#34;14&#34; morerows=&#34;3&#34; xtrc=&#34;entry:196;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col6&#34; dita-ot:x=&#34;6&#34; dita-ot:y=&#34;14&#34; morerows=&#34;3&#34; xtrc=&#34;entry:197;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col7&#34; dita-ot:x=&#34;7&#34; dita-ot:y=&#34;14&#34; morerows=&#34;3&#34; xtrc=&#34;entry:198;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:49;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:199;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:200;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:50;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:201;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:202;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;√&lt;/entry&gt; &lt;/row&gt; &lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:51;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:203;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;共享分区&lt;/entry&gt; &lt;entry class=&#34;- topic/entry &#34; colname=&#34;col4&#34; dita-ot:x=&#34;4&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:204;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;×&lt;/entry&gt; &lt;/row&gt; &lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:79;915:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;说明：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:25;917:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:33;917:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区表以及MVCC内存表不能通过 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:30;917:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;addColumn&lt;/codeph&gt; 命令新增列。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:34;918:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;分区表可以通过 update 语句来新增列，但是流数据表不能通过 update 语句来新增列。&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;小结&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:19;920:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:19;920:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;小结&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:19;920:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:80;922:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/in_memory_table.md&#34;&gt;DolphinDB 支持5种类型内存表，还支持共享和分区，能够满足内存计算和流计算的各种需求。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;"/><meta name="wh-source-relpath" content="tutorials/in_memory_table.md"/><meta name="wh-out-relpath" content="tutorials/in_memory_table.html"/>

    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/commons.css?buildId=2024012323"/>
    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic.css?buildId=2024012323"/>

    <script src="../oxygen-webhelp/app/options/properties.js?buildId=20250305183303"></script>
    <script src="../oxygen-webhelp/app/localization/strings.js?buildId=2024012323"></script>
    <script src="../oxygen-webhelp/app/search/index/keywords.js?buildId=20250305183303"></script>
    <script defer="defer" src="../oxygen-webhelp/app/commons.js?buildId=2024012323"></script>
    <script defer="defer" src="../oxygen-webhelp/app/topic.js?buildId=2024012323"></script>
<link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/styles.css?buildId=2024012323"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script></head>

    <body id="dolphindb-内存表详解" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            跳转到主要内容
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div xmlns:whc="http://www.oxygenxml.com/webhelp/components" class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="https://docs.dolphindb.cn/zh/index.html" class=" wh_logo d-none d-sm-block "><img src="../logo.png" alt="  DolphinDB 文档中心  "/></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="booktitle">  <span class="ph mainbooktitle">DolphinDB 文档中心</span>  </span></a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="搜索 " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="搜索查询" required="required"/><button type="submit" class="wh_search_button" aria-label="搜索"><span class="search_input_text">搜索</span></button></div></form>
            
            <script src="/vendors/react/umd/react.production.min.js" defer="defer"></script>
<script src="/vendors/react-dom/umd/react-dom.production.min.js" defer="defer"></script>
<script src="/vendors/dayjs/dayjs.min.js" defer="defer"></script>
<script src="/vendors/antd/dist/antd.min.js" defer="defer"></script>
<script src="/vendors/@ant-design/icons/dist/index.umd.min.js" defer="defer"></script>
<script src="/zh/index.js" type="module"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" defer="defer"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer="defer"><!--


--></script>
<script defer="defer"><!--

// 从主页重定向
const currentUrl = window.location.href;

// 判断当前URL是否包含index.html并且路径最后部分是index.html
if (currentUrl.endsWith('index.html')) {
    // 处理根目录下的index.html跳转
    const baseUrl = currentUrl.split('/index.html')[0]; // 获取index.html之前的部分
    const redirectUrl = `${baseUrl}/about/ddb_intro.html`; // 构建跳转路径
    window.location.href = redirectUrl; // 执行跳转
}

--></script>
            
        </div></div>
    </div>
</header>
        
        
         
        
        
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="../index.html"><span>主页</span></a></span></li><li><div class="topicref" data-id="about_tutorials"><div class="title"><a href="../tutorials/about_tutorials.html"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div></li><li><div class="topicref"><div class="title"><a href="../tutorials/database.html">数据库</a></div></div></li><li class="active"><div class="topicref" data-id="dolphindb-内存表详解"><div class="title"><a href="../tutorials/in_memory_table.html">DolphinDB 内存表详解</a></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="切换搜索突出显示" title="切换搜索突出显示"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="折叠截面" title="折叠截面"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="打印此页" aria-label="打印此页"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem"><div data-tocid="ddb_intro-d9713e87" class="topicref" data-id="ddb_intro" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../about/ddb_intro.html" id="ddb_intro-d9713e87-link">关于DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="chap1_getstarted-d9713e136" class="topicref" data-id="chap1_getstarted" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../getstarted/chap1_getstarted.html" id="chap1_getstarted-d9713e136-link">快速上手</a><div class="wh-tooltip"><p class="shortdesc">如何快速部署 DolphinDB、建库建表、写入和查询数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="sectionddb_deployment-d9713e189" class="topicref" data-id="sectionddb_deployment" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action sectionddb_deployment-d9713e189-link" class="wh-expand-btn"></span><div class="title"><a href="../deploy/deploy_intro.html" id="sectionddb_deployment-d9713e189-link"><span class="keyword label">部署</span></a><div class="wh-tooltip"><p class="shortdesc">如何在不同的场景中部署 DolphinDB</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259" class="topicref" data-id="new_chap_database_manage_new_chap_dbmanage_landing_page" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/cfg/db_intro.html" id="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link"><span class="keyword label">数据库</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 数据库的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_streaming-d9713e3760" class="topicref" data-id="chap7_tutorials_streaming" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_streaming-d9713e3760-link" class="wh-expand-btn"></span><div class="title"><a href="../stream/str_intro.html" id="chap7_tutorials_streaming-d9713e3760-link"><span class="keyword label">流数据</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 流数据引擎及流数据计算的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e7513" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e7513-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/db_oper/import_data.html" id="tocId-d9713e7513-link">数据迁移</a><div class="wh-tooltip"><p class="shortdesc">如何从不同数据源向 DolphinDB 迁移数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_system_management-d9713e7940" class="topicref" data-id="chap7_tutorials_system_management" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_system_management-d9713e7940-link" class="wh-expand-btn"></span><div class="title"><a href="../sys_man/om_intro.html" id="chap7_tutorials_system_management-d9713e7940-link"><span class="keyword label">系统运维</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 的系统运维功能及方法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="troubleshooting-d9713e8780" class="topicref" data-id="troubleshooting" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action troubleshooting-d9713e8780-link" class="wh-expand-btn"></span><div class="title"><a href="../error_codes/troubleshooting.html" id="troubleshooting-d9713e8780-link">故障排查</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="about_language_resources-d9713e20911" class="topicref" data-id="about_language_resources" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action about_language_resources-d9713e20911-link" class="wh-expand-btn"></span><div class="title"><a href="../progr/progr_intro.html" id="about_language_resources-d9713e20911-link"><span class="keyword label">编程语言</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 编程基本概念与方法、SQL 在 DolphinDB 的应用</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="functions_references-d9713e30925" class="topicref" data-id="functions_references" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action functions_references-d9713e30925-link" class="wh-expand-btn"></span><div class="title"><a href="../funcs/funcs_intro.html" id="functions_references-d9713e30925-link"><span class="keyword label">函数参考</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 函数分类、语法、详解及示例</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="api_protocol-d9713e94064" class="topicref" data-id="api_protocol" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action api_protocol-d9713e94064-link" class="wh-expand-btn"></span><div class="title"><a href="../api/connapi_intro.html" id="api_protocol-d9713e94064-link"><span class="keyword label">连接器 &amp; API</span></a><div class="wh-tooltip"><p class="shortdesc">面向不同编程语言的 DolphinDB API 及连接器，相关协议和用法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap6_plugin-d9713e94210" class="topicref" data-id="chap6_plugin" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap6_plugin-d9713e94210-link" class="wh-expand-btn"></span><div class="title"><a href="../plugins/plg_intro.html" id="chap6_plugin-d9713e94210-link"><span class="keyword label">插件</span></a><div class="wh-tooltip"><p class="shortdesc">多个应用场景的插件使用说明和插件开发指导</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="third_party-d9713e97904" class="topicref" data-id="third_party" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action third_party-d9713e97904-link" class="wh-expand-btn"></span><div class="title"><a href="../third_party.html" id="third_party-d9713e97904-link">第三方工具</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="about_tutorials-d9713e98227" class="topicref" data-id="about_tutorials" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action about_tutorials-d9713e98227-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/about_tutorials.html" id="about_tutorials-d9713e98227-link"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98280" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98280-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/new_users_finance.html" id="tocId-d9713e98280-link">新用户入门</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="tocId-d9713e98327" class="topicref" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action tocId-d9713e98327-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/database.html" id="tocId-d9713e98327-link">数据库</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="分区数据库设计和操作-d9713e98328" class="topicref" data-id="分区数据库设计和操作" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/database.html" id="分区数据库设计和操作-d9713e98328-link">分区数据库设计和操作</a></div></div></li><li role="treeitem" class="active"><div data-tocid="dolphindb-内存表详解-d9713e98374" class="topicref" data-id="dolphindb-内存表详解" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/in_memory_table.html" id="dolphindb-内存表详解-d9713e98374-link">DolphinDB 内存表详解</a></div></div></li><li role="treeitem"><div data-tocid="内存数据表-d9713e98420" class="topicref" data-id="内存数据表" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/partitioned_in_memory_table.html" id="内存数据表-d9713e98420-link">内存数据表</a></div></div></li><li role="treeitem"><div data-tocid="oltp-内存存储引擎非嵌入式版使用教程-d9713e98466" class="topicref" data-id="oltp-内存存储引擎非嵌入式版使用教程" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/oltp_in-memory_storage_engine_non-embedded_version_tutorials.html" id="oltp-内存存储引擎非嵌入式版使用教程-d9713e98466-link">OLTP 内存存储引擎（非嵌入式版）使用教程</a></div></div></li><li role="treeitem"><div data-tocid="利用缓存表快速实现-mysql-库间信息同步-d9713e98512" class="topicref" data-id="利用缓存表快速实现-mysql-库间信息同步" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/cachedtable.html" id="利用缓存表快速实现-mysql-库间信息同步-d9713e98512-link">利用缓存表快速实现 MySQL 库间信息同步</a></div></div></li><li role="treeitem"><div data-tocid="建库建表最容易忽略的十个细节-d9713e98558" class="topicref" data-id="建库建表最容易忽略的十个细节" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/database_and_table_creation_details.html" id="建库建表最容易忽略的十个细节-d9713e98558-link">建库建表最容易忽略的十个细节</a></div></div></li><li role="treeitem"><div data-tocid="redo-log-和-cache-engine-d9713e98604" class="topicref" data-id="redo-log-和-cache-engine" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/redoLog_cacheEngine.html" id="redo-log-和-cache-engine-d9713e98604-link">redo log 和 cache engine</a></div></div></li><li role="treeitem"><div data-tocid="tsdb-存储引擎简介-d9713e98650" class="topicref" data-id="tsdb-存储引擎简介" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/tsdb_engine.html" id="tsdb-存储引擎简介-d9713e98650-link">TSDB 存储引擎简介</a></div></div></li><li role="treeitem"><div data-tocid="tsdb-存储引擎详解-d9713e98696" class="topicref" data-id="tsdb-存储引擎详解" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/tsdb_explained.html" id="tsdb-存储引擎详解-d9713e98696-link">TSDB 存储引擎详解</a></div></div></li><li role="treeitem"><div data-tocid="分布式表数据更新原理和性能-d9713e98742" class="topicref" data-id="分布式表数据更新原理和性能" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/dolphindb_update.html" id="分布式表数据更新原理和性能-d9713e98742-link">分布式表数据更新原理和性能</a></div></div></li><li role="treeitem"><div data-tocid="软删除-d9713e98788" class="topicref" data-id="软删除" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/soft_delete.html" id="软删除-d9713e98788-link">软删除</a></div></div></li><li role="treeitem"><div data-tocid="基于-datax-的-dolphindb-数据导入工具-d9713e98835" class="topicref" data-id="基于-datax-的-dolphindb-数据导入工具" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/datax_writer.html" id="基于-datax-的-dolphindb-数据导入工具-d9713e98835-link">基于 DataX 的 DolphinDB 数据导入工具</a></div></div></li><li role="treeitem"><div data-tocid="debezium--kafka-实时同步-mysql-数据到-dolphindb-d9713e98881" class="topicref" data-id="debezium--kafka-实时同步-mysql-数据到-dolphindb" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Debezium_and_Kafka_data_sync.html" id="debezium--kafka-实时同步-mysql-数据到-dolphindb-d9713e98881-link">Debezium + Kafka 实时同步 MySQL 数据到 DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="debeziumkafka-实时同步-oracle-11g-数据到-dolphindb-d9713e98927" class="topicref" data-id="debeziumkafka-实时同步-oracle-11g-数据到-dolphindb" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Debezium_Kafka_Oracle_sync.html" id="debeziumkafka-实时同步-oracle-11g-数据到-dolphindb-d9713e98927-link">Debezium+Kafka 实时同步 Oracle 11g 数据到 DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="clear_cache-d9713e98973" class="topicref" data-id="clear_cache" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/clear_cache.html" id="clear_cache-d9713e98973-link">数据库缓存清理机制 </a></div></div></li><li role="treeitem"><div data-tocid="best_practice_for_storage_compute_separation-d9713e99019" class="topicref" data-id="best_practice_for_storage_compute_separation" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/best_practice_for_storage_compute_separation.html" id="best_practice_for_storage_compute_separation-d9713e99019-link">存算分离最佳实践教程</a></div></div></li><li role="treeitem"><div data-tocid="database_and_table_creation_wizard-d9713e99065" class="topicref" data-id="database_and_table_creation_wizard" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/database_and_table_creation_wizard.html" id="database_and_table_creation_wizard-d9713e99065-link">DolphinDB Web 界面库表创建指南</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e99111" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e99111-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/std_sql_ddb.html" id="tocId-d9713e99111-link">编程</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100448" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100448-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming-real-time-correlation-processing_2.html" id="tocId-d9713e100448-link">流数据</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100955" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100955-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/scheduledJob_2.html" id="tocId-d9713e100955-link">系统运维</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="模块概述-d9713e101923" class="topicref" data-id="模块概述" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action 模块概述-d9713e101923-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/tu_modules.html" id="模块概述-d9713e101923-link">模块</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e102568" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e102568-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/OHLC_2.html" id="tocId-d9713e102568-link">金融场景案例</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e104827" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e104827-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_engine_anomaly_alerts_2.html" id="tocId-d9713e104827-link">物联网场景案例</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105795" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105795-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/dolphindb_tensor_libtorch_tutorial.html" id="tocId-d9713e105795-link">机器学习</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105842" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105842-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/api_performance.html" id="tocId-d9713e105842-link">测试报告</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105982" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105982-link" class="wh-expand-btn"></span><div class="title"><a href="../rn/server/3_00_2.html" id="tocId-d9713e105982-link">版本说明</a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 版本发布历史</p></div></div></div></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-7 col-md-9 col-sm-12" id="wh_topic_body">
                        <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        <button id="wh_close_topic_toc_button" class="close-toc-button d-none" aria-label="Toggle topic table of content" aria-controls="wh_topic_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        <div class=" wh_topic_content body "><main role="main"><article class="- topic/topic topic" role="article" aria-labelledby="ariaid-title1"><h1 class="- topic/title title topictitle1" id="ariaid-title1">DolphinDB 内存表详解</h1><div class="- topic/body body"><p class="- topic/p p">内存表不仅可以直接用于存储数据，实现高速数据读写，而且可以缓存计算引擎的中间结果，加速计算过程。本教程主要介绍DolphinDB 内存表的分类、使用场景以及在数据操作与表结构(schema)操作上的异同。</p></div><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title2" id="内存表类别"><h2 class="- topic/title title topictitle2" id="ariaid-title2">内存表类别</h2><div class="- topic/body body"><p class="- topic/p p">根据不同的使用场景以及功能特点，DolphinDB 内存表可以分为以下5种：</p><ul class="- topic/ul ul"><li class="- topic/li li">常规内存表</li><li class="- topic/li li">键值内存表</li><li class="- topic/li li">索引内存表</li><li class="- topic/li li">流数据表</li><li class="- topic/li li">MVCC内存表</li></ul></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title3" id="常规内存表"><h3 class="- topic/title title topictitle3" id="ariaid-title3">常规内存表</h3><div class="- topic/body body"><p class="- topic/p p">常规内存表是 DolphinDB 中最基础的表结构，支持增删改查等操作。SQL 查询返回的结果通常存储在常规内存表中，等待进一步处理。</p><ul class="- topic/ul ul"><li class="- topic/li li">创建</li></ul><p class="- topic/p p">使用 <code class="+ topic/ph pr-d/codeph ph codeph">table</code> 函数可创建常规内存表。可根据指定的 schema（字段类型和字段名称）以及表容量（capacity）和初始行数（size）来生成内存表，亦可通过已有数据（矩阵，表，数组和元组）来生成内存表。</p><p class="- topic/p p">使用第一种生成方法的好处是可以预先为表分配内存。当表中的记录数超过容量（capacity）时，系统会自动扩充表的容量。扩充时系统首先会分配更大的内存空间（增加20%到100%不等），然后复制旧表到新的表，最后释放原来的内存。对于规模较大的表，扩容的成本会比较高。因此，如果我们可以事先大概估计表的行数，可以在创建内存表时预先为之分配一个合理的容量。如果表的初始行数为0，系统会生成空表。如果初始行数不为0，系统会生成一个指定行数的表，表中各列的值都为默认值。例如：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>//创建一个空的常规内存表
t=table(100:0,`sym`id`val,[SYMBOL,INT,INT])

//创建一个10行的常规内存表
t=table(100:10,`sym`id`val,[SYMBOL,INT,INT])
select * from t

sym id val
--- -- ---
    0  0  
    0  0  
    0  0  
    0  0  
    0  0  
    0  0  
    0  0  
    0  0  
    0  0  
    0  0  </code></pre><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">table</code> 函数也允许通过已有的数据来创建一个常规内存表。下例是通过多个数组来创建。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sym=`A`B`C`D`E
id=5 4 3 2 1
val=52 64 25 48 71
t=table(sym,id,val);</code></pre><ul class="- topic/ul ul"><li class="- topic/li li">应用</li></ul><p class="- topic/p p">常规内存表是 DolphinDB 中应用最频繁的数据结构之一，仅次于数组。SQL 语句的查询结果，分布式查询的中间结果都存储在常规内存表中。当系统内存不足时，该表并不会自动将数据溢出到磁盘，而是 Out Of Memory 异常。因此我们进行各种查询和计算时，要注意中间结果和最终结果的 size。当某些中间结果不再需要时，请及时释放。关于常规内存表增删改查的各种用法，可以参考另一份教程<a class="- topic/xref xref" href="partitioned_in_memory_table.html">内存分区表加载和操作</a>：内存表的数据处理。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title4" id="键值内存表"><h3 class="- topic/title title topictitle3" id="ariaid-title4">键值内存表</h3><div class="- topic/body body"><p class="- topic/p p">键值内存表是 DolphinDB 中支持主键的内存表。指定主键（可为表中一个或多个列）的值，可以快速返回表中的对应记录。键值内存表支持增删改查等操作，但是主键值不允许更新。键值内存表通过哈希表来记录每一个键值对应的行号，因此对于基于键值的查找和更新具有非常高的效率。</p><ul class="- topic/ul ul"><li class="- topic/li li">创建</li></ul><p class="- topic/p p">使用 <code class="+ topic/ph pr-d/codeph ph codeph">keyedTable</code> 函数可创建键值内存表。该函数与 <code class="+ topic/ph pr-d/codeph ph codeph">table</code> 函数非常类似，唯一不同之处是增加了一个参数指定键值列的名称。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>//创建空的键值内存表，主键由sym和id字段组成
t=keyedTable(`sym`id, 1:0, `sym`id`val, [SYMBOL,INT,INT])
//注意：此种方式创建键值内存表时，初始行数（size）必须为0。

//使用向量创建键值内存表，主键由sym和id字段组成
sym=`A`B`C`D`E
id=5 4 3 2 1
val=52 64 25 48 71
t=keyedTable(`sym`id,sym,id,val)</code></pre><p class="- topic/p p">也可通过 <code class="+ topic/ph pr-d/codeph ph codeph">keyedTable</code> 函数将常规内存表转换为键值内存表。例如：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sym=`A`B`C`D`E
id=5 4 3 2 1
val=52 64 25 48 71
tmp=table(sym, id, val)
t=keyedTable(`sym`id, tmp)</code></pre><ul class="- topic/ul ul"><li class="- topic/li li">数据插入和更新</li></ul><p class="- topic/p p">向键值内存表中添加新记录时，系统会自动检查新记录的主键值。如果新记录的主键值在表中不存在，则向表中添加新的记录；如果新记录的主键值与已有记录的主键值重复，会更新表中该主键值对应的记录。请看下面的例子。</p><p class="- topic/p p">首先，向空的键值内存表中插入新记录，新记录中的主键值为 AAPL, IBM 和 GOOG。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>t=keyedTable(`sym,1:0,`sym`datetime`price`qty,[SYMBOL,DATETIME,DOUBLE,DOUBLE]);
insert into t values(`APPL`IBM`GOOG,2018.06.08T12:30:00 2018.06.08T12:30:00 2018.06.08T12:30:00,50.3 45.6 58.0,5200 4800 7800);
t;

sym  datetime            price qty 
---- ------------------- ----- ----
APPL 2018.06.08T12:30:00 50.3  5200
IBM  2018.06.08T12:30:00 45.6  4800
GOOG 2018.06.08T12:30:00 58    7800</code></pre><p class="- topic/p p">再次向表中插入一批主键值为 AAPL, IBM 和 GOOG 的新记录。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>insert into t values(`APPL`IBM`GOOG,2018.06.08T12:30:01 2018.06.08T12:30:01 2018.06.08T12:30:01,65.8 45.2 78.6,5800 8700 4600);
t;

sym  datetime            price qty 
---- ------------------- ----- ----
APPL 2018.06.08T12:30:01 65.8  5800
IBM  2018.06.08T12:30:01 45.2  8700
GOOG 2018.06.08T12:30:01 78.6  4600</code></pre><p class="- topic/p p">可以看到，表中记录条数没有增加，但是主键对应的记录已经更新。</p><p class="- topic/p p">继续往表中插入一批新记录，新记录本身包含了重复的主键值 MSFT。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>insert into t values(`MSFT`MSFT,2018.06.08T12:30:01 2018.06.08T12:30:01,45.7 56.9,3600 4500);
t;

sym  datetime            price qty 
---- ------------------- ----- ----
APPL 2018.06.08T12:30:01 65.8  5800
IBM  2018.06.08T12:30:01 45.2  8700
GOOG 2018.06.08T12:30:01 78.6  4600
MSFT 2018.06.08T12:30:01 56.9  4500</code></pre><ul class="- topic/ul ul"><li class="- topic/li li">查询数据</li></ul><p class="- topic/p p">使用函数 <code class="+ topic/ph pr-d/codeph ph codeph">sliceByKey</code> 可以获取键值内存表中一行或多行含有参数指定内容的数据。示例如下：</p><p class="- topic/p p">首先，创建键值内存表 t，其中主键值为 sym 与 side。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>t = keyedTable(`sym`side, 10000:0, `sym`side`price`qty, [SYMBOL,CHAR,DOUBLE,INT])
insert into t values(`IBM`MSFT`GOOG, ['B','S','B'], 10.01 10.02 10.03, 10 10 20)</code></pre><p class="- topic/p p">随后，使用函数 <code class="+ topic/ph pr-d/codeph ph codeph">sliceByKey</code>，其中参数指定的内容为 sym, side 与 price。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sliceByKey(t, [["IBM", "GOOG"], ['B', 'S']],`sym`side`price)

sym side price
--- ---- -----
IBM B    10.01</code></pre><p class="- topic/p p">注意：本例中，因为键值内存表 t 的主键为 sym 与 side，所以函数 <code class="+ topic/ph pr-d/codeph ph codeph">sliceByKey</code> 中必须含有 sym 与 side 的信息，即["IBM", "GOOG"], ['B', 'S']，若缺少任何一项都会导致 <code class="+ topic/ph pr-d/codeph ph codeph">sliceByKey</code> 函数无法获取数据。</p><ul class="- topic/ul ul"><li class="- topic/li li">应用场景</li></ul><p class="- topic/p p">(1) 键值表对单行的更新和查询有非常高的效率，是数据缓存的理想选择。与 Redis 相比，DolphinDB 中的键值内存表兼容 SQL 的所有操作，可以完成根据键值更新和查询以外的更为复杂的计算。</p><p class="- topic/p p">(2) 键值表可作为时间序列聚合引擎的输出表，实时更新输出表的结果。具体请参考教程<a class="- topic/xref xref" href="OHLC.html">在DolphinDB中计算K线</a>。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title5" id="索引内存表"><h3 class="- topic/title title topictitle3" id="ariaid-title5">索引内存表</h3><div class="- topic/body body"><p class="- topic/p p">索引内存表是 DolphinDB 中支持键值字段的内存表，通过指定表中的一个或多个字段作为键值字段。与键值内存表类似，索引内存表也支持增删改查等操作，键值字段也不允许更新。与键值内存表的不同之处在于，在查询时，只需指定第一个键值字段，无需指定全部的键值字段即可快速返回结果。</p><ul class="- topic/ul ul"><li class="- topic/li li">创建</li></ul><p class="- topic/p p">使用 <code class="+ topic/ph pr-d/codeph ph codeph">indexedTable</code> 函数创建索引内存表。该函数与 <code class="+ topic/ph pr-d/codeph ph codeph">keyedTable</code> 非常类似。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>//创建空的索引内存表，键值字段包括sym和id
t=indexedTable(`sym`id,1:0,`sym`id`val,[SYMBOL,INT,INT])
//注意：此种方式创建索引内存表时，初始行数（size）必须为0。

//使用向量创建索引内存表，键值字段包括sym和id
sym=`A`B`C`D`E
id=5 4 3 2 1
val=52 64 25 48 71
t=indexedTable(`sym`id,sym,id,val)</code></pre><ul class="- topic/ul ul"><li class="- topic/li li">数据插入和更新</li></ul><p class="- topic/p p">向索引内存表中添加新记录时，操作方法和系统检查方式与键值内存表一致。</p><ul class="- topic/ul ul"><li class="- topic/li li">查询数据</li></ul><p class="- topic/p p">与键值内存表相似，索引内存表也可以通过使用函数 <code class="+ topic/ph pr-d/codeph ph codeph">sliceByKey</code> 来获取一行或多行含有参数指定内容的数据，不同的是索引内存表只需指定前 n 个键值字段的信息即可，示例如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>t = indexedTable(`sym`side, 10000:0, `sym`side`price`qty, [SYMBOL,CHAR,DOUBLE,INT])
insert into t values(`IBM`MSFT`GOOG, ['B','S','B'], 10.01 10.02 10.03, 10 10 20)</code></pre><p class="- topic/p p">本次 <code class="+ topic/ph pr-d/codeph ph codeph">sliceByKey</code> 函数中仅包含了键值字段 sym 的信息：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sliceByKey(t, ["IBM", "GOOG"],`sym`side`price)

sym side price
--- ---- -----
IBM  B    10.01
GOOG B    10.03</code></pre><ul class="- topic/ul ul"><li class="- topic/li li">应用场景</li></ul><p class="- topic/p p">键值内存表在指定所有主键的情况下才能达到查询的最佳性能。在实际应用中，不一定每次都需要查询所有键值字段的信息。若有时只需要指定部分键值字段信息，可使用索引内存表。</p><p class="- topic/p p">首先分别生成键值内存表 t1 与索引内存表 t2：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>id1=shuffle(1..1000000)
id2=shuffle(1000001..2000000)
val=rand(100.0, 1000000)
t1=keyedTable(`id1`id2, id1, id2, val)
t2=indexedTable(`id1`id2, id1, id2, val);</code></pre><p class="- topic/p p">测试键值内存表与索引内存表在查询是否包含所有键值的情况下的耗时：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>timer(100) select * from t1 where id1=100 and id2=1000001;
Time elapsed: 1 ms

timer(100) select * from t1 where id1=100;
Time elapsed: 1034.265 ms

timer(100) select * from t2 where id1=100 and id2=1000001;
Time elapsed: 0.999 ms

timer(100) select * from t2 where id1=100;
Time elapsed: 0.998 ms</code></pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title6" id="流数据表"><h3 class="- topic/title title topictitle3" id="ariaid-title6">流数据表</h3><div class="- topic/body body"><p class="- topic/p p">流数据表顾名思义是为流数据设计的内存表，是流数据发布和订阅的媒介。流数据表具有天然的流表对偶性(stream-table duality)：发布一条消息等价于往流数据表中插入一条记录，订阅消息等价于将流数据表中新到达的数据推向客户端应用。对流数据的查询和计算都可以通过 SQL 语句来完成。</p><ul class="- topic/ul ul"><li class="- topic/li li">创建</li></ul><p class="- topic/p p">使用 <code class="+ topic/ph pr-d/codeph ph codeph">streamTable</code> 函数可创建流数据表。<code class="+ topic/ph pr-d/codeph ph codeph">streamTable</code> 的用法和 <code class="+ topic/ph pr-d/codeph ph codeph">table</code> 函数完全相同。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>//创建空的流数据表
t=streamTable(1:0,`sym`id`val,[SYMBOL,INT,INT])

//使用向量创建流数据表
sym=`A`B`C`D`E
id=5 4 3 2 1
val=52 64 25 48 71
t=streamTable(sym,id,val)</code></pre><p class="- topic/p p">也可使用 <code class="+ topic/ph pr-d/codeph ph codeph">streamTable</code> 函数将常规内存表转换为流数据表。例如：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sym=`A`B`C`D`E
id=5 4 3 2 1
val=52 64 25 48 71
tmp=table(sym, id, val)
t=streamTable(tmp)</code></pre><p class="- topic/p p">流数据表也支持创建键值列，可以通过函数 <code class="+ topic/ph pr-d/codeph ph codeph">keyedStreamTable</code> 来创建键值流表。但与键值表的设计目的不同，键值流表的目的是为了在高可用场景（多个发布端同时写入）下，避免重复消息。通常 key 就是消息的 ID。</p><ul class="- topic/ul ul"><li class="- topic/li li">数据操作特点</li></ul><p class="- topic/p p">由于流数据具有一旦生成就不会发生变化的特点，因此流数据表不支持更新和删除记录，只支持查询和添加记录。流数据会不断增加，而内存是有限的。为解决这个矛盾，流数据表引入了持久化机制，在内存中保留最新的一部分数据，将之前的数据持久化在磁盘上。若用户订阅的数据不在内存时，直接从磁盘上读取。可使用函数 <code class="+ topic/ph pr-d/codeph ph codeph">enableTableShareAndPersistence</code> 启用持久化，细节请参考<a class="- topic/xref xref" href="streaming_tutorial.html">流数据教程</a>。</p><ul class="- topic/ul ul"><li class="- topic/li li">应用场景</li></ul><p class="- topic/p p">共享的流数据表在流计算中发布数据。订阅端通过 <code class="+ topic/ph pr-d/codeph ph codeph">subscribeTable</code> 函数来订阅和消费流数据。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title7" id="mvcc内存表"><h3 class="- topic/title title topictitle3" id="ariaid-title7">MVCC内存表</h3><div class="- topic/body body"><p class="- topic/p p">MVCC内存表存储了多个版本的数据，当多个用户同时对MVCC内存表进行读写操作时，互不阻塞。MVCC 内存表的数据隔离采用了快照隔离模型，用户读取到的是读操作之前已经存在的版本，即使这些数据在读取的过程中被修改或删除了，也不会影响正在进行的读操作。这种多版本的方式能够支持用户对内存表的并发访问。需要说明的是，当前的MVCC内存表实现比较简单，更新和删除数据时锁定整个表，并使用 copy-on-write 技术复制一份数据，因此对数据删除和更新操作的效率不高。在后续的版本中，我们将实现行级的 MVCC 内存表。</p><ul class="- topic/ul ul"><li class="- topic/li li">创建</li></ul><p class="- topic/p p">使用 <code class="+ topic/ph pr-d/codeph ph codeph">mvccTable</code> 函数创建 MVCC 内存表。例如：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>//创建空的MVCC内存表
t=mvccTable(1:0,`sym`id`val,[SYMBOL,INT,INT])

//使用向量创建MVCC内存表
sym=`A`B`C`D`E
id=5 4 3 2 1
val=52 64 25 48 71
t=mvccTable(sym,id,val)</code></pre><p class="- topic/p p">若要将 MVCC 内存表的数据持久化到磁盘，只需创建时指定持久化的目录和表名即可。例如，</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>t=mvccTable(1:0,`sym`id`val,[SYMBOL,INT,INT],"/home/user1/DolphinDB/mvcc","test")</code></pre><p class="- topic/p p">系统重启后，可使用 <code class="+ topic/ph pr-d/codeph ph codeph">loadMvccTable</code> 函数将磁盘中的数据加载到内存中：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>loadMvccTable("/home/user1/DolphinDB/mvcc","test")</code></pre><p class="- topic/p p">可使用 <code class="+ topic/ph pr-d/codeph ph codeph">mvccTable</code> 函数将常规内存表转换为 MVCC 内存表：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sym=`A`B`C`D`E
id=5 4 3 2 1
val=52 64 25 48 71
tmp=table(sym, id, val)
t=mvccTable(tmp)</code></pre><ul class="- topic/ul ul"><li class="- topic/li li">应用场景</li></ul><p class="- topic/p p">当前的 MVCC 内存表适用于读多写少，并有持久化需要的场景。譬如动态的配置系统，需要持久化配置项，配置项的改动不频繁，以新增和查询操作为主，非常适合 MVCC 表。</p></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title8" id="共享内存表"><h2 class="- topic/title title topictitle2" id="ariaid-title8">共享内存表</h2><div class="- topic/body body"><p class="- topic/p p">DolphinDB 中的内存表默认只在创建内存表的会话中使用，不支持多用户多会话的并发操作，对其它会话也不可见。如果希望内存表能被其他用户使用，保证多用户并发操作的安全，必须共享内存表。所有类型的内存表均可共享。在 DolphinDB 中，使用 <code class="+ topic/ph pr-d/codeph ph codeph">share</code> 命令将内存表共享。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>t=table(1..10 as id,rand(100,10) as val)
share t as st
//或者share(t,`st)</code></pre><p class="- topic/p p">以上代码将表t共享为表 st。</p><p class="- topic/p p">使用 <code class="+ topic/ph pr-d/codeph ph codeph">undef</code> 函数可以删除共享表：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>undef(`st,SHARED)</code></pre></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title9" id="保证对所有会话可见"><h3 class="- topic/title title topictitle3" id="ariaid-title9">保证对所有会话可见</h3><div class="- topic/body body"><p class="- topic/p p">内存表仅在当前会话可见，在其它会话中不可见。共享之后，其它会话可以通过访问共享变量来访问内存表。例如，在当前会话中把表 t 共享为表 st：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>t=table(1..10 as id,rand(100,10) as val)
share t as st</code></pre><p class="- topic/p p">可以在其它会话中访问变量 st。例如，在另外一个会话中向共享表 st 插入一条数据：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>insert into st values(11,200)
select * from st

id val
-- ---
1  1  
2  53 
3  13 
4  40 
5  61 
6  92 
7  36 
8  33 
9  46 
10 26 
11 200
</code></pre><p class="- topic/p p">切换到原来的会话，可以发现，表 t 中也增加了一条记录。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>select * from t

id val
-- ---
1  1  
2  53 
3  13 
4  40 
5  61 
6  92 
7  36 
8  33 
9  46 
10 26 
11 200</code></pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title10" id="保证线程安全"><h3 class="- topic/title title topictitle3" id="ariaid-title10">保证线程安全</h3><div class="- topic/body body"><p class="- topic/p p">在多线程的情况下，内存表中的数据很容易被破坏。共享则提供了一种保护机制，能够保证数据安全，但同时也会影响系统的性能。</p><p class="- topic/p p">常规内存表、流数据表和 MVCC 内存表都支持多版本模型，常规内存表和流数据表允许一写多读， MVCC 内存表允许多读多写。读写互不阻塞，写的时候可以读，读的时候可以写。读数据时不上锁，允许多个线程同时读取数据，读数据时采用快照隔离(snapshot isolation)。常规内存表和流数据表写数据时必须加锁，同时只允许一个线程修改内存表；MVCC 内存表同时允许多个线程修改内存表。写操作包括添加、删除或更新。添加记录一律在内存表的末尾追加，无论内存使用还是CPU使用均非常高效。常规内存表和 MVCC 内存表支持更新和删除，且采用了 copy-on-write 技术，也就是先复制一份数据（构成一个新的版本），然后在新版本上进行删除和修改。由此可见删除和更新操作无论内存和CPU消耗都比较高。当删除和更新操作很频繁，读操作又比较耗时（不能快速释放旧的版本），容易导致 OOM 异常。</p><p class="- topic/p p">键值内存表与索引内存表写入时需维护内部索引，读取时也需要根据索引获取数据。因此这两种内存表的共享采用了不同的方法，无论读写都必须加锁。写线程和读线程，多个写线程之间，多个读线程之间都是互斥的。并发使用时，对键值内存表与索引内存表应尽量避免耗时的查询或计算，否则会使其它线程长时间处于等待状态。</p></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title11" id="分区内存表"><h2 class="- topic/title title topictitle2" id="ariaid-title11">分区内存表</h2><div class="- topic/body body"><p class="- topic/p p">当内存表数据量较大时，可对内存表进行分区，以充分利用多核进行并行计算。分区后一个内存表由多个子表（tablet）构成，内存表不使用全局锁，锁由每个子表独立管理，这样可以显著增加读写并发能力。DolphinDB 支持对内存表进行值分区、范围分区、哈希分区和列表分区，但不支持组合分区。使用函数 <code class="+ topic/ph pr-d/codeph ph codeph">createPartitionedTable</code> 创建内存分区表。</p><ul class="- topic/ul ul"><li class="- topic/li li">创建分区常规内存表</li></ul><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>t=table(1:0,`id`val,[INT,INT])
db=database("",RANGE,0 101 201 301)
pt=db.createPartitionedTable(t,`pt,`id)</code></pre><ul class="- topic/ul ul"><li class="- topic/li li">创建分区键值内存表</li></ul><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>kt=keyedTable(1:0,`id`val,[INT,INT])
db=database("",RANGE,0 101 201 301)
pkt=db.createPartitionedTable(kt,`pkt,`id)</code></pre><p class="- topic/p p">类似的，可创建分区索引内存表。</p><ul class="- topic/ul ul"><li class="- topic/li li">创建分区流数据表</li></ul><p class="- topic/p p">创建分区流数据表时，需要传入多个流数据表作为模板，每个流数据表对应一个分区。写入数据时，直接往这些流表中写入；而查询数据时，需要查询分区表。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>st1=streamTable(1:0,`id`val,[INT,INT])
st2=streamTable(1:0,`id`val,[INT,INT])
st3=streamTable(1:0,`id`val,[INT,INT])
db=database("",RANGE,1 101 201 301)
pst=db.createPartitionedTable([st1,st2,st3],`pst,`id)

st1.append!(table(1..100 as id,rand(100,100) as val))
st2.append!(table(101..200 as id,rand(100,100) as val))
st3.append!(table(201..300 as id,rand(100,100) as val))

select * from pst</code></pre><ul class="- topic/ul ul"><li class="- topic/li li">创建分区 MVCC 内存表</li></ul><p class="- topic/p p">与创建分区流数据表一样，创建分区 MVCC 内存表，需要传入多个MVCC内存表作为模板。每个表对应一个分区。写入数据时，直接往这些表中写入；而查询数据时，需要查询分区表。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>mt1=mvccTable(1:0,`id`val,[INT,INT])
mt2=mvccTable(1:0,`id`val,[INT,INT])
mt3=mvccTable(1:0,`id`val,[INT,INT])
db=database("",RANGE,1 101 201 301)
pmt=db.createPartitionedTable([mt1,mt2,mt3],`pst,`id)

mt1.append!(table(1..100 as id,rand(100,100) as val))
mt2.append!(table(101..200 as id,rand(100,100) as val))
mt3.append!(table(201..300 as id,rand(100,100) as val))

select * from pmt</code></pre><p class="- topic/p p">由于分区内存表不使用全局锁，创建以后不能再动态增删子表。</p></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title12" id="增加查询的并发性"><h3 class="- topic/title title topictitle3" id="ariaid-title12">增加查询的并发性</h3><div class="- topic/body body"><p class="- topic/p p">分区表增加查询的并发性有三层含义：（1）键值表在查询时也需要加锁，分区表由子表独立管理锁，相当于把锁的粒度变细了，因此可以增加读的并发性；（2）批量计算时分区表可以并行处理每个子表；（3）如果SQL查询的过滤指定了分区字段，那么可以缩小分区范围，避免全表扫描。</p><p class="- topic/p p">以键值内存表为例，下例对比在分区和不分区的情况下，并发查询的性能。首先，创建包含500万行数据的模拟数据集。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>n=5000000
id=shuffle(1..n)
qty=rand(1000,n)
price=rand(1000.0,n)
kt=keyedTable(`id,id,qty,price)
share kt as skt

id_range=cutPoints(1..n,20)
db=database("",RANGE,id_range)
pkt=db.createPartitionedTable(kt,`pkt,`id).append!(kt)
share pkt as spkt</code></pre><p class="- topic/p p">在另外一台服务器上模拟10个客户端同时查询键值内存表。每个客户端查询10万次，每次查询一条数据，统计每个客户端查询10万次的总耗时。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>def queryKeyedTable(tableName,id){
	for(i in id){
		select * from objByName(tableName) where id=i
	}
}
conn=xdb("192.168.1.135",18102,"admin","123456")
n=5000000

jobid1=array(STRING,0)
for(i in 1..10){
	rid=rand(1..n,100000)
	s=conn(submitJob,"evalQueryUnPartitionTimer"+string(i),"",evalTimer,queryKeyedTable{`skt,rid})
	jobid1.append!(s)
}
time1=array(DOUBLE,0)
for(j in jobid1){
	time1.append!(conn(getJobReturn,j,true))
}

jobid2=array(STRING,0)
for(i in 1..10){
	rid=rand(1..n,100000)
	s=conn(submitJob,"evalQueryPartitionTimer"+string(i),"",evalTimer,queryKeyedTable{`spkt,rid})
	jobid2.append!(s)
}
time2=array(DOUBLE,0)
for(j in jobid2){
	time2.append!(conn(getJobReturn,j,true))
}
</code></pre><p class="- topic/p p">time1 是10个客户端查询未分区键值内存表的耗时，time2 是10个客户端查询分区键值内存表的耗时，单位是毫秒。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>time1
[6719.266848,7160.349678,7271.465094,7346.452625,7371.821485,7363.87979,7357.024299,7332.747157,7298.920972,7255.876976]

time2
[2382.154581,2456.586709,2560.380315,2577.602019,2599.724927,2611.944367,2590.131679,2587.706832,2564.305815,2498.027042]</code></pre><p class="- topic/p p">可以看到，每个客户端查询分区键值内存表的耗时要低于查询未分区内存表的耗时。</p><p class="- topic/p p">查询未分区的内存表，可以保证快照隔离。但查询一个分区内存表，不再保证快照隔离。如前面所说分区内存表的读写不使用全局锁，一个线程在查询时，可能另一个线程正在写入而且涉及多个子表，从而可能读到一部分写入的数据。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title13" id="增加写入的并发性"><h3 class="- topic/title title topictitle3" id="ariaid-title13">增加写入的并发性</h3><div class="- topic/body body"><p class="- topic/p p">以分区的常规内存表为例，我们可以同时向不同的分区写入数据。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>t=table(1:0,`id`val,[INT,INT])
db=database("",RANGE,1 101 201 301)
pt=db.createPartitionedTable(t,`pt,`id)

def writeData(mutable t,id,batchSize,n){
	for(i in 1..n){
		idv=take(id,batchSize)
		valv=rand(100,batchSize)
		tmp=table(idv,valv)
		t.append!(tmp)
	}
}

job1=submitJob("write1","",writeData,pt,1..100,1000,1000)
job2=submitJob("write2","",writeData,pt,101..200,1000,1000)
job3=submitJob("write3","",writeData,pt,201..300,1000,1000)</code></pre><p class="- topic/p p">上面的代码中，同时有3个线程对 pt 的3个不同的分区进行写入。需要注意的是，要避免同时对相同分区进行写入。例如，下面的代码可能会导致系统异常退出。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>job1=submitJob("write1","",writeData,pt,1..300,1000,1000)
job2=submitJob("write2","",writeData,pt,1..300,1000,1000)</code></pre><p class="- topic/p p">上面的代码定义了两个写入线程，并且写入的分区相同，这样会造成线程不安全，可能会导致系统崩溃、数据错误等后果。为了保证每个分区数据的安全性和一致性，可将分区内存表共享，这样即可定义多个线程同时对相同分区写入。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>share pt as spt
job1=submitJob("write1","",writeData,spt,1..300,1000,1000)
job2=submitJob("write2","",writeData,spt,1..300,1000,1000)</code></pre></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title14" id="数据操作比较"><h2 class="- topic/title title topictitle2" id="ariaid-title14">数据操作比较</h2><div class="- topic/body body"></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title15" id="增删改查"><h3 class="- topic/title title topictitle3" id="ariaid-title15">增删改查</h3><div class="- topic/body body"><p class="- topic/p p">下表总结了不同类型内存表在共享/分区的情况下支持的增删改查操作。</p><div class="table-container"><table class="- topic/table table" data-cols="6"><caption></caption><colgroup><col/><col/><col/><col/><col/><col/></colgroup><tbody class="- topic/tbody tbody"><tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0"> </td>
        <td class="- topic/entry entry colsep-0 rowsep-0"> </td>
        <td class="- topic/entry entry colsep-0 rowsep-0">增加</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">删除</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">更新</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">查询</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">常规内存表</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">未共享未分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">全表扫描</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">全表扫描</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">分区内扫描</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">分区内扫描</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">键值/索引内存表</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">未共享未分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">哈希/排序树</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">哈希/排序树</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">分区内哈希</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">分区内哈希</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">流数据表</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">未共享未分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">全表扫描</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">全表扫描</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">分区内扫描</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">分区内扫描</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">MVCC内存表</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">未共享未分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">全表扫描</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">全表扫描</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">分区内扫描</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">分区内扫描</td>
    </tr>
</tbody></table></div><p class="- topic/p p">说明：</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">常规内存表、键值内存表、索引内存表、MVCC内存表都支持增删改查操作。流数据表仅支持增加数据和查询，不支持删除和更新操作。</p></li><li class="- topic/li li"><p class="- topic/p p">对于键值内存表与索引内存表，如果查询的过滤条件中包含主键或键值字段，查询的性能会得到明显提升。</p></li><li class="- topic/li li"><p class="- topic/p p">对于分区内存表，如果查询的过滤条件中包含分区列，系统能够缩小需要扫描的分区范围，从而提升查询的性能。</p></li></ul></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title16" id="并发性"><h3 class="- topic/title title topictitle3" id="ariaid-title16">并发性</h3><div class="- topic/body body"><p class="- topic/p p">在没有写入的情况下，所有内存表都允许多个线程同时查询。在有写入的情况下，各类内存表的并发性有所差异。下表总结了各类内存表在共享/分区的情况下支持的并发读写情况。</p><div class="table-container"><table class="- topic/table table" data-cols="5"><caption></caption><colgroup><col/><col/><col/><col/><col/></colgroup><tbody class="- topic/tbody tbody"><tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0"> </td>
        <td class="- topic/entry entry colsep-0 rowsep-0"> </td>
        <td class="- topic/entry entry colsep-0 rowsep-0">一写一读或一写多读</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">多写多读（写入相同分区）</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">多写多读（写入不同分区）</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">常规内存表</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">未共享未分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="2">/</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">键值/索引内存表</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">未共享未分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="2">/</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">流数据表</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">未共享未分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="2">/</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">MVCC内存表</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">未共享未分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="2">/</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
    </tr>
</tbody></table></div><p class="- topic/p p">说明：</p><ul class="- topic/ul ul"><li class="- topic/li li">共享表允许并发读写。</li><li class="- topic/li li">对于没有共享的分区表，不允许多线程对相同分区同时写入。</li></ul></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title17" id="持久化"><h3 class="- topic/title title topictitle3" id="ariaid-title17">持久化</h3><div class="- topic/body body"><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">常规内存表、键值内存表以及索引内存表均不支持数据持久化。一旦节点重启，内存中的数据将全部丢失。</p></li><li class="- topic/li li"><p class="- topic/p p">MVCC内存表支持持久化。在创建 MVCC 内存表时，可以指定持久化的路径。例如：</p></li></ul><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>t=mvccTable(1:0,`id`val,[INT,INT],"/home/user/DolphinDB/mvccTable")
t.append!(table(1..10 as id,rand(100,10) as val))</code></pre><p class="- topic/p p">系统重启后，可使用 <code class="+ topic/ph pr-d/codeph ph codeph">loadMvccTable</code> 函数将磁盘中的数据加载到内存中。例如：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>t=loadMvccTable("/home/user/DolphinDB/mvccTable","t")</code></pre><ul class="- topic/ul ul"><li class="- topic/li li">要对流数据表进行持久化，首先要配置流数据持久化的目录 persistenceDir，再使用 <code class="+ topic/ph pr-d/codeph ph codeph">enableTableShareAndPersistence</code> 函数将流数据表共享，并持久化到磁盘上。请注意，该函数只能用于空的流数据表。例如，将流数据表t共享并持久化到磁盘上：</li></ul><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>t=streamTable(1:0,`id`val,[INT,DOUBLE])
enableTableShareAndPersistence(t,`st)</code></pre><p class="- topic/p p">流数据表启用了持久化后，内存中仍然会保留流数据表中部分最新的记录。默认情况下，内存会保留最新的10万条记录。可以根据需要调整这个值。</p><p class="- topic/p p">流数据表持久化可以设定采用异步/同步、压缩/不压缩的方式。通常情况下，异步模式能够实现更高的吞吐量。</p><p class="- topic/p p">系统重启后，执行 <code class="+ topic/ph pr-d/codeph ph codeph">enableTableShareAndPersistence</code> 函数，会将持久化的数据加载到内存。</p></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title18" id="表结构操作比较"><h2 class="- topic/title title topictitle2" id="ariaid-title18">表结构操作比较</h2><div class="- topic/body body"><p class="- topic/p p">内存表的结构操作包括新增列、删除列、修改列（内容和数据类型）以及调整列的顺序。下表总结了5种类型内存表在共享/分区的情况下支持的结构操作。</p><div class="table-container"><table class="- topic/table table" data-cols="7"><caption></caption><colgroup><col/><col/><col/><col/><col/><col/><col/></colgroup><tbody class="- topic/tbody tbody"><tr class="- topic/row">
    <td class="- topic/entry entry colsep-0 rowsep-0"> </td>
    <td class="- topic/entry entry colsep-0 rowsep-0"> </td>
    <td class="- topic/entry entry colsep-0 rowsep-0">通过addColumn函数新增列</td>
    <td class="- topic/entry entry colsep-0 rowsep-0">通过update语句新增列</td>
    <td class="- topic/entry entry colsep-0 rowsep-0">删除列</td>
    <td class="- topic/entry entry colsep-0 rowsep-0">修改列(内容和数据类型)</td>
    <td class="- topic/entry entry colsep-0 rowsep-0">调整列的顺序</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">常规内存表</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">未共享未分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
    </tr>
    <tr class="- topic/row">   
        <td class="- topic/entry entry colsep-0 rowsep-0">分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">键值/索引内存表</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">未共享未分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
    </tr>
    <tr class="- topic/row">   
        <td class="- topic/entry entry colsep-0 rowsep-0">分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">流数据表</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">未共享未分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="2">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">×</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="2">×</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享分区</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">MVCC 内存表</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">未分区未共享</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">×</td>
        <td class="- topic/entry entry colsep-0 rowsep-0" rowspan="4">×</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">√</td>
    </tr>
    <tr class="- topic/row">
        <td class="- topic/entry entry colsep-0 rowsep-0">共享分区</td>
        <td class="- topic/entry entry colsep-0 rowsep-0">×</td>
    </tr>
</tbody></table></div><p class="- topic/p p">说明：</p><ul class="- topic/ul ul"><li class="- topic/li li">分区表以及MVCC内存表不能通过 <code class="+ topic/ph pr-d/codeph ph codeph">addColumn</code> 命令新增列。</li><li class="- topic/li li">分区表可以通过 update 语句来新增列，但是流数据表不能通过 update 语句来新增列。</li></ul></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title19" id="小结"><h2 class="- topic/title title topictitle2" id="ariaid-title19">小结</h2><div class="- topic/body body"><p class="- topic/p p">DolphinDB 支持5种类型内存表，还支持共享和分区，能够满足内存计算和流计算的各种需求。</p></div></article></article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" aria-label="On this page" class="col-lg-2 d-none d-lg-block navbar d-print-none"> 
                            <div id="wh_topic_toc_content">
		                        
	                            <div class=" wh_topic_toc "><div class="wh_topic_label">在本页上</div><ul><li class="topic-item"><a href="#%E5%86%85%E5%AD%98%E8%A1%A8%E7%B1%BB%E5%88%AB" data-tocid="内存表类别">内存表类别</a><ul><li class="topic-item"><a href="#%E5%B8%B8%E8%A7%84%E5%86%85%E5%AD%98%E8%A1%A8" data-tocid="常规内存表">常规内存表</a></li><li class="topic-item"><a href="#%E9%94%AE%E5%80%BC%E5%86%85%E5%AD%98%E8%A1%A8" data-tocid="键值内存表">键值内存表</a></li><li class="topic-item"><a href="#%E7%B4%A2%E5%BC%95%E5%86%85%E5%AD%98%E8%A1%A8" data-tocid="索引内存表">索引内存表</a></li><li class="topic-item"><a href="#%E6%B5%81%E6%95%B0%E6%8D%AE%E8%A1%A8" data-tocid="流数据表">流数据表</a></li><li class="topic-item"><a href="#mvcc%E5%86%85%E5%AD%98%E8%A1%A8" data-tocid="mvcc内存表">MVCC内存表</a></li></ul></li><li class="topic-item"><a href="#%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98%E8%A1%A8" data-tocid="共享内存表">共享内存表</a><ul><li class="topic-item"><a href="#%E4%BF%9D%E8%AF%81%E5%AF%B9%E6%89%80%E6%9C%89%E4%BC%9A%E8%AF%9D%E5%8F%AF%E8%A7%81" data-tocid="保证对所有会话可见">保证对所有会话可见</a></li><li class="topic-item"><a href="#%E4%BF%9D%E8%AF%81%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8" data-tocid="保证线程安全">保证线程安全</a></li></ul></li><li class="topic-item"><a href="#%E5%88%86%E5%8C%BA%E5%86%85%E5%AD%98%E8%A1%A8" data-tocid="分区内存表">分区内存表</a><ul><li class="topic-item"><a href="#%E5%A2%9E%E5%8A%A0%E6%9F%A5%E8%AF%A2%E7%9A%84%E5%B9%B6%E5%8F%91%E6%80%A7" data-tocid="增加查询的并发性">增加查询的并发性</a></li><li class="topic-item"><a href="#%E5%A2%9E%E5%8A%A0%E5%86%99%E5%85%A5%E7%9A%84%E5%B9%B6%E5%8F%91%E6%80%A7" data-tocid="增加写入的并发性">增加写入的并发性</a></li></ul></li><li class="topic-item"><a href="#%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E6%AF%94%E8%BE%83" data-tocid="数据操作比较">数据操作比较</a><ul><li class="topic-item"><a href="#%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5" data-tocid="增删改查">增删改查</a></li><li class="topic-item"><a href="#%E5%B9%B6%E5%8F%91%E6%80%A7" data-tocid="并发性">并发性</a></li><li class="topic-item"><a href="#%E6%8C%81%E4%B9%85%E5%8C%96" data-tocid="持久化">持久化</a></li></ul></li><li class="topic-item"><a href="#%E8%A1%A8%E7%BB%93%E6%9E%84%E6%93%8D%E4%BD%9C%E6%AF%94%E8%BE%83" data-tocid="表结构操作比较">表结构操作比较</a></li><li class="topic-item"><a href="#%E5%B0%8F%E7%BB%93" data-tocid="小结">小结</a></li></ul></div>
	                        	
                        	</div>
                        </nav>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
<title>Copyright</title><p><b> ©2025 浙江智臾科技有限公司 浙ICP备18048711号-3</b></p>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
    </body>
</html>