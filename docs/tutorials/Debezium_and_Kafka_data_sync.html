<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" data-whc_version="26.0">
    <head><link rel="shortcut icon" href="../favicon.ico"/><link rel="icon" href="../favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="Debezium 是一个开源的分布式平台，用于实时捕获和发布数据库更改事件。它可以将关系型数据库（如 MySQL、PostgreSQL、Oracle 等）的变更事件转化为可观察的流数据，以供其他应用程序实时消费和处理。本文中我们将采用 Debezium 与 Kafka 组合的方式来实现从 MySQL 到 DolphinDB 的数据同步。 Kafka + Debezium 的数据同步方案需要部署 4 ..."/><meta name="DC.rights.owner" content="(C) 版权 2025"/><meta name="copyright" content="(C) 版权 2025"/><meta name="generator" content="DITA-OT"/><meta name="DC.type" content="topic"/><meta name="DC.coverage" content=""/><meta name="DC.relation" content="../tutorials/about_tutorials.html"/><meta name="prodname" content="DolphinDB"/><meta name="brand" content="DolphinDB"/><meta name="DC.creator" content="DolphinDB"/><meta name="DC.publisher" content="DDB N/A DDB 200"/><meta name="DC.format" content="HTML5"/><meta name="DC.identifier" content="debezium--kafka-实时同步-mysql-数据到-dolphindb"/><title>Debezium + Kafka 实时同步 MySQL 数据到 DolphinDB</title><!--  Generated with Oxygen version 26.0, build number 2024012323.  --><meta name="wh-path2root" content="../"/><meta name="wh-toc-id" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;?workdir /tmp/temp20250305183303418/tutorials?&gt;&lt;?workdir-uri file:/tmp/temp20250305183303418/tutorials/?&gt;&lt;?path2project ../?&gt;&lt;?path2project-uri ../?&gt;&lt;?path2rootmap-uri ../?&gt;&lt;topic xmlns:dita-ot=&#34;http://dita-ot.sourceforge.net/ns/201007/dita-ot&#34; xmlns:ditaarch=&#34;http://dita.oasis-open.org/architecture/2005/&#34; class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;debezium--kafka-实时同步-mysql-数据到-dolphindb&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;Debezium + Kafka 实时同步 MySQL 数据到 DolphinDB&lt;/title&gt;&lt;prolog class=&#34;- topic/prolog &#34;&gt;&lt;author class=&#34;- topic/author &#34; xtrc=&#34;author:1;12:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/author&gt;&lt;publisherinformation class=&#34;- topic/publisher bookmap/publisherinformation &#34; xtrc=&#34;publisherinformation:1;14:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:1;15:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;printlocation class=&#34;- topic/data bookmap/printlocation &#34; xtrc=&#34;printlocation:1;16:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;N/A&lt;/printlocation&gt; &lt;published class=&#34;- topic/data bookmap/published &#34; xtrc=&#34;published:1;17:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:2;18:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;publishtype class=&#34;- topic/data bookmap/publishtype &#34; value=&#34;HTML&#34; xtrc=&#34;publishtype:1;19:44&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;revisionid class=&#34;- topic/ph bookmap/revisionid &#34; xtrc=&#34;revisionid:1;20:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;200&lt;/revisionid&gt; &lt;summary class=&#34;- topic/ph bookmap/summary &#34; xtrc=&#34;summary:1;22:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:1;23:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/published&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:2;25:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/publisherinformation&gt;&lt;metadata class=&#34;- topic/metadata &#34;&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:2;39:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:1;28:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;category class=&#34;- topic/category &#34; xtrc=&#34;category:1;29:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;prodinfo class=&#34;- topic/prodinfo &#34; xtrc=&#34;prodinfo:1;34:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;prodname class=&#34;- topic/prodname &#34; xtrc=&#34;prodname:1;35:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/prodname&gt; &lt;brand class=&#34;- topic/brand &#34; xtrc=&#34;brand:1;36:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/brand&gt; &lt;/prodinfo&gt;&lt;/metadata&gt;&lt;/prolog&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;/&gt;&lt;related-links class=&#34;- topic/related-links &#34;&gt;&lt;linkpool class=&#34;- topic/linkpool &#34; xtrc=&#34;topicref:15;30:91&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;../tutorials/about_tutorials.dita&#34; mapclass=&#34;- map/topicref bookmap/chapter &#34; role=&#34;parent&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:1;5:53&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot usertext?&gt;教程&lt;/linktext&gt;&lt;?ditaot usershortdesc?&gt;&lt;desc class=&#34;- topic/desc &#34;&gt;DolphinDB 产品使用教程&lt;/desc&gt;&lt;/link&gt;&lt;/linkpool&gt;&lt;/related-links&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1-debezium-同步方案概述&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:2;3:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:2;3:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1. Debezium 同步方案概述&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:2;3:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:1;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;Debezium 是一个开源的分布式平台，用于实时捕获和发布数据库更改事件。它可以将关系型数据库（如 MySQL、PostgreSQL、Oracle 等）的变更事件转化为可观察的流数据，以供其他应用程序实时消费和处理。本文中我们将采用 Debezium 与 Kafka 组合的方式来实现从 MySQL 到 DolphinDB 的数据同步。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:2;7:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;Kafka + Debezium 的数据同步方案需要部署 4 个服务，如下所示&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:1;9:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:1;9:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:1;9:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;ZooKeeper&lt;/b&gt;：kafka 的依赖部署&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:2;10:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:2;10:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;Kafka&lt;/b&gt;：数据存储&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:3;11:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:3;11:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;Kafka-Connect&lt;/b&gt;：用于接入数据插件 source-connetor、sink-connector 的框架，可以提供高可用。也可以部署单实例版本。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:4;12:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:4;12:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;Schema-Registry&lt;/b&gt; ：提供实时同步的数据的元数据注册功能，支持数据序列化。&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:3;14:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;基于 Debezium 的数据架构图如下：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/01.png&#34; placement=&#34;break&#34; xtrc=&#34;image:1;16:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;917&#34; dita-ot:image-height=&#34;306&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:1;16:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;01&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:4;18:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;接下来，本文将逐一介绍这些服务的下载、安装，以及配置数据同步任务。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;11-部署-kafka-单实例实时数据存储&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:3;20:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:3;20:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.1. 部署 Kafka 单实例实时数据存储&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:3;20:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:5;22:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;基于 Kafka 的整套架构是支持高可用集群的。不过，即使部署单实例的服务，也可以达成数据同步任务。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:6;24:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;本文将以单实例存储来进行介绍数据同步。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;111-部署准备&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:4;26:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:4;26:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.1.1. 部署准备&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:4;26:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:7;28:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;首先下载程序包，Zookeeper（开源）、Kafka（开源）、Confluent（社区版），可以自行到官网下载最新稳定版本。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:8;30:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;并将下面 4 个软件包放到 /opt 目录下。（软件、配置、数据路径文件较多。&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:5;30:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;注意：初次试用请尽量保持路径一致&lt;/b&gt;。）&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:2;32:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:5;32:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:6;32:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;gz&#34; href=&#34;https://download.oracle.com/java/17/latest/jdk-17_linux-x64_bin.tar.gz&#34; scope=&#34;external&#34; xtrc=&#34;xref:1;32:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;?ditaot usertext?&gt;jdk-17.0.7_linux-x64_bin.tar.gz&lt;/xref&gt;&lt;/b&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:6;33:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:7;33:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://zookeeper.apache.org/releases.html&#34; scope=&#34;external&#34; xtrc=&#34;xref:2;33:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;?ditaot usertext?&gt;apache-zookeeper-3.7.1-bin.tar.gz&lt;/xref&gt;&lt;/b&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:7;34:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:8;34:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://kafka.apache.org/downloads&#34; scope=&#34;external&#34; xtrc=&#34;xref:3;34:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;?ditaot usertext?&gt;kafka_2.13-3.4.1.tgz&lt;/xref&gt;（下载 scala 2.13 版本）&lt;/b&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:8;35:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:9;35:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://www.confluent.io/installation/&#34; scope=&#34;external&#34; xtrc=&#34;xref:4;35:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;?ditaot usertext?&gt;confluent-community-7.4.0.tar.gz&lt;/xref&gt;&lt;/b&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:9;37:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;Confluent 下载会稍微麻烦点，需要选择 self-managed 然后录入信息，点击 start free 才能下载。注意下载 community 版本即可满足需要，我们只需要里头的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:1;37:97&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;schema-registry&lt;/i&gt; 包。当然如果需要更好功能，也可以下载正式版，正式版包括了 Zookeeper、Kafka 以及管理、监控 Kafka 的更多功能。Confluent 是 Kafka 相关的商业公司。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/02.png&#34; placement=&#34;break&#34; xtrc=&#34;image:2;39:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;437&#34; dita-ot:image-height=&#34;619&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:2;39:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;02&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:10;41:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;以上 4 个程序包下载好之后，我们就可以开始部署了。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;112-部署-zookeeper&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:5;43:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:5;43:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.1.2. 部署 Zookeeper&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:5;43:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1121-基础准备&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:6;45:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:6;45:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.1.2.1. 基础准备&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:6;45:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:11;47:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:10;47:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第一步：创建部署用户&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:12;49:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;创建用户 kafka，授予 sudo 免密权限（需自行设置）。然后切换到 kafka 用户来进行操作（以下均为 kafka 用户操作）。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:1;51:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;useradd kafka su kafka&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:13;56:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:11;56:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第二步：安装部署 java 环境&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:14;58:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;安装 java 到路径 /opt/java17，整套架构涉及的程序都是基于 java 虚拟机运行的。所以必须安装 java。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:2;60:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cd /opt sudo mkdir -p /usr/local/java sudo tar -xvf jdk-17.0.7_linux-x64_bin.tar.gz sudo mv jdk-17.0.7 /usr/local/java/java17&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:15;67:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;设置 java 环境变量（kafka 用户下执行）。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:3;69:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;vim ~/.bashrc # 输入下面代码 JAVA_HOME=/usr/local/java/java17 PATH=$JAVA_HOME/bin:$PATH export JAVA_HOME PATH source ~/.bashrc java --version&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/03.png&#34; placement=&#34;break&#34; xtrc=&#34;image:3;80:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;813&#34; dita-ot:image-height=&#34;103&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:3;80:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;03&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1122-安装-zookeeper&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:7;82:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:7;82:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.1.2.2. 安装 Zookeeper&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:7;82:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:16;84:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:12;84:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第一步：解压并安装 Zookeeper&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:17;86:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;3.7.1 版本的 Zookeeper 用户、组有默认值，这里我们需要调整一下。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:4;88:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cd /opt sudo tar -xvf apache-zookeeper-3.7.1-bin.tar.gz sudo mv apache-zookeeper-3.7.1-bin zookeeper sudo chown -R root:root zookeeper sudo chmod -R 755 zookeeper&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:18;96:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:13;96:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第二步：准备 Zookeeper 的配置文件和存储文件&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:19;98:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;创建 zookeeper 的配置文件、数据文件、日志文件的存储路径。请尽量保持路径一致。篇末有打包的全部程序配置文件包。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:5;100:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sudo mkdir -p /KFDATA/zookeeper/etc sudo mkdir -p /KFDATA/zookeeper/data sudo mkdir -p /KFDATA/zookeeper/datalog sudo mkdir -p /KFDATA/zookeeper/logs sudo chown -R kafka:kafka /KFDATA chmod -R 700 /KFDATA/zookeeper&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:20;109:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;准备 zookeeper 的配置文件 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:2;109:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;zoo.cfg&lt;/i&gt;。先从 zookeeper 安装路径下复制 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:3;109:51&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;log4j.properties&lt;/i&gt; 过来，然后进行修改。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:21;111:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;说明：zookeeper 的不同版本 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:4;111:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;log4j.properties&lt;/i&gt; 配置内容会略有区别。如有不同，请按 log4j 的规则调整。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:6;113:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cd /KFDATA/zookeeper/etc touch zoo.cfg echo tickTime=2000 &amp;gt; zoo.cfg echo initLimit=10 &amp;gt;&amp;gt;zoo.cfg echo syncLimit=5 &amp;gt;&amp;gt;zoo.cfg echo dataDir=/KFDATA/zookeeper/data &amp;gt;&amp;gt;zoo.cfg echo dataLogDir=/KFDATA/zookeeper/datalog &amp;gt;&amp;gt;zoo.cfg echo clientPort=2181 &amp;gt;&amp;gt;zoo.cfg sudo cp /opt/zookeeper/conf/log4j.properties ./ sudo chown kafka:kafka ./log4j.properties&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:22;126:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;修改 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:5;126:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;log4j.properties&lt;/i&gt; 中的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:6;126:26&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;zookeeper.log.dir&lt;/i&gt; 参数&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/04.png&#34; placement=&#34;break&#34; xtrc=&#34;image:4;128:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;353&#34; dita-ot:image-height=&#34;48&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:4;128:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;04&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:23;130:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:14;130:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第三步：创建 Zookeeper 的启动文件&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:24;132:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;创建一个 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:7;132:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;zk.env&lt;/i&gt; ，配置 Zookeeper 启动所需环境变量，用于启动 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:8;132:43&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;service&lt;/i&gt; 文件调用。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:7;134:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cd /KFDATA/zookeeper/etc/ touch zk.env echo JAVA_HOME=/usr/local/java/java17 &amp;gt; zk.env echo PATH=&#34;/usr/local/java/java17/bin:/opt/zookeeper/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin&#34; &amp;gt;&amp;gt; zk.env echo ZOO_LOG_DIR=/KFDATA/zookeeper/logs &amp;gt;&amp;gt; zk.env echo ZOO_LOG4J_OPTS=\&#34;-Dlog4j.configuration=file:/KFDATA/zookeeper/etc/log4j.properties\&#34; &amp;gt;&amp;gt; zk.env&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:25;143:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;如果对 Zookeeper 很熟练可以自行调用 Zookeeper 安装目录下的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:9;143:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;bin&lt;/i&gt; 文件夹下的操作脚本来进行操作或测试。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:26;145:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:1;145:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;vim&lt;/codeph&gt; 命令编辑一个 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:10;145:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;service&lt;/i&gt; 文件。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:8;147:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sudo vim /usr/lib/systemd/system/zookeeper.service&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:27;151:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;录入以下启动命令信息，并保存。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:9;153:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;[Unit] Description=Apache Kafka - ZooKeeper After=network.target [Service] Type=forking User=kafka Group=kafka EnvironmentFile=/KFDATA/zookeeper/etc/zk.env ExecStart=/opt/zookeeper/bin/zkServer.sh start /KFDATA/zookeeper/etc/zoo.cfg ExecStop=/opt/zookeeper/bin/zkServer.sh stop /KFDATA/zookeeper/etc/zoo.cfg TimeoutStopSec=180 Restart=no [Install] WantedBy=multi-user.target &lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:28;174:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;重新加载 service 启动服务。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:10;176:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sudo systemctl daemon-reload&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:29;180:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:15;180:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第四步：创建测试脚本&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:30;182:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;（1）创建连接 Zookeeper 测试文件 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:11;182:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;zkCon.sh&lt;/i&gt;。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:11;184:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;mkdir -p /KFDATA/bin cd /KFDATA/bin touch zkCon.sh echo export JAVA_HOME=/usr/local/java/java17 &amp;gt;zkCon.sh echo export PATH=&#34;{$JAVE_HOME}/bin:/opt/zookeeper/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin&#34; &amp;gt;&amp;gt;zkCon.sh echo export ZOO_LOG_DIR=/KFDATA/zookeeper/logs &amp;gt;&amp;gt;zkCon.sh echo export ZOO_LOG4J_OPTS=\&#34;-Dlog4j.configuration=file:/KFDATA/zookeeper/etc/log4j.properties\&#34; &amp;gt;&amp;gt;zkCon.sh echo '/opt/zookeeper/bin/zkCli.sh -server localhost:2181 -Dzookeeper.config.path=/KFDATA/zookeeper/zoo.cfg' &amp;gt;&amp;gt;zkCon.sh&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:31;195:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;对脚本授予执行权限。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:12;197:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;chmod +x zkCon.sh &lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1123-部署启动-zookeeper&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:8;201:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:8;201:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.1.2.3. 部署启动 Zookeeper&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:8;201:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:32;203:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:16;203:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第一步：通过 systemctl 工具启动 Zookeeper 服务。&lt;/b&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:13;205:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sudo systemctl start zookeeper.service&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:33;209:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:17;209:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第二步：查看 Zookeeper 启动情况&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:34;211:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;可以通过 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:2;211:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;jps&lt;/codeph&gt; 命令 查看 java 进程，QuorumPeerMain 进程是 Zookeeper 的启动进程。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/05.png&#34; placement=&#34;break&#34; xtrc=&#34;image:5;213:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;328&#34; dita-ot:image-height=&#34;67&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:5;213:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;05&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:35;215:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;也可以通过 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:3;215:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;systemctl&lt;/codeph&gt; 命令查看，如图即是正常启动。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:14;217:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt; sudo systemctl status zookeeper&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/06.png&#34; placement=&#34;break&#34; xtrc=&#34;image:6;221:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;937&#34; dita-ot:image-height=&#34;218&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:6;221:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;06&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:36;223:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:18;223:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第三步：通过客户端连接 Zookeeper，并进行查看。&lt;/b&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:15;225:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cd /KFDATA/bin/ ./zkCon.sh # 等待 zookeeper 命令行窗口 ls / ls /zookeeper &lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:37;233:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;如果返回如下显示，表示 Zookeeper 启动成功，可以在 Zookeeper 中观察到自身的基础信息。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/07.png&#34; placement=&#34;break&#34; xtrc=&#34;image:7;235:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;823&#34; dita-ot:image-height=&#34;245&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:7;235:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;07&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:38;237:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;ctrl +c 可以退出 Zookeeper 客户端连接。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;113-部署-kafka&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:9;239:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:9;239:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.1.3. 部署 Kafka&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:9;239:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1131-安装-kafka&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:10;241:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:10;241:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.1.3.1. 安装 Kafka&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:10;241:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:39;243:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:19;243:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第一步：解压安装 Kafka 文件&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:40;245:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;执行以下命令，修改一下 Kafka 的安装文件名。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:16;247:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cd /opt sudo tar -xvf kafka_2.13-3.4.1.tgz sudo mv kafka_2.13-3.4.1 kafka&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:41;253:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:20;253:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第二步：准备 Kafka 的配置文件和存储文件&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:42;255:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;创建 Kafka 的配置文件、数据文件、日志文件的存储路径。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:17;257:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;mkdir -p /KFDATA/kafka/etc mkdir -p /KFDATA/kafka/data mkdir -p /KFDATA/kafka/logs&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:43;263:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;准备 Kafka 相关配置文件，创建启动配置文件，和日志配置文件。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:18;265:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cd /KFDATA/kafka/etc touch kafka-server.properties cp /opt/kafka/config/log4j.properties ./ cp /opt/kafka/config/tools-log4j.properties ./&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:44;272:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;修改 &lt;xref class=&#34;- topic/xref &#34; format=&#34;properties&#34; href=&#34;script/Debezium_and_Kafka_data_sync/kafka-server.properties&#34; xtrc=&#34;xref:5;272:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;?ditaot usertext?&gt;kafka-server.properties&lt;/xref&gt; 文件中的配置，修改内容较多，文件如下，也可以自行录入。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:19;274:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;############################# Server Basics ############################# broker.id=1 ############################# Socket Server Settings ############################# listeners=PLAINTEXT://0.0.0.0:9092 advertised.listeners=PLAINTEXT://192.168.189.130:9092 num.network.threads=3 num.io.threads=8 socket.send.buffer.bytes=102400 socket.receive.buffer.bytes=102400 socket.request.max.bytes=104857600 ############################# Log Basics ############################# log.dirs=/KFDATA/kafka/data num.partitions=1 num.recovery.threads.per.data.dir=1 ############################# Internal Topic Settings ############################# offsets.topic.replication.factor=1 transaction.state.log.replication.factor=1 transaction.state.log.min.isr=1 ############################# Log Retention Policy ############################# log.retention.hours=-1 log.retention.bytes=21474836480 log.segment.bytes=1073741824 log.retention.check.interval.ms=300000 auto.create.topics.enable=true ############################# Zookeeper ############################# zookeeper.connect=192.168.189.130:2181 # Timeout in ms for connecting to zookeeper zookeeper.connection.timeout.ms=12000 ############################# Group Coordinator Settings ############################# group.initial.rebalance.delay.ms=0 ############################# message Settings ############################# message.max.byte=5242880&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:45;309:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;其中以下两项需要视具体环境修改，advertise.listeners 是对外监听端口。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:20;311:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;advertised.listeners=PLAINTEXT://192.168.189.130:9092 zookeeper.connect=192.168.189.130:2181&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:46;316:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:21;316:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第三步：准备 Kafka 的启动文件&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:47;318:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;创建 Kafka 启动的环境变量文件，这里配置了开启 JMX 监控端口，如果不需要，可以忽略后两项配置。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:48;320:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;JMX 端口的作用是可以通过此端口连接，获取一些监控指标。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:21;322:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cd /KFDATA/kafka/etc touch kf-server.env echo PATH=&#34;/usr/local/java/java17/bin:/opt/zookeeper/bin:/opt/kafka:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin&#34; &amp;gt;&amp;gt;kf-server.env echo LOG_DIR=&#34;/KFDATA/kafka/logs/&#34; &amp;gt;&amp;gt;kf-server.env echo KAFKA_LOG4J_OPTS=\&#34;-Dlog4j.configuration=file:/KFDATA/kafka/etc/log4j.properties\&#34; &amp;gt;&amp;gt;kf-server.env echo KAFKA_JMX_OPTS=\&#34;-Dcom.sun.management.jmxremote=true -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Djava.rmi.server.hostname=192.168.189.130 -Djava.net.preferIPv4Stack=true\&#34; &amp;gt;&amp;gt;kf-server.env echo JMX_PORT=29999 &amp;gt;&amp;gt;kf-server.env&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:49;333:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;创建 Kafka 的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:12;333:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;systemd service&lt;/i&gt; 文件，&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:4;333:33&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;vim&lt;/codeph&gt; 打开一个文件。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:22;335:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sudo vim /usr/lib/systemd/system/kafka-server.service&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:50;339:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;录入以下内容，并保存。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:23;341:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;[Unit] Description=Apache Kafka - broker After=network.target confluent-zookeeper.target [Service] Type=forking User=kafka Group=kafka EnvironmentFile=/KFDATA/kafka/etc/kf-server.env ExecStart=/opt/kafka/bin/kafka-server-start.sh -daemon /KFDATA/kafka/etc/kafka-server.properties ExecStop=/KFDATA/kafka/bin/kafka-server-stop.sh LimitNOFILE=1000000 TimeoutStopSec=180 Restart=no [Install] WantedBy=multi-user.target&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:51;361:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;重新加载 service 启动服务。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:24;363:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sudo systemctl daemon-reload&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1132-部署启动-kafka&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:11;367:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:11;367:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.1.3.2. 部署启动 Kafka&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:11;367:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:52;369:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:22;369:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第一步：通过 systemctl 工具启动 Kafka 服务&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:53;371:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;执行下述命令启动 Kafka 服务：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:25;373:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sudo systemctl start kafka-server.service&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:54;377:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:23;377:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第二步：查看 Kafka 启动情况&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:55;379:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;检查 Kafka 启动情况，可以连接 Zookeeper 客户端。查看 zookeeper 中的数据。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:26;381:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cd /KFDATA/bin ./zkCon.sh ls /&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:56;387:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;可以看到 Zookeeper 中已经多了一些 kafka 注册信息，如 brokers、cluseter、config、controller 等。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/08.png&#34; placement=&#34;break&#34; xtrc=&#34;image:8;389:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;826&#34; dita-ot:image-height=&#34;48&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:8;389:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;08&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:57;391:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;此时，可以测试创建一个 topic 进行测试：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:27;393:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cd /opt/kafka/bin ./kafka-topics.sh --bootstrap-server 192.168.189.130:9092 --create --topic test110&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/09.png&#34; placement=&#34;break&#34; xtrc=&#34;image:9;398:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;1076&#34; dita-ot:image-height=&#34;45&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:9;398:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;09&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:58;400:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;执行下述代码，查看当前 Kafka 中 topic 列表：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:28;402:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;./kafka-topics.sh --bootstrap-server 192.168.189.130:9092 --list&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/10.png&#34; placement=&#34;break&#34; xtrc=&#34;image:10;406:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;914&#34; dita-ot:image-height=&#34;42&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:10;406:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;10&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:59;408:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;如果返回上述图片显示内容，说明 Kafka 已经启动成功。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;114-部署-schema-registry&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:12;410:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:12;410:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.1.4. 部署 Schema-Registry&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:12;410:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:60;412:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;Schema-Registry 是用于注册传输数据的数据结构的。并记录数据结构改变的每一个版本。数据写入 Kafka 和从 Kafka 中读出都需要 schema-registry 中记录的数据结构来进行序列化和反序列化。通过使用 schema-registry 来注册数据结构。Kafka 中只需保存序列化后的数据即可。可以减少数据的空间占用。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1141-安装-schema-registry&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:13;414:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:13;414:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.1.4.1. 安装 Schema-Registry&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:13;414:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:61;416:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:24;416:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第一步：解压安装 Schema-Registry 文件&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:62;418:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;Schema-Registry 程序是 confluent 程序包中一部分。所以这里我们要安装 conluent，社区版本即可。解压缩 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:13;418:69&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;confluent-community-7.4.0.tar.gz&lt;/i&gt;，并修改文件名，设置隶属组。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:29;420:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cd /opt sudo tar -xvf confluent-community-7.4.0.tar.gz sudo mv confluent-7.4.0 confluent sudo chown -R root:root confluent sudo chmod -R 755 confluent&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:63;428:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:25;428:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第二步：准备 Schema-Registry 的配置文件和存储文件&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:64;430:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;创建 schema-registry 的配置、日志文件存储路径。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:30;432:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;mkdir -p /KFDATA/schema-registry/etc mkdir -p /KFDATA/schema-registry/logs&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:65;437:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;准备 schema-registry 的配置文件。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:31;439:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cd /KFDATA/schema-registry/etc cp /opt/confluent/etc/schema-registry/schema-registry.properties ./ cp /opt/confluent/etc/schema-registry/log4j.properties ./&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:66;445:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;修改 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:14;445:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;schema-registry.properties&lt;/i&gt; 文件，修改连接的 Kafka Server 地址。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/11.png&#34; placement=&#34;break&#34; xtrc=&#34;image:11;447:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;646&#34; dita-ot:image-height=&#34;58&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:11;447:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;11&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:67;449:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:26;449:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第三步：准备 Schema-Registry 的启动文件&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:68;451:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;创建 Schema-Registry 启动环境变量文件，用于 Schema-Registry 启动时使用。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:32;453:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;touch schema-registry.env echo PATH=&#34;/usr/local/java/java17/bin:/opt/confluent/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin&#34; &amp;gt;schema-registry.env echo LOG_DIR=&#34;/KFDATA/schema-registry/logs&#34; &amp;gt;&amp;gt;schema-registry.env echo LOG4J_DIR=&#34;/KFDATA/schema-registry/etc/log4j.properties&#34; &amp;gt;&amp;gt;schema-registry.env echo SCHEMA_REGISTRY_LOG4J_OPTS=\&#34;-Dlog4j.configuration=file:/KFDATA/schema-registry/etc/log4j.properties\&#34; &amp;gt;&amp;gt;schema-registry.env&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:69;461:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;创建 Schema-Registry 的 systemd service 启动文件。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:33;463:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sudo vim /usr/lib/systemd/system/schema-registry.service&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:70;467:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;录入以下内容并保存。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:34;469:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;[Unit] Description=RESTful Avro schema registry for Apache Kafka After=network.target [Service] Type=forking User=kafka Group=kafka EnvironmentFile=/KFDATA/schema-registry/etc/schema-registry.env ExecStart=/opt/confluent/bin/schema-registry-start -daemon /KFDATA/schema-registry/etc/schema-registry.properties TimeoutStopSec=180 Restart=no [Install] WantedBy=multi-user.target&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:71;487:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;重新加载 service 启动服务。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:35;489:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sudo systemctl daemon-reload&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1142-部署启动-schema-registry&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:14;493:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:14;493:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.1.4.2. 部署启动 Schema-Registry&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:14;493:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:72;495:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:27;495:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第一步：通过 systemctl 工具启动 Schema-Registry 服务&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:73;497:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;执行以下命令&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:36;499:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sudo systemctl start schema-registry&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:74;503:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:28;503:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第二步：查看 Schema-Registry 启动情况&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:75;505:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;通过 systemctl 工具查看启动状态。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:37;507:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sudo systemctl status schema-registry&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/12.png&#34; placement=&#34;break&#34; xtrc=&#34;image:12;511:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;1052&#34; dita-ot:image-height=&#34;233&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:12;511:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;12&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:76;513:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;查看 Kafka 中的 topic&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:38;515:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cd /opt/kafka/bin ./kafka-topics.sh --bootstrap-server 192.168.189.130:9092 --list&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:77;520:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;可以看到 kafka 中已经创建出了 schema-registry 需要使用的 topic&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/13.png&#34; placement=&#34;break&#34; xtrc=&#34;image:13;522:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;916&#34; dita-ot:image-height=&#34;86&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:13;522:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;13&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:78;524:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;schema-registry 启动成功。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;115-部署-kafka-connect&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:15;526:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:15;526:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.1.5. 部署 Kafka-Connect&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:15;526:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:79;528:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;Kafka-Connect 是 Kafka 提供的 HA 框架，实现了 Kafka-Connect 接口的 connector（连接器），只需处理自己需要进行读取、写入数据任务。高可用部分由 kafka-connect 框架负责。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:80;530:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;Kafka-Connect 可用通过 rest api 进行访问。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1151-安装-kafka-connect&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:16;532:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:16;532:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.1.5.1. 安装 Kafka-Connect&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:16;532:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:81;534:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:29;534:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第一步：Kafka-Connect 安装&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:82;536:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;Kafka-Connect 由 Kafka 提供，启动程序在 Kafka 的安装路径下，已经存在。数据元数据注册由 schema-registry 处理。相应的序列化包在已安装 Confluent 路径下。故无需再安装程序包。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:83;538:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:30;538:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第二步：准备 Kafka-Connect 的配置文件和存储文件&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:84;540:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;创建 Kafka-Connect 的配置、日志文件存储路径&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:39;542:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;mkdir -p /KFDATA/kafka-connect/etc mkdir -p /KFDATA/kafka-connect/logs&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:85;547:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;创建 Kafka-Connect 的配置文件&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:40;549:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cd /KFDATA/kafka-connect/etc vim kafka-connect.properties&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:86;554:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;录入以下内容并保存。ip 地址部分，需要视当前环境修改。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:41;556:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;bootstrap.servers=192.168.189.130:9092 group.id=connect-cluster key.converter=io.confluent.connect.avro.AvroConverter key.converter.schema.registry.url=http://192.168.189.130:8081 value.converter=io.confluent.connect.avro.AvroConverter value.converter.schema.registry.url=http://192.168.189.130:8081 key.converter.schemas.enable=true value.converter.schemas.enable=true internal.key.converter=org.apache.kafka.connect.json.JsonConverter internal.value.converter=org.apache.kafka.connect.json.JsonConverter internal.key.converter.schemas.enable=false internal.value.converter.schemas.enable=false config.storage.topic=connect-configs offset.storage.topic=connect-offsets status.storage.topic=connect-statuses config.storage.replication.factor=1 offset.storage.replication.factor=1 status.storage.replication.factor=1 plugin.path=/opt/confluent/share/java/plugin rest.host.name=192.168.189.130 rest.port=8083 rest.advertised.host.name=192.168.189.130 rest.advertised.port=8083 offset.flush.timeout.ms=50000 offset.flush.interval.ms=10000 send.buffer.bytes=13107200 consumer.max.poll.records=10000 consumer.partition.assignment.strategy=org.apache.kafka.clients.consumer.CooperativeStickyAssignor&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:87;592:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;创建 Kafka-Connect 的 log4j 配置文件。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:42;594:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cd /KFDATA/kafka-connect/etc cp /opt/kafka/config/connect-log4j.properties ./log4j.properties&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:88;599:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;修改文件中的以下参数配置&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:43;601:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;vim ./log4j.properties log4j.appender.connectAppender.File=${kafka.logs.dir}/connect.log&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:89;606:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;将其修改为&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:44;608:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;log4j.appender.connectAppender.File=/KFDATA/kafka-connect/logs/connect.log&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:90;612:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:31;612:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第三步：准备 Kafka-Connect 的启动文件&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:91;614:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;创建 Kafka-Connect 启动环境变量文件。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:45;616:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cd /KFDATA/kafka-connect/etc touch kafka-connect.env echo PATH=&#34;/usr/local/java/java17/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin&#34; &amp;gt;kafka-connect.env echo LOG_DIR=&#34;/KFDATA/kafka-connect/logs/&#34; &amp;gt;&amp;gt;kafka-connect.env echo LOG4J_DIR=&#34;/KFDATA/kafka-connect/etc/log4j.properties&#34; &amp;gt;&amp;gt;kafka-connect.env echo KAFKA_LOG4J_OPTS=\&#34;-Dlog4j.configuration=file:/KFDATA/kafka-connect/etc/log4j.properties\&#34; &amp;gt;&amp;gt;kafka-connect.env echo CLASSPATH=/opt/confluent/share/java/schema-registry/*:/opt/confluent/share/java/kafka-serde-tools/*:/opt/confluent/share/java/confluent-common/* &amp;gt;&amp;gt;kafka-connect.env echo JMX_PORT=29998 &amp;gt;&amp;gt;kafka-connect.env&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:92;628:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;创建 Kafka-Connect 的 systemd service 文件&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:46;630:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sudo vim /usr/lib/systemd/system/kafka-connect.service&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:93;634:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;录入以下内容，并保存。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:47;636:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;[Unit] Description=Apache Kafka Connect - distributed After=network.target [Service] Type=simple User=kafka Group=kafka EnvironmentFile=/KFDATA/kafka-connect/etc/kafka-connect.env ExecStart=/opt/kafka/bin/connect-distributed.sh /KFDATA/kafka-connect/etc/kafka-connect.properties TimeoutStopSec=180 Restart=no [Install] WantedBy=multi-user.target&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:94;654:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;重新加载 service 启动服务。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:48;656:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sudo systemctl daemon-reload&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1152-部署启动-kafka-connect&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:17;660:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:17;660:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.1.5.2. 部署启动 Kafka-Connect&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:17;660:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:95;662:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:32;662:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第一步：通过 systemctl 工具启动 Kafka-Connect 服务&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:96;664:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;执行以下命令&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:49;666:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sudo systemctl start kafka-connect.service&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:97;670:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:33;670:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第二步：查看 Kafka-Connect 启动情况&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:98;672:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;通过 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:5;672:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;jps&lt;/codeph&gt; 命令查看启动情况&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:50;674:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;jps -mlvV |grep connect&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/14.png&#34; placement=&#34;break&#34; xtrc=&#34;image:14;678:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;1095&#34; dita-ot:image-height=&#34;171&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:14;678:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;14&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:99;680:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;查看 Kafka 中的 topic 情况，Kafka-Connect 会在 Kafka 中创建 connect-configs、connect-offsets、connect-statuses 三个 topic。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:51;682:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cd /opt/kafka/bin ./kafka-topics.sh --bootstrap-server 192.168.189.130:9092 --list&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/15.png&#34; placement=&#34;break&#34; xtrc=&#34;image:15;687:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;902&#34; dita-ot:image-height=&#34;145&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:15;687:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;15&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:100;689:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:6;689:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;curl&lt;/codeph&gt; 命令访问 kafka-connect，可以看到当前我们还没有配置 connector 任务&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:52;691:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt; curl -H &#34;Accept:application/json&#34; 192.168.189.130:8083/connectors/&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/16.png&#34; placement=&#34;break&#34; xtrc=&#34;image:16;695:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;903&#34; dita-ot:image-height=&#34;46&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:16;695:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;16&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;12-部署-mysql-数据同步到-kafka&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:18;697:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:18;697:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.2. 部署 MySQL 数据同步到 Kafka&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:18;697:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:101;699:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;MySQL 的数据同步包括初始全量同步和 CDC 实时增量同步。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:102;701:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;全量同步：将所选表的全部数据以 Insert 的方式写入 kafka，建议此时不要对数据库进行操作。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:103;703:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;CDC 实时增量同步：从全量同步时记录的事务顺序号，实时读取 MySQL 的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:15;703:40&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;binlog&lt;/i&gt; 日志，写入增量数据到 Kafka。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;121-安装-debezium-mysql-连接器插件&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:19;705:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:19;705:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.2.1. 安装 Debezium-MySQL 连接器插件&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:19;705:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:104;707:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;配置启动 Debezium-MySQL 连接器，需要以下两步：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:1;709:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:9;709:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:105;709:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;下载、安装 Debezium-MySQL 插件，并将插件路径配置到 Kafka Connect 配置文件中。&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:10;711:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:106;711:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;重新启动 Kafka Connect 程序，以加载插件。&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:107;713:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:34;713:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第一步：下载安装 Debezium-MySQL 插件&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:108;715:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;官方网站 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://debezium.io/&#34; scope=&#34;external&#34; xtrc=&#34;xref:6;715:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;?ditaot usertext?&gt;Debezium&lt;/xref&gt; ，选择最新稳定版本进行下载。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:109;717:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;选择 MySQL Connector Plug-in&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/17.png&#34; placement=&#34;break&#34; xtrc=&#34;image:17;719:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;902&#34; dita-ot:image-height=&#34;558&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:17;719:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;17&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:110;721:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;创建插件路径（部署 kafka，kafka-connnect 环境的 kafka 用户），在此路径下解压 Debezium 的 MySQL 插件包&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:53;723:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sudo mkdir -p /opt/confluent/share/java/plugin cd /opt/confluent/share/java/plugin sudo tar -xvf debezium-connector-mysql-2.3.2.Final-plugin.tar.gz rm ./debezium-connector-mysql-2.3.2.Final-plugin.tar.gz&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:111;730:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:35;730:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第二步：配置 Kafka-Connect 加载插件&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:112;732:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;修改 Kafka Connect 的配置文件，添加插件路径配置&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:54;734:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cd /KFDATA/kafka-connect/etc vim kafka-connect.properties&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:113;739:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;添加或修改参数 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:16;739:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;plugin.path&lt;/i&gt; 如下&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:55;741:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;plugin.path=/opt/confluent/share/java/plugin&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:114;745:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;重新启动 Kafka Connect&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:56;747:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sudo systemctl stop kafka-connect sudo systemctl start kafka-connect&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:115;752:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;查看日志输出，如下图所示，则插件加载成功。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:57;754:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cat /KFDATA/kafka-connect/logs/connect.log|grep mysql&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/18.png&#34; placement=&#34;break&#34; xtrc=&#34;image:18;758:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;1253&#34; dita-ot:image-height=&#34;123&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:18;758:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;18&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;122-配置-mysql-数据库&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:20;760:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:20;760:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.2.2. 配置 MySQL 数据库&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:20;760:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:116;762:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;做为 Source 数据库，我们基于 MySQL 的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:17;762:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;binlog&lt;/i&gt; 来获取实时的增量数据，所以需要对 MySQL 数据库做一些设置。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:117;764:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:36;764:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第一步：创建数据同步用的 MySQL 用户&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:118;766:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;Debezium MySQL 连接器需要 MySQL 用户帐户。此 MySQL 用户必须对 Debezium MySQL 连接器捕获更改的所有数据库拥有适当的权限。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:58;768:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;CREATE USER 'datasyn'@'%' IDENTIFIED BY '1234';&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:119;772:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;授予权限。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:59;774:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;GRANT SELECT, RELOAD, SHOW DATABASES, REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO 'datasyn';&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:120;778:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;刷新授权表。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:60;780:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;FLUSH PRIVILEGES;&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:121;784:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:37;784:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第二步：设置 MySQL 参数&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:122;786:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;进行 CDC 同步，需要对 MySQL 数据库进行一些设置。&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:1;788:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;4&#34; xtrc=&#34;tgroup:1;788:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:1;788:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:2;788:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:3;788:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col4&#34; colnum=&#34;4&#34; xtrc=&#34;colspec:4;788:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:1;788:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:1;788:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:1;788:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:38;788:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;参数&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:2;788:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:39;788:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;值&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:morecols=&#34;1&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; nameend=&#34;col4&#34; namest=&#34;col3&#34; xtrc=&#34;entry:3;788:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:40;788:39&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;说明&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:1;790:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:2;790:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:4;790:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;server-id&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:5;790:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:morecols=&#34;1&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; nameend=&#34;col4&#34; namest=&#34;col3&#34; xtrc=&#34;entry:6;790:41&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;MySQL 集群中用于标识一个 MySQL 服务器实例。可以自行调整设置。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:3;791:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:7;791:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;log-bin&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:8;791:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;mysql-bin&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:morecols=&#34;1&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; nameend=&#34;col4&#34; namest=&#34;col3&#34; xtrc=&#34;entry:9;791:41&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;设置启用二进制日志功能，并指定日志文件名及存储位置。可自行调整设置。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:4;792:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:10;792:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;binlog_format&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:11;792:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;ROW&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:morecols=&#34;1&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; nameend=&#34;col4&#34; namest=&#34;col3&#34; xtrc=&#34;entry:12;792:41&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;必须 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:18;792:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;binlog-format&lt;/i&gt;设置为 ROW 或 row。连接 MySQL 级联复制实例时，链路内每个实例环节都要设置。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:5;793:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:13;793:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;binlog_row_image&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:14;793:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;FULL&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:morecols=&#34;1&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; nameend=&#34;col4&#34; namest=&#34;col3&#34; xtrc=&#34;entry:15;793:41&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;必须 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:19;793:45&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;binlog_row_image&lt;/i&gt;设置为 FULL 或 full。连接 MySQL 级联复制实例时，链路内每个级联实例环节都要设置。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:6;794:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:16;794:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;gtid_mode&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:17;794:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;ON&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:morecols=&#34;1&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; nameend=&#34;col4&#34; namest=&#34;col3&#34; xtrc=&#34;entry:18;794:41&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;设置开启全局事务标识&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:7;795:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:19;795:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;enforce_gtid_consistency&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:20;795:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;ON&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:morecols=&#34;1&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;7&#34; nameend=&#34;col4&#34; namest=&#34;col3&#34; xtrc=&#34;entry:21;795:41&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;设置强制执行 GTID 一致性&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:8;796:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:22;796:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;expire_logs_days&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:23;796:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;3&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:morecols=&#34;1&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;8&#34; nameend=&#34;col4&#34; namest=&#34;col3&#34; xtrc=&#34;entry:24;796:41&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;设置 MySQL 日志保留时间，MySQL 的 CDC 数据同步需要有对应日志文件才能进行同步。推荐至少设置保留 3 天。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:9;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:25;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;binlog_row_value_options&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:26;797:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;““&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:morecols=&#34;1&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;9&#34; nameend=&#34;col4&#34; namest=&#34;col3&#34; xtrc=&#34;entry:27;797:41&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:41;797:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;此变量不能设置为 PARTIAL_JSON&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:123;799:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;参数参考代码：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:61;801:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;[mysqld] server-id = 1 log_bin=mysql-bin binlog_format=ROW binlog_row_image=FULL binlog_row_value_options=&#34;&#34; gtid_mode=ON enforce_gtid_consistency=ON expire_logs_days=3&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;123-配置-mysql-数据同步连接任务&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:21;816:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:21;816:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.2.3. 配置 MySQL 数据同步连接任务&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:21;816:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:124;818:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;配置同步任务的及检查的很多命令都要带上 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:20;818:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;url&lt;/i&gt; 等参数。为了操作快捷，封装了一些加载配置文件的操作脚本，&lt;xref class=&#34;- topic/xref &#34; format=&#34;tar&#34; href=&#34;script/Debezium_and_Kafka_data_sync/kafka-tools.tar&#34; xtrc=&#34;xref:7;818:55&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;?ditaot usertext?&gt;kafka-tools.tar&lt;/xref&gt;。下载当前包，解压缩到 /KFDATA 目录下。后续的很多操作，检查 Kafka 的 topic，查看数据。配置同步任务等都会使用 kafka-tools 包中的脚本。请务必配置。包中的脚本都可以无参数运行，会输出 help。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:62;820:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cd /KFDATA sudo tar -xvf kafka-tools.tar sudo chown kafka:kafka kafka-tools rm ./kafka-tools.tar&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:125;827:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;修改 kafka-tools/config/config.properties 配置参数。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:126;829:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;按照本机的路径、IP 等对应修改 Kafka、Kafka_Connect 的启动 IP 地址，以及安装目录。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1231-准备-mysql-数据库表&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:22;831:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:22;831:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.2.3.1. 准备 MySQL 数据库表&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:22;831:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:127;833:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:42;833:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第一步：创建一个数据库&lt;/b&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:63;835:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;create database basicinfo;&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:128;839:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:43;839:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第二步：创建两张表，并插入一些数据&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:129;841:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;创建表 1 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:21;841:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;index_components&lt;/i&gt;，主键字段 4 个。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:64;843:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;use basicinfo; CREATE TABLE `index_components` ( `trade_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP, `code` varchar(20) NOT NULL, `effDate` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP, `indexShortName` varchar(20) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci DEFAULT NULL, `indexCode` varchar(20) NOT NULL, `secShortName` varchar(20) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci DEFAULT NULL, `exchangeCD` varchar(4) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci DEFAULT NULL, `weight` decimal(26,6) DEFAULT NULL, `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, `flag` int NOT NULL DEFAULT '1', PRIMARY KEY `index_components_pkey` (`trade_date`,`code`,`indexCode`,`flag`) )ENGINE=InnoDB DEFAULT CHARSET=utf8mb4; &lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:130;860:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;插入 4 条 数据&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:65;862:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;insert into index_components (trade_date,code,effdate,indexShortName,indexCode,secShortName,exchangeCD,weight,timestamp,flag) values('2006-11-30','000759','2018-06-30 03:48:05','中证500','000905','中百集团','XSHE',0.0044,'2018-06-30 05:43:05',1), ('2006-11-30','000759','2018-06-30 04:47:05','中证500','000906','中百集团','XSHE',0.0011,'2018-06-30 05:48:06',1), ('2006-11-30','600031','2018-06-30 05:48:05','上证180','000010','三一重工','XSHG',0.0043,'2018-06-30 05:48:05',1), ('2006-11-30','600031','2018-06-30 06:48:02','沪深300','000300','三一重工','XSHG',0.0029,'2018-06-30 05:48:05',1);&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:131;870:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;创建表 2 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:22;870:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;stock_basic&lt;/i&gt; ，主键字段 2 个。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:66;872:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;CREATE TABLE `stock_basic` ( `id` bigint NOT NULL , `ts_code` varchar(20) NOT NULL, `symbol` varchar(20) DEFAULT NULL, `name` varchar(20) DEFAULT NULL, `area` varchar(20) DEFAULT NULL, `industry` varchar(40) DEFAULT NULL, `list_date` date DEFAULT NULL, PRIMARY KEY (`id`,`ts_code`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:132;885:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;插入 3 条数据；&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:67;887:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;insert into stock_basic(id,ts_code,symbol,name,area,industry,list_date) values (1,'000001.SZ','000001','平安银行','深圳','银行','1991-04-03'), (2,'000002.SZ','000002','万科A','深圳','地产','1991-01-29'), (3,'000004.SZ','000004','ST国华','深圳','软件服务','1991-01-14')&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1232-准备连接器配置文件并启动连接任务&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:23;894:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:23;894:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.2.3.2. 准备连接器配置文件，并启动连接任务&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:23;894:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:133;896:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:44;896:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第一步：准备 MySQL 同步任务配置文件&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:134;898:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;创建连接 MySQL 的 source 连接器配置文件。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:68;900:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;mkdir /KFDATA/datasyn-config cd /KFDATA/datasyn-config vim source-mysql.json&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:135;906:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;录入以下配置，hostname 和 kafka 启动地址需对应修改。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:69;908:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;{ &#34;name&#34;: &#34;basicinfo-connector&#34;, &#34;config&#34;:{ &#34;connector.class&#34;: &#34;io.debezium.connector.mysql.MySqlConnector&#34;, &#34;tasks.max&#34;: &#34;1&#34;, &#34;topic.prefix&#34;:&#34;mysqlserver&#34;, &#34;database.hostname&#34;: &#34;192.168.189.130&#34;, &#34;database.port&#34;: &#34;3306&#34;, &#34;database.user&#34;: &#34;datasyn&#34;, &#34;database.password&#34;: &#34;1234&#34;, &#34;database.server.id&#34;: &#34;2223314&#34;, &#34;database.include.list&#34;: &#34;basicinfo&#34;, &#34;schema.history.internal.kafka.bootstrap.servers&#34;: &#34;192.168.189.130:9092&#34;, &#34;schema.history.internal.kafka.topic&#34;: &#34;schema-changes.basicinfo&#34;, &#34;heartbeat.interval.ms&#34;:&#34;20000&#34; } }&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:136;928:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;参数说明：以上参数为必填参数。更多详细参数说明可以参看 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://debezium.io/documentation/reference/2.3/connectors/mysql.html#mysql-connector-properties&#34; scope=&#34;external&#34; xtrc=&#34;xref:8;929:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;?ditaot usertext?&gt;Debezium connector for MySQL :: Debezium Documentation&lt;/xref&gt;&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:2;931:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:2;931:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:5;931:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:6;931:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:7;931:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:2;931:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:10;931:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:28;931:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:45;931:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;参数名称&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:29;931:55&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:46;931:56&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;默认值&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:30;931:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:47;931:66&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;参数说明&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:2;933:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:11;933:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:31;933:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;connector.class&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:32;933:59&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;无&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:33;933:71&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;连接器的 Java 类的名称。这里是 mysql 的连接器类名。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:12;934:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:34;934:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;tasks.max&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:35;934:59&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:36;934:72&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;当前 connector 的最大并行任务数。mysql 的 source 连接器任务数只能是 1。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:13;935:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:37;935:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;topic.prefix&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:38;935:59&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;无&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:39;935:71&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;当前 connector 同步写入任务的命名空间。会被用于添加到同步表对应 topic 名称前等&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:14;936:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:40;936:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;database.hostname&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:41;936:59&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;无&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:42;936:71&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;MySQL 数据库服务器的 IP 地址或主机名。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:15;937:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:43;937:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;database.port&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:44;937:59&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;3306&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:45;937:72&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;MySQL 数据库服务器的整数端口号。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:16;938:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:46;938:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;database.user&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:47;938:59&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;无&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:48;938:71&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;MySQL 数据库服务器连接用户。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:17;939:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:49;939:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;database.password&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:50;939:59&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;无&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:51;939:71&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;MySQL 数据库服务器连接用户密码。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:18;940:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:52;940:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;database.server.id&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:53;940:59&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;无&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:54;940:71&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;用来模拟 MySQL 隶属进程的进程号。同步程序会以此数字 ID 加入 MySQL 集群。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:19;941:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:55;941:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;database.influde.list&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:56;941:59&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;无&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:57;941:71&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;匹配的数据库名。可以多个，用逗号分割即可。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:20;942:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:58;942:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;schema.history.internal.kafka.bootstrap.servers&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:59;942:59&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;无&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:60;942:71&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;数据同步记录 MySQL 的表结构信息的 kafka 连接&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:21;943:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:61;943:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;schema.history.internal.kafka.topic&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:62;943:59&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;无&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:63;943:71&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;数据同步记录 MySQL 表结构的 topic 名称&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:22;944:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:64;944:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;http://heartbeat.interval.ms/&#34; scope=&#34;external&#34; xtrc=&#34;xref:9;944:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;?ditaot usertext?&gt;heartbeat.interval.ms&lt;/xref&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:65;944:59&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;0&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:66;944:72&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;当接到 MySQL 更改事件时，保证触发记录 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:23;944:96&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;binlog&lt;/i&gt; 事务位置或者 gtid 的间隔事件。（如果此值为 0 时，接收到不属于数据同步表的改变事件时，不会记录事务位置，可能导致当前记录的同步事务号大幅度落后 MySQL 的最新事务号）。&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:137;946:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:48;946:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第二步：启动 MySQL 的数据同步任务&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:138;948:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;通过 rest api 启动 MySQL 的 source 连接器&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:70;950:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;curl -i -X POST -H &#34;Accept:application/json&#34; -H &#34;Content-Type:application/json&#34; http://192.168.189.130:8083/connectors/ -d @/KFDATA/datasyn-config/source-mysql.json&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:139;954:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;也可以通过我们提供 kafka-tools 中的脚本启动，操作能简单一些&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:71;956:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cd /KFDATA/kafka-tools/bin ./rest.sh create @/KFDATA/datasyn-config/source-mysql.json&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:140;961:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:49;961:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第三步：查看 MySQL 数据同步任务状态&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:141;963:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;查看同步任务列表。&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:24;963:10&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;list&lt;/i&gt; 参数展示任务名列表，&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:25;963:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;showall&lt;/i&gt; 参数会显示全部同步任务状态。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:72;965:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;./rest.sh list ./rest.sh showall&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:142;970:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;通过下图可以看到，connector 和 task 的状态都是 RUNNING，当前同步任务状态正常。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:143;972:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;说明：每个同步任务会有一个 connector，可以多个 task。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/19.png&#34; placement=&#34;break&#34; xtrc=&#34;image:19;974:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;1004&#34; dita-ot:image-height=&#34;274&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:19;974:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;19&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:144;976:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;使用 kafka-tools 的脚本 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:26;976:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;kafka.sh&lt;/i&gt; 查看 kafka 中的 topic&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:73;978:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cd /KFDATA/kafka-tools/bin ./kafka.sh tplist|grep mysqlserver&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:145;983:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;下图中的 topic [mysqlserver.basicinfo.index_components] 即为我们的表 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:27;983:61&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;basicinfo.index_components&lt;/i&gt; 数据在 kafka 中的存储&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/20.png&#34; placement=&#34;break&#34; xtrc=&#34;image:20;985:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;598&#34; dita-ot:image-height=&#34;87&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:20;985:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;20&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:146;987:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;查看 topic [mysqlserver.basicinfo.index_components] 中的数据条数。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:74;989:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;./kafka.sh get_offsets mysqlserver.basicinfo.index_components&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:147;993:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;kafka 中已经同步了 MySQL 表 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:28;993:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;basicinfo.index_components&lt;/i&gt; 的 4 条数据。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/21.png&#34; placement=&#34;break&#34; xtrc=&#34;image:21;995:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;877&#34; dita-ot:image-height=&#34;71&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:21;995:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;21&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:148;997:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;说明：在同步 MySQL 的初始快照数据时，不能中断。否则必须清理全部已同步数据，重新开始。即初始快照数据不支持断点续传。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;13-部署-kafka-数据同步到-dolphindb&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:24;999:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:24;999:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.3. 部署 Kafka 数据同步到 DolphinDB&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:24;999:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;131-安装-kafka-dolphindb-连接器&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:25;1001:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:25;1001:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.3.1. 安装 Kafka-DolphinDB 连接器&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:25;1001:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:149;1003:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;配置启动 Kafka-DolphinDB 连接器插件，需要以下两步：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:2;1005:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:11;1005:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;安装 Kafka-DolphinDB 插件，并将插件路径配置到 Kafka Connect 配置文件中。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:12;1006:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;重新启动 Kafka Connect 程序，以加载插件。&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:150;1008:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:50;1008:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第一步：下载 Kafka-DolphinDB 插件&lt;/b&gt;&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:3;1010:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:13;1010:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;jar&#34; href=&#34;plugin/Debezium_and_Kafka_data_sync/jdbc-1.30.22.4-ddbsync.Beta1.jar&#34; xtrc=&#34;xref:10;1010:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;?ditaot usertext?&gt;jdbc-1.30.22.4-ddbsync.Beta1.jar&lt;/xref&gt;：该 DolphinDB JDBC 包为数据同步做了一些专门修改，后续会同步到主分支上。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:14;1011:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;jar&#34; href=&#34;plugin/Debezium_and_Kafka_data_sync/kafka-connect-jdbc-10.7.4-ddb1.01.Beta1.jar&#34; xtrc=&#34;xref:11;1011:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;?ditaot usertext?&gt;kafka-connect-jdbc-10.7.4-ddb1.01.Beta1.jar&lt;/xref&gt;：基于 kafka-connect-jdbc-10.7.4 开发，添加了 DolphinDB 连接器。&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:151;1013:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;创建插件路径（部署 Kafka，Kafka-Connnect 环境的 kafka 用户），在此路径下放置 Kafka-DolphinDB 插件包，上面两个包都要放到此目录下。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:75;1015:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sudo mkdir -p /opt/confluent/share/java/plugin/kafka-connect-jdbc&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:152;1019:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:51;1019:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第二步：配置 Kafka-Connect 加载插件&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:153;1021:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;Kafka-DolphinDB 插件包的父路径与前文 Debezium-MySQL 连接器插件路径均为 /opt/confluent/share/java/plugin/，因此无需再次配置到 Kafka-Connect 的配置文件中。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:154;1023:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;如果路径不一致，可以在 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:29;1023:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;kafka-connect.properties&lt;/i&gt; 中的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:30;1023:43&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;plugin.path&lt;/i&gt; 参数里配置，以逗号分隔。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:155;1025:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;查看 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:31;1025:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;plugin.path&lt;/i&gt; 参数配置：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:76;1027:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cat /KFDATA/kafka-connect/etc/kafka-connect.properties |grep plugin&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/22.png&#34; placement=&#34;break&#34; xtrc=&#34;image:22;1031:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;907&#34; dita-ot:image-height=&#34;67&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:22;1031:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;22&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:156;1033:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;重新启动 Kafka Connect：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:77;1035:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sudo systemctl stop kafka-connect sudo systemctl start kafka-connect&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:157;1040:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;查看日志输出&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:78;1042:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cat /KFDATA/kafka-connect/logs/connect.log|grep JdbcSinkConnector&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:158;1046:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;出现下图中所示信息时，说明插件加载成功。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/23.png&#34; placement=&#34;break&#34; xtrc=&#34;image:23;1048:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;904&#34; dita-ot:image-height=&#34;34&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:23;1048:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;23&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;132-dolphindb-的数据同步准备&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:26;1050:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:26;1050:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.3.2. DolphinDB 的数据同步准备&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:26;1050:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:159;1052:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:52;1052:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第一步：创建同步的库、表&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:160;1054:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;要求：当前支持数据同步，需要依赖 TSDB 引擎的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:32;1054:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;keepDuplicates&lt;/i&gt; = LAST 数据来保证数据写入的幂等性，即发生数据重复时，两次及以上的相同增量数据写入，不影响数据的一致性。所以需要满足以下条件：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:3;1056:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:15;1056:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;DolphinDB 的表必须是 TSDB 引擎且设置 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:33;1056:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;keepDuplicates&lt;/i&gt; = LAST。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:16;1057:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;TSDB 引擎目前不支持单字段 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:34;1057:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sortColumn&lt;/i&gt; 设置 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:35;1057:36&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;keepDuplicates&lt;/i&gt;= LAST，所以同步的 MySQL 目标表主键必 须是 2 个及以上字段。。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:17;1058:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:36;1058:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sortColumn&lt;/i&gt; 最后的字段必须是时间或者数字。对应的 MySQL 目标表主键字段必须包含时间或数字。&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:161;1060:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;分别创建之前 MySQL 中两张表的对应表：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:4;1062:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:18;1062:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:162;1062:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;创建 MySQL 表 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:37;1062:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;basicinfo.index_components&lt;/i&gt;的 DolphinDB 对应分布式表表 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:38;1062:63&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;dfs://index_data.index_components&lt;/i&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:79;1064:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;def createIndexComDB(dbName){ if(existsDatabase(dbName)){ dropDatabase(dbName) } database(directory=dbName, partitionType=RANGE, partitionScheme= 1999.01M + (0..26)*12,engine=&#34;TSDB&#34;) } def createIndexCom(dbName,tbName){ db=database(dbName) if(existsTable(dbName, tbName)){ db.dropTable(tbName) } mtable=table(100:0, `trade_date`code`effDate`indexShortName`indexCode`secShortName`exchangeCD`weight`timestamp`flag, [TIMESTAMP,SYMBOL,TIMESTAMP,SYMBOL,SYMBOL,SYMBOL,SYMBOL,DOUBLE,TIMESTAMP,INT]); db.createPartitionedTable(table=mtable, tableName=tbName, partitionColumns=`trade_date,sortColumns=`code`indexCode`flag`trade_date,compressMethods={trade_date:&#34;delta&#34;},keepDuplicates=LAST) } createIndexComDB(&#34;dfs://index_data&#34;) createIndexCom(&#34;dfs://index_data&#34;,`index_components)&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:19;1083:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:163;1083:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;创建 MySQL 表 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:39;1083:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;basicinfo.stock_basic&lt;/i&gt; 的 DolphinDB 对应分布式表 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:40;1083:58&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;dfs://wddb.stock_basic&lt;/i&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:80;1085:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;def createStockBasicDB(dbName){ if(existsDatabase(dbName)){ dropDatabase(dbName) } db=database(directory=dbName, partitionType=HASH, partitionScheme=[LONG, 1],engine=&#34;TSDB&#34;) } def createStockBasic(dbName,tbName){ db=database(dbName) if(existsTable(dbName, tbName)){ db.dropTable(tbName) } mtable=table(100:5, `id`ts_code`symbol`name`area`industry`list_date, [LONG,SYMBOL,SYMBOL,SYMBOL,SYMBOL,SYMBOL,DATE]); db.createPartitionedTable(table=mtable, tableName=tbName, partitionColumns=`id,sortColumns=`ts_code`id,keepDuplicates=LAST,sortKeyMappingFunction=[hashBucket{,100}]) } createStockBasicDB(&#34;dfs://wddb&#34;) createStockBasic(&#34;dfs://wddb&#34;, `stock_basic)&lt;/codeblock&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:164;1104:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:53;1104:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第二步：配置同步配置表&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:165;1106:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;DolphinDB 做为数据的接收端，本身无需做数据库上的额外设置，按正常使用配置即可。但由于 DolphinDB 中的数据存储表通常以分布式表为主，且分布式表是按照分区规则放置在不同的库名下，不同库名下的表是支持重名的。所以需要提供对于 DolphinDB 中表的同步配置信息。&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:5;1108:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:20;1108:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:166;1108:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;在 DolphinDB 中创建一张配置表。库、表名可在后续操作中调整，但是表中字段名要保持一致。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:4;1110:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:21;1110:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;数据库名：&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:41;1110:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;dfs://ddb_sync_config&lt;/i&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:22;1111:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;表名：&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:42;1111:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sync_config&lt;/i&gt;&lt;/li&gt;&lt;/ul&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:81;1113:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;dbName = &#34;dfs://ddb_sync_config&#34; if(existsDatabase(dbName)){ dropDatabase(dbName) } db=database(dbName, HASH, [SYMBOL, 5]) if(existsTable(dbName, &#34;sync_config&#34;)) db.dropTable(&#34;sync_config&#34;) mtable=table(100:0, `connector_name`topic_name`target_db`target_tab, [SYMBOL,SYMBOL,SYMBOL,SYMBOL]); db.createTable(table=mtable, tableName=&#34;sync_config&#34;)&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:23;1126:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:167;1126:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;插入配置表信息，配置 MySQL 表 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:43;1126:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;basicinfo.index_components&lt;/i&gt; 和 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:44;1126:54&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;basicinfo.stock_basic&lt;/i&gt; 对应的 kafka 中 topic 名称对应的 DolphinDB 分布式表&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:82;1128:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sync_config=loadTable(&#34;dfs://ddb_sync_config&#34;,&#34;sync_config&#34;); tmp_tab=table(100:0,`connector_name`topic_name`target_db`target_tab, [SYMBOL,SYMBOL,SYMBOL,SYMBOL]); insert into tmp_tab (connector_name,topic_name,target_db,target_tab) values (&#34;ddb-sink&#34;,&#34;mysqlserver.basicinfo.index_components&#34;,&#34;dfs://index_data&#34;,&#34;index_components&#34;); insert into tmp_tab (connector_name,topic_name,target_db,target_tab) values (&#34;ddb-sink&#34;,&#34;mysqlserver.basicinfo.stock_basic&#34;,&#34;dfs://wddb&#34;,&#34;stock_basic&#34;); sync_config.append!(tmp_tab);&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:168;1136:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;表中数据如下：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/24.png&#34; placement=&#34;break&#34; xtrc=&#34;image:24;1138:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;576&#34; dita-ot:image-height=&#34;147&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:24;1138:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;24&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:169;1140:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:54;1140:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;注意&lt;/b&gt;：对于同一个 connector_name，相同的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:45;1140:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;topic_name&lt;/i&gt; 只能配置一条数据。配置分布式库、表必须在 DolphinDB 书库中存在。&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:3;1142:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:3;1142:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:8;1142:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:9;1142:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:10;1142:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:3;1142:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:23;1142:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:67;1142:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:55;1142:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;字段名&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:68;1142:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:56;1142:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;类型&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:69;1142:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:57;1142:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;字段作用&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:3;1144:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:24;1144:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:70;1144:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;connector_name&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:71;1144:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;Symbol&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:72;1144:34&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;配置的 DolphinDB sink 同步任务名&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:25;1145:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:73;1145:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;topic_name&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:74;1145:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;Symbol&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:75;1145:34&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;要同步的 kafka topic 名称&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:26;1146:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:76;1146:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;target_db&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:77;1146:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;Symbol&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:78;1146:34&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;对应的 DolphinDB 分布式库名&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:27;1147:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:79;1147:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;target_tab&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:80;1147:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;Symbol&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:81;1147:34&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;对应的 DolphinDB 分布式表名&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;133-配置-dolphindb-的数据同步连接任务&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:27;1149:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:27;1149:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.3.3. 配置 DolphinDB 的数据同步连接任务&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:27;1149:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1331-准备连接器配置文件并启动连接任务&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:28;1151:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:28;1151:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.3.3.1. 准备连接器配置文件，并启动连接任务&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:28;1151:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:170;1153:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;创建 DolphinDB 数据同步任务配置文件&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:83;1155:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cd /KFDATA/datasyn-config vim ddb-sink.json&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:171;1160:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;配置如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:84;1162:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;{ &#34;name&#34;: &#34;ddb-sink&#34;, &#34;config&#34;: { &#34;connector.class&#34;: &#34;io.confluent.connect.jdbc.JdbcSinkConnector&#34;, &#34;tasks.max&#34;: &#34;2&#34;, &#34;topics&#34;: &#34;mysqlserver.basicinfo.index_components,mysqlserver.basicinfo.stock_basic&#34;, &#34;connection.url&#34;: &#34;jdbc:dolphindb://192.168.189.130:8848?user=admin&amp;amp;password=123456&#34;, &#34;transforms&#34;: &#34;unwrap&#34;, &#34;transforms.unwrap.type&#34;: &#34;io.debezium.transforms.ExtractNewRecordState&#34;, &#34;transforms.unwrap.drop.tombstones&#34;: &#34;false&#34;, &#34;auto.evolve&#34;: &#34;false&#34;, &#34;insert.mode&#34;: &#34;insert&#34;, &#34;delete.enabled&#34;: &#34;true&#34;, &#34;batch.size&#34;:&#34;10000&#34;, &#34;pk.mode&#34;: &#34;record_key&#34;, &#34;ddbsync.config.table&#34;:&#34;dfs://ddb_sync_config,sync_config&#34; } }&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:172;1183:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;参数说明：以上参数项为同步 DolphinDB 所需参数。如果对 Confluent 的 JDBC Sink Connect 有经验，可适当调节。&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:4;1185:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:4;1185:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:11;1185:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:12;1185:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:13;1185:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:4;1185:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:28;1185:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:82;1185:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:58;1185:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;参数名称&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:83;1185:34&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:59;1185:35&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;默认值&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:84;1185:68&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:60;1185:69&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;参数说明&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:4;1187:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:29;1187:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:85;1187:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;name&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:86;1187:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;无&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:87;1187:74&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;同步任务名称，不可重复。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:30;1188:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:88;1188:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;connector.class&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:89;1188:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;无&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:90;1188:74&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;连接器的 Java 类的名称。这里是 JdbcSink 的通用连接器类名。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:31;1189:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:91;1189:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;tasks.max&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:92;1189:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:93;1189:75&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;当前 connector 的最大并行任务数。可以调节增大，会创建多 consumer 并行消费读取 Kafka 中数据。一般的数据同步场景设置到 10 基本可以满足同步速度上的需求。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:32;1190:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:94;1190:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;topics&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:95;1190:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;无&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:96;1190:74&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;配置要同步的 Kafka 中的 topic 名称，配置多个 topic 时用逗号分割。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:33;1191:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:97;1191:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;connection.url&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:98;1191:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;无&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:99;1191:74&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;MySQL 数据库服务器的 IP 地址或主机名。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:34;1192:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:100;1192:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;transforms&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:101;1192:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;无&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:102;1192:74&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;声明数据转换操作。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:35;1193:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:103;1193:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;transforms.unwrap.type&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:104;1193:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;无&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:105;1193:74&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;声明数据转换器类别。请保持不变。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:36;1194:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:106;1194:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;transforms.unwrap.drop.tombstones&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:107;1194:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;false&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:108;1194:75&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;声明是否删除 Kafka 中的墓碑数据。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:37;1195:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:109;1195:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;auto.evolve&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:110;1195:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;true&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:111;1195:75&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;当 DolphinDB 中缺少列时，是否自动增加列。当前不支持自动增加列，必须配置为 false。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:38;1196:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:112;1196:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;insert.mode&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:113;1196:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;insert&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:114;1196:75&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;数据插入模式。当前只支持 insert 模式。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:39;1197:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:115;1197:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;pk.mode&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:116;1197:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;none&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:117;1197:75&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;主键模式。必须设置为 record_key。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:40;1198:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:118;1198:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;delete.enabled&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:119;1198:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;false&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:120;1198:75&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;在主键模式为 record_key 情况下。对于 null 值 record 是否按照 delete 进行操作。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:41;1199:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:121;1199:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;batch.size&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:122;1199:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;3000&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:123;1199:75&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;设置在数据量足够大时。以每批最大多少条来写入到目标数据库。注意：当该值大于 Connect worker 中设置的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:46;1199:134&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;consumer.max.pol.records&lt;/i&gt; 时，每次提交数量会受 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:47;1199:172&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;consumer.max.pol.records&lt;/i&gt; 的值限制。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:42;1200:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:124;1200:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;ddbsync.config.table&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:125;1200:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;dfs://ddb_sync_config, sync_config&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:126;1200:75&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;Kafka 中的 topic 对应 DolphinDB 表的配置表名称。可以自行定义库、表名称。但表中的字段要保持一致。表结构见“DolphinDB 的数据同步准备”。&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:173;1202:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;通过 REST API 启动 source 连接器&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:85;1204:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;curl -i -X POST -H &#34;Accept:application/json&#34; -H &#34;Content-Type:application/json&#34; http://192.168.189.130:8083/connectors/ -d @ddb-sink.json&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:174;1208:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;也可以通过我们提供 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:48;1208:11&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;kafka-tools&lt;/i&gt; 中的脚本启动&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:86;1210:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;cd /KFDATA/kafka-tools/bin ./rest.sh create @/KFDATA/datasyn-config/ddb-sink.json&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:175;1215:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;查看同步任务列表。其中，”ddb-sink”为 DolphinDB 数据同步程序。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:87;1217:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;./rest.sh list&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/25.png&#34; placement=&#34;break&#34; xtrc=&#34;image:25;1221:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;573&#34; dita-ot:image-height=&#34;53&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:25;1221:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;25&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:176;1223:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;查看 DolphinDB 的 sink 同步任务状态&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:88;1225:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;./rest.sh status ddb-sink&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:177;1229:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;通过下图可以看到，同步到 DolphinDB 的同步任务包含 1 个 connector 和 2 个 task。两个 task 状态都是 RUNNING，即正常运行。这里配置了两个线程进行数据消费，并写入 DolphinDB。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/26.png&#34; placement=&#34;break&#34; xtrc=&#34;image:26;1231:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;892&#34; dita-ot:image-height=&#34;90&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:26;1231:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;26&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:178;1233:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;查看 DolphinDB 中的数据&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:89;1235:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;select * from loadTable('dfs://index_data', 'index_components'); select * from loadTable('dfs://wddb', 'stock_basic')&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:179;1240:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;数据分别如下，两张表的初始数据均已经同步到了 DolphinDB 中。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/27.png&#34; placement=&#34;break&#34; xtrc=&#34;image:27;1242:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;944&#34; dita-ot:image-height=&#34;152&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:27;1242:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;27&lt;/alt&gt;&lt;/image&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/28.png&#34; placement=&#34;break&#34; xtrc=&#34;image:28;1244:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;412&#34; dita-ot:image-height=&#34;125&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:28;1244:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;28&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1332-实时数据同步验证&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:29;1246:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:29;1246:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.3.3.2. 实时数据同步验证&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:29;1246:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:180;1248:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:61;1248:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第一步：插入新数据&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:181;1250:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;在 MySQL 中插入两条新数据。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:90;1252:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;insert into basicinfo.index_components (trade_date,code,effdate,indexShortName,indexCode,secShortName,exchangeCD,weight,timestamp,flag) values ('2006-11-30','600051','2018-06-30 05:48:05','上证180','000010','三一重工','XXXB',0.0043,'2018-06-30 05:48:05',1), ('2006-11-30','600052','2018-06-30 06:48:02','沪深300','000300','三一重工','XSHG',0.0029,'2018-06-30 05:48:05',1)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:182;1259:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;在 DolphinDB 中进行查询，可以看到已经多了两条 code 值为 600051 和 600052 的。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:91;1261:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;select * from loadTable('dfs://index_data', 'index_components');&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/29.png&#34; placement=&#34;break&#34; xtrc=&#34;image:29;1265:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;985&#34; dita-ot:image-height=&#34;224&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:29;1265:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;29&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:183;1267:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:62;1267:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第二步：数据更新&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:184;1269:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;在 MySQL 中更新一条数据，这里我们做一个涉及主键字段的更新。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:92;1271:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;update basicinfo.index_components set code='600061' where code ='600051'&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:185;1275:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;在 DolphinDB 中进行查询，发现表中已经不存在 code 值为 600051 的数据，但可以看到一条 code 值为 600061 的数据。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:93;1277:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;select * from loadTable('dfs://index_data', 'index_components');&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/30.png&#34; placement=&#34;break&#34; xtrc=&#34;image:30;1281:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;946&#34; dita-ot:image-height=&#34;223&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:30;1281:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;30&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:186;1283:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:63;1283:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;第三步：数据删除&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:187;1285:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;从 MySQL 中删除一条数据。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:94;1287:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;delete from basicinfo.index_components where code='600061'&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:188;1291:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;在 DolphinDB 中进行查询，可以看到 code 值为 600061 的数据已经不存在了。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/31.png&#34; placement=&#34;break&#34; xtrc=&#34;image:31;1293:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;950&#34; dita-ot:image-height=&#34;205&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:31;1293:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;31&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;14-运维操作&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:30;1295:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:30;1295:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.4. 运维操作&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:30;1295:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;141-dolphindb-同步须知&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:31;1297:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:31;1297:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.4.1. DolphinDB 同步须知&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:31;1297:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:6;1299:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:24;1299:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;DolphinDB 是一款支持海量数据的分布式时序数据库。针对不同的数据处理需求，在底层架构上天然上与通常的关系型数据库不同。所以需要有以下限制：&lt;/li&gt;&lt;/ol&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:5;1301:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:25;1301:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;DolphinDB 的表没有主键设计，需要设置成 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:49;1301:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sortColumn&lt;/i&gt; 字段，并设置 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:50;1301:48&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;keepDuplicates&lt;/i&gt; = LAST 来进行去重，确保数据唯一。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:26;1302:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;DolphinDB 表采用 TSDB 引擎，才可以设置 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:51;1302:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sortColumn&lt;/i&gt;。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:27;1303:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;DolphinDB 中 TSDB 引擎的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:52;1303:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sortColumn&lt;/i&gt; 中必须要有时间列或者数字列，对应的来源主键则必须包含同样类型字段。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:28;1304:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;DolphinDB 中 TSDB 引擎的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:53;1304:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sortColumn&lt;/i&gt; 中必须要有至少两个字段，才能设置 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:54;1304:55&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;keepDuplicates&lt;/i&gt; = LAST，所以对应的来源表主键必须是 2 个字段及以上。&lt;/li&gt;&lt;/ul&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:7;1306:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:29;1306:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;DDL 语句相关：&lt;/li&gt;&lt;/ol&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:6;1308:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:30;1308:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;当前不支持 DDL 语句同步。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:31;1309:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;当前不支持同时修改两边表后的数据传递。&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;142-部署检查&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:32;1311:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:32;1311:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.4.2. 部署检查&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:32;1311:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:8;1313:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:32;1313:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:189;1313:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:64;1313:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;查看当前服务是否都在运行状态&lt;/b&gt;：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:95;1315:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;sudo systemctl list-units |egrep 'zookeeper|kafka-server|schema-registry|kafka-connect'&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/32.png&#34; placement=&#34;break&#34; xtrc=&#34;image:32;1319:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;1825&#34; dita-ot:image-height=&#34;282&#34; dita-ot:horizontal-dpi=&#34;144&#34; dita-ot:vertical-dpi=&#34;144&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:32;1319:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;32&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:190;1321:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;也可以使用 Jps 等其他方法快速查看 Java 进程。&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:33;1323:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:191;1323:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:65;1323:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;运行以下命令查看当前的同步任务列表查询&lt;/b&gt;：&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:192;1325:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;查看当前有哪些同步任务：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:96;1327:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;./rest.sh list&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/33.png&#34; placement=&#34;break&#34; xtrc=&#34;image:33;1331:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;862&#34; dita-ot:image-height=&#34;72&#34; dita-ot:horizontal-dpi=&#34;144&#34; dita-ot:vertical-dpi=&#34;144&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:33;1331:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;33&lt;/alt&gt;&lt;/image&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:34;1333:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:193;1333:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:66;1333:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;查看某个同步任务的状态&lt;/b&gt;：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:97;1335:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;./rest.sh status ddb-sink&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/34.png&#34; placement=&#34;break&#34; xtrc=&#34;image:34;1339:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;1825&#34; dita-ot:image-height=&#34;127&#34; dita-ot:horizontal-dpi=&#34;144&#34; dita-ot:vertical-dpi=&#34;144&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:34;1339:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;34&lt;/alt&gt;&lt;/image&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:35;1341:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:194;1341:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:67;1341:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;暂停同步任务，该操作会停止当前整体 connector 同步任务&lt;/b&gt;：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:98;1343:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;./rest.sh c_pause ddb-sink&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/35.png&#34; placement=&#34;break&#34; xtrc=&#34;image:35;1347:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;1825&#34; dita-ot:image-height=&#34;282&#34; dita-ot:horizontal-dpi=&#34;144&#34; dita-ot:vertical-dpi=&#34;144&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:35;1347:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;35&lt;/alt&gt;&lt;/image&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:36;1349:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:195;1349:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:68;1349:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;恢复同步任务&lt;/b&gt;：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:99;1351:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;./rest.sh c_resume ddb-sink&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/36.png&#34; placement=&#34;break&#34; xtrc=&#34;image:36;1355:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;1822&#34; dita-ot:image-height=&#34;273&#34; dita-ot:horizontal-dpi=&#34;144&#34; dita-ot:vertical-dpi=&#34;144&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:36;1355:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;36&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:196;1357:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;对于曾经由于数据库报错一度暂停的同步任务，在错误消除后，只要 connector 运行正常，可以通过以下命令使其恢复同步：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:100;1359:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;./rest.sh t_restart ${connector_name} ${task_id}&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:37;1363:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:197;1363:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:69;1363:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;修改同步任务配置参数&lt;/b&gt;：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:101;1365:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;./rest c_alter ${connector_name} @source_config.json&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:198;1369:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;修改参数时，只需传递参数，不需要带有 connector name，格式示例如下：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/37.png&#34; placement=&#34;break&#34; xtrc=&#34;image:37;1371:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;941&#34; dita-ot:image-height=&#34;307&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:37;1371:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;37&lt;/alt&gt;&lt;/image&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;143-数据同步情况检查&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:33;1373:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:33;1373:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.4.3. 数据同步情况检查&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:33;1373:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:199;1375:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;正常情况下，数据同步程序会保持稳定的数据同步。对于意外因素造成的数据未同步，可参考以下步骤逐一排查：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:9;1377:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:38;1377:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:200;1377:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:70;1377:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;查看 MySQL 中 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:55;1377:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;binlog&lt;/i&gt; 中记录的最新位置。&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:201;1379:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;查看该值需要正确的配置 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:56;1379:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;gtid_mode&lt;/i&gt; 等参数，按照前面的提供的 MySQL 参数配置既可。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:102;1381:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;SHOW MASTER STATUS;&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/38.png&#34; placement=&#34;break&#34; xtrc=&#34;image:38;1385:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;1026&#34; dita-ot:image-height=&#34;129&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:38;1385:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;38&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:202;1387:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;查看 MySQL 中的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:57;1387:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;binlog&lt;/i&gt;具体数据库更改。可以通过过 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:7;1387:39&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;mysqlbinglog&lt;/codeph&gt; 命令查看 MySQL 的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:58;1387:68&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;binlog&lt;/i&gt; 中记录的数据库改变。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:103;1389:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;./mysqlbinlog --base64-output=decode-rows -v --skip-gtids /usr/local/mysql/data/binlog.000003|less&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/39.png&#34; placement=&#34;break&#34; xtrc=&#34;image:39;1393:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;1416&#34; dita-ot:image-height=&#34;304&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:39;1393:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;39&lt;/alt&gt;&lt;/image&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:39;1395:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:203;1395:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:71;1395:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;查看 Kafka 中记录的 MySQL 同步的 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:59;1395:30&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;binlog&lt;/i&gt; 位置。&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:204;1397:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;结合前面查看的 MySQL 最新 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:60;1397:22&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;binlog&lt;/i&gt; 位置，可以确定当前数据从 MySQL 到 Kafka 的同步进度。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:104;1399:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;./consume.sh --topic connect-offsets --from-beginning |grep basicinfo-connector&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/40.png&#34; placement=&#34;break&#34; xtrc=&#34;image:40;1403:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;1472&#34; dita-ot:image-height=&#34;100&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:40;1403:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;40&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:205;1405:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;查看 Kafka 中数据，Kafka 中的数据是已序列化的二进制存储。需要使用 avro 调用 schema-registry 中的表结构信息及进行反序列化。这里我们提供了 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:61;1405:92&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;tpconsumer.sh&lt;/i&gt; 脚本，可以提供反序列化后的 Kafka 中的真实数据，并匹配上该条数据对应的表结构。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:105;1407:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;./tpconsumer.sh --op=2 --topic=mysqlserver.basicinfo.index_components --offset=1 --max-messages=2&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/41.png&#34; placement=&#34;break&#34; xtrc=&#34;image:41;1411:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;1862&#34; dita-ot:image-height=&#34;425&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:41;1411:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;41&lt;/alt&gt;&lt;/image&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:40;1413:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:206;1413:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:72;1413:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;查看当前 DolphinDB 同步任务列表。&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:207;1415:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;下面命令可以查看当前 Kafka 中的消费组。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:106;1417:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;./kafka.sh cm_list&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/42.png&#34; placement=&#34;break&#34; xtrc=&#34;image:42;1421:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;521&#34; dita-ot:image-height=&#34;78&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:42;1421:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;42&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:208;1423:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;查看 DolphinDB 同步任务对应的 Kafka 消费组中的每一个 consumer 的消费进度，通过此命令可以查看同步程序中每一张的表同步进度。Lag 为 0 则表示 Kafka 中 topic 当前没有未消费的数据，即 Kafka 中的数据与对应表的数据是一致的。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:107;1425:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;./kafka.sh cm_detail connect-ddb-sink|awk '{printf &#34;%-20s %-40s %-9s %-14s %-15s %-10s %-30s\n&#34;, $1, $2, $3, $4, $5, $6,$7}'&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/Debezium_and_Kafka_data_sync/43.png&#34; placement=&#34;break&#34; xtrc=&#34;image:43;1429:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34; dita-ot:image-width=&#34;1813&#34; dita-ot:image-height=&#34;112&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:43;1429:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;43&lt;/alt&gt;&lt;/image&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;15-附录&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:34;1431:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:34;1431:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;1.5. 附录&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:34;1431:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:209;1433:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;tar&#34; href=&#34;script/Debezium_and_Kafka_data_sync/KFDATA.tar&#34; xtrc=&#34;xref:12;1433:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;&lt;?ditaot usertext?&gt;KFDATA.tar&lt;/xref&gt; 压缩包包含：数据的同步数据文件夹、配置文件及 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:62;1433:87&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/Debezium_and_Kafka_data_sync.md&#34;&gt;Kafka-tools&lt;/i&gt; 脚本。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;/topic&gt;"/><meta name="wh-source-relpath" content="tutorials/Debezium_and_Kafka_data_sync.md"/><meta name="wh-out-relpath" content="tutorials/Debezium_and_Kafka_data_sync.html"/>

    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/commons.css?buildId=2024012323"/>
    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic.css?buildId=2024012323"/>

    <script src="../oxygen-webhelp/app/options/properties.js?buildId=20250305183303"></script>
    <script src="../oxygen-webhelp/app/localization/strings.js?buildId=2024012323"></script>
    <script src="../oxygen-webhelp/app/search/index/keywords.js?buildId=20250305183303"></script>
    <script defer="defer" src="../oxygen-webhelp/app/commons.js?buildId=2024012323"></script>
    <script defer="defer" src="../oxygen-webhelp/app/topic.js?buildId=2024012323"></script>
<link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/styles.css?buildId=2024012323"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script></head>

    <body id="debezium--kafka-实时同步-mysql-数据到-dolphindb" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            跳转到主要内容
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div xmlns:whc="http://www.oxygenxml.com/webhelp/components" class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="https://docs.dolphindb.cn/zh/index.html" class=" wh_logo d-none d-sm-block "><img src="../logo.png" alt="  DolphinDB 文档中心  "/></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="booktitle">  <span class="ph mainbooktitle">DolphinDB 文档中心</span>  </span></a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="搜索 " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="搜索查询" required="required"/><button type="submit" class="wh_search_button" aria-label="搜索"><span class="search_input_text">搜索</span></button></div></form>
            
            <script src="/vendors/react/umd/react.production.min.js" defer="defer"></script>
<script src="/vendors/react-dom/umd/react-dom.production.min.js" defer="defer"></script>
<script src="/vendors/dayjs/dayjs.min.js" defer="defer"></script>
<script src="/vendors/antd/dist/antd.min.js" defer="defer"></script>
<script src="/vendors/@ant-design/icons/dist/index.umd.min.js" defer="defer"></script>
<script src="/zh/index.js" type="module"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" defer="defer"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer="defer"><!--


--></script>
<script defer="defer"><!--

// 从主页重定向
const currentUrl = window.location.href;

// 判断当前URL是否包含index.html并且路径最后部分是index.html
if (currentUrl.endsWith('index.html')) {
    // 处理根目录下的index.html跳转
    const baseUrl = currentUrl.split('/index.html')[0]; // 获取index.html之前的部分
    const redirectUrl = `${baseUrl}/about/ddb_intro.html`; // 构建跳转路径
    window.location.href = redirectUrl; // 执行跳转
}

--></script>
            
        </div></div>
    </div>
</header>
        
        
         
        
        
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="../index.html"><span>主页</span></a></span></li><li><div class="topicref" data-id="about_tutorials"><div class="title"><a href="../tutorials/about_tutorials.html"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div></li><li><div class="topicref"><div class="title"><a href="../tutorials/database.html">数据库</a></div></div></li><li class="active"><div class="topicref" data-id="debezium--kafka-实时同步-mysql-数据到-dolphindb"><div class="title"><a href="../tutorials/Debezium_and_Kafka_data_sync.html">Debezium + Kafka 实时同步 MySQL 数据到 DolphinDB</a></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="切换搜索突出显示" title="切换搜索突出显示"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="折叠截面" title="折叠截面"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="打印此页" aria-label="打印此页"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem"><div data-tocid="ddb_intro-d9713e87" class="topicref" data-id="ddb_intro" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../about/ddb_intro.html" id="ddb_intro-d9713e87-link">关于DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="chap1_getstarted-d9713e136" class="topicref" data-id="chap1_getstarted" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../getstarted/chap1_getstarted.html" id="chap1_getstarted-d9713e136-link">快速上手</a><div class="wh-tooltip"><p class="shortdesc">如何快速部署 DolphinDB、建库建表、写入和查询数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="sectionddb_deployment-d9713e189" class="topicref" data-id="sectionddb_deployment" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action sectionddb_deployment-d9713e189-link" class="wh-expand-btn"></span><div class="title"><a href="../deploy/deploy_intro.html" id="sectionddb_deployment-d9713e189-link"><span class="keyword label">部署</span></a><div class="wh-tooltip"><p class="shortdesc">如何在不同的场景中部署 DolphinDB</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259" class="topicref" data-id="new_chap_database_manage_new_chap_dbmanage_landing_page" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/cfg/db_intro.html" id="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link"><span class="keyword label">数据库</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 数据库的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_streaming-d9713e3760" class="topicref" data-id="chap7_tutorials_streaming" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_streaming-d9713e3760-link" class="wh-expand-btn"></span><div class="title"><a href="../stream/str_intro.html" id="chap7_tutorials_streaming-d9713e3760-link"><span class="keyword label">流数据</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 流数据引擎及流数据计算的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e7513" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e7513-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/db_oper/import_data.html" id="tocId-d9713e7513-link">数据迁移</a><div class="wh-tooltip"><p class="shortdesc">如何从不同数据源向 DolphinDB 迁移数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_system_management-d9713e7940" class="topicref" data-id="chap7_tutorials_system_management" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_system_management-d9713e7940-link" class="wh-expand-btn"></span><div class="title"><a href="../sys_man/om_intro.html" id="chap7_tutorials_system_management-d9713e7940-link"><span class="keyword label">系统运维</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 的系统运维功能及方法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="troubleshooting-d9713e8780" class="topicref" data-id="troubleshooting" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action troubleshooting-d9713e8780-link" class="wh-expand-btn"></span><div class="title"><a href="../error_codes/troubleshooting.html" id="troubleshooting-d9713e8780-link">故障排查</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="about_language_resources-d9713e20911" class="topicref" data-id="about_language_resources" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action about_language_resources-d9713e20911-link" class="wh-expand-btn"></span><div class="title"><a href="../progr/progr_intro.html" id="about_language_resources-d9713e20911-link"><span class="keyword label">编程语言</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 编程基本概念与方法、SQL 在 DolphinDB 的应用</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="functions_references-d9713e30925" class="topicref" data-id="functions_references" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action functions_references-d9713e30925-link" class="wh-expand-btn"></span><div class="title"><a href="../funcs/funcs_intro.html" id="functions_references-d9713e30925-link"><span class="keyword label">函数参考</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 函数分类、语法、详解及示例</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="api_protocol-d9713e94064" class="topicref" data-id="api_protocol" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action api_protocol-d9713e94064-link" class="wh-expand-btn"></span><div class="title"><a href="../api/connapi_intro.html" id="api_protocol-d9713e94064-link"><span class="keyword label">连接器 &amp; API</span></a><div class="wh-tooltip"><p class="shortdesc">面向不同编程语言的 DolphinDB API 及连接器，相关协议和用法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap6_plugin-d9713e94210" class="topicref" data-id="chap6_plugin" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap6_plugin-d9713e94210-link" class="wh-expand-btn"></span><div class="title"><a href="../plugins/plg_intro.html" id="chap6_plugin-d9713e94210-link"><span class="keyword label">插件</span></a><div class="wh-tooltip"><p class="shortdesc">多个应用场景的插件使用说明和插件开发指导</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="third_party-d9713e97904" class="topicref" data-id="third_party" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action third_party-d9713e97904-link" class="wh-expand-btn"></span><div class="title"><a href="../third_party.html" id="third_party-d9713e97904-link">第三方工具</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="about_tutorials-d9713e98227" class="topicref" data-id="about_tutorials" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action about_tutorials-d9713e98227-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/about_tutorials.html" id="about_tutorials-d9713e98227-link"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98280" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98280-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/new_users_finance.html" id="tocId-d9713e98280-link">新用户入门</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="tocId-d9713e98327" class="topicref" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action tocId-d9713e98327-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/database.html" id="tocId-d9713e98327-link">数据库</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="分区数据库设计和操作-d9713e98328" class="topicref" data-id="分区数据库设计和操作" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/database.html" id="分区数据库设计和操作-d9713e98328-link">分区数据库设计和操作</a></div></div></li><li role="treeitem"><div data-tocid="dolphindb-内存表详解-d9713e98374" class="topicref" data-id="dolphindb-内存表详解" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/in_memory_table.html" id="dolphindb-内存表详解-d9713e98374-link">DolphinDB 内存表详解</a></div></div></li><li role="treeitem"><div data-tocid="内存数据表-d9713e98420" class="topicref" data-id="内存数据表" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/partitioned_in_memory_table.html" id="内存数据表-d9713e98420-link">内存数据表</a></div></div></li><li role="treeitem"><div data-tocid="oltp-内存存储引擎非嵌入式版使用教程-d9713e98466" class="topicref" data-id="oltp-内存存储引擎非嵌入式版使用教程" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/oltp_in-memory_storage_engine_non-embedded_version_tutorials.html" id="oltp-内存存储引擎非嵌入式版使用教程-d9713e98466-link">OLTP 内存存储引擎（非嵌入式版）使用教程</a></div></div></li><li role="treeitem"><div data-tocid="利用缓存表快速实现-mysql-库间信息同步-d9713e98512" class="topicref" data-id="利用缓存表快速实现-mysql-库间信息同步" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/cachedtable.html" id="利用缓存表快速实现-mysql-库间信息同步-d9713e98512-link">利用缓存表快速实现 MySQL 库间信息同步</a></div></div></li><li role="treeitem"><div data-tocid="建库建表最容易忽略的十个细节-d9713e98558" class="topicref" data-id="建库建表最容易忽略的十个细节" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/database_and_table_creation_details.html" id="建库建表最容易忽略的十个细节-d9713e98558-link">建库建表最容易忽略的十个细节</a></div></div></li><li role="treeitem"><div data-tocid="redo-log-和-cache-engine-d9713e98604" class="topicref" data-id="redo-log-和-cache-engine" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/redoLog_cacheEngine.html" id="redo-log-和-cache-engine-d9713e98604-link">redo log 和 cache engine</a></div></div></li><li role="treeitem"><div data-tocid="tsdb-存储引擎简介-d9713e98650" class="topicref" data-id="tsdb-存储引擎简介" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/tsdb_engine.html" id="tsdb-存储引擎简介-d9713e98650-link">TSDB 存储引擎简介</a></div></div></li><li role="treeitem"><div data-tocid="tsdb-存储引擎详解-d9713e98696" class="topicref" data-id="tsdb-存储引擎详解" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/tsdb_explained.html" id="tsdb-存储引擎详解-d9713e98696-link">TSDB 存储引擎详解</a></div></div></li><li role="treeitem"><div data-tocid="分布式表数据更新原理和性能-d9713e98742" class="topicref" data-id="分布式表数据更新原理和性能" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/dolphindb_update.html" id="分布式表数据更新原理和性能-d9713e98742-link">分布式表数据更新原理和性能</a></div></div></li><li role="treeitem"><div data-tocid="软删除-d9713e98788" class="topicref" data-id="软删除" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/soft_delete.html" id="软删除-d9713e98788-link">软删除</a></div></div></li><li role="treeitem"><div data-tocid="基于-datax-的-dolphindb-数据导入工具-d9713e98835" class="topicref" data-id="基于-datax-的-dolphindb-数据导入工具" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/datax_writer.html" id="基于-datax-的-dolphindb-数据导入工具-d9713e98835-link">基于 DataX 的 DolphinDB 数据导入工具</a></div></div></li><li role="treeitem" class="active"><div data-tocid="debezium--kafka-实时同步-mysql-数据到-dolphindb-d9713e98881" class="topicref" data-id="debezium--kafka-实时同步-mysql-数据到-dolphindb" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Debezium_and_Kafka_data_sync.html" id="debezium--kafka-实时同步-mysql-数据到-dolphindb-d9713e98881-link">Debezium + Kafka 实时同步 MySQL 数据到 DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="debeziumkafka-实时同步-oracle-11g-数据到-dolphindb-d9713e98927" class="topicref" data-id="debeziumkafka-实时同步-oracle-11g-数据到-dolphindb" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Debezium_Kafka_Oracle_sync.html" id="debeziumkafka-实时同步-oracle-11g-数据到-dolphindb-d9713e98927-link">Debezium+Kafka 实时同步 Oracle 11g 数据到 DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="clear_cache-d9713e98973" class="topicref" data-id="clear_cache" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/clear_cache.html" id="clear_cache-d9713e98973-link">数据库缓存清理机制 </a></div></div></li><li role="treeitem"><div data-tocid="best_practice_for_storage_compute_separation-d9713e99019" class="topicref" data-id="best_practice_for_storage_compute_separation" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/best_practice_for_storage_compute_separation.html" id="best_practice_for_storage_compute_separation-d9713e99019-link">存算分离最佳实践教程</a></div></div></li><li role="treeitem"><div data-tocid="database_and_table_creation_wizard-d9713e99065" class="topicref" data-id="database_and_table_creation_wizard" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/database_and_table_creation_wizard.html" id="database_and_table_creation_wizard-d9713e99065-link">DolphinDB Web 界面库表创建指南</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e99111" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e99111-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/std_sql_ddb.html" id="tocId-d9713e99111-link">编程</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100448" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100448-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming-real-time-correlation-processing_2.html" id="tocId-d9713e100448-link">流数据</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100955" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100955-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/scheduledJob_2.html" id="tocId-d9713e100955-link">系统运维</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="模块概述-d9713e101923" class="topicref" data-id="模块概述" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action 模块概述-d9713e101923-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/tu_modules.html" id="模块概述-d9713e101923-link">模块</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e102568" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e102568-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/OHLC_2.html" id="tocId-d9713e102568-link">金融场景案例</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e104827" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e104827-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_engine_anomaly_alerts_2.html" id="tocId-d9713e104827-link">物联网场景案例</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105795" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105795-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/dolphindb_tensor_libtorch_tutorial.html" id="tocId-d9713e105795-link">机器学习</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105842" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105842-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/api_performance.html" id="tocId-d9713e105842-link">测试报告</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105982" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105982-link" class="wh-expand-btn"></span><div class="title"><a href="../rn/server/3_00_2.html" id="tocId-d9713e105982-link">版本说明</a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 版本发布历史</p></div></div></div></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-7 col-md-9 col-sm-12" id="wh_topic_body">
                        <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        <button id="wh_close_topic_toc_button" class="close-toc-button d-none" aria-label="Toggle topic table of content" aria-controls="wh_topic_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        <div class=" wh_topic_content body "><main role="main"><article class="- topic/topic topic" role="article" aria-labelledby="ariaid-title1"><h1 class="- topic/title title topictitle1" id="ariaid-title1">Debezium + Kafka 实时同步 MySQL 数据到 DolphinDB</h1><div class="- topic/body body"></div><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title2" id="1-debezium-同步方案概述"><h2 class="- topic/title title topictitle2" id="ariaid-title2">1. Debezium 同步方案概述</h2><div class="- topic/body body"><p class="- topic/p p">Debezium 是一个开源的分布式平台，用于实时捕获和发布数据库更改事件。它可以将关系型数据库（如 MySQL、PostgreSQL、Oracle 等）的变更事件转化为可观察的流数据，以供其他应用程序实时消费和处理。本文中我们将采用 Debezium 与 Kafka 组合的方式来实现从 MySQL 到 DolphinDB 的数据同步。</p><p class="- topic/p p">Kafka + Debezium 的数据同步方案需要部署 4 个服务，如下所示</p><ul class="- topic/ul ul"><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">ZooKeeper</strong>：kafka 的依赖部署</li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">Kafka</strong>：数据存储</li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">Kafka-Connect</strong>：用于接入数据插件 source-connetor、sink-connector 的框架，可以提供高可用。也可以部署单实例版本。</li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">Schema-Registry</strong> ：提供实时同步的数据的元数据注册功能，支持数据序列化。</li></ul><p class="- topic/p p">基于 Debezium 的数据架构图如下：</p><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/01.png" alt="01"/><br/><p class="- topic/p p">接下来，本文将逐一介绍这些服务的下载、安装，以及配置数据同步任务。</p></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title3" id="11-部署-kafka-单实例实时数据存储"><h3 class="- topic/title title topictitle3" id="ariaid-title3">1.1. 部署 Kafka 单实例实时数据存储</h3><div class="- topic/body body"><p class="- topic/p p">基于 Kafka 的整套架构是支持高可用集群的。不过，即使部署单实例的服务，也可以达成数据同步任务。</p><p class="- topic/p p">本文将以单实例存储来进行介绍数据同步。</p></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title4" id="111-部署准备"><h4 class="- topic/title title topictitle4" id="ariaid-title4">1.1.1. 部署准备</h4><div class="- topic/body body"><p class="- topic/p p">首先下载程序包，Zookeeper（开源）、Kafka（开源）、Confluent（社区版），可以自行到官网下载最新稳定版本。</p><p class="- topic/p p">并将下面 4 个软件包放到 /opt 目录下。（软件、配置、数据路径文件较多。<strong class="+ topic/ph hi-d/b ph b">注意：初次试用请尽量保持路径一致</strong>。）</p><ul class="- topic/ul ul"><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b"><a class="- topic/xref xref" href="https://download.oracle.com/java/17/latest/jdk-17_linux-x64_bin.tar.gz" target="_blank" rel="external noopener">jdk-17.0.7_linux-x64_bin.tar.gz</a></strong></li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b"><a class="- topic/xref xref" href="https://zookeeper.apache.org/releases.html" target="_blank" rel="external noopener">apache-zookeeper-3.7.1-bin.tar.gz</a></strong></li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b"><a class="- topic/xref xref" href="https://kafka.apache.org/downloads" target="_blank" rel="external noopener">kafka_2.13-3.4.1.tgz</a>（下载 scala 2.13 版本）</strong></li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b"><a class="- topic/xref xref" href="https://www.confluent.io/installation/" target="_blank" rel="external noopener">confluent-community-7.4.0.tar.gz</a></strong></li></ul><p class="- topic/p p">Confluent 下载会稍微麻烦点，需要选择 self-managed 然后录入信息，点击 start free 才能下载。注意下载 community 版本即可满足需要，我们只需要里头的 <em class="+ topic/ph hi-d/i ph i">schema-registry</em> 包。当然如果需要更好功能，也可以下载正式版，正式版包括了 Zookeeper、Kafka 以及管理、监控 Kafka 的更多功能。Confluent 是 Kafka 相关的商业公司。</p><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/02.png" alt="02"/><br/><p class="- topic/p p">以上 4 个程序包下载好之后，我们就可以开始部署了。</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title5" id="112-部署-zookeeper"><h4 class="- topic/title title topictitle4" id="ariaid-title5">1.1.2. 部署 Zookeeper</h4><div class="- topic/body body"></div><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title6" id="1121-基础准备"><h5 class="- topic/title title topictitle5" id="ariaid-title6">1.1.2.1. 基础准备</h5><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第一步：创建部署用户</strong></p><p class="- topic/p p">创建用户 kafka，授予 sudo 免密权限（需自行设置）。然后切换到 kafka 用户来进行操作（以下均为 kafka 用户操作）。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>useradd kafka
su kafka</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第二步：安装部署 java 环境</strong></p><p class="- topic/p p">安装  java 到路径 /opt/java17，整套架构涉及的程序都是基于 java 虚拟机运行的。所以必须安装 java。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /opt
sudo mkdir -p /usr/local/java
sudo tar -xvf jdk-17.0.7_linux-x64_bin.tar.gz
sudo mv jdk-17.0.7 /usr/local/java/java17</code></pre><p class="- topic/p p">设置 java 环境变量（kafka 用户下执行）。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>vim ~/.bashrc
# 输入下面代码
JAVA_HOME=/usr/local/java/java17
PATH=$JAVA_HOME/bin:$PATH
export JAVA_HOME PATH

source ~/.bashrc
java --version</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/03.png" alt="03"/><br/></div></article><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title7" id="1122-安装-zookeeper"><h5 class="- topic/title title topictitle5" id="ariaid-title7">1.1.2.2. 安装 Zookeeper</h5><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第一步：解压并安装 Zookeeper</strong></p><p class="- topic/p p">3.7.1 版本的 Zookeeper 用户、组有默认值，这里我们需要调整一下。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /opt
sudo tar -xvf apache-zookeeper-3.7.1-bin.tar.gz
sudo mv apache-zookeeper-3.7.1-bin zookeeper
sudo chown -R root:root zookeeper
sudo chmod -R 755 zookeeper</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第二步：准备 Zookeeper 的配置文件和存储文件</strong></p><p class="- topic/p p">创建 zookeeper 的配置文件、数据文件、日志文件的存储路径。请尽量保持路径一致。篇末有打包的全部程序配置文件包。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo mkdir -p /KFDATA/zookeeper/etc
sudo mkdir -p /KFDATA/zookeeper/data
sudo mkdir -p /KFDATA/zookeeper/datalog
sudo mkdir -p /KFDATA/zookeeper/logs
sudo chown -R kafka:kafka /KFDATA
chmod -R 700 /KFDATA/zookeeper</code></pre><p class="- topic/p p">准备 zookeeper 的配置文件 <em class="+ topic/ph hi-d/i ph i">zoo.cfg</em>。先从 zookeeper 安装路径下复制 <em class="+ topic/ph hi-d/i ph i">log4j.properties</em> 过来，然后进行修改。</p><p class="- topic/p p">说明：zookeeper 的不同版本 <em class="+ topic/ph hi-d/i ph i">log4j.properties</em> 配置内容会略有区别。如有不同，请按 log4j 的规则调整。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /KFDATA/zookeeper/etc
touch zoo.cfg
echo tickTime=2000 &gt; zoo.cfg
echo initLimit=10 &gt;&gt;zoo.cfg
echo syncLimit=5 &gt;&gt;zoo.cfg
echo  dataDir=/KFDATA/zookeeper/data &gt;&gt;zoo.cfg
echo  dataLogDir=/KFDATA/zookeeper/datalog &gt;&gt;zoo.cfg
echo  clientPort=2181 &gt;&gt;zoo.cfg
sudo cp /opt/zookeeper/conf/log4j.properties ./
sudo chown kafka:kafka ./log4j.properties</code></pre><p class="- topic/p p">修改 <em class="+ topic/ph hi-d/i ph i">log4j.properties</em> 中的 <em class="+ topic/ph hi-d/i ph i">zookeeper.log.dir</em> 参数</p><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/04.png" alt="04"/><br/><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第三步：创建 Zookeeper 的启动文件</strong></p><p class="- topic/p p">创建一个 <em class="+ topic/ph hi-d/i ph i">zk.env</em> ，配置 Zookeeper 启动所需环境变量，用于启动 <em class="+ topic/ph hi-d/i ph i">service</em> 文件调用。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /KFDATA/zookeeper/etc/
touch zk.env
echo JAVA_HOME=/usr/local/java/java17 &gt; zk.env
echo PATH="/usr/local/java/java17/bin:/opt/zookeeper/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin" &gt;&gt; zk.env
echo ZOO_LOG_DIR=/KFDATA/zookeeper/logs &gt;&gt; zk.env
echo ZOO_LOG4J_OPTS=\"-Dlog4j.configuration=file:/KFDATA/zookeeper/etc/log4j.properties\" &gt;&gt; zk.env</code></pre><p class="- topic/p p">如果对 Zookeeper 很熟练可以自行调用 Zookeeper 安装目录下的 <em class="+ topic/ph hi-d/i ph i">bin</em> 文件夹下的操作脚本来进行操作或测试。</p><p class="- topic/p p">使用 <code class="+ topic/ph pr-d/codeph ph codeph">vim</code> 命令编辑一个 <em class="+ topic/ph hi-d/i ph i">service</em> 文件。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo vim /usr/lib/systemd/system/zookeeper.service</code></pre><p class="- topic/p p">录入以下启动命令信息，并保存。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>[Unit]
Description=Apache Kafka - ZooKeeper
After=network.target

[Service]
Type=forking
User=kafka
Group=kafka
EnvironmentFile=/KFDATA/zookeeper/etc/zk.env
ExecStart=/opt/zookeeper/bin/zkServer.sh start /KFDATA/zookeeper/etc/zoo.cfg
ExecStop=/opt/zookeeper/bin/zkServer.sh stop /KFDATA/zookeeper/etc/zoo.cfg
TimeoutStopSec=180
Restart=no


[Install]
WantedBy=multi-user.target
</code></pre><p class="- topic/p p">重新加载 service 启动服务。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo systemctl daemon-reload</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第四步：创建测试脚本</strong></p><p class="- topic/p p">（1）创建连接 Zookeeper 测试文件 <em class="+ topic/ph hi-d/i ph i">zkCon.sh</em>。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>mkdir -p /KFDATA/bin
cd /KFDATA/bin
touch zkCon.sh
echo export JAVA_HOME=/usr/local/java/java17 &gt;zkCon.sh
echo export PATH="{$JAVE_HOME}/bin:/opt/zookeeper/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin" &gt;&gt;zkCon.sh
echo export ZOO_LOG_DIR=/KFDATA/zookeeper/logs &gt;&gt;zkCon.sh
echo export ZOO_LOG4J_OPTS=\"-Dlog4j.configuration=file:/KFDATA/zookeeper/etc/log4j.properties\" &gt;&gt;zkCon.sh
echo  '/opt/zookeeper/bin/zkCli.sh -server localhost:2181 -Dzookeeper.config.path=/KFDATA/zookeeper/zoo.cfg' &gt;&gt;zkCon.sh</code></pre><p class="- topic/p p">对脚本授予执行权限。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>chmod +x  zkCon.sh </code></pre></div></article><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title8" id="1123-部署启动-zookeeper"><h5 class="- topic/title title topictitle5" id="ariaid-title8">1.1.2.3. 部署启动 Zookeeper</h5><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第一步：通过 systemctl 工具启动 Zookeeper 服务。</strong></p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo systemctl start zookeeper.service</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第二步：查看 Zookeeper 启动情况</strong></p><p class="- topic/p p">可以通过 <code class="+ topic/ph pr-d/codeph ph codeph">jps</code> 命令 查看 java 进程，QuorumPeerMain 进程是 Zookeeper 的启动进程。</p><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/05.png" alt="05"/><br/><p class="- topic/p p">也可以通过 <code class="+ topic/ph pr-d/codeph ph codeph">systemctl</code> 命令查看，如图即是正常启动。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code> sudo systemctl status zookeeper</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/06.png" alt="06"/><br/><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第三步：通过客户端连接 Zookeeper，并进行查看。</strong></p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /KFDATA/bin/
./zkCon.sh
# 等待 zookeeper 命令行窗口
ls /
ls /zookeeper </code></pre><p class="- topic/p p">如果返回如下显示，表示 Zookeeper 启动成功，可以在 Zookeeper 中观察到自身的基础信息。</p><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/07.png" alt="07"/><br/><p class="- topic/p p">ctrl +c 可以退出 Zookeeper 客户端连接。</p></div></article></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title9" id="113-部署-kafka"><h4 class="- topic/title title topictitle4" id="ariaid-title9">1.1.3. 部署 Kafka</h4><div class="- topic/body body"></div><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title10" id="1131-安装-kafka"><h5 class="- topic/title title topictitle5" id="ariaid-title10">1.1.3.1. 安装 Kafka</h5><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第一步：解压安装 Kafka 文件</strong></p><p class="- topic/p p">执行以下命令，修改一下 Kafka 的安装文件名。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /opt
sudo tar -xvf kafka_2.13-3.4.1.tgz
sudo mv kafka_2.13-3.4.1 kafka</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第二步：准备 Kafka 的配置文件和存储文件</strong></p><p class="- topic/p p">创建 Kafka 的配置文件、数据文件、日志文件的存储路径。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>mkdir -p /KFDATA/kafka/etc
mkdir -p /KFDATA/kafka/data
mkdir -p /KFDATA/kafka/logs</code></pre><p class="- topic/p p">准备 Kafka 相关配置文件，创建启动配置文件，和日志配置文件。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /KFDATA/kafka/etc
touch kafka-server.properties
cp /opt/kafka/config/log4j.properties ./
cp /opt/kafka/config/tools-log4j.properties ./</code></pre><p class="- topic/p p">修改 <a class="- topic/xref xref" href="script/Debezium_and_Kafka_data_sync/kafka-server.properties">kafka-server.properties</a> 文件中的配置，修改内容较多，文件如下，也可以自行录入。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>############################# Server Basics #############################
broker.id=1
############################# Socket Server Settings #############################
listeners=PLAINTEXT://0.0.0.0:9092
advertised.listeners=PLAINTEXT://192.168.189.130:9092
num.network.threads=3
num.io.threads=8
socket.send.buffer.bytes=102400
socket.receive.buffer.bytes=102400
socket.request.max.bytes=104857600
############################# Log Basics #############################
log.dirs=/KFDATA/kafka/data
num.partitions=1
num.recovery.threads.per.data.dir=1
############################# Internal Topic Settings  #############################
offsets.topic.replication.factor=1
transaction.state.log.replication.factor=1
transaction.state.log.min.isr=1
############################# Log Retention Policy #############################
log.retention.hours=-1
log.retention.bytes=21474836480 
log.segment.bytes=1073741824
log.retention.check.interval.ms=300000
auto.create.topics.enable=true
############################# Zookeeper #############################
zookeeper.connect=192.168.189.130:2181
# Timeout in ms for connecting to zookeeper
zookeeper.connection.timeout.ms=12000
############################# Group Coordinator Settings #############################
group.initial.rebalance.delay.ms=0
############################# message Settings #############################
message.max.byte=5242880</code></pre><p class="- topic/p p">其中以下两项需要视具体环境修改，advertise.listeners 是对外监听端口。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>advertised.listeners=PLAINTEXT://192.168.189.130:9092
zookeeper.connect=192.168.189.130:2181</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第三步：准备 Kafka 的启动文件</strong></p><p class="- topic/p p">创建 Kafka 启动的环境变量文件，这里配置了开启 JMX 监控端口，如果不需要，可以忽略后两项配置。</p><p class="- topic/p p">JMX 端口的作用是可以通过此端口连接，获取一些监控指标。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /KFDATA/kafka/etc
touch kf-server.env

echo PATH="/usr/local/java/java17/bin:/opt/zookeeper/bin:/opt/kafka:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin" &gt;&gt;kf-server.env
echo LOG_DIR="/KFDATA/kafka/logs/" &gt;&gt;kf-server.env
echo KAFKA_LOG4J_OPTS=\"-Dlog4j.configuration=file:/KFDATA/kafka/etc/log4j.properties\" &gt;&gt;kf-server.env
echo KAFKA_JMX_OPTS=\"-Dcom.sun.management.jmxremote=true -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.ssl=false -Djava.rmi.server.hostname=192.168.189.130 -Djava.net.preferIPv4Stack=true\" &gt;&gt;kf-server.env
echo JMX_PORT=29999 &gt;&gt;kf-server.env</code></pre><p class="- topic/p p">创建 Kafka 的 <em class="+ topic/ph hi-d/i ph i">systemd service</em> 文件，<code class="+ topic/ph pr-d/codeph ph codeph">vim</code> 打开一个文件。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo vim /usr/lib/systemd/system/kafka-server.service</code></pre><p class="- topic/p p">录入以下内容，并保存。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>[Unit]
Description=Apache Kafka - broker
After=network.target confluent-zookeeper.target

[Service]
Type=forking
User=kafka
Group=kafka
EnvironmentFile=/KFDATA/kafka/etc/kf-server.env
ExecStart=/opt/kafka/bin/kafka-server-start.sh -daemon /KFDATA/kafka/etc/kafka-server.properties
ExecStop=/KFDATA/kafka/bin/kafka-server-stop.sh
LimitNOFILE=1000000
TimeoutStopSec=180
Restart=no

[Install]
WantedBy=multi-user.target</code></pre><p class="- topic/p p">重新加载 service 启动服务。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo systemctl daemon-reload</code></pre></div></article><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title11" id="1132-部署启动-kafka"><h5 class="- topic/title title topictitle5" id="ariaid-title11">1.1.3.2. 部署启动 Kafka</h5><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第一步：通过 systemctl 工具启动 Kafka 服务</strong></p><p class="- topic/p p">执行下述命令启动 Kafka 服务：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo systemctl start kafka-server.service</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第二步：查看 Kafka 启动情况</strong></p><p class="- topic/p p">检查 Kafka 启动情况，可以连接 Zookeeper 客户端。查看 zookeeper 中的数据。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /KFDATA/bin
./zkCon.sh
ls /</code></pre><p class="- topic/p p">可以看到 Zookeeper 中已经多了一些 kafka 注册信息，如 brokers、cluseter、config、controller 等。</p><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/08.png" alt="08"/><br/><p class="- topic/p p">此时，可以测试创建一个 topic 进行测试：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd  /opt/kafka/bin
./kafka-topics.sh --bootstrap-server 192.168.189.130:9092 --create --topic test110</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/09.png" alt="09"/><br/><p class="- topic/p p">执行下述代码，查看当前 Kafka 中 topic 列表：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./kafka-topics.sh --bootstrap-server 192.168.189.130:9092 --list</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/10.png" alt="10"/><br/><p class="- topic/p p">如果返回上述图片显示内容，说明 Kafka 已经启动成功。</p></div></article></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title12" id="114-部署-schema-registry"><h4 class="- topic/title title topictitle4" id="ariaid-title12">1.1.4. 部署 Schema-Registry</h4><div class="- topic/body body"><p class="- topic/p p">Schema-Registry 是用于注册传输数据的数据结构的。并记录数据结构改变的每一个版本。数据写入 Kafka 和从 Kafka 中读出都需要 schema-registry 中记录的数据结构来进行序列化和反序列化。通过使用 schema-registry 来注册数据结构。Kafka 中只需保存序列化后的数据即可。可以减少数据的空间占用。</p></div><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title13" id="1141-安装-schema-registry"><h5 class="- topic/title title topictitle5" id="ariaid-title13">1.1.4.1. 安装 Schema-Registry</h5><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第一步：解压安装 Schema-Registry 文件</strong></p><p class="- topic/p p">Schema-Registry 程序是 confluent 程序包中一部分。所以这里我们要安装 conluent，社区版本即可。解压缩 <em class="+ topic/ph hi-d/i ph i">confluent-community-7.4.0.tar.gz</em>，并修改文件名，设置隶属组。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /opt
sudo tar -xvf confluent-community-7.4.0.tar.gz
sudo mv confluent-7.4.0 confluent
sudo chown -R root:root confluent
sudo chmod -R 755 confluent</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第二步：准备 Schema-Registry 的配置文件和存储文件</strong></p><p class="- topic/p p">创建 schema-registry 的配置、日志文件存储路径。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>mkdir -p /KFDATA/schema-registry/etc
mkdir -p /KFDATA/schema-registry/logs</code></pre><p class="- topic/p p">准备 schema-registry 的配置文件。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /KFDATA/schema-registry/etc
cp /opt/confluent/etc/schema-registry/schema-registry.properties ./
cp /opt/confluent/etc/schema-registry/log4j.properties ./</code></pre><p class="- topic/p p">修改 <em class="+ topic/ph hi-d/i ph i">schema-registry.properties</em> 文件，修改连接的 Kafka Server 地址。</p><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/11.png" alt="11"/><br/><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第三步：准备 Schema-Registry 的启动文件</strong></p><p class="- topic/p p">创建 Schema-Registry 启动环境变量文件，用于 Schema-Registry 启动时使用。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>touch schema-registry.env
echo PATH="/usr/local/java/java17/bin:/opt/confluent/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin" &gt;schema-registry.env
echo LOG_DIR="/KFDATA/schema-registry/logs" &gt;&gt;schema-registry.env
echo LOG4J_DIR="/KFDATA/schema-registry/etc/log4j.properties" &gt;&gt;schema-registry.env
echo SCHEMA_REGISTRY_LOG4J_OPTS=\"-Dlog4j.configuration=file:/KFDATA/schema-registry/etc/log4j.properties\" &gt;&gt;schema-registry.env</code></pre><p class="- topic/p p">创建 Schema-Registry 的 systemd service 启动文件。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo vim /usr/lib/systemd/system/schema-registry.service</code></pre><p class="- topic/p p">录入以下内容并保存。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>[Unit]
Description=RESTful Avro schema registry for Apache Kafka
After=network.target

[Service]
Type=forking
User=kafka
Group=kafka
EnvironmentFile=/KFDATA/schema-registry/etc/schema-registry.env
ExecStart=/opt/confluent/bin/schema-registry-start -daemon /KFDATA/schema-registry/etc/schema-registry.properties
TimeoutStopSec=180
Restart=no

[Install]
WantedBy=multi-user.target</code></pre><p class="- topic/p p">重新加载 service 启动服务。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo systemctl daemon-reload</code></pre></div></article><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title14" id="1142-部署启动-schema-registry"><h5 class="- topic/title title topictitle5" id="ariaid-title14">1.1.4.2. 部署启动 Schema-Registry</h5><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第一步：通过 systemctl 工具启动 Schema-Registry 服务</strong></p><p class="- topic/p p">执行以下命令</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo systemctl start schema-registry</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第二步：查看 Schema-Registry 启动情况</strong></p><p class="- topic/p p">通过 systemctl 工具查看启动状态。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo systemctl status schema-registry</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/12.png" alt="12"/><br/><p class="- topic/p p">查看 Kafka 中的 topic</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /opt/kafka/bin
./kafka-topics.sh --bootstrap-server 192.168.189.130:9092 --list</code></pre><p class="- topic/p p">可以看到 kafka 中已经创建出了 schema-registry 需要使用的 topic</p><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/13.png" alt="13"/><br/><p class="- topic/p p">schema-registry 启动成功。</p></div></article></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title15" id="115-部署-kafka-connect"><h4 class="- topic/title title topictitle4" id="ariaid-title15">1.1.5. 部署 Kafka-Connect</h4><div class="- topic/body body"><p class="- topic/p p">Kafka-Connect 是 Kafka 提供的 HA 框架，实现了 Kafka-Connect 接口的 connector（连接器），只需处理自己需要进行读取、写入数据任务。高可用部分由 kafka-connect 框架负责。</p><p class="- topic/p p">Kafka-Connect 可用通过 rest api 进行访问。</p></div><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title16" id="1151-安装-kafka-connect"><h5 class="- topic/title title topictitle5" id="ariaid-title16">1.1.5.1. 安装 Kafka-Connect</h5><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第一步：Kafka-Connect 安装</strong></p><p class="- topic/p p">Kafka-Connect 由 Kafka 提供，启动程序在 Kafka 的安装路径下，已经存在。数据元数据注册由 schema-registry 处理。相应的序列化包在已安装 Confluent 路径下。故无需再安装程序包。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第二步：准备 Kafka-Connect 的配置文件和存储文件</strong></p><p class="- topic/p p">创建 Kafka-Connect 的配置、日志文件存储路径</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>mkdir -p /KFDATA/kafka-connect/etc
mkdir -p /KFDATA/kafka-connect/logs</code></pre><p class="- topic/p p">创建 Kafka-Connect 的配置文件</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /KFDATA/kafka-connect/etc
vim kafka-connect.properties</code></pre><p class="- topic/p p">录入以下内容并保存。ip 地址部分，需要视当前环境修改。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>bootstrap.servers=192.168.189.130:9092
group.id=connect-cluster

key.converter=io.confluent.connect.avro.AvroConverter
key.converter.schema.registry.url=http://192.168.189.130:8081
value.converter=io.confluent.connect.avro.AvroConverter
value.converter.schema.registry.url=http://192.168.189.130:8081
key.converter.schemas.enable=true
value.converter.schemas.enable=true

internal.key.converter=org.apache.kafka.connect.json.JsonConverter
internal.value.converter=org.apache.kafka.connect.json.JsonConverter
internal.key.converter.schemas.enable=false
internal.value.converter.schemas.enable=false

config.storage.topic=connect-configs
offset.storage.topic=connect-offsets
status.storage.topic=connect-statuses
config.storage.replication.factor=1
offset.storage.replication.factor=1
status.storage.replication.factor=1

plugin.path=/opt/confluent/share/java/plugin
rest.host.name=192.168.189.130
rest.port=8083
rest.advertised.host.name=192.168.189.130
rest.advertised.port=8083

offset.flush.timeout.ms=50000
offset.flush.interval.ms=10000
send.buffer.bytes=13107200
consumer.max.poll.records=10000
consumer.partition.assignment.strategy=org.apache.kafka.clients.consumer.CooperativeStickyAssignor</code></pre><p class="- topic/p p">创建 Kafka-Connect 的 log4j 配置文件。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /KFDATA/kafka-connect/etc
cp /opt/kafka/config/connect-log4j.properties ./log4j.properties</code></pre><p class="- topic/p p">修改文件中的以下参数配置</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>vim ./log4j.properties
log4j.appender.connectAppender.File=${kafka.logs.dir}/connect.log</code></pre><p class="- topic/p p">将其修改为</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>log4j.appender.connectAppender.File=/KFDATA/kafka-connect/logs/connect.log</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第三步：准备 Kafka-Connect 的启动文件</strong></p><p class="- topic/p p">创建 Kafka-Connect 启动环境变量文件。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /KFDATA/kafka-connect/etc
touch kafka-connect.env

echo PATH="/usr/local/java/java17/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin" &gt;kafka-connect.env
echo LOG_DIR="/KFDATA/kafka-connect/logs/" &gt;&gt;kafka-connect.env
echo LOG4J_DIR="/KFDATA/kafka-connect/etc/log4j.properties" &gt;&gt;kafka-connect.env
echo KAFKA_LOG4J_OPTS=\"-Dlog4j.configuration=file:/KFDATA/kafka-connect/etc/log4j.properties\" &gt;&gt;kafka-connect.env
echo CLASSPATH=/opt/confluent/share/java/schema-registry/*:/opt/confluent/share/java/kafka-serde-tools/*:/opt/confluent/share/java/confluent-common/* &gt;&gt;kafka-connect.env
echo JMX_PORT=29998 &gt;&gt;kafka-connect.env</code></pre><p class="- topic/p p">创建 Kafka-Connect 的 systemd service 文件</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo vim /usr/lib/systemd/system/kafka-connect.service</code></pre><p class="- topic/p p">录入以下内容，并保存。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>[Unit]
Description=Apache Kafka Connect - distributed
After=network.target

[Service]
Type=simple
User=kafka
Group=kafka
EnvironmentFile=/KFDATA/kafka-connect/etc/kafka-connect.env
ExecStart=/opt/kafka/bin/connect-distributed.sh /KFDATA/kafka-connect/etc/kafka-connect.properties
TimeoutStopSec=180
Restart=no

[Install]
WantedBy=multi-user.target</code></pre><p class="- topic/p p">重新加载 service 启动服务。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo systemctl daemon-reload</code></pre></div></article><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title17" id="1152-部署启动-kafka-connect"><h5 class="- topic/title title topictitle5" id="ariaid-title17">1.1.5.2. 部署启动 Kafka-Connect</h5><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第一步：通过 systemctl 工具启动 Kafka-Connect 服务</strong></p><p class="- topic/p p">执行以下命令</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo systemctl start kafka-connect.service</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第二步：查看 Kafka-Connect 启动情况</strong></p><p class="- topic/p p">通过 <code class="+ topic/ph pr-d/codeph ph codeph">jps</code> 命令查看启动情况</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>jps -mlvV |grep connect</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/14.png" alt="14"/><br/><p class="- topic/p p">查看 Kafka 中的 topic 情况，Kafka-Connect 会在 Kafka 中创建 connect-configs、connect-offsets、connect-statuses 三个 topic。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd  /opt/kafka/bin
./kafka-topics.sh --bootstrap-server 192.168.189.130:9092 --list</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/15.png" alt="15"/><br/><p class="- topic/p p">使用 <code class="+ topic/ph pr-d/codeph ph codeph">curl</code>  命令访问 kafka-connect，可以看到当前我们还没有配置 connector 任务</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code> curl -H "Accept:application/json" 192.168.189.130:8083/connectors/</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/16.png" alt="16"/><br/></div></article></article></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title18" id="12-部署-mysql-数据同步到-kafka"><h3 class="- topic/title title topictitle3" id="ariaid-title18">1.2. 部署 MySQL 数据同步到 Kafka</h3><div class="- topic/body body"><p class="- topic/p p">MySQL 的数据同步包括初始全量同步和 CDC 实时增量同步。</p><p class="- topic/p p">全量同步：将所选表的全部数据以 Insert 的方式写入 kafka，建议此时不要对数据库进行操作。</p><p class="- topic/p p">CDC 实时增量同步：从全量同步时记录的事务顺序号，实时读取 MySQL 的 <em class="+ topic/ph hi-d/i ph i">binlog</em> 日志，写入增量数据到 Kafka。</p></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title19" id="121-安装-debezium-mysql-连接器插件"><h4 class="- topic/title title topictitle4" id="ariaid-title19">1.2.1. 安装 Debezium-MySQL 连接器插件</h4><div class="- topic/body body"><p class="- topic/p p">配置启动 Debezium-MySQL 连接器，需要以下两步：</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">下载、安装 Debezium-MySQL 插件，并将插件路径配置到 Kafka Connect 配置文件中。</p></li><li class="- topic/li li"><p class="- topic/p p">重新启动 Kafka Connect 程序，以加载插件。</p></li></ol><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第一步：下载安装 Debezium-MySQL 插件</strong></p><p class="- topic/p p">官方网站 <a class="- topic/xref xref" href="https://debezium.io/" target="_blank" rel="external noopener">Debezium</a> ，选择最新稳定版本进行下载。</p><p class="- topic/p p">选择 MySQL Connector Plug-in</p><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/17.png" alt="17"/><br/><p class="- topic/p p">创建插件路径（部署 kafka，kafka-connnect 环境的 kafka 用户），在此路径下解压 Debezium 的 MySQL 插件包</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo mkdir -p /opt/confluent/share/java/plugin
cd /opt/confluent/share/java/plugin
sudo tar -xvf debezium-connector-mysql-2.3.2.Final-plugin.tar.gz
rm ./debezium-connector-mysql-2.3.2.Final-plugin.tar.gz</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第二步：配置 Kafka-Connect 加载插件</strong></p><p class="- topic/p p">修改 Kafka Connect 的配置文件，添加插件路径配置</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /KFDATA/kafka-connect/etc
vim kafka-connect.properties</code></pre><p class="- topic/p p">添加或修改参数 <em class="+ topic/ph hi-d/i ph i">plugin.path</em> 如下</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>plugin.path=/opt/confluent/share/java/plugin</code></pre><p class="- topic/p p">重新启动 Kafka Connect</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo systemctl stop kafka-connect
sudo systemctl start kafka-connect</code></pre><p class="- topic/p p">查看日志输出，如下图所示，则插件加载成功。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cat /KFDATA/kafka-connect/logs/connect.log|grep mysql</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/18.png" alt="18"/><br/></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title20" id="122-配置-mysql-数据库"><h4 class="- topic/title title topictitle4" id="ariaid-title20">1.2.2. 配置 MySQL 数据库</h4><div class="- topic/body body"><p class="- topic/p p">做为 Source 数据库，我们基于 MySQL 的 <em class="+ topic/ph hi-d/i ph i">binlog</em> 来获取实时的增量数据，所以需要对 MySQL 数据库做一些设置。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第一步：创建数据同步用的 MySQL 用户</strong></p><p class="- topic/p p">Debezium MySQL 连接器需要 MySQL 用户帐户。此 MySQL 用户必须对 Debezium MySQL 连接器捕获更改的所有数据库拥有适当的权限。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>CREATE USER 'datasyn'@'%' IDENTIFIED BY '1234';</code></pre><p class="- topic/p p">授予权限。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>GRANT SELECT, RELOAD, SHOW DATABASES, REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO 'datasyn';</code></pre><p class="- topic/p p">刷新授权表。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>FLUSH PRIVILEGES;</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第二步：设置 MySQL 参数</strong></p><p class="- topic/p p">进行 CDC 同步，需要对 MySQL 数据库进行一些设置。</p><div class="table-container"><table class="- topic/table table" data-cols="4"><caption></caption><colgroup><col/><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="122-配置-mysql-数据库__entry__1"><strong class="+ topic/ph hi-d/b ph b">参数</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="122-配置-mysql-数据库__entry__2"><strong class="+ topic/ph hi-d/b ph b">值</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="122-配置-mysql-数据库__entry__3" colspan="2"><strong class="+ topic/ph hi-d/b ph b">说明</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__1">server-id</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__2">1</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__3" colspan="2">MySQL 集群中用于标识一个 MySQL 服务器实例。可以自行调整设置。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__1">log-bin</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__2">mysql-bin</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__3" colspan="2">设置启用二进制日志功能，并指定日志文件名及存储位置。可自行调整设置。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__1">binlog_format</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__2">ROW</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__3" colspan="2">必须 <em class="+ topic/ph hi-d/i ph i">binlog-format</em>设置为 ROW 或 row。连接 MySQL 级联复制实例时，链路内每个实例环节都要设置。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__1">binlog_row_image</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__2">FULL</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__3" colspan="2">必须 <em class="+ topic/ph hi-d/i ph i">binlog_row_image</em>设置为 FULL 或 full。连接 MySQL 级联复制实例时，链路内每个级联实例环节都要设置。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__1">gtid_mode</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__2">ON</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__3" colspan="2">设置开启全局事务标识</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__1">enforce_gtid_consistency</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__2">ON</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__3" colspan="2">设置强制执行 GTID 一致性</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__1">expire_logs_days</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__2">3</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__3" colspan="2">设置 MySQL 日志保留时间，MySQL 的 CDC 数据同步需要有对应日志文件才能进行同步。推荐至少设置保留 3 天。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__1">binlog_row_value_options</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__2">““</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="122-配置-mysql-数据库__entry__3" colspan="2"><strong class="+ topic/ph hi-d/b ph b">此变量不能设置为 PARTIAL_JSON</strong></td></tr></tbody></table></div><p class="- topic/p p">参数参考代码：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>[mysqld]
server-id = 1

log_bin=mysql-bin
binlog_format=ROW
binlog_row_image=FULL
binlog_row_value_options=""

gtid_mode=ON
enforce_gtid_consistency=ON

expire_logs_days=3</code></pre></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title21" id="123-配置-mysql-数据同步连接任务"><h4 class="- topic/title title topictitle4" id="ariaid-title21">1.2.3. 配置 MySQL 数据同步连接任务</h4><div class="- topic/body body"><p class="- topic/p p">配置同步任务的及检查的很多命令都要带上 <em class="+ topic/ph hi-d/i ph i">url</em> 等参数。为了操作快捷，封装了一些加载配置文件的操作脚本，<a class="- topic/xref xref" href="script/Debezium_and_Kafka_data_sync/kafka-tools.tar">kafka-tools.tar</a>。下载当前包，解压缩到 /KFDATA 目录下。后续的很多操作，检查 Kafka 的 topic，查看数据。配置同步任务等都会使用 kafka-tools 包中的脚本。请务必配置。包中的脚本都可以无参数运行，会输出 help。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /KFDATA
sudo tar -xvf kafka-tools.tar
sudo chown kafka:kafka kafka-tools
rm ./kafka-tools.tar</code></pre><p class="- topic/p p">修改 kafka-tools/config/config.properties 配置参数。</p><p class="- topic/p p">按照本机的路径、IP 等对应修改 Kafka、Kafka_Connect 的启动 IP 地址，以及安装目录。</p></div><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title22" id="1231-准备-mysql-数据库表"><h5 class="- topic/title title topictitle5" id="ariaid-title22">1.2.3.1. 准备 MySQL 数据库表</h5><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第一步：创建一个数据库</strong></p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>create database basicinfo;</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第二步：创建两张表，并插入一些数据</strong></p><p class="- topic/p p">创建表 1 <em class="+ topic/ph hi-d/i ph i">index_components</em>，主键字段 4 个。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>use basicinfo;
CREATE TABLE `index_components` (
  `trade_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `code` varchar(20) NOT NULL,
  `effDate` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `indexShortName` varchar(20) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci DEFAULT NULL,
  `indexCode` varchar(20) NOT NULL,
  `secShortName` varchar(20) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci DEFAULT NULL,
  `exchangeCD` varchar(4) CHARACTER SET utf8mb3 COLLATE utf8mb3_general_ci DEFAULT NULL,
  `weight` decimal(26,6) DEFAULT NULL,
  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `flag` int NOT NULL DEFAULT '1',
  PRIMARY KEY `index_components_pkey` (`trade_date`,`code`,`indexCode`,`flag`)
)ENGINE=InnoDB DEFAULT CHARSET=utf8mb4; </code></pre><p class="- topic/p p">插入 4 条 数据</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>insert into index_components (trade_date,code,effdate,indexShortName,indexCode,secShortName,exchangeCD,weight,timestamp,flag)
values('2006-11-30','000759','2018-06-30 03:48:05','中证500','000905','中百集团','XSHE',0.0044,'2018-06-30 05:43:05',1),
('2006-11-30','000759','2018-06-30 04:47:05','中证500','000906','中百集团','XSHE',0.0011,'2018-06-30 05:48:06',1),
('2006-11-30','600031','2018-06-30 05:48:05','上证180','000010','三一重工','XSHG',0.0043,'2018-06-30 05:48:05',1),
('2006-11-30','600031','2018-06-30 06:48:02','沪深300','000300','三一重工','XSHG',0.0029,'2018-06-30 05:48:05',1);</code></pre><p class="- topic/p p">创建表 2  <em class="+ topic/ph hi-d/i ph i">stock_basic</em> ，主键字段 2 个。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>CREATE TABLE `stock_basic` (
  `id` bigint NOT NULL ,
  `ts_code` varchar(20) NOT NULL,
  `symbol` varchar(20) DEFAULT NULL,
  `name` varchar(20) DEFAULT NULL,
  `area` varchar(20) DEFAULT NULL,
  `industry` varchar(40) DEFAULT NULL,
  `list_date` date DEFAULT NULL,
  PRIMARY KEY (`id`,`ts_code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;</code></pre><p class="- topic/p p">插入 3 条数据；</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>insert into stock_basic(id,ts_code,symbol,name,area,industry,list_date)
values (1,'000001.SZ','000001','平安银行','深圳','银行','1991-04-03'),
(2,'000002.SZ','000002','万科A','深圳','地产','1991-01-29'),
(3,'000004.SZ','000004','ST国华','深圳','软件服务','1991-01-14')</code></pre></div></article><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title23" id="1232-准备连接器配置文件并启动连接任务"><h5 class="- topic/title title topictitle5" id="ariaid-title23">1.2.3.2. 准备连接器配置文件，并启动连接任务</h5><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第一步：准备 MySQL 同步任务配置文件</strong></p><p class="- topic/p p">创建连接 MySQL 的 source 连接器配置文件。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>mkdir /KFDATA/datasyn-config
cd /KFDATA/datasyn-config
vim source-mysql.json</code></pre><p class="- topic/p p">录入以下配置，hostname 和 kafka 启动地址需对应修改。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>{
    "name": "basicinfo-connector",
    "config":{
        "connector.class": "io.debezium.connector.mysql.MySqlConnector",
        "tasks.max": "1",
        "topic.prefix":"mysqlserver",
        "database.hostname": "192.168.189.130",
        "database.port": "3306",
        "database.user": "datasyn",
        "database.password": "1234",
        "database.server.id": "2223314",
        "database.include.list": "basicinfo",
        "schema.history.internal.kafka.bootstrap.servers": "192.168.189.130:9092",
        "schema.history.internal.kafka.topic": "schema-changes.basicinfo",
        "heartbeat.interval.ms":"20000"
    }
}</code></pre><p class="- topic/p p">参数说明：以上参数为必填参数。更多详细参数说明可以参看
<a class="- topic/xref xref" href="https://debezium.io/documentation/reference/2.3/connectors/mysql.html#mysql-connector-properties" target="_blank" rel="external noopener">Debezium connector for MySQL :: Debezium Documentation</a></p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="1232-准备连接器配置文件并启动连接任务__entry__1"><strong class="+ topic/ph hi-d/b ph b">参数名称</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="1232-准备连接器配置文件并启动连接任务__entry__2"><strong class="+ topic/ph hi-d/b ph b">默认值</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="1232-准备连接器配置文件并启动连接任务__entry__3"><strong class="+ topic/ph hi-d/b ph b">参数说明</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__1">connector.class</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__2">无</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__3">连接器的 Java 类的名称。这里是 mysql 的连接器类名。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__1">tasks.max</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__2">1</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__3">当前 connector 的最大并行任务数。mysql 的 source 连接器任务数只能是 1。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__1">topic.prefix</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__2">无</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__3">当前 connector 同步写入任务的命名空间。会被用于添加到同步表对应 topic 名称前等</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__1">database.hostname</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__2">无</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__3">MySQL 数据库服务器的 IP 地址或主机名。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__1">database.port</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__2">3306</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__3">MySQL 数据库服务器的整数端口号。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__1">database.user</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__2">无</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__3">MySQL 数据库服务器连接用户。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__1">database.password</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__2">无</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__3">MySQL 数据库服务器连接用户密码。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__1">database.server.id</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__2">无</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__3">用来模拟 MySQL 隶属进程的进程号。同步程序会以此数字 ID 加入 MySQL 集群。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__1">database.influde.list</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__2">无</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__3">匹配的数据库名。可以多个，用逗号分割即可。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__1">schema.history.internal.kafka.bootstrap.servers</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__2">无</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__3">数据同步记录 MySQL 的表结构信息的 kafka 连接</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__1">schema.history.internal.kafka.topic</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__2">无</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__3">数据同步记录 MySQL 表结构的 topic 名称</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__1"><a class="- topic/xref xref" href="http://heartbeat.interval.ms/" target="_blank" rel="external noopener">heartbeat.interval.ms</a></td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__2">0</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1232-准备连接器配置文件并启动连接任务__entry__3">当接到 MySQL 更改事件时，保证触发记录 <em class="+ topic/ph hi-d/i ph i">binlog</em> 事务位置或者 gtid 的间隔事件。（如果此值为 0 时，接收到不属于数据同步表的改变事件时，不会记录事务位置，可能导致当前记录的同步事务号大幅度落后 MySQL 的最新事务号）。</td></tr></tbody></table></div><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第二步：启动 MySQL 的数据同步任务</strong></p><p class="- topic/p p">通过 rest api 启动 MySQL 的 source 连接器</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>curl -i -X POST -H "Accept:application/json" -H  "Content-Type:application/json" http://192.168.189.130:8083/connectors/ -d @/KFDATA/datasyn-config/source-mysql.json</code></pre><p class="- topic/p p">也可以通过我们提供 kafka-tools 中的脚本启动，操作能简单一些</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /KFDATA/kafka-tools/bin
./rest.sh create @/KFDATA/datasyn-config/source-mysql.json</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第三步：查看 MySQL 数据同步任务状态</strong></p><p class="- topic/p p">查看同步任务列表。<em class="+ topic/ph hi-d/i ph i">list</em> 参数展示任务名列表，<em class="+ topic/ph hi-d/i ph i">showall</em> 参数会显示全部同步任务状态。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./rest.sh list
./rest.sh showall</code></pre><p class="- topic/p p">通过下图可以看到，connector 和 task 的状态都是 RUNNING，当前同步任务状态正常。</p><p class="- topic/p p">说明：每个同步任务会有一个 connector，可以多个 task。</p><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/19.png" alt="19"/><br/><p class="- topic/p p">使用 kafka-tools 的脚本 <em class="+ topic/ph hi-d/i ph i">kafka.sh</em> 查看 kafka 中的 topic</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /KFDATA/kafka-tools/bin
./kafka.sh tplist|grep mysqlserver</code></pre><p class="- topic/p p">下图中的 topic [mysqlserver.basicinfo.index_components] 即为我们的表 <em class="+ topic/ph hi-d/i ph i">basicinfo.index_components</em> 数据在 kafka 中的存储</p><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/20.png" alt="20"/><br/><p class="- topic/p p">查看 topic  [mysqlserver.basicinfo.index_components] 中的数据条数。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./kafka.sh get_offsets mysqlserver.basicinfo.index_components</code></pre><p class="- topic/p p">kafka 中已经同步了 MySQL 表 <em class="+ topic/ph hi-d/i ph i">basicinfo.index_components</em> 的 4 条数据。</p><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/21.png" alt="21"/><br/><p class="- topic/p p">说明：在同步 MySQL 的初始快照数据时，不能中断。否则必须清理全部已同步数据，重新开始。即初始快照数据不支持断点续传。</p></div></article></article></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title24" id="13-部署-kafka-数据同步到-dolphindb"><h3 class="- topic/title title topictitle3" id="ariaid-title24">1.3. 部署 Kafka 数据同步到 DolphinDB</h3><div class="- topic/body body"></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title25" id="131-安装-kafka-dolphindb-连接器"><h4 class="- topic/title title topictitle4" id="ariaid-title25">1.3.1. 安装 Kafka-DolphinDB 连接器</h4><div class="- topic/body body"><p class="- topic/p p">配置启动 Kafka-DolphinDB 连接器插件，需要以下两步：</p><ol class="- topic/ol ol"><li class="- topic/li li">安装 Kafka-DolphinDB 插件，并将插件路径配置到 Kafka Connect 配置文件中。</li><li class="- topic/li li">重新启动 Kafka Connect 程序，以加载插件。</li></ol><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第一步：下载 Kafka-DolphinDB 插件</strong></p><ul class="- topic/ul ul"><li class="- topic/li li"><a class="- topic/xref xref" href="plugin/Debezium_and_Kafka_data_sync/jdbc-1.30.22.4-ddbsync.Beta1.jar">jdbc-1.30.22.4-ddbsync.Beta1.jar</a>：该 DolphinDB JDBC 包为数据同步做了一些专门修改，后续会同步到主分支上。</li><li class="- topic/li li"><a class="- topic/xref xref" href="plugin/Debezium_and_Kafka_data_sync/kafka-connect-jdbc-10.7.4-ddb1.01.Beta1.jar">kafka-connect-jdbc-10.7.4-ddb1.01.Beta1.jar</a>：基于 kafka-connect-jdbc-10.7.4 开发，添加了 DolphinDB 连接器。</li></ul><p class="- topic/p p">创建插件路径（部署 Kafka，Kafka-Connnect 环境的 kafka 用户），在此路径下放置 Kafka-DolphinDB 插件包，上面两个包都要放到此目录下。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo mkdir -p /opt/confluent/share/java/plugin/kafka-connect-jdbc</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第二步：配置 Kafka-Connect 加载插件</strong></p><p class="- topic/p p">Kafka-DolphinDB 插件包的父路径与前文 Debezium-MySQL 连接器插件路径均为 /opt/confluent/share/java/plugin/，因此无需再次配置到 Kafka-Connect 的配置文件中。</p><p class="- topic/p p">如果路径不一致，可以在 <em class="+ topic/ph hi-d/i ph i">kafka-connect.properties</em> 中的 <em class="+ topic/ph hi-d/i ph i">plugin.path</em> 参数里配置，以逗号分隔。</p><p class="- topic/p p">查看 <em class="+ topic/ph hi-d/i ph i">plugin.path</em> 参数配置：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cat /KFDATA/kafka-connect/etc/kafka-connect.properties |grep plugin</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/22.png" alt="22"/><br/><p class="- topic/p p">重新启动 Kafka Connect：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo systemctl stop kafka-connect
sudo systemctl start kafka-connect</code></pre><p class="- topic/p p">查看日志输出</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cat /KFDATA/kafka-connect/logs/connect.log|grep JdbcSinkConnector</code></pre><p class="- topic/p p">出现下图中所示信息时，说明插件加载成功。</p><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/23.png" alt="23"/><br/></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title26" id="132-dolphindb-的数据同步准备"><h4 class="- topic/title title topictitle4" id="ariaid-title26">1.3.2. DolphinDB 的数据同步准备</h4><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第一步：创建同步的库、表</strong></p><p class="- topic/p p">要求：当前支持数据同步，需要依赖 TSDB 引擎的 <em class="+ topic/ph hi-d/i ph i">keepDuplicates</em> = LAST 数据来保证数据写入的幂等性，即发生数据重复时，两次及以上的相同增量数据写入，不影响数据的一致性。所以需要满足以下条件：</p><ol class="- topic/ol ol"><li class="- topic/li li">DolphinDB 的表必须是 TSDB 引擎且设置 <em class="+ topic/ph hi-d/i ph i">keepDuplicates</em> = LAST。</li><li class="- topic/li li">TSDB 引擎目前不支持单字段 <em class="+ topic/ph hi-d/i ph i">sortColumn</em> 设置 <em class="+ topic/ph hi-d/i ph i">keepDuplicates</em>= LAST，所以同步的 MySQL 目标表主键必 须是 2 个及以上字段。。</li><li class="- topic/li li"><em class="+ topic/ph hi-d/i ph i">sortColumn</em> 最后的字段必须是时间或者数字。对应的 MySQL 目标表主键字段必须包含时间或数字。</li></ol><p class="- topic/p p">分别创建之前 MySQL 中两张表的对应表：</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">创建 MySQL 表 <em class="+ topic/ph hi-d/i ph i">basicinfo.index_components</em>的 DolphinDB 对应分布式表表 <em class="+ topic/ph hi-d/i ph i">dfs://index_data.index_components</em></p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>def createIndexComDB(dbName){
if(existsDatabase(dbName)){
dropDatabase(dbName)
}
database(directory=dbName, partitionType=RANGE, partitionScheme= 1999.01M + (0..26)*12,engine="TSDB")
}
def createIndexCom(dbName,tbName){
db=database(dbName)
            if(existsTable(dbName, tbName)){
                db.dropTable(tbName) 
}
mtable=table(100:0, `trade_date`code`effDate`indexShortName`indexCode`secShortName`exchangeCD`weight`timestamp`flag, [TIMESTAMP,SYMBOL,TIMESTAMP,SYMBOL,SYMBOL,SYMBOL,SYMBOL,DOUBLE,TIMESTAMP,INT]);
db.createPartitionedTable(table=mtable, tableName=tbName, partitionColumns=`trade_date,sortColumns=`code`indexCode`flag`trade_date,compressMethods={trade_date:"delta"},keepDuplicates=LAST)
}
createIndexComDB("dfs://index_data")
createIndexCom("dfs://index_data",`index_components)</code></pre></li><li class="- topic/li li"><p class="- topic/p p">创建 MySQL 表 <em class="+ topic/ph hi-d/i ph i">basicinfo.stock_basic</em> 的 DolphinDB 对应分布式表 <em class="+ topic/ph hi-d/i ph i">dfs://wddb.stock_basic</em></p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>def createStockBasicDB(dbName){
if(existsDatabase(dbName)){
dropDatabase(dbName)
}
db=database(directory=dbName, partitionType=HASH, partitionScheme=[LONG, 1],engine="TSDB")
}
def createStockBasic(dbName,tbName){
db=database(dbName)
            if(existsTable(dbName, tbName)){
                db.dropTable(tbName) 
}
            mtable=table(100:5, `id`ts_code`symbol`name`area`industry`list_date, [LONG,SYMBOL,SYMBOL,SYMBOL,SYMBOL,SYMBOL,DATE]);
db.createPartitionedTable(table=mtable, tableName=tbName, partitionColumns=`id,sortColumns=`ts_code`id,keepDuplicates=LAST,sortKeyMappingFunction=[hashBucket{,100}])
}
createStockBasicDB("dfs://wddb")
createStockBasic("dfs://wddb", `stock_basic)</code></pre></li></ol><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第二步：配置同步配置表</strong></p><p class="- topic/p p">DolphinDB 做为数据的接收端，本身无需做数据库上的额外设置，按正常使用配置即可。但由于 DolphinDB 中的数据存储表通常以分布式表为主，且分布式表是按照分区规则放置在不同的库名下，不同库名下的表是支持重名的。所以需要提供对于 DolphinDB 中表的同步配置信息。</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">在 DolphinDB 中创建一张配置表。库、表名可在后续操作中调整，但是表中字段名要保持一致。</p><ul class="- topic/ul ul"><li class="- topic/li li">数据库名：<em class="+ topic/ph hi-d/i ph i">dfs://ddb_sync_config</em></li><li class="- topic/li li">表名：<em class="+ topic/ph hi-d/i ph i">sync_config</em></li></ul><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>dbName = "dfs://ddb_sync_config"
if(existsDatabase(dbName)){
    dropDatabase(dbName)
}
db=database(dbName, HASH, [SYMBOL, 5])

if(existsTable(dbName, "sync_config"))
    db.dropTable("sync_config")
mtable=table(100:0, `connector_name`topic_name`target_db`target_tab, [SYMBOL,SYMBOL,SYMBOL,SYMBOL]);
db.createTable(table=mtable, tableName="sync_config")</code></pre></li><li class="- topic/li li"><p class="- topic/p p">插入配置表信息，配置 MySQL 表 <em class="+ topic/ph hi-d/i ph i">basicinfo.index_components</em> 和 <em class="+ topic/ph hi-d/i ph i">basicinfo.stock_basic</em> 对应的 kafka 中 topic 名称对应的 DolphinDB 分布式表</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sync_config=loadTable("dfs://ddb_sync_config","sync_config");
tmp_tab=table(100:0,`connector_name`topic_name`target_db`target_tab, [SYMBOL,SYMBOL,SYMBOL,SYMBOL]);
insert into tmp_tab (connector_name,topic_name,target_db,target_tab) values ("ddb-sink","mysqlserver.basicinfo.index_components","dfs://index_data","index_components");
insert into tmp_tab (connector_name,topic_name,target_db,target_tab) values ("ddb-sink","mysqlserver.basicinfo.stock_basic","dfs://wddb","stock_basic");
sync_config.append!(tmp_tab);</code></pre><p class="- topic/p p">表中数据如下：</p><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/24.png" alt="24"/><br/><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>：对于同一个 connector_name，相同的 <em class="+ topic/ph hi-d/i ph i">topic_name</em> 只能配置一条数据。配置分布式库、表必须在 DolphinDB 书库中存在。</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="132-dolphindb-的数据同步准备__entry__1"><strong class="+ topic/ph hi-d/b ph b">字段名</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="132-dolphindb-的数据同步准备__entry__2"><strong class="+ topic/ph hi-d/b ph b">类型</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="132-dolphindb-的数据同步准备__entry__3"><strong class="+ topic/ph hi-d/b ph b">字段作用</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="132-dolphindb-的数据同步准备__entry__1">connector_name</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="132-dolphindb-的数据同步准备__entry__2">Symbol</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="132-dolphindb-的数据同步准备__entry__3">配置的 DolphinDB sink 同步任务名</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="132-dolphindb-的数据同步准备__entry__1">topic_name</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="132-dolphindb-的数据同步准备__entry__2">Symbol</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="132-dolphindb-的数据同步准备__entry__3">要同步的 kafka topic 名称</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="132-dolphindb-的数据同步准备__entry__1">target_db</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="132-dolphindb-的数据同步准备__entry__2">Symbol</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="132-dolphindb-的数据同步准备__entry__3">对应的 DolphinDB 分布式库名</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="132-dolphindb-的数据同步准备__entry__1">target_tab</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="132-dolphindb-的数据同步准备__entry__2">Symbol</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="132-dolphindb-的数据同步准备__entry__3">对应的 DolphinDB 分布式表名</td></tr></tbody></table></div></li></ol></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title27" id="133-配置-dolphindb-的数据同步连接任务"><h4 class="- topic/title title topictitle4" id="ariaid-title27">1.3.3. 配置 DolphinDB 的数据同步连接任务</h4><div class="- topic/body body"></div><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title28" id="1331-准备连接器配置文件并启动连接任务"><h5 class="- topic/title title topictitle5" id="ariaid-title28">1.3.3.1. 准备连接器配置文件，并启动连接任务</h5><div class="- topic/body body"><p class="- topic/p p">创建 DolphinDB 数据同步任务配置文件</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /KFDATA/datasyn-config
vim ddb-sink.json</code></pre><p class="- topic/p p">配置如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>{
    "name": "ddb-sink",
    "config": {
        "connector.class": "io.confluent.connect.jdbc.JdbcSinkConnector",
        "tasks.max": "2",
        "topics": "mysqlserver.basicinfo.index_components,mysqlserver.basicinfo.stock_basic",
        "connection.url": "jdbc:dolphindb://192.168.189.130:8848?user=admin&amp;password=123456",
        "transforms": "unwrap",
        "transforms.unwrap.type": "io.debezium.transforms.ExtractNewRecordState",
        "transforms.unwrap.drop.tombstones": "false",
        "auto.evolve": "false",
        "insert.mode": "insert",
        "delete.enabled": "true",
        "batch.size":"10000",
        "pk.mode": "record_key",
        "ddbsync.config.table":"dfs://ddb_sync_config,sync_config"
    }
}</code></pre><p class="- topic/p p">参数说明：以上参数项为同步 DolphinDB 所需参数。如果对 Confluent 的 JDBC Sink Connect 有经验，可适当调节。</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="1331-准备连接器配置文件并启动连接任务__entry__1"><strong class="+ topic/ph hi-d/b ph b">参数名称</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="1331-准备连接器配置文件并启动连接任务__entry__2"><strong class="+ topic/ph hi-d/b ph b">默认值</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="1331-准备连接器配置文件并启动连接任务__entry__3"><strong class="+ topic/ph hi-d/b ph b">参数说明</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__1">name</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__2">无</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__3">同步任务名称，不可重复。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__1">connector.class</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__2">无</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__3">连接器的 Java 类的名称。这里是 JdbcSink 的通用连接器类名。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__1">tasks.max</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__2">1</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__3">当前 connector 的最大并行任务数。可以调节增大，会创建多 consumer 并行消费读取 Kafka 中数据。一般的数据同步场景设置到 10 基本可以满足同步速度上的需求。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__1">topics</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__2">无</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__3">配置要同步的 Kafka 中的 topic 名称，配置多个 topic 时用逗号分割。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__1">connection.url</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__2">无</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__3">MySQL 数据库服务器的 IP 地址或主机名。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__1">transforms</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__2">无</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__3">声明数据转换操作。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__1">transforms.unwrap.type</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__2">无</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__3">声明数据转换器类别。请保持不变。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__1">transforms.unwrap.drop.tombstones</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__2">false</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__3">声明是否删除 Kafka 中的墓碑数据。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__1">auto.evolve</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__2">true</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__3">当 DolphinDB 中缺少列时，是否自动增加列。当前不支持自动增加列，必须配置为 false。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__1">insert.mode</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__2">insert</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__3">数据插入模式。当前只支持 insert 模式。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__1">pk.mode</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__2">none</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__3">主键模式。必须设置为 record_key。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__1">delete.enabled</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__2">false</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__3">在主键模式为 record_key 情况下。对于 null 值 record 是否按照 delete 进行操作。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__1">batch.size</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__2">3000</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__3">设置在数据量足够大时。以每批最大多少条来写入到目标数据库。注意：当该值大于 Connect worker 中设置的 <em class="+ topic/ph hi-d/i ph i">consumer.max.pol.records</em> 时，每次提交数量会受 <em class="+ topic/ph hi-d/i ph i">consumer.max.pol.records</em> 的值限制。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__1">ddbsync.config.table</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__2">dfs://ddb_sync_config, sync_config</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="1331-准备连接器配置文件并启动连接任务__entry__3">Kafka 中的 topic 对应 DolphinDB 表的配置表名称。可以自行定义库、表名称。但表中的字段要保持一致。表结构见“DolphinDB 的数据同步准备”。</td></tr></tbody></table></div><p class="- topic/p p">通过 REST API 启动 source 连接器</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>curl -i -X POST -H "Accept:application/json" -H  "Content-Type:application/json" http://192.168.189.130:8083/connectors/ -d @ddb-sink.json</code></pre><p class="- topic/p p">也可以通过我们提供 <em class="+ topic/ph hi-d/i ph i">kafka-tools</em> 中的脚本启动</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>cd /KFDATA/kafka-tools/bin
./rest.sh create @/KFDATA/datasyn-config/ddb-sink.json</code></pre><p class="- topic/p p">查看同步任务列表。其中，”ddb-sink”为 DolphinDB 数据同步程序。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./rest.sh list</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/25.png" alt="25"/><br/><p class="- topic/p p">查看 DolphinDB 的 sink 同步任务状态</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./rest.sh status ddb-sink</code></pre><p class="- topic/p p">通过下图可以看到，同步到 DolphinDB 的同步任务包含 1 个 connector 和 2 个 task。两个 task 状态都是 RUNNING，即正常运行。这里配置了两个线程进行数据消费，并写入 DolphinDB。</p><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/26.png" alt="26"/><br/><p class="- topic/p p">查看 DolphinDB 中的数据</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>select * from loadTable('dfs://index_data', 'index_components');
select * from loadTable('dfs://wddb', 'stock_basic')</code></pre><p class="- topic/p p">数据分别如下，两张表的初始数据均已经同步到了 DolphinDB 中。</p><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/27.png" alt="27"/><br/><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/28.png" alt="28"/><br/></div></article><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title29" id="1332-实时数据同步验证"><h5 class="- topic/title title topictitle5" id="ariaid-title29">1.3.3.2. 实时数据同步验证</h5><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第一步：插入新数据</strong></p><p class="- topic/p p">在 MySQL 中插入两条新数据。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>insert into basicinfo.index_components (trade_date,code,effdate,indexShortName,indexCode,secShortName,exchangeCD,weight,timestamp,flag)
values
('2006-11-30','600051','2018-06-30 05:48:05','上证180','000010','三一重工','XXXB',0.0043,'2018-06-30 05:48:05',1),
('2006-11-30','600052','2018-06-30 06:48:02','沪深300','000300','三一重工','XSHG',0.0029,'2018-06-30 05:48:05',1)</code></pre><p class="- topic/p p">在 DolphinDB 中进行查询，可以看到已经多了两条 code 值为  600051 和 600052 的。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>select * from loadTable('dfs://index_data', 'index_components');</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/29.png" alt="29"/><br/><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第二步：数据更新</strong></p><p class="- topic/p p">在 MySQL 中更新一条数据，这里我们做一个涉及主键字段的更新。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>update basicinfo.index_components set code='600061' where code ='600051'</code></pre><p class="- topic/p p">在 DolphinDB 中进行查询，发现表中已经不存在 code 值为 600051 的数据，但可以看到一条 code 值为 600061 的数据。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>select * from loadTable('dfs://index_data', 'index_components');</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/30.png" alt="30"/><br/><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">第三步：数据删除</strong></p><p class="- topic/p p">从 MySQL 中删除一条数据。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>delete from basicinfo.index_components where code='600061'</code></pre><p class="- topic/p p">在 DolphinDB 中进行查询，可以看到 code 值为 600061 的数据已经不存在了。</p><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/31.png" alt="31"/><br/></div></article></article></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title30" id="14-运维操作"><h3 class="- topic/title title topictitle3" id="ariaid-title30">1.4. 运维操作</h3><div class="- topic/body body"></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title31" id="141-dolphindb-同步须知"><h4 class="- topic/title title topictitle4" id="ariaid-title31">1.4.1. DolphinDB 同步须知</h4><div class="- topic/body body"><ol class="- topic/ol ol"><li class="- topic/li li">DolphinDB 是一款支持海量数据的分布式时序数据库。针对不同的数据处理需求，在底层架构上天然上与通常的关系型数据库不同。所以需要有以下限制：</li></ol><ul class="- topic/ul ul"><li class="- topic/li li">DolphinDB 的表没有主键设计，需要设置成 <em class="+ topic/ph hi-d/i ph i">sortColumn</em> 字段，并设置 <em class="+ topic/ph hi-d/i ph i">keepDuplicates</em> = LAST 来进行去重，确保数据唯一。</li><li class="- topic/li li">DolphinDB 表采用 TSDB 引擎，才可以设置 <em class="+ topic/ph hi-d/i ph i">sortColumn</em>。</li><li class="- topic/li li">DolphinDB 中 TSDB 引擎的 <em class="+ topic/ph hi-d/i ph i">sortColumn</em> 中必须要有时间列或者数字列，对应的来源主键则必须包含同样类型字段。</li><li class="- topic/li li">DolphinDB 中 TSDB 引擎的 <em class="+ topic/ph hi-d/i ph i">sortColumn</em> 中必须要有至少两个字段，才能设置  <em class="+ topic/ph hi-d/i ph i">keepDuplicates</em> = LAST，所以对应的来源表主键必须是 2 个字段及以上。</li></ul><ol class="- topic/ol ol"><li class="- topic/li li">DDL 语句相关：</li></ol><ul class="- topic/ul ul"><li class="- topic/li li">当前不支持 DDL 语句同步。</li><li class="- topic/li li">当前不支持同时修改两边表后的数据传递。</li></ul></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title32" id="142-部署检查"><h4 class="- topic/title title topictitle4" id="ariaid-title32">1.4.2. 部署检查</h4><div class="- topic/body body"><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">查看当前服务是否都在运行状态</strong>：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>sudo systemctl list-units |egrep 'zookeeper|kafka-server|schema-registry|kafka-connect'</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/32.png" alt="32"/><br/><p class="- topic/p p">也可以使用 Jps 等其他方法快速查看 Java 进程。</p></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">运行以下命令查看当前的同步任务列表查询</strong>：</p><p class="- topic/p p">查看当前有哪些同步任务：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./rest.sh list</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/33.png" alt="33"/><br/></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">查看某个同步任务的状态</strong>：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./rest.sh status ddb-sink</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/34.png" alt="34"/><br/></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">暂停同步任务，该操作会停止当前整体 connector 同步任务</strong>：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./rest.sh c_pause ddb-sink</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/35.png" alt="35"/><br/></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">恢复同步任务</strong>：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./rest.sh c_resume ddb-sink</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/36.png" alt="36"/><br/><p class="- topic/p p">对于曾经由于数据库报错一度暂停的同步任务，在错误消除后，只要 connector 运行正常，可以通过以下命令使其恢复同步：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./rest.sh t_restart ${connector_name} ${task_id}</code></pre></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">修改同步任务配置参数</strong>：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./rest c_alter ${connector_name} @source_config.json</code></pre><p class="- topic/p p">修改参数时，只需传递参数，不需要带有 connector name，格式示例如下：</p><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/37.png" alt="37"/><br/></li></ol></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title33" id="143-数据同步情况检查"><h4 class="- topic/title title topictitle4" id="ariaid-title33">1.4.3. 数据同步情况检查</h4><div class="- topic/body body"><p class="- topic/p p">正常情况下，数据同步程序会保持稳定的数据同步。对于意外因素造成的数据未同步，可参考以下步骤逐一排查：</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">查看 MySQL 中 <em class="+ topic/ph hi-d/i ph i">binlog</em> 中记录的最新位置。</strong></p><p class="- topic/p p">查看该值需要正确的配置 <em class="+ topic/ph hi-d/i ph i">gtid_mode</em> 等参数，按照前面的提供的 MySQL 参数配置既可。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>SHOW MASTER STATUS;</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/38.png" alt="38"/><br/><p class="- topic/p p">查看 MySQL 中的 <em class="+ topic/ph hi-d/i ph i">binlog</em>具体数据库更改。可以通过过 <code class="+ topic/ph pr-d/codeph ph codeph">mysqlbinglog</code> 命令查看  MySQL 的 <em class="+ topic/ph hi-d/i ph i">binlog</em> 中记录的数据库改变。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./mysqlbinlog --base64-output=decode-rows -v --skip-gtids /usr/local/mysql/data/binlog.000003|less</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/39.png" alt="39"/><br/></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">查看 Kafka 中记录的 MySQL 同步的 <em class="+ topic/ph hi-d/i ph i">binlog</em> 位置。</strong></p><p class="- topic/p p">结合前面查看的 MySQL 最新 <em class="+ topic/ph hi-d/i ph i">binlog</em> 位置，可以确定当前数据从 MySQL 到 Kafka 的同步进度。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./consume.sh --topic connect-offsets --from-beginning |grep basicinfo-connector</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/40.png" alt="40"/><br/><p class="- topic/p p">查看 Kafka 中数据，Kafka 中的数据是已序列化的二进制存储。需要使用 avro 调用 schema-registry 中的表结构信息及进行反序列化。这里我们提供了 <em class="+ topic/ph hi-d/i ph i">tpconsumer.sh</em> 脚本，可以提供反序列化后的 Kafka 中的真实数据，并匹配上该条数据对应的表结构。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./tpconsumer.sh --op=2 --topic=mysqlserver.basicinfo.index_components --offset=1 --max-messages=2</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/41.png" alt="41"/><br/></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">查看当前 DolphinDB 同步任务列表。</strong></p><p class="- topic/p p">下面命令可以查看当前 Kafka 中的消费组。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./kafka.sh cm_list</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/42.png" alt="42"/><br/><p class="- topic/p p">查看 DolphinDB 同步任务对应的 Kafka 消费组中的每一个 consumer 的消费进度，通过此命令可以查看同步程序中每一张的表同步进度。Lag 为  0 则表示 Kafka 中 topic 当前没有未消费的数据，即 Kafka 中的数据与对应表的数据是一致的。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>./kafka.sh cm_detail connect-ddb-sink|awk '{printf "%-20s %-40s %-9s %-14s %-15s %-10s %-30s\n", $1, $2, $3, $4, $5, $6,$7}'</code></pre><br/><img class="- topic/image image" src="images/Debezium_and_Kafka_data_sync/43.png" alt="43"/><br/></li></ol></div></article></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title34" id="15-附录"><h3 class="- topic/title title topictitle3" id="ariaid-title34">1.5. 附录</h3><div class="- topic/body body"><p class="- topic/p p"><a class="- topic/xref xref" href="script/Debezium_and_Kafka_data_sync/KFDATA.tar">KFDATA.tar</a> 压缩包包含：数据的同步数据文件夹、配置文件及 <em class="+ topic/ph hi-d/i ph i">Kafka-tools</em> 脚本。</p></div></article></article></article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" aria-label="On this page" class="col-lg-2 d-none d-lg-block navbar d-print-none"> 
                            <div id="wh_topic_toc_content">
		                        
	                            <div class=" wh_topic_toc "><div class="wh_topic_label">在本页上</div><ul><li class="topic-item"><a href="#1-debezium-%E5%90%8C%E6%AD%A5%E6%96%B9%E6%A1%88%E6%A6%82%E8%BF%B0" data-tocid="1-debezium-同步方案概述">1. Debezium 同步方案概述</a><ul><li class="topic-item"><a href="#11-%E9%83%A8%E7%BD%B2-kafka-%E5%8D%95%E5%AE%9E%E4%BE%8B%E5%AE%9E%E6%97%B6%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8" data-tocid="11-部署-kafka-单实例实时数据存储">1.1. 部署 Kafka 单实例实时数据存储</a><ul><li class="topic-item"><a href="#111-%E9%83%A8%E7%BD%B2%E5%87%86%E5%A4%87" data-tocid="111-部署准备">1.1.1. 部署准备</a></li><li class="topic-item"><a href="#112-%E9%83%A8%E7%BD%B2-zookeeper" data-tocid="112-部署-zookeeper">1.1.2. 部署 Zookeeper</a><ul><li class="topic-item"><a href="#1121-%E5%9F%BA%E7%A1%80%E5%87%86%E5%A4%87" data-tocid="1121-基础准备">1.1.2.1. 基础准备</a></li><li class="topic-item"><a href="#1122-%E5%AE%89%E8%A3%85-zookeeper" data-tocid="1122-安装-zookeeper">1.1.2.2. 安装 Zookeeper</a></li><li class="topic-item"><a href="#1123-%E9%83%A8%E7%BD%B2%E5%90%AF%E5%8A%A8-zookeeper" data-tocid="1123-部署启动-zookeeper">1.1.2.3. 部署启动 Zookeeper</a></li></ul></li><li class="topic-item"><a href="#113-%E9%83%A8%E7%BD%B2-kafka" data-tocid="113-部署-kafka">1.1.3. 部署 Kafka</a><ul><li class="topic-item"><a href="#1131-%E5%AE%89%E8%A3%85-kafka" data-tocid="1131-安装-kafka">1.1.3.1. 安装 Kafka</a></li><li class="topic-item"><a href="#1132-%E9%83%A8%E7%BD%B2%E5%90%AF%E5%8A%A8-kafka" data-tocid="1132-部署启动-kafka">1.1.3.2. 部署启动 Kafka</a></li></ul></li><li class="topic-item"><a href="#114-%E9%83%A8%E7%BD%B2-schema-registry" data-tocid="114-部署-schema-registry">1.1.4. 部署 Schema-Registry</a><ul><li class="topic-item"><a href="#1141-%E5%AE%89%E8%A3%85-schema-registry" data-tocid="1141-安装-schema-registry">1.1.4.1. 安装 Schema-Registry</a></li><li class="topic-item"><a href="#1142-%E9%83%A8%E7%BD%B2%E5%90%AF%E5%8A%A8-schema-registry" data-tocid="1142-部署启动-schema-registry">1.1.4.2. 部署启动 Schema-Registry</a></li></ul></li><li class="topic-item"><a href="#115-%E9%83%A8%E7%BD%B2-kafka-connect" data-tocid="115-部署-kafka-connect">1.1.5. 部署 Kafka-Connect</a><ul><li class="topic-item"><a href="#1151-%E5%AE%89%E8%A3%85-kafka-connect" data-tocid="1151-安装-kafka-connect">1.1.5.1. 安装 Kafka-Connect</a></li><li class="topic-item"><a href="#1152-%E9%83%A8%E7%BD%B2%E5%90%AF%E5%8A%A8-kafka-connect" data-tocid="1152-部署启动-kafka-connect">1.1.5.2. 部署启动 Kafka-Connect</a></li></ul></li></ul></li><li class="topic-item"><a href="#12-%E9%83%A8%E7%BD%B2-mysql-%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E5%88%B0-kafka" data-tocid="12-部署-mysql-数据同步到-kafka">1.2. 部署 MySQL 数据同步到 Kafka</a><ul><li class="topic-item"><a href="#121-%E5%AE%89%E8%A3%85-debezium-mysql-%E8%BF%9E%E6%8E%A5%E5%99%A8%E6%8F%92%E4%BB%B6" data-tocid="121-安装-debezium-mysql-连接器插件">1.2.1. 安装 Debezium-MySQL 连接器插件</a></li><li class="topic-item"><a href="#122-%E9%85%8D%E7%BD%AE-mysql-%E6%95%B0%E6%8D%AE%E5%BA%93" data-tocid="122-配置-mysql-数据库">1.2.2. 配置 MySQL 数据库</a></li><li class="topic-item"><a href="#123-%E9%85%8D%E7%BD%AE-mysql-%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E8%BF%9E%E6%8E%A5%E4%BB%BB%E5%8A%A1" data-tocid="123-配置-mysql-数据同步连接任务">1.2.3. 配置 MySQL 数据同步连接任务</a><ul><li class="topic-item"><a href="#1231-%E5%87%86%E5%A4%87-mysql-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8" data-tocid="1231-准备-mysql-数据库表">1.2.3.1. 准备 MySQL 数据库表</a></li><li class="topic-item"><a href="#1232-%E5%87%86%E5%A4%87%E8%BF%9E%E6%8E%A5%E5%99%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%B9%B6%E5%90%AF%E5%8A%A8%E8%BF%9E%E6%8E%A5%E4%BB%BB%E5%8A%A1" data-tocid="1232-准备连接器配置文件并启动连接任务">1.2.3.2. 准备连接器配置文件，并启动连接任务</a></li></ul></li></ul></li><li class="topic-item"><a href="#13-%E9%83%A8%E7%BD%B2-kafka-%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E5%88%B0-dolphindb" data-tocid="13-部署-kafka-数据同步到-dolphindb">1.3. 部署 Kafka 数据同步到 DolphinDB</a><ul><li class="topic-item"><a href="#131-%E5%AE%89%E8%A3%85-kafka-dolphindb-%E8%BF%9E%E6%8E%A5%E5%99%A8" data-tocid="131-安装-kafka-dolphindb-连接器">1.3.1. 安装 Kafka-DolphinDB 连接器</a></li><li class="topic-item"><a href="#132-dolphindb-%E7%9A%84%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E5%87%86%E5%A4%87" data-tocid="132-dolphindb-的数据同步准备">1.3.2. DolphinDB 的数据同步准备</a></li><li class="topic-item"><a href="#133-%E9%85%8D%E7%BD%AE-dolphindb-%E7%9A%84%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E8%BF%9E%E6%8E%A5%E4%BB%BB%E5%8A%A1" data-tocid="133-配置-dolphindb-的数据同步连接任务">1.3.3. 配置 DolphinDB 的数据同步连接任务</a><ul><li class="topic-item"><a href="#1331-%E5%87%86%E5%A4%87%E8%BF%9E%E6%8E%A5%E5%99%A8%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%B9%B6%E5%90%AF%E5%8A%A8%E8%BF%9E%E6%8E%A5%E4%BB%BB%E5%8A%A1" data-tocid="1331-准备连接器配置文件并启动连接任务">1.3.3.1. 准备连接器配置文件，并启动连接任务</a></li><li class="topic-item"><a href="#1332-%E5%AE%9E%E6%97%B6%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E9%AA%8C%E8%AF%81" data-tocid="1332-实时数据同步验证">1.3.3.2. 实时数据同步验证</a></li></ul></li></ul></li><li class="topic-item"><a href="#14-%E8%BF%90%E7%BB%B4%E6%93%8D%E4%BD%9C" data-tocid="14-运维操作">1.4. 运维操作</a><ul><li class="topic-item"><a href="#141-dolphindb-%E5%90%8C%E6%AD%A5%E9%A1%BB%E7%9F%A5" data-tocid="141-dolphindb-同步须知">1.4.1. DolphinDB 同步须知</a></li><li class="topic-item"><a href="#142-%E9%83%A8%E7%BD%B2%E6%A3%80%E6%9F%A5" data-tocid="142-部署检查">1.4.2. 部署检查</a></li><li class="topic-item"><a href="#143-%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E6%83%85%E5%86%B5%E6%A3%80%E6%9F%A5" data-tocid="143-数据同步情况检查">1.4.3. 数据同步情况检查</a></li></ul></li><li class="topic-item"><a href="#15-%E9%99%84%E5%BD%95" data-tocid="15-附录">1.5. 附录</a></li></ul></li></ul></div>
	                        	
                        	</div>
                        </nav>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
<title>Copyright</title><p><b> ©2025 浙江智臾科技有限公司 浙ICP备18048711号-3</b></p>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
    </body>
</html>