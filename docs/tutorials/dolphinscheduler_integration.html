<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" data-whc_version="26.0">
    <head><link rel="shortcut icon" href="../favicon.ico"/><link rel="icon" href="../favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="DolphinDB 是一款高性能时序数据库。DolphinDB 集成了功能强大的编程语言和高容量高速度的批流一体数据分析系统， 为海量数据（特别是时间序列数据）的快速存储、检索、计算及分析提供一站式解决方案。 在实际生产环境中，经常存在数据导入、转换、查询计算，更新等一系列流程任务，各个部分之间存在依赖，如何将这些 DolphinDB 任务按照需求准确、有效率地调度，可以借用 ..."/><meta name="DC.rights.owner" content="(C) 版权 2025"/><meta name="copyright" content="(C) 版权 2025"/><meta name="generator" content="DITA-OT"/><meta name="DC.type" content="topic"/><meta name="DC.coverage" content=""/><meta name="DC.relation" content="../tutorials/about_tutorials.html"/><meta name="prodname" content="DolphinDB"/><meta name="brand" content="DolphinDB"/><meta name="DC.creator" content="DolphinDB"/><meta name="DC.publisher" content="DDB N/A DDB 200"/><meta name="DC.format" content="HTML5"/><meta name="DC.identifier" content="dolphindb-与-dolphinscheduler-的集成"/><title>DolphinDB 与 DolphinScheduler 的集成</title><!--  Generated with Oxygen version 26.0, build number 2024012323.  --><meta name="wh-path2root" content="../"/><meta name="wh-toc-id" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;?workdir /tmp/temp20250305183303418/tutorials?&gt;&lt;?workdir-uri file:/tmp/temp20250305183303418/tutorials/?&gt;&lt;?path2project ../?&gt;&lt;?path2project-uri ../?&gt;&lt;?path2rootmap-uri ../?&gt;&lt;topic xmlns:dita-ot=&#34;http://dita-ot.sourceforge.net/ns/201007/dita-ot&#34; xmlns:ditaarch=&#34;http://dita.oasis-open.org/architecture/2005/&#34; class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;dolphindb-与-dolphinscheduler-的集成&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;DolphinDB 与 DolphinScheduler 的集成&lt;/title&gt;&lt;prolog class=&#34;- topic/prolog &#34;&gt;&lt;author class=&#34;- topic/author &#34; xtrc=&#34;author:1;12:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/author&gt;&lt;publisherinformation class=&#34;- topic/publisher bookmap/publisherinformation &#34; xtrc=&#34;publisherinformation:1;14:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:1;15:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;printlocation class=&#34;- topic/data bookmap/printlocation &#34; xtrc=&#34;printlocation:1;16:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;N/A&lt;/printlocation&gt; &lt;published class=&#34;- topic/data bookmap/published &#34; xtrc=&#34;published:1;17:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:2;18:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;publishtype class=&#34;- topic/data bookmap/publishtype &#34; value=&#34;HTML&#34; xtrc=&#34;publishtype:1;19:44&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;revisionid class=&#34;- topic/ph bookmap/revisionid &#34; xtrc=&#34;revisionid:1;20:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;200&lt;/revisionid&gt; &lt;summary class=&#34;- topic/ph bookmap/summary &#34; xtrc=&#34;summary:1;22:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:1;23:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/published&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:2;25:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/publisherinformation&gt;&lt;metadata class=&#34;- topic/metadata &#34;&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:2;39:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:1;28:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;category class=&#34;- topic/category &#34; xtrc=&#34;category:1;29:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;prodinfo class=&#34;- topic/prodinfo &#34; xtrc=&#34;prodinfo:1;34:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;prodname class=&#34;- topic/prodname &#34; xtrc=&#34;prodname:1;35:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/prodname&gt; &lt;brand class=&#34;- topic/brand &#34; xtrc=&#34;brand:1;36:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/brand&gt; &lt;/prodinfo&gt;&lt;/metadata&gt;&lt;/prolog&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:1;3:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;DolphinDB 是一款高性能时序数据库。DolphinDB 集成了功能强大的编程语言和高容量高速度的批流一体数据分析系统， 为海量数据（特别是时间序列数据）的快速存储、检索、计算及分析提供一站式解决方案。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:2;6:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;在实际生产环境中，经常存在数据导入、转换、查询计算，更新等一系列流程任务，各个部分之间存在依赖，如何将这些 DolphinDB 任务按照需求准确、有效率地调度，可以借用 DolphinScheduler 任务调度器。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:3;8:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;本文将从生产环境中的一个 ETL 场景出发，将 DolphinScheduler 引入到 DolphinDB 的高可用集群中，通过 DolphinScheduler 的功能来调度 DolphinDB 的数据 ETL 作业。&lt;/p&gt;&lt;/body&gt;&lt;related-links class=&#34;- topic/related-links &#34;&gt;&lt;linkpool class=&#34;- topic/linkpool &#34; xtrc=&#34;topicref:130;166:91&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;../tutorials/about_tutorials.dita&#34; mapclass=&#34;- map/topicref bookmap/chapter &#34; role=&#34;parent&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:1;5:53&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot usertext?&gt;教程&lt;/linktext&gt;&lt;?ditaot usershortdesc?&gt;&lt;desc class=&#34;- topic/desc &#34;&gt;DolphinDB 产品使用教程&lt;/desc&gt;&lt;/link&gt;&lt;/linkpool&gt;&lt;/related-links&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1-apache-dolphinscheduler&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:2;10:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:2;10:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;1. Apache DolphinScheduler&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:2;10:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:4;12:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;Apache DolphinScheduler 是一个分布式易扩展的可视化 DAG 工作流任务调度开源系统。该系统适用于企业级场景，提供了一个支持可视化操作任务、工作流和全生命周期数据处理的解决方案，解决了数据研发 ETL 依赖错综复杂，无法监控任务健康状态的问题。DolphinScheduler 以 DAG（Directed Acyclic Graph，DAG）流式方式组装任务，可以及时监控任务的执行状态，支持重试、指定节点恢复失败、暂停、恢复、终止任务等操作。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;11-特性&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:3;14:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:3;14:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;1.1. 特性&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:3;14:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:1;16:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:1;16:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:1;16:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;执行定时任务&lt;/b&gt;：在生产环境中，一个普遍的需求是周期性地从数据源中提取、转换、加载数据到 DolphinDB，如每一天、每个小时等，DolphinScheduler 可以方便地进行定时管理，满足需求。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:2;17:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:2;17:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;执行历史任务&lt;/b&gt;：有时候我们由于业务变动，需要将历史数据进行重新计算和加载入 DolphinDB。在这种情况下，我们仅需在 DolphinScheduler Web 界面上定义相应任务的工作流，并定义和传入开始时间和结束时间的参数。通过这个步骤，我们可以处理任意时间段的数据。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:3;18:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:3;18:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;并行执行任务&lt;/b&gt;：在业务中，我们可能需要同时处理多项数据 ETL 任务，如同时导入数据到 DolphinDB 的不同表或同一个表的不同分区。DolphinScheduler 允许我们并行执行多项工作流任务，提高执行效率。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:4;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:4;19:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;高效处理编排&lt;/b&gt;：在生产环境中，大多数情况下存在任务之间、工作流之间有条件地执行，比如在 DolphinDB 的数据 ETL 中，下游任务依赖于上游任务的执行状态做不同的操作，有的任务之间关系错综复杂。可以在 DolphinScheduler 中可以按照逻辑对工作流进行定义，轻松编排任务之间的关系。&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;12-安装部署&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:4;21:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:4;21:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;1.2. 安装部署&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:4;21:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:5;23:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;DolphinScheduler 可在单机、单服务器集群、多服务器集群、K8S 环境下部署，本节内容将以单机部署流程作为演示内容，仅供参考。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:6;25:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:5;25:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;前置条件&lt;/b&gt;&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:2;27:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:5;27:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;JDK：安装 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://www.oracle.com/java/technologies/downloads/&#34; scope=&#34;external&#34; xtrc=&#34;xref:1;27:10&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;?ditaot usertext?&gt;JDK&lt;/xref&gt;(1.8+) 并配置 JAVA_HOME 环境变量，DolphinScheduler 的启动依赖于该环境变量，同时将其下的 bin 目录追加到 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:6;27:140&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;PATH&lt;/b&gt; 环境变量中。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:6;28:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;二进制包：已配置 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:7;28:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;DolphinDB 数据源&lt;/b&gt; 的 DolphinScheduler 版本，下载链接：&lt;xref class=&#34;- topic/xref &#34; format=&#34;gz&#34; href=&#34;https://cdn.dolphindb.cn/downloads/apache-dolphinscheduler-3.1.7-bin.tar.gz&#34; scope=&#34;external&#34; xtrc=&#34;xref:2;28:57&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;?ditaot usertext?&gt;https://cdn.dolphindb.cn/downloads/apache-dolphinscheduler-3.1.7-bin.tar.gz&lt;/xref&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:7;29:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;本教程将 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:8;29:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;MySQL&lt;/b&gt; 作为 DolphinScheduler 持久化的元数据库，因此要保证服务器已安装好 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:9;29:60&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;MySQL&lt;/b&gt;，若没有，需要下载安装，下载地址为：&lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://dev.mysql.com/downloads/mysql/&#34; scope=&#34;external&#34; xtrc=&#34;xref:3;29:87&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;?ditaot usertext?&gt;MySQL 下载地址&lt;/xref&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:7;31:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:10;31:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;元数据持久化配置&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:8;33:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;单机服务使用 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://www.h2database.com/html/main.html&#34; scope=&#34;external&#34; xtrc=&#34;xref:4;33:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;?ditaot usertext?&gt;H2 数据库&lt;/xref&gt; 来存储元数据，而 H2 数据库是一种内存级别的数据库，因此当 DolphinScheduler 程序重启时，会导致之前定义的工作流等内容全部丢失，需要重新定义，造成效率低下和不必要的麻烦。因此，将元数据持久化是非常有必要的，DolphinScheduler 支持 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:11;33:192&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;MySQL&lt;/b&gt; 和 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:12;33:204&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;PostgreSQL&lt;/b&gt; 作为元数据的存储数据库，本文以配置 MySQL 为例，主要有以下流程：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:3;35:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:8;35:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:9;35:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;解压 DolphinScheduler 程序包&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:1;37:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;tar -xvzf apache-dolphinscheduler-3.1.7-bin.tar.gz cd apache-dolphinscheduler-3.1.7-bin&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:9;42:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:10;42:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;进入 MySQL，创建数据库和用户&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:2;44:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;// 创建数据库 CREATE DATABASE dolphinscheduler DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci; // 创建用户，并设置密码 CREATE USER 'dolphinscheduler'@'%' IDENTIFIED BY '密码'; // 给用户赋予库的权限 GRANT ALL PRIVILEGES ON dolphinscheduler.* TO 'dolphinscheduler'@'%'; flush privileges;&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:10;54:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:11;54:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;修改 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:1;54:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;apache-dolphinscheduler-3.1.7-bin/bin/env/dolphinscheduler_env.sh&lt;/codeph&gt; 文件设定环境变量，将 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:2;54:85&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;{user}&lt;/codeph&gt; 和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:3;54:96&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;{password}&lt;/codeph&gt; 改为上一步创建的用户名和密码&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:3;56:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;export DATABASE=mysql export SPRING_PROFILES_ACTIVE=${DATABASE} export SPRING_DATASOURCE_URL=&#34;jdbc:mysql://127.0.0.1:3306/dolphinscheduler?useUnicode=true&amp;amp;characterEncoding=UTF-8&amp;amp;useSSL=false&#34; export SPRING_DATASOURCE_USERNAME={user} export SPRING_DATASOURCE_PASSWORD={password}&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:12;64:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:13;64:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;注意&lt;/b&gt;：如果 MySQL 数据库版本为 MySQL 8, 以上配置中 useSSL 应设置为 true。&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:11;66:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:13;66:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;修改 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:4;66:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;apache-dolphinscheduler-3.1.7-bin/standalone-server/conf/application.yaml&lt;/codeph&gt; 文件中的配置（在文件尾部），上半部分由于这里用的不是 postgresql，注释掉即可。将 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:5;66:128&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;{user}&lt;/codeph&gt; 和 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:6;66:139&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;{password}&lt;/codeph&gt; 改为上面创建的用户名和密码&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:4;68:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;--- #spring: # config: # activate: # on-profile: postgresql # quartz: # properties: # org.quartz.jobStore.driverDelegateClass: org.quartz.impl.jdbcjobstore.PostgreSQLDelegate # datasource: # driver-class-name: org.postgresql.Driver # url: jdbc:postgresql://127.0.0.1:5432/dolphinscheduler # username: root # password: root --- spring: config: activate: on-profile: mysql sql: init: schema-locations: classpath:sql/dolphinscheduler_mysql.sql datasource: driver-class-name: com.mysql.cj.jdbc.Driver url: jdbc:mysql://127.0.0.1:3306/dolphinscheduler?useUnicode=true&amp;amp;characterEncoding=UTF-8 username: {user} password: {password} &lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:12;99:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:14;99:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;初始化数据库，如果上述步骤没有问题，这里就不会报错：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:5;101:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;bash apache-dolphinscheduler-3.1.7-bin/tools/bin/upgrade-schema.sh&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:13;105:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:15;105:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;执行完成之后进入 MySQL 查询会发现名称为 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:7;105:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;dolphinscheduler&lt;/codeph&gt; 的数据库已经生成了很多表格&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/dolphinscheduler_integration/1.png&#34; xtrc=&#34;image:1;107:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34; dita-ot:image-width=&#34;303&#34; dita-ot:image-height=&#34;248&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:16;109:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:14;109:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;启动 DolphinScheduler 单机服务器&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:17;111:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:15;111:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;注意&lt;/b&gt;：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:4;113:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:14;113:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;启动 DolphinScheduler 依赖多个端口号，分别是：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:8;113:35&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;12345、50052、25333、25334、1234、5678&lt;/codeph&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:15;114:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:9;114:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;lsof -i:&amp;lt;port&amp;gt;&lt;/codeph&gt; 检查以上端口号是否被占用，如果有端口被别的进程占用，修改 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:10;114:53&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;apache-dolphinscheduler-3.1.7-bin/standalone-server/conf/application.yaml&lt;/codeph&gt; 中对应的端口&lt;/li&gt;&lt;/ul&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:1;116:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:16;116:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:18;116:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;当配置好以上内容之后，进入执行 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:11;116:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;apache-dolphinscheduler-3.1.7-bin&lt;/codeph&gt; 目录并执行以下命令启动：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:6;118:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;bash ./bin/dolphinscheduler-daemon.sh start standalone-server&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:17;122:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:19;122:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;输入以下命令查看是否执行成功&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:20;124:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;a. 运行 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:12;124:10&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;jps&lt;/codeph&gt; 查看相应实例是否已在进程中&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:21;126:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:13;126:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&amp;lt;img src=&#34;images/dolphinscheduler_integration/2.png&#34;&amp;gt;&lt;/codeph&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:22;128:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;b. 运行 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:14;128:10&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;bash ./bin/dolphinscheduler-daemon.sh status standalone-server&lt;/codeph&gt; 查看 standalone-server 的运行状态&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:23;130:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:15;130:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&amp;lt;img src=&#34;images/dolphinscheduler_integration/3.png&#34;&amp;gt;&lt;/codeph&gt;&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:18;131:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:24;131:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;停止运行&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:7;133:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;bash ./bin/dolphinscheduler-daemon.sh stop standalone-server&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:19;137:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:25;137:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;启动成功后，在浏览器中输入 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:16;137:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;服务器IP:12345/dolphinscheduler/ui/login&lt;/codeph&gt; 进行登录&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:26;139:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;a. 默认用户名：admin b. 默认密码：dolphinscheduler123&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:27;142:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;登陆成功后将会看到如下页面：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/dolphinscheduler_integration/4.png&#34; xtrc=&#34;image:2;144:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34; dita-ot:image-width=&#34;1695&#34; dita-ot:image-height=&#34;673&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/li&gt;&lt;/ol&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:5;146:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:20;146:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:28;146:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;重启 dolphinscheduler 服务，测试已经连接好数据库&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/dolphinscheduler_integration/5.png&#34; xtrc=&#34;image:3;148:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34; dita-ot:image-width=&#34;1253&#34; dita-ot:image-height=&#34;342&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;13-dolphindb-与-dolphinscheduler-结合&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:5;150:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:5;150:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;1.3. DolphinDB 与 DolphinScheduler 结合&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:5;150:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:29;152:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;DolphinDB 作为强大的高性能时序数据库，能够高效存储和处理 PB 级的海量数据集，可以通过编写脚本实现数据的处理、存储、因子计算、建模、回测等任务。在实际生产中，源数据下载、数据处理、数据入库、数据校验、指标计算等任务之间存在先后关系和条件关系，如果在 DolphinDB 脚本中编写相关的逻辑关系代码，一来会造成与实际任务不相关的脚本冗余，二来如果实际业务变动，需要增加或删减部分任务，相互依赖的任务之间的关系代码也需要变动，造成更新迭代效率低下。考虑到这种情况，如果能够将 DolphinDB 与 DolphinScheduler 结合起来，在 DolphinDB 中编写相关任务代码模块，在 DolphinScheduler 上将这些任务按照逻辑编排调度，这样，就能够将任务代码和任务之间逻辑关系分开，每个部分专注于发挥自己的作用，实现更高效地运行维护。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;131-如何创建-dolphindb-数据源&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:6;154:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:6;154:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;1.3.1. 如何创建 DolphinDB 数据源&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:6;154:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:2;156:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:21;156:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:30;156:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;在安装部署好 DolphinScheduler 之后，登录其 Web 界面，点击数据源中心并点击创建数据源&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/dolphinscheduler_integration/6.png&#34; xtrc=&#34;image:4;158:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34; dita-ot:image-width=&#34;1100&#34; dita-ot:image-height=&#34;144&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:22;159:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:31;159:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;输入相关参数定义，创建 DolphinDB 数据源&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/dolphinscheduler_integration/7.png&#34; xtrc=&#34;image:5;161:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34; dita-ot:image-width=&#34;522&#34; dita-ot:image-height=&#34;840&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:32;163:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:16;163:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;注意&lt;/b&gt;：数据库名和 jdbc 连接参数不用填，不然会报错 JDBC connect failed。&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;132-如何调度-dolphindb-任务&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:7;165:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:7;165:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;1.3.2. 如何调度 DolphinDB 任务&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:7;165:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:33;167:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;创建 DolphinDB 数据源后，需要创建租户、项目、工作流，具体流程可参考：&lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://dolphinscheduler.apache.org/zh-cn/docs/3.1.5/guide/project/workflow-definition&#34; scope=&#34;external&#34; xtrc=&#34;xref:5;167:41&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;?ditaot usertext?&gt;DolphinScheduler 部署流程&lt;/xref&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:34;169:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;定义好工作流之后，点击该工作流进入操作界面，接着在左端拖拽 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:17;169:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;SQL 节点&lt;/b&gt; 进行 DolphinDB 任务定义&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:35;171:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:18;171:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;注意&lt;/b&gt;：SQL 类型分为查询类型和非查询类型，这两种类型分别适用于不同的使用场景，在本文“获取 DolphinDB 任务运行过程中的信息”小节中会详细介绍。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/dolphinscheduler_integration/8.png&#34; xtrc=&#34;image:6;173:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34; dita-ot:image-width=&#34;935&#34; dita-ot:image-height=&#34;365&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/dolphinscheduler_integration/9.png&#34; xtrc=&#34;image:7;175:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34; dita-ot:image-width=&#34;575&#34; dita-ot:image-height=&#34;438&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:36;177:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;由于在 SQL 任务节点中，&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:19;177:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;每次只能执行一行 DolphinDB 代码&lt;/b&gt;。因此，调度 DolphinDB 任务主要有以下两种途径：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:3;179:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:23;179:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:37;179:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:20;179:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;run 函数&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:38;181:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;假设 DolphinDB 脚本在服务器上的路径是：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:17;181:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;/data/script.dos&lt;/codeph&gt; ，那么，在 SQL 语句上可以输入：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:8;183:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;run(&#34;/data/script.dos&#34;);&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:24;187:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:39;187:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:21;187:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;函数视图&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:40;189:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;a. 在 DolphinDB 编写函数：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:9;191:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;// 在 DolphinDB 中定义一个函数，用于创建数据库表 def createTable(dbName, tbName){ login(&#34;admin&#34;, &#34;123456&#34;) if(!existsDatabase(dbName)){ db1 = database(, VALUE, 2020.01.01..2021.01.01) db2 = database(, HASH, [SYMBOL, 10]) db = database(dbName, COMPO, [db1, db2], , &#34;TSDB&#34;) }else{ db = database(dbName) } if(!existsTable(dbName,tbName)){ name =`SecurityID`ChannelNo `ApplSeqNum`MDStreamID `SecurityIDSource`Price `OrderQty`Side `TradeTIme`OrderType `OrderIndex`LocalTime `SeqNo `Market `DataStatus`BizIndex type = [SYMBOL, INT, LONG, INT, INT, DOUBLE, INT, SYMBOL, TIMESTAMP, SYMBOL, INT, TIME, LONG, SYMBOL,INT,LONG] schemaTable = table(1:0, name, type) db.createPartitionedTable(table=schemaTable, tableName=tbName, partitionColumns=`TradeTime`SecurityID, compressMethods={TradeTime:&#34;delta&#34;}, sortColumns=`Market`SecurityID`TradeTime, keepDuplicates=ALL) } else{ writeRunLog(&#34;数据库：&#34; + dbName + &#34; 数据表：&#34; + tbName + &#34; 已存在...&#34;) } }&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:41;220:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;b. 将函数添加为函数视图，作用是使得该函数视图&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:22;220:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;全局可用&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:42;222:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:18;222:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;// 添加为函数视图 addFunctionView(createTable)&lt;/codeph&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:43;224:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;c. 在 dolphinScheduler 上调用该函数视图&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:44;226:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:19;226:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;// 在 SQL 语句内输入以下内容：createTable(&#34;dfs://testDb&#34;, &#34;testTb&#34;);&lt;/codeph&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:45;228:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;上述两种方法的区别是：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:6;230:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:25;230:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:20;230:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;run&lt;/codeph&gt; 执行脚本不能传递参数，灵活性较差&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:26;231:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;使用函数视图可以在 DolphinScheduler 上&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:23;231:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;传入参数&lt;/b&gt;，以上面为例，可以在 SQL 语句中输入：&lt;/li&gt;&lt;/ul&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:10;233:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;createTable(${dbName}, ${tbName});&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:46;237:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;传入参数的方法有局部参数和全局参数两种方法，它们的区别是全局参数可以在创建工作流实例时直接进行修改，而局部参数需要进入到工作流中的具体任务节点进行修改：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:4;239:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:27;239:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:47;239:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;局部参数在&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:24;239:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;定义任务节点&lt;/b&gt;时定义&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/dolphinscheduler_integration/10.png&#34; xtrc=&#34;image:8;241:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34; dita-ot:image-width=&#34;567&#34; dita-ot:image-height=&#34;489&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:28;242:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:48;242:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;全局参数在&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:25;242:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;保存工作流&lt;/b&gt;时定义&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/dolphinscheduler_integration/11.png&#34; xtrc=&#34;image:9;244:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34; dita-ot:image-width=&#34;587&#34; dita-ot:image-height=&#34;704&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;2-调度-dolphindb-数据-etl-任务&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:8;246:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:8;246:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;2. 调度 DolphinDB 数据 ETL 任务&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:8;246:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;21-任务流程结构&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:9;248:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:9;248:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;2.1. 任务流程结构&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:9;248:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:7;250:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:29;250:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:49;250:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:26;250:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;文件结构&lt;/b&gt;&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/dolphinscheduler_integration/12.png&#34; xtrc=&#34;image:10;252:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34; dita-ot:image-width=&#34;311&#34; dita-ot:image-height=&#34;330&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;/&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;211-dolphindb-功能模块部分&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:10;254:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:10;254:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;2.1.1. DolphinDB 功能模块部分&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:10;254:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:8;256:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:30;256:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:27;256:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;stockData&lt;/b&gt; : 数据导入模块&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:9;257:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:31;257:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:21;257:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;createStockTable.dos&lt;/codeph&gt; : 定义创建相应的股票数据库表的函数。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:32;258:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:22;258:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;stockDataProcess.dos&lt;/codeph&gt; : 定义将源数据进行清洗、处理与格式转换的函数。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:33;259:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:23;259:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;stockDataLoad.dos&lt;/codeph&gt; : 定义将数据导入相应的 DolphinDB 库表的函数。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:34;260:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:28;260:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;minFactor&lt;/b&gt; : 分钟线因子指标相关模块&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:10;261:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:35;261:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:24;261:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;createMinFactorTable.dos&lt;/codeph&gt; : 定义创建分钟线因子指标库表的函数。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:36;262:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:25;262:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;computeMinFactor.dos&lt;/codeph&gt; : 定义计算分钟线因子指标的函数。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:37;263:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:29;263:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;dataCheck&lt;/b&gt; : 数据校验模块&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:11;264:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:38;264:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:26;264:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;stockCheck.dos&lt;/codeph&gt; : 定义校验导入的股票逐笔委托、快照行情、逐笔成交数据的函数。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:39;265:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:27;265:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;minFactorCheck.dos&lt;/codeph&gt; : 定义校验分钟线因子指标数据的函数。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;212-dolphindb-脚本部分&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:11;267:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:11;267:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;2.1.2. DolphinDB 脚本部分&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:11;267:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:12;269:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:40;269:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:28;269:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;initTable.dos&lt;/codeph&gt; : 执行该脚本可以创建相应的股票数据库表和分钟因子指标库表。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:41;270:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:29;270:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;createFuncView.dos&lt;/codeph&gt; : 执行该脚本可以定义需要在 &lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:30;270:39&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;dolphinScheduler&lt;/b&gt; 上用到的函数视图。&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;22-数据介绍&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:12;272:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:12;272:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;2.2. 数据介绍&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:12;272:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:50;274:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;本文选取了 20230201 上交所某股票 level 2 委托数据、快照数据、成交数据作为演示。以下是&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:31;274:53&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;逐笔委托表&lt;/b&gt;在 DolphinDB 的结构。快照数据和成交数据结构可在附件中查看：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:1;276:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:1;276:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:1;276:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:2;276:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:3;276:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:1;276:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:1;276:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:1;276:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:32;276:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;字段名&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:2;276:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:33;276:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;字段含义&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:3;276:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:34;276:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;数据类型 (DolphinDB)&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:1;278:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:2;278:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:4;278:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;ChannelNo&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:5;278:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;通道代码&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:6;278:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;INT&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:3;279:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:7;279:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;ApplSeqNum&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:8;279:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;消息记录号&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:9;279:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;LONG&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:4;280:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:10;280:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;MDStreamID&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:11;280:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;行情类别&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:12;280:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;INT&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:5;281:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:13;281:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;SecurityID&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:14;281:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;证券代码&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:15;281:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;SYMBOL&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:6;282:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:16;282:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;SecurityIDSource&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:17;282:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;证券代码源&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:18;282:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;INT&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:7;283:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:19;283:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;Price&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:20;283:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;委托价格&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:21;283:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:8;284:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:22;284:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;OrderQty&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:23;284:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;委托数量&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:24;284:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;INT&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:9;285:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:25;285:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;Side&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:26;285:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;委托买卖方向&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:27;285:36&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;SYMBOL&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:10;286:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:28;286:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;TradeTime&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:29;286:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;委托时间&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:30;286:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;TIMESTAMP&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:11;287:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:31;287:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;OrderType&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:32;287:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;委托类型&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:33;287:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;SYMBOL&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:12;288:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:34;288:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;OrderIndex&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:35;288:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;委托序号&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:36;288:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;INT&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:13;289:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:37;289:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;LocalTime&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:38;289:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;本地接受时间戳&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:39;289:35&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;TIME&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:14;290:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:40;290:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;SeqNo&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:41;290:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;消息序列号&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:42;290:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;LONG&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:15;291:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:43;291:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;Market&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:44;291:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;交易市场&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:45;291:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;SYMBOL&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:16;292:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:46;292:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;DataStatus&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:47;292:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;数据状态&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:48;292:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;INT&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:17;293:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:49;293:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;BizIndex&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:50;293:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;业务序列号&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:51;293:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;LONG&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;23-数据导入指标计算与校验任务&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:13;295:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:13;295:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;2.3. 数据导入、指标计算与校验任务&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:13;295:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:51;297:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:35;297:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;注意&lt;/b&gt;：以下各部分内容均将相关函数定义在模块中，以方便进行工程化管理，关于 DolphinDB 模块的创建、加载、调用方法，请参照：&lt;xref class=&#34;- topic/xref &#34; dita-ot:orig-format=&#34;md&#34; format=&#34;dita&#34; href=&#34;module_tutorial.md&#34; xtrc=&#34;xref:6;297:70&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;DolphinDB 模块复用教程&lt;/xref&gt;&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;231-数据清洗处理入表&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:14;299:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:14;299:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;2.3.1. 数据清洗、处理、入表&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:14;299:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:52;301:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;由于源数据的字段结构有时候不符合我们的业务需求，因此需要增删、处理一些字段后再导入数据库，下面以&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:36;301:49&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;逐笔委托数据&lt;/b&gt;为例，介绍源数据经清洗、处理后再导入库表的过程，快照和成交数据的处理逻辑与委托数据相同，详细内容可以在附件中查看。&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:13;303:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:42;303:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:53;303:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:37;303:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;创建数据库表&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:54;305:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;逐笔委托、快照、逐笔成交数据都保存在同一个库中，本文采用了组合分区作为分区方案，第一层按天分区，第二层对股票代码分 25 个哈希分区。如何确定数据分区请参照：&lt;xref class=&#34;- topic/xref &#34; dita-ot:orig-format=&#34;md&#34; format=&#34;dita&#34; href=&#34;database.md&#34; xtrc=&#34;xref:7;305:82&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;DolphinDB 数据库分区教程&lt;/xref&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:11;307:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;module createStockTable // 创建逐笔委托数据存储库表 def createEntrust(dbName, tbName,userName = &#34;admin&#34;,password = &#34;123456&#34;) {     login(userName, password)     if(!existsDatabase(dbName))     {         db1 = database(, VALUE, 2020.01.01..2021.01.01)         db2 = database(, HASH, [SYMBOL, 25]) // 按天和股票组合分区         db = database(dbName, COMPO, [db1, db2], , &#34;TSDB&#34;)     }     else     {         db = database(dbName)     }     name=`ChannelNo`ApplSeqNum`MDStreamID`SecurityID`SecurityIDSource`Price`OrderQty`Side`TradeTIme`OrderType`OrderIndex`LocalTime`SeqNo`Market`DataStatus`BizIndex     type = [INT, LONG, INT, SYMBOL, INT, DOUBLE, INT, SYMBOL, TIMESTAMP, SYMBOL, INT, TIME, LONG, SYMBOL,INT,LONG]     schemaTable = table(1:0, name, type) // 创建分区表     db.createPartitionedTable(table=schemaTable, tableName=tbName, partitionColumns=`TradeTime`SecurityID, compressMethods={TradeTime:&#34;delta&#34;}, sortColumns=`Market`SecurityID`TradeTime, keepDuplicates=ALL) }&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:43;333:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:55;333:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:38;333:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;csv 数据清洗与处理&lt;/b&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:12;335:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;module stockData::stockDataProcess // 定义逐笔委托 csv 数据文件中各个字段的名称和字段类型 def schemaEntrust() {     name = `DataStatus`OrderIndex`ChannelNo`SecurityID`TradeTime`OrderType`ApplSeqNum`Price`OrderQty`Side`BizIndex`LocalTime`SeqNo     typeString = `INT`LONG`INT`SYMBOL`TIME`SYMBOL`INT`DOUBLE`INT`SYMBOL`INT`TIME`INT     return table(name, typeString) } // 数据处理函数，包括字段增加，数据去重等操作 def processEntrust(loadDate, mutable t) {     // 字段名替换 t.replaceColumn!(`TradeTime, concatDateTime(day, t.TradeTime))     n1 = t.size() // 数据去重     t = select * from t where isDuplicated([DataStatus, OrderIndex, ChannelNo, SecurityID, TradeTime, OrderType, ApplSeqNum, Price, OrderQty, Side, BizIndex],FIRST)=false     n2 = t.size() // 增加字段     update t set Market = `sh     update t set MDStreamID = int(NULL)     update t set SecurityIDSource = int(NULL)     reorderColumns!(t, `ChannelNo`ApplSeqNum`MDStreamID`SecurityID`SecurityIDSource`Price`OrderQty`Side`TradeTime`OrderType`OrderIndex`LocalTime`SeqNo`Market`DataStatus`BizIndex)     return t,n1,n2 }&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:44;364:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:56;364:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:39;364:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;将处理后的数据导入数据库表&lt;/b&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:13;366:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;module stockData::stockDataLoad use stockData::stockDataProcess def loadEntrust(userName, userPassword, startDate, endDate, dbName, tbName, filePath, loadType,mutable infoTb) { for(loadDate in startDate..endDate) { // 删除已有数据 dateString = temporalFormat(loadDate,&#34;yyyyMMdd&#34;) dataCount = exec count(*) from loadTable(dbName, tbName) where date(tradeTime)=loadDate // 如果表里面已经存在当天要处理的数据，删除库里面已有数据 if(dataCount != 0){ msg = &#34;Start to delete the entrust data, the delete date is: &#34; + dateString print(msg) infoTb.tableInsert(msg) dropPartition(database(dbName), loadDate, tbName) msg = &#34;Successfully deleted the entrust data, the delete date is: &#34; + dateString print(msg) infoTb.tableInsert(msg) } // 数据导入 // 判断数据csv文件是否存在 fileName = filePath + &#34;/&#34; + dateString + &#34;/&#34; + &#34;entrust.csv&#34; if(!exists(fileName)) { throw fileName + &#34;不存在!请检查数据源!&#34; } // 如果是全市场数据，数据量较大，因此分批导入 schemaTB = schemaEntrust() tmpData1 = loadText(filename=fileName, schema=schemaTB) tmpData1,n1,n2 = processEntrust(loadDate,tmpData1) pt = loadTable(dbName,tbName) msg = &#34;the data size in csv file is :&#34; + n2 + &#34;, the duplicated count is &#34; + (n1 - n2) print(msg) infoTb.tableInsert(msg) for(i in 0..23) { startTime = 08:00:00.000 + 1200 * 1000 * i tmpData2 = select * from tmpData1 where time(TradeTime)&amp;gt;=startTime and time(TradeTime)&amp;lt;(startTime+ 1200 * 1000) if(size(tmpData2) &amp;lt; 1) { continue } //数据入库 pt.append!(tmpData2) } msg = &#34;successfully loaded!&#34; print(msg) infoTb.tableInsert(msg) } }&lt;/codeblock&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;232-k-分钟线因子指标计算&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:15;421:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:15;421:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;2.3.2. K 分钟线因子指标计算&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:15;421:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:57;423:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;当导入数据之后，我们希望根据业务、策略对数据进行进一步加工，形成分钟线级别的因子指标，让数据产生价值，驱动业务发展。下面，我们以计算&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:40;423:67&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;成交数据&lt;/b&gt; K 分钟线因子指标为例，介绍该任务流程：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:14;425:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:45;425:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:58;425:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:41;425:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;创建 K 分钟线结果存储表&lt;/b&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:14;427:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;module minFactor::createMinFactorTable def createMinuteFactor(dbName, tbName) { if(existsDatabase(dbName)){ dropDatabase(dbName) } //按天分区 db = database(dbName, VALUE, 2021.01.01..2021.01.03,engine = `TSDB) colName = `TradeDate`TradeTime`SecurityID`Open`High`Low`Close`Volume`Amount`Vwap colType =[DATE, MINUTE, SYMBOL, DOUBLE, DOUBLE, DOUBLE, DOUBLE, LONG, DOUBLE, DOUBLE] tbSchema = table(1:0, colName, colType) db.createPartitionedTable(table=tbSchema,tableName=tbName,partitionColumns=`TradeDate,sortColumns=`SecurityID`TradeTime,keepDuplicates=ALL) }&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:46;444:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:59;444:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:42;444:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;计算 K 分钟线因子指标并入库&lt;/b&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:15;446:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;module minFactor::computeMinFactor def calFactorOneMinute(dbName, startDate, endDate, mutable factorTb,mutable infoTb) { pt = loadTable(dbName, &#34;trade&#34;) dayList = startDate..endDate if(dayList.size()&amp;gt;12) dayList = dayList.cut(12) for(days in dayList){ //计算分钟 K 线 res = select first(TradePrice) as open, max(TradePrice) as high, min(TradePrice) as low, last(TradePrice) as close, sum(tradeQty) as volume,sum(TradePrice*TradeQty) as amount,sum(TradePrice*TradeQty)\sum(TradeQty) as vwap from pt where date(tradeTime) in days group by date(tradeTime) as TradeDate,minute(tradeTime) as TradeTime, SecurityID msg = &#34;Start to append minute factor result , the days is: [&#34; + concat(days, &#34;,&#34;)+&#34;]&#34; print(msg) infoTb.tableInsert(msg) //分钟 K 线入库 factorTb.append!(res) msg = &#34;Successfully append the minute factor result to databse, the days is: [&#34; + concat(days, &#34;,&#34;)+&#34;]&#34; print(msg) infoTb.tableInsert(msg) } }&lt;/codeblock&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;233-数据校验与-k-分钟线指标校验&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:16;469:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:16;469:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;2.3.3. 数据校验与 K 分钟线指标校验&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:16;469:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:60;471:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;由于 K 分钟线因子指标计算依赖于上游导入数据的正确性，而业务中又依赖于 K 分钟线指标数据的正确性，因此，对这两部分数据进行校验是有必要的，下面介绍&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:43;471:76&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;部分校验步骤&lt;/b&gt;，详细校验内容请参照&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:44;471:96&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;附件&lt;/b&gt;：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:15;473:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:47;473:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:61;473:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:45;473:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;股票数据校验&lt;/b&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:16;475:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;module dataCheck::stockCheck def checkStockCounts(idate,dbName) { // 校验逐笔委托、快照行情、逐笔成交表的股票个数是否一致 getCodes = def (dbName,tbName,idate) { tb = loadTable(dbName,tbName) return exec distinct(SecurityID) from tb where date(tradetime)=idate and ((Market=`sh and SecurityID like &#34;6%&#34;)or(Market=`sz and (SecurityID like &#34;0%&#34; or SecurityID like &#34;3%&#34; ) )) } entrustCodes = getCodes(dbName,&#34;entrust&#34;,idate) tradeCodes = getCodes(dbName,&#34;trade&#34;,idate) snapshotCodes = exec distinct(SecurityID) from loadTable(dbName,&#34;snapshot&#34;) where date(tradetime)=idate and ((Market=`sh and SecurityID like &#34;6%&#34;)or(Market=`sz and (SecurityID like &#34;0%&#34; or SecurityID like &#34;3%&#34; ))) and HighPrice != 0 if(entrustCodes.size() != snapshotCodes.size() or entrustCodes.size() != tradeCodes.size() or snapshotCodes.size() != tradeCodes.size()) { throw &#34;逐笔委托股票数量：&#34; + size(entrustCodes) + &#34; 快照行情股票数量：&#34; + size(snapshotCodes) + &#34; 逐笔成交股票数量：&#34; + size(tradeCodes) + &#34;, 它们数量不一致！&#34; } }&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:48;496:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:62;496:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:46;496:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;K 分钟线指标校验&lt;/b&gt;&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:17;498:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;module dataCheck::minFactorCheck def checkHighLowPrice(idate,dbName,tbName) { // 分钟线最高价指标与最低价指标校验 tb= loadTable(dbName,tbName) temp=select * from tb where tradedate=idate and High &amp;lt; Low if(size(temp)&amp;gt;0) { throw &#34;分钟线计算错误！分钟线最高价小于最低价！&#34; } } def checkVolumeAmount(idate,dbName,tbName) { // 分钟线交易量与交易额指标校验 tb = loadTable(dbName,tbName) temp = select * from loadTable(dbName,tbName) where tradedate=idate and ((Volume == 0 and Amount != 0) or (Volume != 0 and Amount == 0)) if(size(temp)&amp;gt;0) { throw &#34;分钟线计算错误！交易量和交易额不同时为 0！&#34; } }&lt;/codeblock&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;24-实现-dolphindb-任务调度&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:17;524:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:17;524:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;2.4. 实现 DolphinDB 任务调度&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:17;524:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:63;526:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;在定义好数据 ETL 模块之后，就可以通过以下步骤实现 DolphinDB ETL 任务的调度：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:16;528:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:49;528:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:64;528:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:47;528:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;创建相关库表&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:65;530:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;第一次执行时，需要创建相关数据库表&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:18;532:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;use stockData::createStockTable use minFactor::createMinFactorTable // 创建数据库表，库表名可以根据实际需要修改 createEntrust(&#34;dfs://stockData&#34;, &#34;entrust&#34;) createSnapshot(&#34;dfs://stockData&#34;, &#34;snapshot&#34;) createTrade(&#34;dfs://stockData&#34;, &#34;trade&#34;) createMinuteFactor(&#34;dfs://factorData&#34;, &#34;stockMinFactor&#34;)&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:50;543:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:66;543:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:48;543:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;定义函数视图并执行&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:67;545:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;由于每日定时 ETL 任务与历史批量 ETL 任务的整体处理逻辑相同，因此，在定义函数视图时通过传入参数来区分不同类型的任务，以定义&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:49;545:69&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;逐笔委托数据&lt;/b&gt;导入任务函数视图为例，具体如下 (全部函数视图定义请参照附件)：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:19;547:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;use stockData::stockDataLoad // 定义函数 def loadEntrustFV(userName=&#34;admin&#34; , userPassword=&#34;123456&#34;, startDate = 2023.02.01, endDate = 2023.02.01, dbName = &#34;dfs://stockData&#34;, tbName = &#34;entrust&#34;, filePath = &#34;/hdd/hdd8/ymchen&#34;, loadType = &#34;daily&#34;) { infoTb = table(1:0,[&#34;info&#34;] ,[STRING]) if(loadType == &#34;daily&#34;) { sDate = today() eDate = today() loadEntrust(userName, userPassword, sDate, eDate, dbName, tbName, filePath, loadType,infoTb) } else if(loadType == &#34;batch&#34;) { loadEntrust(userName, userPassword, date(startDate), date(endDate), dbName, tbName, filePath, loadType,infoTb) } return infoTb }&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:68;567:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:50;567:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;注意&lt;/b&gt;：在定义函数视图时，一些默认参数如数据存放路径：filePath 需要根据实际情况进行更改&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:51;568:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:69;568:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:51;568:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;创建 DolphinDB 任务节点&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:70;570:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;创建好每个任务的函数视图之后，每个函数视图对应于 DolphinScheduler 上的一个任务节点，以&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:52;570:55&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;逐笔委托数据&lt;/b&gt;导入任务为例，我们分以下两种情况：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:5;572:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:52;572:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:71;572:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;对于&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:53;572:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;每日定时任务&lt;/b&gt;，由于我们在定义函数视图时已经针对每日定时任务做了默认参数处理，因此仅需在 DolphinScheduler 任务节点的 SQL 语句中输入：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:20;574:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;loadEntrustFV();&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:53;578:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:72;578:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;对于&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:54;578:8&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;历史批量任务&lt;/b&gt;，我们需要传入三个参数：开始时间 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:1;578:35&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;startDate&lt;/i&gt;，结束时间 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:2;578:52&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;endDate&lt;/i&gt; 以及任务类型 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:3;578:69&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;loadType&lt;/i&gt; ，在 DolphinScheduler 任务节点的 SQL 语句中需要输入：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:21;580:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;loadEntrustFV(startDate=${startDate},endDate=${endDate},loadType=&#34;batch&#34;);&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:73;584:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:55;584:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;注意&lt;/b&gt;：需要在 DolphinScheduler 上面定义局部参数或全局参数 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:4;584:48&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;startDate&lt;/i&gt; 和 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:5;584:62&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;endDate&lt;/i&gt; ，如何定义请参照&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:56;584:80&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;本文“如何调度 DolphinDB 任务”小节&lt;/b&gt;。&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:54;585:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:74;585:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:57;585:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;创建 DolphinDB 任务工作流&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:75;587:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;我们需要在 DolphinScheduler 上创建两个工作流，一个是定时任务工作流，一个是历史批量任务工作流。在每个工作流中需要根据 ETL 流程编排具有逻辑关系的任务节点。以&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:58;587:92&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;历史批量任务&lt;/b&gt;为例，创建如下工作流：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/dolphinscheduler_integration/13.png&#34; xtrc=&#34;image:11;589:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34; dita-ot:image-width=&#34;804&#34; dita-ot:image-height=&#34;474&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:76;591:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;创建任务工作流之后，点击&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:59;591:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;运行&lt;/b&gt;按钮就可以开始执行，点击&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:60;591:33&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;定时&lt;/b&gt;按钮就可以进行定时管理&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/dolphinscheduler_integration/14.png&#34; xtrc=&#34;image:12;593:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34; dita-ot:image-width=&#34;553&#34; dita-ot:image-height=&#34;207&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:77;595:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;运行任务后，工作流实例为绿色代表整个工作流运行成功；黑色则表示存在失败任务，可以通过双击失败的工作流实例查看具体是哪个任务执行失败。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:78;597:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;在 DolphinScheduler 中，可以&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:61;597:26&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;导入工作流&lt;/b&gt;和&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:62;597:36&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;导出工作流&lt;/b&gt;，以上介绍的 DolphinDB 每日任务与批量任务，可以直接通过附件中对应的&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:63;597:84&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;json 文件&lt;/b&gt;直接导入。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/dolphinscheduler_integration/15.png&#34; xtrc=&#34;image:13;599:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34; dita-ot:image-width=&#34;1264&#34; dita-ot:image-height=&#34;572&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:55;600:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:79;600:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:64;600:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;调度 DolphinDB ETL 工作流&lt;/b&gt;&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:80;602:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;导入工作流之后，点击&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:65;602:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;执行&lt;/b&gt;按钮就可以开始执行&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;25-获取-dolphindb-任务调度结果&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:18;604:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:18;604:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;2.5. 获取 DolphinDB 任务调度结果&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:18;604:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;251-查看-dolphindb-任务执行情况&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:19;606:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:19;606:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;2.5.1. 查看 DolphinDB 任务执行情况&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:19;606:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:81;608:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;在 DolphinScheduler 上运行 DolphinDB 工作流任务之后，可以通过以下步骤查看工作流任务运行情况：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:17;610:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:56;610:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:82;610:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;进入工作流界面，可以看到所有工作流实例的状态，在状态栏，齿轮形状代表正在运行，绿色打勾代表工作流任务成功运行，黑色打叉代表工作流任务运行失败。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/dolphinscheduler_integration/16.png&#34; xtrc=&#34;image:14;612:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34; dita-ot:image-width=&#34;1064&#34; dita-ot:image-height=&#34;346&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:57;613:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:83;613:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;在工作流实例名称下，点击想要查看的工作流实例，进入该工作流详情界面：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/dolphinscheduler_integration/17.png&#34; xtrc=&#34;image:15;615:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34; dita-ot:image-width=&#34;1227&#34; dita-ot:image-height=&#34;587&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:58;616:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:84;616:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;如上图所示，我们可以看到股票委托、快照、成交数据导入任务成功了，但是股票数据校验任务失败了，导致整个工作流任务执行失败。在该任务节点上点击&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:66;616:72&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;鼠标右键&lt;/b&gt;，然后点击&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:67;616:85&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;查看日志&lt;/b&gt;，就可以查看该任务节点具体的&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:68;616:107&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;报错信息：&lt;/b&gt;&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/dolphinscheduler_integration/18.png&#34; xtrc=&#34;image:16;618:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34; dita-ot:image-width=&#34;1148&#34; dita-ot:image-height=&#34;665&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;252-获取-dolphindb-任务运行过程中的信息&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:20;620:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:20;620:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;2.5.2. 获取 DolphinDB 任务运行过程中的信息&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:20;620:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:85;622:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;在任务执行过程中，在 DolphinScheduler 日志中并不能显示 DolphinDB 脚本中通过 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:30;622:54&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;print&lt;/codeph&gt; 函数输出的信息， 但在实践中大多数情况下存在保存任务运行信息以查看任务具体执行情况的需求。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:86;625:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;以下内容首先介绍 DolphinDB SQL 任务节点&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:69;625:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;查询类型&lt;/b&gt;和&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:70;625:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;非查询类型&lt;/b&gt;的特点，然后讲述如何在 DolphinScheduler 任务节点的日志信息中显示 DolphinDB 任务的运行信息。&lt;/p&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;2521-sql-任务节点非查询类型&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:21;627:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:21;627:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;2.5.2.1. SQL 任务节点非查询类型&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:21;627:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:87;629:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;非查询类型主要用于无结果返回的函数，它的特点主要有：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:6;631:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:59;631:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;可以以分段执行符号为界，执行多段代码。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:60;632:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;在任务节点的日志只能在报错时查看报错信息，在任务执行成功时并没有详细的运行信息。&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;2522-sql-任务节点查询类型&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:22;634:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:22;634:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;2.5.2.2. SQL 任务节点查询类型&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:22;634:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:88;636:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;查询类型主要用于有结果集返回的函数，它的特点主要有：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:7;638:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:61;638:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;在任务节点的日志不仅能在报错时查看报错信息，而且当任务执行成功时，能够在节点日志中查看在 DolphinDB 脚本中设定的运行信息。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:62;639:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;只能执行一行语句，不能执行多段代码。&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;2523-如何获取-dolphindb-任务运行过程中的信息&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:23;641:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:23;641:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;2.5.2.3. 如何获取 DolphinDB 任务运行过程中的信息&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:23;641:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:89;643:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;下面，以股票委托数据导入任务为例，介绍如何在 DolphinDB 脚本中在不同运行阶段设定运行日志信息，以及在 DolphinScheduler 上当任务执行完毕之后在日志中显示完整的运行信息。&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:8;645:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:63;645:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:90;645:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;在股票委托数据导入模块的函数中引入一个参数，该参数为内存表 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:6;645:34&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;infoTb&lt;/i&gt; ，当任务执行过程中，将需要记录的运行信息写入该表。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:22;647:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;// 模块 stockData::stockDataLoad 的 loadEntrust 函数定义如下： module stockData::stockDataLoad use stockData::stockDataProcess def loadEntrust(userName, userPassword, startDate, endDate, dbName, tbName, filePath, loadType,mutable infoTb) {     for(loadDate in startDate..endDate)     {         // 删除已有数据         dateString = temporalFormat(loadDate,&#34;yyyyMMdd&#34;)         dataCount = exec count(*) from loadTable(dbName, tbName) where date(tradeTime)=loadDate         // 如果表里面已经存在当天要处理的数据，删除库里面已有数据         if(dataCount != 0){             msg = &#34;Start to delete the entrust data, the delete date is: &#34; + dateString             print(msg) // 将运行信息添加到表中             infoTb.tableInsert(msg)             dropPartition(database(dbName), loadDate, tbName)             msg = &#34;Successfully deleted the entrust data, the delete date is: &#34; + dateString             print(msg)             infoTb.tableInsert(msg)         }         // 数据导入         // 判断数据 csv 文件是否存在         fileName = filePath + &#34;/&#34; + dateString + &#34;/&#34; + &#34;entrust.csv&#34;         if(!exists(fileName))         {             throw fileName + &#34;不存在！请检查数据源！&#34;         }         // 如果是全市场数据，数据量较大，因此分批导入         schemaTB = schemaEntrust()         tmpData1 = loadText(filename=fileName, schema=schemaTB)         tmpData1,n1,n2 = processEntrust(loadDate,tmpData1)         pt = loadTable(dbName,tbName)         msg = &#34;the data size in csv file is :&#34; + n2 + &#34;, the duplicated count is &#34; + (n1 - n2)         print(msg)         infoTb.tableInsert(msg)         for(i in 0..23)         {             startTime = 08:00:00.000 + 1200 * 1000 * i             tmpData2 = select * from tmpData1 where time(TradeTime)&amp;gt;=startTime and time(TradeTime)&amp;lt;(startTime+ 1200 * 1000)             if(size(tmpData2) &amp;lt; 1)             {                 continue             }             //数据入库             pt.append!(tmpData2)         }         msg = &#34;successfully loaded!&#34;         print(msg)         infoTb.tableInsert(msg)     } }&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:64;705:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:91;705:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;在 DolphinDB 脚本中每个函数视图中定义一个内存表，在任务执行过程中，产生一条运行信息时便写入该表，函数执行完毕后返回该表：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:23;707:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;use stockData::stockDataLoad def loadEntrustFV(userName=&#34;admin&#34; , userPassword=&#34;123456&#34;, startDate = 2023.02.01, endDate = 2023.02.01, dbName = &#34;dfs://stockData&#34;, tbName = &#34;entrust&#34;, filePath = &#34;/hdd/hdd8/ymchen&#34;, loadType = &#34;daily&#34;) {     // 定义运行信息表 infoTb = table(1:0,[&#34;info&#34;] ,[STRING])     if(loadType == &#34;daily&#34;)     {         sDate = today()         eDate = today() // 将运行信息表作为参数传入数据导入函数中，将每次需要输出的信息写入该表         loadEntrust(userName, userPassword, sDate, eDate, dbName, tbName, filePath, loadType,infoTb)     }     else if(loadType == &#34;batch&#34;)     {         loadEntrust(userName, userPassword, date(startDate), date(endDate), dbName, tbName, filePath, loadType,infoTb)     } // 返回运行信息表     return infoTb }&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:65;729:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:92;729:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;在 DolphinScheduler 工作流中添加 SQL 查询节点，用于&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:71;729:41&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;获取运行信息表的内容&lt;/b&gt;。主要实现逻辑如下：a. 通过执行股票委托数据导入函数视图，获取运行信息表对象；b. 通过 SQL 查询节点，将这个运行信息表对象转化格式，以更直观的形式显示在任务节点的日志界面中。为实现以上步骤，可通过两种方法，以下将详细介绍：&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:93;731:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;a. 在 SQL 语句中输入以下代码，将以上介绍的两个步骤整合在一行代码中：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:24;733:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&#34;\n[DOLPHINDB INFO] &#34; + concat(exec * from loadEntrustFV(startDate=${startDate},endDate=${endDate},loadType=&#34;batch&#34;),&#34;\n[DOLPHINDB INFO] &#34;);&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/dolphinscheduler_integration/19.png&#34; xtrc=&#34;image:17;737:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34; dita-ot:image-width=&#34;761&#34; dita-ot:image-height=&#34;439&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:94;739:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;b. 在 SQL 查询类型的前置任务中用于获取运行信息表，在 SQL 语句中将该表转化成目标格式。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/dolphinscheduler_integration/20.png&#34; xtrc=&#34;image:18;741:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34; dita-ot:image-width=&#34;787&#34; dita-ot:image-height=&#34;930&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:66;742:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:95;742:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;整个工作流结构图如下所示：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/dolphinscheduler_integration/21.png&#34; xtrc=&#34;image:19;744:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34; dita-ot:image-width=&#34;1114&#34; dita-ot:image-height=&#34;677&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:67;745:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:96;745:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;通过&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:72;745:6&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;鼠标右键点击&lt;/b&gt;相应任务节点，选择&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:73;745:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;查看日志&lt;/b&gt;选项，可以查看对应 DolphinDB 任务节点的运行信息。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/dolphinscheduler_integration/22.png&#34; xtrc=&#34;image:20;747:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34; dita-ot:image-width=&#34;1519&#34; dita-ot:image-height=&#34;868&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;/&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;26-dolphindb-脚本开发注意事项&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:24;749:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:24;749:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;2.6. DolphinDB 脚本开发注意事项&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:24;749:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:9;751:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:68;751:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:97;751:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;当在模块中调用插件的函数时，需要提前在多个数据节点和控制节点导入该插件。&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:69;752:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:98;752:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;在 DolphinScheduler 上传入的参数，是以字符串类型存在的。因此，在 DolphinDB 上需要进一步将其改成&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:74;752:66&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;预期的数据类型&lt;/b&gt;，比如：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:25;754:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;// 在 DolphinScheduler 上执行的语句为： loadSnapshotFV(startDate=${startDate},endDate=${endDate},loadType=&#34;batch&#34;); // 由于传入的 startDate 是字符串类型，因此在 DolphinDB 上定义该函数时需要先转成 Date 类型 类型 use stockData::stockDataLoad def loadEntrustFV(userName=&#34;admin&#34; , userPassword=&#34;123456&#34;, startDate = 2023.02.01, endDate = 2023.02.01, dbName = &#34;dfs://stockData&#34;, tbName = &#34;entrust&#34;, filePath = &#34;/hdd/hdd/ymchen&#34;, loadType = &#34;daily&#34;) {     if(loadType == &#34;batch&#34;)     {         // 使用 date(startDate) 转成 Date 类型 loadEntrust(userName, userPassword, date(startDate), date(endDate), dbName, tbName, filePath, loadType)     } } // 创建函数视图 addFunctionView(loadEntrustFV) &lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:70;773:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:99;773:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;当模块文件内容更改时，需要按照以下步骤更新函数视图&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:18;775:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:71;775:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:31;775:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;clearCachedModules&lt;/codeph&gt; 函数或者重新连接 session 清除之前缓存的模块。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:72;776:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:32;776:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;dropFunctionView&lt;/codeph&gt; 函数删除指定的函数视图。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:73;777:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:33;777:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;use&lt;/codeph&gt; 语句重新导入更改后的模块。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:74;778:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;使用 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:34;778:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;addFunctionView&lt;/codeph&gt; 函数添加新的视图。&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;3-dolphinscheduler-与-airflow-对比&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:25;780:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:25;780:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;3. DolphinScheduler 与 Airflow 对比&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:25;780:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:100;782:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;Airflow 也是一款具有不错性能的调度软件，关于它与 DolphinDB 相结合的教程可参照：&lt;xref class=&#34;- topic/xref &#34; dita-ot:orig-format=&#34;md&#34; format=&#34;dita&#34; href=&#34;ddb_airflow.md&#34; xtrc=&#34;xref:8;782:50&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;DolphinDB 与 Airflow 最佳实践&lt;/xref&gt;。以下是 DolphinScheduler 与 Airflow 在一些方面的对比：：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:2;784:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:2;784:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:4;784:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:5;784:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:6;784:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:2;784:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:18;784:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:52;784:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:75;784:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;功能&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:53;784:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:76;784:14&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;Airflow&lt;/b&gt;&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:54;784:94&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:77;784:95&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;DolphinScheduler&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:2;786:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:19;786:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:55;786:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;调度模块&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:56;786:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;自实现&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:57;786:101&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;Quartz 任务调度库&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:20;787:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:58;787:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;Job 类型&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:59;787:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;Python、Bash、HTTP、Mysql 等，支持 Operator 的自定义扩展&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:60;787:97&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;支持传统的 Shell 任务，同时支持大数据平台任务调度：MR、Spark、SQL、Python 等&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:21;788:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:61;788:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;Executor 触发&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:62;788:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;Restful&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:63;788:107&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;Restful&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:22;789:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:64;789:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;工作流&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:65;789:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;dag → tasks&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:66;789:104&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;project → flows → tasks&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:23;790:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:67;790:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;部署运维&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:68;790:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;较复杂，包括 WebServer、Scheduler、Worker&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:69;790:96&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;简单&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:24;791:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:70;791:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;单点故障&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:71;791:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;Scheduler 存在单点故障风险&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:72;791:96&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;去中心化的多 Master 和多 Worker&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:25;792:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:73;792:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;高可用额外要求&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:74;792:14&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;Celery、Dask、Mesos + Load Balancer + DB&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:75;792:99&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;不需要（本来就支持）&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:26;793:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:76;793:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;过载处理&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:77;793:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;任务太多时会卡死服务器&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:78;793:93&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;任务队列机制，单个机器上可调度的任务数量可以灵活配置，当任务过多时会缓存在任务队列中，不会造成机器卡死&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:27;794:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:79;794:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;DAG 监控界面&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:80;794:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;不能直观区分任务类型&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:81;794:95&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;任务状态、任务类型、重试次数、任务运行机器、可视化变量等关键信息一目了然&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:28;795:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:82;795:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;可视化流程定义&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:83;795:14&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;否。通过 Python 代码来绘制 DAG，使用不便，对于缺乏编码基础的业务人员存在较高使用门槛&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:84;795:65&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;是。所有流程定义都是可视化的，通过拖拽任务来绘制 DAG，配置数据源及资源，同时对于第三方系统，提供 API 方式的操作。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:29;796:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:85;796:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;快速部署&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:86;796:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;集群化部署复杂&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:87;796:97&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;一键部署&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:30;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:88;797:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;是否能暂停和恢复&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:89;797:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;否。只能先将工作流杀死再重新运行&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:90;797:84&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;支持暂停、恢复操作，支持停止操作&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:31;798:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:91;798:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;是否支持集群扩展&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:92;798:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;是，但是仅支持复杂 Executor 的水平扩展&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:93;798:86&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;是，调度器使用分布式调度，整体的调度能力会随集群的规模线性增长，Master 和 Worker 支持动态上下线&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:32;799:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:94;799:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;开发语言&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:95;799:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;Python&lt;/entry&gt;&lt;entry align=&#34;left&#34; class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:96;799:104&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;Java&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;4-常见问题&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:26;801:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:26;801:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;4. 常见问题&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:26;801:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;41-dolphinscheduler-status-显示-runningweb-的登陆页面却无法登录&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:27;803:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:27;803:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;4.1. DolphinScheduler status 显示 running，web 的登陆页面却无法登录&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:27;803:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:101;805:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;查看 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:35;805:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;standalone-server/logs/&lt;/codeph&gt; 目录下对应日期的日志中具体情况&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;42-dolphinscheduler-设置开机自启动后服务器重启无法正常启动&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:28;807:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:28;807:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;4.2. DolphinScheduler 设置开机自启动后，服务器重启无法正常启动&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:28;807:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:102;809:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;正常情况下，由于 dolphinScheduler 的 standalone 模式源码原因，需要在服务器重启前在 scheduler 部署目录执行停止脚本 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:36;809:79&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;bash ./bin/dolphinscheduler-daemon.sh stop standalone-server&lt;/codeph&gt;； 如果无法正常启动，请通过 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:37;810:14&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;ps aux | grep dolphinscheduler&lt;/codeph&gt; 找到 dolphinScheduler 的所有进程，并通过 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:38;810:77&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;kill -15 进程ID&lt;/codeph&gt; 结束这些进程后，再到 scheduler 部署目录执行启动脚本 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:39;810:125&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;bash ./bin/dolphinscheduler-daemon.sh start standalone-server&lt;/codeph&gt;&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;5-附录&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:29;812:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:29;812:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;5. 附录&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:29;812:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:19;814:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:75;814:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:78;814:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;ETL 脚本模块&lt;/b&gt;：&lt;xref class=&#34;- topic/xref &#34; format=&#34;zip&#34; href=&#34;script/dolphinscheduler_integration/ETLCase.zip&#34; xtrc=&#34;xref:9;814:16&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;?ditaot usertext?&gt;ETLCase.zip&lt;/xref&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:76;815:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:79;815:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;示例数据&lt;/b&gt;：&lt;xref class=&#34;- topic/xref &#34; format=&#34;zip&#34; href=&#34;data/dolphinscheduler_integration/20230201.zip&#34; xtrc=&#34;xref:10;815:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;?ditaot usertext?&gt;20230201.zip&lt;/xref&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:77;816:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:80;816:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;MySQL 插件&lt;/b&gt;：&lt;xref class=&#34;- topic/xref &#34; format=&#34;jar&#34; href=&#34;plugin/dolphinscheduler_integration/mysql-connector-j-8.0.31.jar&#34; xtrc=&#34;xref:11;816:16&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/dolphinscheduler_integration.md&#34;&gt;&lt;?ditaot usertext?&gt;mysql-connector-j-8.0.31.jar&lt;/xref&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;"/><meta name="wh-source-relpath" content="tutorials/dolphinscheduler_integration.md"/><meta name="wh-out-relpath" content="tutorials/dolphinscheduler_integration.html"/>

    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/commons.css?buildId=2024012323"/>
    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic.css?buildId=2024012323"/>

    <script src="../oxygen-webhelp/app/options/properties.js?buildId=20250305183303"></script>
    <script src="../oxygen-webhelp/app/localization/strings.js?buildId=2024012323"></script>
    <script src="../oxygen-webhelp/app/search/index/keywords.js?buildId=20250305183303"></script>
    <script defer="defer" src="../oxygen-webhelp/app/commons.js?buildId=2024012323"></script>
    <script defer="defer" src="../oxygen-webhelp/app/topic.js?buildId=2024012323"></script>
<link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/styles.css?buildId=2024012323"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script></head>

    <body id="dolphindb-与-dolphinscheduler-的集成" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            跳转到主要内容
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div xmlns:whc="http://www.oxygenxml.com/webhelp/components" class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="https://docs.dolphindb.cn/zh/index.html" class=" wh_logo d-none d-sm-block "><img src="../logo.png" alt="  DolphinDB 文档中心  "/></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="booktitle">  <span class="ph mainbooktitle">DolphinDB 文档中心</span>  </span></a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="搜索 " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="搜索查询" required="required"/><button type="submit" class="wh_search_button" aria-label="搜索"><span class="search_input_text">搜索</span></button></div></form>
            
            <script src="/vendors/react/umd/react.production.min.js" defer="defer"></script>
<script src="/vendors/react-dom/umd/react-dom.production.min.js" defer="defer"></script>
<script src="/vendors/dayjs/dayjs.min.js" defer="defer"></script>
<script src="/vendors/antd/dist/antd.min.js" defer="defer"></script>
<script src="/vendors/@ant-design/icons/dist/index.umd.min.js" defer="defer"></script>
<script src="/zh/index.js" type="module"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" defer="defer"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer="defer"><!--


--></script>
<script defer="defer"><!--

// 从主页重定向
const currentUrl = window.location.href;

// 判断当前URL是否包含index.html并且路径最后部分是index.html
if (currentUrl.endsWith('index.html')) {
    // 处理根目录下的index.html跳转
    const baseUrl = currentUrl.split('/index.html')[0]; // 获取index.html之前的部分
    const redirectUrl = `${baseUrl}/about/ddb_intro.html`; // 构建跳转路径
    window.location.href = redirectUrl; // 执行跳转
}

--></script>
            
        </div></div>
    </div>
</header>
        
        
         
        
        
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="../index.html"><span>主页</span></a></span></li><li><div class="topicref" data-id="about_tutorials"><div class="title"><a href="../tutorials/about_tutorials.html"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div></li><li><div class="topicref"><div class="title"><a href="../tutorials/OHLC_2.html">金融场景案例</a></div></div></li><li class="active"><div class="topicref" data-id="dolphindb-与-dolphinscheduler-的集成"><div class="title"><a href="../tutorials/dolphinscheduler_integration.html">DolphinDB 与 DolphinScheduler 的集成</a></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="切换搜索突出显示" title="切换搜索突出显示"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="折叠截面" title="折叠截面"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="打印此页" aria-label="打印此页"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem"><div data-tocid="ddb_intro-d9713e87" class="topicref" data-id="ddb_intro" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../about/ddb_intro.html" id="ddb_intro-d9713e87-link">关于DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="chap1_getstarted-d9713e136" class="topicref" data-id="chap1_getstarted" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../getstarted/chap1_getstarted.html" id="chap1_getstarted-d9713e136-link">快速上手</a><div class="wh-tooltip"><p class="shortdesc">如何快速部署 DolphinDB、建库建表、写入和查询数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="sectionddb_deployment-d9713e189" class="topicref" data-id="sectionddb_deployment" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action sectionddb_deployment-d9713e189-link" class="wh-expand-btn"></span><div class="title"><a href="../deploy/deploy_intro.html" id="sectionddb_deployment-d9713e189-link"><span class="keyword label">部署</span></a><div class="wh-tooltip"><p class="shortdesc">如何在不同的场景中部署 DolphinDB</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259" class="topicref" data-id="new_chap_database_manage_new_chap_dbmanage_landing_page" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/cfg/db_intro.html" id="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link"><span class="keyword label">数据库</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 数据库的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_streaming-d9713e3760" class="topicref" data-id="chap7_tutorials_streaming" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_streaming-d9713e3760-link" class="wh-expand-btn"></span><div class="title"><a href="../stream/str_intro.html" id="chap7_tutorials_streaming-d9713e3760-link"><span class="keyword label">流数据</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 流数据引擎及流数据计算的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e7513" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e7513-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/db_oper/import_data.html" id="tocId-d9713e7513-link">数据迁移</a><div class="wh-tooltip"><p class="shortdesc">如何从不同数据源向 DolphinDB 迁移数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_system_management-d9713e7940" class="topicref" data-id="chap7_tutorials_system_management" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_system_management-d9713e7940-link" class="wh-expand-btn"></span><div class="title"><a href="../sys_man/om_intro.html" id="chap7_tutorials_system_management-d9713e7940-link"><span class="keyword label">系统运维</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 的系统运维功能及方法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="troubleshooting-d9713e8780" class="topicref" data-id="troubleshooting" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action troubleshooting-d9713e8780-link" class="wh-expand-btn"></span><div class="title"><a href="../error_codes/troubleshooting.html" id="troubleshooting-d9713e8780-link">故障排查</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="about_language_resources-d9713e20911" class="topicref" data-id="about_language_resources" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action about_language_resources-d9713e20911-link" class="wh-expand-btn"></span><div class="title"><a href="../progr/progr_intro.html" id="about_language_resources-d9713e20911-link"><span class="keyword label">编程语言</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 编程基本概念与方法、SQL 在 DolphinDB 的应用</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="functions_references-d9713e30925" class="topicref" data-id="functions_references" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action functions_references-d9713e30925-link" class="wh-expand-btn"></span><div class="title"><a href="../funcs/funcs_intro.html" id="functions_references-d9713e30925-link"><span class="keyword label">函数参考</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 函数分类、语法、详解及示例</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="api_protocol-d9713e94064" class="topicref" data-id="api_protocol" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action api_protocol-d9713e94064-link" class="wh-expand-btn"></span><div class="title"><a href="../api/connapi_intro.html" id="api_protocol-d9713e94064-link"><span class="keyword label">连接器 &amp; API</span></a><div class="wh-tooltip"><p class="shortdesc">面向不同编程语言的 DolphinDB API 及连接器，相关协议和用法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap6_plugin-d9713e94210" class="topicref" data-id="chap6_plugin" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap6_plugin-d9713e94210-link" class="wh-expand-btn"></span><div class="title"><a href="../plugins/plg_intro.html" id="chap6_plugin-d9713e94210-link"><span class="keyword label">插件</span></a><div class="wh-tooltip"><p class="shortdesc">多个应用场景的插件使用说明和插件开发指导</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="third_party-d9713e97904" class="topicref" data-id="third_party" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action third_party-d9713e97904-link" class="wh-expand-btn"></span><div class="title"><a href="../third_party.html" id="third_party-d9713e97904-link">第三方工具</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="about_tutorials-d9713e98227" class="topicref" data-id="about_tutorials" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action about_tutorials-d9713e98227-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/about_tutorials.html" id="about_tutorials-d9713e98227-link"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98280" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98280-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/new_users_finance.html" id="tocId-d9713e98280-link">新用户入门</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98327" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98327-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/database.html" id="tocId-d9713e98327-link">数据库</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e99111" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e99111-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/std_sql_ddb.html" id="tocId-d9713e99111-link">编程</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100448" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100448-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming-real-time-correlation-processing_2.html" id="tocId-d9713e100448-link">流数据</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100955" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100955-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/scheduledJob_2.html" id="tocId-d9713e100955-link">系统运维</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="模块概述-d9713e101923" class="topicref" data-id="模块概述" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action 模块概述-d9713e101923-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/tu_modules.html" id="模块概述-d9713e101923-link">模块</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="tocId-d9713e102568" class="topicref" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action tocId-d9713e102568-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/OHLC_2.html" id="tocId-d9713e102568-link">金融场景案例</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="k-线计算-d9713e102569" class="topicref" data-id="k-线计算" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/OHLC_2.html" id="k-线计算-d9713e102569-link">K 线计算</a></div></div></li><li role="treeitem"><div data-tocid="使用-klinechart-展示-dolphindb-k-线-d9713e102615" class="topicref" data-id="使用-klinechart-展示-dolphindb-k-线" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/displaying_the_dolphindb_k-line_with_klinechart.html" id="使用-klinechart-展示-dolphindb-k-线-d9713e102615-link">使用 KLineChart 展示 DolphinDB K 线</a></div></div></li><li role="treeitem"><div data-tocid="python--hdf5-因子计算与-dolphindb-一体化因子计算方案对比-d9713e102661" class="topicref" data-id="python--hdf5-因子计算与-dolphindb-一体化因子计算方案对比" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Python_HDF5_vs_DolphinDB.html" id="python--hdf5-因子计算与-dolphindb-一体化因子计算方案对比-d9713e102661-link">Python + HDF5 因子计算与 DolphinDB 一体化因子计算方案对比</a></div></div></li><li role="treeitem"><div data-tocid="python--文件存储与-dolphindb-因子计算性能比较-d9713e102707" class="topicref" data-id="python--文件存储与-dolphindb-因子计算性能比较" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/DolphinDB_VS_PythonFile_Storage.html" id="python--文件存储与-dolphindb-因子计算性能比较-d9713e102707-link">Python + 文件存储与 DolphinDB 因子计算性能比较</a></div></div></li><li role="treeitem"><div data-tocid="python-parser-在金融量化分析场景的应用入门-d9713e102753" class="topicref" data-id="python-parser-在金融量化分析场景的应用入门" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/py_parser__quant_fin.html" id="python-parser-在金融量化分析场景的应用入门-d9713e102753-link">Python Parser 在金融量化分析场景的应用入门</a></div></div></li><li role="treeitem"><div data-tocid="处理-level-2-行情数据实例-d9713e102799" class="topicref" data-id="处理-level-2-行情数据实例" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/l2_stk_data_proc_2.html" id="处理-level-2-行情数据实例-d9713e102799-link">处理 Level-2 行情数据实例</a></div></div></li><li role="treeitem"><div data-tocid="存储金融数据的分区方案最佳实践-d9713e102845" class="topicref" data-id="存储金融数据的分区方案最佳实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/best_practices_for_partitioned_storage.html" id="存储金融数据的分区方案最佳实践-d9713e102845-link">存储金融数据的分区方案最佳实践</a></div></div></li><li role="treeitem"><div data-tocid="公募基金历史数据基础分析教程-d9713e102891" class="topicref" data-id="公募基金历史数据基础分析教程" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/public_fund_basic_analysis.html" id="公募基金历史数据基础分析教程-d9713e102891-link">公募基金历史数据基础分析教程</a></div></div></li><li role="treeitem"><div data-tocid="股票行情回放-d9713e102937" class="topicref" data-id="股票行情回放" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/stock_market_replay_2.html" id="股票行情回放-d9713e102937-link">股票行情回放</a></div></div></li><li role="treeitem"><div data-tocid="搭建行情回放服务的最佳实践-d9713e102983" class="topicref" data-id="搭建行情回放服务的最佳实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/appendices_market_replay_bp.html" id="搭建行情回放服务的最佳实践-d9713e102983-link">搭建行情回放服务的最佳实践</a></div></div></li><li role="treeitem"><div data-tocid="国内股票行情数据导入实例-d9713e103029" class="topicref" data-id="国内股票行情数据导入实例" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/stockdata_csv_import_demo.html" id="国内股票行情数据导入实例-d9713e103029-link">国内股票行情数据导入实例</a></div></div></li><li role="treeitem"><div data-tocid="基金份额参考价值-iopv-计算-d9713e103076" class="topicref" data-id="基金份额参考价值-iopv-计算" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_IOPV_2.html" id="基金份额参考价值-iopv-计算-d9713e103076-link">基金份额参考价值 IOPV 计算</a></div></div></li><li role="treeitem"><div data-tocid="基于快照行情的股票和基金-k-线合成-d9713e103122" class="topicref" data-id="基于快照行情的股票和基金-k-线合成" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/k.html" id="基于快照行情的股票和基金-k-线合成-d9713e103122-link">基于快照行情的股票和基金 K 线合成</a></div></div></li><li role="treeitem"><div data-tocid="计算基金日频因子-d9713e103168" class="topicref" data-id="计算基金日频因子" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/fund_factor_contrasted_by_py.html" id="计算基金日频因子-d9713e103168-link">计算基金日频因子</a></div></div></li><li role="treeitem"><div data-tocid="基于逐笔数据合成高频-orderbookdolphindb-orderbook-引擎-d9713e103214" class="topicref" data-id="基于逐笔数据合成高频-orderbookdolphindb-orderbook-引擎" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/orderBookSnapshotEngine.html" id="基于逐笔数据合成高频-orderbookdolphindb-orderbook-引擎-d9713e103214-link">基于逐笔数据合成高频 Orderbook：DolphinDB Orderbook 引擎</a></div></div></li><li role="treeitem"><div data-tocid="金融-poc-用户历史数据导入指导手册之股票-level-2-逐笔篇-d9713e103260" class="topicref" data-id="金融-poc-用户历史数据导入指导手册之股票-level-2-逐笔篇" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/LoadDataForPoc.html" id="金融-poc-用户历史数据导入指导手册之股票-level-2-逐笔篇-d9713e103260-link">金融 PoC 用户历史数据导入指导手册之股票 Level-2 逐笔篇</a></div></div></li><li role="treeitem"><div data-tocid="金融实时实际波动率预测-d9713e103306" class="topicref" data-id="金融实时实际波动率预测" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/ml_volatility_2.html" id="金融实时实际波动率预测-d9713e103306-link">金融实时实际波动率预测</a></div></div></li><li role="treeitem"><div data-tocid="金融因子流式实现-d9713e103352" class="topicref" data-id="金融因子流式实现" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/str_comp_fin_quant_2.html" id="金融因子流式实现-d9713e103352-link">金融因子流式实现</a></div></div></li><li role="treeitem"><div data-tocid="开发股票波动率预测模型的-676-个输入特征-d9713e103398" class="topicref" data-id="开发股票波动率预测模型的-676-个输入特征" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/metacode_derived_features_2.html" id="开发股票波动率预测模型的-676-个输入特征-d9713e103398-link">开发股票波动率预测模型的 676 个输入特征</a></div></div></li><li role="treeitem"><div data-tocid="快速搭建-level-2-快照数据流批一体因子计算平台最佳实践-d9713e103444" class="topicref" data-id="快速搭建-level-2-快照数据流批一体因子计算平台最佳实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/l2_snapshot_factor_calc_2.html" id="快速搭建-level-2-快照数据流批一体因子计算平台最佳实践-d9713e103444-link">快速搭建 Level-2 快照数据流批一体因子计算平台最佳实践</a></div></div></li><li role="treeitem"><div data-tocid="量化金融范例-d9713e103490" class="topicref" data-id="量化金融范例" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/quant_finance_examples.html" id="量化金融范例-d9713e103490-link">量化金融范例</a></div></div></li><li role="treeitem"><div data-tocid="流式计算中证-1000-指数主买主卖交易量-d9713e103536" class="topicref" data-id="流式计算中证-1000-指数主买主卖交易量" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/CSI_1000_2.html" id="流式计算中证-1000-指数主买主卖交易量-d9713e103536-link">流式计算中证 1000 指数主买/主卖交易量</a></div></div></li><li role="treeitem"><div data-tocid="深度不平衡买卖压力指标波动率计算-d9713e103583" class="topicref" data-id="深度不平衡买卖压力指标波动率计算" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/sql_performance_optimization_wap_di_rv.html" id="深度不平衡买卖压力指标波动率计算-d9713e103583-link">深度不平衡、买卖压力指标、波动率计算</a></div></div></li><li role="treeitem"><div data-tocid="实时合成自定义频订单簿快照dolphindb-insight-行情插件与订单簿引擎应用-d9713e103629" class="topicref" data-id="实时合成自定义频订单簿快照dolphindb-insight-行情插件与订单簿引擎应用" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/insight_plugin_orderbook_engine_application.html" id="实时合成自定义频订单簿快照dolphindb-insight-行情插件与订单簿引擎应用-d9713e103629-link">实时合成自定义频订单簿快照：DolphinDB INSIGHT 行情插件与订单簿引擎应用</a></div></div></li><li role="treeitem"><div data-tocid="实时计算分钟资金流-d9713e103675" class="topicref" data-id="实时计算分钟资金流" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_capital_flow_order_by_order_2.html" id="实时计算分钟资金流-d9713e103675-link">实时计算分钟资金流</a></div></div></li><li role="treeitem"><div data-tocid="实时计算高频因子-d9713e103721" class="topicref" data-id="实时计算高频因子" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/hf_factor_streaming_2.html" id="实时计算高频因子-d9713e103721-link">实时计算高频因子</a></div></div></li><li role="treeitem"><div data-tocid="实时计算日累计逐单资金流-d9713e103767" class="topicref" data-id="实时计算日累计逐单资金流" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_capital_flow_daily_2.html" id="实时计算日累计逐单资金流-d9713e103767-link">实时计算日累计逐单资金流</a></div></div></li><li role="treeitem"><div data-tocid="实时计算涨幅榜-d9713e103813" class="topicref" data-id="实时计算涨幅榜" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/rt_stk_price_inc_calc_2.html" id="实时计算涨幅榜-d9713e103813-link">实时计算涨幅榜</a></div></div></li><li role="treeitem"><div data-tocid="实时选取外汇行情多价源最优价-d9713e103859" class="topicref" data-id="实时选取外汇行情多价源最优价" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/best_price_selection.html" id="实时选取外汇行情多价源最优价-d9713e103859-link">实时选取外汇行情多价源最优价</a></div></div></li><li role="treeitem"><div data-tocid="外汇掉期估值计算-d9713e103905" class="topicref" data-id="外汇掉期估值计算" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/FxSwapValuation.html" id="外汇掉期估值计算-d9713e103905-link">外汇掉期估值计算</a></div></div></li><li role="treeitem"><div data-tocid="因子计算平台构建-d9713e103951" class="topicref" data-id="因子计算平台构建" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Python_Celery.html" id="因子计算平台构建-d9713e103951-link">因子计算平台构建</a></div></div></li><li role="treeitem"><div data-tocid="因子计算最佳实践-d9713e103997" class="topicref" data-id="因子计算最佳实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/best_practice_for_factor_calculation.html" id="因子计算最佳实践-d9713e103997-link">因子计算最佳实践</a></div></div></li><li role="treeitem"><div data-tocid="mvo_tutorial-d9713e104043" class="topicref" data-id="mvo_tutorial" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/MVO.html" id="mvo_tutorial-d9713e104043-link">优化投资组合：DolphinDB 最优化求解系列函数应用指南</a></div></div></li><li role="treeitem"><div data-tocid="中高频多因子库存储最佳实践-d9713e104090" class="topicref" data-id="中高频多因子库存储最佳实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/best_practices_for_multi_factor.html" id="中高频多因子库存储最佳实践-d9713e104090-link">中高频多因子库存储最佳实践</a></div></div></li><li role="treeitem"><div data-tocid="alphalens-在-dolphindb-中的应用因子分析建模实践-d9713e104136" class="topicref" data-id="alphalens-在-dolphindb-中的应用因子分析建模实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Practical_Factor_Analysis_Modeling.html" id="alphalens-在-dolphindb-中的应用因子分析建模实践-d9713e104136-link">Alphalens 在 DolphinDB 中的应用：因子分析建模实践</a></div></div></li><li role="treeitem" class="active"><div data-tocid="dolphindb-与-dolphinscheduler-的集成-d9713e104182" class="topicref" data-id="dolphindb-与-dolphinscheduler-的集成" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/dolphinscheduler_integration.html" id="dolphindb-与-dolphinscheduler-的集成-d9713e104182-link">DolphinDB 与 DolphinScheduler 的集成</a></div></div></li><li role="treeitem"><div data-tocid="dolphindb-与-python-airflow-最佳实践-d9713e104228" class="topicref" data-id="dolphindb-与-python-airflow-最佳实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/ddb_airflow.html" id="dolphindb-与-python-airflow-最佳实践-d9713e104228-link">DolphinDB 与 Python AirFlow 最佳实践</a></div></div></li><li role="treeitem"><div data-tocid="gplearn-d9713e104274" class="topicref" data-id="gplearn" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/gplearn.html" id="gplearn-d9713e104274-link">Shark GPLearn 快速上手</a></div></div></li><li role="treeitem"><div data-tocid="利用jit加速计算-etf-期权隐含波动率和希腊值-d9713e104320" class="topicref" data-id="利用jit加速计算-etf-期权隐含波动率和希腊值" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/IV_Greeks_Calculation_for_ETF_Options_Using_JIT.html" id="利用jit加速计算-etf-期权隐含波动率和希腊值-d9713e104320-link">利用JIT加速计算 ETF 期权隐含波动率和希腊值</a></div></div></li><li role="treeitem"><div data-tocid="基于-dolphindb-的-brinson-绩效归因模型实践-d9713e104366" class="topicref" data-id="基于-dolphindb-的-brinson-绩效归因模型实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/brinson.html" id="基于-dolphindb-的-brinson-绩效归因模型实践-d9713e104366-link">基于 DolphinDB 的 Brinson 绩效归因模型实践</a></div></div></li><li role="treeitem"><div data-tocid="基于-dolphindb-的-campisi-绩效归因模型实践-d9713e104412" class="topicref" data-id="基于-dolphindb-的-campisi-绩效归因模型实践" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/campisi.html" id="基于-dolphindb-的-campisi-绩效归因模型实践-d9713e104412-link">基于 DolphinDB 的 Campisi 绩效归因模型实践</a></div></div></li><li role="treeitem"><div data-tocid="期货分钟频cta策略回测案例-d9713e104458" class="topicref" data-id="期货分钟频cta策略回测案例" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/futures_minute_frequency_cta_strategy_backtest_example.html" id="期货分钟频cta策略回测案例-d9713e104458-link">期货分钟频CTA策略回测案例</a></div></div></li><li role="treeitem"><div data-tocid="exchdata-交易所历史股票数据自动化导入功能模块使用教程-d9713e104504" class="topicref" data-id="exchdata-交易所历史股票数据自动化导入功能模块使用教程" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/exchdata_exchange_historical_stock_data_auto_import_module_tutorial.html" id="exchdata-交易所历史股票数据自动化导入功能模块使用教程-d9713e104504-link">ExchData 交易所历史股票数据自动化导入功能模块使用教程</a></div></div></li><li role="treeitem"><div data-tocid="ficc_func_uasge_and_performance-d9713e104550" class="topicref" data-id="ficc_func_uasge_and_performance" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/ficc_func_uasge_and_performance.html" id="ficc_func_uasge_and_performance-d9713e104550-link">FICC 固收系列函数使用示例及性能</a></div></div></li><li role="treeitem"><div data-tocid="title1-d9713e104597" class="topicref" data-id="title1" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/ficc_funcs_application.html" id="title1-d9713e104597-link">FICC 固收系列函数应用场景</a></div></div></li><li role="treeitem"><div data-tocid="最优化函数_socp_的使用及转化案例-d9713e104643" class="topicref" data-id="最优化函数_socp_的使用及转化案例" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/socp_usage_case.html" id="最优化函数_socp_的使用及转化案例-d9713e104643-link">最优化函数 socp 的使用及转化案例</a></div></div></li><li role="treeitem"><div data-tocid="k_line_calculation-d9713e104689" class="topicref" data-id="k_line_calculation" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/k_line_calculation%20.html" id="k_line_calculation-d9713e104689-link">基于期货快照行情数据计算合约 K 线以及主连行情</a></div></div></li><li role="treeitem"><div data-tocid="backtest_introduction_usage-d9713e104735" class="topicref" data-id="backtest_introduction_usage" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/backtest_introduction_usage.html" id="backtest_introduction_usage-d9713e104735-link">融资融券策略回测使用说明及回测案例</a></div></div></li><li role="treeitem"><div data-tocid="stock_backtest-d9713e104781" class="topicref" data-id="stock_backtest" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/stock_backtest.html" id="stock_backtest-d9713e104781-link">股票中低频投资组合回测案例实现</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e104827" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e104827-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_engine_anomaly_alerts_2.html" id="tocId-d9713e104827-link">物联网场景案例</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105795" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105795-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/dolphindb_tensor_libtorch_tutorial.html" id="tocId-d9713e105795-link">机器学习</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105842" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105842-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/api_performance.html" id="tocId-d9713e105842-link">测试报告</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105982" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105982-link" class="wh-expand-btn"></span><div class="title"><a href="../rn/server/3_00_2.html" id="tocId-d9713e105982-link">版本说明</a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 版本发布历史</p></div></div></div></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-7 col-md-9 col-sm-12" id="wh_topic_body">
                        <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        <button id="wh_close_topic_toc_button" class="close-toc-button d-none" aria-label="Toggle topic table of content" aria-controls="wh_topic_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        <div class=" wh_topic_content body "><main role="main"><article class="- topic/topic topic" role="article" aria-labelledby="ariaid-title1"><h1 class="- topic/title title topictitle1" id="ariaid-title1">DolphinDB 与 DolphinScheduler 的集成</h1><div class="- topic/body body"><p class="- topic/p p">DolphinDB 是一款高性能时序数据库。DolphinDB 集成了功能强大的编程语言和高容量高速度的批流一体数据分析系统，
为海量数据（特别是时间序列数据）的快速存储、检索、计算及分析提供一站式解决方案。</p><p class="- topic/p p">在实际生产环境中，经常存在数据导入、转换、查询计算，更新等一系列流程任务，各个部分之间存在依赖，如何将这些 DolphinDB 任务按照需求准确、有效率地调度，可以借用 DolphinScheduler 任务调度器。</p><p class="- topic/p p">本文将从生产环境中的一个 ETL 场景出发，将 DolphinScheduler 引入到 DolphinDB 的高可用集群中，通过 DolphinScheduler 的功能来调度 DolphinDB 的数据 ETL 作业。</p></div><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title2" id="1-apache-dolphinscheduler"><h2 class="- topic/title title topictitle2" id="ariaid-title2">1. Apache DolphinScheduler</h2><div class="- topic/body body"><p class="- topic/p p">Apache DolphinScheduler 是一个分布式易扩展的可视化 DAG 工作流任务调度开源系统。该系统适用于企业级场景，提供了一个支持可视化操作任务、工作流和全生命周期数据处理的解决方案，解决了数据研发 ETL 依赖错综复杂，无法监控任务健康状态的问题。DolphinScheduler 以 DAG（Directed Acyclic Graph，DAG）流式方式组装任务，可以及时监控任务的执行状态，支持重试、指定节点恢复失败、暂停、恢复、终止任务等操作。</p></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title3" id="11-特性"><h3 class="- topic/title title topictitle3" id="ariaid-title3">1.1. 特性</h3><div class="- topic/body body"><ul class="- topic/ul ul"><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">执行定时任务</strong>：在生产环境中，一个普遍的需求是周期性地从数据源中提取、转换、加载数据到 DolphinDB，如每一天、每个小时等，DolphinScheduler 可以方便地进行定时管理，满足需求。</li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">执行历史任务</strong>：有时候我们由于业务变动，需要将历史数据进行重新计算和加载入 DolphinDB。在这种情况下，我们仅需在 DolphinScheduler Web 界面上定义相应任务的工作流，并定义和传入开始时间和结束时间的参数。通过这个步骤，我们可以处理任意时间段的数据。</li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">并行执行任务</strong>：在业务中，我们可能需要同时处理多项数据 ETL 任务，如同时导入数据到 DolphinDB 的不同表或同一个表的不同分区。DolphinScheduler 允许我们并行执行多项工作流任务，提高执行效率。</li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">高效处理编排</strong>：在生产环境中，大多数情况下存在任务之间、工作流之间有条件地执行，比如在 DolphinDB 的数据 ETL 中，下游任务依赖于上游任务的执行状态做不同的操作，有的任务之间关系错综复杂。可以在 DolphinScheduler 中可以按照逻辑对工作流进行定义，轻松编排任务之间的关系。</li></ul></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title4" id="12-安装部署"><h3 class="- topic/title title topictitle3" id="ariaid-title4">1.2. 安装部署</h3><div class="- topic/body body"><p class="- topic/p p">DolphinScheduler 可在单机、单服务器集群、多服务器集群、K8S 环境下部署，本节内容将以单机部署流程作为演示内容，仅供参考。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">前置条件</strong></p><ul class="- topic/ul ul"><li class="- topic/li li">JDK：安装 <a class="- topic/xref xref" href="https://www.oracle.com/java/technologies/downloads/" target="_blank" rel="external noopener">JDK</a>(1.8+) 并配置 JAVA_HOME 环境变量，DolphinScheduler 的启动依赖于该环境变量，同时将其下的 bin 目录追加到 <strong class="+ topic/ph hi-d/b ph b">PATH</strong> 环境变量中。</li><li class="- topic/li li">二进制包：已配置 <strong class="+ topic/ph hi-d/b ph b">DolphinDB 数据源</strong> 的 DolphinScheduler 版本，下载链接：<a class="- topic/xref xref" href="https://cdn.dolphindb.cn/downloads/apache-dolphinscheduler-3.1.7-bin.tar.gz" target="_blank" rel="external noopener">https://cdn.dolphindb.cn/downloads/apache-dolphinscheduler-3.1.7-bin.tar.gz</a></li><li class="- topic/li li">本教程将 <strong class="+ topic/ph hi-d/b ph b">MySQL</strong> 作为 DolphinScheduler 持久化的元数据库，因此要保证服务器已安装好 <strong class="+ topic/ph hi-d/b ph b">MySQL</strong>，若没有，需要下载安装，下载地址为：<a class="- topic/xref xref" href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="external noopener">MySQL 下载地址</a></li></ul><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">元数据持久化配置</strong></p><p class="- topic/p p">单机服务使用 <a class="- topic/xref xref" href="https://www.h2database.com/html/main.html" target="_blank" rel="external noopener">H2 数据库</a> 来存储元数据，而 H2 数据库是一种内存级别的数据库，因此当 DolphinScheduler 程序重启时，会导致之前定义的工作流等内容全部丢失，需要重新定义，造成效率低下和不必要的麻烦。因此，将元数据持久化是非常有必要的，DolphinScheduler 支持 <strong class="+ topic/ph hi-d/b ph b">MySQL</strong> 和 <strong class="+ topic/ph hi-d/b ph b">PostgreSQL</strong> 作为元数据的存储数据库，本文以配置 MySQL 为例，主要有以下流程：</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">解压 DolphinScheduler 程序包</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>tar -xvzf apache-dolphinscheduler-3.1.7-bin.tar.gz
cd apache-dolphinscheduler-3.1.7-bin</code></pre></li><li class="- topic/li li"><p class="- topic/p p">进入 MySQL，创建数据库和用户</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>// 创建数据库
CREATE DATABASE dolphinscheduler DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;
// 创建用户，并设置密码
CREATE USER 'dolphinscheduler'@'%' IDENTIFIED BY '密码';
// 给用户赋予库的权限
GRANT ALL PRIVILEGES ON dolphinscheduler.* TO 'dolphinscheduler'@'%';
flush privileges;</code></pre></li><li class="- topic/li li"><p class="- topic/p p">修改 <code class="+ topic/ph pr-d/codeph ph codeph">apache-dolphinscheduler-3.1.7-bin/bin/env/dolphinscheduler_env.sh</code> 文件设定环境变量，将 <code class="+ topic/ph pr-d/codeph ph codeph">{user}</code> 和 <code class="+ topic/ph pr-d/codeph ph codeph">{password}</code> 改为上一步创建的用户名和密码</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>export DATABASE=mysql
export SPRING_PROFILES_ACTIVE=${DATABASE}
export SPRING_DATASOURCE_URL="jdbc:mysql://127.0.0.1:3306/dolphinscheduler?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false"
export SPRING_DATASOURCE_USERNAME={user}
export SPRING_DATASOURCE_PASSWORD={password}</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>：如果 MySQL 数据库版本为 MySQL 8, 以上配置中 useSSL 应设置为 true。</p></li><li class="- topic/li li"><p class="- topic/p p">修改 <code class="+ topic/ph pr-d/codeph ph codeph">apache-dolphinscheduler-3.1.7-bin/standalone-server/conf/application.yaml</code> 文件中的配置（在文件尾部），上半部分由于这里用的不是 postgresql，注释掉即可。将 <code class="+ topic/ph pr-d/codeph ph codeph">{user}</code> 和 <code class="+ topic/ph pr-d/codeph ph codeph">{password}</code> 改为上面创建的用户名和密码</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>---
#spring:
#  config:
#    activate:
#      on-profile: postgresql
#  quartz:
#    properties:
#      org.quartz.jobStore.driverDelegateClass: org.quartz.impl.jdbcjobstore.PostgreSQLDelegate
#  datasource:
#    driver-class-name: org.postgresql.Driver
#    url: jdbc:postgresql://127.0.0.1:5432/dolphinscheduler
#    username: root
#    password: root

---
spring:
  config:
    activate:
      on-profile: mysql
  sql:
     init:
       schema-locations: classpath:sql/dolphinscheduler_mysql.sql
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://127.0.0.1:3306/dolphinscheduler?useUnicode=true&amp;characterEncoding=UTF-8
    username: {user}
    password: {password}
</code></pre></li><li class="- topic/li li"><p class="- topic/p p">初始化数据库，如果上述步骤没有问题，这里就不会报错：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>bash apache-dolphinscheduler-3.1.7-bin/tools/bin/upgrade-schema.sh</code></pre></li><li class="- topic/li li"><p class="- topic/p p">执行完成之后进入 MySQL 查询会发现名称为 <code class="+ topic/ph pr-d/codeph ph codeph">dolphinscheduler</code> 的数据库已经生成了很多表格</p><img class="- topic/image image" src="images/dolphinscheduler_integration/1.png"/><br/></li></ul><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">启动 DolphinScheduler 单机服务器</strong></p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>：</p><ul class="- topic/ul ul"><li class="- topic/li li">启动 DolphinScheduler 依赖多个端口号，分别是：<code class="+ topic/ph pr-d/codeph ph codeph">12345、50052、25333、25334、1234、5678</code></li><li class="- topic/li li">使用 <code class="+ topic/ph pr-d/codeph ph codeph">lsof -i:&lt;port&gt;</code>  检查以上端口号是否被占用，如果有端口被别的进程占用，修改 <code class="+ topic/ph pr-d/codeph ph codeph">apache-dolphinscheduler-3.1.7-bin/standalone-server/conf/application.yaml</code> 中对应的端口</li></ul><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">当配置好以上内容之后，进入执行 <code class="+ topic/ph pr-d/codeph ph codeph">apache-dolphinscheduler-3.1.7-bin</code> 目录并执行以下命令启动：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>bash ./bin/dolphinscheduler-daemon.sh start standalone-server</code></pre></li><li class="- topic/li li"><p class="- topic/p p">输入以下命令查看是否执行成功</p><p class="- topic/p p">a. 运行 <code class="+ topic/ph pr-d/codeph ph codeph">jps</code> 查看相应实例是否已在进程中</p><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">&lt;img src="images/dolphinscheduler_integration/2.png"&gt;</code></p><p class="- topic/p p">b. 运行 <code class="+ topic/ph pr-d/codeph ph codeph">bash ./bin/dolphinscheduler-daemon.sh status standalone-server</code> 查看 standalone-server 的运行状态</p><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">&lt;img src="images/dolphinscheduler_integration/3.png"&gt;</code></p></li><li class="- topic/li li"><p class="- topic/p p">停止运行</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>bash ./bin/dolphinscheduler-daemon.sh stop standalone-server</code></pre></li><li class="- topic/li li"><p class="- topic/p p">启动成功后，在浏览器中输入 <code class="+ topic/ph pr-d/codeph ph codeph">服务器IP:12345/dolphinscheduler/ui/login</code> 进行登录</p><p class="- topic/p p">a. 默认用户名：admin
b. 默认密码：dolphinscheduler123</p><p class="- topic/p p">登陆成功后将会看到如下页面：</p><img class="- topic/image image" src="images/dolphinscheduler_integration/4.png"/><br/></li></ol><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">重启 dolphinscheduler 服务，测试已经连接好数据库</p><img class="- topic/image image" src="images/dolphinscheduler_integration/5.png"/><br/></li></ul></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title5" id="13-dolphindb-与-dolphinscheduler-结合"><h3 class="- topic/title title topictitle3" id="ariaid-title5">1.3. DolphinDB 与 DolphinScheduler 结合</h3><div class="- topic/body body"><p class="- topic/p p">DolphinDB 作为强大的高性能时序数据库，能够高效存储和处理 PB 级的海量数据集，可以通过编写脚本实现数据的处理、存储、因子计算、建模、回测等任务。在实际生产中，源数据下载、数据处理、数据入库、数据校验、指标计算等任务之间存在先后关系和条件关系，如果在 DolphinDB 脚本中编写相关的逻辑关系代码，一来会造成与实际任务不相关的脚本冗余，二来如果实际业务变动，需要增加或删减部分任务，相互依赖的任务之间的关系代码也需要变动，造成更新迭代效率低下。考虑到这种情况，如果能够将 DolphinDB 与 DolphinScheduler 结合起来，在 DolphinDB 中编写相关任务代码模块，在 DolphinScheduler 上将这些任务按照逻辑编排调度，这样，就能够将任务代码和任务之间逻辑关系分开，每个部分专注于发挥自己的作用，实现更高效地运行维护。</p></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title6" id="131-如何创建-dolphindb-数据源"><h4 class="- topic/title title topictitle4" id="ariaid-title6">1.3.1. 如何创建 DolphinDB 数据源</h4><div class="- topic/body body"><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">在安装部署好 DolphinScheduler 之后，登录其 Web 界面，点击数据源中心并点击创建数据源</p><img class="- topic/image image" src="images/dolphinscheduler_integration/6.png"/><br/></li><li class="- topic/li li"><p class="- topic/p p">输入相关参数定义，创建 DolphinDB 数据源</p><img class="- topic/image image" src="images/dolphinscheduler_integration/7.png"/><br/><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>：数据库名和 jdbc 连接参数不用填，不然会报错 JDBC connect failed。</p></li></ol></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title7" id="132-如何调度-dolphindb-任务"><h4 class="- topic/title title topictitle4" id="ariaid-title7">1.3.2. 如何调度 DolphinDB 任务</h4><div class="- topic/body body"><p class="- topic/p p">创建 DolphinDB 数据源后，需要创建租户、项目、工作流，具体流程可参考：<a class="- topic/xref xref" href="https://dolphinscheduler.apache.org/zh-cn/docs/3.1.5/guide/project/workflow-definition" target="_blank" rel="external noopener">DolphinScheduler 部署流程</a></p><p class="- topic/p p">定义好工作流之后，点击该工作流进入操作界面，接着在左端拖拽 <strong class="+ topic/ph hi-d/b ph b">SQL 节点</strong> 进行 DolphinDB 任务定义</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>：SQL 类型分为查询类型和非查询类型，这两种类型分别适用于不同的使用场景，在本文“获取 DolphinDB 任务运行过程中的信息”小节中会详细介绍。</p><img class="- topic/image image" src="images/dolphinscheduler_integration/8.png"/><br/><img class="- topic/image image" src="images/dolphinscheduler_integration/9.png"/><br/><p class="- topic/p p">由于在 SQL 任务节点中，<strong class="+ topic/ph hi-d/b ph b">每次只能执行一行 DolphinDB 代码</strong>。因此，调度 DolphinDB 任务主要有以下两种途径：</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">run 函数</strong></p><p class="- topic/p p">假设 DolphinDB 脚本在服务器上的路径是：<code class="+ topic/ph pr-d/codeph ph codeph">/data/script.dos</code> ，那么，在 SQL 语句上可以输入：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>run("/data/script.dos");</code></pre></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">函数视图</strong></p><p class="- topic/p p">a. 在 DolphinDB 编写函数：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>// 在 DolphinDB 中定义一个函数，用于创建数据库表
def createTable(dbName, tbName){
login("admin", "123456")

if(!existsDatabase(dbName)){
db1 = database(, VALUE, 2020.01.01..2021.01.01)
db2 = database(, HASH, [SYMBOL, 10])
db = database(dbName, COMPO, [db1, db2], , "TSDB")
}else{
db = database(dbName)
}
if(!existsTable(dbName,tbName)){
name =`SecurityID`ChannelNo `ApplSeqNum`MDStreamID `SecurityIDSource`Price
`OrderQty`Side `TradeTIme`OrderType `OrderIndex`LocalTime `SeqNo `Market `DataStatus`BizIndex
type = [SYMBOL, INT, LONG, INT, INT, DOUBLE, INT,
SYMBOL, TIMESTAMP, SYMBOL, INT, TIME, LONG, SYMBOL,INT,LONG]
schemaTable = table(1:0, name, type)
db.createPartitionedTable(table=schemaTable, tableName=tbName,
partitionColumns=`TradeTime`SecurityID,
compressMethods={TradeTime:"delta"},
sortColumns=`Market`SecurityID`TradeTime, keepDuplicates=ALL)
}
else{
writeRunLog("数据库：" + dbName + " 数据表：" + tbName + " 已存在...")
}
}</code></pre><p class="- topic/p p">b. 将函数添加为函数视图，作用是使得该函数视图<strong class="+ topic/ph hi-d/b ph b">全局可用</strong></p><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">// 添加为函数视图 addFunctionView(createTable)</code></p><p class="- topic/p p">c. 在 dolphinScheduler 上调用该函数视图</p><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">// 在 SQL 语句内输入以下内容：createTable("dfs://testDb", "testTb");</code></p></li></ol><p class="- topic/p p">上述两种方法的区别是：</p><ul class="- topic/ul ul"><li class="- topic/li li">使用 <code class="+ topic/ph pr-d/codeph ph codeph">run</code> 执行脚本不能传递参数，灵活性较差</li><li class="- topic/li li">使用函数视图可以在 DolphinScheduler 上<strong class="+ topic/ph hi-d/b ph b">传入参数</strong>，以上面为例，可以在 SQL 语句中输入：</li></ul><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>createTable(${dbName}, ${tbName});</code></pre><p class="- topic/p p">传入参数的方法有局部参数和全局参数两种方法，它们的区别是全局参数可以在创建工作流实例时直接进行修改，而局部参数需要进入到工作流中的具体任务节点进行修改：</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">局部参数在<strong class="+ topic/ph hi-d/b ph b">定义任务节点</strong>时定义</p><img class="- topic/image image" src="images/dolphinscheduler_integration/10.png"/><br/></li><li class="- topic/li li"><p class="- topic/p p">全局参数在<strong class="+ topic/ph hi-d/b ph b">保存工作流</strong>时定义</p><img class="- topic/image image" src="images/dolphinscheduler_integration/11.png"/><br/></li></ol></div></article></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title8" id="2-调度-dolphindb-数据-etl-任务"><h2 class="- topic/title title topictitle2" id="ariaid-title8">2. 调度 DolphinDB 数据 ETL 任务</h2><div class="- topic/body body"></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title9" id="21-任务流程结构"><h3 class="- topic/title title topictitle3" id="ariaid-title9">2.1. 任务流程结构</h3><div class="- topic/body body"><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">文件结构</strong></p><img class="- topic/image image" src="images/dolphinscheduler_integration/12.png"/><br/></li></ul></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title10" id="211-dolphindb-功能模块部分"><h4 class="- topic/title title topictitle4" id="ariaid-title10">2.1.1. DolphinDB 功能模块部分</h4><div class="- topic/body body"><ul class="- topic/ul ul"><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">stockData</strong> : 数据导入模块<ul class="- topic/ul ul"><li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">createStockTable.dos</code> : 定义创建相应的股票数据库表的函数。</li><li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">stockDataProcess.dos</code> : 定义将源数据进行清洗、处理与格式转换的函数。</li><li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">stockDataLoad.dos</code> : 定义将数据导入相应的 DolphinDB 库表的函数。</li></ul></li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">minFactor</strong> : 分钟线因子指标相关模块<ul class="- topic/ul ul"><li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">createMinFactorTable.dos</code> : 定义创建分钟线因子指标库表的函数。</li><li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">computeMinFactor.dos</code> : 定义计算分钟线因子指标的函数。</li></ul></li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">dataCheck</strong> : 数据校验模块<ul class="- topic/ul ul"><li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">stockCheck.dos</code> : 定义校验导入的股票逐笔委托、快照行情、逐笔成交数据的函数。</li><li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">minFactorCheck.dos</code> : 定义校验分钟线因子指标数据的函数。</li></ul></li></ul></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title11" id="212-dolphindb-脚本部分"><h4 class="- topic/title title topictitle4" id="ariaid-title11">2.1.2. DolphinDB 脚本部分</h4><div class="- topic/body body"><ul class="- topic/ul ul"><li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">initTable.dos</code> : 执行该脚本可以创建相应的股票数据库表和分钟因子指标库表。</li><li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">createFuncView.dos</code> : 执行该脚本可以定义需要在 <strong class="+ topic/ph hi-d/b ph b">dolphinScheduler</strong> 上用到的函数视图。</li></ul></div></article></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title12" id="22-数据介绍"><h3 class="- topic/title title topictitle3" id="ariaid-title12">2.2. 数据介绍</h3><div class="- topic/body body"><p class="- topic/p p">本文选取了 20230201 上交所某股票 level 2 委托数据、快照数据、成交数据作为演示。以下是<strong class="+ topic/ph hi-d/b ph b">逐笔委托表</strong>在 DolphinDB 的结构。快照数据和成交数据结构可在附件中查看：</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="22-数据介绍__entry__1"><strong class="+ topic/ph hi-d/b ph b">字段名</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="22-数据介绍__entry__2"><strong class="+ topic/ph hi-d/b ph b">字段含义</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="22-数据介绍__entry__3"><strong class="+ topic/ph hi-d/b ph b">数据类型 (DolphinDB)</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__1">ChannelNo</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__2">通道代码</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__3">INT</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__1">ApplSeqNum</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__2">消息记录号</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__3">LONG</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__1">MDStreamID</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__2">行情类别</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__3">INT</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__1">SecurityID</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__2">证券代码</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__3">SYMBOL</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__1">SecurityIDSource</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__2">证券代码源</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__3">INT</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__1">Price</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__2">委托价格</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__3">DOUBLE</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__1">OrderQty</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__2">委托数量</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__3">INT</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__1">Side</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__2">委托买卖方向</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__3">SYMBOL</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__1">TradeTime</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__2">委托时间</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__3">TIMESTAMP</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__1">OrderType</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__2">委托类型</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__3">SYMBOL</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__1">OrderIndex</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__2">委托序号</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__3">INT</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__1">LocalTime</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__2">本地接受时间戳</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__3">TIME</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__1">SeqNo</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__2">消息序列号</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__3">LONG</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__1">Market</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__2">交易市场</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__3">SYMBOL</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__1">DataStatus</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__2">数据状态</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__3">INT</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__1">BizIndex</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__2">业务序列号</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="22-数据介绍__entry__3">LONG</td></tr></tbody></table></div></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title13" id="23-数据导入指标计算与校验任务"><h3 class="- topic/title title topictitle3" id="ariaid-title13">2.3. 数据导入、指标计算与校验任务</h3><div class="- topic/body body"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>：以下各部分内容均将相关函数定义在模块中，以方便进行工程化管理，关于 DolphinDB 模块的创建、加载、调用方法，请参照：<a class="- topic/xref xref" href="module_tutorial.html">DolphinDB 模块复用教程</a></p></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title14" id="231-数据清洗处理入表"><h4 class="- topic/title title topictitle4" id="ariaid-title14">2.3.1. 数据清洗、处理、入表</h4><div class="- topic/body body"><p class="- topic/p p">由于源数据的字段结构有时候不符合我们的业务需求，因此需要增删、处理一些字段后再导入数据库，下面以<strong class="+ topic/ph hi-d/b ph b">逐笔委托数据</strong>为例，介绍源数据经清洗、处理后再导入库表的过程，快照和成交数据的处理逻辑与委托数据相同，详细内容可以在附件中查看。</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">创建数据库表</strong></p><p class="- topic/p p">逐笔委托、快照、逐笔成交数据都保存在同一个库中，本文采用了组合分区作为分区方案，第一层按天分区，第二层对股票代码分 25 个哈希分区。如何确定数据分区请参照：<a class="- topic/xref xref" href="database.html">DolphinDB 数据库分区教程</a></p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>module createStockTable

// 创建逐笔委托数据存储库表
def createEntrust(dbName, tbName,userName = "admin",password = "123456")
{
    login(userName, password)
    if(!existsDatabase(dbName))
    {
        db1 = database(, VALUE, 2020.01.01..2021.01.01)
        db2 = database(, HASH, [SYMBOL, 25])
        // 按天和股票组合分区
        db = database(dbName, COMPO, [db1, db2], , "TSDB")
    }
    else
    {
        db = database(dbName)
    }
    name=`ChannelNo`ApplSeqNum`MDStreamID`SecurityID`SecurityIDSource`Price`OrderQty`Side`TradeTIme`OrderType`OrderIndex`LocalTime`SeqNo`Market`DataStatus`BizIndex
    type = [INT, LONG, INT, SYMBOL, INT, DOUBLE, INT, SYMBOL, TIMESTAMP, SYMBOL, INT, TIME, LONG, SYMBOL,INT,LONG]
    schemaTable = table(1:0, name, type)
    // 创建分区表
    db.createPartitionedTable(table=schemaTable, tableName=tbName, partitionColumns=`TradeTime`SecurityID, compressMethods={TradeTime:"delta"}, sortColumns=`Market`SecurityID`TradeTime, keepDuplicates=ALL)
}</code></pre></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">csv 数据清洗与处理</strong></p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>module stockData::stockDataProcess

// 定义逐笔委托 csv 数据文件中各个字段的名称和字段类型
def schemaEntrust()
{
    name = `DataStatus`OrderIndex`ChannelNo`SecurityID`TradeTime`OrderType`ApplSeqNum`Price`OrderQty`Side`BizIndex`LocalTime`SeqNo
    typeString = `INT`LONG`INT`SYMBOL`TIME`SYMBOL`INT`DOUBLE`INT`SYMBOL`INT`TIME`INT
    return table(name, typeString)
}

// 数据处理函数，包括字段增加，数据去重等操作
def processEntrust(loadDate, mutable t)
{
    // 字段名替换
    t.replaceColumn!(`TradeTime, concatDateTime(day, t.TradeTime))
    n1 = t.size()
    // 数据去重
    t = select * from t where isDuplicated([DataStatus, OrderIndex, ChannelNo, SecurityID, TradeTime, OrderType, ApplSeqNum, Price, OrderQty, Side, BizIndex],FIRST)=false
    n2 = t.size()
    // 增加字段
    update t set Market = `sh
    update t set MDStreamID = int(NULL)
    update t set SecurityIDSource = int(NULL)
    reorderColumns!(t, `ChannelNo`ApplSeqNum`MDStreamID`SecurityID`SecurityIDSource`Price`OrderQty`Side`TradeTime`OrderType`OrderIndex`LocalTime`SeqNo`Market`DataStatus`BizIndex)
    return t,n1,n2
}</code></pre></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">将处理后的数据导入数据库表</strong></p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>module stockData::stockDataLoad
use stockData::stockDataProcess

def loadEntrust(userName, userPassword, startDate, endDate, dbName, tbName, filePath, loadType,mutable infoTb)
{
 for(loadDate in startDate..endDate)
 {
  // 删除已有数据
  dateString = temporalFormat(loadDate,"yyyyMMdd")
  dataCount = exec count(*) from loadTable(dbName, tbName) where date(tradeTime)=loadDate
  // 如果表里面已经存在当天要处理的数据，删除库里面已有数据
  if(dataCount != 0){
   msg = "Start to delete the entrust data, the delete date is: " + dateString
   print(msg)
   infoTb.tableInsert(msg)

   dropPartition(database(dbName), loadDate, tbName)
   msg = "Successfully deleted the entrust data, the delete date is: " + dateString
   print(msg)
   infoTb.tableInsert(msg)
  }
  // 数据导入
  // 判断数据csv文件是否存在
  fileName = filePath + "/" + dateString + "/" + "entrust.csv"
  if(!exists(fileName))
  {
   throw fileName + "不存在!请检查数据源!"
  }
  // 如果是全市场数据，数据量较大，因此分批导入
  schemaTB = schemaEntrust()
  tmpData1 = loadText(filename=fileName, schema=schemaTB)
  tmpData1,n1,n2 = processEntrust(loadDate,tmpData1)
  pt = loadTable(dbName,tbName)
  msg = "the data size in csv file is :" + n2 + ", the duplicated count is " + (n1 - n2)
  print(msg)
  infoTb.tableInsert(msg)
  for(i in 0..23)
  {
   startTime = 08:00:00.000 + 1200 * 1000 * i
   tmpData2 = select * from tmpData1 where time(TradeTime)&gt;=startTime and time(TradeTime)&lt;(startTime+ 1200 * 1000)
   if(size(tmpData2) &lt; 1)
   {
    continue
   }
   //数据入库
   pt.append!(tmpData2)
  }
  msg = "successfully loaded!"
  print(msg)
  infoTb.tableInsert(msg)
 }
}</code></pre></li></ul></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title15" id="232-k-分钟线因子指标计算"><h4 class="- topic/title title topictitle4" id="ariaid-title15">2.3.2. K 分钟线因子指标计算</h4><div class="- topic/body body"><p class="- topic/p p">当导入数据之后，我们希望根据业务、策略对数据进行进一步加工，形成分钟线级别的因子指标，让数据产生价值，驱动业务发展。下面，我们以计算<strong class="+ topic/ph hi-d/b ph b">成交数据</strong> K 分钟线因子指标为例，介绍该任务流程：</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">创建 K 分钟线结果存储表</strong></p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>module minFactor::createMinFactorTable

def createMinuteFactor(dbName, tbName)
{
 if(existsDatabase(dbName)){
  dropDatabase(dbName)
 }
 //按天分区
 db = database(dbName, VALUE, 2021.01.01..2021.01.03,engine = `TSDB)
 colName = `TradeDate`TradeTime`SecurityID`Open`High`Low`Close`Volume`Amount`Vwap
 colType =[DATE, MINUTE, SYMBOL, DOUBLE, DOUBLE, DOUBLE, DOUBLE, LONG, DOUBLE, DOUBLE]
 tbSchema = table(1:0, colName, colType)
   db.createPartitionedTable(table=tbSchema,tableName=tbName,partitionColumns=`TradeDate,sortColumns=`SecurityID`TradeTime,keepDuplicates=ALL)
}</code></pre></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">计算 K 分钟线因子指标并入库</strong></p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>module minFactor::computeMinFactor

def calFactorOneMinute(dbName, startDate, endDate, mutable factorTb,mutable infoTb)
{
 pt = loadTable(dbName, "trade")
 dayList = startDate..endDate
 if(dayList.size()&gt;12) dayList = dayList.cut(12)
 for(days in dayList){
  //计算分钟 K 线
  res = select first(TradePrice) as open, max(TradePrice) as high, min(TradePrice) as low, last(TradePrice) as close, sum(tradeQty) as volume,sum(TradePrice*TradeQty) as amount,sum(TradePrice*TradeQty)\sum(TradeQty) as vwap from pt where date(tradeTime) in days group by date(tradeTime) as TradeDate,minute(tradeTime) as TradeTime, SecurityID
  msg = "Start to append minute factor result , the days is: [" + concat(days, ",")+"]"
  print(msg)
  infoTb.tableInsert(msg)
  //分钟 K 线入库
  factorTb.append!(res)
  msg = "Successfully append the minute factor result to databse, the days is: [" + concat(days, ",")+"]"
  print(msg)
  infoTb.tableInsert(msg)
 }
}</code></pre></li></ul></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title16" id="233-数据校验与-k-分钟线指标校验"><h4 class="- topic/title title topictitle4" id="ariaid-title16">2.3.3. 数据校验与 K 分钟线指标校验</h4><div class="- topic/body body"><p class="- topic/p p">由于 K 分钟线因子指标计算依赖于上游导入数据的正确性，而业务中又依赖于 K 分钟线指标数据的正确性，因此，对这两部分数据进行校验是有必要的，下面介绍<strong class="+ topic/ph hi-d/b ph b">部分校验步骤</strong>，详细校验内容请参照<strong class="+ topic/ph hi-d/b ph b">附件</strong>：</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">股票数据校验</strong></p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>module dataCheck::stockCheck 

def checkStockCounts(idate,dbName)
{
 // 校验逐笔委托、快照行情、逐笔成交表的股票个数是否一致

 getCodes = def (dbName,tbName,idate) {
  tb = loadTable(dbName,tbName)
  return exec distinct(SecurityID) from tb where date(tradetime)=idate and ((Market=`sh and SecurityID like "6%")or(Market=`sz and (SecurityID like "0%" or SecurityID like "3%" ) )) 
 }
 entrustCodes = getCodes(dbName,"entrust",idate)
 tradeCodes = getCodes(dbName,"trade",idate)
    snapshotCodes = exec distinct(SecurityID) from loadTable(dbName,"snapshot") where date(tradetime)=idate and ((Market=`sh and SecurityID like "6%")or(Market=`sz and (SecurityID like "0%" or SecurityID like "3%" ))) and  HighPrice != 0
 if(entrustCodes.size() != snapshotCodes.size() or entrustCodes.size() != tradeCodes.size() or snapshotCodes.size() != tradeCodes.size())
 {
  throw "逐笔委托股票数量：" + size(entrustCodes) + " 快照行情股票数量：" + size(snapshotCodes) + " 逐笔成交股票数量：" + size(tradeCodes) + ", 它们数量不一致！"
 }
}</code></pre></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">K 分钟线指标校验</strong></p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>module dataCheck::minFactorCheck

def checkHighLowPrice(idate,dbName,tbName)
{
 // 分钟线最高价指标与最低价指标校验
 tb= loadTable(dbName,tbName)
 temp=select * from tb where tradedate=idate and High &lt; Low 
 if(size(temp)&gt;0)
 {
  throw "分钟线计算错误！分钟线最高价小于最低价！"
 }
}

def checkVolumeAmount(idate,dbName,tbName)
{
 // 分钟线交易量与交易额指标校验
 tb = loadTable(dbName,tbName)
 temp = select * from loadTable(dbName,tbName) where tradedate=idate and ((Volume == 0 and Amount != 0) or (Volume != 0 and Amount == 0))
 if(size(temp)&gt;0)
 {
  throw "分钟线计算错误！交易量和交易额不同时为 0！"
 }
}</code></pre></li></ul></div></article></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title17" id="24-实现-dolphindb-任务调度"><h3 class="- topic/title title topictitle3" id="ariaid-title17">2.4. 实现 DolphinDB 任务调度</h3><div class="- topic/body body"><p class="- topic/p p">在定义好数据 ETL 模块之后，就可以通过以下步骤实现 DolphinDB ETL 任务的调度：</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">创建相关库表</strong></p><p class="- topic/p p">第一次执行时，需要创建相关数据库表</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>use stockData::createStockTable
use minFactor::createMinFactorTable

// 创建数据库表，库表名可以根据实际需要修改
createEntrust("dfs://stockData", "entrust")
createSnapshot("dfs://stockData", "snapshot")
createTrade("dfs://stockData", "trade")
createMinuteFactor("dfs://factorData", "stockMinFactor")</code></pre></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">定义函数视图并执行</strong></p><p class="- topic/p p">由于每日定时 ETL 任务与历史批量 ETL 任务的整体处理逻辑相同，因此，在定义函数视图时通过传入参数来区分不同类型的任务，以定义<strong class="+ topic/ph hi-d/b ph b">逐笔委托数据</strong>导入任务函数视图为例，具体如下 (全部函数视图定义请参照附件)：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>use stockData::stockDataLoad
// 定义函数
def loadEntrustFV(userName="admin" , userPassword="123456", startDate = 2023.02.01, endDate = 2023.02.01, dbName = "dfs://stockData", tbName = "entrust", filePath = "/hdd/hdd8/ymchen", loadType = "daily")
{
 infoTb = table(1:0,["info"] ,[STRING])
 if(loadType == "daily")
 {
  sDate = today()
  eDate = today()
  loadEntrust(userName, userPassword, sDate, eDate, dbName, tbName, filePath, loadType,infoTb)
 }
 else if(loadType == "batch")
 {
  loadEntrust(userName, userPassword, date(startDate), date(endDate), dbName, tbName, filePath, loadType,infoTb)
 }
 return infoTb
}</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>：在定义函数视图时，一些默认参数如数据存放路径：filePath 需要根据实际情况进行更改</p></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">创建 DolphinDB 任务节点</strong></p><p class="- topic/p p">创建好每个任务的函数视图之后，每个函数视图对应于 DolphinScheduler 上的一个任务节点，以<strong class="+ topic/ph hi-d/b ph b">逐笔委托数据</strong>导入任务为例，我们分以下两种情况：</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">对于<strong class="+ topic/ph hi-d/b ph b">每日定时任务</strong>，由于我们在定义函数视图时已经针对每日定时任务做了默认参数处理，因此仅需在 DolphinScheduler 任务节点的 SQL 语句中输入：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>loadEntrustFV();</code></pre></li><li class="- topic/li li"><p class="- topic/p p">对于<strong class="+ topic/ph hi-d/b ph b">历史批量任务</strong>，我们需要传入三个参数：开始时间 <em class="+ topic/ph hi-d/i ph i">startDate</em>，结束时间 <em class="+ topic/ph hi-d/i ph i">endDate</em> 以及任务类型 <em class="+ topic/ph hi-d/i ph i">loadType</em> ，在 DolphinScheduler 任务节点的 SQL 语句中需要输入：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>loadEntrustFV(startDate=${startDate},endDate=${endDate},loadType="batch");</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>：需要在 DolphinScheduler 上面定义局部参数或全局参数 <em class="+ topic/ph hi-d/i ph i">startDate</em> 和 <em class="+ topic/ph hi-d/i ph i">endDate</em> ，如何定义请参照<strong class="+ topic/ph hi-d/b ph b">本文“如何调度 DolphinDB 任务”小节</strong>。</p></li></ol></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">创建 DolphinDB 任务工作流</strong></p><p class="- topic/p p">我们需要在 DolphinScheduler 上创建两个工作流，一个是定时任务工作流，一个是历史批量任务工作流。在每个工作流中需要根据 ETL 流程编排具有逻辑关系的任务节点。以<strong class="+ topic/ph hi-d/b ph b">历史批量任务</strong>为例，创建如下工作流：</p><img class="- topic/image image" src="images/dolphinscheduler_integration/13.png"/><br/><p class="- topic/p p">创建任务工作流之后，点击<strong class="+ topic/ph hi-d/b ph b">运行</strong>按钮就可以开始执行，点击<strong class="+ topic/ph hi-d/b ph b">定时</strong>按钮就可以进行定时管理</p><img class="- topic/image image" src="images/dolphinscheduler_integration/14.png"/><br/><p class="- topic/p p">运行任务后，工作流实例为绿色代表整个工作流运行成功；黑色则表示存在失败任务，可以通过双击失败的工作流实例查看具体是哪个任务执行失败。</p><p class="- topic/p p">在 DolphinScheduler 中，可以<strong class="+ topic/ph hi-d/b ph b">导入工作流</strong>和<strong class="+ topic/ph hi-d/b ph b">导出工作流</strong>，以上介绍的 DolphinDB 每日任务与批量任务，可以直接通过附件中对应的<strong class="+ topic/ph hi-d/b ph b">json 文件</strong>直接导入。</p><img class="- topic/image image" src="images/dolphinscheduler_integration/15.png"/><br/></li><li class="- topic/li li"><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">调度 DolphinDB ETL 工作流</strong></p><p class="- topic/p p">导入工作流之后，点击<strong class="+ topic/ph hi-d/b ph b">执行</strong>按钮就可以开始执行</p></li></ul></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title18" id="25-获取-dolphindb-任务调度结果"><h3 class="- topic/title title topictitle3" id="ariaid-title18">2.5. 获取 DolphinDB 任务调度结果</h3><div class="- topic/body body"></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title19" id="251-查看-dolphindb-任务执行情况"><h4 class="- topic/title title topictitle4" id="ariaid-title19">2.5.1. 查看 DolphinDB 任务执行情况</h4><div class="- topic/body body"><p class="- topic/p p">在 DolphinScheduler 上运行 DolphinDB 工作流任务之后，可以通过以下步骤查看工作流任务运行情况：</p><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">进入工作流界面，可以看到所有工作流实例的状态，在状态栏，齿轮形状代表正在运行，绿色打勾代表工作流任务成功运行，黑色打叉代表工作流任务运行失败。</p><img class="- topic/image image" src="images/dolphinscheduler_integration/16.png"/><br/></li><li class="- topic/li li"><p class="- topic/p p">在工作流实例名称下，点击想要查看的工作流实例，进入该工作流详情界面：</p><img class="- topic/image image" src="images/dolphinscheduler_integration/17.png"/><br/></li><li class="- topic/li li"><p class="- topic/p p">如上图所示，我们可以看到股票委托、快照、成交数据导入任务成功了，但是股票数据校验任务失败了，导致整个工作流任务执行失败。在该任务节点上点击<strong class="+ topic/ph hi-d/b ph b">鼠标右键</strong>，然后点击<strong class="+ topic/ph hi-d/b ph b">查看日志</strong>，就可以查看该任务节点具体的<strong class="+ topic/ph hi-d/b ph b">报错信息：</strong></p><img class="- topic/image image" src="images/dolphinscheduler_integration/18.png"/><br/></li></ul></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title20" id="252-获取-dolphindb-任务运行过程中的信息"><h4 class="- topic/title title topictitle4" id="ariaid-title20">2.5.2. 获取 DolphinDB 任务运行过程中的信息</h4><div class="- topic/body body"><p class="- topic/p p">在任务执行过程中，在 DolphinScheduler 日志中并不能显示 DolphinDB 脚本中通过 <code class="+ topic/ph pr-d/codeph ph codeph">print</code> 函数输出的信息，
但在实践中大多数情况下存在保存任务运行信息以查看任务具体执行情况的需求。</p><p class="- topic/p p">以下内容首先介绍 DolphinDB SQL 任务节点<strong class="+ topic/ph hi-d/b ph b">查询类型</strong>和<strong class="+ topic/ph hi-d/b ph b">非查询类型</strong>的特点，然后讲述如何在 DolphinScheduler 任务节点的日志信息中显示 DolphinDB 任务的运行信息。</p></div><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title21" id="2521-sql-任务节点非查询类型"><h5 class="- topic/title title topictitle5" id="ariaid-title21">2.5.2.1. SQL 任务节点非查询类型</h5><div class="- topic/body body"><p class="- topic/p p">非查询类型主要用于无结果返回的函数，它的特点主要有：</p><ol class="- topic/ol ol"><li class="- topic/li li">可以以分段执行符号为界，执行多段代码。</li><li class="- topic/li li">在任务节点的日志只能在报错时查看报错信息，在任务执行成功时并没有详细的运行信息。</li></ol></div></article><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title22" id="2522-sql-任务节点查询类型"><h5 class="- topic/title title topictitle5" id="ariaid-title22">2.5.2.2. SQL 任务节点查询类型</h5><div class="- topic/body body"><p class="- topic/p p">查询类型主要用于有结果集返回的函数，它的特点主要有：</p><ol class="- topic/ol ol"><li class="- topic/li li">在任务节点的日志不仅能在报错时查看报错信息，而且当任务执行成功时，能够在节点日志中查看在 DolphinDB 脚本中设定的运行信息。</li><li class="- topic/li li">只能执行一行语句，不能执行多段代码。</li></ol></div></article><article class="- topic/topic topic nested4" aria-labelledby="ariaid-title23" id="2523-如何获取-dolphindb-任务运行过程中的信息"><h5 class="- topic/title title topictitle5" id="ariaid-title23">2.5.2.3. 如何获取 DolphinDB 任务运行过程中的信息</h5><div class="- topic/body body"><p class="- topic/p p">下面，以股票委托数据导入任务为例，介绍如何在 DolphinDB 脚本中在不同运行阶段设定运行日志信息，以及在 DolphinScheduler 上当任务执行完毕之后在日志中显示完整的运行信息。</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">在股票委托数据导入模块的函数中引入一个参数，该参数为内存表 <em class="+ topic/ph hi-d/i ph i">infoTb</em> ，当任务执行过程中，将需要记录的运行信息写入该表。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>// 模块 stockData::stockDataLoad 的 loadEntrust 函数定义如下：

module stockData::stockDataLoad
use stockData::stockDataProcess

def loadEntrust(userName, userPassword, startDate, endDate, dbName, tbName, filePath, loadType,mutable infoTb)
{
    for(loadDate in startDate..endDate)
    {
        // 删除已有数据
        dateString = temporalFormat(loadDate,"yyyyMMdd")
        dataCount = exec count(*) from loadTable(dbName, tbName) where date(tradeTime)=loadDate
        // 如果表里面已经存在当天要处理的数据，删除库里面已有数据
        if(dataCount != 0){
            msg = "Start to delete the entrust data, the delete date is: " + dateString
            print(msg)
            // 将运行信息添加到表中
            infoTb.tableInsert(msg)

            dropPartition(database(dbName), loadDate, tbName)
            msg = "Successfully deleted the entrust data, the delete date is: " + dateString
            print(msg)
            infoTb.tableInsert(msg)
        }
        // 数据导入
        // 判断数据 csv 文件是否存在
        fileName = filePath + "/" + dateString + "/" + "entrust.csv"
        if(!exists(fileName))
        {
            throw fileName + "不存在！请检查数据源！"
        }
        // 如果是全市场数据，数据量较大，因此分批导入
        schemaTB = schemaEntrust()
        tmpData1 = loadText(filename=fileName, schema=schemaTB)
        tmpData1,n1,n2 = processEntrust(loadDate,tmpData1)
        pt = loadTable(dbName,tbName)
        msg = "the data size in csv file is :" + n2 + ", the duplicated count is " + (n1 - n2)
        print(msg)
        infoTb.tableInsert(msg)
        for(i in 0..23)
        {
            startTime = 08:00:00.000 + 1200 * 1000 * i
            tmpData2 = select * from tmpData1 where time(TradeTime)&gt;=startTime and time(TradeTime)&lt;(startTime+ 1200 * 1000)
            if(size(tmpData2) &lt; 1)
            {
                continue
            }
            //数据入库
            pt.append!(tmpData2)
        }
        msg = "successfully loaded!"
        print(msg)
        infoTb.tableInsert(msg)
    }
}</code></pre></li><li class="- topic/li li"><p class="- topic/p p">在 DolphinDB 脚本中每个函数视图中定义一个内存表，在任务执行过程中，产生一条运行信息时便写入该表，函数执行完毕后返回该表：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>use stockData::stockDataLoad
def loadEntrustFV(userName="admin" , userPassword="123456", startDate = 2023.02.01, endDate = 2023.02.01, dbName = "dfs://stockData", tbName = "entrust", filePath = "/hdd/hdd8/ymchen", loadType = "daily")
{
    // 定义运行信息表
    infoTb = table(1:0,["info"] ,[STRING])
    if(loadType == "daily")
    {
        sDate = today()
        eDate = today()
        // 将运行信息表作为参数传入数据导入函数中，将每次需要输出的信息写入该表
        loadEntrust(userName, userPassword, sDate, eDate, dbName, tbName, filePath, loadType,infoTb)
    }
    else if(loadType == "batch")
    {
        loadEntrust(userName, userPassword, date(startDate), date(endDate), dbName, tbName, filePath, loadType,infoTb)
    }
    // 返回运行信息表
    return infoTb
}</code></pre></li><li class="- topic/li li"><p class="- topic/p p">在 DolphinScheduler 工作流中添加 SQL 查询节点，用于<strong class="+ topic/ph hi-d/b ph b">获取运行信息表的内容</strong>。主要实现逻辑如下：a. 通过执行股票委托数据导入函数视图，获取运行信息表对象；b. 通过 SQL 查询节点，将这个运行信息表对象转化格式，以更直观的形式显示在任务节点的日志界面中。为实现以上步骤，可通过两种方法，以下将详细介绍：</p><p class="- topic/p p">a. 在 SQL 语句中输入以下代码，将以上介绍的两个步骤整合在一行代码中：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>"\n[DOLPHINDB INFO] " + concat(exec * from loadEntrustFV(startDate=${startDate},endDate=${endDate},loadType="batch"),"\n[DOLPHINDB INFO] ");</code></pre><img class="- topic/image image" src="images/dolphinscheduler_integration/19.png"/><br/><p class="- topic/p p">b. 在 SQL 查询类型的前置任务中用于获取运行信息表，在 SQL 语句中将该表转化成目标格式。</p><img class="- topic/image image" src="images/dolphinscheduler_integration/20.png"/><br/></li><li class="- topic/li li"><p class="- topic/p p">整个工作流结构图如下所示：</p><img class="- topic/image image" src="images/dolphinscheduler_integration/21.png"/><br/></li><li class="- topic/li li"><p class="- topic/p p">通过<strong class="+ topic/ph hi-d/b ph b">鼠标右键点击</strong>相应任务节点，选择<strong class="+ topic/ph hi-d/b ph b">查看日志</strong>选项，可以查看对应 DolphinDB 任务节点的运行信息。</p><img class="- topic/image image" src="images/dolphinscheduler_integration/22.png"/><br/></li></ol></div></article></article></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title24" id="26-dolphindb-脚本开发注意事项"><h3 class="- topic/title title topictitle3" id="ariaid-title24">2.6. DolphinDB 脚本开发注意事项</h3><div class="- topic/body body"><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">当在模块中调用插件的函数时，需要提前在多个数据节点和控制节点导入该插件。</p></li><li class="- topic/li li"><p class="- topic/p p">在 DolphinScheduler 上传入的参数，是以字符串类型存在的。因此，在 DolphinDB 上需要进一步将其改成<strong class="+ topic/ph hi-d/b ph b">预期的数据类型</strong>，比如：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>// 在 DolphinScheduler 上执行的语句为：
loadSnapshotFV(startDate=${startDate},endDate=${endDate},loadType="batch");

 // 由于传入的 startDate 是字符串类型，因此在 DolphinDB 上定义该函数时需要先转成 Date 类型 类型
use stockData::stockDataLoad
def loadEntrustFV(userName="admin" , userPassword="123456", startDate = 2023.02.01, endDate = 2023.02.01, dbName = "dfs://stockData", tbName = "entrust", filePath = "/hdd/hdd/ymchen", loadType = "daily")
{
    if(loadType == "batch")
    {
        // 使用 date(startDate) 转成 Date 类型
        loadEntrust(userName, userPassword, date(startDate), date(endDate), dbName, tbName, filePath, loadType)
    }
}

// 创建函数视图
addFunctionView(loadEntrustFV)
</code></pre></li><li class="- topic/li li"><p class="- topic/p p">当模块文件内容更改时，需要按照以下步骤更新函数视图</p><ul class="- topic/ul ul"><li class="- topic/li li">使用 <code class="+ topic/ph pr-d/codeph ph codeph">clearCachedModules</code> 函数或者重新连接 session 清除之前缓存的模块。</li><li class="- topic/li li">使用 <code class="+ topic/ph pr-d/codeph ph codeph">dropFunctionView</code> 函数删除指定的函数视图。</li><li class="- topic/li li">使用 <code class="+ topic/ph pr-d/codeph ph codeph">use</code> 语句重新导入更改后的模块。</li><li class="- topic/li li">使用 <code class="+ topic/ph pr-d/codeph ph codeph">addFunctionView</code> 函数添加新的视图。</li></ul></li></ol></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title25" id="3-dolphinscheduler-与-airflow-对比"><h2 class="- topic/title title topictitle2" id="ariaid-title25">3. DolphinScheduler 与 Airflow 对比</h2><div class="- topic/body body"><p class="- topic/p p">Airflow 也是一款具有不错性能的调度软件，关于它与 DolphinDB 相结合的教程可参照：<a class="- topic/xref xref" href="ddb_airflow.html">DolphinDB 与 Airflow 最佳实践</a>。以下是 DolphinScheduler 与 Airflow 在一些方面的对比：：</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="3-dolphinscheduler-与-airflow-对比__entry__1"><strong class="+ topic/ph hi-d/b ph b">功能</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="3-dolphinscheduler-与-airflow-对比__entry__2"><strong class="+ topic/ph hi-d/b ph b">Airflow</strong></th><th class="- topic/entry entry align-left colsep-0 rowsep-0" id="3-dolphinscheduler-与-airflow-对比__entry__3"><strong class="+ topic/ph hi-d/b ph b">DolphinScheduler</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__1">调度模块</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__2">自实现</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__3">Quartz 任务调度库</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__1">Job 类型</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__2">Python、Bash、HTTP、Mysql 等，支持 Operator 的自定义扩展</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__3">支持传统的 Shell 任务，同时支持大数据平台任务调度：MR、Spark、SQL、Python 等</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__1">Executor 触发</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__2">Restful</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__3">Restful</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__1">工作流</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__2">dag →  tasks</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__3">project → flows → tasks</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__1">部署运维</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__2">较复杂，包括 WebServer、Scheduler、Worker</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__3">简单</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__1">单点故障</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__2">Scheduler 存在单点故障风险</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__3">去中心化的多 Master 和多 Worker</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__1">高可用额外要求</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__2">Celery、Dask、Mesos + Load Balancer + DB</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__3">不需要（本来就支持）</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__1">过载处理</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__2">任务太多时会卡死服务器</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__3">任务队列机制，单个机器上可调度的任务数量可以灵活配置，当任务过多时会缓存在任务队列中，不会造成机器卡死</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__1">DAG 监控界面</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__2">不能直观区分任务类型</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__3">任务状态、任务类型、重试次数、任务运行机器、可视化变量等关键信息一目了然</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__1">可视化流程定义</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__2">否。通过 Python 代码来绘制 DAG，使用不便，对于缺乏编码基础的业务人员存在较高使用门槛</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__3">是。所有流程定义都是可视化的，通过拖拽任务来绘制 DAG，配置数据源及资源，同时对于第三方系统，提供 API 方式的操作。</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__1">快速部署</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__2">集群化部署复杂</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__3">一键部署</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__1">是否能暂停和恢复</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__2">否。只能先将工作流杀死再重新运行</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__3">支持暂停、恢复操作，支持停止操作</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__1">是否支持集群扩展</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__2">是，但是仅支持复杂 Executor 的水平扩展</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__3">是，调度器使用分布式调度，整体的调度能力会随集群的规模线性增长，Master 和 Worker 支持动态上下线</td></tr><tr class="- topic/row"><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__1">开发语言</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__2">Python</td><td class="- topic/entry entry align-left colsep-0 rowsep-0" headers="3-dolphinscheduler-与-airflow-对比__entry__3">Java</td></tr></tbody></table></div></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title26" id="4-常见问题"><h2 class="- topic/title title topictitle2" id="ariaid-title26">4. 常见问题</h2><div class="- topic/body body"></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title27" id="41-dolphinscheduler-status-显示-runningweb-的登陆页面却无法登录"><h3 class="- topic/title title topictitle3" id="ariaid-title27">4.1. DolphinScheduler status 显示 running，web 的登陆页面却无法登录</h3><div class="- topic/body body"><p class="- topic/p p">查看 <code class="+ topic/ph pr-d/codeph ph codeph">standalone-server/logs/</code> 目录下对应日期的日志中具体情况</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title28" id="42-dolphinscheduler-设置开机自启动后服务器重启无法正常启动"><h3 class="- topic/title title topictitle3" id="ariaid-title28">4.2. DolphinScheduler 设置开机自启动后，服务器重启无法正常启动</h3><div class="- topic/body body"><p class="- topic/p p">正常情况下，由于 dolphinScheduler 的 standalone 模式源码原因，需要在服务器重启前在 scheduler 部署目录执行停止脚本 <code class="+ topic/ph pr-d/codeph ph codeph">bash ./bin/dolphinscheduler-daemon.sh stop standalone-server</code>；
如果无法正常启动，请通过 <code class="+ topic/ph pr-d/codeph ph codeph">ps aux | grep dolphinscheduler</code> 找到 dolphinScheduler 的所有进程，并通过 <code class="+ topic/ph pr-d/codeph ph codeph">kill -15 进程ID</code> 结束这些进程后，再到 scheduler 部署目录执行启动脚本 <code class="+ topic/ph pr-d/codeph ph codeph">bash ./bin/dolphinscheduler-daemon.sh start standalone-server</code></p></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title29" id="5-附录"><h2 class="- topic/title title topictitle2" id="ariaid-title29">5. 附录</h2><div class="- topic/body body"><ul class="- topic/ul ul"><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">ETL 脚本模块</strong>：<a class="- topic/xref xref" href="script/dolphinscheduler_integration/ETLCase.zip">ETLCase.zip</a></li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">示例数据</strong>：<a class="- topic/xref xref" href="data/dolphinscheduler_integration/20230201.zip">20230201.zip</a></li><li class="- topic/li li"><strong class="+ topic/ph hi-d/b ph b">MySQL 插件</strong>：<a class="- topic/xref xref" href="plugin/dolphinscheduler_integration/mysql-connector-j-8.0.31.jar">mysql-connector-j-8.0.31.jar</a></li></ul></div></article></article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" aria-label="On this page" class="col-lg-2 d-none d-lg-block navbar d-print-none"> 
                            <div id="wh_topic_toc_content">
		                        
	                            <div class=" wh_topic_toc "><div class="wh_topic_label">在本页上</div><ul><li class="topic-item"><a href="#1-apache-dolphinscheduler" data-tocid="1-apache-dolphinscheduler">1. Apache DolphinScheduler</a><ul><li class="topic-item"><a href="#11-%E7%89%B9%E6%80%A7" data-tocid="11-特性">1.1. 特性</a></li><li class="topic-item"><a href="#12-%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2" data-tocid="12-安装部署">1.2. 安装部署</a></li><li class="topic-item"><a href="#13-dolphindb-%E4%B8%8E-dolphinscheduler-%E7%BB%93%E5%90%88" data-tocid="13-dolphindb-与-dolphinscheduler-结合">1.3. DolphinDB 与 DolphinScheduler 结合</a><ul><li class="topic-item"><a href="#131-%E5%A6%82%E4%BD%95%E5%88%9B%E5%BB%BA-dolphindb-%E6%95%B0%E6%8D%AE%E6%BA%90" data-tocid="131-如何创建-dolphindb-数据源">1.3.1. 如何创建 DolphinDB 数据源</a></li><li class="topic-item"><a href="#132-%E5%A6%82%E4%BD%95%E8%B0%83%E5%BA%A6-dolphindb-%E4%BB%BB%E5%8A%A1" data-tocid="132-如何调度-dolphindb-任务">1.3.2. 如何调度 DolphinDB 任务</a></li></ul></li></ul></li><li class="topic-item"><a href="#2-%E8%B0%83%E5%BA%A6-dolphindb-%E6%95%B0%E6%8D%AE-etl-%E4%BB%BB%E5%8A%A1" data-tocid="2-调度-dolphindb-数据-etl-任务">2. 调度 DolphinDB 数据 ETL 任务</a><ul><li class="topic-item"><a href="#21-%E4%BB%BB%E5%8A%A1%E6%B5%81%E7%A8%8B%E7%BB%93%E6%9E%84" data-tocid="21-任务流程结构">2.1. 任务流程结构</a><ul><li class="topic-item"><a href="#211-dolphindb-%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97%E9%83%A8%E5%88%86" data-tocid="211-dolphindb-功能模块部分">2.1.1. DolphinDB 功能模块部分</a></li><li class="topic-item"><a href="#212-dolphindb-%E8%84%9A%E6%9C%AC%E9%83%A8%E5%88%86" data-tocid="212-dolphindb-脚本部分">2.1.2. DolphinDB 脚本部分</a></li></ul></li><li class="topic-item"><a href="#22-%E6%95%B0%E6%8D%AE%E4%BB%8B%E7%BB%8D" data-tocid="22-数据介绍">2.2. 数据介绍</a></li><li class="topic-item"><a href="#23-%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5%E6%8C%87%E6%A0%87%E8%AE%A1%E7%AE%97%E4%B8%8E%E6%A0%A1%E9%AA%8C%E4%BB%BB%E5%8A%A1" data-tocid="23-数据导入指标计算与校验任务">2.3. 数据导入、指标计算与校验任务</a><ul><li class="topic-item"><a href="#231-%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%E5%A4%84%E7%90%86%E5%85%A5%E8%A1%A8" data-tocid="231-数据清洗处理入表">2.3.1. 数据清洗、处理、入表</a></li><li class="topic-item"><a href="#232-k-%E5%88%86%E9%92%9F%E7%BA%BF%E5%9B%A0%E5%AD%90%E6%8C%87%E6%A0%87%E8%AE%A1%E7%AE%97" data-tocid="232-k-分钟线因子指标计算">2.3.2. K 分钟线因子指标计算</a></li><li class="topic-item"><a href="#233-%E6%95%B0%E6%8D%AE%E6%A0%A1%E9%AA%8C%E4%B8%8E-k-%E5%88%86%E9%92%9F%E7%BA%BF%E6%8C%87%E6%A0%87%E6%A0%A1%E9%AA%8C" data-tocid="233-数据校验与-k-分钟线指标校验">2.3.3. 数据校验与 K 分钟线指标校验</a></li></ul></li><li class="topic-item"><a href="#24-%E5%AE%9E%E7%8E%B0-dolphindb-%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6" data-tocid="24-实现-dolphindb-任务调度">2.4. 实现 DolphinDB 任务调度</a></li><li class="topic-item"><a href="#25-%E8%8E%B7%E5%8F%96-dolphindb-%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E7%BB%93%E6%9E%9C" data-tocid="25-获取-dolphindb-任务调度结果">2.5. 获取 DolphinDB 任务调度结果</a><ul><li class="topic-item"><a href="#251-%E6%9F%A5%E7%9C%8B-dolphindb-%E4%BB%BB%E5%8A%A1%E6%89%A7%E8%A1%8C%E6%83%85%E5%86%B5" data-tocid="251-查看-dolphindb-任务执行情况">2.5.1. 查看 DolphinDB 任务执行情况</a></li><li class="topic-item"><a href="#252-%E8%8E%B7%E5%8F%96-dolphindb-%E4%BB%BB%E5%8A%A1%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E4%BF%A1%E6%81%AF" data-tocid="252-获取-dolphindb-任务运行过程中的信息">2.5.2. 获取 DolphinDB 任务运行过程中的信息</a><ul><li class="topic-item"><a href="#2521-sql-%E4%BB%BB%E5%8A%A1%E8%8A%82%E7%82%B9%E9%9D%9E%E6%9F%A5%E8%AF%A2%E7%B1%BB%E5%9E%8B" data-tocid="2521-sql-任务节点非查询类型">2.5.2.1. SQL 任务节点非查询类型</a></li><li class="topic-item"><a href="#2522-sql-%E4%BB%BB%E5%8A%A1%E8%8A%82%E7%82%B9%E6%9F%A5%E8%AF%A2%E7%B1%BB%E5%9E%8B" data-tocid="2522-sql-任务节点查询类型">2.5.2.2. SQL 任务节点查询类型</a></li><li class="topic-item"><a href="#2523-%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96-dolphindb-%E4%BB%BB%E5%8A%A1%E8%BF%90%E8%A1%8C%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E4%BF%A1%E6%81%AF" data-tocid="2523-如何获取-dolphindb-任务运行过程中的信息">2.5.2.3. 如何获取 DolphinDB 任务运行过程中的信息</a></li></ul></li></ul></li><li class="topic-item"><a href="#26-dolphindb-%E8%84%9A%E6%9C%AC%E5%BC%80%E5%8F%91%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9" data-tocid="26-dolphindb-脚本开发注意事项">2.6. DolphinDB 脚本开发注意事项</a></li></ul></li><li class="topic-item"><a href="#3-dolphinscheduler-%E4%B8%8E-airflow-%E5%AF%B9%E6%AF%94" data-tocid="3-dolphinscheduler-与-airflow-对比">3. DolphinScheduler 与 Airflow 对比</a></li><li class="topic-item"><a href="#4-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98" data-tocid="4-常见问题">4. 常见问题</a><ul><li class="topic-item"><a href="#41-dolphinscheduler-status-%E6%98%BE%E7%A4%BA-runningweb-%E7%9A%84%E7%99%BB%E9%99%86%E9%A1%B5%E9%9D%A2%E5%8D%B4%E6%97%A0%E6%B3%95%E7%99%BB%E5%BD%95" data-tocid="41-dolphinscheduler-status-显示-runningweb-的登陆页面却无法登录">4.1. DolphinScheduler status 显示 running，web 的登陆页面却无法登录</a></li><li class="topic-item"><a href="#42-dolphinscheduler-%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF%E5%8A%A8%E5%90%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%87%8D%E5%90%AF%E6%97%A0%E6%B3%95%E6%AD%A3%E5%B8%B8%E5%90%AF%E5%8A%A8" data-tocid="42-dolphinscheduler-设置开机自启动后服务器重启无法正常启动">4.2. DolphinScheduler 设置开机自启动后，服务器重启无法正常启动</a></li></ul></li><li class="topic-item"><a href="#5-%E9%99%84%E5%BD%95" data-tocid="5-附录">5. 附录</a></li></ul></div>
	                        	
                        	</div>
                        </nav>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
<title>Copyright</title><p><b> ©2025 浙江智臾科技有限公司 浙ICP备18048711号-3</b></p>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
    </body>
</html>