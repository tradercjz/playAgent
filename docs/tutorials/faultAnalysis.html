<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" data-whc_version="26.0">
    <head><link rel="shortcut icon" href="../favicon.ico"/><link rel="icon" href="../favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="工业物联网场景中，故障分析是一个关键环节。设备发生故障时，需快速定位原因。实时采集的流式数据和操作日志记录了设备当前的运行状态，如何根据这些数据快速定位故障发生原因是一个值得研究的问题。DolphinDB 历史数据回放框架为故障分析提供了一套有效的解决方案，通过 DolphinDB 历史数据回放框架，能够复现故障发生时刻场景，从而帮助工程师们更好地进行设备故障分析。 ..."/><meta name="DC.rights.owner" content="(C) 版权 2025"/><meta name="copyright" content="(C) 版权 2025"/><meta name="generator" content="DITA-OT"/><meta name="DC.type" content="topic"/><meta name="DC.coverage" content=""/><meta name="DC.relation" content="../tutorials/about_tutorials.html"/><meta name="prodname" content="DolphinDB"/><meta name="brand" content="DolphinDB"/><meta name="DC.creator" content="DolphinDB"/><meta name="DC.publisher" content="DDB N/A DDB 200"/><meta name="DC.format" content="HTML5"/><meta name="DC.identifier" content="dolphindb-历史数据回放功能应用物联网设备故障分析"/><title>DolphinDB 历史数据回放功能应用：物联网设备故障分析</title><!--  Generated with Oxygen version 26.0, build number 2024012323.  --><meta name="wh-path2root" content="../"/><meta name="wh-toc-id" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;?workdir /tmp/temp20250305183303418/tutorials?&gt;&lt;?workdir-uri file:/tmp/temp20250305183303418/tutorials/?&gt;&lt;?path2project ../?&gt;&lt;?path2project-uri ../?&gt;&lt;?path2rootmap-uri ../?&gt;&lt;topic xmlns:dita-ot=&#34;http://dita-ot.sourceforge.net/ns/201007/dita-ot&#34; xmlns:ditaarch=&#34;http://dita.oasis-open.org/architecture/2005/&#34; class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;dolphindb-历史数据回放功能应用物联网设备故障分析&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;DolphinDB 历史数据回放功能应用：物联网设备故障分析&lt;/title&gt;&lt;prolog class=&#34;- topic/prolog &#34;&gt;&lt;author class=&#34;- topic/author &#34; xtrc=&#34;author:1;12:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/author&gt;&lt;publisherinformation class=&#34;- topic/publisher bookmap/publisherinformation &#34; xtrc=&#34;publisherinformation:1;14:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:1;15:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;printlocation class=&#34;- topic/data bookmap/printlocation &#34; xtrc=&#34;printlocation:1;16:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;N/A&lt;/printlocation&gt; &lt;published class=&#34;- topic/data bookmap/published &#34; xtrc=&#34;published:1;17:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:2;18:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;publishtype class=&#34;- topic/data bookmap/publishtype &#34; value=&#34;HTML&#34; xtrc=&#34;publishtype:1;19:44&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;revisionid class=&#34;- topic/ph bookmap/revisionid &#34; xtrc=&#34;revisionid:1;20:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;200&lt;/revisionid&gt; &lt;summary class=&#34;- topic/ph bookmap/summary &#34; xtrc=&#34;summary:1;22:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:1;23:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/published&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:2;25:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/publisherinformation&gt;&lt;metadata class=&#34;- topic/metadata &#34;&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:2;39:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:1;28:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;category class=&#34;- topic/category &#34; xtrc=&#34;category:1;29:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;prodinfo class=&#34;- topic/prodinfo &#34; xtrc=&#34;prodinfo:1;34:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;prodname class=&#34;- topic/prodname &#34; xtrc=&#34;prodname:1;35:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/prodname&gt; &lt;brand class=&#34;- topic/brand &#34; xtrc=&#34;brand:1;36:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/brand&gt; &lt;/prodinfo&gt;&lt;/metadata&gt;&lt;/prolog&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:1;3:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;工业物联网场景中，故障分析是一个关键环节。设备发生故障时，需快速定位原因。实时采集的流式数据和操作日志记录了设备当前的运行状态，如何根据这些数据快速定位故障发生原因是一个值得研究的问题。DolphinDB 历史数据回放框架为故障分析提供了一套有效的解决方案，通过 DolphinDB 历史数据回放框架，能够复现故障发生时刻场景，从而帮助工程师们更好地进行设备故障分析。&lt;/p&gt;&lt;/body&gt;&lt;related-links class=&#34;- topic/related-links &#34;&gt;&lt;linkpool class=&#34;- topic/linkpool &#34; xtrc=&#34;topicref:145;188:76&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;../tutorials/about_tutorials.dita&#34; mapclass=&#34;- map/topicref bookmap/chapter &#34; role=&#34;parent&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:1;5:53&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_tutorials.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot usertext?&gt;教程&lt;/linktext&gt;&lt;?ditaot usershortdesc?&gt;&lt;desc class=&#34;- topic/desc &#34;&gt;DolphinDB 产品使用教程&lt;/desc&gt;&lt;/link&gt;&lt;/linkpool&gt;&lt;/related-links&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;1-背景&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:2;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:2;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;1. 背景&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:2;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:2;7:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;近年来，随着物联设备、新技术和新应用不断发展，积累了海量的联网监测数据和离线采集的文件数据，这些数据是物联行业，特别是故障分析领域珍贵的数据资产。故障分析需要基于这些数据按照特定的顺序进行回放处理，通过回溯历史数据，模拟真实场景，实现故障分析、数据挖掘等功能。由于物联数据回放涉及的数据量巨大，数据回放不能简单地从数据库中查询存储结果数据并进行回放处理，因此需要构建一种高效的流式回放处理能力的数据回放平台。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:3;9:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;如何高效地存储海量历史数据、如何快速地从海量历史数据中精确查找目标数据、如何将数据严格地按照时间先后顺序进行回放、如何流式呈现海量的目标历史数据，是构建一个历史数据回放平台必须要考虑的问题。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:4;11:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;DolphinDB 历史数据回放框架由分布式存储引擎、数据回放工具、流计算框架三大组件构成，通过历史数据回放框架，可以搭建一个轻量式数据回放平台，助力设备故障诊断与分析。&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/faultAnalysis/1-1.png&#34; placement=&#34;break&#34; xtrc=&#34;image:1;13:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34; dita-ot:image-width=&#34;1146&#34; dita-ot:image-height=&#34;219&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:1;13:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;图1 DolphinDB 历史数据回放框架&lt;/alt&gt;&lt;/image&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;2-dolphindb数据回放功能介绍&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:3;15:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:3;15:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;2. DolphinDB数据回放功能介绍&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:3;15:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;21-回放功能相关函数&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:4;17:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:4;17:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;2.1 回放功能相关函数&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:4;17:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:5;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;DolphinDB 历史数据回放功能通过 replay 函数实现。replay 函数按时间顺序将一个或多个数据表或数据源列表回放到数据表，以模拟实时数据写入。根据 replayRate 参数和 absoluteRate 参数的不同取值，支持指定每秒记录数、指定时间跨度回放加速倍数、全速回放三种回放模式；根据输入表到输出表的映射关系，支持 1 对 1单表回放，N 对 N 多表回放和 N 对 1 异构回放三种回放形式。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:1;21:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;replay(inputTables, outputTables, [dateColumn], [timeColumn], [replayRate], [absoluteRate=true], [parallelLevel=1])&lt;/codeblock&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:1;25:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:1;25:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;inputTables：指定数据的回放形式。inputTables 为一个表对象时，为 1 对 1 回放；inputTables是多个表对象时，为 N 对 N 回放；inputTables 为一个字典时，为N对1回放。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:2;26:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;outputTables：指定数据的回放形式。outputTables 为一个表对象时，为 1 对 1 回放或N对1异构回放；outputTables是多个表对象时，为N对N回放。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:3;27:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;replayRate：表示数据回放速度。若 absoluteRate为true，replayRate 表示每秒回放的数据条数；若absoluteRate为 false，依照数据中的时间戳加速replayRate倍回放；若 replayRate 未指定或为负，以最大速度回放&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:4;28:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;absoluteRate：为 true 时表示 replayRate 为每秒回放的记录数；为 false 时表示依照数据中的时间戳加速 replayRate 倍回放&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:6;30:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;replayDS 根据时间维度将源数据划分为若干个小的数据源，实现对数据源的进一步切分。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:2;32:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;replayDS(sqlObj, [dateColumn], [timeColumn],[timeRepartitionSchema])&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:7;36:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:1;36:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;ionSchema])&lt;/codeph&gt;&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:2;38:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:5;38:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;sqlObj：SQL 查询元代码，表示回放的数据，如&amp;lt;select * from loadTable(&#34;dfs://source&#34;, &#34;source&#34;)&amp;gt;。SQL查询的表对象是DFS表，且至少有一个分区列为DATE类型。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:6;39:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;dateColumn：日期列。若不指定，默认第一列为日期列。&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:2;39:33&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;replayDS&lt;/codeph&gt;函数默认日期列是数据源的一个分区列，并根据分区信息将原始SQL查询拆分为多个查询。&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:8;41:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;关于 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:3;41:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;replay&lt;/codeph&gt;、&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:4;41:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;replayDS &lt;/codeph&gt;函数的详细介绍可参考 &lt;xref class=&#34;- topic/xref &#34; href=&#34;../funcs/r/replay.dita&#34; xtrc=&#34;xref:1;41:35&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;replay用户手册&lt;/xref&gt;、&lt;xref class=&#34;- topic/xref &#34; href=&#34;../funcs/r/replayDS.dita&#34; xtrc=&#34;xref:2;41:72&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;replayDS用户手册&lt;/xref&gt;。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;22-1-对-1-单表回放&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:5;43:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:5;43:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;2.2 1 对 1 单表回放&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:5;43:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:9;45:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;1 对 1 单表回放适用于所有数据存放在一张表中的场景。当数据量较小时，可以将需要回放的数据读取到一张内存表中，然后将内存表作为数据源进行回放。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:10;47:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;当数据量较大时，可使用&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:5;47:12&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;replayDS&lt;/codeph&gt;函数将输入表划分为多个较小的数据源，再使用&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:6;47:43&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;replay&lt;/codeph&gt;函数从数据源中读取数据并回放到流数据表中。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:11;49:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;1 对 1 单表回放并不能满足所有的回放要求。在实际应用中，故障诊断往往涉及到传感器数据和操作日志数据，在进行故障分析时，需要将两类同时回放，这时便有了多表回放的需求。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;23-n-对-n-多表回放&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:6;51:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:6;51:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;2.3 N 对 N 多表回放&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:6;51:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:12;53:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;N 对 N 多表回放是一种将多个输入表同步回放到多个对应目标表的模式。在 N 对 N 的模式中，不同表在同一秒内的两条数据写入目标表的顺序可能和数据中的时间先后顺序不一致。此外，若采用不同的线程对下游的N个目标表进行订阅消费，也很难保证表与表之间的数据被处理的顺序关系。因此，N 对 N 回放不能保证整体上最严格的时序。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:13;55:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;故障分析领域中不同类型的数据产生是有先后顺序的，比如传感器数据和操作日志，所以在对多个数据源回放时要求每条数据都严格按照时间顺序注入目标表，为此我们需要解决以下问题：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:3;57:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:7;57:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;不同结构的数据如何统一进行排序和注入以保证整体的顺序？&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:8;58:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;如何保证对多表回放结果的实时消费也是严格按照时序进行的？&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;24-n-对-1-异构回放&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:7;60:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:7;60:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;2.4 N 对 1 异构回放&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:7;60:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:14;62:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;针对上述 N 对 N 多表回放存在的问题，DolphinDB 进一步增加了 N 对 1 异构回放，支持将多个不同表结构的数据表写入同一张异构流数据表中，从而实现了严格按时间顺序的多表回放。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:15;64:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;与 N 对 N 多表回放不同，N 对 1 异构回放将多个具有不同表结构的数据源回放到同一个输出表中，其中输出表为一张异构流数据表，至少包含三列：数据时间列、数据标识列和序列化后的数据。此外，N 对 1 异构回放对多个数据源进行全局排序，因此所得的输出表是严格的时间顺序。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:16;66:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;若要对异构流数据表进行数据处理操作，如指标计算等，则需要将二进制格式的消息内容反序列化为原始结构的一行记录。DolphinDB 在脚本语言以及在 API 中均支持了对异构流数据表的解析功能。脚本支持流数据分发引擎 streamFilter 对异构流数据表进行反序列化以及反序列后结果的数据处理；同时，各类 API 在支持流数据订阅功能的基础上，扩展支持了在订阅时对异构流数据表进行反序列化。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;3-数据回放应用数控机床异常诊断&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:8;68:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:8;68:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;3. 数据回放应用：数控机床异常诊断&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:8;68:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;31-场景&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:9;70:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:9;70:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;3.1 场景&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:9;70:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:17;72:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;在现代化的制造业环境中，数控机床以其精准、高效和自动化的特性，显著提升了生产效率和产品质量，扮演着核心角色。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:18;74:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;当数控机床运行时，其内置的传感器会持续采集各种设备状态数据。这些数据包括机床运行速度、主轴转速、刀具磨损状况、冷却液温度和压力、电机负载以及系统电力消耗等关键参数。这些实时数据会存储到数据库中，作为技术人员深入的分析的参考依据。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:19;76:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;一旦数控机床发生故障，如刀具破损、电机过热或系统错误等，设备会立即触发警报，并将相应的数据记录到故障信息表中。故障信息表会详细记录故障发生的时间、故障类型等关键信息，为后续的故障诊断和维修工作提供重要的线索。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:20;78:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;为了确保操作的合规性和可追溯性，每当操作员在数控机床上进行操作，如程序更改、刀具更换或生产参数调整等，系统会自动记录相关的操作信息到操作日志表中。这类日志详细记录了操作的时间、操作内等详细情况，便于在出现问题时进行快速的责任追溯和问题排查。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:21;80:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;通过这些详细的设备状态、异常状态信息和操作日志，工厂的技术人员和管理人员可以全面、准确地了解数控机床的运行状态和工作效率，及时发现并解决问题，从而确保生产的稳定性和效率。同时，这些数据也为设备的维护、升级和优化提供了重要的数据支持。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;32-数据说明&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:10;82:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:10;82:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;3.2 数据说明&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:10;82:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:22;84:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;数控机床传感器每秒采集温度、振幅、液压等关键信息，表结构如下表所示：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:1;86:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:1;86:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:1;86:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:2;86:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:3;86:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:1;86:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:1;86:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:1;86:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:1;86:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;字段名称&lt;/b&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:2;86:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:2;86:14&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;数据类型&lt;/b&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:3;86:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:3;86:26&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;字段描述&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:1;88:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:2;88:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:4;88:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;time&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:5;88:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;TIMESTAMP&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:6;88:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;采集时间戳&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:3;89:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:7;89:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;deviceId&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:8;89:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;SYMBOL&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:9;89:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;机床编号&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:4;90:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:10;90:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;temp&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:11;90:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:12;90:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;温度&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:5;91:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:13;91:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;amp&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:14;91:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:15;91:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;振幅&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:6;92:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:16;92:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;hydra&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:17;92:13&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;DOUBLE&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:18;92:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;液压&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:23;94:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;操作日志表记录了操作员对机床的操作内容，表结构如下表所示：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:2;96:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:2;96:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:4;96:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:5;96:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:6;96:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:2;96:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:7;96:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:19;96:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:4;96:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;字段名称&lt;/b&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:20;96:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:5;96:16&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;数据类型&lt;/b&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:21;96:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:6;96:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;字段描述&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:2;98:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:8;98:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:22;98:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;time&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:23;98:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;TIMESTAMP&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:24;98:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;操作发生时间&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:9;99:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:25;99:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;deviceId&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:26;99:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;SYMBOL&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:27;99:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;机床编号&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:10;100:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:28;100:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;operatorId&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:29;100:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;SYMBOL&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:30;100:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;员工编号&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:11;101:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:31;101:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;actionType&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:32;101:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;SYMBOL&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:33;101:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;操作类型&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:24;103:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;故障信息表记录异常发生的开始时间、持续时长等信息，表结构如下表所示：&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:3;105:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;3&#34; xtrc=&#34;tgroup:3;105:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:7;105:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:8;105:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col3&#34; colnum=&#34;3&#34; xtrc=&#34;colspec:9;105:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:3;105:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:12;105:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:34;105:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:7;105:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;字段名称&lt;/b&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:35;105:16&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:8;105:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;数据类型&lt;/b&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:36;105:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:9;105:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;字段描述&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:3;107:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:13;107:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:37;107:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;time&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:38;107:16&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;TIMESTAMP&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:39;107:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;异常开始时间&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:14;108:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:40;108:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;deviceId&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:41;108:16&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;SYMBOL&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:42;108:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;机床编号&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:15;109:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:43;109:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;persistTime&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:44;109:16&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;FLOAT&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col3&#34; dita-ot:x=&#34;3&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:45;109:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;异常持续时间&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:25;111:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;操作员的不当操作可能会引发机床故障，当故障发生后，分析人员需要第一时间了解故障是由哪些操作导致的，以便于后续的故障诊断和分析；同时，机床的温度、液压等指标也与操作类型相关，分析操作类型与机床状态指标的相关性也是故障诊断和分析中的重要一环。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:26;113:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;本文所使用的数据仿真脚本见附录 5.1。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;33-总体方案&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:11;115:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:11;115:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;3.3 总体方案&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:11;115:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:27;117:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;针对机床故障异常诊断分析，DolphinDB 解决方案如下：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/faultAnalysis/3-3.png&#34; placement=&#34;break&#34; xtrc=&#34;image:2;119:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34; dita-ot:image-width=&#34;1358&#34; dita-ot:image-height=&#34;486&#34; dita-ot:horizontal-dpi=&#34;72&#34; dita-ot:vertical-dpi=&#34;72&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:2;119:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;图2&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:28;121:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;故障发生后，将故障信息表和操作日志表中的数据异构回放到流数据表中，通过 createAsofJoinEngine 流计算引擎，将故障信息和操作日志进行实时关联，了解故障是由哪些操作引起的；并实时地回放传感器采集的机床状态数据，以便分析机床各项指标与操作类型的关系。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;34-故障诊断分析&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:12;123:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:12;123:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;3.4 故障诊断分析&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:12;123:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;341-接口说明&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:13;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:13;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;3.4.1 接口说明&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:13;125:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:29;127:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;为了便于机床故障诊断分析，本文将 DolphinDB 数据回放框架封装成了 replayIoT 函数，见附录 5.2。用户通过 json 配置便能实现倍数回放、多表回放等复杂功能。对于单表回放，函数使用说明如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:3;129:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;{ &#34;dbName&#34;:目标库，必选, &#34;tbName&#34;:目标表，必选, &#34;deviceColumn&#34;:设备名称列，必选, &#34;dateColumn&#34;:数据时间列，可选, &#34;deviceId&#34;:需要回放的设备，可选, &#34;selectColumn&#34;:需要回放的设备，可选 &#34;timeBegin&#34;:回放开始时间，可选, &#34;timeEnd&#34;:回放结束时间，可选, &#34;replayRate&#34;:回放倍率，可选, &#34;sampleRate&#34;:采样频率，可选, &#34;jobName&#34;:回放任务名称，必选 }&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:30;145:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;多表回放数据接口使用说明如下：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:4;147:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt; { &#34;leftTable&#34;:{左表参数 &#34;dbName&#34;:目标库，必选, &#34;tbName&#34;:目标表，必选, &#34;deviceColumn&#34;:设备名称列，必选, &#34;dateColumn&#34;:数据时间列，可选, &#34;deviceId&#34;:需要回放的设备，可选, &#34;timeBegin&#34;:回放开始时间，可选, &#34;timeEnd&#34;:回放结束时间，可选 }, &#34;rightTable&#34;:{右表参数 &#34;dbName&#34;:目标库，必选, &#34;tbName&#34;:目标表，必选, &#34;deviceColumn&#34;:设备名称列，必选, &#34;dateColumn&#34;:数据时间列，可选, &#34;deviceId&#34;:需要回放的设备，可选, &#34;timeBegin&#34;:回放开始时间，可选, &#34;timeEnd&#34;:回放结束时间，可选 }, &#34;matchColumn&#34;: 左表右表连接列，必选, &#34;replayRate&#34;:回放倍率，可选, &#34;sampleRate&#34;:采样频率，可选, &#34;jobName&#34;:回放任务名称，必选 }&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:31;174:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;回放的实时流式数据会注入到名为 jobName 的共享流表中，用户可以订阅该表进实时分析。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;342-诊断与分析&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:14;176:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:14;176:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;3.4.2 诊断与分析&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:14;176:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:32;178:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;通过以下 json 配置，开始异常信息与操作日志的关联回放任务：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:5;180:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;args1 = ' { &#34;leftTable&#34;:{ &#34;dbName&#34;:&#34;dfs://test_anomaly&#34;, &#34;tbName&#34;:&#34;anomaly&#34;, &#34;dateColumn&#34;:&#34;ts&#34;, &#34;deviceId&#34;:&#34;device0001&#34;, &#34;deviceColumn&#34;:&#34;deviceId&#34;, &#34;timeBegin&#34;:2024.01.01T00:00:00.000, &#34;timeEnd&#34;:2024.01.01T02:00:00.000 }, &#34;rightTable&#34;:{ &#34;dbName&#34;:&#34;dfs://test_log&#34;, &#34;tbName&#34;:&#34;log&#34;, &#34;dateColumn&#34;:&#34;ts&#34;, &#34;deviceId&#34;:&#34;device0001&#34;, &#34;deviceColumn&#34;:&#34;deviceId&#34;, &#34;timeBegin&#34;:2024.01.01T00:00:00.000, &#34;timeEnd&#34;:2024.01.01T02:00:00.000 }, &#34;matchColumn&#34;: [&#34;deviceId&#34;], &#34;jobName&#34;:&#34;warnAndLogStream&#34;, &#34;replayRate&#34;:50 } ' replayIoT(args1)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:33;209:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;回放结果如下表所示：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/faultAnalysis/3-4-2-1.png&#34; placement=&#34;break&#34; xtrc=&#34;image:3;211:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34; dita-ot:image-width=&#34;1919&#34; dita-ot:image-height=&#34;300&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:3;211:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;图3&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:34;213:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;从上述结果可知，F1、F2、F3 三种操作可能会导致机床发生故障，因此在实际生产中，操纵员需要谨慎进行 F1、F2、F3 这三种类型的操作。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:35;215:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;通过以下 json 配置，开始机床各项指标数据的回放任务：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:6;217:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;args2 = ' { &#34;dbName&#34;:&#34;dfs://test_state&#34;, &#34;tbName&#34;:&#34;state&#34;, &#34;deviceColumn&#34;:&#34;deviceId&#34;, &#34;dateColumn&#34;:&#34;ts&#34;, &#34;deviceId&#34;:[&#34;device0001&#34;], &#34;timeBegin&#34;:2024.01.01T00:00:00.000, &#34;timeEnd&#34;:2024.01.01T02:00:00.000, &#34;replayRate&#34;:50, &#34;sampleRate&#34;:60s, &#34;jobName&#34;:&#34;stateStream&#34; } ' replayIoT(args2)&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:36;235:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;回放结果如下表所示：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/faultAnalysis/3-4-2-2.png&#34; placement=&#34;break&#34; xtrc=&#34;image:4;237:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34; dita-ot:image-width=&#34;1107&#34; dita-ot:image-height=&#34;432&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:4;237:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;图4&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:37;239:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;借助 DolphinDB Dashboard 功能，可将上述回放的机床各项指标进行实时的可视化展示，可视化结果如下图所示：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/faultAnalysis/3-4-2-3.png&#34; placement=&#34;break&#34; xtrc=&#34;image:5;241:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34; dita-ot:image-width=&#34;1362&#34; dita-ot:image-height=&#34;381&#34; dita-ot:horizontal-dpi=&#34;96&#34; dita-ot:vertical-dpi=&#34;96&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:5;241:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;图5&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:38;243:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;从上图可知，机床正常运行时，温度、液压和振幅曲线是规律的三角函数曲线。当故障发生后，温度、液压和振幅会明显偏低或偏高。从结果上来看，进行F1操作时，机床温度、振幅低于平均水平，液压高于平均水平，导致机床发生故障；进行F2操作时，机床温度、振幅高于平均水平，导致机床发生故障；进行 F3 操作时，机床振幅、液压低于平均水平，导致机床发生故障。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;4-总结&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:15;245:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:15;245:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;4. 总结&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:15;245:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:39;247:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;本教程以数控机床故障诊断为例，详细介绍了如何利用 DolphinDB 的历史数据回放功能分析设备故障。DolphinDB 的历史数据回放功能在非常多的领域可以发挥其价值。例如，在无人机飞行状态监测中，回放功能可以帮助用户重现飞行状态，便于排查故障；在无线电检测中，通过回放大规模的监测数据，实现多维度瀑布图回放、占用度趋势分析及信号模拟等功能。DolphinDB 的历史数据回放功能可以为企业提供强大的数据分析能力，有助于提高故障排查效率和优化业务决策。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;5-附录&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:16;249:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:16;249:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;5. 附录&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:16;249:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;51-数据仿真脚本&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:17;251:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:17;251:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;5.1 数据仿真脚本&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:17;251:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:40;253:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;dos&#34; href=&#34;data/faultAnalysis/dataSimulate.dos&#34; xtrc=&#34;xref:3;253:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;?ditaot usertext?&gt;dataSimulate.dos&lt;/xref&gt;&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;52-数据回放框架接口-replayiot&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:18;255:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:18;255:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;5.2 数据回放框架接口 replayIoT&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:18;255:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:41;257:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;xref class=&#34;- topic/xref &#34; format=&#34;dos&#34; href=&#34;data/faultAnalysis/replayIoT.dos&#34; xtrc=&#34;xref:4;257:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/faultAnalysis.md&#34;&gt;&lt;?ditaot usertext?&gt;replayIoT.dos&lt;/xref&gt;&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;/topic&gt;"/><meta name="wh-source-relpath" content="tutorials/faultAnalysis.md"/><meta name="wh-out-relpath" content="tutorials/faultAnalysis.html"/>

    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/commons.css?buildId=2024012323"/>
    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic.css?buildId=2024012323"/>

    <script src="../oxygen-webhelp/app/options/properties.js?buildId=20250305183303"></script>
    <script src="../oxygen-webhelp/app/localization/strings.js?buildId=2024012323"></script>
    <script src="../oxygen-webhelp/app/search/index/keywords.js?buildId=20250305183303"></script>
    <script defer="defer" src="../oxygen-webhelp/app/commons.js?buildId=2024012323"></script>
    <script defer="defer" src="../oxygen-webhelp/app/topic.js?buildId=2024012323"></script>
<link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/styles.css?buildId=2024012323"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script></head>

    <body id="dolphindb-历史数据回放功能应用物联网设备故障分析" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            跳转到主要内容
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div xmlns:whc="http://www.oxygenxml.com/webhelp/components" class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="https://docs.dolphindb.cn/zh/index.html" class=" wh_logo d-none d-sm-block "><img src="../logo.png" alt="  DolphinDB 文档中心  "/></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="booktitle">  <span class="ph mainbooktitle">DolphinDB 文档中心</span>  </span></a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="搜索 " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="搜索查询" required="required"/><button type="submit" class="wh_search_button" aria-label="搜索"><span class="search_input_text">搜索</span></button></div></form>
            
            <script src="/vendors/react/umd/react.production.min.js" defer="defer"></script>
<script src="/vendors/react-dom/umd/react-dom.production.min.js" defer="defer"></script>
<script src="/vendors/dayjs/dayjs.min.js" defer="defer"></script>
<script src="/vendors/antd/dist/antd.min.js" defer="defer"></script>
<script src="/vendors/@ant-design/icons/dist/index.umd.min.js" defer="defer"></script>
<script src="/zh/index.js" type="module"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" defer="defer"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer="defer"><!--


--></script>
<script defer="defer"><!--

// 从主页重定向
const currentUrl = window.location.href;

// 判断当前URL是否包含index.html并且路径最后部分是index.html
if (currentUrl.endsWith('index.html')) {
    // 处理根目录下的index.html跳转
    const baseUrl = currentUrl.split('/index.html')[0]; // 获取index.html之前的部分
    const redirectUrl = `${baseUrl}/about/ddb_intro.html`; // 构建跳转路径
    window.location.href = redirectUrl; // 执行跳转
}

--></script>
            
        </div></div>
    </div>
</header>
        
        
         
        
        
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="../index.html"><span>主页</span></a></span></li><li><div class="topicref" data-id="about_tutorials"><div class="title"><a href="../tutorials/about_tutorials.html"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div></li><li><div class="topicref"><div class="title"><a href="../tutorials/streaming_engine_anomaly_alerts_2.html">物联网场景案例</a></div></div></li><li class="active"><div class="topicref" data-id="dolphindb-历史数据回放功能应用物联网设备故障分析"><div class="title"><a href="../tutorials/faultAnalysis.html">DolphinDB 历史数据回放功能应用：物联网设备故障分析</a></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="切换搜索突出显示" title="切换搜索突出显示"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="折叠截面" title="折叠截面"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="打印此页" aria-label="打印此页"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem"><div data-tocid="ddb_intro-d9713e87" class="topicref" data-id="ddb_intro" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../about/ddb_intro.html" id="ddb_intro-d9713e87-link">关于DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="chap1_getstarted-d9713e136" class="topicref" data-id="chap1_getstarted" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../getstarted/chap1_getstarted.html" id="chap1_getstarted-d9713e136-link">快速上手</a><div class="wh-tooltip"><p class="shortdesc">如何快速部署 DolphinDB、建库建表、写入和查询数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="sectionddb_deployment-d9713e189" class="topicref" data-id="sectionddb_deployment" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action sectionddb_deployment-d9713e189-link" class="wh-expand-btn"></span><div class="title"><a href="../deploy/deploy_intro.html" id="sectionddb_deployment-d9713e189-link"><span class="keyword label">部署</span></a><div class="wh-tooltip"><p class="shortdesc">如何在不同的场景中部署 DolphinDB</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259" class="topicref" data-id="new_chap_database_manage_new_chap_dbmanage_landing_page" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/cfg/db_intro.html" id="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link"><span class="keyword label">数据库</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 数据库的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_streaming-d9713e3760" class="topicref" data-id="chap7_tutorials_streaming" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_streaming-d9713e3760-link" class="wh-expand-btn"></span><div class="title"><a href="../stream/str_intro.html" id="chap7_tutorials_streaming-d9713e3760-link"><span class="keyword label">流数据</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 流数据引擎及流数据计算的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e7513" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e7513-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/db_oper/import_data.html" id="tocId-d9713e7513-link">数据迁移</a><div class="wh-tooltip"><p class="shortdesc">如何从不同数据源向 DolphinDB 迁移数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_system_management-d9713e7940" class="topicref" data-id="chap7_tutorials_system_management" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_system_management-d9713e7940-link" class="wh-expand-btn"></span><div class="title"><a href="../sys_man/om_intro.html" id="chap7_tutorials_system_management-d9713e7940-link"><span class="keyword label">系统运维</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 的系统运维功能及方法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="troubleshooting-d9713e8780" class="topicref" data-id="troubleshooting" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action troubleshooting-d9713e8780-link" class="wh-expand-btn"></span><div class="title"><a href="../error_codes/troubleshooting.html" id="troubleshooting-d9713e8780-link">故障排查</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="about_language_resources-d9713e20911" class="topicref" data-id="about_language_resources" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action about_language_resources-d9713e20911-link" class="wh-expand-btn"></span><div class="title"><a href="../progr/progr_intro.html" id="about_language_resources-d9713e20911-link"><span class="keyword label">编程语言</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 编程基本概念与方法、SQL 在 DolphinDB 的应用</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="functions_references-d9713e30925" class="topicref" data-id="functions_references" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action functions_references-d9713e30925-link" class="wh-expand-btn"></span><div class="title"><a href="../funcs/funcs_intro.html" id="functions_references-d9713e30925-link"><span class="keyword label">函数参考</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 函数分类、语法、详解及示例</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="api_protocol-d9713e94064" class="topicref" data-id="api_protocol" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action api_protocol-d9713e94064-link" class="wh-expand-btn"></span><div class="title"><a href="../api/connapi_intro.html" id="api_protocol-d9713e94064-link"><span class="keyword label">连接器 &amp; API</span></a><div class="wh-tooltip"><p class="shortdesc">面向不同编程语言的 DolphinDB API 及连接器，相关协议和用法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap6_plugin-d9713e94210" class="topicref" data-id="chap6_plugin" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap6_plugin-d9713e94210-link" class="wh-expand-btn"></span><div class="title"><a href="../plugins/plg_intro.html" id="chap6_plugin-d9713e94210-link"><span class="keyword label">插件</span></a><div class="wh-tooltip"><p class="shortdesc">多个应用场景的插件使用说明和插件开发指导</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="third_party-d9713e97904" class="topicref" data-id="third_party" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action third_party-d9713e97904-link" class="wh-expand-btn"></span><div class="title"><a href="../third_party.html" id="third_party-d9713e97904-link">第三方工具</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="about_tutorials-d9713e98227" class="topicref" data-id="about_tutorials" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action about_tutorials-d9713e98227-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/about_tutorials.html" id="about_tutorials-d9713e98227-link"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98280" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98280-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/new_users_finance.html" id="tocId-d9713e98280-link">新用户入门</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e98327" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e98327-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/database.html" id="tocId-d9713e98327-link">数据库</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e99111" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e99111-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/std_sql_ddb.html" id="tocId-d9713e99111-link">编程</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100448" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100448-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming-real-time-correlation-processing_2.html" id="tocId-d9713e100448-link">流数据</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e100955" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e100955-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/scheduledJob_2.html" id="tocId-d9713e100955-link">系统运维</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="模块概述-d9713e101923" class="topicref" data-id="模块概述" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action 模块概述-d9713e101923-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/tu_modules.html" id="模块概述-d9713e101923-link">模块</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e102568" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e102568-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/OHLC_2.html" id="tocId-d9713e102568-link">金融场景案例</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="tocId-d9713e104827" class="topicref" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action tocId-d9713e104827-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_engine_anomaly_alerts_2.html" id="tocId-d9713e104827-link">物联网场景案例</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="引擎级联监测门禁异常状态-d9713e104828" class="topicref" data-id="引擎级联监测门禁异常状态" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/streaming_engine_anomaly_alerts_2.html" id="引擎级联监测门禁异常状态-d9713e104828-link">引擎级联监测门禁异常状态</a></div></div></li><li role="treeitem" class="active"><div data-tocid="dolphindb-历史数据回放功能应用物联网设备故障分析-d9713e104874" class="topicref" data-id="dolphindb-历史数据回放功能应用物联网设备故障分析" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/faultAnalysis.html" id="dolphindb-历史数据回放功能应用物联网设备故障分析-d9713e104874-link">DolphinDB 历史数据回放功能应用：物联网设备故障分析</a></div></div></li><li role="treeitem"><div data-tocid="dolphindb-在工业物联网的应用-d9713e104920" class="topicref" data-id="dolphindb-在工业物联网的应用" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/iot_demo_2.html" id="dolphindb-在工业物联网的应用-d9713e104920-link">DolphinDB 在工业物联网的应用</a></div></div></li><li role="treeitem"><div data-tocid="出租车行程时间预测-d9713e104966" class="topicref" data-id="出租车行程时间预测" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/forecast_taxi_trip_dura_2.html" id="出租车行程时间预测-d9713e104966-link">出租车行程时间预测</a></div></div></li><li role="treeitem"><div data-tocid="传感器数据异常检测-d9713e105012" class="topicref" data-id="传感器数据异常检测" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/iot_anomaly_detection_2.html" id="传感器数据异常检测-d9713e105012-link">传感器数据异常检测</a></div></div></li><li role="treeitem"><div data-tocid="地震波形数据存储解决方案-d9713e105058" class="topicref" data-id="地震波形数据存储解决方案" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/waveform_data_storage_2.html" id="地震波形数据存储解决方案-d9713e105058-link">地震波形数据存储解决方案</a></div></div></li><li role="treeitem"><div data-tocid="工业试验平台高频数据的存储和处理分析-d9713e105104" class="topicref" data-id="工业试验平台高频数据的存储和处理分析" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/high_freq_data_storage_and_analysis.html" id="工业试验平台高频数据的存储和处理分析-d9713e105104-link">工业试验平台高频数据的存储和处理分析</a></div></div></li><li role="treeitem"><div data-tocid="基于波形数据的地震预测-d9713e105150" class="topicref" data-id="基于波形数据的地震预测" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/earthquake_prediction_ddb_ml_2.html" id="基于波形数据的地震预测-d9713e105150-link">基于波形数据的地震预测</a></div></div></li><li role="treeitem"><div data-tocid="实时检测传感器状态变化-d9713e105196" class="topicref" data-id="实时检测传感器状态变化" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/ddb_str_app_iot_2.html" id="实时检测传感器状态变化-d9713e105196-link">实时检测传感器状态变化</a></div></div></li><li role="treeitem"><div data-tocid="实现设备指标的采集监控和展示-d9713e105242" class="topicref" data-id="实现设备指标的采集监控和展示" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/ddb_telegraf_grafana.html" id="实现设备指标的采集监控和展示-d9713e105242-link">实现设备指标的采集监控和展示</a></div></div></li><li role="treeitem"><div data-tocid="随机振动信号分析解决方案-d9713e105288" class="topicref" data-id="随机振动信号分析解决方案" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/random_vibr_sig_analysis_2.html" id="随机振动信号分析解决方案-d9713e105288-link">随机振动信号分析解决方案</a></div></div></li><li role="treeitem"><div data-tocid="物联网时序数据查询案例-d9713e105335" class="topicref" data-id="物联网时序数据查询案例" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/iot_query_case.html" id="物联网时序数据查询案例-d9713e105335-link">物联网时序数据查询案例</a></div></div></li><li role="treeitem"><div data-tocid="物联网实时数据异常率预警-d9713e105381" class="topicref" data-id="物联网实时数据异常率预警" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/knn_iot_2.html" id="物联网实时数据异常率预警-d9713e105381-link">物联网实时数据异常率预警</a></div></div></li><li role="treeitem"><div data-tocid="物联网应用范例-d9713e105427" class="topicref" data-id="物联网应用范例" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/iot_examples.html" id="物联网应用范例-d9713e105427-link">物联网应用范例</a></div></div></li><li role="treeitem"><div data-tocid="云边协同dolphindb-构建一体化振动监控与故障诊断解决方案-d9713e105473" class="topicref" data-id="云边协同dolphindb-构建一体化振动监控与故障诊断解决方案" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Virbration_Monitor_Fault_Diagnose.html" id="云边协同dolphindb-构建一体化振动监控与故障诊断解决方案-d9713e105473-link">云边协同：DolphinDB 构建一体化振动监控与故障诊断解决方案</a></div></div></li><li role="treeitem"><div data-tocid="助力工业物联网实现智能运维-d9713e105519" class="topicref" data-id="助力工业物联网实现智能运维" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/Iot_intelligent_O&amp;M.html" id="助力工业物联网实现智能运维-d9713e105519-link">助力工业物联网实现智能运维</a></div></div></li><li role="treeitem"><div data-tocid="使用-node-red-构建-dolphindb-低代码平台-d9713e105565" class="topicref" data-id="使用-node-red-构建-dolphindb-低代码平台" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/node_red_tutorial_iot.html" id="使用-node-red-构建-dolphindb-低代码平台-d9713e105565-link">使用 Node-RED 构建 DolphinDB 低代码平台</a></div></div></li><li role="treeitem"><div data-tocid="基于-glibc-升级的性能优化案例-d9713e105611" class="topicref" data-id="基于-glibc-升级的性能优化案例" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/perf_opti_glibc.html" id="基于-glibc-升级的性能优化案例-d9713e105611-link">基于 Glibc 升级的性能优化案例</a></div></div></li><li role="treeitem"><div data-tocid="当电力市场碰上量化技术如何构建高效电力交易解决方案-d9713e105657" class="topicref" data-id="当电力市场碰上量化技术如何构建高效电力交易解决方案" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/efficient_power_trading_solutions.html" id="当电力市场碰上量化技术如何构建高效电力交易解决方案-d9713e105657-link">当电力市场碰上量化技术，如何构建高效电力交易解决方案？</a></div></div></li><li role="treeitem"><div data-tocid="使用-dolphindb-进行汽车用户驾驶习惯行为画像分析-d9713e105703" class="topicref" data-id="使用-dolphindb-进行汽车用户驾驶习惯行为画像分析" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/behavioral_profiling_of_driving_habits.html" id="使用-dolphindb-进行汽车用户驾驶习惯行为画像分析-d9713e105703-link">使用 DolphinDB 进行汽车用户驾驶习惯行为画像分析</a></div></div></li><li role="treeitem"><div data-tocid="edge_to_cloud-d9713e105749" class="topicref" data-id="edge_to_cloud" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/edge_to_cloud.html" id="edge_to_cloud-d9713e105749-link">DolphinDB 实现边到云的实时数据汇聚</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105795" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105795-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/dolphindb_tensor_libtorch_tutorial.html" id="tocId-d9713e105795-link">机器学习</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105842" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105842-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/api_performance.html" id="tocId-d9713e105842-link">测试报告</a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105982" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105982-link" class="wh-expand-btn"></span><div class="title"><a href="../rn/server/3_00_2.html" id="tocId-d9713e105982-link">版本说明</a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 版本发布历史</p></div></div></div></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-7 col-md-9 col-sm-12" id="wh_topic_body">
                        <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        <button id="wh_close_topic_toc_button" class="close-toc-button d-none" aria-label="Toggle topic table of content" aria-controls="wh_topic_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        <div class=" wh_topic_content body "><main role="main"><article class="- topic/topic topic" role="article" aria-labelledby="ariaid-title1"><h1 class="- topic/title title topictitle1" id="ariaid-title1">DolphinDB 历史数据回放功能应用：物联网设备故障分析</h1><div class="- topic/body body"><p class="- topic/p p">工业物联网场景中，故障分析是一个关键环节。设备发生故障时，需快速定位原因。实时采集的流式数据和操作日志记录了设备当前的运行状态，如何根据这些数据快速定位故障发生原因是一个值得研究的问题。DolphinDB 历史数据回放框架为故障分析提供了一套有效的解决方案，通过 DolphinDB 历史数据回放框架，能够复现故障发生时刻场景，从而帮助工程师们更好地进行设备故障分析。</p></div><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title2" id="1-背景"><h2 class="- topic/title title topictitle2" id="ariaid-title2">1. 背景</h2><div class="- topic/body body"><p class="- topic/p p">近年来，随着物联设备、新技术和新应用不断发展，积累了海量的联网监测数据和离线采集的文件数据，这些数据是物联行业，特别是故障分析领域珍贵的数据资产。故障分析需要基于这些数据按照特定的顺序进行回放处理，通过回溯历史数据，模拟真实场景，实现故障分析、数据挖掘等功能。由于物联数据回放涉及的数据量巨大，数据回放不能简单地从数据库中查询存储结果数据并进行回放处理，因此需要构建一种高效的流式回放处理能力的数据回放平台。</p><p class="- topic/p p">如何高效地存储海量历史数据、如何快速地从海量历史数据中精确查找目标数据、如何将数据严格地按照时间先后顺序进行回放、如何流式呈现海量的目标历史数据，是构建一个历史数据回放平台必须要考虑的问题。</p><p class="- topic/p p">DolphinDB 历史数据回放框架由分布式存储引擎、数据回放工具、流计算框架三大组件构成，通过历史数据回放框架，可以搭建一个轻量式数据回放平台，助力设备故障诊断与分析。</p><br/><img class="- topic/image image" src="images/faultAnalysis/1-1.png" alt="图1 DolphinDB 历史数据回放框架"/><br/></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title3" id="2-dolphindb数据回放功能介绍"><h2 class="- topic/title title topictitle2" id="ariaid-title3">2. DolphinDB数据回放功能介绍</h2><div class="- topic/body body"></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title4" id="21-回放功能相关函数"><h3 class="- topic/title title topictitle3" id="ariaid-title4">2.1 回放功能相关函数</h3><div class="- topic/body body"><p class="- topic/p p">DolphinDB 历史数据回放功能通过 replay 函数实现。replay 函数按时间顺序将一个或多个数据表或数据源列表回放到数据表，以模拟实时数据写入。根据 replayRate 参数和 absoluteRate 参数的不同取值，支持指定每秒记录数、指定时间跨度回放加速倍数、全速回放三种回放模式；根据输入表到输出表的映射关系，支持 1 对 1单表回放，N 对 N 多表回放和 N 对 1 异构回放三种回放形式。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>replay(inputTables, outputTables, [dateColumn], [timeColumn], [replayRate], [absoluteRate=true], [parallelLevel=1])</code></pre><ul class="- topic/ul ul"><li class="- topic/li li">inputTables：指定数据的回放形式。inputTables 为一个表对象时，为 1 对 1 回放；inputTables是多个表对象时，为 N 对 N 回放；inputTables 为一个字典时，为N对1回放。</li><li class="- topic/li li">outputTables：指定数据的回放形式。outputTables 为一个表对象时，为 1 对 1 回放或N对1异构回放；outputTables是多个表对象时，为N对N回放。</li><li class="- topic/li li">replayRate：表示数据回放速度。若 absoluteRate为true，replayRate 表示每秒回放的数据条数；若absoluteRate为 false，依照数据中的时间戳加速replayRate倍回放；若 replayRate 未指定或为负，以最大速度回放</li><li class="- topic/li li">absoluteRate：为 true 时表示 replayRate 为每秒回放的记录数；为 false 时表示依照数据中的时间戳加速 replayRate 倍回放</li></ul><p class="- topic/p p">replayDS 根据时间维度将源数据划分为若干个小的数据源，实现对数据源的进一步切分。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>replayDS(sqlObj, [dateColumn], [timeColumn],[timeRepartitionSchema])</code></pre><p class="- topic/p p"><code class="+ topic/ph pr-d/codeph ph codeph">ionSchema])</code></p><ul class="- topic/ul ul"><li class="- topic/li li">sqlObj：SQL 查询元代码，表示回放的数据，如&lt;select * from loadTable("dfs://source", "source")&gt;。SQL查询的表对象是DFS表，且至少有一个分区列为DATE类型。</li><li class="- topic/li li">dateColumn：日期列。若不指定，默认第一列为日期列。<code class="+ topic/ph pr-d/codeph ph codeph">replayDS</code>函数默认日期列是数据源的一个分区列，并根据分区信息将原始SQL查询拆分为多个查询。</li></ul><p class="- topic/p p">关于 <code class="+ topic/ph pr-d/codeph ph codeph">replay</code>、<code class="+ topic/ph pr-d/codeph ph codeph">replayDS </code>函数的详细介绍可参考 <a class="- topic/xref xref" href="../funcs/r/replay.html">replay用户手册</a>、<a class="- topic/xref xref" href="../funcs/r/replayDS.html">replayDS用户手册</a>。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title5" id="22-1-对-1-单表回放"><h3 class="- topic/title title topictitle3" id="ariaid-title5">2.2 1 对 1 单表回放</h3><div class="- topic/body body"><p class="- topic/p p">1 对 1 单表回放适用于所有数据存放在一张表中的场景。当数据量较小时，可以将需要回放的数据读取到一张内存表中，然后将内存表作为数据源进行回放。</p><p class="- topic/p p">当数据量较大时，可使用<code class="+ topic/ph pr-d/codeph ph codeph">replayDS</code>函数将输入表划分为多个较小的数据源，再使用<code class="+ topic/ph pr-d/codeph ph codeph">replay</code>函数从数据源中读取数据并回放到流数据表中。</p><p class="- topic/p p">1 对 1 单表回放并不能满足所有的回放要求。在实际应用中，故障诊断往往涉及到传感器数据和操作日志数据，在进行故障分析时，需要将两类同时回放，这时便有了多表回放的需求。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title6" id="23-n-对-n-多表回放"><h3 class="- topic/title title topictitle3" id="ariaid-title6">2.3 N 对 N 多表回放</h3><div class="- topic/body body"><p class="- topic/p p">N 对 N 多表回放是一种将多个输入表同步回放到多个对应目标表的模式。在 N 对 N 的模式中，不同表在同一秒内的两条数据写入目标表的顺序可能和数据中的时间先后顺序不一致。此外，若采用不同的线程对下游的N个目标表进行订阅消费，也很难保证表与表之间的数据被处理的顺序关系。因此，N 对 N 回放不能保证整体上最严格的时序。</p><p class="- topic/p p">故障分析领域中不同类型的数据产生是有先后顺序的，比如传感器数据和操作日志，所以在对多个数据源回放时要求每条数据都严格按照时间顺序注入目标表，为此我们需要解决以下问题：</p><ul class="- topic/ul ul"><li class="- topic/li li">不同结构的数据如何统一进行排序和注入以保证整体的顺序？</li><li class="- topic/li li">如何保证对多表回放结果的实时消费也是严格按照时序进行的？</li></ul></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title7" id="24-n-对-1-异构回放"><h3 class="- topic/title title topictitle3" id="ariaid-title7">2.4 N 对 1 异构回放</h3><div class="- topic/body body"><p class="- topic/p p">针对上述 N 对 N 多表回放存在的问题，DolphinDB 进一步增加了 N 对 1 异构回放，支持将多个不同表结构的数据表写入同一张异构流数据表中，从而实现了严格按时间顺序的多表回放。</p><p class="- topic/p p">与 N 对 N 多表回放不同，N 对 1 异构回放将多个具有不同表结构的数据源回放到同一个输出表中，其中输出表为一张异构流数据表，至少包含三列：数据时间列、数据标识列和序列化后的数据。此外，N 对 1 异构回放对多个数据源进行全局排序，因此所得的输出表是严格的时间顺序。</p><p class="- topic/p p">若要对异构流数据表进行数据处理操作，如指标计算等，则需要将二进制格式的消息内容反序列化为原始结构的一行记录。DolphinDB 在脚本语言以及在 API 中均支持了对异构流数据表的解析功能。脚本支持流数据分发引擎 streamFilter 对异构流数据表进行反序列化以及反序列后结果的数据处理；同时，各类 API 在支持流数据订阅功能的基础上，扩展支持了在订阅时对异构流数据表进行反序列化。</p></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title8" id="3-数据回放应用数控机床异常诊断"><h2 class="- topic/title title topictitle2" id="ariaid-title8">3. 数据回放应用：数控机床异常诊断</h2><div class="- topic/body body"></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title9" id="31-场景"><h3 class="- topic/title title topictitle3" id="ariaid-title9">3.1 场景</h3><div class="- topic/body body"><p class="- topic/p p">在现代化的制造业环境中，数控机床以其精准、高效和自动化的特性，显著提升了生产效率和产品质量，扮演着核心角色。</p><p class="- topic/p p">当数控机床运行时，其内置的传感器会持续采集各种设备状态数据。这些数据包括机床运行速度、主轴转速、刀具磨损状况、冷却液温度和压力、电机负载以及系统电力消耗等关键参数。这些实时数据会存储到数据库中，作为技术人员深入的分析的参考依据。</p><p class="- topic/p p">一旦数控机床发生故障，如刀具破损、电机过热或系统错误等，设备会立即触发警报，并将相应的数据记录到故障信息表中。故障信息表会详细记录故障发生的时间、故障类型等关键信息，为后续的故障诊断和维修工作提供重要的线索。</p><p class="- topic/p p">为了确保操作的合规性和可追溯性，每当操作员在数控机床上进行操作，如程序更改、刀具更换或生产参数调整等，系统会自动记录相关的操作信息到操作日志表中。这类日志详细记录了操作的时间、操作内等详细情况，便于在出现问题时进行快速的责任追溯和问题排查。</p><p class="- topic/p p">通过这些详细的设备状态、异常状态信息和操作日志，工厂的技术人员和管理人员可以全面、准确地了解数控机床的运行状态和工作效率，及时发现并解决问题，从而确保生产的稳定性和效率。同时，这些数据也为设备的维护、升级和优化提供了重要的数据支持。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title10" id="32-数据说明"><h3 class="- topic/title title topictitle3" id="ariaid-title10">3.2 数据说明</h3><div class="- topic/body body"><p class="- topic/p p">数控机床传感器每秒采集温度、振幅、液压等关键信息，表结构如下表所示：</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="32-数据说明__entry__1"><strong class="+ topic/ph hi-d/b ph b">字段名称</strong></th><th class="- topic/entry entry colsep-0 rowsep-0" id="32-数据说明__entry__2"><strong class="+ topic/ph hi-d/b ph b">数据类型</strong></th><th class="- topic/entry entry colsep-0 rowsep-0" id="32-数据说明__entry__3"><strong class="+ topic/ph hi-d/b ph b">字段描述</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__1">time</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__2">TIMESTAMP</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__3">采集时间戳</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__1">deviceId</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__2">SYMBOL</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__3">机床编号</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__1">temp</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__2">DOUBLE</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__3">温度</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__1">amp</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__2">DOUBLE</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__3">振幅</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__1">hydra</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__2">DOUBLE</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__3">液压</td></tr></tbody></table></div><p class="- topic/p p">操作日志表记录了操作员对机床的操作内容，表结构如下表所示：</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="32-数据说明__entry__19"><strong class="+ topic/ph hi-d/b ph b">字段名称</strong></th><th class="- topic/entry entry colsep-0 rowsep-0" id="32-数据说明__entry__20"><strong class="+ topic/ph hi-d/b ph b">数据类型</strong></th><th class="- topic/entry entry colsep-0 rowsep-0" id="32-数据说明__entry__21"><strong class="+ topic/ph hi-d/b ph b">字段描述</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__19">time</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__20">TIMESTAMP</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__21">操作发生时间</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__19">deviceId</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__20">SYMBOL</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__21">机床编号</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__19">operatorId</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__20">SYMBOL</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__21">员工编号</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__19">actionType</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__20">SYMBOL</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__21">操作类型</td></tr></tbody></table></div><p class="- topic/p p">故障信息表记录异常发生的开始时间、持续时长等信息，表结构如下表所示：</p><div class="table-container"><table class="- topic/table table" data-cols="3"><caption></caption><colgroup><col/><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="32-数据说明__entry__34"><strong class="+ topic/ph hi-d/b ph b">字段名称</strong></th><th class="- topic/entry entry colsep-0 rowsep-0" id="32-数据说明__entry__35"><strong class="+ topic/ph hi-d/b ph b">数据类型</strong></th><th class="- topic/entry entry colsep-0 rowsep-0" id="32-数据说明__entry__36"><strong class="+ topic/ph hi-d/b ph b">字段描述</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__34">time</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__35">TIMESTAMP</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__36">异常开始时间</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__34">deviceId</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__35">SYMBOL</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__36">机床编号</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__34">persistTime</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__35">FLOAT</td><td class="- topic/entry entry colsep-0 rowsep-0" headers="32-数据说明__entry__36">异常持续时间</td></tr></tbody></table></div><p class="- topic/p p">操作员的不当操作可能会引发机床故障，当故障发生后，分析人员需要第一时间了解故障是由哪些操作导致的，以便于后续的故障诊断和分析；同时，机床的温度、液压等指标也与操作类型相关，分析操作类型与机床状态指标的相关性也是故障诊断和分析中的重要一环。</p><p class="- topic/p p">本文所使用的数据仿真脚本见附录 5.1。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title11" id="33-总体方案"><h3 class="- topic/title title topictitle3" id="ariaid-title11">3.3 总体方案</h3><div class="- topic/body body"><p class="- topic/p p">针对机床故障异常诊断分析，DolphinDB 解决方案如下：</p><br/><img class="- topic/image image" src="images/faultAnalysis/3-3.png" alt="图2"/><br/><p class="- topic/p p">故障发生后，将故障信息表和操作日志表中的数据异构回放到流数据表中，通过 createAsofJoinEngine 流计算引擎，将故障信息和操作日志进行实时关联，了解故障是由哪些操作引起的；并实时地回放传感器采集的机床状态数据，以便分析机床各项指标与操作类型的关系。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title12" id="34-故障诊断分析"><h3 class="- topic/title title topictitle3" id="ariaid-title12">3.4 故障诊断分析</h3><div class="- topic/body body"></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title13" id="341-接口说明"><h4 class="- topic/title title topictitle4" id="ariaid-title13">3.4.1 接口说明</h4><div class="- topic/body body"><p class="- topic/p p">为了便于机床故障诊断分析，本文将 DolphinDB 数据回放框架封装成了 replayIoT 函数，见附录 5.2。用户通过 json 配置便能实现倍数回放、多表回放等复杂功能。对于单表回放，函数使用说明如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>{
    "dbName":目标库，必选,  
    "tbName":目标表，必选,
    "deviceColumn":设备名称列，必选, 
    "dateColumn":数据时间列，可选,
    "deviceId":需要回放的设备，可选,
    "selectColumn":需要回放的设备，可选
    "timeBegin":回放开始时间，可选,
    "timeEnd":回放结束时间，可选,
    "replayRate":回放倍率，可选,
    "sampleRate":采样频率，可选,
    "jobName":回放任务名称，必选
}</code></pre><p class="- topic/p p">多表回放数据接口使用说明如下：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code> {
    "leftTable":{左表参数
        "dbName":目标库，必选,
        "tbName":目标表，必选,
        "deviceColumn":设备名称列，必选,
        "dateColumn":数据时间列，可选,
        "deviceId":需要回放的设备，可选,
        "timeBegin":回放开始时间，可选,
        "timeEnd":回放结束时间，可选
    },
    "rightTable":{右表参数
        "dbName":目标库，必选,
        "tbName":目标表，必选,
        "deviceColumn":设备名称列，必选,
        "dateColumn":数据时间列，可选,
        "deviceId":需要回放的设备，可选,
        "timeBegin":回放开始时间，可选,
        "timeEnd":回放结束时间，可选
    },
    "matchColumn": 左表右表连接列，必选,
    "replayRate":回放倍率，可选,
    "sampleRate":采样频率，可选,
    "jobName":回放任务名称，必选
}</code></pre><p class="- topic/p p">回放的实时流式数据会注入到名为 jobName 的共享流表中，用户可以订阅该表进实时分析。</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title14" id="342-诊断与分析"><h4 class="- topic/title title topictitle4" id="ariaid-title14">3.4.2 诊断与分析</h4><div class="- topic/body body"><p class="- topic/p p">通过以下 json 配置，开始异常信息与操作日志的关联回放任务：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>args1 = '
{
    "leftTable":{
        "dbName":"dfs://test_anomaly",
        "tbName":"anomaly",
        "dateColumn":"ts",
        "deviceId":"device0001",
        "deviceColumn":"deviceId",
        "timeBegin":2024.01.01T00:00:00.000,
        "timeEnd":2024.01.01T02:00:00.000
    },
    "rightTable":{
        "dbName":"dfs://test_log",
        "tbName":"log",
        "dateColumn":"ts",
        "deviceId":"device0001",
        "deviceColumn":"deviceId",
        "timeBegin":2024.01.01T00:00:00.000,
        "timeEnd":2024.01.01T02:00:00.000
    },
    "matchColumn": ["deviceId"],
    "jobName":"warnAndLogStream",
    "replayRate":50
}
'
replayIoT(args1)</code></pre><p class="- topic/p p">回放结果如下表所示：</p><br/><img class="- topic/image image" src="images/faultAnalysis/3-4-2-1.png" alt="图3"/><br/><p class="- topic/p p">从上述结果可知，F1、F2、F3 三种操作可能会导致机床发生故障，因此在实际生产中，操纵员需要谨慎进行 F1、F2、F3 这三种类型的操作。</p><p class="- topic/p p">通过以下 json 配置，开始机床各项指标数据的回放任务：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>args2 = '
{
    "dbName":"dfs://test_state",  
    "tbName":"state",
    "deviceColumn":"deviceId", 
    "dateColumn":"ts",
    "deviceId":["device0001"],
    "timeBegin":2024.01.01T00:00:00.000,
    "timeEnd":2024.01.01T02:00:00.000,
    "replayRate":50,
    "sampleRate":60s,
    "jobName":"stateStream"
}
'
replayIoT(args2)</code></pre><p class="- topic/p p">回放结果如下表所示：</p><br/><img class="- topic/image image" src="images/faultAnalysis/3-4-2-2.png" alt="图4"/><br/><p class="- topic/p p">借助 DolphinDB Dashboard 功能，可将上述回放的机床各项指标进行实时的可视化展示，可视化结果如下图所示：</p><br/><img class="- topic/image image" src="images/faultAnalysis/3-4-2-3.png" alt="图5"/><br/><p class="- topic/p p">从上图可知，机床正常运行时，温度、液压和振幅曲线是规律的三角函数曲线。当故障发生后，温度、液压和振幅会明显偏低或偏高。从结果上来看，进行F1操作时，机床温度、振幅低于平均水平，液压高于平均水平，导致机床发生故障；进行F2操作时，机床温度、振幅高于平均水平，导致机床发生故障；进行 F3 操作时，机床振幅、液压低于平均水平，导致机床发生故障。</p></div></article></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title15" id="4-总结"><h2 class="- topic/title title topictitle2" id="ariaid-title15">4. 总结</h2><div class="- topic/body body"><p class="- topic/p p">本教程以数控机床故障诊断为例，详细介绍了如何利用 DolphinDB 的历史数据回放功能分析设备故障。DolphinDB 的历史数据回放功能在非常多的领域可以发挥其价值。例如，在无人机飞行状态监测中，回放功能可以帮助用户重现飞行状态，便于排查故障；在无线电检测中，通过回放大规模的监测数据，实现多维度瀑布图回放、占用度趋势分析及信号模拟等功能。DolphinDB 的历史数据回放功能可以为企业提供强大的数据分析能力，有助于提高故障排查效率和优化业务决策。</p></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title16" id="5-附录"><h2 class="- topic/title title topictitle2" id="ariaid-title16">5. 附录</h2><div class="- topic/body body"></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title17" id="51-数据仿真脚本"><h3 class="- topic/title title topictitle3" id="ariaid-title17">5.1 数据仿真脚本</h3><div class="- topic/body body"><p class="- topic/p p"><a class="- topic/xref xref" href="data/faultAnalysis/dataSimulate.dos">dataSimulate.dos</a></p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title18" id="52-数据回放框架接口-replayiot"><h3 class="- topic/title title topictitle3" id="ariaid-title18">5.2 数据回放框架接口 replayIoT</h3><div class="- topic/body body"><p class="- topic/p p"><a class="- topic/xref xref" href="data/faultAnalysis/replayIoT.dos">replayIoT.dos</a></p></div></article></article></article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" aria-label="On this page" class="col-lg-2 d-none d-lg-block navbar d-print-none"> 
                            <div id="wh_topic_toc_content">
		                        
	                            <div class=" wh_topic_toc "><div class="wh_topic_label">在本页上</div><ul><li class="topic-item"><a href="#1-%E8%83%8C%E6%99%AF" data-tocid="1-背景">1. 背景</a></li><li class="topic-item"><a href="#2-dolphindb%E6%95%B0%E6%8D%AE%E5%9B%9E%E6%94%BE%E5%8A%9F%E8%83%BD%E4%BB%8B%E7%BB%8D" data-tocid="2-dolphindb数据回放功能介绍">2. DolphinDB数据回放功能介绍</a><ul><li class="topic-item"><a href="#21-%E5%9B%9E%E6%94%BE%E5%8A%9F%E8%83%BD%E7%9B%B8%E5%85%B3%E5%87%BD%E6%95%B0" data-tocid="21-回放功能相关函数">2.1 回放功能相关函数</a></li><li class="topic-item"><a href="#22-1-%E5%AF%B9-1-%E5%8D%95%E8%A1%A8%E5%9B%9E%E6%94%BE" data-tocid="22-1-对-1-单表回放">2.2 1 对 1 单表回放</a></li><li class="topic-item"><a href="#23-n-%E5%AF%B9-n-%E5%A4%9A%E8%A1%A8%E5%9B%9E%E6%94%BE" data-tocid="23-n-对-n-多表回放">2.3 N 对 N 多表回放</a></li><li class="topic-item"><a href="#24-n-%E5%AF%B9-1-%E5%BC%82%E6%9E%84%E5%9B%9E%E6%94%BE" data-tocid="24-n-对-1-异构回放">2.4 N 对 1 异构回放</a></li></ul></li><li class="topic-item"><a href="#3-%E6%95%B0%E6%8D%AE%E5%9B%9E%E6%94%BE%E5%BA%94%E7%94%A8%E6%95%B0%E6%8E%A7%E6%9C%BA%E5%BA%8A%E5%BC%82%E5%B8%B8%E8%AF%8A%E6%96%AD" data-tocid="3-数据回放应用数控机床异常诊断">3. 数据回放应用：数控机床异常诊断</a><ul><li class="topic-item"><a href="#31-%E5%9C%BA%E6%99%AF" data-tocid="31-场景">3.1 场景</a></li><li class="topic-item"><a href="#32-%E6%95%B0%E6%8D%AE%E8%AF%B4%E6%98%8E" data-tocid="32-数据说明">3.2 数据说明</a></li><li class="topic-item"><a href="#33-%E6%80%BB%E4%BD%93%E6%96%B9%E6%A1%88" data-tocid="33-总体方案">3.3 总体方案</a></li><li class="topic-item"><a href="#34-%E6%95%85%E9%9A%9C%E8%AF%8A%E6%96%AD%E5%88%86%E6%9E%90" data-tocid="34-故障诊断分析">3.4 故障诊断分析</a><ul><li class="topic-item"><a href="#341-%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E" data-tocid="341-接口说明">3.4.1 接口说明</a></li><li class="topic-item"><a href="#342-%E8%AF%8A%E6%96%AD%E4%B8%8E%E5%88%86%E6%9E%90" data-tocid="342-诊断与分析">3.4.2 诊断与分析</a></li></ul></li></ul></li><li class="topic-item"><a href="#4-%E6%80%BB%E7%BB%93" data-tocid="4-总结">4. 总结</a></li><li class="topic-item"><a href="#5-%E9%99%84%E5%BD%95" data-tocid="5-附录">5. 附录</a><ul><li class="topic-item"><a href="#51-%E6%95%B0%E6%8D%AE%E4%BB%BF%E7%9C%9F%E8%84%9A%E6%9C%AC" data-tocid="51-数据仿真脚本">5.1 数据仿真脚本</a></li><li class="topic-item"><a href="#52-%E6%95%B0%E6%8D%AE%E5%9B%9E%E6%94%BE%E6%A1%86%E6%9E%B6%E6%8E%A5%E5%8F%A3-replayiot" data-tocid="52-数据回放框架接口-replayiot">5.2 数据回放框架接口 replayIoT</a></li></ul></li></ul></div>
	                        	
                        	</div>
                        </nav>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
<title>Copyright</title><p><b> ©2025 浙江智臾科技有限公司 浙ICP备18048711号-3</b></p>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
    </body>
</html>