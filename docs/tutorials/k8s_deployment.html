<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh" lang="zh" data-whc_version="26.0">
    <head><link rel="shortcut icon" href="../favicon.ico"/><link rel="icon" href="../favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="description" content="Kubernetes（简称 K8S）是一个开源的容器集群管理系统，可以实现容器集群的自动化部署、自动扩缩容、维护等功能。DolphinDB Operator 和 Webserver（简称 DolphinDB 套件）是部署于 Kubernetes 上的 DolphinDB 集群自动运维系统，提供包括部署、升级、扩缩容、配置变更的 DolphinDB 全生命周期管理。通过 DolphinDB ..."/><meta name="DC.rights.owner" content="(C) 版权 2025"/><meta name="copyright" content="(C) 版权 2025"/><meta name="generator" content="DITA-OT"/><meta name="DC.type" content="topic"/><meta name="DC.coverage" content=""/><meta name="DC.relation" content="../deploy/deploy_intro.html"/><meta name="prodname" content="DolphinDB"/><meta name="brand" content="DolphinDB"/><meta name="DC.creator" content="DolphinDB"/><meta name="DC.publisher" content="DDB N/A DDB 200"/><meta name="DC.format" content="HTML5"/><meta name="DC.identifier" content="基于-k8s-部署-dolphindb"/><title>基于 K8S 部署 DolphinDB</title><!--  Generated with Oxygen version 26.0, build number 2024012323.  --><meta name="wh-path2root" content="../"/><meta name="wh-toc-id" content="&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;&lt;?workdir /tmp/temp20250305183303418/tutorials?&gt;&lt;?workdir-uri file:/tmp/temp20250305183303418/tutorials/?&gt;&lt;?path2project ../?&gt;&lt;?path2project-uri ../?&gt;&lt;?path2rootmap-uri ../?&gt;&lt;topic xmlns:dita-ot=&#34;http://dita-ot.sourceforge.net/ns/201007/dita-ot&#34; xmlns:ditaarch=&#34;http://dita.oasis-open.org/architecture/2005/&#34; class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;基于-k8s-部署-dolphindb&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;基于 K8S 部署 DolphinDB&lt;/title&gt;&lt;prolog class=&#34;- topic/prolog &#34;&gt;&lt;author class=&#34;- topic/author &#34; xtrc=&#34;author:1;12:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/author&gt;&lt;publisherinformation class=&#34;- topic/publisher bookmap/publisherinformation &#34; xtrc=&#34;publisherinformation:1;14:31&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:1;15:21&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;printlocation class=&#34;- topic/data bookmap/printlocation &#34; xtrc=&#34;printlocation:1;16:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;N/A&lt;/printlocation&gt; &lt;published class=&#34;- topic/data bookmap/published &#34; xtrc=&#34;published:1;17:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;person class=&#34;- topic/data bookmap/person &#34; xtrc=&#34;person:2;18:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DDB&lt;/person&gt; &lt;publishtype class=&#34;- topic/data bookmap/publishtype &#34; value=&#34;HTML&#34; xtrc=&#34;publishtype:1;19:44&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;revisionid class=&#34;- topic/ph bookmap/revisionid &#34; xtrc=&#34;revisionid:1;20:29&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;200&lt;/revisionid&gt; &lt;summary class=&#34;- topic/ph bookmap/summary &#34; xtrc=&#34;summary:1;22:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:1;23:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/published&gt; &lt;data class=&#34;- topic/data &#34; xtrc=&#34;data:2;25:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt; &lt;/publisherinformation&gt;&lt;metadata class=&#34;- topic/metadata &#34;&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:2;39:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;audience class=&#34;- topic/audience &#34; xtrc=&#34;audience:1;28:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;category class=&#34;- topic/category &#34; xtrc=&#34;category:1;29:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;/&gt;&lt;prodinfo class=&#34;- topic/prodinfo &#34; xtrc=&#34;prodinfo:1;34:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt; &lt;prodname class=&#34;- topic/prodname &#34; xtrc=&#34;prodname:1;35:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/prodname&gt; &lt;brand class=&#34;- topic/brand &#34; xtrc=&#34;brand:1;36:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/ddb_doc_centre.ditamap&#34;&gt;DolphinDB&lt;/brand&gt; &lt;/prodinfo&gt;&lt;/metadata&gt;&lt;/prolog&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:1;1:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:1;3:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;Kubernetes（简称 K8S）是一个开源的容器集群管理系统，可以实现容器集群的自动化部署、自动扩缩容、维护等功能。DolphinDB Operator 和 Webserver（简称 DolphinDB 套件）是部署于 Kubernetes 上的 DolphinDB 集群自动运维系统，提供包括部署、升级、扩缩容、配置变更的 DolphinDB 全生命周期管理。通过 DolphinDB 套件，DolphinDB 可以无缝运行在公有云或私有部署的 Kubernetes 集群上。&lt;/p&gt;&lt;/body&gt;&lt;related-links class=&#34;- topic/related-links &#34;&gt;&lt;linkpool class=&#34;- topic/linkpool &#34; xtrc=&#34;topicref:10;29:95&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_deploy.ditamap&#34;&gt;&lt;link class=&#34;- topic/link &#34; format=&#34;dita&#34; href=&#34;../deploy/deploy_intro.dita&#34; mapclass=&#34;- map/topicref bookmap/chapter &#34; role=&#34;parent&#34; scope=&#34;local&#34; type=&#34;topic&#34; xtrc=&#34;topicref:1;5:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/chap_deploy.ditamap&#34;&gt;&lt;?ditaot usertext?&gt;&lt;linktext class=&#34;- topic/linktext &#34;&gt;&lt;?ditaot usertext?&gt;安装部署&lt;/linktext&gt;&lt;?ditaot usershortdesc?&gt;&lt;desc class=&#34;- topic/desc &#34;&gt;如何在不同的场景中部署 DolphinDB&lt;/desc&gt;&lt;/link&gt;&lt;/linkpool&gt;&lt;/related-links&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;dolphindb-in-kubernetes-简介&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:2;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:2;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB in Kubernetes 简介&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:2;5:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:2;7:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB 在 Kubernetes 环境中以容器的形式运行并提供服务：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:1;9:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:1;9:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;服务资源：DolphinDB 在 Kubenrnetes 环境中被抽象为自定义资源 ddb，ddb 定义了 DolphinDB 在 Kubernetes 环境中运行的相关属性，通过这些属性指定 DolphinDB 运行的具体配置。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:2;10:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;资源管理：服务组件 ddb-operator 负责管理 DolphinDB 运行在 Kubernetes 环境中的资源。它将 ddb 资源解析为 Kubernetes 环境中的容器、服务、配置等资源，并实时监听这些资源，保证 DolphinDB 在 Kubernetes 环境中正常运行。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:3;11:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;身份验证：在 Kubernetes 环境中，DolphinDB 运行前需要通过 license 进行身份验证。license 被定义为一个 ConfigMap 资源。&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;快速部署-dolphindb&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:3;13:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:3;13:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;快速部署 DolphinDB&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:3;13:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:3;15:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;本文的搭建环境以及软件版本信息如下：&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:4;17:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;服务器：三台阿里云服务器,其外网ip分别为192.168.100.10（master），192.168.100.11（worker），192.168.100.12（worker）&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:5;19:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;操作系统：Linux（内核3.10以上版本）&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:6;21:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;内存：8GB&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:7;23:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;CPU: x86_64（8核心）&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:8;25:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;docker version：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:1;25:16&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;v20.10.12&lt;/codeph&gt;，三台均部署&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:9;27:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;helm version: &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:2;27:15&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;v3.7.2&lt;/codeph&gt;，三台均部署&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:10;29:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;Kubernetes version：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:3;29:20&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;v1.23.3&lt;/codeph&gt; ，三台均部署&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:11;31:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;Kubectl 和 Kubeadm version：&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:4;31:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;v1.21&lt;/codeph&gt; 及以上，三台均部署。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:12;33:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB 套件 version： &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://hub.docker.com/r/dolphindb/dolphindb-webserver/tags&#34; scope=&#34;external&#34; xtrc=&#34;xref:1;33:23&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;?ditaot usertext?&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:5;33:24&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;v1.0.0&lt;/codeph&gt;&lt;/xref&gt;，正式版本号 ，只需在 master 上部署&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:13;35:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB 套件是指 Kubernetes 环境中 DolphinDB 的资源和界面管理组件的集合，包含以下部分：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:2;37:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:4;37:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;dolphindb-operator：DolphinDB 在 Kubernetes 环境中的资源管理器；&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:5;38:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;dolphindb-webserver：DolphinDB 在 Kubernetes 环境中的可视化管理界面。&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:14;40:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;本文介绍了如何创建一个 Kubernetes 集群，部署 DolphinDB 套件，并使用它部署一个包含3个数据节点的高可用集群，最终搭建的集群节点如下:&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;shell&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:1;42:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;controller1 =&amp;gt; agent1 =&amp;gt; 1 datanode controller2 =&amp;gt; agent2 =&amp;gt; 1 datanode controller3 =&amp;gt; agent3 =&amp;gt; 1 datanode&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:15;48:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;基本步骤如下：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:1;50:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:6;50:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;创建 Kubernetes 集群&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:7;51:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;部署 DolphinDB 套件&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:8;52:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;连接 DolphinDB 集群&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:9;53:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;升级 DolphinDB 集群&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:10;54:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;销毁 DolphinDB 集群&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;创建-kubernetes-集群&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:4;56:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:4;56:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;创建 Kubernetes 集群&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:4;56:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:16;58:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;创建集群之前，需要先搭建好 docker 以及 helm 环境，参考: &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://docs.docker.com/install/&#34; scope=&#34;external&#34; xtrc=&#34;xref:2;58:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;?ditaot usertext?&gt;docker 安装教程&lt;/xref&gt;，&lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://helm.sh/docs/intro/install/&#34; scope=&#34;external&#34; xtrc=&#34;xref:3;58:85&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;?ditaot usertext?&gt;Helm安装教程&lt;/xref&gt;。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:17;60:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;docker 安装完成后，在 Linux 命令行窗口执行以下命令，若显示 docker 版本号，则说明安装成功。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;bash&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:2;62:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;$ docker -v&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:18;66:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;helm安装完成后，在 Linux 命令行窗口执行以下命令，若显示 helm 版本号，则说明安装成功。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;bash&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:3;68:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;$ helm version&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:19;72:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;推荐两种创建 Kubernetes 集群:&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:3;74:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:11;74:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;单节点 Kubernets 环境部署：使用 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://minikube.sigs.k8s.io/docs/start/&#34; scope=&#34;external&#34; xtrc=&#34;xref:4;74:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;?ditaot usertext?&gt;Minikube&lt;/xref&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:12;75:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;多节点 Kubernets 环境部署：使用 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/&#34; scope=&#34;external&#34; xtrc=&#34;xref:5;75:25&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;?ditaot usertext?&gt;Kubeadm&lt;/xref&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:20;77:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;完成 Kubernetes 安装后，在 Linux 命令行窗口执行以下命令，若显示 Kubernetes 版本号，则说明安装成功。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;bash&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:4;79:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;$ kubectl version&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;部署-dolphindb-套件&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:5;83:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:5;83:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;部署 DolphinDB 套件&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:5;83:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:21;85:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;确保满足以下硬件以及软件要求：&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:22;87:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;硬件条件：详见 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://kubernetes.io/zh/docs/setup/production-environment/tools/kubeadm/install-kubeadm/&#34; scope=&#34;external&#34; xtrc=&#34;xref:6;87:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;?ditaot usertext?&gt;kubeadm&lt;/xref&gt; 安装条件。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:23;89:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;软件条件：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:4;91:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:13;91:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;可以使用 kubectl 访问的 Kubernetes 集群（本文以 Kubeadm 为例）&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:14;92:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;已安装 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://helm.sh/docs/intro/install/&#34; scope=&#34;external&#34; xtrc=&#34;xref:7;92:7&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;?ditaot usertext?&gt;Helm&lt;/xref&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:15;93:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;配置 CoreDump 参考&lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:1;93:17&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;K8S 中配置 CoreDump&lt;/i&gt;部分内容&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:24;95:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;验证是否安装成功见&lt;xref class=&#34;- topic/xref &#34; dita-ot:orig-format=&#34;markdown&#34; format=&#34;dita&#34; href=&#34;#创建-kubernetes-集群&#34; xtrc=&#34;xref:8;95:10&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;创建 Kubernetes 集群&lt;/xref&gt;，本文下面介绍部署步骤。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;部署-local-path-provisioner&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:6;97:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:6;97:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;部署 Local Path Provisioner&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:6;97:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:25;99:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;Local Path Povisioner 可以在 Kubernetes 环境中作为本机路径的 CSI，使用节点的本机路径来动态分配持久化存储。本节将介绍具体实现方法。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:26;101:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:1;101:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;注意&lt;/b&gt;：&#34;Local path provisioner&#34;只是提供了 storageclass ，用于创建 pvc ,如果用户使用其他类型的 sci ,则不需要部署,可以作为没有 sci 的用户的参考项&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:27;103:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;从 github 上下载 local-path-provisioner 安装文件：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;shell&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:5;105:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;$ wget https://raw.githubusercontent.com/rancher/local-path-provisioner/master/deploy/local-path-storage.yaml&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:28;109:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;期望输出&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;bash&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:6;111:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;--2022-01-12 12:05:27-- https://raw.githubusercontent.com/rancher/local-path-provisioner/master/deploy/local-path-storage.yaml Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.108.133, 185.199.110.133, 185.199.109.133, ... Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|185.199.108.133|:443... connected. HTTP request sent, awaiting response... 200 OK Length: 3451 (3.4K) [text/plain] Saving to: ‘local-path-storage.yaml’ 100%[=================================================================================================================================================================================================&amp;gt;] 3,451 402B/s in 8.6s 2022-01-12 12:09:35 (402 B/s) - ‘local-path-storage.yaml’ saved [3451/3451]&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:29;122:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;修改配置：&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/k8s_deployment/k8s-deployment-1.png&#34; placement=&#34;break&#34; xtrc=&#34;image:1;124:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34; dita-ot:image-width=&#34;589&#34; dita-ot:image-height=&#34;507&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:1;124:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;image-20220112121713686&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:30;126:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;该路径目的是持久过存储容器中的数据（详细介绍参考 &lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://github.com/rancher/local-path-provisioner#configuration&#34; scope=&#34;external&#34; xtrc=&#34;xref:9;126:26&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;?ditaot usertext?&gt;local-path-provisioner配置&lt;/xref&gt; ）&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:31;128:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:2;128:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;注意&lt;/b&gt;：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:5;130:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:16;130:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;修改分配 PV 的本机路径：&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:17;131:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;找到名为 &#34;local-path-config&#34; 的 ConfigMap 资源，其 data 字段下的 &#34;config.json&#34; 里包含的属性 &#34;paths&#34; 即为分配的 K8S 集群中的节点路径。如果配置了多个节点路径，将随机选取其中一个作为 PV。&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:32;133:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;在 Kubernetes 环境中部署：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;shell&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:7;135:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;$ kubectl apply -f local-path-storage.yaml&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:33;139:2&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;期望输出&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;shell&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:8;141:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;namespace/local-path-storage created serviceaccount/local-path-provisioner-service-account created clusterrole.rbac.authorization.k8s.io/local-path-provisioner-role created clusterrolebinding.rbac.authorization.k8s.io/local-path-provisioner-bind created deployment.apps/local-path-provisioner created storageclass.storage.k8s.io/local-path created configmap/local-path-config created&lt;/codeblock&gt;&lt;/body&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;安装-dolphindb-套件&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:7;151:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:7;151:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;安装 DolphinDB 套件&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:7;151:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:34;153:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB 套件集成在名为 &#34;dolphindb-mgr&#34; 的 chart 包中，存储在 Helm 仓库中。通过 Helm 工具进行部署：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:2;155:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:18;155:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:35;155:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;添加 DolphinDB 仓库&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;shell&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:9;157:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;$ helm repo add dolphindb https://dolphindbit.github.io/helm-chart/&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:36;161:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;期望输出：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:10;163:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&#34;dolphindb&#34; has been added to your repositories&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:19;166:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:37;166:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;安装 DolphinDB 套件&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;shell&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:11;168:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;$ helm install dolphindb-mgr dolphindb/dolphindb-mgr --set global.version=&#34;v1.0.0&#34; --set global.serviceType=NodePort --set global.storageClass=local-path --set dolphindb-webserver.nodePortIP=192.168.100.10 --set-file license.content=$licensePath/license.lic -ndolphindb --create-namespace&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:38;172:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB 的进程启动需要 license 才能生效，所以需要在指令中增加 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:6;172:46&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;license.content=$licensePath/license.lic&lt;/codeph&gt; ，并将其改为license 所在的路径。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:39;174:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;期望输出：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;shell&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:12;176:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;NAME: dolphindb-mgr LAST DEPLOYED: Wed Jan 12 14:39:11 2022 NAMESPACE: dolphindb STATUS: deployed REVISION: 1 TEST SUITE: None&lt;/codeblock&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:40;185:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;主要参数说明如下：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:6;187:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:20;187:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:7;187:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;-ndolphindb --create-namespace&lt;/codeph&gt;：将 DolphinDB 套件部署在名为 &#34;dolphindb&#34; 的 namespace 中，如果名为 &#34;dolphindb&#34; 的 namespace 不存在，则创建&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:21;188:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:8;188:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;$licensePath&lt;/codeph&gt;：DolphinDB License 的存放路径&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:22;189:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:9;189:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;global.serviceType=NodePort, dolphindb-webserver.nodePortIP&lt;/codeph&gt;：DolphinDB 套件在 Kubernetes 环境中提供的服务类型。ClusterIP：仅在 Kubernetes 环境内部访问；NodePort：通过主机端口可在 Kubernetes 环境内/外部访问；LoadBalancer：通过 Kubernetes 环境中的负载均衡供 Kubernetes 环境内/外部访问。&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:10;189:227&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&amp;lt;!--示例选择的是NodePort类型,假设您需要 LoadBalancer 类型，需要修改参数。--&amp;gt;&lt;/codeph&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:23;190:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:11;190:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;global.version&lt;/codeph&gt;: DolphinDB 套件版本号为&lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://hub.docker.com/r/dolphindb/dolphindb-operator/tags&#34; scope=&#34;external&#34; xtrc=&#34;xref:10;190:37&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;?ditaot usertext?&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:12;190:38&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;v1.0.0&lt;/codeph&gt;&lt;/xref&gt;。&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:41;192:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:3;192:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;注意&lt;/b&gt;：DolphinDB License 必须是官方授权可用的。若使用无效的 license，会出现诸如 &#34;persistentvolumeclaim log-ddb-t3-crt-0-0 not found&#34; 的报错。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:42;194:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:4;194:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;参数说明&lt;/b&gt;&lt;/p&gt;&lt;table class=&#34;- topic/table &#34; xtrc=&#34;table:1;196:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;tgroup class=&#34;- topic/tgroup &#34; cols=&#34;2&#34; xtrc=&#34;tgroup:1;196:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col1&#34; colnum=&#34;1&#34; xtrc=&#34;colspec:1;196:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;/&gt;&lt;colspec class=&#34;- topic/colspec &#34; colname=&#34;col2&#34; colnum=&#34;2&#34; xtrc=&#34;colspec:2;196:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;/&gt;&lt;thead class=&#34;- topic/thead &#34; xtrc=&#34;thead:1;196:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:1;196:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:1;196:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:5;196:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;参数&lt;/b&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;1&#34; xtrc=&#34;entry:2;196:41&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:6;196:42&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;说明&lt;/b&gt;&lt;/entry&gt;&lt;/row&gt;&lt;/thead&gt;&lt;tbody class=&#34;- topic/tbody &#34; xtrc=&#34;tbody:1;198:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:2;198:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:3;198:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:13;198:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;global.registry&lt;/codeph&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;2&#34; xtrc=&#34;entry:4;198:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB 镜像所在的 docker 注册服务器。默认为官方的 Docker Hub。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:3;199:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:5;199:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:14;199:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;global.repository&lt;/codeph&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;3&#34; xtrc=&#34;entry:6;199:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB 所在的镜像仓库名称，非必要无需修改。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:4;200:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:7;200:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:15;200:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;global.storageClass&lt;/codeph&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;4&#34; xtrc=&#34;entry:8;200:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB 使用的持久化存储的存储类，不指定则使用默认存储类。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:5;201:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:9;201:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:16;201:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;global.serviceAccount&lt;/codeph&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;5&#34; xtrc=&#34;entry:10;201:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB 套件的 rbac 资源名称，非必要无需修改。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:6;202:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:11;202:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:17;202:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;global.allNamespace&lt;/codeph&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;6&#34; xtrc=&#34;entry:12;202:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB 是否在所有 namespace 生效。true: DolphinDB 可在部署在所有 namespace 并接受其管理；false: DolphinDB 仅在部署在当前 namespace 并接受其管理。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:7;203:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:13;203:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:18;203:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;dolphindb-operator.replicaCount&lt;/codeph&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;7&#34; xtrc=&#34;entry:14;203:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB 套件中 dolphindb-operator 组件的副本数。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:8;204:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:15;204:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:19;204:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;dolphindb-operator.imageTag&lt;/codeph&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;8&#34; xtrc=&#34;entry:16;204:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB 套件中 dolphindb-operator 组件的版本号，不指定时与 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:20;204:94&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;global.version&lt;/codeph&gt; 保持一致。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:9;205:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:17;205:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:21;205:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;dolphindb-webserver.replicaCount&lt;/codeph&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;9&#34; xtrc=&#34;entry:18;205:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB 套件中 dolphindb-webserver 组件的副本数。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:10;206:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:19;206:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:22;206:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;dolphindb-webserver.imageTag&lt;/codeph&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;10&#34; xtrc=&#34;entry:20;206:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB 套件中 dolphindb-webserver 组件的版本号。不指定时与 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:23;206:95&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;global.version&lt;/codeph&gt; 保持一致。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:11;207:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:21;207:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:24;207:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;dolphindb-webserver.nodePortIP&lt;/codeph&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;11&#34; xtrc=&#34;entry:22;207:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;webserver 展示 DolphinDB 时对外暴露 ip。如果 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:25;207:83&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;global.serviceType&lt;/codeph&gt; 使用 NodePort 类型，则需要指定 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:26;207:125&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;nodePortIP&lt;/codeph&gt;。可以指定 Kubernetes 集群中任意一个节点的 ip 为 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:27;207:170&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;nodePortIP&lt;/codeph&gt;。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:12;208:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:23;208:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:28;208:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;dolphindb.version&lt;/codeph&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;12&#34; xtrc=&#34;entry:24;208:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB 的默认版本号。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:13;209:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:25;209:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:29;209:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;dolphindb.serviceType&lt;/codeph&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;13&#34; xtrc=&#34;entry:26;209:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB 在 Kubernetes 环境提供的服务类型，详情可参考 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:30;209:87&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;global.serviceType&lt;/codeph&gt;。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:14;210:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:27;210:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:31;210:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;dolphindb.controllerDataSize&lt;/codeph&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;14&#34; xtrc=&#34;entry:28;210:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB 的每个 Controller 节点的持久化存储数据的默认大小。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:15;211:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:29;211:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:32;211:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;dolphindb.datanodeDataSize&lt;/codeph&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;15&#34; xtrc=&#34;entry:30;211:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB 的每个 Datanode 节点的持久化存储数据的默认大小。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:16;212:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:31;212:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:33;212:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;images.default.dolphindb-service-manager&lt;/codeph&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;16&#34; xtrc=&#34;entry:32;212:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB 初始化镜像的默认版本号。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:17;213:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:33;213:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:34;213:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;images.default.dolphindb-config-loader&lt;/codeph&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;17&#34; xtrc=&#34;entry:34;213:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB 在多 Controller 集群模式下的伴随镜像的默认版本号。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:18;214:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;18&#34; xtrc=&#34;entry:35;214:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:35;214:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;license.name&lt;/codeph&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;18&#34; xtrc=&#34;entry:36;214:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB License 部署后的 Configmap 资源名称，非必要无需修改。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:19;215:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;19&#34; xtrc=&#34;entry:37;215:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:36;215:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;license.content&lt;/codeph&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;19&#34; xtrc=&#34;entry:38;215:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB License 的内容。&lt;/entry&gt;&lt;/row&gt;&lt;row class=&#34;- topic/row &#34; xtrc=&#34;row:20;216:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col1&#34; dita-ot:x=&#34;1&#34; dita-ot:y=&#34;20&#34; xtrc=&#34;entry:39;216:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:37;216:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;license.resources&lt;/codeph&gt;&lt;/entry&gt;&lt;entry class=&#34;- topic/entry &#34; colname=&#34;col2&#34; dita-ot:x=&#34;2&#34; dita-ot:y=&#34;20&#34; xtrc=&#34;entry:40;216:47&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB 每个容器的&lt;xref class=&#34;- topic/xref &#34; format=&#34;html&#34; href=&#34;https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/&#34; scope=&#34;external&#34; xtrc=&#34;xref:11;216:63&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;?ditaot usertext?&gt;cpu 和 memory&lt;/xref&gt; 的默认资源配置。应与 License 中给定的资源配置相同。&lt;/entry&gt;&lt;/row&gt;&lt;/tbody&gt;&lt;/tgroup&gt;&lt;/table&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:3;218:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:24;218:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:43;218:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;查看 DolphinDB 套件部署情况&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;shell&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:13;220:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;$ helm list -ndolphindb&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:44;224:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;期望输出：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;shell&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:14;226:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;NAME NAMESPACE REVISION UPDATED STATUS CHART APPVERSION dolphindb-mgr DolphinDB 1 2022-01-12 14:39:11.493079194+0800CST deployed dolphindb-mgr-v1.0.0 1.0.0&lt;/codeblock&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;shell&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:15;231:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;$ kubectl get pods -ndolphindb&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:45;235:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;期望输出：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;shell&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:16;237:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;NAME READY STATUS RESTARTS AGE dolphindb-operator-0 1/1 Running 0 20m dolphindb-operator-1 1/1 Running 0 12m dolphindb-webserver-5487785cfd-msr5w 1/1 Running 0 20m dolphindb-webserver-5487785cfd-ns5dq 1/1 Running 0 20m&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:46;245:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:7;245:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;注意&lt;/b&gt;：Helm 状态变成 deployed 以及 pod 的 STATUS 变成 Running 则表示 DolphinDB 套件部署成功。&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;部署并连接-dolphindb-集群&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:8;247:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:8;247:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;部署并连接 DolphinDB 集群&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:8;247:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;/&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;可视化界面&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:9;249:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:9;249:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;可视化界面&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:9;249:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:47;251:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB 套件提供的可视化界面默认使用 NodePort 的 ServiceType 进行服务暴露。在完成 DolphinDB 套件部署之后，可在 Kubernetes 环境中查看可视化界面对应的 Service：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;shell&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:17;253:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;$ kubectl -ndolphindb get svc | grep dolphindb-webserver #输出结果 dolphindb-webserver NodePort 10.109.94.68 &amp;lt;none&amp;gt; 8080:30908/TCP 43m&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:48;260:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;通过浏览器访问 DolphinDB 套件的可视化界面：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:18;262:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;http://$nodeIP:$NodePort/dolphindb-cloud&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:49;266:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;参数说明如下：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:7;268:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:25;268:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:38;268:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;$nodeIP&lt;/codeph&gt;：Kubernetes 环境中任意 node 的 ip。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:26;269:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:39;269:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;$NodePort&lt;/codeph&gt;：终端显示信息中 DolphinDB 套件的可视化界面对应的 NodePort（输出结果中的&#34;30908&#34;）。&lt;/li&gt;&lt;/ul&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:50;271:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:8;271:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;注意&lt;/b&gt;：&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:51;273:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;若使用 minikube 部署， 需要执行以下命令:&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:52;275:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;kubectl port-forward svc/dolphindb-webserver 8080 -ndolphindb&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:53;277:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;本教程即http://192.168.100.10:30908/dolphindb-cloud/&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;部署-dolphindb-集群&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:10;279:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:10;279:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;部署 DolphinDB 集群&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:10;279:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:4;281:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:27;281:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:54;281:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;点击新建集群&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/k8s_deployment/k8s-deployment-2.png&#34; placement=&#34;break&#34; xtrc=&#34;image:2;283:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34; dita-ot:image-width=&#34;1900&#34; dita-ot:image-height=&#34;457&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:2;283:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;image-20220112155415310&lt;/alt&gt;&lt;/image&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:28;284:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:55;284:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;选择新建集群的配置&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/k8s_deployment/k8s-deployment-3.png&#34; placement=&#34;break&#34; xtrc=&#34;image:3;286:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34; dita-ot:image-width=&#34;636&#34; dita-ot:image-height=&#34;912&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:3;286:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;image-20220112155429794&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:56;288:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:9;288:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;注意&lt;/b&gt;：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:5;290:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:29;290:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;控制节点与数据节点的 CPU、内存等资源不能超过服务器本身资源，否则集群状态会有异常。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:30;291:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;日志模式有两种分别为标准输出和输出到文件，输出到文件性能更佳（推荐）。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:31;292:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;控制节点副本数以及数据节点副本数指的集群的控制节点与数据节点的数量。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:32;293:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;标准 pvc 更加灵活，local path 更加简便（推荐，部署文档中的 local-path 是存储类，也是用于提供 pvc 的）。&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:33;294:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;端口指的是 container 的端口，用在 LoadBalancer 中，指定 port 。&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:34;295:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:57;295:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;成功部署集群&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/k8s_deployment/k8s-deployment-4.png&#34; placement=&#34;break&#34; xtrc=&#34;image:4;297:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34; dita-ot:image-width=&#34;1909&#34; dita-ot:image-height=&#34;206&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:4;297:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;image-20220112161319747&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:58;299:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;状态变成 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:40;299:9&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;Available&lt;/codeph&gt;，表示集群创建成功，可以正常提供服务。&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:35;300:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:59;300:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;连接 DolphinDB 集群&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/k8s_deployment/k8s-deployment-5.png&#34; placement=&#34;break&#34; xtrc=&#34;image:5;302:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34; dita-ot:image-width=&#34;1889&#34; dita-ot:image-height=&#34;284&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:5;302:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;image-20220112171813273&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:60;304:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;如图所示，控制节点的 IP 和 PORT 为 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:41;304:27&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;192.168.100.10:31598&lt;/codeph&gt;，数据节点的 IP 和 PORT 为 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:42;304:68&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;192.168.100.10:31236&lt;/codeph&gt;。对于刚启动的集群，如果要连接数据节点，需要先连接 controller，通过集群管理器&lt;xref class=&#34;- topic/xref &#34; format=&#34;md&#34; href=&#34;https://gitee.com/dolphindb/Tutorials_CN/blob/master/single_machine_cluster_deploy.md#336-%E5%90%AF%E5%8A%A8%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9&#34; scope=&#34;external&#34; xtrc=&#34;xref:12;304:134&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;?ditaot usertext?&gt;开启数据节点&lt;/xref&gt;。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:61;306:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:10;306:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;注意&lt;/b&gt;：目前 NodePort 服务类型的端口随机分配，不支持指定。&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;升级-dolphindb-集群&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:11;308:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:11;308:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;升级 DolphinDB 集群&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:11;308:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:62;310:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;DolphinDB 组件可简化 DolphinDB 集群的滚动升级。&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:63;312:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;执行以下命令，手动修改 version 字段为 1.30.15 可将 DolphinDB 集群升级到 1.30.15 版本：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;shell&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:19;314:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;$ kubectl edit ddb -ndolphindb&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/k8s_deployment/k8s-deployment-6.png&#34; placement=&#34;break&#34; xtrc=&#34;image:6;318:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34; dita-ot:image-width=&#34;604&#34; dita-ot:image-height=&#34;447&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:6;318:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;image-20220112180135714&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:64;320:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;如下图所示，version 变成 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:43;320:18&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;1.30.15&lt;/codeph&gt; 以及 status 变成 Available 状态&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/k8s_deployment/k8s-deployment-7.png&#34; placement=&#34;break&#34; xtrc=&#34;image:7;322:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34; dita-ot:image-width=&#34;1907&#34; dita-ot:image-height=&#34;195&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:7;322:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;image-20220112180645872&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:65;324:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;b class=&#34;+ topic/ph hi-d/b &#34; xtrc=&#34;b:11;324:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;注意&lt;/b&gt;：通过 web 升级 DolphinDB 的接口正在开发中。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;更新-dolphindb-集群-license-文件&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:12;326:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:12;326:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;更新 DolphinDB 集群 license 文件&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:12;326:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:66;328:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;对于已创建的集群，需要通过以下步骤更新 license 文件：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:6;330:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:36;330:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:67;330:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;通过以下命令，可获取 k8s 中已创建集群的名字&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;bash&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:20;332:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;$ kubectl get cm -ndolphindb&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:37;335:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:68;335:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;选择需要更新 license 的集群（本例为 ddb_test1）的 yaml 文件&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;bash&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:21;337:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;$ kubectl edit cm ddb_test1 -oyaml -ndolphindb&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/k8s_deployment/updatelicense.png&#34; placement=&#34;break&#34; xtrc=&#34;image:8;341:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34; dita-ot:image-width=&#34;965&#34; dita-ot:image-height=&#34;854&#34;/&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:69;343:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;如图所示，将红框圈住的部分替换为新的 license 后保存文件。&lt;/p&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:38;344:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:70;344:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;更新 license 后，需要重启 pod&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;bash&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:22;346:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;$ kubectl get pod -ndolphindb | grep ddb_test1 | awk '{print $1}' | xargs kubectl delete pod -ndolphindb&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:39;349:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:71;349:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;通过以下命令获取所有 pod&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;bash&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:23;351:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;$ kubectl get pod -ndolphindb&lt;/codeblock&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/k8s_deployment/updatelicense1.png&#34; placement=&#34;break&#34; xtrc=&#34;image:9;355:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34; dita-ot:image-width=&#34;934&#34; dita-ot:image-height=&#34;304&#34;/&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:72;357:4&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;如上图所示，表示所有 pod 重启成功，且更新的 license 文件生效。&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;销毁-dolphindb-集群&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:13;359:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:13;359:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;销毁 DolphinDB 集群&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:13;359:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:73;361:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;若需要销毁 Kubernetes 集群，可参考 创建 &lt;i class=&#34;+ topic/ph hi-d/i &#34; xtrc=&#34;i:2;361:28&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;Kubernetes 集群&lt;/i&gt; 小节，具体销毁方法取决于其创建方式。本节仅介绍如何销毁 DolphindDB 集群，具体操作方法如下：&lt;/p&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:74;363:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;方式一：通过 Web 管理器删除按钮销毁&lt;/p&gt;&lt;image class=&#34;- topic/image &#34; href=&#34;images/k8s_deployment/k8s-deployment-8.png&#34; placement=&#34;break&#34; xtrc=&#34;image:10;365:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34; dita-ot:image-width=&#34;1912&#34; dita-ot:image-height=&#34;227&#34;&gt;&lt;alt class=&#34;- topic/alt &#34; xtrc=&#34;alt:8;365:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;image-20220113100852771&lt;/alt&gt;&lt;/image&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:75;367:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;方式二：通过命令行进行销毁&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;shell&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:24;369:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;$ kubectl delete ddb $ddbName -ndolphindb&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:76;373:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;参数说明如下：&lt;/p&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:8;375:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:40;375:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:44;375:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;$ddbName&lt;/codeph&gt;：Kubernetes 环境中删除的 DolphinDB 集群名称。&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;卸载-dolphindb-套件&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:14;377:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:14;377:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;卸载 DolphinDB 套件&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:14;377:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:77;379:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;通过以下命令可卸载 DolphinDB 套件&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; outputclass=&#34;bash&#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:25;381:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;$ helm uninstall dolphindb-mgr-ndolphindb&lt;/codeblock&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;k8s-中配置-coredump&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:15;385:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:15;385:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;K8S 中配置 CoreDump&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:15;385:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:78;387:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;开启 core dump 后，当某个节点崩溃时，系统会终止当前进程并生成 core dump 文件，以帮助技术人员分析解决问题。在 Kubernetes 环境中，需要在 DolphinDB 容器运行的宿主机上执行以下命令来启用 core dump，如需了解更多 core dump 信息，参阅&lt;xref class=&#34;- topic/xref &#34; dita-ot:orig-format=&#34;md&#34; format=&#34;dita&#34; href=&#34;how_to_handle_crash.md&#34; xtrc=&#34;xref:13;387:147&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34; type=&#34;topic&#34;&gt;&lt;?ditaot usertext?&gt;DolphinDB Crash&lt;/xref&gt;中第三节。&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:26;389:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;echo &#34;/data/ddb/core/core.%p&#34; | sudo tee /proc/sys/kernel/core_pattern&lt;/codeblock&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:79;393:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;其中 &#34;&lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:45;393:5&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;/data/ddb/core&lt;/codeph&gt;&#34; 为 core dump 文件在容器中的路径，若与当前宿主机的配置有冲突，可在部署 DolphinDB 套件时通过参数 &lt;codeph class=&#34;+ topic/ph pr-d/codeph &#34; xtrc=&#34;codeph:46;393:82&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;dolphindb.coreDumpDir&lt;/codeph&gt; 自定义。&lt;/p&gt;&lt;/body&gt;&lt;/topic&gt;&lt;topic class=&#34;- topic/topic &#34; ditaarch:DITAArchVersion=&#34;2.0&#34; domains=&#34;a(props audience) a(props deliveryTarget) a(props otherprops) a(props platform) a(props product)&#34; id=&#34;常见问题&#34; specializations=&#34;@props/audience @props/deliveryTarget @props/otherprops @props/platform @props/product&#34; xtrc=&#34;topic:16;395:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;title class=&#34;- topic/title &#34; xtrc=&#34;title:16;395:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;常见问题&lt;/title&gt;&lt;body class=&#34;- topic/body &#34; xtrc=&#34;body:16;395:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;ul class=&#34;- topic/ul &#34; xtrc=&#34;ul:9;397:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:41;397:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:80;397:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;创建集群后，如果 Pod 没有创建，则可以通过以下方式进行诊断：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:27;399:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;kubectl get pod -nlphindb kubectl describe pod $podName -ndolphindb kubectl get statefulsets -n dolphindb kubectl describe statefulsets -n dolphindb&lt;/codeblock&gt;&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:42;405:1&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:81;405:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;Pod 处于 Pending 状态，通常都是资源不满足导致的，比如：&lt;/p&gt;&lt;ol class=&#34;- topic/ol &#34; xtrc=&#34;ol:7;407:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:43;407:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;使用持久化存储的Pod 使用的 PVC 的 StorageClass 不存在或 PV 不足&lt;/li&gt;&lt;li class=&#34;- topic/li &#34; xtrc=&#34;li:44;408:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;Kubernetes 集群中没有节点能满足 Pod 申请的 CPU 或内存&lt;/li&gt;&lt;/ol&gt;&lt;p class=&#34;- topic/p &#34; xtrc=&#34;p:82;410:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;此时，可以通过 kubectl describe pod 命令查看 Pending 的具体原因：&lt;/p&gt;&lt;codeblock class=&#34;+ topic/pre pr-d/codeblock &#34; xml:space=&#34;preserve&#34; xtrc=&#34;codeblock:28;412:3&#34; xtrf=&#34;file:/var/lib/jenkins/workspace/packDocCN/documentation/zh/tutorials/k8s_deployment.md&#34;&gt;kubectl describe po -n ${namespace} ${pod_name}&lt;/codeblock&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/body&gt;&lt;/topic&gt;&lt;/topic&gt;"/><meta name="wh-source-relpath" content="tutorials/k8s_deployment.md"/><meta name="wh-out-relpath" content="tutorials/k8s_deployment.html"/>

    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/commons.css?buildId=2024012323"/>
    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic.css?buildId=2024012323"/>

    <script src="../oxygen-webhelp/app/options/properties.js?buildId=20250305183303"></script>
    <script src="../oxygen-webhelp/app/localization/strings.js?buildId=2024012323"></script>
    <script src="../oxygen-webhelp/app/search/index/keywords.js?buildId=20250305183303"></script>
    <script defer="defer" src="../oxygen-webhelp/app/commons.js?buildId=2024012323"></script>
    <script defer="defer" src="../oxygen-webhelp/app/topic.js?buildId=2024012323"></script>
<link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/styles.css?buildId=2024012323"/><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script></head>

    <body id="基于-k8s-部署-dolphindb" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="sr-only sr-only-focusable">
            跳转到主要内容
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid">
        <div xmlns:whc="http://www.oxygenxml.com/webhelp/components" class="wh_header_flex_container navbar-nav navbar-expand-md navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="https://docs.dolphindb.cn/zh/index.html" class=" wh_logo d-none d-sm-block "><img src="../logo.png" alt="  DolphinDB 文档中心  "/></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="booktitle">  <span class="ph mainbooktitle">DolphinDB 文档中心</span>  </span></a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                
            </div>
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="搜索 " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="搜索查询" required="required"/><button type="submit" class="wh_search_button" aria-label="搜索"><span class="search_input_text">搜索</span></button></div></form>
            
            <script src="/vendors/react/umd/react.production.min.js" defer="defer"></script>
<script src="/vendors/react-dom/umd/react-dom.production.min.js" defer="defer"></script>
<script src="/vendors/dayjs/dayjs.min.js" defer="defer"></script>
<script src="/vendors/antd/dist/antd.min.js" defer="defer"></script>
<script src="/vendors/@ant-design/icons/dist/index.umd.min.js" defer="defer"></script>
<script src="/zh/index.js" type="module"></script>
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" defer="defer"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer="defer"><!--


--></script>
<script defer="defer"><!--

// 从主页重定向
const currentUrl = window.location.href;

// 判断当前URL是否包含index.html并且路径最后部分是index.html
if (currentUrl.endsWith('index.html')) {
    // 处理根目录下的index.html跳转
    const baseUrl = currentUrl.split('/index.html')[0]; // 获取index.html之前的部分
    const redirectUrl = `${baseUrl}/about/ddb_intro.html`; // 构建跳转路径
    window.location.href = redirectUrl; // 执行跳转
}

--></script>
            
        </div></div>
    </div>
</header>
        
        
         
        
        
        
        <div class="container-fluid" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none navbar-expand-md" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="../index.html"><span>主页</span></a></span></li><li><div class="topicref" data-id="sectionddb_deployment"><div class="title"><a href="../deploy/deploy_intro.html"><span class="keyword label">部署</span></a><div class="wh-tooltip"><p class="shortdesc">如何在不同的场景中部署 DolphinDB</p></div></div></div></li><li><div class="topicref"><div class="title"><a href="../tutorials/docker_single_deployment.html">云环境部署</a></div></div></li><li class="active"><div class="topicref" data-id="基于-k8s-部署-dolphindb"><div class="title"><a href="../tutorials/k8s_deployment.html">基于 K8S 部署 DolphinDB</a></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="切换搜索突出显示" title="切换搜索突出显示"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="折叠截面" title="折叠截面"></button>
                        
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="打印此页" aria-label="打印此页"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem"><div data-tocid="ddb_intro-d9713e87" class="topicref" data-id="ddb_intro" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../about/ddb_intro.html" id="ddb_intro-d9713e87-link">关于DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="chap1_getstarted-d9713e136" class="topicref" data-id="chap1_getstarted" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../getstarted/chap1_getstarted.html" id="chap1_getstarted-d9713e136-link">快速上手</a><div class="wh-tooltip"><p class="shortdesc">如何快速部署 DolphinDB、建库建表、写入和查询数据</p></div></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="sectionddb_deployment-d9713e189" class="topicref" data-id="sectionddb_deployment" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action sectionddb_deployment-d9713e189-link" class="wh-expand-btn"></span><div class="title"><a href="../deploy/deploy_intro.html" id="sectionddb_deployment-d9713e189-link"><span class="keyword label">部署</span></a><div class="wh-tooltip"><p class="shortdesc">如何在不同的场景中部署 DolphinDB</p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e242" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e242-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/standalone_server.html" id="tocId-d9713e242-link">单节点部署与升级</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e335" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e335-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/single_machine_cluster_deploy.html" id="tocId-d9713e335-link">集群部署与升级</a></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="tocId-d9713e520" class="topicref" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action tocId-d9713e520-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/docker_single_deployment.html" id="tocId-d9713e520-link">云环境部署</a></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="基于-docker-部署-dolphindb-d9713e521" class="topicref" data-id="基于-docker-部署-dolphindb" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/docker_single_deployment.html" id="基于-docker-部署-dolphindb-d9713e521-link">基于 Docker 部署 DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="基于-docker-compose-部署-dolphindb-d9713e567" class="topicref" data-id="基于-docker-compose-部署-dolphindb" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/docker-compose_high_cluster.html" id="基于-docker-compose-部署-dolphindb-d9713e567-link">基于 Docker-Compose 部署 DolphinDB</a></div></div></li><li role="treeitem" class="active"><div data-tocid="基于-k8s-部署-dolphindb-d9713e613" class="topicref" data-id="基于-k8s-部署-dolphindb" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/k8s_deployment.html" id="基于-k8s-部署-dolphindb-d9713e613-link">基于 K8S 部署 DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="基于阿里云-k8s-部署-dolphindb-d9713e659" class="topicref" data-id="基于阿里云-k8s-部署-dolphindb" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/k8s_deployment_in_Aliyun.html" id="基于阿里云-k8s-部署-dolphindb-d9713e659-link">基于阿里云 K8S 部署 DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="基于-aws-部署-dolphindb-d9713e705" class="topicref" data-id="基于-aws-部署-dolphindb" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/k8s_deployment_in_AWS.html" id="基于-aws-部署-dolphindb-d9713e705-link">基于 AWS 部署 DolphinDB</a></div></div></li><li role="treeitem"><div data-tocid="使用-terraform-在云上部署-dolphindb-d9713e751" class="topicref" data-id="使用-terraform-在云上部署-dolphindb" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/cloud_deployment_with_terraform.html" id="使用-terraform-在云上部署-dolphindb-d9713e751-link">使用 Terraform 在云上部署 DolphinDB</a></div></div></li></ul></li><li role="treeitem"><div data-tocid="linux-系统部署准备-d9713e797" class="topicref" data-id="linux-系统部署准备" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/prep_linux_for_deploy.html" id="linux-系统部署准备-d9713e797-link">Linux 系统部署准备</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap1_sect_using_clients-d9713e843" class="topicref" data-id="chap1_sect_using_clients" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap1_sect_using_clients-d9713e843-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/clients.html" id="chap1_sect_using_clients-d9713e843-link">操作手册</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="parameters_configuration-d9713e2022" class="topicref" data-id="parameters_configuration" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action parameters_configuration-d9713e2022-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/cfg/para_cfg.html" id="parameters_configuration-d9713e2022-link"><span class="keyword label">参数配置</span></a></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259" class="topicref" data-id="new_chap_database_manage_new_chap_dbmanage_landing_page" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/cfg/db_intro.html" id="new_chap_database_manage_new_chap_dbmanage_landing_page-d9713e2259-link"><span class="keyword label">数据库</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 数据库的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_streaming-d9713e3760" class="topicref" data-id="chap7_tutorials_streaming" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_streaming-d9713e3760-link" class="wh-expand-btn"></span><div class="title"><a href="../stream/str_intro.html" id="chap7_tutorials_streaming-d9713e3760-link"><span class="keyword label">流数据</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 流数据引擎及流数据计算的基本概念</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e7513" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e7513-link" class="wh-expand-btn"></span><div class="title"><a href="../db_distr_comp/db_oper/import_data.html" id="tocId-d9713e7513-link">数据迁移</a><div class="wh-tooltip"><p class="shortdesc">如何从不同数据源向 DolphinDB 迁移数据</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap7_tutorials_system_management-d9713e7940" class="topicref" data-id="chap7_tutorials_system_management" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap7_tutorials_system_management-d9713e7940-link" class="wh-expand-btn"></span><div class="title"><a href="../sys_man/om_intro.html" id="chap7_tutorials_system_management-d9713e7940-link"><span class="keyword label">系统运维</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 的系统运维功能及方法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="troubleshooting-d9713e8780" class="topicref" data-id="troubleshooting" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action troubleshooting-d9713e8780-link" class="wh-expand-btn"></span><div class="title"><a href="../error_codes/troubleshooting.html" id="troubleshooting-d9713e8780-link">故障排查</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="about_language_resources-d9713e20911" class="topicref" data-id="about_language_resources" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action about_language_resources-d9713e20911-link" class="wh-expand-btn"></span><div class="title"><a href="../progr/progr_intro.html" id="about_language_resources-d9713e20911-link"><span class="keyword label">编程语言</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 编程基本概念与方法、SQL 在 DolphinDB 的应用</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="functions_references-d9713e30925" class="topicref" data-id="functions_references" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action functions_references-d9713e30925-link" class="wh-expand-btn"></span><div class="title"><a href="../funcs/funcs_intro.html" id="functions_references-d9713e30925-link"><span class="keyword label">函数参考</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 函数分类、语法、详解及示例</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="api_protocol-d9713e94064" class="topicref" data-id="api_protocol" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action api_protocol-d9713e94064-link" class="wh-expand-btn"></span><div class="title"><a href="../api/connapi_intro.html" id="api_protocol-d9713e94064-link"><span class="keyword label">连接器 &amp; API</span></a><div class="wh-tooltip"><p class="shortdesc">面向不同编程语言的 DolphinDB API 及连接器，相关协议和用法</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="chap6_plugin-d9713e94210" class="topicref" data-id="chap6_plugin" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action chap6_plugin-d9713e94210-link" class="wh-expand-btn"></span><div class="title"><a href="../plugins/plg_intro.html" id="chap6_plugin-d9713e94210-link"><span class="keyword label">插件</span></a><div class="wh-tooltip"><p class="shortdesc">多个应用场景的插件使用说明和插件开发指导</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="third_party-d9713e97904" class="topicref" data-id="third_party" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action third_party-d9713e97904-link" class="wh-expand-btn"></span><div class="title"><a href="../third_party.html" id="third_party-d9713e97904-link">第三方工具</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="about_tutorials-d9713e98227" class="topicref" data-id="about_tutorials" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action about_tutorials-d9713e98227-link" class="wh-expand-btn"></span><div class="title"><a href="../tutorials/about_tutorials.html" id="about_tutorials-d9713e98227-link"><span class="keyword label">教程</span></a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 产品使用教程</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d9713e105982" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d9713e105982-link" class="wh-expand-btn"></span><div class="title"><a href="../rn/server/3_00_2.html" id="tocId-d9713e105982-link">版本说明</a><div class="wh-tooltip"><p class="shortdesc">DolphinDB 版本发布历史</p></div></div></div></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-7 col-md-9 col-sm-12" id="wh_topic_body">
                        <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        <button id="wh_close_topic_toc_button" class="close-toc-button d-none" aria-label="Toggle topic table of content" aria-controls="wh_topic_toc" aria-expanded="true">
                            <span class="close-toc-icon-container">
                                <span class="close-toc-icon"></span>     
                            </span>
                        </button>
                        
                        <div class=" wh_topic_content body "><main role="main"><article class="- topic/topic topic" role="article" aria-labelledby="ariaid-title1"><h1 class="- topic/title title topictitle1" id="ariaid-title1">基于 K8S 部署 DolphinDB</h1><div class="- topic/body body"><p class="- topic/p p">Kubernetes（简称 K8S）是一个开源的容器集群管理系统，可以实现容器集群的自动化部署、自动扩缩容、维护等功能。DolphinDB Operator 和 Webserver（简称 DolphinDB 套件）是部署于 Kubernetes 上的 DolphinDB 集群自动运维系统，提供包括部署、升级、扩缩容、配置变更的 DolphinDB 全生命周期管理。通过 DolphinDB 套件，DolphinDB 可以无缝运行在公有云或私有部署的 Kubernetes 集群上。</p></div><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title2" id="dolphindb-in-kubernetes-简介"><h2 class="- topic/title title topictitle2" id="ariaid-title2">DolphinDB in Kubernetes 简介</h2><div class="- topic/body body"><p class="- topic/p p">DolphinDB 在 Kubernetes 环境中以容器的形式运行并提供服务：</p><ul class="- topic/ul ul"><li class="- topic/li li">服务资源：DolphinDB 在 Kubenrnetes 环境中被抽象为自定义资源 ddb，ddb 定义了 DolphinDB 在 Kubernetes 环境中运行的相关属性，通过这些属性指定 DolphinDB 运行的具体配置。</li><li class="- topic/li li">资源管理：服务组件 ddb-operator 负责管理 DolphinDB 运行在 Kubernetes 环境中的资源。它将 ddb 资源解析为 Kubernetes 环境中的容器、服务、配置等资源，并实时监听这些资源，保证 DolphinDB 在 Kubernetes 环境中正常运行。</li><li class="- topic/li li">身份验证：在 Kubernetes 环境中，DolphinDB 运行前需要通过 license 进行身份验证。license 被定义为一个 ConfigMap 资源。</li></ul></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title3" id="快速部署-dolphindb"><h2 class="- topic/title title topictitle2" id="ariaid-title3">快速部署 DolphinDB</h2><div class="- topic/body body"><p class="- topic/p p">本文的搭建环境以及软件版本信息如下：</p><p class="- topic/p p">服务器：三台阿里云服务器,其外网ip分别为192.168.100.10（master），192.168.100.11（worker），192.168.100.12（worker）</p><p class="- topic/p p">操作系统：Linux（内核3.10以上版本）</p><p class="- topic/p p">内存：8GB</p><p class="- topic/p p">CPU: x86_64（8核心）</p><p class="- topic/p p">docker version：<code class="+ topic/ph pr-d/codeph ph codeph">v20.10.12</code>，三台均部署</p><p class="- topic/p p">helm version: <code class="+ topic/ph pr-d/codeph ph codeph">v3.7.2</code>，三台均部署</p><p class="- topic/p p">Kubernetes version：<code class="+ topic/ph pr-d/codeph ph codeph">v1.23.3</code> ，三台均部署</p><p class="- topic/p p">Kubectl 和 Kubeadm version：<code class="+ topic/ph pr-d/codeph ph codeph">v1.21</code> 及以上，三台均部署。</p><p class="- topic/p p">DolphinDB 套件 version： <a class="- topic/xref xref" href="https://hub.docker.com/r/dolphindb/dolphindb-webserver/tags" target="_blank" rel="external noopener"><code class="+ topic/ph pr-d/codeph ph codeph">v1.0.0</code></a>，正式版本号 ，只需在 master 上部署</p><p class="- topic/p p">DolphinDB 套件是指 Kubernetes 环境中 DolphinDB 的资源和界面管理组件的集合，包含以下部分：</p><ul class="- topic/ul ul"><li class="- topic/li li">dolphindb-operator：DolphinDB 在 Kubernetes 环境中的资源管理器；</li><li class="- topic/li li">dolphindb-webserver：DolphinDB 在 Kubernetes 环境中的可视化管理界面。</li></ul><p class="- topic/p p">本文介绍了如何创建一个 Kubernetes 集群，部署 DolphinDB 套件，并使用它部署一个包含3个数据节点的高可用集群，最终搭建的集群节点如下:</p><pre class="+ topic/pre pr-d/codeblock pre codeblock shell"><code>controller1  =&gt; agent1 =&gt; 1 datanode
controller2  =&gt; agent2 =&gt; 1 datanode
controller3  =&gt; agent3 =&gt; 1 datanode</code></pre><p class="- topic/p p">基本步骤如下：</p><ol class="- topic/ol ol"><li class="- topic/li li">创建 Kubernetes 集群</li><li class="- topic/li li">部署 DolphinDB 套件</li><li class="- topic/li li">连接 DolphinDB 集群</li><li class="- topic/li li">升级 DolphinDB 集群</li><li class="- topic/li li">销毁 DolphinDB 集群</li></ol></div><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title4" id="创建-kubernetes-集群"><h3 class="- topic/title title topictitle3" id="ariaid-title4">创建 Kubernetes 集群</h3><div class="- topic/body body"><p class="- topic/p p">创建集群之前，需要先搭建好 docker 以及 helm 环境，参考: <a class="- topic/xref xref" href="https://docs.docker.com/install/" target="_blank" rel="external noopener">docker 安装教程</a>，<a class="- topic/xref xref" href="https://helm.sh/docs/intro/install/" target="_blank" rel="external noopener">Helm安装教程</a>。</p><p class="- topic/p p">docker 安装完成后，在 Linux 命令行窗口执行以下命令，若显示 docker 版本号，则说明安装成功。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock bash"><code>$ docker -v</code></pre><p class="- topic/p p">helm安装完成后，在 Linux 命令行窗口执行以下命令，若显示 helm 版本号，则说明安装成功。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock bash"><code>$ helm version</code></pre><p class="- topic/p p">推荐两种创建 Kubernetes 集群:</p><ul class="- topic/ul ul"><li class="- topic/li li">单节点 Kubernets 环境部署：使用 <a class="- topic/xref xref" href="https://minikube.sigs.k8s.io/docs/start/" target="_blank" rel="external noopener">Minikube</a></li><li class="- topic/li li">多节点 Kubernets 环境部署：使用 <a class="- topic/xref xref" href="https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/" target="_blank" rel="external noopener">Kubeadm</a></li></ul><p class="- topic/p p">完成 Kubernetes 安装后，在 Linux 命令行窗口执行以下命令，若显示 Kubernetes 版本号，则说明安装成功。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock bash"><code>$ kubectl version</code></pre></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title5" id="部署-dolphindb-套件"><h3 class="- topic/title title topictitle3" id="ariaid-title5">部署 DolphinDB 套件</h3><div class="- topic/body body"><p class="- topic/p p">确保满足以下硬件以及软件要求：</p><p class="- topic/p p">硬件条件：详见 <a class="- topic/xref xref" href="https://kubernetes.io/zh/docs/setup/production-environment/tools/kubeadm/install-kubeadm/" target="_blank" rel="external noopener">kubeadm</a> 安装条件。</p><p class="- topic/p p">软件条件：</p><ul class="- topic/ul ul"><li class="- topic/li li">可以使用 kubectl 访问的 Kubernetes 集群（本文以 Kubeadm 为例）</li><li class="- topic/li li">已安装 <a class="- topic/xref xref" href="https://helm.sh/docs/intro/install/" target="_blank" rel="external noopener">Helm</a></li><li class="- topic/li li">配置 CoreDump 参考<em class="+ topic/ph hi-d/i ph i">K8S 中配置 CoreDump</em>部分内容</li></ul><p class="- topic/p p">验证是否安装成功见<a class="- topic/xref xref" href="#%E5%88%9B%E5%BB%BA-kubernetes-%E9%9B%86%E7%BE%A4">创建 Kubernetes 集群</a>，本文下面介绍部署步骤。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title6" id="部署-local-path-provisioner"><h3 class="- topic/title title topictitle3" id="ariaid-title6">部署 Local Path Provisioner</h3><div class="- topic/body body"><p class="- topic/p p">Local Path Povisioner 可以在 Kubernetes 环境中作为本机路径的 CSI，使用节点的本机路径来动态分配持久化存储。本节将介绍具体实现方法。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>："Local path provisioner"只是提供了 storageclass ，用于创建 pvc ,如果用户使用其他类型的 sci ,则不需要部署,可以作为没有 sci 的用户的参考项</p><p class="- topic/p p">从 github 上下载 local-path-provisioner 安装文件：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock shell"><code>$ wget https://raw.githubusercontent.com/rancher/local-path-provisioner/master/deploy/local-path-storage.yaml</code></pre><p class="- topic/p p">期望输出</p><pre class="+ topic/pre pr-d/codeblock pre codeblock bash"><code>--2022-01-12 12:05:27--  https://raw.githubusercontent.com/rancher/local-path-provisioner/master/deploy/local-path-storage.yaml                          
Resolving raw.githubusercontent.com (raw.githubusercontent.com)... 185.199.108.133, 185.199.110.133, 185.199.109.133, ...            
Connecting to raw.githubusercontent.com (raw.githubusercontent.com)|185.199.108.133|:443... connected.      
HTTP request sent, awaiting response... 200 OK                      
Length: 3451 (3.4K) [text/plain]                                     
Saving to: ‘local-path-storage.yaml’                                 
100%[=================================================================================================================================================================================================&gt;] 3,451        402B/s   in 8.6s                                                           
2022-01-12 12:09:35 (402 B/s) - ‘local-path-storage.yaml’ saved [3451/3451]</code></pre><p class="- topic/p p">修改配置：</p><br/><img class="- topic/image image" src="images/k8s_deployment/k8s-deployment-1.png" alt="image-20220112121713686"/><br/><p class="- topic/p p">该路径目的是持久过存储容器中的数据（详细介绍参考 <a class="- topic/xref xref" href="https://github.com/rancher/local-path-provisioner#configuration" target="_blank" rel="external noopener">local-path-provisioner配置</a> ）</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>：</p><ul class="- topic/ul ul"><li class="- topic/li li">修改分配 PV 的本机路径：</li><li class="- topic/li li">找到名为 "local-path-config" 的 ConfigMap 资源，其 data 字段下的 "config.json" 里包含的属性 "paths" 即为分配的 K8S 集群中的节点路径。如果配置了多个节点路径，将随机选取其中一个作为 PV。</li></ul><p class="- topic/p p">在 Kubernetes 环境中部署：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock shell"><code>$ kubectl apply -f  local-path-storage.yaml</code></pre><p class="- topic/p p">期望输出</p><pre class="+ topic/pre pr-d/codeblock pre codeblock shell"><code>namespace/local-path-storage created
serviceaccount/local-path-provisioner-service-account created
clusterrole.rbac.authorization.k8s.io/local-path-provisioner-role created
clusterrolebinding.rbac.authorization.k8s.io/local-path-provisioner-bind created
deployment.apps/local-path-provisioner created
storageclass.storage.k8s.io/local-path created
configmap/local-path-config created</code></pre></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title7" id="安装-dolphindb-套件"><h4 class="- topic/title title topictitle4" id="ariaid-title7">安装 DolphinDB 套件</h4><div class="- topic/body body"><p class="- topic/p p">DolphinDB 套件集成在名为 "dolphindb-mgr" 的 chart 包中，存储在 Helm 仓库中。通过 Helm 工具进行部署：</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">添加 DolphinDB 仓库</p><pre class="+ topic/pre pr-d/codeblock pre codeblock shell"><code>$ helm repo add dolphindb https://dolphindbit.github.io/helm-chart/</code></pre><p class="- topic/p p">期望输出：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>"dolphindb" has been added to your repositories</code></pre></li><li class="- topic/li li"><p class="- topic/p p">安装 DolphinDB 套件</p><pre class="+ topic/pre pr-d/codeblock pre codeblock shell"><code>$ helm install dolphindb-mgr dolphindb/dolphindb-mgr --set global.version="v1.0.0" --set global.serviceType=NodePort --set global.storageClass=local-path --set dolphindb-webserver.nodePortIP=192.168.100.10 --set-file license.content=$licensePath/license.lic  -ndolphindb --create-namespace</code></pre><p class="- topic/p p">DolphinDB 的进程启动需要 license 才能生效，所以需要在指令中增加 <code class="+ topic/ph pr-d/codeph ph codeph">license.content=$licensePath/license.lic</code> ，并将其改为license 所在的路径。</p><p class="- topic/p p">期望输出：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock shell"><code>NAME: dolphindb-mgr                                                 
LAST DEPLOYED: Wed Jan 12 14:39:11 2022                             
NAMESPACE: dolphindb
STATUS: deployed
REVISION: 1
TEST SUITE: None</code></pre></li></ol><p class="- topic/p p">主要参数说明如下：</p><ul class="- topic/ul ul"><li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">-ndolphindb --create-namespace</code>：将 DolphinDB 套件部署在名为 "dolphindb" 的 namespace 中，如果名为 "dolphindb" 的 namespace 不存在，则创建</li><li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">$licensePath</code>：DolphinDB License 的存放路径</li><li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">global.serviceType=NodePort, dolphindb-webserver.nodePortIP</code>：DolphinDB 套件在 Kubernetes 环境中提供的服务类型。ClusterIP：仅在 Kubernetes 环境内部访问；NodePort：通过主机端口可在 Kubernetes 环境内/外部访问；LoadBalancer：通过 Kubernetes 环境中的负载均衡供 Kubernetes 环境内/外部访问。<code class="+ topic/ph pr-d/codeph ph codeph">&lt;!--示例选择的是NodePort类型,假设您需要 LoadBalancer 类型，需要修改参数。--&gt;</code></li><li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">global.version</code>: DolphinDB 套件版本号为<a class="- topic/xref xref" href="https://hub.docker.com/r/dolphindb/dolphindb-operator/tags" target="_blank" rel="external noopener"><code class="+ topic/ph pr-d/codeph ph codeph">v1.0.0</code></a>。</li></ul><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>：DolphinDB License 必须是官方授权可用的。若使用无效的 license，会出现诸如 "persistentvolumeclaim log-ddb-t3-crt-0-0 not found" 的报错。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">参数说明</strong></p><div class="table-container"><table class="- topic/table table" data-cols="2"><caption></caption><colgroup><col/><col/></colgroup><thead class="- topic/thead thead"><tr class="- topic/row"><th class="- topic/entry entry colsep-0 rowsep-0" id="安装-dolphindb-套件__entry__1"><strong class="+ topic/ph hi-d/b ph b">参数</strong></th><th class="- topic/entry entry colsep-0 rowsep-0" id="安装-dolphindb-套件__entry__2"><strong class="+ topic/ph hi-d/b ph b">说明</strong></th></tr></thead><tbody class="- topic/tbody tbody"><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">global.registry</code></td><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__2">DolphinDB 镜像所在的 docker 注册服务器。默认为官方的 Docker Hub。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">global.repository</code></td><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__2">DolphinDB 所在的镜像仓库名称，非必要无需修改。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">global.storageClass</code></td><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__2">DolphinDB 使用的持久化存储的存储类，不指定则使用默认存储类。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">global.serviceAccount</code></td><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__2">DolphinDB 套件的 rbac 资源名称，非必要无需修改。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">global.allNamespace</code></td><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__2">DolphinDB 是否在所有 namespace 生效。true: DolphinDB 可在部署在所有 namespace 并接受其管理；false: DolphinDB 仅在部署在当前 namespace 并接受其管理。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">dolphindb-operator.replicaCount</code></td><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__2">DolphinDB 套件中 dolphindb-operator 组件的副本数。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">dolphindb-operator.imageTag</code></td><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__2">DolphinDB 套件中 dolphindb-operator 组件的版本号，不指定时与 <code class="+ topic/ph pr-d/codeph ph codeph">global.version</code> 保持一致。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">dolphindb-webserver.replicaCount</code></td><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__2">DolphinDB 套件中 dolphindb-webserver 组件的副本数。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">dolphindb-webserver.imageTag</code></td><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__2">DolphinDB 套件中 dolphindb-webserver 组件的版本号。不指定时与 <code class="+ topic/ph pr-d/codeph ph codeph">global.version</code> 保持一致。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">dolphindb-webserver.nodePortIP</code></td><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__2">webserver 展示 DolphinDB 时对外暴露 ip。如果 <code class="+ topic/ph pr-d/codeph ph codeph">global.serviceType</code> 使用 NodePort 类型，则需要指定 <code class="+ topic/ph pr-d/codeph ph codeph">nodePortIP</code>。可以指定 Kubernetes 集群中任意一个节点的 ip 为 <code class="+ topic/ph pr-d/codeph ph codeph">nodePortIP</code>。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">dolphindb.version</code></td><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__2">DolphinDB 的默认版本号。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">dolphindb.serviceType</code></td><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__2">DolphinDB 在 Kubernetes 环境提供的服务类型，详情可参考 <code class="+ topic/ph pr-d/codeph ph codeph">global.serviceType</code>。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">dolphindb.controllerDataSize</code></td><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__2">DolphinDB 的每个 Controller 节点的持久化存储数据的默认大小。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">dolphindb.datanodeDataSize</code></td><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__2">DolphinDB 的每个 Datanode 节点的持久化存储数据的默认大小。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">images.default.dolphindb-service-manager</code></td><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__2">DolphinDB 初始化镜像的默认版本号。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">images.default.dolphindb-config-loader</code></td><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__2">DolphinDB 在多 Controller 集群模式下的伴随镜像的默认版本号。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">license.name</code></td><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__2">DolphinDB License 部署后的 Configmap 资源名称，非必要无需修改。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">license.content</code></td><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__2">DolphinDB License 的内容。</td></tr><tr class="- topic/row"><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__1"><code class="+ topic/ph pr-d/codeph ph codeph">license.resources</code></td><td class="- topic/entry entry colsep-0 rowsep-0" headers="安装-dolphindb-套件__entry__2">DolphinDB 每个容器的<a class="- topic/xref xref" href="https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/" target="_blank" rel="external noopener">cpu 和 memory</a> 的默认资源配置。应与 License 中给定的资源配置相同。</td></tr></tbody></table></div><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">查看 DolphinDB 套件部署情况</p><pre class="+ topic/pre pr-d/codeblock pre codeblock shell"><code>$ helm list -ndolphindb</code></pre><p class="- topic/p p">期望输出：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock shell"><code>NAME          NAMESPACE     REVISION    UPDATED                               STATUS          CHART                   APPVERSION 
dolphindb-mgr DolphinDB     1           2022-01-12 14:39:11.493079194+0800CST deployed        dolphindb-mgr-v1.0.0    1.0.0</code></pre><pre class="+ topic/pre pr-d/codeblock pre codeblock shell"><code>$ kubectl get pods -ndolphindb</code></pre><p class="- topic/p p">期望输出：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock shell"><code>NAME                                   READY   STATUS    RESTARTS   AGE                                                     
dolphindb-operator-0                   1/1     Running   0          20m                                                     
dolphindb-operator-1                   1/1     Running   0          12m                                                     
dolphindb-webserver-5487785cfd-msr5w   1/1     Running   0          20m                                                     
dolphindb-webserver-5487785cfd-ns5dq   1/1     Running   0          20m</code></pre><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>：Helm 状态变成 deployed 以及 pod 的 STATUS 变成 Running 则表示 DolphinDB 套件部署成功。</p></li></ol></div></article></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title8" id="部署并连接-dolphindb-集群"><h3 class="- topic/title title topictitle3" id="ariaid-title8">部署并连接 DolphinDB 集群</h3><div class="- topic/body body"></div><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title9" id="可视化界面"><h4 class="- topic/title title topictitle4" id="ariaid-title9">可视化界面</h4><div class="- topic/body body"><p class="- topic/p p">DolphinDB 套件提供的可视化界面默认使用 NodePort 的 ServiceType 进行服务暴露。在完成 DolphinDB 套件部署之后，可在 Kubernetes 环境中查看可视化界面对应的 Service：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock shell"><code>$ kubectl -ndolphindb get svc | grep dolphindb-webserver

#输出结果
dolphindb-webserver   NodePort    10.109.94.68    &lt;none&gt;        8080:30908/TCP   43m</code></pre><p class="- topic/p p">通过浏览器访问 DolphinDB 套件的可视化界面：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>http://$nodeIP:$NodePort/dolphindb-cloud</code></pre><p class="- topic/p p">参数说明如下：</p><ul class="- topic/ul ul"><li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">$nodeIP</code>：Kubernetes 环境中任意 node 的 ip。</li><li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">$NodePort</code>：终端显示信息中 DolphinDB 套件的可视化界面对应的 NodePort（输出结果中的"30908"）。</li></ul><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>：</p><p class="- topic/p p">若使用 minikube 部署， 需要执行以下命令:</p><p class="- topic/p p">kubectl port-forward svc/dolphindb-webserver 8080 -ndolphindb</p><p class="- topic/p p">本教程即http://192.168.100.10:30908/dolphindb-cloud/</p></div></article><article class="- topic/topic topic nested3" aria-labelledby="ariaid-title10" id="部署-dolphindb-集群"><h4 class="- topic/title title topictitle4" id="ariaid-title10">部署 DolphinDB 集群</h4><div class="- topic/body body"><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">点击新建集群</p><br/><img class="- topic/image image" src="images/k8s_deployment/k8s-deployment-2.png" alt="image-20220112155415310"/><br/></li><li class="- topic/li li"><p class="- topic/p p">选择新建集群的配置</p><br/><img class="- topic/image image" src="images/k8s_deployment/k8s-deployment-3.png" alt="image-20220112155429794"/><br/><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>：</p><ol class="- topic/ol ol" type="a"><li class="- topic/li li">控制节点与数据节点的 CPU、内存等资源不能超过服务器本身资源，否则集群状态会有异常。</li><li class="- topic/li li">日志模式有两种分别为标准输出和输出到文件，输出到文件性能更佳（推荐）。</li><li class="- topic/li li">控制节点副本数以及数据节点副本数指的集群的控制节点与数据节点的数量。</li><li class="- topic/li li">标准 pvc 更加灵活，local path 更加简便（推荐，部署文档中的 local-path 是存储类，也是用于提供 pvc 的）。</li><li class="- topic/li li">端口指的是 container 的端口，用在 LoadBalancer 中，指定 port 。</li></ol></li><li class="- topic/li li"><p class="- topic/p p">成功部署集群</p><br/><img class="- topic/image image" src="images/k8s_deployment/k8s-deployment-4.png" alt="image-20220112161319747"/><br/><p class="- topic/p p">状态变成 <code class="+ topic/ph pr-d/codeph ph codeph">Available</code>，表示集群创建成功，可以正常提供服务。</p></li><li class="- topic/li li"><p class="- topic/p p">连接 DolphinDB 集群</p><br/><img class="- topic/image image" src="images/k8s_deployment/k8s-deployment-5.png" alt="image-20220112171813273"/><br/><p class="- topic/p p">如图所示，控制节点的 IP 和 PORT 为 <code class="+ topic/ph pr-d/codeph ph codeph">192.168.100.10:31598</code>，数据节点的 IP 和 PORT 为 <code class="+ topic/ph pr-d/codeph ph codeph">192.168.100.10:31236</code>。对于刚启动的集群，如果要连接数据节点，需要先连接 controller，通过集群管理器<a class="- topic/xref xref" href="https://gitee.com/dolphindb/Tutorials_CN/blob/master/single_machine_cluster_deploy.md#336-%E5%90%AF%E5%8A%A8%E6%95%B0%E6%8D%AE%E8%8A%82%E7%82%B9" target="_blank" rel="external noopener">开启数据节点</a>。</p><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>：目前 NodePort 服务类型的端口随机分配，不支持指定。</p></li></ol></div></article></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title11" id="升级-dolphindb-集群"><h3 class="- topic/title title topictitle3" id="ariaid-title11">升级 DolphinDB 集群</h3><div class="- topic/body body"><p class="- topic/p p">DolphinDB 组件可简化 DolphinDB 集群的滚动升级。</p><p class="- topic/p p">执行以下命令，手动修改 version 字段为 1.30.15 可将 DolphinDB 集群升级到 1.30.15 版本：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock shell"><code>$ kubectl edit ddb -ndolphindb</code></pre><br/><img class="- topic/image image" src="images/k8s_deployment/k8s-deployment-6.png" alt="image-20220112180135714"/><br/><p class="- topic/p p">如下图所示，version 变成 <code class="+ topic/ph pr-d/codeph ph codeph">1.30.15</code> 以及 status 变成 Available 状态</p><br/><img class="- topic/image image" src="images/k8s_deployment/k8s-deployment-7.png" alt="image-20220112180645872"/><br/><p class="- topic/p p"><strong class="+ topic/ph hi-d/b ph b">注意</strong>：通过 web 升级 DolphinDB 的接口正在开发中。</p></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title12" id="更新-dolphindb-集群-license-文件"><h3 class="- topic/title title topictitle3" id="ariaid-title12">更新 DolphinDB 集群 license 文件</h3><div class="- topic/body body"><p class="- topic/p p">对于已创建的集群，需要通过以下步骤更新 license 文件：</p><ol class="- topic/ol ol"><li class="- topic/li li"><p class="- topic/p p">通过以下命令，可获取 k8s 中已创建集群的名字</p><pre class="+ topic/pre pr-d/codeblock pre codeblock bash"><code>$ kubectl get cm -ndolphindb</code></pre></li><li class="- topic/li li"><p class="- topic/p p">选择需要更新 license 的集群（本例为 ddb_test1）的 yaml 文件</p><pre class="+ topic/pre pr-d/codeblock pre codeblock bash"><code>$ kubectl edit cm ddb_test1 -oyaml -ndolphindb</code></pre><br/><img class="- topic/image image" src="images/k8s_deployment/updatelicense.png"/><br/><p class="- topic/p p">如图所示，将红框圈住的部分替换为新的 license 后保存文件。</p></li><li class="- topic/li li"><p class="- topic/p p">更新 license 后，需要重启 pod</p><pre class="+ topic/pre pr-d/codeblock pre codeblock bash"><code>$ kubectl get pod -ndolphindb | grep ddb_test1 | awk '{print $1}' | xargs kubectl delete pod -ndolphindb</code></pre></li><li class="- topic/li li"><p class="- topic/p p">通过以下命令获取所有 pod</p><pre class="+ topic/pre pr-d/codeblock pre codeblock bash"><code>$ kubectl get pod -ndolphindb</code></pre><br/><img class="- topic/image image" src="images/k8s_deployment/updatelicense1.png"/><br/><p class="- topic/p p">如上图所示，表示所有 pod 重启成功，且更新的 license 文件生效。</p></li></ol></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title13" id="销毁-dolphindb-集群"><h3 class="- topic/title title topictitle3" id="ariaid-title13">销毁 DolphinDB 集群</h3><div class="- topic/body body"><p class="- topic/p p">若需要销毁 Kubernetes 集群，可参考 创建 <em class="+ topic/ph hi-d/i ph i">Kubernetes 集群</em> 小节，具体销毁方法取决于其创建方式。本节仅介绍如何销毁 DolphindDB 集群，具体操作方法如下：</p><p class="- topic/p p">方式一：通过 Web 管理器删除按钮销毁</p><br/><img class="- topic/image image" src="images/k8s_deployment/k8s-deployment-8.png" alt="image-20220113100852771"/><br/><p class="- topic/p p">方式二：通过命令行进行销毁</p><pre class="+ topic/pre pr-d/codeblock pre codeblock shell"><code>$ kubectl delete ddb $ddbName  -ndolphindb</code></pre><p class="- topic/p p">参数说明如下：</p><ul class="- topic/ul ul"><li class="- topic/li li"><code class="+ topic/ph pr-d/codeph ph codeph">$ddbName</code>：Kubernetes 环境中删除的 DolphinDB 集群名称。</li></ul></div></article><article class="- topic/topic topic nested2" aria-labelledby="ariaid-title14" id="卸载-dolphindb-套件"><h3 class="- topic/title title topictitle3" id="ariaid-title14">卸载 DolphinDB 套件</h3><div class="- topic/body body"><p class="- topic/p p">通过以下命令可卸载 DolphinDB 套件</p><pre class="+ topic/pre pr-d/codeblock pre codeblock bash"><code>$ helm uninstall dolphindb-mgr-ndolphindb</code></pre></div></article></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title15" id="k8s-中配置-coredump"><h2 class="- topic/title title topictitle2" id="ariaid-title15">K8S 中配置 CoreDump</h2><div class="- topic/body body"><p class="- topic/p p">开启 core dump 后，当某个节点崩溃时，系统会终止当前进程并生成 core dump 文件，以帮助技术人员分析解决问题。在 Kubernetes 环境中，需要在 DolphinDB 容器运行的宿主机上执行以下命令来启用 core dump，如需了解更多 core dump 信息，参阅<a class="- topic/xref xref" href="how_to_handle_crash.html">DolphinDB Crash</a>中第三节。</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>echo "/data/ddb/core/core.%p"  | sudo tee /proc/sys/kernel/core_pattern</code></pre><p class="- topic/p p">其中 "<code class="+ topic/ph pr-d/codeph ph codeph">/data/ddb/core</code>" 为 core dump 文件在容器中的路径，若与当前宿主机的配置有冲突，可在部署 DolphinDB 套件时通过参数 <code class="+ topic/ph pr-d/codeph ph codeph">dolphindb.coreDumpDir</code> 自定义。</p></div></article><article class="- topic/topic topic nested1" aria-labelledby="ariaid-title16" id="常见问题"><h2 class="- topic/title title topictitle2" id="ariaid-title16">常见问题</h2><div class="- topic/body body"><ul class="- topic/ul ul"><li class="- topic/li li"><p class="- topic/p p">创建集群后，如果 Pod 没有创建，则可以通过以下方式进行诊断：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>kubectl get pod -nlphindb
kubectl describe pod $podName -ndolphindb
kubectl get statefulsets -n dolphindb
kubectl describe statefulsets -n dolphindb</code></pre></li><li class="- topic/li li"><p class="- topic/p p">Pod 处于 Pending 状态，通常都是资源不满足导致的，比如：</p><ol class="- topic/ol ol"><li class="- topic/li li">使用持久化存储的Pod 使用的 PVC 的 StorageClass 不存在或 PV 不足</li><li class="- topic/li li">Kubernetes 集群中没有节点能满足 Pod 申请的 CPU 或内存</li></ol><p class="- topic/p p">此时，可以通过 kubectl describe pod 命令查看 Pending 的具体原因：</p><pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>kubectl describe po -n ${namespace} ${pod_name}</code></pre></li></ul></div></article></article></main></div>
                        
                        
                        
                        
                        
                        
                    </div>
                    
                        <nav role="navigation" id="wh_topic_toc" aria-label="On this page" class="col-lg-2 d-none d-lg-block navbar d-print-none"> 
                            <div id="wh_topic_toc_content">
		                        
	                            <div class=" wh_topic_toc "><div class="wh_topic_label">在本页上</div><ul><li class="topic-item"><a href="#dolphindb-in-kubernetes-%E7%AE%80%E4%BB%8B" data-tocid="dolphindb-in-kubernetes-简介">DolphinDB in Kubernetes 简介</a></li><li class="topic-item"><a href="#%E5%BF%AB%E9%80%9F%E9%83%A8%E7%BD%B2-dolphindb" data-tocid="快速部署-dolphindb">快速部署 DolphinDB</a><ul><li class="topic-item"><a href="#%E5%88%9B%E5%BB%BA-kubernetes-%E9%9B%86%E7%BE%A4" data-tocid="创建-kubernetes-集群">创建 Kubernetes 集群</a></li><li class="topic-item"><a href="#%E9%83%A8%E7%BD%B2-dolphindb-%E5%A5%97%E4%BB%B6" data-tocid="部署-dolphindb-套件">部署 DolphinDB 套件</a></li><li class="topic-item"><a href="#%E9%83%A8%E7%BD%B2-local-path-provisioner" data-tocid="部署-local-path-provisioner">部署 Local Path Provisioner</a><ul><li class="topic-item"><a href="#%E5%AE%89%E8%A3%85-dolphindb-%E5%A5%97%E4%BB%B6" data-tocid="安装-dolphindb-套件">安装 DolphinDB 套件</a></li></ul></li><li class="topic-item"><a href="#%E9%83%A8%E7%BD%B2%E5%B9%B6%E8%BF%9E%E6%8E%A5-dolphindb-%E9%9B%86%E7%BE%A4" data-tocid="部署并连接-dolphindb-集群">部署并连接 DolphinDB 集群</a><ul><li class="topic-item"><a href="#%E5%8F%AF%E8%A7%86%E5%8C%96%E7%95%8C%E9%9D%A2" data-tocid="可视化界面">可视化界面</a></li><li class="topic-item"><a href="#%E9%83%A8%E7%BD%B2-dolphindb-%E9%9B%86%E7%BE%A4" data-tocid="部署-dolphindb-集群">部署 DolphinDB 集群</a></li></ul></li><li class="topic-item"><a href="#%E5%8D%87%E7%BA%A7-dolphindb-%E9%9B%86%E7%BE%A4" data-tocid="升级-dolphindb-集群">升级 DolphinDB 集群</a></li><li class="topic-item"><a href="#%E6%9B%B4%E6%96%B0-dolphindb-%E9%9B%86%E7%BE%A4-license-%E6%96%87%E4%BB%B6" data-tocid="更新-dolphindb-集群-license-文件">更新 DolphinDB 集群 license 文件</a></li><li class="topic-item"><a href="#%E9%94%80%E6%AF%81-dolphindb-%E9%9B%86%E7%BE%A4" data-tocid="销毁-dolphindb-集群">销毁 DolphinDB 集群</a></li><li class="topic-item"><a href="#%E5%8D%B8%E8%BD%BD-dolphindb-%E5%A5%97%E4%BB%B6" data-tocid="卸载-dolphindb-套件">卸载 DolphinDB 套件</a></li></ul></li><li class="topic-item"><a href="#k8s-%E4%B8%AD%E9%85%8D%E7%BD%AE-coredump" data-tocid="k8s-中配置-coredump">K8S 中配置 CoreDump</a></li><li class="topic-item"><a href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98" data-tocid="常见问题">常见问题</a></li></ul></div>
	                        	
                        	</div>
                        </nav>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
<title>Copyright</title><p><b> ©2025 浙江智臾科技有限公司 浙ICP备18048711号-3</b></p>
  </div>
</footer>
        
        <div id="go2top" class="d-print-none">
            <span class="oxy-icon oxy-icon-up"></span>
        </div>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        
        
    </body>
</html>